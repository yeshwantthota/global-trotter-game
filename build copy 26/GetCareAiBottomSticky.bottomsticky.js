(window["webpackJsonpBottomSticky"] = window["webpackJsonpBottomSticky"] || []).push([["GetCareAiBottomSticky"],{

/***/ "./src/CareAI_V2/index.js":
/*!********************************!*\
  !*** ./src/CareAI_V2/index.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/constants */ \"./src/common/constants/index.js\");\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.scss */ \"./src/CareAI_V2/index.scss\");\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_index_scss__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _practo_practo_ai_dist_styles_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @practo/practo-ai/dist/styles.css */ \"./node_modules/@practo/practo-ai/dist/styles.css\");\n/* harmony import */ var _practo_practo_ai_dist_styles_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_practo_practo_ai_dist_styles_css__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nclass GetCareAiBottomSticky {\n  constructor(props) {\n    const {\n      product,\n      payload = {},\n      is_placement_controlled\n    } = props;\n    const {\n      appId,\n      isDoctorProfilePage,\n      isUserLoggedIn,\n      handleBottomTabClick,\n      handleTrackEvent,\n      currentLocation\n    } = payload;\n    this.product = product;\n    this.use_default_placement = !is_placement_controlled;\n    this.appId = appId;\n    this.isUserLoggedIn = isUserLoggedIn;\n    this.isDoctorProfilePage = isDoctorProfilePage;\n    this.handleBottomTabClick = handleBottomTabClick;\n    this.trackEvent = handleTrackEvent;\n    this.currentLocation = currentLocation;\n    const product_data = this.getProductData();\n    const {\n      meta_data,\n      query_selectors,\n      hide_mweb,\n      hide_dweb\n    } = product_data;\n    this.meta_data = meta_data || {};\n    this.query_selectors = query_selectors;\n    this.hide_dweb = hide_dweb;\n    this.hide_mweb = hide_mweb;\n  }\n  getActiveVersion() {\n    return _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_version_map\"][this.product];\n  }\n  getProductData() {\n    const {\n      product_name: default_product_name,\n      meta_data: default_meta_data,\n      query_selectors: default_query_selectors,\n      hide_dweb: default_hide_dweb,\n      hide_mweb: default_hide_mweb\n    } = _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"default_config\"];\n    let product_name = default_product_name;\n    let meta_data = default_meta_data || {};\n    let active_version = null;\n    let query_selectors = default_query_selectors;\n    let hide_mweb = default_hide_mweb;\n    let hide_dweb = default_hide_dweb;\n    if (this.product && _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_config\"][this.product]) {\n      product_name = _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_name_map\"][this.product];\n      active_version = this.getActiveVersion();\n      meta_data = _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_config\"][product_name][active_version].meta_data;\n      query_selectors = _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_config\"][product_name][active_version].query_selectors;\n      hide_mweb = _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_config\"][product_name][active_version].hide_mweb;\n      hide_dweb = _common_constants__WEBPACK_IMPORTED_MODULE_0__[\"product_config\"][product_name][active_version].hide_dweb;\n    }\n    return {\n      meta_data,\n      query_selectors,\n      hide_dweb,\n      hide_mweb\n    };\n  }\n  attachEvent(_ref) {\n    let {\n      element,\n      type,\n      cb\n    } = _ref;\n    if (!element || !cb) {\n      return;\n    }\n    element.addEventListener(type, cb);\n  }\n  startAnimation() {\n    const animatedInput = document.getElementById(\"animatedInput\");\n    if (!animatedInput) {\n      setTimeout(startAnimation, 100);\n      return;\n    }\n    let placeholder = \"\";\n    let isDeleting = false;\n    let loopNum = 0;\n    let typingSpeed = 100;\n    const searchTexts = [\"Search for doctors near me...\", \"How do I book an appointment?\", \"What are the best clinics for dental care?\", \"Find nearby pharmacies...\"];\n    let animationTimer = null;\n    function animatePlaceholder() {\n      if (!document.getElementById(\"animatedInput\")) return;\n      if (animationTimer) {\n        clearTimeout(animationTimer);\n        animationTimer = null;\n      }\n      const currentText = searchTexts[loopNum % searchTexts.length];\n      if (!isDeleting && placeholder.length < currentText.length) {\n        placeholder = currentText.substring(0, placeholder.length + 1);\n        animatedInput.setAttribute(\"placeholder\", placeholder);\n        animationTimer = setTimeout(animatePlaceholder, typingSpeed);\n      } else if (!isDeleting && placeholder.length === currentText.length) {\n        animationTimer = setTimeout(() => {\n          isDeleting = true;\n          typingSpeed = 53;\n          animatePlaceholder();\n        }, 1333);\n      } else if (isDeleting && placeholder.length > 0) {\n        placeholder = currentText.substring(0, placeholder.length - 1);\n        animatedInput.setAttribute(\"placeholder\", placeholder);\n        animationTimer = setTimeout(animatePlaceholder, typingSpeed);\n      } else if (isDeleting && placeholder.length === 0) {\n        isDeleting = false;\n        loopNum++;\n        typingSpeed = 100;\n        animationTimer = setTimeout(animatePlaceholder, typingSpeed);\n      }\n    }\n    animatePlaceholder();\n  }\n  getCookie(name) {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) return parts.pop().split(';').shift();\n    return null;\n  }\n  async handleMwebRedirection() {\n    const root_ele_id = this.query_selectors.mweb.root_ele;\n    const mweb_modal_cta = document.querySelector(`#${root_ele_id}`);\n\n    // Start animation immediately\n    this.startAnimation();\n    let CareAIComponent;\n    const module = await Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1), __webpack_require__.e(3)]).then(__webpack_require__.bind(null, /*! @practo/practo-ai */ \"./node_modules/@practo/practo-ai/dist/index.es.js\"));\n    if (module.CareAIPage) {\n      CareAIComponent = module.CareAIPage;\n    }\n    const mwebOpenModalHandler = async e => {\n      // debugger;\n      console.log(\"mwebOpenModalHandler\");\n      e.preventDefault();\n      e.stopPropagation();\n      let root_modal_ele_id = \"care-ai-modal\";\n      const React = (await __webpack_require__.e(/*! import() */ 0).then(__webpack_require__.t.bind(null, /*! react */ \"./node_modules/react/index.js\", 7))).default;\n      const ReactDOM = (await Promise.all(/*! import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.t.bind(null, /*! react-dom */ \"./node_modules/react-dom/index.js\", 7))).default;\n      let container = document.createElement(\"div\");\n      container.id = root_modal_ele_id;\n      let modal_el = document.getElementById(root_modal_ele_id);\n      if (!modal_el) {\n        document.body.appendChild(container);\n        modal_el = document.getElementById(root_modal_ele_id);\n      }\n      const appId = this.appId;\n      let isUserLoggedIn = this.isUserLoggedIn;\n      if (!isUserLoggedIn) {\n        const modalLoginCookie = this.getCookie('modal_login');\n        isUserLoggedIn = modalLoginCookie !== null;\n      }\n      const trackEvent = this.trackEvent;\n      const currentLocation = this.currentLocation;\n      this.handleBottomTabClick && this.handleBottomTabClick();\n      const element = React.createElement(CareAIComponent, {\n        appId,\n        isUserLoggedIn,\n        trackEvent,\n        currentLocation\n      });\n      if (!modal_el) {\n        ReactDOM.createRoot(container).render(element);\n      } else {\n        ReactDOM.render(element, container);\n      }\n      let inputElement = document.querySelector(`#${root_modal_ele_id} input`);\n      // When the input field is focused\n      inputElement.addEventListener(\"focus\", () => {\n        setTimeout(() => {\n          const bottomSheet = document.querySelector(`#${root_modal_ele_id} button`);\n          bottomSheet.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"end\"\n          });\n        }, 300); // Small delay to allow keyboard to appear\n      });\n    };\n    mweb_modal_cta && this.attachEvent({\n      element: mweb_modal_cta,\n      cb: mwebOpenModalHandler,\n      type: \"click\"\n    });\n  }\n  registerHandlers() {\n    !this.hide_mweb && this.handleMwebRedirection();\n  }\n  getTemplate() {\n    const template = `\n        ${!this.hide_mweb ? this.getMwebTemplate() : \"\"}\n      `;\n    return template;\n  }\n  getMwebTemplate() {\n    const root_ele_id = this.query_selectors.mweb.root_ele;\n    return `\n      <div class=\"care-ai-container ${this.isDoctorProfilePage ? \"care-ai-at-profile\" : \"\"}\" id=\"${root_ele_id}\">\n      <div class=\"care-ai-header\">\n        <div class=\"care-ai-avatar\">\n          <img class=\"doctor-profile-image\" src=\"${this.meta_data.doctor_image}\" alt=\"care-ai-avatar\">\n        </div>\n        <span class=\"care-ai-header-text\">\n          Not finding what you need? Ask Care AI\n        </span>\n        <span class=\"care-ai-free-label\">FREE</span>\n      </div>\n      <div class=\"care-ai-input-row\" id=\"inputRow\">\n        <input type=\"text\" class=\"care-ai-input\" id=\"animatedInput\" placeholder=\"\" readOnly>\n        <button class=\"care-ai-send-button\">\n          <img class=\"care-ai-send-icon\" src=\"${this.meta_data.send_button_icon}\" alt=\"send-button\">\n        </button>\n      </div>\n    </div>\n      `;\n  }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (GetCareAiBottomSticky);\n\n//# sourceURL=webpack://BottomSticky/./src/CareAI_V2/index.js?");

/***/ }),

/***/ "./src/CareAI_V2/index.scss":
/*!**********************************!*\
  !*** ./src/CareAI_V2/index.scss ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://BottomSticky/./src/CareAI_V2/index.scss?");

/***/ })

}]);