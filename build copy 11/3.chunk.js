(window["webpackJsonpBottomSticky"] = window["webpackJsonpBottomSticky"] || []).push([[3],{

/***/ "./node_modules/@practo/practo-ai/dist/index-CAyIAEUS.js":
/*!***************************************************************!*\
  !*** ./node_modules/@practo/practo-ai/dist/index-CAyIAEUS.js ***!
  \***************************************************************/
/*! exports provided: C, L, V, Z, a, b, c, d, e, j, q, r, s, u */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global, Buffer) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"C\", function() { return CareAiChatContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"L\", function() { return LoginModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"V\", function() { return Ve$2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Z\", function() { return Ze$2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return VOICE_RECORDER_AUDIO_SAMPLE_RATE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return b$2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return commonjsGlobal$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return CareAIBottomStickyModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return CareAIPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return je$2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"q\", function() { return qe$2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"r\", function() { return rt$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"s\", function() { return st$1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"u\", function() { return uo; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nvar commonjsGlobal$1 = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nfunction getDefaultExportFromCjs$1(x3) {\n  return x3 && x3.__esModule && Object.prototype.hasOwnProperty.call(x3, \"default\") ? x3[\"default\"] : x3;\n}\nvar jsxRuntime = { exports: {} };\nvar reactJsxRuntime_production_min = {};\n/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar hasRequiredReactJsxRuntime_production_min;\nfunction requireReactJsxRuntime_production_min() {\n  if (hasRequiredReactJsxRuntime_production_min) return reactJsxRuntime_production_min;\n  hasRequiredReactJsxRuntime_production_min = 1;\n  var f2 = react__WEBPACK_IMPORTED_MODULE_0___default.a, k3 = Symbol.for(\"react.element\"), l2 = Symbol.for(\"react.fragment\"), m4 = Object.prototype.hasOwnProperty, n2 = f2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, p2 = { key: true, ref: true, __self: true, __source: true };\n  function q3(c3, a4, g2) {\n    var b3, d4 = {}, e3 = null, h4 = null;\n    void 0 !== g2 && (e3 = \"\" + g2);\n    void 0 !== a4.key && (e3 = \"\" + a4.key);\n    void 0 !== a4.ref && (h4 = a4.ref);\n    for (b3 in a4) m4.call(a4, b3) && !p2.hasOwnProperty(b3) && (d4[b3] = a4[b3]);\n    if (c3 && c3.defaultProps) for (b3 in a4 = c3.defaultProps, a4) void 0 === d4[b3] && (d4[b3] = a4[b3]);\n    return { $$typeof: k3, type: c3, key: e3, ref: h4, props: d4, _owner: n2.current };\n  }\n  reactJsxRuntime_production_min.Fragment = l2;\n  reactJsxRuntime_production_min.jsx = q3;\n  reactJsxRuntime_production_min.jsxs = q3;\n  return reactJsxRuntime_production_min;\n}\nvar reactJsxRuntime_development = {};\n/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar hasRequiredReactJsxRuntime_development;\nfunction requireReactJsxRuntime_development() {\n  if (hasRequiredReactJsxRuntime_development) return reactJsxRuntime_development;\n  hasRequiredReactJsxRuntime_development = 1;\n  if (true) {\n    (function() {\n      var React = react__WEBPACK_IMPORTED_MODULE_0___default.a;\n      var REACT_ELEMENT_TYPE = Symbol.for(\"react.element\");\n      var REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\n      var REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\n      var REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\");\n      var REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\n      var REACT_PROVIDER_TYPE = Symbol.for(\"react.provider\");\n      var REACT_CONTEXT_TYPE = Symbol.for(\"react.context\");\n      var REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\");\n      var REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\");\n      var REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\");\n      var REACT_MEMO_TYPE = Symbol.for(\"react.memo\");\n      var REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\n      var REACT_OFFSCREEN_TYPE = Symbol.for(\"react.offscreen\");\n      var MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\n      var FAUX_ITERATOR_SYMBOL = \"@@iterator\";\n      function getIteratorFn(maybeIterable) {\n        if (maybeIterable === null || typeof maybeIterable !== \"object\") {\n          return null;\n        }\n        var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n        if (typeof maybeIterator === \"function\") {\n          return maybeIterator;\n        }\n        return null;\n      }\n      var ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n      function error(format2) {\n        {\n          {\n            for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n            printWarning(\"error\", format2, args);\n          }\n        }\n      }\n      function printWarning(level, format2, args) {\n        {\n          var ReactDebugCurrentFrame2 = ReactSharedInternals.ReactDebugCurrentFrame;\n          var stack = ReactDebugCurrentFrame2.getStackAddendum();\n          if (stack !== \"\") {\n            format2 += \"%s\";\n            args = args.concat([stack]);\n          }\n          var argsWithFormat = args.map(function(item) {\n            return String(item);\n          });\n          argsWithFormat.unshift(\"Warning: \" + format2);\n          Function.prototype.apply.call(console[level], console, argsWithFormat);\n        }\n      }\n      var enableScopeAPI = false;\n      var enableCacheElement = false;\n      var enableTransitionTracing = false;\n      var enableLegacyHidden = false;\n      var enableDebugTracing = false;\n      var REACT_MODULE_REFERENCE;\n      {\n        REACT_MODULE_REFERENCE = Symbol.for(\"react.module.reference\");\n      }\n      function isValidElementType(type) {\n        if (typeof type === \"string\" || typeof type === \"function\") {\n          return true;\n        }\n        if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden || type === REACT_OFFSCREEN_TYPE || enableScopeAPI || enableCacheElement || enableTransitionTracing) {\n          return true;\n        }\n        if (typeof type === \"object\" && type !== null) {\n          if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n          // types supported by any Flight configuration anywhere since\n          // we don't know which Flight build this will end up being used\n          // with.\n          type.$$typeof === REACT_MODULE_REFERENCE || type.getModuleId !== void 0) {\n            return true;\n          }\n        }\n        return false;\n      }\n      function getWrappedName(outerType, innerType, wrapperName) {\n        var displayName = outerType.displayName;\n        if (displayName) {\n          return displayName;\n        }\n        var functionName = innerType.displayName || innerType.name || \"\";\n        return functionName !== \"\" ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n      }\n      function getContextName(type) {\n        return type.displayName || \"Context\";\n      }\n      function getComponentNameFromType(type) {\n        if (type == null) {\n          return null;\n        }\n        {\n          if (typeof type.tag === \"number\") {\n            error(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\");\n          }\n        }\n        if (typeof type === \"function\") {\n          return type.displayName || type.name || null;\n        }\n        if (typeof type === \"string\") {\n          return type;\n        }\n        switch (type) {\n          case REACT_FRAGMENT_TYPE:\n            return \"Fragment\";\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_PROFILER_TYPE:\n            return \"Profiler\";\n          case REACT_STRICT_MODE_TYPE:\n            return \"StrictMode\";\n          case REACT_SUSPENSE_TYPE:\n            return \"Suspense\";\n          case REACT_SUSPENSE_LIST_TYPE:\n            return \"SuspenseList\";\n        }\n        if (typeof type === \"object\") {\n          switch (type.$$typeof) {\n            case REACT_CONTEXT_TYPE:\n              var context = type;\n              return getContextName(context) + \".Consumer\";\n            case REACT_PROVIDER_TYPE:\n              var provider = type;\n              return getContextName(provider._context) + \".Provider\";\n            case REACT_FORWARD_REF_TYPE:\n              return getWrappedName(type, type.render, \"ForwardRef\");\n            case REACT_MEMO_TYPE:\n              var outerName = type.displayName || null;\n              if (outerName !== null) {\n                return outerName;\n              }\n              return getComponentNameFromType(type.type) || \"Memo\";\n            case REACT_LAZY_TYPE: {\n              var lazyComponent = type;\n              var payload = lazyComponent._payload;\n              var init = lazyComponent._init;\n              try {\n                return getComponentNameFromType(init(payload));\n              } catch (x3) {\n                return null;\n              }\n            }\n          }\n        }\n        return null;\n      }\n      var assign = Object.assign;\n      var disabledDepth = 0;\n      var prevLog;\n      var prevInfo;\n      var prevWarn;\n      var prevError;\n      var prevGroup;\n      var prevGroupCollapsed;\n      var prevGroupEnd;\n      function disabledLog() {\n      }\n      disabledLog.__reactDisabledLog = true;\n      function disableLogs() {\n        {\n          if (disabledDepth === 0) {\n            prevLog = console.log;\n            prevInfo = console.info;\n            prevWarn = console.warn;\n            prevError = console.error;\n            prevGroup = console.group;\n            prevGroupCollapsed = console.groupCollapsed;\n            prevGroupEnd = console.groupEnd;\n            var props = {\n              configurable: true,\n              enumerable: true,\n              value: disabledLog,\n              writable: true\n            };\n            Object.defineProperties(console, {\n              info: props,\n              log: props,\n              warn: props,\n              error: props,\n              group: props,\n              groupCollapsed: props,\n              groupEnd: props\n            });\n          }\n          disabledDepth++;\n        }\n      }\n      function reenableLogs() {\n        {\n          disabledDepth--;\n          if (disabledDepth === 0) {\n            var props = {\n              configurable: true,\n              enumerable: true,\n              writable: true\n            };\n            Object.defineProperties(console, {\n              log: assign({}, props, {\n                value: prevLog\n              }),\n              info: assign({}, props, {\n                value: prevInfo\n              }),\n              warn: assign({}, props, {\n                value: prevWarn\n              }),\n              error: assign({}, props, {\n                value: prevError\n              }),\n              group: assign({}, props, {\n                value: prevGroup\n              }),\n              groupCollapsed: assign({}, props, {\n                value: prevGroupCollapsed\n              }),\n              groupEnd: assign({}, props, {\n                value: prevGroupEnd\n              })\n            });\n          }\n          if (disabledDepth < 0) {\n            error(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\");\n          }\n        }\n      }\n      var ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n      var prefix;\n      function describeBuiltInComponentFrame(name2, source, ownerFn) {\n        {\n          if (prefix === void 0) {\n            try {\n              throw Error();\n            } catch (x3) {\n              var match2 = x3.stack.trim().match(/\\n( *(at )?)/);\n              prefix = match2 && match2[1] || \"\";\n            }\n          }\n          return \"\\n\" + prefix + name2;\n        }\n      }\n      var reentry = false;\n      var componentFrameCache;\n      {\n        var PossiblyWeakMap = typeof WeakMap === \"function\" ? WeakMap : Map;\n        componentFrameCache = new PossiblyWeakMap();\n      }\n      function describeNativeComponentFrame(fn2, construct2) {\n        if (!fn2 || reentry) {\n          return \"\";\n        }\n        {\n          var frame = componentFrameCache.get(fn2);\n          if (frame !== void 0) {\n            return frame;\n          }\n        }\n        var control;\n        reentry = true;\n        var previousPrepareStackTrace = Error.prepareStackTrace;\n        Error.prepareStackTrace = void 0;\n        var previousDispatcher;\n        {\n          previousDispatcher = ReactCurrentDispatcher.current;\n          ReactCurrentDispatcher.current = null;\n          disableLogs();\n        }\n        try {\n          if (construct2) {\n            var Fake = function() {\n              throw Error();\n            };\n            Object.defineProperty(Fake.prototype, \"props\", {\n              set: function() {\n                throw Error();\n              }\n            });\n            if (typeof Reflect === \"object\" && Reflect.construct) {\n              try {\n                Reflect.construct(Fake, []);\n              } catch (x3) {\n                control = x3;\n              }\n              Reflect.construct(fn2, [], Fake);\n            } else {\n              try {\n                Fake.call();\n              } catch (x3) {\n                control = x3;\n              }\n              fn2.call(Fake.prototype);\n            }\n          } else {\n            try {\n              throw Error();\n            } catch (x3) {\n              control = x3;\n            }\n            fn2();\n          }\n        } catch (sample) {\n          if (sample && control && typeof sample.stack === \"string\") {\n            var sampleLines = sample.stack.split(\"\\n\");\n            var controlLines = control.stack.split(\"\\n\");\n            var s4 = sampleLines.length - 1;\n            var c3 = controlLines.length - 1;\n            while (s4 >= 1 && c3 >= 0 && sampleLines[s4] !== controlLines[c3]) {\n              c3--;\n            }\n            for (; s4 >= 1 && c3 >= 0; s4--, c3--) {\n              if (sampleLines[s4] !== controlLines[c3]) {\n                if (s4 !== 1 || c3 !== 1) {\n                  do {\n                    s4--;\n                    c3--;\n                    if (c3 < 0 || sampleLines[s4] !== controlLines[c3]) {\n                      var _frame = \"\\n\" + sampleLines[s4].replace(\" at new \", \" at \");\n                      if (fn2.displayName && _frame.includes(\"<anonymous>\")) {\n                        _frame = _frame.replace(\"<anonymous>\", fn2.displayName);\n                      }\n                      {\n                        if (typeof fn2 === \"function\") {\n                          componentFrameCache.set(fn2, _frame);\n                        }\n                      }\n                      return _frame;\n                    }\n                  } while (s4 >= 1 && c3 >= 0);\n                }\n                break;\n              }\n            }\n          }\n        } finally {\n          reentry = false;\n          {\n            ReactCurrentDispatcher.current = previousDispatcher;\n            reenableLogs();\n          }\n          Error.prepareStackTrace = previousPrepareStackTrace;\n        }\n        var name2 = fn2 ? fn2.displayName || fn2.name : \"\";\n        var syntheticFrame = name2 ? describeBuiltInComponentFrame(name2) : \"\";\n        {\n          if (typeof fn2 === \"function\") {\n            componentFrameCache.set(fn2, syntheticFrame);\n          }\n        }\n        return syntheticFrame;\n      }\n      function describeFunctionComponentFrame(fn2, source, ownerFn) {\n        {\n          return describeNativeComponentFrame(fn2, false);\n        }\n      }\n      function shouldConstruct(Component2) {\n        var prototype = Component2.prototype;\n        return !!(prototype && prototype.isReactComponent);\n      }\n      function describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n        if (type == null) {\n          return \"\";\n        }\n        if (typeof type === \"function\") {\n          {\n            return describeNativeComponentFrame(type, shouldConstruct(type));\n          }\n        }\n        if (typeof type === \"string\") {\n          return describeBuiltInComponentFrame(type);\n        }\n        switch (type) {\n          case REACT_SUSPENSE_TYPE:\n            return describeBuiltInComponentFrame(\"Suspense\");\n          case REACT_SUSPENSE_LIST_TYPE:\n            return describeBuiltInComponentFrame(\"SuspenseList\");\n        }\n        if (typeof type === \"object\") {\n          switch (type.$$typeof) {\n            case REACT_FORWARD_REF_TYPE:\n              return describeFunctionComponentFrame(type.render);\n            case REACT_MEMO_TYPE:\n              return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n            case REACT_LAZY_TYPE: {\n              var lazyComponent = type;\n              var payload = lazyComponent._payload;\n              var init = lazyComponent._init;\n              try {\n                return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n              } catch (x3) {\n              }\n            }\n          }\n        }\n        return \"\";\n      }\n      var hasOwnProperty2 = Object.prototype.hasOwnProperty;\n      var loggedTypeFailures = {};\n      var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n      function setCurrentlyValidatingElement(element2) {\n        {\n          if (element2) {\n            var owner = element2._owner;\n            var stack = describeUnknownElementTypeFrameInDEV(element2.type, element2._source, owner ? owner.type : null);\n            ReactDebugCurrentFrame.setExtraStackFrame(stack);\n          } else {\n            ReactDebugCurrentFrame.setExtraStackFrame(null);\n          }\n        }\n      }\n      function checkPropTypes(typeSpecs, values, location2, componentName, element2) {\n        {\n          var has = Function.call.bind(hasOwnProperty2);\n          for (var typeSpecName in typeSpecs) {\n            if (has(typeSpecs, typeSpecName)) {\n              var error$1 = void 0;\n              try {\n                if (typeof typeSpecs[typeSpecName] !== \"function\") {\n                  var err = Error((componentName || \"React class\") + \": \" + location2 + \" type `\" + typeSpecName + \"` is invalid; it must be a function, usually from the `prop-types` package, but received `\" + typeof typeSpecs[typeSpecName] + \"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");\n                  err.name = \"Invariant Violation\";\n                  throw err;\n                }\n                error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location2, null, \"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\");\n              } catch (ex) {\n                error$1 = ex;\n              }\n              if (error$1 && !(error$1 instanceof Error)) {\n                setCurrentlyValidatingElement(element2);\n                error(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\", componentName || \"React class\", location2, typeSpecName, typeof error$1);\n                setCurrentlyValidatingElement(null);\n              }\n              if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n                loggedTypeFailures[error$1.message] = true;\n                setCurrentlyValidatingElement(element2);\n                error(\"Failed %s type: %s\", location2, error$1.message);\n                setCurrentlyValidatingElement(null);\n              }\n            }\n          }\n        }\n      }\n      var isArrayImpl = Array.isArray;\n      function isArray3(a4) {\n        return isArrayImpl(a4);\n      }\n      function typeName(value) {\n        {\n          var hasToStringTag = typeof Symbol === \"function\" && Symbol.toStringTag;\n          var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || \"Object\";\n          return type;\n        }\n      }\n      function willCoercionThrow(value) {\n        {\n          try {\n            testStringCoercion(value);\n            return false;\n          } catch (e3) {\n            return true;\n          }\n        }\n      }\n      function testStringCoercion(value) {\n        return \"\" + value;\n      }\n      function checkKeyStringCoercion(value) {\n        {\n          if (willCoercionThrow(value)) {\n            error(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\", typeName(value));\n            return testStringCoercion(value);\n          }\n        }\n      }\n      var ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\n      var RESERVED_PROPS = {\n        key: true,\n        ref: true,\n        __self: true,\n        __source: true\n      };\n      var specialPropKeyWarningShown;\n      var specialPropRefWarningShown;\n      function hasValidRef(config2) {\n        {\n          if (hasOwnProperty2.call(config2, \"ref\")) {\n            var getter = Object.getOwnPropertyDescriptor(config2, \"ref\").get;\n            if (getter && getter.isReactWarning) {\n              return false;\n            }\n          }\n        }\n        return config2.ref !== void 0;\n      }\n      function hasValidKey(config2) {\n        {\n          if (hasOwnProperty2.call(config2, \"key\")) {\n            var getter = Object.getOwnPropertyDescriptor(config2, \"key\").get;\n            if (getter && getter.isReactWarning) {\n              return false;\n            }\n          }\n        }\n        return config2.key !== void 0;\n      }\n      function warnIfStringRefCannotBeAutoConverted(config2, self2) {\n        {\n          if (typeof config2.ref === \"string\" && ReactCurrentOwner.current && self2) ;\n        }\n      }\n      function defineKeyPropWarningGetter(props, displayName) {\n        {\n          var warnAboutAccessingKey = function() {\n            if (!specialPropKeyWarningShown) {\n              specialPropKeyWarningShown = true;\n              error(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\", displayName);\n            }\n          };\n          warnAboutAccessingKey.isReactWarning = true;\n          Object.defineProperty(props, \"key\", {\n            get: warnAboutAccessingKey,\n            configurable: true\n          });\n        }\n      }\n      function defineRefPropWarningGetter(props, displayName) {\n        {\n          var warnAboutAccessingRef = function() {\n            if (!specialPropRefWarningShown) {\n              specialPropRefWarningShown = true;\n              error(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\", displayName);\n            }\n          };\n          warnAboutAccessingRef.isReactWarning = true;\n          Object.defineProperty(props, \"ref\", {\n            get: warnAboutAccessingRef,\n            configurable: true\n          });\n        }\n      }\n      var ReactElement = function(type, key, ref, self2, source, owner, props) {\n        var element2 = {\n          // This tag allows us to uniquely identify this as a React Element\n          $$typeof: REACT_ELEMENT_TYPE,\n          // Built-in properties that belong on the element\n          type,\n          key,\n          ref,\n          props,\n          // Record the component responsible for creating this element.\n          _owner: owner\n        };\n        {\n          element2._store = {};\n          Object.defineProperty(element2._store, \"validated\", {\n            configurable: false,\n            enumerable: false,\n            writable: true,\n            value: false\n          });\n          Object.defineProperty(element2, \"_self\", {\n            configurable: false,\n            enumerable: false,\n            writable: false,\n            value: self2\n          });\n          Object.defineProperty(element2, \"_source\", {\n            configurable: false,\n            enumerable: false,\n            writable: false,\n            value: source\n          });\n          if (Object.freeze) {\n            Object.freeze(element2.props);\n            Object.freeze(element2);\n          }\n        }\n        return element2;\n      };\n      function jsxDEV(type, config2, maybeKey, source, self2) {\n        {\n          var propName;\n          var props = {};\n          var key = null;\n          var ref = null;\n          if (maybeKey !== void 0) {\n            {\n              checkKeyStringCoercion(maybeKey);\n            }\n            key = \"\" + maybeKey;\n          }\n          if (hasValidKey(config2)) {\n            {\n              checkKeyStringCoercion(config2.key);\n            }\n            key = \"\" + config2.key;\n          }\n          if (hasValidRef(config2)) {\n            ref = config2.ref;\n            warnIfStringRefCannotBeAutoConverted(config2, self2);\n          }\n          for (propName in config2) {\n            if (hasOwnProperty2.call(config2, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n              props[propName] = config2[propName];\n            }\n          }\n          if (type && type.defaultProps) {\n            var defaultProps = type.defaultProps;\n            for (propName in defaultProps) {\n              if (props[propName] === void 0) {\n                props[propName] = defaultProps[propName];\n              }\n            }\n          }\n          if (key || ref) {\n            var displayName = typeof type === \"function\" ? type.displayName || type.name || \"Unknown\" : type;\n            if (key) {\n              defineKeyPropWarningGetter(props, displayName);\n            }\n            if (ref) {\n              defineRefPropWarningGetter(props, displayName);\n            }\n          }\n          return ReactElement(type, key, ref, self2, source, ReactCurrentOwner.current, props);\n        }\n      }\n      var ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\n      var ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n      function setCurrentlyValidatingElement$1(element2) {\n        {\n          if (element2) {\n            var owner = element2._owner;\n            var stack = describeUnknownElementTypeFrameInDEV(element2.type, element2._source, owner ? owner.type : null);\n            ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n          } else {\n            ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n          }\n        }\n      }\n      var propTypesMisspellWarningShown;\n      {\n        propTypesMisspellWarningShown = false;\n      }\n      function isValidElement(object) {\n        {\n          return typeof object === \"object\" && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n        }\n      }\n      function getDeclarationErrorAddendum() {\n        {\n          if (ReactCurrentOwner$1.current) {\n            var name2 = getComponentNameFromType(ReactCurrentOwner$1.current.type);\n            if (name2) {\n              return \"\\n\\nCheck the render method of `\" + name2 + \"`.\";\n            }\n          }\n          return \"\";\n        }\n      }\n      function getSourceInfoErrorAddendum(source) {\n        {\n          return \"\";\n        }\n      }\n      var ownerHasKeyUseWarning = {};\n      function getCurrentComponentErrorInfo(parentType) {\n        {\n          var info = getDeclarationErrorAddendum();\n          if (!info) {\n            var parentName = typeof parentType === \"string\" ? parentType : parentType.displayName || parentType.name;\n            if (parentName) {\n              info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n            }\n          }\n          return info;\n        }\n      }\n      function validateExplicitKey(element2, parentType) {\n        {\n          if (!element2._store || element2._store.validated || element2.key != null) {\n            return;\n          }\n          element2._store.validated = true;\n          var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n          if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n            return;\n          }\n          ownerHasKeyUseWarning[currentComponentErrorInfo] = true;\n          var childOwner = \"\";\n          if (element2 && element2._owner && element2._owner !== ReactCurrentOwner$1.current) {\n            childOwner = \" It was passed a child from \" + getComponentNameFromType(element2._owner.type) + \".\";\n          }\n          setCurrentlyValidatingElement$1(element2);\n          error('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n          setCurrentlyValidatingElement$1(null);\n        }\n      }\n      function validateChildKeys(node2, parentType) {\n        {\n          if (typeof node2 !== \"object\") {\n            return;\n          }\n          if (isArray3(node2)) {\n            for (var i3 = 0; i3 < node2.length; i3++) {\n              var child = node2[i3];\n              if (isValidElement(child)) {\n                validateExplicitKey(child, parentType);\n              }\n            }\n          } else if (isValidElement(node2)) {\n            if (node2._store) {\n              node2._store.validated = true;\n            }\n          } else if (node2) {\n            var iteratorFn = getIteratorFn(node2);\n            if (typeof iteratorFn === \"function\") {\n              if (iteratorFn !== node2.entries) {\n                var iterator = iteratorFn.call(node2);\n                var step;\n                while (!(step = iterator.next()).done) {\n                  if (isValidElement(step.value)) {\n                    validateExplicitKey(step.value, parentType);\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      function validatePropTypes(element2) {\n        {\n          var type = element2.type;\n          if (type === null || type === void 0 || typeof type === \"string\") {\n            return;\n          }\n          var propTypes;\n          if (typeof type === \"function\") {\n            propTypes = type.propTypes;\n          } else if (typeof type === \"object\" && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n          // Inner props are checked in the reconciler.\n          type.$$typeof === REACT_MEMO_TYPE)) {\n            propTypes = type.propTypes;\n          } else {\n            return;\n          }\n          if (propTypes) {\n            var name2 = getComponentNameFromType(type);\n            checkPropTypes(propTypes, element2.props, \"prop\", name2, element2);\n          } else if (type.PropTypes !== void 0 && !propTypesMisspellWarningShown) {\n            propTypesMisspellWarningShown = true;\n            var _name = getComponentNameFromType(type);\n            error(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\", _name || \"Unknown\");\n          }\n          if (typeof type.getDefaultProps === \"function\" && !type.getDefaultProps.isReactClassApproved) {\n            error(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\");\n          }\n        }\n      }\n      function validateFragmentProps(fragment) {\n        {\n          var keys2 = Object.keys(fragment.props);\n          for (var i3 = 0; i3 < keys2.length; i3++) {\n            var key = keys2[i3];\n            if (key !== \"children\" && key !== \"key\") {\n              setCurrentlyValidatingElement$1(fragment);\n              error(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\", key);\n              setCurrentlyValidatingElement$1(null);\n              break;\n            }\n          }\n          if (fragment.ref !== null) {\n            setCurrentlyValidatingElement$1(fragment);\n            error(\"Invalid attribute `ref` supplied to `React.Fragment`.\");\n            setCurrentlyValidatingElement$1(null);\n          }\n        }\n      }\n      function jsxWithValidation(type, props, key, isStaticChildren, source, self2) {\n        {\n          var validType = isValidElementType(type);\n          if (!validType) {\n            var info = \"\";\n            if (type === void 0 || typeof type === \"object\" && type !== null && Object.keys(type).length === 0) {\n              info += \" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\";\n            }\n            var sourceInfo = getSourceInfoErrorAddendum();\n            if (sourceInfo) {\n              info += sourceInfo;\n            } else {\n              info += getDeclarationErrorAddendum();\n            }\n            var typeString;\n            if (type === null) {\n              typeString = \"null\";\n            } else if (isArray3(type)) {\n              typeString = \"array\";\n            } else if (type !== void 0 && type.$$typeof === REACT_ELEMENT_TYPE) {\n              typeString = \"<\" + (getComponentNameFromType(type.type) || \"Unknown\") + \" />\";\n              info = \" Did you accidentally export a JSX literal instead of a component?\";\n            } else {\n              typeString = typeof type;\n            }\n            error(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\", typeString, info);\n          }\n          var element2 = jsxDEV(type, props, key, source, self2);\n          if (element2 == null) {\n            return element2;\n          }\n          if (validType) {\n            var children = props.children;\n            if (children !== void 0) {\n              if (isStaticChildren) {\n                if (isArray3(children)) {\n                  for (var i3 = 0; i3 < children.length; i3++) {\n                    validateChildKeys(children[i3], type);\n                  }\n                  if (Object.freeze) {\n                    Object.freeze(children);\n                  }\n                } else {\n                  error(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");\n                }\n              } else {\n                validateChildKeys(children, type);\n              }\n            }\n          }\n          if (type === REACT_FRAGMENT_TYPE) {\n            validateFragmentProps(element2);\n          } else {\n            validatePropTypes(element2);\n          }\n          return element2;\n        }\n      }\n      function jsxWithValidationStatic(type, props, key) {\n        {\n          return jsxWithValidation(type, props, key, true);\n        }\n      }\n      function jsxWithValidationDynamic(type, props, key) {\n        {\n          return jsxWithValidation(type, props, key, false);\n        }\n      }\n      var jsx = jsxWithValidationDynamic;\n      var jsxs = jsxWithValidationStatic;\n      reactJsxRuntime_development.Fragment = REACT_FRAGMENT_TYPE;\n      reactJsxRuntime_development.jsx = jsx;\n      reactJsxRuntime_development.jsxs = jsxs;\n    })();\n  }\n  return reactJsxRuntime_development;\n}\nif (false) {} else {\n  jsxRuntime.exports = requireReactJsxRuntime_development();\n}\nvar jsxRuntimeExports = jsxRuntime.exports;\nvar extendStatics = function(d4, b3) {\n  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d5, b4) {\n    d5.__proto__ = b4;\n  } || function(d5, b4) {\n    for (var p2 in b4) if (Object.prototype.hasOwnProperty.call(b4, p2)) d5[p2] = b4[p2];\n  };\n  return extendStatics(d4, b3);\n};\nfunction __extends(d4, b3) {\n  if (typeof b3 !== \"function\" && b3 !== null)\n    throw new TypeError(\"Class extends value \" + String(b3) + \" is not a constructor or null\");\n  extendStatics(d4, b3);\n  function __() {\n    this.constructor = d4;\n  }\n  d4.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());\n}\nvar __assign = function() {\n  __assign = Object.assign || function __assign2(t4) {\n    for (var s4, i3 = 1, n2 = arguments.length; i3 < n2; i3++) {\n      s4 = arguments[i3];\n      for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2)) t4[p2] = s4[p2];\n    }\n    return t4;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest$8(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n}\nfunction __awaiter$5(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _2 = { label: 0, sent: function() {\n    if (t4[0] & 1) throw t4[1];\n    return t4[1];\n  }, trys: [], ops: [] }, f2, y4, t4, g2 = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g2.next = verb(0), g2[\"throw\"] = verb(1), g2[\"return\"] = verb(2), typeof Symbol === \"function\" && (g2[Symbol.iterator] = function() {\n    return this;\n  }), g2;\n  function verb(n2) {\n    return function(v2) {\n      return step([n2, v2]);\n    };\n  }\n  function step(op) {\n    if (f2) throw new TypeError(\"Generator is already executing.\");\n    while (g2 && (g2 = 0, op[0] && (_2 = 0)), _2) try {\n      if (f2 = 1, y4 && (t4 = op[0] & 2 ? y4[\"return\"] : op[0] ? y4[\"throw\"] || ((t4 = y4[\"return\"]) && t4.call(y4), 0) : y4.next) && !(t4 = t4.call(y4, op[1])).done) return t4;\n      if (y4 = 0, t4) op = [op[0] & 2, t4.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t4 = op;\n          break;\n        case 4:\n          _2.label++;\n          return { value: op[1], done: false };\n        case 5:\n          _2.label++;\n          y4 = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _2.ops.pop();\n          _2.trys.pop();\n          continue;\n        default:\n          if (!(t4 = _2.trys, t4 = t4.length > 0 && t4[t4.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _2 = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t4 || op[1] > t4[0] && op[1] < t4[3])) {\n            _2.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _2.label < t4[1]) {\n            _2.label = t4[1];\n            t4 = op;\n            break;\n          }\n          if (t4 && _2.label < t4[2]) {\n            _2.label = t4[2];\n            _2.ops.push(op);\n            break;\n          }\n          if (t4[2]) _2.ops.pop();\n          _2.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _2);\n    } catch (e3) {\n      op = [6, e3];\n      y4 = 0;\n    } finally {\n      f2 = t4 = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\nfunction __spreadArray(to2, from, pack) {\n  if (pack || arguments.length === 2) for (var i3 = 0, l2 = from.length, ar2; i3 < l2; i3++) {\n    if (ar2 || !(i3 in from)) {\n      if (!ar2) ar2 = Array.prototype.slice.call(from, 0, i3);\n      ar2[i3] = from[i3];\n    }\n  }\n  return to2.concat(ar2 || Array.prototype.slice.call(from));\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function(error, suppressed, message) {\n  var e3 = new Error(message);\n  return e3.name = \"SuppressedError\", e3.error = error, e3.suppressed = suppressed, e3;\n};\nvar e$1 = function(t4, n2) {\n  return e$1 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t5) {\n    e3.__proto__ = t5;\n  } || function(e3, t5) {\n    for (var n3 in t5) Object.prototype.hasOwnProperty.call(t5, n3) && (e3[n3] = t5[n3]);\n  }, e$1(t4, n2);\n};\nfunction t$2(t4, n2) {\n  if (\"function\" != typeof n2 && null !== n2) throw new TypeError(\"Class extends value \" + String(n2) + \" is not a constructor or null\");\n  function i3() {\n    this.constructor = t4;\n  }\n  e$1(t4, n2), t4.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());\n}\nvar n$2 = function() {\n  return n$2 = Object.assign || function(e3) {\n    for (var t4, n2 = 1, i3 = arguments.length; n2 < i3; n2++) for (var r2 in t4 = arguments[n2]) Object.prototype.hasOwnProperty.call(t4, r2) && (e3[r2] = t4[r2]);\n    return e3;\n  }, n$2.apply(this, arguments);\n};\nfunction i(e3, t4) {\n  var n2 = {};\n  for (var i3 in e3) Object.prototype.hasOwnProperty.call(e3, i3) && t4.indexOf(i3) < 0 && (n2[i3] = e3[i3]);\n  if (null != e3 && \"function\" == typeof Object.getOwnPropertySymbols) {\n    var r2 = 0;\n    for (i3 = Object.getOwnPropertySymbols(e3); r2 < i3.length; r2++) t4.indexOf(i3[r2]) < 0 && Object.prototype.propertyIsEnumerable.call(e3, i3[r2]) && (n2[i3[r2]] = e3[i3[r2]]);\n  }\n  return n2;\n}\nfunction r$1(e3, t4, n2, i3) {\n  return new (n2 || (n2 = Promise))(function(r2, s4) {\n    function o2(e4) {\n      try {\n        c3(i3.next(e4));\n      } catch (e5) {\n        s4(e5);\n      }\n    }\n    function a4(e4) {\n      try {\n        c3(i3.throw(e4));\n      } catch (e5) {\n        s4(e5);\n      }\n    }\n    function c3(e4) {\n      var t5;\n      e4.done ? r2(e4.value) : (t5 = e4.value, t5 instanceof n2 ? t5 : new n2(function(e5) {\n        e5(t5);\n      })).then(o2, a4);\n    }\n    c3((i3 = i3.apply(e3, [])).next());\n  });\n}\nfunction s$1(e3, t4) {\n  var n2, i3, r2, s4 = { label: 0, sent: function() {\n    if (1 & r2[0]) throw r2[1];\n    return r2[1];\n  }, trys: [], ops: [] }, o2 = Object.create((\"function\" == typeof Iterator ? Iterator : Object).prototype);\n  return o2.next = a4(0), o2.throw = a4(1), o2.return = a4(2), \"function\" == typeof Symbol && (o2[Symbol.iterator] = function() {\n    return this;\n  }), o2;\n  function a4(a5) {\n    return function(c3) {\n      return function(a6) {\n        if (n2) throw new TypeError(\"Generator is already executing.\");\n        for (; o2 && (o2 = 0, a6[0] && (s4 = 0)), s4; ) try {\n          if (n2 = 1, i3 && (r2 = 2 & a6[0] ? i3.return : a6[0] ? i3.throw || ((r2 = i3.return) && r2.call(i3), 0) : i3.next) && !(r2 = r2.call(i3, a6[1])).done) return r2;\n          switch (i3 = 0, r2 && (a6 = [2 & a6[0], r2.value]), a6[0]) {\n            case 0:\n            case 1:\n              r2 = a6;\n              break;\n            case 4:\n              return s4.label++, { value: a6[1], done: false };\n            case 5:\n              s4.label++, i3 = a6[1], a6 = [0];\n              continue;\n            case 7:\n              a6 = s4.ops.pop(), s4.trys.pop();\n              continue;\n            default:\n              if (!(r2 = s4.trys, (r2 = r2.length > 0 && r2[r2.length - 1]) || 6 !== a6[0] && 2 !== a6[0])) {\n                s4 = 0;\n                continue;\n              }\n              if (3 === a6[0] && (!r2 || a6[1] > r2[0] && a6[1] < r2[3])) {\n                s4.label = a6[1];\n                break;\n              }\n              if (6 === a6[0] && s4.label < r2[1]) {\n                s4.label = r2[1], r2 = a6;\n                break;\n              }\n              if (r2 && s4.label < r2[2]) {\n                s4.label = r2[2], s4.ops.push(a6);\n                break;\n              }\n              r2[2] && s4.ops.pop(), s4.trys.pop();\n              continue;\n          }\n          a6 = t4.call(e3, s4);\n        } catch (e4) {\n          a6 = [6, e4], i3 = 0;\n        } finally {\n          n2 = r2 = 0;\n        }\n        if (5 & a6[0]) throw a6[1];\n        return { value: a6[0] ? a6[1] : void 0, done: true };\n      }([a5, c3]);\n    };\n  }\n}\nfunction o(e3) {\n  var t4 = \"function\" == typeof Symbol && Symbol.iterator, n2 = t4 && e3[t4], i3 = 0;\n  if (n2) return n2.call(e3);\n  if (e3 && \"number\" == typeof e3.length) return { next: function() {\n    return e3 && i3 >= e3.length && (e3 = void 0), { value: e3 && e3[i3++], done: !e3 };\n  } };\n  throw new TypeError(t4 ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction a$1(e3, t4) {\n  var n2 = \"function\" == typeof Symbol && e3[Symbol.iterator];\n  if (!n2) return e3;\n  var i3, r2, s4 = n2.call(e3), o2 = [];\n  try {\n    for (; (void 0 === t4 || t4-- > 0) && !(i3 = s4.next()).done; ) o2.push(i3.value);\n  } catch (e4) {\n    r2 = { error: e4 };\n  } finally {\n    try {\n      i3 && !i3.done && (n2 = s4.return) && n2.call(s4);\n    } finally {\n      if (r2) throw r2.error;\n    }\n  }\n  return o2;\n}\nfunction c(e3, t4, n2) {\n  if (2 === arguments.length) for (var i3, r2 = 0, s4 = t4.length; r2 < s4; r2++) !i3 && r2 in t4 || (i3 || (i3 = Array.prototype.slice.call(t4, 0, r2)), i3[r2] = t4[r2]);\n  return e3.concat(i3 || Array.prototype.slice.call(t4));\n}\n\"function\" == typeof SuppressedError && SuppressedError;\nvar u$1, l = \"4.17.2\", h$1 = function() {\n  function e3() {\n  }\n  return Object.defineProperty(e3, \"OS_VERSION\", { get: function() {\n    return \"undefined\" != typeof navigator && navigator.userAgent ? navigator.userAgent.replace(/,/g, \".\") : \"noAgent\";\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3, \"SDK_VERSION\", { get: function() {\n    return l;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3, \"SDK_MAJOR_VERSION\", { get: function() {\n    return e3.SDK_VERSION.split(\".\")[0];\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3, \"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL\", { get: function() {\n    return 100;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3, \"INTERNAL_CALL\", { get: function() {\n    return \"ic\";\n  }, enumerable: false, configurable: true }), e3;\n}();\n!function(e3) {\n  e3[e3.NON_AUTHORIZED = 400108] = \"NON_AUTHORIZED\", e3[e3.INVALID_TOKEN = 400111] = \"INVALID_TOKEN\", e3[e3.NOT_FOUND_IN_DATABASE = 400201] = \"NOT_FOUND_IN_DATABASE\", e3[e3.USER_AUTH_DEACTIVATED = 400300] = \"USER_AUTH_DEACTIVATED\", e3[e3.USER_AUTH_DELETED_OR_NOT_FOUND = 400301] = \"USER_AUTH_DELETED_OR_NOT_FOUND\", e3[e3.SESSION_TOKEN_EXPIRED = 400302] = \"SESSION_TOKEN_EXPIRED\", e3[e3.APPLICATION_NOT_FOUND = 400304] = \"APPLICATION_NOT_FOUND\", e3[e3.SESSION_KEY_EXPIRED = 400309] = \"SESSION_KEY_EXPIRED\", e3[e3.SESSION_REVOKED = 400310] = \"SESSION_REVOKED\", e3[e3.INVALID_SESSION_TYPE = 400312] = \"INVALID_SESSION_TYPE\", e3[e3.INVALID_AUTH_FOR_SERVICE = 400313] = \"INVALID_AUTH_FOR_SERVICE\", e3[e3.STAT_UPLOAD_NOT_ALLOWED = 403200] = \"STAT_UPLOAD_NOT_ALLOWED\", e3[e3.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE = 400940] = \"NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE\", e3[e3.INTERNAL_SERVER_ERROR = 500901] = \"INTERNAL_SERVER_ERROR\", e3[e3.RATE_LIMIT_EXCEEDED = 500910] = \"RATE_LIMIT_EXCEEDED\", e3[e3.INVALID_REQUIRED_FORM_VALUE = 400105] = \"INVALID_REQUIRED_FORM_VALUE\", e3[e3.UNKNOWN_SERVER_ERROR = 900200] = \"UNKNOWN_SERVER_ERROR\", e3[e3.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE = 901500] = \"NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE\", e3[e3.ERR_DUPLICATED_DATA = 400202] = \"ERR_DUPLICATED_DATA\", e3[e3.DEBUG_MODE_REQUIRED = 7e5] = \"DEBUG_MODE_REQUIRED\", e3[e3.LOST_INSTANCE = 700100] = \"LOST_INSTANCE\", e3[e3.CONNECTION_RENEW = 700102] = \"CONNECTION_RENEW\", e3[e3.INVALID_CONNECTION_STATE_TRANSITION = 700200] = \"INVALID_CONNECTION_STATE_TRANSITION\", e3[e3.INVALID_COMMAND = 700700] = \"INVALID_COMMAND\", e3[e3.XMLHTTPREQUEST_NOT_SUPPORTED = 700800] = \"XMLHTTPREQUEST_NOT_SUPPORTED\", e3[e3.UNKNOWN_ERROR = 77e4] = \"UNKNOWN_ERROR\", e3[e3.INVALID_INITIALIZATION = 800100] = \"INVALID_INITIALIZATION\", e3[e3.CONNECTION_REQUIRED = 800101] = \"CONNECTION_REQUIRED\", e3[e3.CONNECTION_CANCELED = 800102] = \"CONNECTION_CANCELED\", e3[e3.INVALID_PARAMETER = 800110] = \"INVALID_PARAMETER\", e3[e3.NOT_SUPPORTED_ERROR = 800111] = \"NOT_SUPPORTED_ERROR\", e3[e3.NETWORK_ERROR = 800120] = \"NETWORK_ERROR\", e3[e3.NETWORK_ROUTING_ERROR = 800121] = \"NETWORK_ROUTING_ERROR\", e3[e3.MALFORMED_DATA = 800130] = \"MALFORMED_DATA\", e3[e3.MALFORMED_ERROR_DATA = 800140] = \"MALFORMED_ERROR_DATA\", e3[e3.WRONG_CHANNEL_TYPE = 800150] = \"WRONG_CHANNEL_TYPE\", e3[e3.MARK_AS_READ_RATE_LIMIT_EXCEEDED = 800160] = \"MARK_AS_READ_RATE_LIMIT_EXCEEDED\", e3[e3.QUERY_IN_PROGRESS = 800170] = \"QUERY_IN_PROGRESS\", e3[e3.ACK_TIMEOUT = 800180] = \"ACK_TIMEOUT\", e3[e3.LOGIN_TIMEOUT = 800190] = \"LOGIN_TIMEOUT\", e3[e3.WEBSOCKET_CONNECTION_CLOSED = 800200] = \"WEBSOCKET_CONNECTION_CLOSED\", e3[e3.WEBSOCKET_CONNECTION_FAILED = 800210] = \"WEBSOCKET_CONNECTION_FAILED\", e3[e3.REQUEST_FAILED = 800220] = \"REQUEST_FAILED\", e3[e3.FILE_UPLOAD_CANCEL_FAILED = 800230] = \"FILE_UPLOAD_CANCEL_FAILED\", e3[e3.REQUEST_CANCELED = 800240] = \"REQUEST_CANCELED\", e3[e3.REQUEST_DUPLICATED = 800250] = \"REQUEST_DUPLICATED\", e3[e3.FILE_SIZE_LIMIT_EXCEEDED = 800260] = \"FILE_SIZE_LIMIT_EXCEEDED\", e3[e3.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED = 800270] = \"ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED\", e3[e3.SESSION_TOKEN_REQUEST_FAILED = 800500] = \"SESSION_TOKEN_REQUEST_FAILED\", e3[e3.SESSION_TOKEN_REFRESHED = 800501] = \"SESSION_TOKEN_REFRESHED\", e3[e3.SESSION_TOKEN_REFRESH_FAILED = 800502] = \"SESSION_TOKEN_REFRESH_FAILED\", e3[e3.COLLECTION_DISPOSED = 800600] = \"COLLECTION_DISPOSED\", e3[e3.DATABASE_ERROR = 800700] = \"DATABASE_ERROR\", e3[e3.USER_DEACTIVATED = 900021] = \"USER_DEACTIVATED\", e3[e3.CHANNEL_IS_FROZEN = 900050] = \"CHANNEL_IS_FROZEN\", e3[e3.RECEIVER_USER_DEACTIVATED = 900081] = \"RECEIVER_USER_DEACTIVATED\";\n}(u$1 || (u$1 = {}));\nvar d, _, f$1, p, E$1, g$1, v$2 = function(e3) {\n  return !(e3 instanceof b$2 && !e3.shouldThrowOutside);\n}, b$2 = function(e3) {\n  function n2(t4) {\n    var i3 = t4.code, r2 = void 0 === i3 ? 0 : i3, s4 = t4.message, o2 = void 0 === s4 ? \"\" : s4, a4 = e3.call(this, o2) || this;\n    return a4.shouldThrowOutside = false, a4._detail = \"\", a4.name = \"SendbirdError\", a4.code = r2, Object.setPrototypeOf(a4, n2.prototype), a4;\n  }\n  return t$2(n2, e3), Object.defineProperty(n2.prototype, \"detail\", { get: function() {\n    return this._detail;\n  }, enumerable: false, configurable: true }), n2.prototype.setDetail = function(e4) {\n    this._detail = e4;\n  }, Object.defineProperty(n2.prototype, \"isInvalidTokenError\", { get: function() {\n    return this.code === u$1.INVALID_TOKEN;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSessionExpiredError\", { get: function() {\n    return this.isSessionTokenExpiredError || this.isSessionKeyExpiredError;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSessionTokenExpiredError\", { get: function() {\n    return this.code === u$1.SESSION_TOKEN_EXPIRED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSessionKeyExpiredError\", { get: function() {\n    return this.code === u$1.SESSION_KEY_EXPIRED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSessionInvalidatedError\", { get: function() {\n    return this.isSessionRevokedError || this.isUserAuthDeactivedError || this.isUserAuthDeletedOrNotFoundError;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSessionRevokedError\", { get: function() {\n    return this.code === u$1.SESSION_REVOKED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isUserAuthDeactivedError\", { get: function() {\n    return this.code === u$1.USER_AUTH_DEACTIVATED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isUserAuthDeletedOrNotFoundError\", { get: function() {\n    return this.code === u$1.USER_AUTH_DELETED_OR_NOT_FOUND;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isNetworkError\", { get: function() {\n    return this.code === u$1.NETWORK_ERROR || this.code === u$1.NETWORK_ROUTING_ERROR;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"debugModeRequired\", { get: function() {\n    return new n2({ code: u$1.DEBUG_MODE_REQUIRED, message: \"Cannot run this operation in production mode.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"lostInstance\", { get: function() {\n    return new n2({ code: u$1.LOST_INSTANCE, message: \"Instance ID is missing. It should belong to an instance.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"invalidCommand\", { get: function() {\n    return new n2({ code: u$1.INVALID_COMMAND, message: \"Cannot send invalid command.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"unknown\", { get: function() {\n    return new n2({ code: u$1.UNKNOWN_ERROR, message: \"Unknown error occurred.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"connectionRenew\", { get: function() {\n    return new n2({ code: u$1.CONNECTION_RENEW, message: \"Connection restarts.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"invalidConnectionStateTransition\", { get: function() {\n    return new n2({ code: u$1.INVALID_CONNECTION_STATE_TRANSITION, message: \"Invalid connection state transition.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"xmlHttpRequestNotSupported\", { get: function() {\n    return new n2({ code: u$1.XMLHTTPREQUEST_NOT_SUPPORTED, message: \"Cannot upload file. XMLHttpRequest is not defined in this environment.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"connectionRequired\", { get: function() {\n    return new n2({ code: u$1.CONNECTION_REQUIRED, message: \"Connection is required.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"connectionCanceled\", { get: function() {\n    return new n2({ code: u$1.CONNECTION_CANCELED, message: \"Connection is canceled.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"invalidParameters\", { get: function() {\n    return new n2({ code: u$1.INVALID_PARAMETER, message: \"Invalid parameters.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"notSupportedError\", { get: function() {\n    return new n2({ code: u$1.NOT_SUPPORTED_ERROR, message: \"Given parameters are not supported.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"channelTypeNotSupportedError\", { get: function() {\n    return new n2({ code: u$1.NOT_SUPPORTED_ERROR, message: \"Called method is not supported in the current channel's channel type.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"networkError\", { get: function() {\n    return new n2({ code: u$1.NETWORK_ERROR, message: \"There was a network error.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"markAsReadAllRateLimitExceeded\", { get: function() {\n    return new n2({ code: u$1.MARK_AS_READ_RATE_LIMIT_EXCEEDED, message: \"markAsRead rate limit exceeded.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"queryInProgress\", { get: function() {\n    return new n2({ code: u$1.QUERY_IN_PROGRESS, message: \"Query in progress.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"noAckTimeout\", { get: function() {\n    return new n2({ code: u$1.ACK_TIMEOUT, message: \"Command received no ack.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"loginTimeout\", { get: function() {\n    return new n2({ code: u$1.LOGIN_TIMEOUT, message: \"Connection timeout.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"connectionClosed\", { get: function() {\n    return new n2({ code: u$1.WEBSOCKET_CONNECTION_CLOSED, message: \"Connection is closed. Please reconnect.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"requestFailed\", { get: function() {\n    return new n2({ code: u$1.REQUEST_FAILED, message: \"Request failed.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"tooManyRequests\", { get: function() {\n    return new n2({ code: u$1.REQUEST_DUPLICATED, message: \"Too many requests.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"alreadyConnectedAsAnotherUser\", { get: function() {\n    return new n2({ code: u$1.REQUEST_FAILED, message: \"Already logged in as a different user. Call disconnect() first.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"fileUploadCanceled\", { get: function() {\n    return new n2({ code: u$1.FILE_UPLOAD_CANCEL_FAILED, message: \"File upload has been canceled.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"requestCanceled\", { get: function() {\n    return new n2({ code: u$1.REQUEST_CANCELED, message: \"Request has been canceled.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"sessionTokenRefreshFailed\", { get: function() {\n    return new n2({ code: u$1.SESSION_TOKEN_REFRESH_FAILED, message: \"Failed to refresh the session key.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"sessionTokenRequestFailed\", { get: function() {\n    return new n2({ code: u$1.SESSION_TOKEN_REQUEST_FAILED, message: \"Failed to get the session token.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"databaseError\", { get: function() {\n    return new n2({ code: u$1.DATABASE_ERROR, message: \"Database error.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"fileSizeLimitExceededError\", { get: function() {\n    return new n2({ code: u$1.FILE_SIZE_LIMIT_EXCEEDED, message: \"File size exceeds the file size limit.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"statLogUploadLimitExceededError\", { get: function() {\n    return new n2({ code: u$1.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED, message: \"The upload request failed due to the retry count being exceeded.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2, \"malformedDataError\", { get: function() {\n    return new n2({ code: u$1.MALFORMED_DATA, message: \"Malformed data.\" });\n  }, enumerable: false, configurable: true }), n2.prototype.throwOutside = function() {\n    throw this.shouldThrowOutside = true, this;\n  }, n2;\n}(Error), m$2 = [u$1.CONNECTION_REQUIRED, u$1.NETWORK_ERROR, u$1.ACK_TIMEOUT, u$1.WEBSOCKET_CONNECTION_CLOSED, u$1.WEBSOCKET_CONNECTION_FAILED, u$1.FILE_UPLOAD_CANCEL_FAILED, u$1.REQUEST_CANCELED, u$1.INTERNAL_SERVER_ERROR, u$1.RATE_LIMIT_EXCEEDED, u$1.UNKNOWN_SERVER_ERROR, u$1.USER_DEACTIVATED, u$1.CHANNEL_IS_FROZEN, u$1.RECEIVER_USER_DEACTIVATED], y$2 = [u$1.WEBSOCKET_CONNECTION_CLOSED, u$1.WEBSOCKET_CONNECTION_FAILED, u$1.CONNECTION_REQUIRED, u$1.CHANNEL_IS_FROZEN], w$1 = function(e3, t4) {\n  if (e3 !== t4) {\n    var i3 = n$2({}, e3), r2 = n$2({}, t4);\n    return (!i3.hasOwnProperty(\"messageId\") || !r2.hasOwnProperty(\"messageId\") || i3.messageId === r2.messageId) && ((!i3.hasOwnProperty(\"reqId\") || !r2.hasOwnProperty(\"reqId\") || i3.reqId === r2.reqId) && (i3.hasOwnProperty(\"messageId\") && delete i3.messageId, i3.hasOwnProperty(\"reqId\") && delete i3.reqId, r2.hasOwnProperty(\"messageId\") && delete r2.messageId, r2.hasOwnProperty(\"reqId\") && delete r2.reqId, JSON.stringify(i3) === JSON.stringify(r2)));\n  }\n  return true;\n}, S$1 = function(e3, t4, n2) {\n  return void 0 === n2 && (n2 = false), !(!n2 || !R$1(t4)) || (\"string\" != typeof e3 ? \"object\" == typeof e3 ? T$2(e3, t4) : N$1(e3, t4) : typeof t4 === e3);\n}, T$2 = function(e3, t4, n2) {\n  return void 0 === n2 && (n2 = false), !(!n2 || !R$1(t4)) || Object.values(e3).includes(t4);\n}, N$1 = function(e3, t4) {\n  return t4 instanceof e3;\n}, C$1 = function(e3, t4, n2) {\n  return void 0 === n2 && (n2 = false), !(!n2 || !R$1(t4)) || Array.isArray(t4) && t4.every(function(t5) {\n    return S$1(e3, t5);\n  });\n}, A = function(e3, t4) {\n  return !!R$1(e3) || \"number\" == typeof e3 && 13 === e3.toString().length;\n}, I$2 = function(e3) {\n  return e3 > 0 && m$2.indexOf(e3) >= 0;\n}, O$2 = function(e3) {\n  return e3 > 0 && y$2.indexOf(e3) >= 0;\n}, k = function(e3, t4) {\n  if (void 0 === t4 && (t4 = false), t4 && R$1(e3)) return true;\n  var n2 = \"object\" == typeof e3 && null !== e3 && e3.hasOwnProperty(\"name\") && \"string\" == typeof e3.name && e3.hasOwnProperty(\"uri\") && \"string\" == typeof e3.uri && e3.hasOwnProperty(\"type\") && \"string\" == typeof e3.type;\n  if (!n2) {\n    if (\"undefined\" != typeof Blob) return e3 instanceof Blob;\n    if (\"undefined\" != typeof File) return e3 instanceof File;\n  }\n  return n2;\n}, D$2 = function(e3, t4) {\n  if (e3 === t4) return true;\n  if (null == e3 || null == t4) return false;\n  if (e3.length !== t4.length) return false;\n  for (var n2 = c([], a$1(e3), false).sort(), i3 = c([], a$1(t4), false).sort(), r2 = 0; r2 < n2.length; ++r2) if (n2[r2] !== i3[r2]) return false;\n  return true;\n}, R$1 = function(e3) {\n  return null == e3;\n}, L$2 = function() {\n  function e3(e4) {\n    var t4 = void 0 === e4 ? {} : e4, n2 = t4.useMemberInfoInMessage, i3 = void 0 === n2 || n2, r2 = t4.typingIndicatorInvalidateTime, s4 = void 0 === r2 ? 1e4 : r2, o2 = t4.typingIndicatorThrottle, a4 = void 0 === o2 ? 1e3 : o2, c3 = t4.websocketResponseTimeout, u3 = void 0 === c3 ? 1e4 : c3, l2 = t4.websocketPayloadDecompression, h4 = void 0 === l2 || l2, d4 = t4.sessionTokenRefreshTimeout, _2 = void 0 === d4 ? 60 : d4;\n    this._useMemberInfoInMessage = true, this._typingIndicatorInvalidateTime = 1e4, this._typingIndicatorThrottle = 1e3, this._websocketResponseTimeout = 1e4, this._sessionTokenRefreshTimeout = 60, this._useMemberInfoInMessage = i3, this._typingIndicatorInvalidateTime = s4, this._typingIndicatorThrottle = a4, this._websocketResponseTimeout = u3, this._sessionTokenRefreshTimeout = _2, this.websocketPayloadDecompression = h4;\n  }\n  return Object.defineProperty(e3.prototype, \"useMemberInfoInMessage\", { get: function() {\n    return this._useMemberInfoInMessage;\n  }, set: function(e4) {\n    S$1(\"boolean\", e4) && (this._useMemberInfoInMessage = e4);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"typingIndicatorInvalidateTime\", { get: function() {\n    return this._typingIndicatorInvalidateTime;\n  }, set: function(e4) {\n    S$1(\"number\", e4) && (this._typingIndicatorInvalidateTime = e4);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"typingIndicatorThrottle\", { get: function() {\n    return this._typingIndicatorThrottle;\n  }, set: function(e4) {\n    S$1(\"number\", e4) && e4 >= 1e3 && e4 <= 9e3 && (this._typingIndicatorThrottle = e4);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"websocketResponseTimeout\", { get: function() {\n    return this._websocketResponseTimeout;\n  }, set: function(e4) {\n    S$1(\"number\", e4) && e4 >= 5e3 && e4 <= 3e4 && (this._websocketResponseTimeout = e4);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"sessionTokenRefreshTimeout\", { get: function() {\n    return this._sessionTokenRefreshTimeout;\n  }, set: function(e4) {\n    S$1(\"number\", e4) && (e4 < 60 ? e4 = 60 : e4 > 1800 && (e4 = 1800), this._sessionTokenRefreshTimeout = e4);\n  }, enumerable: false, configurable: true }), e3;\n}(), x = { encrypt: function(e3) {\n  return e3;\n}, decrypt: function(e3) {\n  return e3;\n} }, U$1 = function() {\n  function e3(e4) {\n    var t4 = e4.store;\n    this._preference = /* @__PURE__ */ new Map(), this._store = t4;\n  }\n  return e3.prototype._savePreferenceKeys = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, this._store.set({ key: this._keysAddress, value: c([], a$1(this._preference.keys()), false) })];\n          case 1:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.init = function(e4, t4) {\n    var n2;\n    return void 0 === t4 && (t4 = 1), r$1(this, void 0, void 0, function() {\n      var i3, r2, a4, c3, u3, l2, h4, d4, _2, f2, p2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._version = t4, this._keysAddress = e4, i3 = \"\".concat(e4, \".metadata.version\"), [4, this._store.get(i3)];\n          case 1:\n            return r2 = s4.sent(), [4, this._store.get(e4)];\n          case 2:\n            return a4 = null !== (n2 = s4.sent()) && void 0 !== n2 ? n2 : [], !r2 || r2.version < this._version ? 9 === this._version ? [3, 3] : [3, 6] : [3, 10];\n          case 3:\n            return c3 = a4.find(function(e5) {\n              return e5.includes(\"groupchannel/sync.meta\");\n            }), c3 ? [4, this._store.remove(c3)] : [3, 5];\n          case 4:\n            s4.sent(), s4.label = 5;\n          case 5:\n            return [3, 8];\n          case 6:\n            return [4, this._resetPreferenceData(a4)];\n          case 7:\n            s4.sent(), s4.label = 8;\n          case 8:\n            return [4, this._updatePreferenceVersionInfo(i3)];\n          case 9:\n            return s4.sent(), [3, 17];\n          case 10:\n            s4.trys.push([10, 15, 16, 17]), u3 = o(a4), l2 = u3.next(), s4.label = 11;\n          case 11:\n            return l2.done ? [3, 14] : (h4 = l2.value, [4, this._store.get(h4)]);\n          case 12:\n            (d4 = s4.sent()) && this._preference.set(h4, d4), s4.label = 13;\n          case 13:\n            return l2 = u3.next(), [3, 11];\n          case 14:\n            return [3, 17];\n          case 15:\n            return _2 = s4.sent(), f2 = { error: _2 }, [3, 17];\n          case 16:\n            try {\n              l2 && !l2.done && (p2 = u3.return) && p2.call(u3);\n            } finally {\n              if (f2) throw f2.error;\n            }\n            return [7];\n          case 17:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._updatePreferenceVersionInfo = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._store.set({ key: e4, value: { version: this._version } })];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype._resetPreferenceData = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._preference = /* @__PURE__ */ new Map(), [4, this._store.removeMany(e4)];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return [2, this._preference.get(e4)];\n      });\n    });\n  }, e3.prototype.set = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return n2 = !this._preference.has(e4), [4, this._store.set({ key: e4, value: t4 })];\n          case 1:\n            return i3.sent(), this._preference.set(e4, t4), n2 ? [4, this._savePreferenceKeys()] : [3, 3];\n          case 2:\n            i3.sent(), i3.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._store.remove(e4)];\n          case 1:\n            return t4.sent(), this._preference.delete(e4), [4, this._savePreferenceKeys()];\n          case 2:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, this._store.removeMany(c([], a$1(this._preference.keys()), false))];\n          case 1:\n            return e4.sent(), this._preference.clear(), [4, this._savePreferenceKeys()];\n          case 2:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, e3;\n}(), P$1 = function() {\n  function e3(e4) {\n    var t4 = e4.encryption, n2 = e4.store, i3 = e4.localCacheEnabled, r2 = e4.localCacheConfig;\n    this.store = n2, this.preference = new U$1({ store: n2 }), this.encryption = null != t4 ? t4 : x, this.localCacheEnabled = i3, this.localCacheConfig = r2;\n  }\n  return e3.prototype.replaceStore = function(e4) {\n    this.store = e4, this.preference = new U$1({ store: e4 });\n  }, e3;\n}();\n!function(e3) {\n  e3.SUCCESS = \"success\", e3.PENDING = \"pending\", e3.ERROR = \"error\";\n}(d || (d = {})), function(e3) {\n  e3.DEFAULT = \"default\", e3.ALL = \"all\", e3.MENTION_ONLY = \"mention_only\", e3.OFF = \"off\";\n}(_ || (_ = {})), function(e3) {\n  e3.FCM = \"gcm\", e3.APNS = \"apns\", e3.UNKNOWN = \"unknown\";\n}(f$1 || (f$1 = {})), function(e3) {\n  e3.SESSION_TOKEN = \"session_token\", e3.ACCESS_TOKEN = \"access_token\";\n}(p || (p = {})), function(e3) {\n  e3.ALTERNATIVE = \"alternative\", e3.DEFAULT = \"default\";\n}(E$1 || (E$1 = {})), function(e3) {\n  e3.CUSTOM = \"custom\", e3.MESSAGE_COLLECTION_ACCESSED_AT = \"messagecollection_accessed_at\";\n}(g$1 || (g$1 = {}));\nvar M$1, F = function() {\n  function e3(e4) {\n    var t4 = e4.channel, n2 = e4.cachedMessageCount;\n    this._cachedMessageCount = 0, this._channel = t4, this._cachedMessageCount = n2;\n  }\n  return Object.defineProperty(e3.prototype, \"channel\", { get: function() {\n    return this._channel;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"cachedMessageCount\", { get: function() {\n    return this._cachedMessageCount;\n  }, enumerable: false, configurable: true }), e3;\n}(), q = function() {\n  function e3(e4) {\n    var t4 = void 0 === e4 ? {} : e4, n2 = t4.maxSize, i3 = void 0 === n2 ? 256 : n2, r2 = t4.clearOrder, s4 = void 0 === r2 ? g$1.MESSAGE_COLLECTION_ACCESSED_AT : r2, o2 = t4.customClearOrderComparator, a4 = t4.enableAutoResend, c3 = void 0 === a4 || a4;\n    this._clearOrderComparatorUseMessageCollectionAccessedAt = function(e5, t5) {\n      return e5.channel.messageCollectionLastAccessedAt === t5.channel.messageCollectionLastAccessedAt ? e5.channel.lastMessage && !t5.channel.lastMessage ? 1 : !e5.channel.lastMessage && t5.channel.lastMessage ? -1 : e5.channel.lastMessage || t5.channel.lastMessage ? e5.channel.lastMessage.createdAt - t5.channel.lastMessage.createdAt : 0 : e5.channel.messageCollectionLastAccessedAt > t5.channel.messageCollectionLastAccessedAt ? 1 : -1;\n    }, this._maxSize = Math.max(i3, 64), o2 ? (this._clearOrder = s4, this._customClearOrderComparator = o2) : this._clearOrder = g$1.MESSAGE_COLLECTION_ACCESSED_AT, this._enableAutoResend = c3;\n  }\n  return Object.defineProperty(e3.prototype, \"maxSize\", { get: function() {\n    return this._maxSize;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"clearOrder\", { get: function() {\n    return this._clearOrder;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"clearOrderComparator\", { get: function() {\n    var e4;\n    return this._clearOrder === g$1.MESSAGE_COLLECTION_ACCESSED_AT ? this._clearOrderComparatorUseMessageCollectionAccessedAt : null !== (e4 = this._customClearOrderComparator) && void 0 !== e4 ? e4 : this._clearOrderComparatorUseMessageCollectionAccessedAt;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"enableAutoResend\", { get: function() {\n    return this._enableAutoResend;\n  }, enumerable: false, configurable: true }), e3;\n}();\n!function(e3) {\n  e3.FEED = \"feed\", e3.CHAT = \"chat\", e3.CHAT_API = \"chat_api\";\n}(M$1 || (M$1 = {}));\nvar H$1, V, z, G, j, K$1, B, Q, W, Z, Y, X, J, $ = function() {\n  function e3() {\n    this.isRefreshing = false;\n  }\n  return Object.defineProperty(e3.prototype, \"hasSession\", { get: function() {\n    return !!this.sessionKey;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"hasChatServicePermission\", { get: function() {\n    var e4;\n    return !!(null === (e4 = this.services) || void 0 === e4 ? void 0 : e4.includes(M$1.CHAT));\n  }, enumerable: false, configurable: true }), e3.prototype.clear = function() {\n    this.authToken = void 0, this.sessionKey = void 0, this.services = [];\n  }, e3;\n}(), ee = function() {\n  var e3 = (/* @__PURE__ */ new Date()).getTime();\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(t4) {\n    var n2 = (e3 + 16 * Math.random()) % 16 | 0;\n    return e3 = Math.floor(e3 / 16), (\"x\" === t4 ? n2 : 3 & n2 | 8).toString(16);\n  });\n}, te = function() {\n  function e3(e4) {\n    var t4 = e4.container;\n    this._container = {}, this._container = t4, this.key = ee();\n  }\n  return e3.prototype._register = function(e4, t4, n2) {\n    var i3;\n    return e4 in this._container || (this._container[e4] = /* @__PURE__ */ new Map()), null === (i3 = this._container[e4]) || void 0 === i3 || i3.set(this.key, { occurence: t4, handler: n2 }), this;\n  }, e3.prototype.on = function(e4, t4) {\n    return this._register(e4, -1, t4);\n  }, e3.prototype.once = function(e4, t4) {\n    return this._register(e4, 1, t4);\n  }, e3.prototype.close = function() {\n    var e4 = this;\n    Object.keys(this._container).forEach(function(t4) {\n      var n2;\n      null === (n2 = e4._container[t4]) || void 0 === n2 || n2.delete(e4.key);\n    });\n  }, e3;\n}(), ne = function() {\n  function e3() {\n    this._container = {};\n  }\n  return e3.prototype.on = function(e4, t4) {\n    return new te({ container: this._container }).on(e4, t4);\n  }, e3.prototype.once = function(e4, t4) {\n    return new te({ container: this._container }).once(e4, t4);\n  }, e3.prototype.dispatch = function(e4, t4) {\n    var n2, i3, r2 = this._container[e4];\n    if (r2) {\n      var s4 = [];\n      try {\n        for (var a4 = o(r2.keys()), c3 = a4.next(); !c3.done; c3 = a4.next()) {\n          var u3 = c3.value, l2 = r2.get(u3);\n          l2.handler(t4), l2.occurence > 0 && (l2.occurence--, 0 === l2.occurence && s4.push(u3));\n        }\n      } catch (e5) {\n        n2 = { error: e5 };\n      } finally {\n        try {\n          c3 && !c3.done && (i3 = a4.return) && i3.call(a4);\n        } finally {\n          if (n2) throw n2.error;\n        }\n      }\n      s4.forEach(function(e5) {\n        return r2.delete(e5);\n      });\n    }\n  }, e3;\n}(), ie = function() {\n  function e3() {\n    this._dispatcher = new ne();\n  }\n  return e3.prototype.on = function(e4) {\n    return this._dispatcher.on(\"event\", e4);\n  }, e3.prototype.once = function(e4) {\n    return this._dispatcher.once(\"event\", e4);\n  }, e3.prototype.dispatch = function(e4) {\n    this._dispatcher.dispatch(\"event\", e4);\n  }, e3;\n}(), re$1 = function() {\n}, se = function(e3) {\n  var t4 = {};\n  return e3 && Object.keys(e3).forEach(function(n2) {\n    void 0 === e3[n2] || Number.isNaN(e3[n2]) || null === e3[n2] || (t4[n2] = e3[n2]);\n  }), t4;\n}, oe = function(e3) {\n  if (null != e3) {\n    if (\"object\" == typeof e3) {\n      if (Array.isArray(e3)) {\n        for (var t4 = c([], a$1(e3), false), n2 = 0; n2 < t4.length; n2++) t4[n2] = oe(t4[n2]);\n        return t4;\n      }\n      return Object.keys(e3).forEach(function(t5) {\n        null === e3[t5] && delete e3[t5];\n      }), e3;\n    }\n    return e3;\n  }\n};\n!function(e3) {\n  e3.BASE = \"base\", e3.GROUP = \"group\", e3.OPEN = \"open\", e3.FEED = \"feed\";\n}(H$1 || (H$1 = {})), function(e3) {\n  e3.OPERATOR = \"operator\", e3.NONE = \"none\";\n}(V || (V = {})), function(e3) {\n  e3.MUTED = \"muted\", e3.UNMUTED = \"unmuted\";\n}(z || (z = {})), function(e3) {\n  e3.BASE = \"base\", e3.USER = \"user\", e3.FILE = \"file\", e3.ADMIN = \"admin\";\n}(G || (G = {})), function(e3) {\n  e3.ALL = \"\", e3.USER = \"MESG\", e3.FILE = \"FILE\", e3.ADMIN = \"ADMM\";\n}(j || (j = {})), function(e3) {\n  e3.USER = \"MESG\", e3.FILE = \"FILE\", e3.ADMIN = \"ADMM\";\n}(K$1 || (K$1 = {})), function(e3) {\n  e3.USERS = \"users\", e3.CHANNEL = \"channel\";\n}(B || (B = {})), function(e3) {\n  e3.ALL = \"all\", e3.NONE = \"none\", e3.ONLY_REPLY_TO_CHANNEL = \"only_reply_to_channel\";\n}(Q || (Q = {})), function(e3) {\n  e3.DEFAULT = \"default\", e3.SUPPRESS = \"suppress\";\n}(W || (W = {})), function(e3) {\n  e3.PENDING = \"pending\", e3.SCHEDULED = \"scheduled\", e3.SUCCEEDED = \"succeeded\", e3.FAILED = \"failed\", e3.CANCELED = \"canceled\";\n}(Z || (Z = {})), function(e3) {\n  e3.INREVIEW = \"InReview\", e3.APPROVED = \"Approved\";\n}(Y || (Y = {})), function(e3) {\n  e3.HIGH = \"high\", e3.NORMAL = \"normal\", e3.LOW = \"low\";\n}(X || (X = {})), function(e3) {\n  e3.CREATED_AT = \"created_at\", e3.UPDATED_AT = \"updated_at\";\n}(J || (J = {}));\nvar ae, ce = \"v3\", ue = \"/\".concat(ce, \"/users\"), le = \"/\".concat(ce, \"/sdk/users\"), he = \"/\".concat(ce, \"/storage/file\"), de = \"/\".concat(ce, \"/group_channels\"), _e$1 = \"/\".concat(ce, \"/sdk/group_channels\"), fe = \"/\".concat(ce, \"/open_channels\"), pe = \"/\".concat(ce, \"/sdk/open_channels\"), Ee$1 = \"/\".concat(ce, \"/search\"), ge$1 = \"/\".concat(ce, \"/report\"), ve$1 = \"/\".concat(ce, \"/emojis\"), be$1 = \"/\".concat(ce, \"/emoji_categories\"), me$1 = \"/\".concat(ce, \"/polls\"), ye$1 = \"/\".concat(ce, \"/scheduled_messages\"), we$1 = \"/\".concat(ce, \"/sdk/ui_kit/configuration\"), Se = \"/\".concat(ce, \"/sdk/statistics\"), Te$1 = \"/\".concat(ce, \"/sdk/statistics/notification_statistics\"), Ae = \"/\".concat(ce, \"/message_templates\"), Ie$1 = \"/\".concat(ce, \"/sdk/push_delivery\"), Oe$1 = \"/\".concat(ce, \"/forms\"), ke$2 = \"/\".concat(ce, \"/report_category\"), De$3 = \"/\".concat(ce, \"/sdk/applications/settings\"), Re$3 = function(e3) {\n  switch (e3) {\n    case H$1.FEED:\n    case H$1.GROUP:\n      return de;\n    case H$1.OPEN:\n      return fe;\n    default:\n      return null;\n  }\n}, Le$2 = function(e3) {\n  switch (e3) {\n    case H$1.GROUP:\n      return \"\".concat(ge$1, \"/group_channels\");\n    case H$1.OPEN:\n      return \"\".concat(ge$1, \"/open_channels\");\n    default:\n      return null;\n  }\n}, xe$2 = function(e3, t4, n2) {\n  var i3, r2;\n  switch (e3) {\n    case B.CHANNEL:\n      return true;\n    case B.USERS:\n      if (t4) try {\n        for (var s4 = o(t4), a4 = s4.next(); !a4.done; a4 = s4.next()) {\n          if (a4.value === n2) return true;\n        }\n      } catch (e4) {\n        i3 = { error: e4 };\n      } finally {\n        try {\n          a4 && !a4.done && (r2 = s4.return) && r2.call(s4);\n        } finally {\n          if (i3) throw i3.error;\n        }\n      }\n  }\n  return false;\n}, Ue$1 = function(e3, t4, n2) {\n  var i3, r2, s4, o2, a4 = xe$2(null !== (i3 = e3.mentionType) && void 0 !== i3 ? i3 : null, null !== (r2 = e3.mentionedUserIds) && void 0 !== r2 ? r2 : [], n2), c3 = xe$2(null !== (s4 = t4.mentionType) && void 0 !== s4 ? s4 : null, null !== (o2 = t4.mentionedUserIds) && void 0 !== o2 ? o2 : [], n2);\n  return !a4 && c3 ? 1 : a4 && !c3 ? -1 : 0;\n}, Pe$3 = function(e3, t4, n2) {\n  var i3, r2 = t4 || new FormData();\n  for (var s4 in e3) if (e3.hasOwnProperty(s4)) {\n    var o2 = e3[s4], a4 = n2 ? \"\".concat(n2, \"[\").concat(s4, \"]\") : s4;\n    k(o2) ? r2.append(a4, o2, null !== (i3 = o2.name) && void 0 !== i3 ? i3 : \"filename\") : \"object\" != typeof o2 || null === o2 || Array.isArray(o2) || o2 instanceof Blob ? r2.append(a4, String(o2)) : r2 = Pe$3(o2, r2, a4);\n  }\n  return r2;\n};\n!function(e3) {\n  e3.GET = \"GET\", e3.POST = \"POST\", e3.PUT = \"PUT\", e3.DELETE = \"DELETE\";\n}(ae || (ae = {}));\nvar Me$1, Fe$2 = function(e3) {\n  function n2() {\n    var t4 = null !== e3 && e3.apply(this, arguments) || this;\n    return t4.params = {}, t4.requireAuth = true, t4.headers = {}, t4.requestId = ee(), t4;\n  }\n  return t$2(n2, e3), n2.prototype.encodeParams = function(e4) {\n    var t4 = this;\n    return null == e4 || \"\" === e4 ? encodeURIComponent(\"\") : Array.isArray(e4) ? e4.map(function(e5) {\n      return t4.encodeParams(e5);\n    }).join(\",\") : \"object\" == typeof e4 ? encodeURIComponent(JSON.stringify(e4)) : encodeURIComponent(String(e4));\n  }, Object.defineProperty(n2.prototype, \"query\", { get: function() {\n    var e4 = this, t4 = se(this.params);\n    return \"?\".concat(Object.keys(t4).map(function(n3) {\n      return \"\".concat(encodeURIComponent(n3), \"=\").concat(e4.encodeParams(t4[n3]));\n    }).join(\"&\"));\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"payload\", { get: function() {\n    var e4 = se(this.params);\n    return Object.keys(e4).some(function(t4) {\n      return k(e4[t4]);\n    }) ? Pe$3(e4) : JSON.stringify(e4);\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"hasSessionKey\", { get: function() {\n    return void 0 !== this.headers[\"Session-Key\"];\n  }, enumerable: false, configurable: true }), n2;\n}(re$1), qe$2 = function(e3) {\n  function i3(t4, n2) {\n    var i4 = e3.call(this) || this;\n    return i4._iid = t4, i4._payload = n2, i4;\n  }\n  return t$2(i3, e3), Object.defineProperty(i3.prototype, \"payload\", { get: function() {\n    return n$2({}, this._payload);\n  }, enumerable: false, configurable: true }), i3.prototype.as = function(e4) {\n    return new e4(this._iid, this.payload);\n  }, i3;\n}(re$1), He$3 = function(e3) {\n  function n2(t4) {\n    var n3 = e3.call(this) || this;\n    return n3.requestId = t4, n3;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), Ve$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.expires_in, i3 = t4.reason, r2 = void 0 === i3 ? u$1.SESSION_KEY_EXPIRED : i3, s4 = t4.message, o2 = void 0 === s4 ? \"\" : s4, a4 = e3.call(this) || this;\n    switch (a4.expiresIn = null != n3 ? n3 : 0, r2) {\n      case u$1.SESSION_KEY_EXPIRED:\n      case u$1.SESSION_TOKEN_EXPIRED:\n      case u$1.SESSION_REVOKED:\n      case u$1.USER_AUTH_DEACTIVATED:\n      case u$1.USER_AUTH_DELETED_OR_NOT_FOUND:\n        a4.error = new b$2({ code: r2, message: o2 });\n    }\n    return a4;\n  }\n  return t$2(n2, e3), Object.defineProperty(n2.prototype, \"invalidateSessionToken\", { get: function() {\n    var e4;\n    return !!(null === (e4 = this.error) || void 0 === e4 ? void 0 : e4.isSessionTokenExpiredError);\n  }, enumerable: false, configurable: true }), n2;\n}(re$1), ze$2 = function(e3) {\n  function n2(t4, n3, i3, r2) {\n    void 0 === r2 && (r2 = \"\");\n    var s4, o2 = this;\n    return (o2 = e3.call(this) || this)._iid = t4, o2.code = n3, o2.payload = i3, o2.requestId = null !== (s4 = i3.req_id) && void 0 !== s4 ? s4 : r2, o2;\n  }\n  return t$2(n2, e3), n2.createFromRawMessage = function(e4, t4) {\n    var i3 = t4.substring(0, 4), r2 = {};\n    try {\n      r2 = JSON.parse(t4.substring(4));\n    } catch (e5) {\n      i3 = \"NOOP\";\n    } finally {\n      return new n2(e4, i3, r2);\n    }\n  }, n2.prototype.convertToMessage = function() {\n    return \"\".concat(this.code).concat(JSON.stringify(this.payload), \"\\n\");\n  }, n2.prototype.as = function(e4) {\n    return new e4(this._iid, this.code, this.payload);\n  }, n2;\n}(re$1), Ge$1 = function(e3) {\n  function n2(t4) {\n    var n3, i3 = t4.code, r2 = t4.ackRequired, s4 = t4.payload, o2 = void 0 === s4 ? {} : s4, a4 = this;\n    return (a4 = e3.call(this) || this).code = i3, a4.payload = o2, a4.requestId = null !== (n3 = a4.payload.req_id) && void 0 !== n3 ? n3 : ee(), a4.ackRequired = r2, a4.payload.req_id = a4.requestId, a4;\n  }\n  return t$2(n2, e3), n2.prototype.convertToMessage = function() {\n    return \"\".concat(this.code).concat(JSON.stringify(this.payload), \"\\n\");\n  }, n2;\n}(re$1), je$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.userId, i3 = t4.authToken, r2 = t4.services, s4 = t4.expiringSession, o2 = void 0 === s4 || s4, a4 = e3.call(this) || this;\n    return a4.path = \"\".concat(ue, \"/\").concat(n3, \"/session_key\"), a4.method = ae.POST, a4.params = se({ token: i3, services: r2, expiring_session: !!o2 }), a4.requireAuth = false, a4;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Ke$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.authToken, i3 = t4.expiringSession, r2 = void 0 === i3 || i3, s4 = t4.requestId, o2 = void 0 === s4 ? void 0 : s4;\n    return e3.call(this, { code: \"LOGI\", payload: se({ token: n3, expiring_session: r2 ? 1 : 0, req_id: o2 }), ackRequired: true }) || this;\n  }\n  return t$2(n2, e3), n2;\n}(Ge$1), Be$2 = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this, r2 = n3.key, s4 = n3.expires_at, o2 = n3.services;\n    return i3.key = r2, i3.expiresAt = s4, i3.services = o2, i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), Qe$2 = function(e3) {\n  function n2(t4, n3, i3) {\n    var r2, s4 = this;\n    return (s4 = e3.call(this, t4, \"LOGI\", i3) || this).error = null, s4.newKey = null, s4.newKey = null !== (r2 = i3.new_key) && void 0 !== r2 ? r2 : null, s4.error = i3.error ? new b$2(i3) : null, s4;\n  }\n  return t$2(n2, e3), n2;\n}(ze$2), We$2 = function(e3) {\n  function n2(t4) {\n    var n3 = e3.call(this) || this;\n    return n3.statLog = t4, n3;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), Ze$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.request, i3 = t4.deferred, r2 = t4.error, s4 = void 0 === r2 ? b$2.requestFailed : r2, o2 = e3.call(this) || this;\n    return o2.request = n3, o2.deferred = i3, o2.error = s4, o2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1);\n!function(e3) {\n  e3.FEATURE_LOCALCACHE = \"feature:local_cache\", e3.FEATURE_LOCALCACHE_EVENT = \"feature:local_cache_event\", e3.NOTIFICATION = \"noti:stats\", e3.WEBSOCKET_CONNECT = \"ws:connect\", e3.API_RESULT = \"api:result\";\n}(Me$1 || (Me$1 = {}));\nvar Ye$2, Xe$1, Je$2, $e$1 = function() {\n  function e3(e4) {\n    var t4 = e4.type, n2 = e4.data, i3 = e4.ts, r2 = void 0 === i3 ? Date.now() : i3;\n    this.type = t4, this.createdAt = r2, this.data = n2;\n  }\n  return e3.payloadify = function(e4) {\n    return se({ stat_type: e4.type, ts: e4.createdAt, data: se(e4.data) });\n  }, e3;\n}(), et$1 = function() {\n  return \"undefined\" == typeof document && \"undefined\" != typeof navigator && \"ReactNative\" == navigator.product;\n}, tt$1 = function() {\n  return !(\"undefined\" == typeof navigator || !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent));\n};\n!function(e3) {\n  e3.CHAT = \"chat\", e3.CALLS = \"calls\", e3.DESK = \"desk\", e3.LIVE = \"live\", e3.UIKIT_CHAT = \"uikit-chat\", e3.UIKIT_LIVE = \"uikit-live\";\n}(Ye$2 || (Ye$2 = {})), function(e3) {\n  e3.ANDROID = \"android\", e3.IOS = \"ios\", e3.JS = \"js\", e3.UNREAL = \"unreal\", e3.UNITY = \"unity\", e3.REACT_NATIVE = \"react-native\", e3.FLUTTER = \"flutter\";\n}(Xe$1 || (Xe$1 = {})), function(e3) {\n  e3.ANDROID = \"android\", e3.IOS = \"ios\", e3.WEB = \"web\", e3.MOBILE_WEB = \"mobile_web\", e3.WINDOWS = \"windows\";\n}(Je$2 || (Je$2 = {}));\nvar nt$1 = \"^(0|[1-9]\\\\d*)\\\\.(0|[1-9]\\\\d*)\\\\.(0|[1-9]\\\\d*)(?:-((?:0|[1-9]\\\\d*|\\\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\\\.(?:0|[1-9]\\\\d*|\\\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\\\+([0-9a-zA-Z-]+(?:\\\\.[0-9a-zA-Z-]+)*))?$\", it$1 = function() {\n  function e3() {\n  }\n  return e3.sendbirdSdkUserAgentWithExtension = function(e4) {\n    var t4 = et$1() ? Xe$1.REACT_NATIVE : Xe$1.JS, i3 = { main_sdk_info: \"chat/\".concat(t4, \"/\").concat(h$1.SDK_VERSION), device_os_platform: tt$1() ? \"mobile-web\" : \"web\", os_version: h$1.OS_VERSION };\n    if (e4) {\n      var r2 = e4.sendbirdExtensions, s4 = e4.deviceOS, o2 = e4.customData, c3 = void 0 === o2 ? {} : o2;\n      s4.version && (i3.os_version = s4.version), s4.platform && (i3.device_os_platform = s4.platform), r2.length > 0 && (i3.extension_sdk_info = r2.map(function(e5) {\n        var t5 = e5.product, n2 = e5.platform, i4 = e5.version;\n        return \"\".concat(t5, \"/\").concat(n2, \"/\").concat(i4);\n      }).join(\",\")), Object.keys(i3).forEach(function(e5) {\n        return delete c3[e5];\n      }), Object.keys(c3).length > 0 && (i3 = n$2(n$2({}, i3), c3));\n    }\n    return Object.entries(i3).map(function(e5) {\n      var t5 = a$1(e5, 2), n2 = t5[0], i4 = t5[1];\n      return \"\".concat(n2, \"=\").concat(i4);\n    }).join(\"&\");\n  }, e3.userAgentWithExtension = function(e4) {\n    var t4 = et$1() ? \"reactnative\" : \"JS\", n2 = e4.sb_syncmanager ? \"s\".concat(e4.sb_syncmanager) : \"\", i3 = e4.sb_uikit ? \"u\".concat(e4.sb_uikit) : \"\", r2 = e4[\"device-os-platform\"] ? \"o\".concat(e4[\"device-os-platform\"]) : tt$1() ? \"omobile-web\" : \"oweb\";\n    return \"\".concat(t4, \"/c\").concat(h$1.SDK_VERSION, \"/\").concat(n2, \"/\").concat(i3, \"/\").concat(r2);\n  }, e3;\n}(), rt$1 = function() {\n  var e3 = this;\n  this.promise = new Promise(function(t4, n2) {\n    e3.resolve = t4, e3.reject = function(e4) {\n      n2(e4);\n    };\n  });\n}, st$1 = function(e3) {\n  function n2(t4) {\n    var n3 = e3.call(this) || this;\n    return n3.requestId = t4.requestId, n3;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), ot$1 = function(e3) {\n  function n2(t4) {\n    var n3 = e3.call(this) || this;\n    return n3.method = ae.DELETE, n3.path = \"\".concat(Re$3(t4.channelType), \"/\").concat(t4.channelUrl, \"/messages/\").concat(t4.messageId), t4.messageToken && (n3.params = se({ mesg_token: t4.messageToken })), n3;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2);\n!function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(n2, e3);\n}(qe$2);\nvar at$1 = function(e3) {\n  function n2(t4, n3, i3) {\n    var r2, s4 = this;\n    return (s4 = e3.call(this, t4, \"DELM\", i3) || this).channelUrl = i3.channel_url, s4.channelType = i3.channel_type, s4.messageId = Number(i3.msg_id), s4.silent = i3.silent, s4.messageCreatedAt = i3.message_created_at ? Number(i3.message_created_at) : -1, s4.senderId = null !== (r2 = i3.sender_id) && void 0 !== r2 ? r2 : void 0, s4;\n  }\n  return t$2(n2, e3), n2;\n}(ze$2), ct$1 = function() {\n  function e3(e4, t4) {\n    var n2 = t4.session, i3 = t4.sdkState, r2 = t4.dispatcher, s4 = t4.logger, o2 = t4.useFetchCompat, a4 = void 0 !== o2 && o2, c3 = this;\n    this._abortControl = /* @__PURE__ */ new Map(), this._shouldImportFetchCompat = false, this._iid = e4, this._session = n2, this._sdkState = i3, this._dispatcher = r2, this._dispatcher.on(function(e5) {\n      e5 instanceof He$3 && c3.cancel(e5.requestId);\n    }), this._logger = s4, this._shouldImportFetchCompat = a4;\n  }\n  return e3.prototype._createHeader = function(e4, t4) {\n    var i3 = this._sdkState, r2 = i3.appId, s4 = i3.appVersion, o2 = i3.sendbirdRuntimeEnvironment, a4 = n$2(n$2({}, e4.headers), { SendBird: \"JS,\".concat(h$1.OS_VERSION, \",\").concat(h$1.SDK_VERSION, \",\").concat(r2).concat(s4 ? \",\".concat(s4) : \"\"), \"SB-User-Agent\": it$1.userAgentWithExtension(this._sdkState.extensions), \"Request-Sent-Timestamp\": Date.now().toString(), \"SB-SDK-User-Agent\": it$1.sendbirdSdkUserAgentWithExtension(o2) });\n    return t4 || (a4[\"Content-Type\"] = \"application/json; charset=utf-8\"), e4.requireAuth && !e4.hasSessionKey && this._session.hasSession && (a4[\"Session-Key\"] = this._session.sessionKey), a4[\"App-Id\"] = r2, this._session && this._session.authToken && (a4[\"Access-Token\"] = this._session.authToken), a4;\n  }, e3.prototype._statLogApiResult = function(e4, t4, n2) {\n    e4.path.includes(\"/sdk/statistics\") || this._dispatcher.dispatch(new We$2(new $e$1({ type: Me$1.API_RESULT, data: { endpoint: e4.path, method: e4.method, success: !n2, latency: Date.now() - t4, error_code: null == n2 ? void 0 : n2.code, error_description: null == n2 ? void 0 : n2.message } })));\n  }, e3.prototype._isBodyRequired = function(e4) {\n    var t4 = e4.method;\n    return t4 !== ae.GET && (t4 !== ae.DELETE || e4 instanceof ot$1);\n  }, e3.prototype.send = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i3, r2, o2, a4, c3, l2, h4, d4, _2, f2, p2, E3, g2, v2, m4, y4, w3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            t4 = e4.path, n2 = e4.method, i3 = e4.uploadProgressHandler, r2 = this._isBodyRequired(e4), o2 = this._sdkState.api, a4 = \"\".concat(o2.host).concat(t4).concat(r2 ? \"\" : e4.query), c3 = r2 ? e4.payload : null, l2 = this._createHeader(e4, c3 instanceof FormData ? c3 : void 0), h4 = new AbortController(), d4 = h4.signal, this._abortControl.set(e4.requestId, h4), _2 = Date.now(), s4.label = 1;\n          case 1:\n            return s4.trys.push([1, 13, , 14]), i3 ? [4, __webpack_require__.e(/*! import() */ 5).then(__webpack_require__.bind(null, /*! ./__bundle-d1c1a490-D4NdKYAy.js */ \"./node_modules/@practo/practo-ai/dist/__bundle-d1c1a490-D4NdKYAy.js\"))] : [3, 6];\n          case 2:\n            f2 = s4.sent().xmlHttpRequest, s4.label = 3;\n          case 3:\n            return s4.trys.push([3, 5, , 6]), [4, f2(this._iid, { requestId: e4.requestId, method: e4.method, url: a4, headers: l2, data: null != c3 ? c3 : void 0, uploadProgressHandler: i3 })];\n          case 4:\n            return p2 = s4.sent(), this._logger.debug(\"receive api response\", e4.requestId), this._statLogApiResult(e4, _2), [2, p2];\n          case 5:\n            if (!((E3 = s4.sent()) instanceof b$2 && E3.code === u$1.XMLHTTPREQUEST_NOT_SUPPORTED)) throw E3;\n            return this._logger.debug(\"XMLHttpRequest is not available in this environment. progressHandler is ignored.\"), [3, 6];\n          case 6:\n            return this._shouldImportFetchCompat && (this._shouldImportFetchCompat = false, (\"undefined\" != typeof globalThis && globalThis || \"undefined\" != typeof self && self || \"undefined\" != typeof global && global || { fetch: null }).fetch = null), \"undefined\" != typeof AbortController ? [3, 8] : [4, __webpack_require__.e(/*! import() */ 4).then(__webpack_require__.t.bind(null, /*! ./__bundle-8b4f432b-l0sNRNKZ.js */ \"./node_modules/@practo/practo-ai/dist/__bundle-8b4f432b-l0sNRNKZ.js\", 7))];\n          case 7:\n            s4.sent(), s4.label = 8;\n          case 8:\n            return \"function\" == typeof fetch ? [3, 10] : [4, __webpack_require__.e(/*! import() */ 2).then(__webpack_require__.bind(null, /*! ./__bundle-46d64517-HYorftfE.js */ \"./node_modules/@practo/practo-ai/dist/__bundle-46d64517-HYorftfE.js\")).then((n3) => n3._)];\n          case 9:\n            s4.sent(), s4.label = 10;\n          case 10:\n            return [4, fetch(a4, { method: n2, body: c3, headers: l2, signal: d4 })];\n          case 11:\n            return [4, (g2 = s4.sent()).json()];\n          case 12:\n            if (v2 = s4.sent(), g2.ok || g2.redirected) return this._logger.debug(\"receive api response\", e4.requestId), this._statLogApiResult(e4, _2), [2, new qe$2(this._iid, v2)];\n            if (v2) {\n              if ((m4 = new b$2(v2)).isSessionExpiredError) {\n                if (this._dispatcher.dispatch(new Ve$2({ reason: m4.code, message: m4.message })), !(e4 instanceof je$2)) return y4 = new rt$1(), this._dispatcher.dispatch(new Ze$2({ request: e4, deferred: y4, error: m4 })), [2, y4.promise];\n                throw m4;\n              }\n              throw m4.isSessionInvalidatedError ? (this._dispatcher.dispatch(new Ve$2({ reason: m4.code, message: m4.message })), m4) : m4;\n            }\n            throw b$2.requestFailed;\n          case 13:\n            throw w3 = s4.sent(), this._statLogApiResult(e4, _2, w3), w3 instanceof b$2 ? (this._logger.debug(\"fail api request\", w3), w3) : \"AbortError\" === (null == w3 ? void 0 : w3.name) ? b$2.requestCanceled : (this._logger.debug(\"fail api request\", w3), b$2.networkError);\n          case 14:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.cancel = function(e4) {\n    this._abortControl.has(e4) && (this._abortControl.get(e4).abort(), this._abortControl.delete(e4));\n    this._dispatcher.dispatch(new st$1({ requestId: e4 }));\n  }, e3.prototype.cancelAll = function() {\n    var e4, t4;\n    try {\n      for (var n2 = o(this._abortControl.values()), i3 = n2.next(); !i3.done; i3 = n2.next()) {\n        i3.value.abort();\n      }\n    } catch (t5) {\n      e4 = { error: t5 };\n    } finally {\n      try {\n        i3 && !i3.done && (t4 = n2.return) && t4.call(n2);\n      } finally {\n        if (e4) throw e4.error;\n      }\n    }\n    this._abortControl.clear(), this._dispatcher.dispatch(new st$1({}));\n  }, e3;\n}(), ut$1 = function() {\n};\nfunction lt$1(e3) {\n  let t4 = e3.length;\n  for (; --t4 >= 0; ) e3[t4] = 0;\n}\nconst ht$1 = 256, dt$1 = 286, _t$1 = 30, ft$1 = 15, pt$1 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), Et$2 = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), gt$1 = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), vt$1 = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), bt$1 = new Array(576);\nlt$1(bt$1);\nconst mt$1 = new Array(60);\nlt$1(mt$1);\nconst yt$1 = new Array(512);\nlt$1(yt$1);\nconst wt$1 = new Array(256);\nlt$1(wt$1);\nconst St$2 = new Array(29);\nlt$1(St$2);\nconst Tt$2 = new Array(_t$1);\nfunction Nt$2(e3, t4, n2, i3, r2) {\n  this.static_tree = e3, this.extra_bits = t4, this.extra_base = n2, this.elems = i3, this.max_length = r2, this.has_stree = e3 && e3.length;\n}\nlet Ct$2, At$2, It$2;\nfunction Ot$2(e3, t4) {\n  this.dyn_tree = e3, this.max_code = 0, this.stat_desc = t4;\n}\nlt$1(Tt$2);\nconst kt$1 = (e3) => e3 < 256 ? yt$1[e3] : yt$1[256 + (e3 >>> 7)], Dt$2 = (e3, t4) => {\n  e3.pending_buf[e3.pending++] = 255 & t4, e3.pending_buf[e3.pending++] = t4 >>> 8 & 255;\n}, Rt$2 = (e3, t4, n2) => {\n  e3.bi_valid > 16 - n2 ? (e3.bi_buf |= t4 << e3.bi_valid & 65535, Dt$2(e3, e3.bi_buf), e3.bi_buf = t4 >> 16 - e3.bi_valid, e3.bi_valid += n2 - 16) : (e3.bi_buf |= t4 << e3.bi_valid & 65535, e3.bi_valid += n2);\n}, Lt$2 = (e3, t4, n2) => {\n  Rt$2(e3, n2[2 * t4], n2[2 * t4 + 1]);\n}, xt$2 = (e3, t4) => {\n  let n2 = 0;\n  do {\n    n2 |= 1 & e3, e3 >>>= 1, n2 <<= 1;\n  } while (--t4 > 0);\n  return n2 >>> 1;\n}, Ut$2 = (e3, t4, n2) => {\n  const i3 = new Array(16);\n  let r2, s4, o2 = 0;\n  for (r2 = 1; r2 <= ft$1; r2++) o2 = o2 + n2[r2 - 1] << 1, i3[r2] = o2;\n  for (s4 = 0; s4 <= t4; s4++) {\n    let t5 = e3[2 * s4 + 1];\n    0 !== t5 && (e3[2 * s4] = xt$2(i3[t5]++, t5));\n  }\n}, Pt$2 = (e3) => {\n  let t4;\n  for (t4 = 0; t4 < dt$1; t4++) e3.dyn_ltree[2 * t4] = 0;\n  for (t4 = 0; t4 < _t$1; t4++) e3.dyn_dtree[2 * t4] = 0;\n  for (t4 = 0; t4 < 19; t4++) e3.bl_tree[2 * t4] = 0;\n  e3.dyn_ltree[512] = 1, e3.opt_len = e3.static_len = 0, e3.sym_next = e3.matches = 0;\n}, Mt$2 = (e3) => {\n  e3.bi_valid > 8 ? Dt$2(e3, e3.bi_buf) : e3.bi_valid > 0 && (e3.pending_buf[e3.pending++] = e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0;\n}, Ft$2 = (e3, t4, n2, i3) => {\n  const r2 = 2 * t4, s4 = 2 * n2;\n  return e3[r2] < e3[s4] || e3[r2] === e3[s4] && i3[t4] <= i3[n2];\n}, qt$2 = (e3, t4, n2) => {\n  const i3 = e3.heap[n2];\n  let r2 = n2 << 1;\n  for (; r2 <= e3.heap_len && (r2 < e3.heap_len && Ft$2(t4, e3.heap[r2 + 1], e3.heap[r2], e3.depth) && r2++, !Ft$2(t4, i3, e3.heap[r2], e3.depth)); ) e3.heap[n2] = e3.heap[r2], n2 = r2, r2 <<= 1;\n  e3.heap[n2] = i3;\n}, Ht$2 = (e3, t4, n2) => {\n  let i3, r2, s4, o2, a4 = 0;\n  if (0 !== e3.sym_next) do {\n    i3 = 255 & e3.pending_buf[e3.sym_buf + a4++], i3 += (255 & e3.pending_buf[e3.sym_buf + a4++]) << 8, r2 = e3.pending_buf[e3.sym_buf + a4++], 0 === i3 ? Lt$2(e3, r2, t4) : (s4 = wt$1[r2], Lt$2(e3, s4 + ht$1 + 1, t4), o2 = pt$1[s4], 0 !== o2 && (r2 -= St$2[s4], Rt$2(e3, r2, o2)), i3--, s4 = kt$1(i3), Lt$2(e3, s4, n2), o2 = Et$2[s4], 0 !== o2 && (i3 -= Tt$2[s4], Rt$2(e3, i3, o2)));\n  } while (a4 < e3.sym_next);\n  Lt$2(e3, 256, t4);\n}, Vt$2 = (e3, t4) => {\n  const n2 = t4.dyn_tree, i3 = t4.stat_desc.static_tree, r2 = t4.stat_desc.has_stree, s4 = t4.stat_desc.elems;\n  let o2, a4, c3, u3 = -1;\n  for (e3.heap_len = 0, e3.heap_max = 573, o2 = 0; o2 < s4; o2++) 0 !== n2[2 * o2] ? (e3.heap[++e3.heap_len] = u3 = o2, e3.depth[o2] = 0) : n2[2 * o2 + 1] = 0;\n  for (; e3.heap_len < 2; ) c3 = e3.heap[++e3.heap_len] = u3 < 2 ? ++u3 : 0, n2[2 * c3] = 1, e3.depth[c3] = 0, e3.opt_len--, r2 && (e3.static_len -= i3[2 * c3 + 1]);\n  for (t4.max_code = u3, o2 = e3.heap_len >> 1; o2 >= 1; o2--) qt$2(e3, n2, o2);\n  c3 = s4;\n  do {\n    o2 = e3.heap[1], e3.heap[1] = e3.heap[e3.heap_len--], qt$2(e3, n2, 1), a4 = e3.heap[1], e3.heap[--e3.heap_max] = o2, e3.heap[--e3.heap_max] = a4, n2[2 * c3] = n2[2 * o2] + n2[2 * a4], e3.depth[c3] = (e3.depth[o2] >= e3.depth[a4] ? e3.depth[o2] : e3.depth[a4]) + 1, n2[2 * o2 + 1] = n2[2 * a4 + 1] = c3, e3.heap[1] = c3++, qt$2(e3, n2, 1);\n  } while (e3.heap_len >= 2);\n  e3.heap[--e3.heap_max] = e3.heap[1], ((e4, t5) => {\n    const n3 = t5.dyn_tree, i4 = t5.max_code, r3 = t5.stat_desc.static_tree, s5 = t5.stat_desc.has_stree, o3 = t5.stat_desc.extra_bits, a5 = t5.stat_desc.extra_base, c4 = t5.stat_desc.max_length;\n    let u4, l2, h4, d4, _2, f2, p2 = 0;\n    for (d4 = 0; d4 <= ft$1; d4++) e4.bl_count[d4] = 0;\n    for (n3[2 * e4.heap[e4.heap_max] + 1] = 0, u4 = e4.heap_max + 1; u4 < 573; u4++) l2 = e4.heap[u4], d4 = n3[2 * n3[2 * l2 + 1] + 1] + 1, d4 > c4 && (d4 = c4, p2++), n3[2 * l2 + 1] = d4, l2 > i4 || (e4.bl_count[d4]++, _2 = 0, l2 >= a5 && (_2 = o3[l2 - a5]), f2 = n3[2 * l2], e4.opt_len += f2 * (d4 + _2), s5 && (e4.static_len += f2 * (r3[2 * l2 + 1] + _2)));\n    if (0 !== p2) {\n      do {\n        for (d4 = c4 - 1; 0 === e4.bl_count[d4]; ) d4--;\n        e4.bl_count[d4]--, e4.bl_count[d4 + 1] += 2, e4.bl_count[c4]--, p2 -= 2;\n      } while (p2 > 0);\n      for (d4 = c4; 0 !== d4; d4--) for (l2 = e4.bl_count[d4]; 0 !== l2; ) h4 = e4.heap[--u4], h4 > i4 || (n3[2 * h4 + 1] !== d4 && (e4.opt_len += (d4 - n3[2 * h4 + 1]) * n3[2 * h4], n3[2 * h4 + 1] = d4), l2--);\n    }\n  })(e3, t4), Ut$2(n2, u3, e3.bl_count);\n}, zt$2 = (e3, t4, n2) => {\n  let i3, r2, s4 = -1, o2 = t4[1], a4 = 0, c3 = 7, u3 = 4;\n  for (0 === o2 && (c3 = 138, u3 = 3), t4[2 * (n2 + 1) + 1] = 65535, i3 = 0; i3 <= n2; i3++) r2 = o2, o2 = t4[2 * (i3 + 1) + 1], ++a4 < c3 && r2 === o2 || (a4 < u3 ? e3.bl_tree[2 * r2] += a4 : 0 !== r2 ? (r2 !== s4 && e3.bl_tree[2 * r2]++, e3.bl_tree[32]++) : a4 <= 10 ? e3.bl_tree[34]++ : e3.bl_tree[36]++, a4 = 0, s4 = r2, 0 === o2 ? (c3 = 138, u3 = 3) : r2 === o2 ? (c3 = 6, u3 = 3) : (c3 = 7, u3 = 4));\n}, Gt$2 = (e3, t4, n2) => {\n  let i3, r2, s4 = -1, o2 = t4[1], a4 = 0, c3 = 7, u3 = 4;\n  for (0 === o2 && (c3 = 138, u3 = 3), i3 = 0; i3 <= n2; i3++) if (r2 = o2, o2 = t4[2 * (i3 + 1) + 1], !(++a4 < c3 && r2 === o2)) {\n    if (a4 < u3) do {\n      Lt$2(e3, r2, e3.bl_tree);\n    } while (0 != --a4);\n    else 0 !== r2 ? (r2 !== s4 && (Lt$2(e3, r2, e3.bl_tree), a4--), Lt$2(e3, 16, e3.bl_tree), Rt$2(e3, a4 - 3, 2)) : a4 <= 10 ? (Lt$2(e3, 17, e3.bl_tree), Rt$2(e3, a4 - 3, 3)) : (Lt$2(e3, 18, e3.bl_tree), Rt$2(e3, a4 - 11, 7));\n    a4 = 0, s4 = r2, 0 === o2 ? (c3 = 138, u3 = 3) : r2 === o2 ? (c3 = 6, u3 = 3) : (c3 = 7, u3 = 4);\n  }\n};\nlet jt$2 = false;\nconst Kt$2 = (e3, t4, n2, i3) => {\n  Rt$2(e3, 0 + (i3 ? 1 : 0), 3), Mt$2(e3), Dt$2(e3, n2), Dt$2(e3, ~n2), n2 && e3.pending_buf.set(e3.window.subarray(t4, t4 + n2), e3.pending), e3.pending += n2;\n};\nvar Bt$2 = (e3, t4, n2, i3) => {\n  let r2, s4, o2 = 0;\n  e3.level > 0 ? (2 === e3.strm.data_type && (e3.strm.data_type = ((e4) => {\n    let t5, n3 = 4093624447;\n    for (t5 = 0; t5 <= 31; t5++, n3 >>>= 1) if (1 & n3 && 0 !== e4.dyn_ltree[2 * t5]) return 0;\n    if (0 !== e4.dyn_ltree[18] || 0 !== e4.dyn_ltree[20] || 0 !== e4.dyn_ltree[26]) return 1;\n    for (t5 = 32; t5 < ht$1; t5++) if (0 !== e4.dyn_ltree[2 * t5]) return 1;\n    return 0;\n  })(e3)), Vt$2(e3, e3.l_desc), Vt$2(e3, e3.d_desc), o2 = ((e4) => {\n    let t5;\n    for (zt$2(e4, e4.dyn_ltree, e4.l_desc.max_code), zt$2(e4, e4.dyn_dtree, e4.d_desc.max_code), Vt$2(e4, e4.bl_desc), t5 = 18; t5 >= 3 && 0 === e4.bl_tree[2 * vt$1[t5] + 1]; t5--) ;\n    return e4.opt_len += 3 * (t5 + 1) + 5 + 5 + 4, t5;\n  })(e3), r2 = e3.opt_len + 3 + 7 >>> 3, s4 = e3.static_len + 3 + 7 >>> 3, s4 <= r2 && (r2 = s4)) : r2 = s4 = n2 + 5, n2 + 4 <= r2 && -1 !== t4 ? Kt$2(e3, t4, n2, i3) : 4 === e3.strategy || s4 === r2 ? (Rt$2(e3, 2 + (i3 ? 1 : 0), 3), Ht$2(e3, bt$1, mt$1)) : (Rt$2(e3, 4 + (i3 ? 1 : 0), 3), ((e4, t5, n3, i4) => {\n    let r3;\n    for (Rt$2(e4, t5 - 257, 5), Rt$2(e4, n3 - 1, 5), Rt$2(e4, i4 - 4, 4), r3 = 0; r3 < i4; r3++) Rt$2(e4, e4.bl_tree[2 * vt$1[r3] + 1], 3);\n    Gt$2(e4, e4.dyn_ltree, t5 - 1), Gt$2(e4, e4.dyn_dtree, n3 - 1);\n  })(e3, e3.l_desc.max_code + 1, e3.d_desc.max_code + 1, o2 + 1), Ht$2(e3, e3.dyn_ltree, e3.dyn_dtree)), Pt$2(e3), i3 && Mt$2(e3);\n}, Qt$2 = { _tr_init: (e3) => {\n  jt$2 || ((() => {\n    let e4, t4, n2, i3, r2;\n    const s4 = new Array(16);\n    for (n2 = 0, i3 = 0; i3 < 28; i3++) for (St$2[i3] = n2, e4 = 0; e4 < 1 << pt$1[i3]; e4++) wt$1[n2++] = i3;\n    for (wt$1[n2 - 1] = i3, r2 = 0, i3 = 0; i3 < 16; i3++) for (Tt$2[i3] = r2, e4 = 0; e4 < 1 << Et$2[i3]; e4++) yt$1[r2++] = i3;\n    for (r2 >>= 7; i3 < _t$1; i3++) for (Tt$2[i3] = r2 << 7, e4 = 0; e4 < 1 << Et$2[i3] - 7; e4++) yt$1[256 + r2++] = i3;\n    for (t4 = 0; t4 <= ft$1; t4++) s4[t4] = 0;\n    for (e4 = 0; e4 <= 143; ) bt$1[2 * e4 + 1] = 8, e4++, s4[8]++;\n    for (; e4 <= 255; ) bt$1[2 * e4 + 1] = 9, e4++, s4[9]++;\n    for (; e4 <= 279; ) bt$1[2 * e4 + 1] = 7, e4++, s4[7]++;\n    for (; e4 <= 287; ) bt$1[2 * e4 + 1] = 8, e4++, s4[8]++;\n    for (Ut$2(bt$1, 287, s4), e4 = 0; e4 < _t$1; e4++) mt$1[2 * e4 + 1] = 5, mt$1[2 * e4] = xt$2(e4, 5);\n    Ct$2 = new Nt$2(bt$1, pt$1, 257, dt$1, ft$1), At$2 = new Nt$2(mt$1, Et$2, 0, _t$1, ft$1), It$2 = new Nt$2(new Array(0), gt$1, 0, 19, 7);\n  })(), jt$2 = true), e3.l_desc = new Ot$2(e3.dyn_ltree, Ct$2), e3.d_desc = new Ot$2(e3.dyn_dtree, At$2), e3.bl_desc = new Ot$2(e3.bl_tree, It$2), e3.bi_buf = 0, e3.bi_valid = 0, Pt$2(e3);\n}, _tr_stored_block: Kt$2, _tr_flush_block: Bt$2, _tr_tally: (e3, t4, n2) => (e3.pending_buf[e3.sym_buf + e3.sym_next++] = t4, e3.pending_buf[e3.sym_buf + e3.sym_next++] = t4 >> 8, e3.pending_buf[e3.sym_buf + e3.sym_next++] = n2, 0 === t4 ? e3.dyn_ltree[2 * n2]++ : (e3.matches++, t4--, e3.dyn_ltree[2 * (wt$1[n2] + ht$1 + 1)]++, e3.dyn_dtree[2 * kt$1(t4)]++), e3.sym_next === e3.sym_end), _tr_align: (e3) => {\n  Rt$2(e3, 2, 3), Lt$2(e3, 256, bt$1), ((e4) => {\n    16 === e4.bi_valid ? (Dt$2(e4, e4.bi_buf), e4.bi_buf = 0, e4.bi_valid = 0) : e4.bi_valid >= 8 && (e4.pending_buf[e4.pending++] = 255 & e4.bi_buf, e4.bi_buf >>= 8, e4.bi_valid -= 8);\n  })(e3);\n} };\nvar Wt$2 = (e3, t4, n2, i3) => {\n  let r2 = 65535 & e3, s4 = e3 >>> 16 & 65535, o2 = 0;\n  for (; 0 !== n2; ) {\n    o2 = n2 > 2e3 ? 2e3 : n2, n2 -= o2;\n    do {\n      r2 = r2 + t4[i3++] | 0, s4 = s4 + r2 | 0;\n    } while (--o2);\n    r2 %= 65521, s4 %= 65521;\n  }\n  return r2 | s4 << 16;\n};\nconst Zt$3 = new Uint32Array((() => {\n  let e3, t4 = [];\n  for (var n2 = 0; n2 < 256; n2++) {\n    e3 = n2;\n    for (var i3 = 0; i3 < 8; i3++) e3 = 1 & e3 ? 3988292384 ^ e3 >>> 1 : e3 >>> 1;\n    t4[n2] = e3;\n  }\n  return t4;\n})());\nvar Yt$2 = (e3, t4, n2, i3) => {\n  const r2 = Zt$3, s4 = i3 + n2;\n  e3 ^= -1;\n  for (let n3 = i3; n3 < s4; n3++) e3 = e3 >>> 8 ^ r2[255 & (e3 ^ t4[n3])];\n  return ~e3;\n}, Xt$2 = { 2: \"need dictionary\", 1: \"stream end\", 0: \"\", \"-1\": \"file error\", \"-2\": \"stream error\", \"-3\": \"data error\", \"-4\": \"insufficient memory\", \"-5\": \"buffer error\", \"-6\": \"incompatible version\" }, Jt$2 = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_MEM_ERROR: -4, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };\nconst { _tr_init: $t$3, _tr_stored_block: en$3, _tr_flush_block: tn$3, _tr_tally: nn$3, _tr_align: rn$3 } = Qt$2, { Z_NO_FLUSH: sn$3, Z_PARTIAL_FLUSH: on$3, Z_FULL_FLUSH: an$3, Z_FINISH: cn$3, Z_BLOCK: un$3, Z_OK: ln$3, Z_STREAM_END: hn$3, Z_STREAM_ERROR: dn$3, Z_DATA_ERROR: _n$3, Z_BUF_ERROR: fn$3, Z_DEFAULT_COMPRESSION: pn$3, Z_FILTERED: En$3, Z_HUFFMAN_ONLY: gn$3, Z_RLE: vn$3, Z_FIXED: bn$3, Z_DEFAULT_STRATEGY: mn$3, Z_UNKNOWN: yn$3, Z_DEFLATED: wn$3 } = Jt$2, Sn$3 = 258, Tn$3 = 262, Nn$3 = 42, Cn$3 = 113, An$3 = 666, In$3 = (e3, t4) => (e3.msg = Xt$2[t4], t4), On$3 = (e3) => 2 * e3 - (e3 > 4 ? 9 : 0), kn$3 = (e3) => {\n  let t4 = e3.length;\n  for (; --t4 >= 0; ) e3[t4] = 0;\n}, Dn$3 = (e3) => {\n  let t4, n2, i3, r2 = e3.w_size;\n  t4 = e3.hash_size, i3 = t4;\n  do {\n    n2 = e3.head[--i3], e3.head[i3] = n2 >= r2 ? n2 - r2 : 0;\n  } while (--t4);\n  t4 = r2, i3 = t4;\n  do {\n    n2 = e3.prev[--i3], e3.prev[i3] = n2 >= r2 ? n2 - r2 : 0;\n  } while (--t4);\n};\nlet Rn$2 = (e3, t4, n2) => (t4 << e3.hash_shift ^ n2) & e3.hash_mask;\nconst Ln$3 = (e3) => {\n  const t4 = e3.state;\n  let n2 = t4.pending;\n  n2 > e3.avail_out && (n2 = e3.avail_out), 0 !== n2 && (e3.output.set(t4.pending_buf.subarray(t4.pending_out, t4.pending_out + n2), e3.next_out), e3.next_out += n2, t4.pending_out += n2, e3.total_out += n2, e3.avail_out -= n2, t4.pending -= n2, 0 === t4.pending && (t4.pending_out = 0));\n}, xn$2 = (e3, t4) => {\n  tn$3(e3, e3.block_start >= 0 ? e3.block_start : -1, e3.strstart - e3.block_start, t4), e3.block_start = e3.strstart, Ln$3(e3.strm);\n}, Un$3 = (e3, t4) => {\n  e3.pending_buf[e3.pending++] = t4;\n}, Pn$3 = (e3, t4) => {\n  e3.pending_buf[e3.pending++] = t4 >>> 8 & 255, e3.pending_buf[e3.pending++] = 255 & t4;\n}, Mn$3 = (e3, t4, n2, i3) => {\n  let r2 = e3.avail_in;\n  return r2 > i3 && (r2 = i3), 0 === r2 ? 0 : (e3.avail_in -= r2, t4.set(e3.input.subarray(e3.next_in, e3.next_in + r2), n2), 1 === e3.state.wrap ? e3.adler = Wt$2(e3.adler, t4, r2, n2) : 2 === e3.state.wrap && (e3.adler = Yt$2(e3.adler, t4, r2, n2)), e3.next_in += r2, e3.total_in += r2, r2);\n}, Fn$2 = (e3, t4) => {\n  let n2, i3, r2 = e3.max_chain_length, s4 = e3.strstart, o2 = e3.prev_length, a4 = e3.nice_match;\n  const c3 = e3.strstart > e3.w_size - Tn$3 ? e3.strstart - (e3.w_size - Tn$3) : 0, u3 = e3.window, l2 = e3.w_mask, h4 = e3.prev, d4 = e3.strstart + Sn$3;\n  let _2 = u3[s4 + o2 - 1], f2 = u3[s4 + o2];\n  e3.prev_length >= e3.good_match && (r2 >>= 2), a4 > e3.lookahead && (a4 = e3.lookahead);\n  do {\n    if (n2 = t4, u3[n2 + o2] === f2 && u3[n2 + o2 - 1] === _2 && u3[n2] === u3[s4] && u3[++n2] === u3[s4 + 1]) {\n      s4 += 2, n2++;\n      do {\n      } while (u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && u3[++s4] === u3[++n2] && s4 < d4);\n      if (i3 = Sn$3 - (d4 - s4), s4 = d4 - Sn$3, i3 > o2) {\n        if (e3.match_start = t4, o2 = i3, i3 >= a4) break;\n        _2 = u3[s4 + o2 - 1], f2 = u3[s4 + o2];\n      }\n    }\n  } while ((t4 = h4[t4 & l2]) > c3 && 0 != --r2);\n  return o2 <= e3.lookahead ? o2 : e3.lookahead;\n}, qn$2 = (e3) => {\n  const t4 = e3.w_size;\n  let n2, i3, r2;\n  do {\n    if (i3 = e3.window_size - e3.lookahead - e3.strstart, e3.strstart >= t4 + (t4 - Tn$3) && (e3.window.set(e3.window.subarray(t4, t4 + t4 - i3), 0), e3.match_start -= t4, e3.strstart -= t4, e3.block_start -= t4, e3.insert > e3.strstart && (e3.insert = e3.strstart), Dn$3(e3), i3 += t4), 0 === e3.strm.avail_in) break;\n    if (n2 = Mn$3(e3.strm, e3.window, e3.strstart + e3.lookahead, i3), e3.lookahead += n2, e3.lookahead + e3.insert >= 3) for (r2 = e3.strstart - e3.insert, e3.ins_h = e3.window[r2], e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[r2 + 1]); e3.insert && (e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[r2 + 3 - 1]), e3.prev[r2 & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = r2, r2++, e3.insert--, !(e3.lookahead + e3.insert < 3)); ) ;\n  } while (e3.lookahead < Tn$3 && 0 !== e3.strm.avail_in);\n}, Hn$2 = (e3, t4) => {\n  let n2, i3, r2, s4 = e3.pending_buf_size - 5 > e3.w_size ? e3.w_size : e3.pending_buf_size - 5, o2 = 0, a4 = e3.strm.avail_in;\n  do {\n    if (n2 = 65535, r2 = e3.bi_valid + 42 >> 3, e3.strm.avail_out < r2) break;\n    if (r2 = e3.strm.avail_out - r2, i3 = e3.strstart - e3.block_start, n2 > i3 + e3.strm.avail_in && (n2 = i3 + e3.strm.avail_in), n2 > r2 && (n2 = r2), n2 < s4 && (0 === n2 && t4 !== cn$3 || t4 === sn$3 || n2 !== i3 + e3.strm.avail_in)) break;\n    o2 = t4 === cn$3 && n2 === i3 + e3.strm.avail_in ? 1 : 0, en$3(e3, 0, 0, o2), e3.pending_buf[e3.pending - 4] = n2, e3.pending_buf[e3.pending - 3] = n2 >> 8, e3.pending_buf[e3.pending - 2] = ~n2, e3.pending_buf[e3.pending - 1] = ~n2 >> 8, Ln$3(e3.strm), i3 && (i3 > n2 && (i3 = n2), e3.strm.output.set(e3.window.subarray(e3.block_start, e3.block_start + i3), e3.strm.next_out), e3.strm.next_out += i3, e3.strm.avail_out -= i3, e3.strm.total_out += i3, e3.block_start += i3, n2 -= i3), n2 && (Mn$3(e3.strm, e3.strm.output, e3.strm.next_out, n2), e3.strm.next_out += n2, e3.strm.avail_out -= n2, e3.strm.total_out += n2);\n  } while (0 === o2);\n  return a4 -= e3.strm.avail_in, a4 && (a4 >= e3.w_size ? (e3.matches = 2, e3.window.set(e3.strm.input.subarray(e3.strm.next_in - e3.w_size, e3.strm.next_in), 0), e3.strstart = e3.w_size, e3.insert = e3.strstart) : (e3.window_size - e3.strstart <= a4 && (e3.strstart -= e3.w_size, e3.window.set(e3.window.subarray(e3.w_size, e3.w_size + e3.strstart), 0), e3.matches < 2 && e3.matches++, e3.insert > e3.strstart && (e3.insert = e3.strstart)), e3.window.set(e3.strm.input.subarray(e3.strm.next_in - a4, e3.strm.next_in), e3.strstart), e3.strstart += a4, e3.insert += a4 > e3.w_size - e3.insert ? e3.w_size - e3.insert : a4), e3.block_start = e3.strstart), e3.high_water < e3.strstart && (e3.high_water = e3.strstart), o2 ? 4 : t4 !== sn$3 && t4 !== cn$3 && 0 === e3.strm.avail_in && e3.strstart === e3.block_start ? 2 : (r2 = e3.window_size - e3.strstart, e3.strm.avail_in > r2 && e3.block_start >= e3.w_size && (e3.block_start -= e3.w_size, e3.strstart -= e3.w_size, e3.window.set(e3.window.subarray(e3.w_size, e3.w_size + e3.strstart), 0), e3.matches < 2 && e3.matches++, r2 += e3.w_size, e3.insert > e3.strstart && (e3.insert = e3.strstart)), r2 > e3.strm.avail_in && (r2 = e3.strm.avail_in), r2 && (Mn$3(e3.strm, e3.window, e3.strstart, r2), e3.strstart += r2, e3.insert += r2 > e3.w_size - e3.insert ? e3.w_size - e3.insert : r2), e3.high_water < e3.strstart && (e3.high_water = e3.strstart), r2 = e3.bi_valid + 42 >> 3, r2 = e3.pending_buf_size - r2 > 65535 ? 65535 : e3.pending_buf_size - r2, s4 = r2 > e3.w_size ? e3.w_size : r2, i3 = e3.strstart - e3.block_start, (i3 >= s4 || (i3 || t4 === cn$3) && t4 !== sn$3 && 0 === e3.strm.avail_in && i3 <= r2) && (n2 = i3 > r2 ? r2 : i3, o2 = t4 === cn$3 && 0 === e3.strm.avail_in && n2 === i3 ? 1 : 0, en$3(e3, e3.block_start, n2, o2), e3.block_start += n2, Ln$3(e3.strm)), o2 ? 3 : 1);\n}, Vn$2 = (e3, t4) => {\n  let n2, i3;\n  for (; ; ) {\n    if (e3.lookahead < Tn$3) {\n      if (qn$2(e3), e3.lookahead < Tn$3 && t4 === sn$3) return 1;\n      if (0 === e3.lookahead) break;\n    }\n    if (n2 = 0, e3.lookahead >= 3 && (e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[e3.strstart + 3 - 1]), n2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 !== n2 && e3.strstart - n2 <= e3.w_size - Tn$3 && (e3.match_length = Fn$2(e3, n2)), e3.match_length >= 3) if (i3 = nn$3(e3, e3.strstart - e3.match_start, e3.match_length - 3), e3.lookahead -= e3.match_length, e3.match_length <= e3.max_lazy_match && e3.lookahead >= 3) {\n      e3.match_length--;\n      do {\n        e3.strstart++, e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[e3.strstart + 3 - 1]), n2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart;\n      } while (0 != --e3.match_length);\n      e3.strstart++;\n    } else e3.strstart += e3.match_length, e3.match_length = 0, e3.ins_h = e3.window[e3.strstart], e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[e3.strstart + 1]);\n    else i3 = nn$3(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++;\n    if (i3 && (xn$2(e3, false), 0 === e3.strm.avail_out)) return 1;\n  }\n  return e3.insert = e3.strstart < 2 ? e3.strstart : 2, t4 === cn$3 ? (xn$2(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.sym_next && (xn$2(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;\n}, zn$2 = (e3, t4) => {\n  let n2, i3, r2;\n  for (; ; ) {\n    if (e3.lookahead < Tn$3) {\n      if (qn$2(e3), e3.lookahead < Tn$3 && t4 === sn$3) return 1;\n      if (0 === e3.lookahead) break;\n    }\n    if (n2 = 0, e3.lookahead >= 3 && (e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[e3.strstart + 3 - 1]), n2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), e3.prev_length = e3.match_length, e3.prev_match = e3.match_start, e3.match_length = 2, 0 !== n2 && e3.prev_length < e3.max_lazy_match && e3.strstart - n2 <= e3.w_size - Tn$3 && (e3.match_length = Fn$2(e3, n2), e3.match_length <= 5 && (e3.strategy === En$3 || 3 === e3.match_length && e3.strstart - e3.match_start > 4096) && (e3.match_length = 2)), e3.prev_length >= 3 && e3.match_length <= e3.prev_length) {\n      r2 = e3.strstart + e3.lookahead - 3, i3 = nn$3(e3, e3.strstart - 1 - e3.prev_match, e3.prev_length - 3), e3.lookahead -= e3.prev_length - 1, e3.prev_length -= 2;\n      do {\n        ++e3.strstart <= r2 && (e3.ins_h = Rn$2(e3, e3.ins_h, e3.window[e3.strstart + 3 - 1]), n2 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart);\n      } while (0 != --e3.prev_length);\n      if (e3.match_available = 0, e3.match_length = 2, e3.strstart++, i3 && (xn$2(e3, false), 0 === e3.strm.avail_out)) return 1;\n    } else if (e3.match_available) {\n      if (i3 = nn$3(e3, 0, e3.window[e3.strstart - 1]), i3 && xn$2(e3, false), e3.strstart++, e3.lookahead--, 0 === e3.strm.avail_out) return 1;\n    } else e3.match_available = 1, e3.strstart++, e3.lookahead--;\n  }\n  return e3.match_available && (i3 = nn$3(e3, 0, e3.window[e3.strstart - 1]), e3.match_available = 0), e3.insert = e3.strstart < 2 ? e3.strstart : 2, t4 === cn$3 ? (xn$2(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.sym_next && (xn$2(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;\n};\nfunction Gn$2(e3, t4, n2, i3, r2) {\n  this.good_length = e3, this.max_lazy = t4, this.nice_length = n2, this.max_chain = i3, this.func = r2;\n}\nconst jn$2 = [new Gn$2(0, 0, 0, 0, Hn$2), new Gn$2(4, 4, 8, 4, Vn$2), new Gn$2(4, 5, 16, 8, Vn$2), new Gn$2(4, 6, 32, 32, Vn$2), new Gn$2(4, 4, 16, 16, zn$2), new Gn$2(8, 16, 32, 32, zn$2), new Gn$2(8, 16, 128, 128, zn$2), new Gn$2(8, 32, 128, 256, zn$2), new Gn$2(32, 128, 258, 1024, zn$2), new Gn$2(32, 258, 258, 4096, zn$2)];\nfunction Kn$2() {\n  this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = wn$3, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), kn$3(this.dyn_ltree), kn$3(this.dyn_dtree), kn$3(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), kn$3(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), kn$3(this.depth), this.sym_buf = 0, this.lit_bufsize = 0, this.sym_next = 0, this.sym_end = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;\n}\nconst Bn$2 = (e3) => {\n  if (!e3) return 1;\n  const t4 = e3.state;\n  return !t4 || t4.strm !== e3 || t4.status !== Nn$3 && 57 !== t4.status && 69 !== t4.status && 73 !== t4.status && 91 !== t4.status && 103 !== t4.status && t4.status !== Cn$3 && t4.status !== An$3 ? 1 : 0;\n}, Qn$2 = (e3) => {\n  if (Bn$2(e3)) return In$3(e3, dn$3);\n  e3.total_in = e3.total_out = 0, e3.data_type = yn$3;\n  const t4 = e3.state;\n  return t4.pending = 0, t4.pending_out = 0, t4.wrap < 0 && (t4.wrap = -t4.wrap), t4.status = 2 === t4.wrap ? 57 : t4.wrap ? Nn$3 : Cn$3, e3.adler = 2 === t4.wrap ? 0 : 1, t4.last_flush = -2, $t$3(t4), ln$3;\n}, Wn$2 = (e3) => {\n  const t4 = Qn$2(e3);\n  var n2;\n  return t4 === ln$3 && ((n2 = e3.state).window_size = 2 * n2.w_size, kn$3(n2.head), n2.max_lazy_match = jn$2[n2.level].max_lazy, n2.good_match = jn$2[n2.level].good_length, n2.nice_match = jn$2[n2.level].nice_length, n2.max_chain_length = jn$2[n2.level].max_chain, n2.strstart = 0, n2.block_start = 0, n2.lookahead = 0, n2.insert = 0, n2.match_length = n2.prev_length = 2, n2.match_available = 0, n2.ins_h = 0), t4;\n}, Zn$2 = (e3, t4, n2, i3, r2, s4) => {\n  if (!e3) return dn$3;\n  let o2 = 1;\n  if (t4 === pn$3 && (t4 = 6), i3 < 0 ? (o2 = 0, i3 = -i3) : i3 > 15 && (o2 = 2, i3 -= 16), r2 < 1 || r2 > 9 || n2 !== wn$3 || i3 < 8 || i3 > 15 || t4 < 0 || t4 > 9 || s4 < 0 || s4 > bn$3 || 8 === i3 && 1 !== o2) return In$3(e3, dn$3);\n  8 === i3 && (i3 = 9);\n  const a4 = new Kn$2();\n  return e3.state = a4, a4.strm = e3, a4.status = Nn$3, a4.wrap = o2, a4.gzhead = null, a4.w_bits = i3, a4.w_size = 1 << a4.w_bits, a4.w_mask = a4.w_size - 1, a4.hash_bits = r2 + 7, a4.hash_size = 1 << a4.hash_bits, a4.hash_mask = a4.hash_size - 1, a4.hash_shift = ~~((a4.hash_bits + 3 - 1) / 3), a4.window = new Uint8Array(2 * a4.w_size), a4.head = new Uint16Array(a4.hash_size), a4.prev = new Uint16Array(a4.w_size), a4.lit_bufsize = 1 << r2 + 6, a4.pending_buf_size = 4 * a4.lit_bufsize, a4.pending_buf = new Uint8Array(a4.pending_buf_size), a4.sym_buf = a4.lit_bufsize, a4.sym_end = 3 * (a4.lit_bufsize - 1), a4.level = t4, a4.strategy = s4, a4.method = n2, Wn$2(e3);\n};\nvar Yn$2 = { deflateInit: (e3, t4) => Zn$2(e3, t4, wn$3, 15, 8, mn$3), deflateInit2: Zn$2, deflateReset: Wn$2, deflateResetKeep: Qn$2, deflateSetHeader: (e3, t4) => Bn$2(e3) || 2 !== e3.state.wrap ? dn$3 : (e3.state.gzhead = t4, ln$3), deflate: (e3, t4) => {\n  if (Bn$2(e3) || t4 > un$3 || t4 < 0) return e3 ? In$3(e3, dn$3) : dn$3;\n  const n2 = e3.state;\n  if (!e3.output || 0 !== e3.avail_in && !e3.input || n2.status === An$3 && t4 !== cn$3) return In$3(e3, 0 === e3.avail_out ? fn$3 : dn$3);\n  const i3 = n2.last_flush;\n  if (n2.last_flush = t4, 0 !== n2.pending) {\n    if (Ln$3(e3), 0 === e3.avail_out) return n2.last_flush = -1, ln$3;\n  } else if (0 === e3.avail_in && On$3(t4) <= On$3(i3) && t4 !== cn$3) return In$3(e3, fn$3);\n  if (n2.status === An$3 && 0 !== e3.avail_in) return In$3(e3, fn$3);\n  if (n2.status === Nn$3 && 0 === n2.wrap && (n2.status = Cn$3), n2.status === Nn$3) {\n    let t5 = wn$3 + (n2.w_bits - 8 << 4) << 8, i4 = -1;\n    if (i4 = n2.strategy >= gn$3 || n2.level < 2 ? 0 : n2.level < 6 ? 1 : 6 === n2.level ? 2 : 3, t5 |= i4 << 6, 0 !== n2.strstart && (t5 |= 32), t5 += 31 - t5 % 31, Pn$3(n2, t5), 0 !== n2.strstart && (Pn$3(n2, e3.adler >>> 16), Pn$3(n2, 65535 & e3.adler)), e3.adler = 1, n2.status = Cn$3, Ln$3(e3), 0 !== n2.pending) return n2.last_flush = -1, ln$3;\n  }\n  if (57 === n2.status) {\n    if (e3.adler = 0, Un$3(n2, 31), Un$3(n2, 139), Un$3(n2, 8), n2.gzhead) Un$3(n2, (n2.gzhead.text ? 1 : 0) + (n2.gzhead.hcrc ? 2 : 0) + (n2.gzhead.extra ? 4 : 0) + (n2.gzhead.name ? 8 : 0) + (n2.gzhead.comment ? 16 : 0)), Un$3(n2, 255 & n2.gzhead.time), Un$3(n2, n2.gzhead.time >> 8 & 255), Un$3(n2, n2.gzhead.time >> 16 & 255), Un$3(n2, n2.gzhead.time >> 24 & 255), Un$3(n2, 9 === n2.level ? 2 : n2.strategy >= gn$3 || n2.level < 2 ? 4 : 0), Un$3(n2, 255 & n2.gzhead.os), n2.gzhead.extra && n2.gzhead.extra.length && (Un$3(n2, 255 & n2.gzhead.extra.length), Un$3(n2, n2.gzhead.extra.length >> 8 & 255)), n2.gzhead.hcrc && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending, 0)), n2.gzindex = 0, n2.status = 69;\n    else if (Un$3(n2, 0), Un$3(n2, 0), Un$3(n2, 0), Un$3(n2, 0), Un$3(n2, 0), Un$3(n2, 9 === n2.level ? 2 : n2.strategy >= gn$3 || n2.level < 2 ? 4 : 0), Un$3(n2, 3), n2.status = Cn$3, Ln$3(e3), 0 !== n2.pending) return n2.last_flush = -1, ln$3;\n  }\n  if (69 === n2.status) {\n    if (n2.gzhead.extra) {\n      let t5 = n2.pending, i4 = (65535 & n2.gzhead.extra.length) - n2.gzindex;\n      for (; n2.pending + i4 > n2.pending_buf_size; ) {\n        let r3 = n2.pending_buf_size - n2.pending;\n        if (n2.pending_buf.set(n2.gzhead.extra.subarray(n2.gzindex, n2.gzindex + r3), n2.pending), n2.pending = n2.pending_buf_size, n2.gzhead.hcrc && n2.pending > t5 && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending - t5, t5)), n2.gzindex += r3, Ln$3(e3), 0 !== n2.pending) return n2.last_flush = -1, ln$3;\n        t5 = 0, i4 -= r3;\n      }\n      let r2 = new Uint8Array(n2.gzhead.extra);\n      n2.pending_buf.set(r2.subarray(n2.gzindex, n2.gzindex + i4), n2.pending), n2.pending += i4, n2.gzhead.hcrc && n2.pending > t5 && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending - t5, t5)), n2.gzindex = 0;\n    }\n    n2.status = 73;\n  }\n  if (73 === n2.status) {\n    if (n2.gzhead.name) {\n      let t5, i4 = n2.pending;\n      do {\n        if (n2.pending === n2.pending_buf_size) {\n          if (n2.gzhead.hcrc && n2.pending > i4 && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending - i4, i4)), Ln$3(e3), 0 !== n2.pending) return n2.last_flush = -1, ln$3;\n          i4 = 0;\n        }\n        t5 = n2.gzindex < n2.gzhead.name.length ? 255 & n2.gzhead.name.charCodeAt(n2.gzindex++) : 0, Un$3(n2, t5);\n      } while (0 !== t5);\n      n2.gzhead.hcrc && n2.pending > i4 && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending - i4, i4)), n2.gzindex = 0;\n    }\n    n2.status = 91;\n  }\n  if (91 === n2.status) {\n    if (n2.gzhead.comment) {\n      let t5, i4 = n2.pending;\n      do {\n        if (n2.pending === n2.pending_buf_size) {\n          if (n2.gzhead.hcrc && n2.pending > i4 && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending - i4, i4)), Ln$3(e3), 0 !== n2.pending) return n2.last_flush = -1, ln$3;\n          i4 = 0;\n        }\n        t5 = n2.gzindex < n2.gzhead.comment.length ? 255 & n2.gzhead.comment.charCodeAt(n2.gzindex++) : 0, Un$3(n2, t5);\n      } while (0 !== t5);\n      n2.gzhead.hcrc && n2.pending > i4 && (e3.adler = Yt$2(e3.adler, n2.pending_buf, n2.pending - i4, i4));\n    }\n    n2.status = 103;\n  }\n  if (103 === n2.status) {\n    if (n2.gzhead.hcrc) {\n      if (n2.pending + 2 > n2.pending_buf_size && (Ln$3(e3), 0 !== n2.pending)) return n2.last_flush = -1, ln$3;\n      Un$3(n2, 255 & e3.adler), Un$3(n2, e3.adler >> 8 & 255), e3.adler = 0;\n    }\n    if (n2.status = Cn$3, Ln$3(e3), 0 !== n2.pending) return n2.last_flush = -1, ln$3;\n  }\n  if (0 !== e3.avail_in || 0 !== n2.lookahead || t4 !== sn$3 && n2.status !== An$3) {\n    let i4 = 0 === n2.level ? Hn$2(n2, t4) : n2.strategy === gn$3 ? ((e4, t5) => {\n      let n3;\n      for (; ; ) {\n        if (0 === e4.lookahead && (qn$2(e4), 0 === e4.lookahead)) {\n          if (t5 === sn$3) return 1;\n          break;\n        }\n        if (e4.match_length = 0, n3 = nn$3(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++, n3 && (xn$2(e4, false), 0 === e4.strm.avail_out)) return 1;\n      }\n      return e4.insert = 0, t5 === cn$3 ? (xn$2(e4, true), 0 === e4.strm.avail_out ? 3 : 4) : e4.sym_next && (xn$2(e4, false), 0 === e4.strm.avail_out) ? 1 : 2;\n    })(n2, t4) : n2.strategy === vn$3 ? ((e4, t5) => {\n      let n3, i5, r2, s4;\n      const o2 = e4.window;\n      for (; ; ) {\n        if (e4.lookahead <= Sn$3) {\n          if (qn$2(e4), e4.lookahead <= Sn$3 && t5 === sn$3) return 1;\n          if (0 === e4.lookahead) break;\n        }\n        if (e4.match_length = 0, e4.lookahead >= 3 && e4.strstart > 0 && (r2 = e4.strstart - 1, i5 = o2[r2], i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2])) {\n          s4 = e4.strstart + Sn$3;\n          do {\n          } while (i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2] && i5 === o2[++r2] && r2 < s4);\n          e4.match_length = Sn$3 - (s4 - r2), e4.match_length > e4.lookahead && (e4.match_length = e4.lookahead);\n        }\n        if (e4.match_length >= 3 ? (n3 = nn$3(e4, 1, e4.match_length - 3), e4.lookahead -= e4.match_length, e4.strstart += e4.match_length, e4.match_length = 0) : (n3 = nn$3(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++), n3 && (xn$2(e4, false), 0 === e4.strm.avail_out)) return 1;\n      }\n      return e4.insert = 0, t5 === cn$3 ? (xn$2(e4, true), 0 === e4.strm.avail_out ? 3 : 4) : e4.sym_next && (xn$2(e4, false), 0 === e4.strm.avail_out) ? 1 : 2;\n    })(n2, t4) : jn$2[n2.level].func(n2, t4);\n    if (3 !== i4 && 4 !== i4 || (n2.status = An$3), 1 === i4 || 3 === i4) return 0 === e3.avail_out && (n2.last_flush = -1), ln$3;\n    if (2 === i4 && (t4 === on$3 ? rn$3(n2) : t4 !== un$3 && (en$3(n2, 0, 0, false), t4 === an$3 && (kn$3(n2.head), 0 === n2.lookahead && (n2.strstart = 0, n2.block_start = 0, n2.insert = 0))), Ln$3(e3), 0 === e3.avail_out)) return n2.last_flush = -1, ln$3;\n  }\n  return t4 !== cn$3 ? ln$3 : n2.wrap <= 0 ? hn$3 : (2 === n2.wrap ? (Un$3(n2, 255 & e3.adler), Un$3(n2, e3.adler >> 8 & 255), Un$3(n2, e3.adler >> 16 & 255), Un$3(n2, e3.adler >> 24 & 255), Un$3(n2, 255 & e3.total_in), Un$3(n2, e3.total_in >> 8 & 255), Un$3(n2, e3.total_in >> 16 & 255), Un$3(n2, e3.total_in >> 24 & 255)) : (Pn$3(n2, e3.adler >>> 16), Pn$3(n2, 65535 & e3.adler)), Ln$3(e3), n2.wrap > 0 && (n2.wrap = -n2.wrap), 0 !== n2.pending ? ln$3 : hn$3);\n}, deflateEnd: (e3) => {\n  if (Bn$2(e3)) return dn$3;\n  const t4 = e3.state.status;\n  return e3.state = null, t4 === Cn$3 ? In$3(e3, _n$3) : ln$3;\n}, deflateSetDictionary: (e3, t4) => {\n  let n2 = t4.length;\n  if (Bn$2(e3)) return dn$3;\n  const i3 = e3.state, r2 = i3.wrap;\n  if (2 === r2 || 1 === r2 && i3.status !== Nn$3 || i3.lookahead) return dn$3;\n  if (1 === r2 && (e3.adler = Wt$2(e3.adler, t4, n2, 0)), i3.wrap = 0, n2 >= i3.w_size) {\n    0 === r2 && (kn$3(i3.head), i3.strstart = 0, i3.block_start = 0, i3.insert = 0);\n    let e4 = new Uint8Array(i3.w_size);\n    e4.set(t4.subarray(n2 - i3.w_size, n2), 0), t4 = e4, n2 = i3.w_size;\n  }\n  const s4 = e3.avail_in, o2 = e3.next_in, a4 = e3.input;\n  for (e3.avail_in = n2, e3.next_in = 0, e3.input = t4, qn$2(i3); i3.lookahead >= 3; ) {\n    let e4 = i3.strstart, t5 = i3.lookahead - 2;\n    do {\n      i3.ins_h = Rn$2(i3, i3.ins_h, i3.window[e4 + 3 - 1]), i3.prev[e4 & i3.w_mask] = i3.head[i3.ins_h], i3.head[i3.ins_h] = e4, e4++;\n    } while (--t5);\n    i3.strstart = e4, i3.lookahead = 2, qn$2(i3);\n  }\n  return i3.strstart += i3.lookahead, i3.block_start = i3.strstart, i3.insert = i3.lookahead, i3.lookahead = 0, i3.match_length = i3.prev_length = 2, i3.match_available = 0, e3.next_in = o2, e3.input = a4, e3.avail_in = s4, i3.wrap = r2, ln$3;\n}, deflateInfo: \"pako deflate (from Nodeca project)\" };\nconst Xn$2 = (e3, t4) => Object.prototype.hasOwnProperty.call(e3, t4);\nvar Jn$2 = function(e3) {\n  const t4 = Array.prototype.slice.call(arguments, 1);\n  for (; t4.length; ) {\n    const n2 = t4.shift();\n    if (n2) {\n      if (\"object\" != typeof n2) throw new TypeError(n2 + \"must be non-object\");\n      for (const t5 in n2) Xn$2(n2, t5) && (e3[t5] = n2[t5]);\n    }\n  }\n  return e3;\n}, $n$2 = (e3) => {\n  let t4 = 0;\n  for (let n3 = 0, i3 = e3.length; n3 < i3; n3++) t4 += e3[n3].length;\n  const n2 = new Uint8Array(t4);\n  for (let t5 = 0, i3 = 0, r2 = e3.length; t5 < r2; t5++) {\n    let r3 = e3[t5];\n    n2.set(r3, i3), i3 += r3.length;\n  }\n  return n2;\n};\nlet ei = true;\ntry {\n  String.fromCharCode.apply(null, new Uint8Array(1));\n} catch (e3) {\n  ei = false;\n}\nconst ti$1 = new Uint8Array(256);\nfor (let e3 = 0; e3 < 256; e3++) ti$1[e3] = e3 >= 252 ? 6 : e3 >= 248 ? 5 : e3 >= 240 ? 4 : e3 >= 224 ? 3 : e3 >= 192 ? 2 : 1;\nti$1[254] = ti$1[254] = 1;\nvar ni$1 = (e3) => {\n  if (\"function\" == typeof TextEncoder && TextEncoder.prototype.encode) return new TextEncoder().encode(e3);\n  let t4, n2, i3, r2, s4, o2 = e3.length, a4 = 0;\n  for (r2 = 0; r2 < o2; r2++) n2 = e3.charCodeAt(r2), 55296 == (64512 & n2) && r2 + 1 < o2 && (i3 = e3.charCodeAt(r2 + 1), 56320 == (64512 & i3) && (n2 = 65536 + (n2 - 55296 << 10) + (i3 - 56320), r2++)), a4 += n2 < 128 ? 1 : n2 < 2048 ? 2 : n2 < 65536 ? 3 : 4;\n  for (t4 = new Uint8Array(a4), s4 = 0, r2 = 0; s4 < a4; r2++) n2 = e3.charCodeAt(r2), 55296 == (64512 & n2) && r2 + 1 < o2 && (i3 = e3.charCodeAt(r2 + 1), 56320 == (64512 & i3) && (n2 = 65536 + (n2 - 55296 << 10) + (i3 - 56320), r2++)), n2 < 128 ? t4[s4++] = n2 : n2 < 2048 ? (t4[s4++] = 192 | n2 >>> 6, t4[s4++] = 128 | 63 & n2) : n2 < 65536 ? (t4[s4++] = 224 | n2 >>> 12, t4[s4++] = 128 | n2 >>> 6 & 63, t4[s4++] = 128 | 63 & n2) : (t4[s4++] = 240 | n2 >>> 18, t4[s4++] = 128 | n2 >>> 12 & 63, t4[s4++] = 128 | n2 >>> 6 & 63, t4[s4++] = 128 | 63 & n2);\n  return t4;\n}, ii$1 = (e3, t4) => {\n  const n2 = t4 || e3.length;\n  if (\"function\" == typeof TextDecoder && TextDecoder.prototype.decode) return new TextDecoder().decode(e3.subarray(0, t4));\n  let i3, r2;\n  const s4 = new Array(2 * n2);\n  for (r2 = 0, i3 = 0; i3 < n2; ) {\n    let t5 = e3[i3++];\n    if (t5 < 128) {\n      s4[r2++] = t5;\n      continue;\n    }\n    let o2 = ti$1[t5];\n    if (o2 > 4) s4[r2++] = 65533, i3 += o2 - 1;\n    else {\n      for (t5 &= 2 === o2 ? 31 : 3 === o2 ? 15 : 7; o2 > 1 && i3 < n2; ) t5 = t5 << 6 | 63 & e3[i3++], o2--;\n      o2 > 1 ? s4[r2++] = 65533 : t5 < 65536 ? s4[r2++] = t5 : (t5 -= 65536, s4[r2++] = 55296 | t5 >> 10 & 1023, s4[r2++] = 56320 | 1023 & t5);\n    }\n  }\n  return ((e4, t5) => {\n    if (t5 < 65534 && e4.subarray && ei) return String.fromCharCode.apply(null, e4.length === t5 ? e4 : e4.subarray(0, t5));\n    let n3 = \"\";\n    for (let i4 = 0; i4 < t5; i4++) n3 += String.fromCharCode(e4[i4]);\n    return n3;\n  })(s4, r2);\n}, ri$1 = (e3, t4) => {\n  (t4 = t4 || e3.length) > e3.length && (t4 = e3.length);\n  let n2 = t4 - 1;\n  for (; n2 >= 0 && 128 == (192 & e3[n2]); ) n2--;\n  return n2 < 0 || 0 === n2 ? t4 : n2 + ti$1[e3[n2]] > t4 ? n2 : t4;\n};\nvar si = function() {\n  this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = \"\", this.state = null, this.data_type = 2, this.adler = 0;\n};\nconst oi$1 = Object.prototype.toString, { Z_NO_FLUSH: ai$1, Z_SYNC_FLUSH: ci$1, Z_FULL_FLUSH: ui$1, Z_FINISH: li$1, Z_OK: hi$1, Z_STREAM_END: di$1, Z_DEFAULT_COMPRESSION: _i$1, Z_DEFAULT_STRATEGY: fi$1, Z_DEFLATED: pi$1 } = Jt$2;\nfunction Ei$1(e3) {\n  this.options = Jn$2({ level: _i$1, method: pi$1, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: fi$1 }, e3 || {});\n  let t4 = this.options;\n  t4.raw && t4.windowBits > 0 ? t4.windowBits = -t4.windowBits : t4.gzip && t4.windowBits > 0 && t4.windowBits < 16 && (t4.windowBits += 16), this.err = 0, this.msg = \"\", this.ended = false, this.chunks = [], this.strm = new si(), this.strm.avail_out = 0;\n  let n2 = Yn$2.deflateInit2(this.strm, t4.level, t4.method, t4.windowBits, t4.memLevel, t4.strategy);\n  if (n2 !== hi$1) throw new Error(Xt$2[n2]);\n  if (t4.header && Yn$2.deflateSetHeader(this.strm, t4.header), t4.dictionary) {\n    let e4;\n    if (e4 = \"string\" == typeof t4.dictionary ? ni$1(t4.dictionary) : \"[object ArrayBuffer]\" === oi$1.call(t4.dictionary) ? new Uint8Array(t4.dictionary) : t4.dictionary, n2 = Yn$2.deflateSetDictionary(this.strm, e4), n2 !== hi$1) throw new Error(Xt$2[n2]);\n    this._dict_set = true;\n  }\n}\nfunction gi$1(e3, t4) {\n  const n2 = new Ei$1(t4);\n  if (n2.push(e3, true), n2.err) throw n2.msg || Xt$2[n2.err];\n  return n2.result;\n}\nEi$1.prototype.push = function(e3, t4) {\n  const n2 = this.strm, i3 = this.options.chunkSize;\n  let r2, s4;\n  if (this.ended) return false;\n  for (s4 = t4 === ~~t4 ? t4 : true === t4 ? li$1 : ai$1, \"string\" == typeof e3 ? n2.input = ni$1(e3) : \"[object ArrayBuffer]\" === oi$1.call(e3) ? n2.input = new Uint8Array(e3) : n2.input = e3, n2.next_in = 0, n2.avail_in = n2.input.length; ; ) if (0 === n2.avail_out && (n2.output = new Uint8Array(i3), n2.next_out = 0, n2.avail_out = i3), (s4 === ci$1 || s4 === ui$1) && n2.avail_out <= 6) this.onData(n2.output.subarray(0, n2.next_out)), n2.avail_out = 0;\n  else {\n    if (r2 = Yn$2.deflate(n2, s4), r2 === di$1) return n2.next_out > 0 && this.onData(n2.output.subarray(0, n2.next_out)), r2 = Yn$2.deflateEnd(this.strm), this.onEnd(r2), this.ended = true, r2 === hi$1;\n    if (0 !== n2.avail_out) {\n      if (s4 > 0 && n2.next_out > 0) this.onData(n2.output.subarray(0, n2.next_out)), n2.avail_out = 0;\n      else if (0 === n2.avail_in) break;\n    } else this.onData(n2.output);\n  }\n  return true;\n}, Ei$1.prototype.onData = function(e3) {\n  this.chunks.push(e3);\n}, Ei$1.prototype.onEnd = function(e3) {\n  e3 === hi$1 && (this.result = $n$2(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;\n};\nvar vi$1 = { Deflate: Ei$1, deflate: gi$1, deflateRaw: function(e3, t4) {\n  return (t4 = t4 || {}).raw = true, gi$1(e3, t4);\n}, gzip: function(e3, t4) {\n  return (t4 = t4 || {}).gzip = true, gi$1(e3, t4);\n} };\nconst bi$1 = 16209;\nvar mi$1 = function(e3, t4) {\n  let n2, i3, r2, s4, o2, a4, c3, u3, l2, h4, d4, _2, f2, p2, E3, g2, v2, b3, m4, y4, w3, S4, T3, N2;\n  const C2 = e3.state;\n  n2 = e3.next_in, T3 = e3.input, i3 = n2 + (e3.avail_in - 5), r2 = e3.next_out, N2 = e3.output, s4 = r2 - (t4 - e3.avail_out), o2 = r2 + (e3.avail_out - 257), a4 = C2.dmax, c3 = C2.wsize, u3 = C2.whave, l2 = C2.wnext, h4 = C2.window, d4 = C2.hold, _2 = C2.bits, f2 = C2.lencode, p2 = C2.distcode, E3 = (1 << C2.lenbits) - 1, g2 = (1 << C2.distbits) - 1;\n  e: do {\n    _2 < 15 && (d4 += T3[n2++] << _2, _2 += 8, d4 += T3[n2++] << _2, _2 += 8), v2 = f2[d4 & E3];\n    t: for (; ; ) {\n      if (b3 = v2 >>> 24, d4 >>>= b3, _2 -= b3, b3 = v2 >>> 16 & 255, 0 === b3) N2[r2++] = 65535 & v2;\n      else {\n        if (!(16 & b3)) {\n          if (64 & b3) {\n            if (32 & b3) {\n              C2.mode = 16191;\n              break e;\n            }\n            e3.msg = \"invalid literal/length code\", C2.mode = bi$1;\n            break e;\n          }\n          v2 = f2[(65535 & v2) + (d4 & (1 << b3) - 1)];\n          continue t;\n        }\n        for (m4 = 65535 & v2, b3 &= 15, b3 && (_2 < b3 && (d4 += T3[n2++] << _2, _2 += 8), m4 += d4 & (1 << b3) - 1, d4 >>>= b3, _2 -= b3), _2 < 15 && (d4 += T3[n2++] << _2, _2 += 8, d4 += T3[n2++] << _2, _2 += 8), v2 = p2[d4 & g2]; ; ) {\n          if (b3 = v2 >>> 24, d4 >>>= b3, _2 -= b3, b3 = v2 >>> 16 & 255, 16 & b3) {\n            if (y4 = 65535 & v2, b3 &= 15, _2 < b3 && (d4 += T3[n2++] << _2, _2 += 8, _2 < b3 && (d4 += T3[n2++] << _2, _2 += 8)), y4 += d4 & (1 << b3) - 1, y4 > a4) {\n              e3.msg = \"invalid distance too far back\", C2.mode = bi$1;\n              break e;\n            }\n            if (d4 >>>= b3, _2 -= b3, b3 = r2 - s4, y4 > b3) {\n              if (b3 = y4 - b3, b3 > u3 && C2.sane) {\n                e3.msg = \"invalid distance too far back\", C2.mode = bi$1;\n                break e;\n              }\n              if (w3 = 0, S4 = h4, 0 === l2) {\n                if (w3 += c3 - b3, b3 < m4) {\n                  m4 -= b3;\n                  do {\n                    N2[r2++] = h4[w3++];\n                  } while (--b3);\n                  w3 = r2 - y4, S4 = N2;\n                }\n              } else if (l2 < b3) {\n                if (w3 += c3 + l2 - b3, b3 -= l2, b3 < m4) {\n                  m4 -= b3;\n                  do {\n                    N2[r2++] = h4[w3++];\n                  } while (--b3);\n                  if (w3 = 0, l2 < m4) {\n                    b3 = l2, m4 -= b3;\n                    do {\n                      N2[r2++] = h4[w3++];\n                    } while (--b3);\n                    w3 = r2 - y4, S4 = N2;\n                  }\n                }\n              } else if (w3 += l2 - b3, b3 < m4) {\n                m4 -= b3;\n                do {\n                  N2[r2++] = h4[w3++];\n                } while (--b3);\n                w3 = r2 - y4, S4 = N2;\n              }\n              for (; m4 > 2; ) N2[r2++] = S4[w3++], N2[r2++] = S4[w3++], N2[r2++] = S4[w3++], m4 -= 3;\n              m4 && (N2[r2++] = S4[w3++], m4 > 1 && (N2[r2++] = S4[w3++]));\n            } else {\n              w3 = r2 - y4;\n              do {\n                N2[r2++] = N2[w3++], N2[r2++] = N2[w3++], N2[r2++] = N2[w3++], m4 -= 3;\n              } while (m4 > 2);\n              m4 && (N2[r2++] = N2[w3++], m4 > 1 && (N2[r2++] = N2[w3++]));\n            }\n            break;\n          }\n          if (64 & b3) {\n            e3.msg = \"invalid distance code\", C2.mode = bi$1;\n            break e;\n          }\n          v2 = p2[(65535 & v2) + (d4 & (1 << b3) - 1)];\n        }\n      }\n      break;\n    }\n  } while (n2 < i3 && r2 < o2);\n  m4 = _2 >> 3, n2 -= m4, _2 -= m4 << 3, d4 &= (1 << _2) - 1, e3.next_in = n2, e3.next_out = r2, e3.avail_in = n2 < i3 ? i3 - n2 + 5 : 5 - (n2 - i3), e3.avail_out = r2 < o2 ? o2 - r2 + 257 : 257 - (r2 - o2), C2.hold = d4, C2.bits = _2;\n};\nconst yi$1 = 15, wi$1 = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]), Si$1 = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]), Ti$1 = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]), Ni$1 = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);\nvar Ci$1 = (e3, t4, n2, i3, r2, s4, o2, a4) => {\n  const c3 = a4.bits;\n  let u3, l2, h4, d4, _2, f2, p2 = 0, E3 = 0, g2 = 0, v2 = 0, b3 = 0, m4 = 0, y4 = 0, w3 = 0, S4 = 0, T3 = 0, N2 = null;\n  const C2 = new Uint16Array(16), A2 = new Uint16Array(16);\n  let I3, O3, k3, D3 = null;\n  for (p2 = 0; p2 <= yi$1; p2++) C2[p2] = 0;\n  for (E3 = 0; E3 < i3; E3++) C2[t4[n2 + E3]]++;\n  for (b3 = c3, v2 = yi$1; v2 >= 1 && 0 === C2[v2]; v2--) ;\n  if (b3 > v2 && (b3 = v2), 0 === v2) return r2[s4++] = 20971520, r2[s4++] = 20971520, a4.bits = 1, 0;\n  for (g2 = 1; g2 < v2 && 0 === C2[g2]; g2++) ;\n  for (b3 < g2 && (b3 = g2), w3 = 1, p2 = 1; p2 <= yi$1; p2++) if (w3 <<= 1, w3 -= C2[p2], w3 < 0) return -1;\n  if (w3 > 0 && (0 === e3 || 1 !== v2)) return -1;\n  for (A2[1] = 0, p2 = 1; p2 < yi$1; p2++) A2[p2 + 1] = A2[p2] + C2[p2];\n  for (E3 = 0; E3 < i3; E3++) 0 !== t4[n2 + E3] && (o2[A2[t4[n2 + E3]]++] = E3);\n  if (0 === e3 ? (N2 = D3 = o2, f2 = 20) : 1 === e3 ? (N2 = wi$1, D3 = Si$1, f2 = 257) : (N2 = Ti$1, D3 = Ni$1, f2 = 0), T3 = 0, E3 = 0, p2 = g2, _2 = s4, m4 = b3, y4 = 0, h4 = -1, S4 = 1 << b3, d4 = S4 - 1, 1 === e3 && S4 > 852 || 2 === e3 && S4 > 592) return 1;\n  for (; ; ) {\n    I3 = p2 - y4, o2[E3] + 1 < f2 ? (O3 = 0, k3 = o2[E3]) : o2[E3] >= f2 ? (O3 = D3[o2[E3] - f2], k3 = N2[o2[E3] - f2]) : (O3 = 96, k3 = 0), u3 = 1 << p2 - y4, l2 = 1 << m4, g2 = l2;\n    do {\n      l2 -= u3, r2[_2 + (T3 >> y4) + l2] = I3 << 24 | O3 << 16 | k3;\n    } while (0 !== l2);\n    for (u3 = 1 << p2 - 1; T3 & u3; ) u3 >>= 1;\n    if (0 !== u3 ? (T3 &= u3 - 1, T3 += u3) : T3 = 0, E3++, 0 == --C2[p2]) {\n      if (p2 === v2) break;\n      p2 = t4[n2 + o2[E3]];\n    }\n    if (p2 > b3 && (T3 & d4) !== h4) {\n      for (0 === y4 && (y4 = b3), _2 += g2, m4 = p2 - y4, w3 = 1 << m4; m4 + y4 < v2 && (w3 -= C2[m4 + y4], !(w3 <= 0)); ) m4++, w3 <<= 1;\n      if (S4 += 1 << m4, 1 === e3 && S4 > 852 || 2 === e3 && S4 > 592) return 1;\n      h4 = T3 & d4, r2[h4] = b3 << 24 | m4 << 16 | _2 - s4;\n    }\n  }\n  return 0 !== T3 && (r2[_2 + T3] = p2 - y4 << 24 | 64 << 16), a4.bits = b3, 0;\n};\nconst { Z_FINISH: Ai$1, Z_BLOCK: Ii$1, Z_TREES: Oi$1, Z_OK: ki$1, Z_STREAM_END: Di$1, Z_NEED_DICT: Ri$1, Z_STREAM_ERROR: Li$1, Z_DATA_ERROR: xi$1, Z_MEM_ERROR: Ui$1, Z_BUF_ERROR: Pi$1, Z_DEFLATED: Mi$1 } = Jt$2, Fi$1 = 16180, qi$1 = 16190, Hi$1 = 16191, Vi$1 = 16192, zi$1 = 16194, Gi$1 = 16199, ji$1 = 16200, Ki$1 = 16206, Bi$1 = 16209, Qi$1 = (e3) => (e3 >>> 24 & 255) + (e3 >>> 8 & 65280) + ((65280 & e3) << 8) + ((255 & e3) << 24);\nfunction Wi$1() {\n  this.strm = null, this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;\n}\nconst Zi$1 = (e3) => {\n  if (!e3) return 1;\n  const t4 = e3.state;\n  return !t4 || t4.strm !== e3 || t4.mode < Fi$1 || t4.mode > 16211 ? 1 : 0;\n}, Yi$1 = (e3) => {\n  if (Zi$1(e3)) return Li$1;\n  const t4 = e3.state;\n  return e3.total_in = e3.total_out = t4.total = 0, e3.msg = \"\", t4.wrap && (e3.adler = 1 & t4.wrap), t4.mode = Fi$1, t4.last = 0, t4.havedict = 0, t4.flags = -1, t4.dmax = 32768, t4.head = null, t4.hold = 0, t4.bits = 0, t4.lencode = t4.lendyn = new Int32Array(852), t4.distcode = t4.distdyn = new Int32Array(592), t4.sane = 1, t4.back = -1, ki$1;\n}, Xi$1 = (e3) => {\n  if (Zi$1(e3)) return Li$1;\n  const t4 = e3.state;\n  return t4.wsize = 0, t4.whave = 0, t4.wnext = 0, Yi$1(e3);\n}, Ji$1 = (e3, t4) => {\n  let n2;\n  if (Zi$1(e3)) return Li$1;\n  const i3 = e3.state;\n  return t4 < 0 ? (n2 = 0, t4 = -t4) : (n2 = 5 + (t4 >> 4), t4 < 48 && (t4 &= 15)), t4 && (t4 < 8 || t4 > 15) ? Li$1 : (null !== i3.window && i3.wbits !== t4 && (i3.window = null), i3.wrap = n2, i3.wbits = t4, Xi$1(e3));\n}, $i$1 = (e3, t4) => {\n  if (!e3) return Li$1;\n  const n2 = new Wi$1();\n  e3.state = n2, n2.strm = e3, n2.window = null, n2.mode = Fi$1;\n  const i3 = Ji$1(e3, t4);\n  return i3 !== ki$1 && (e3.state = null), i3;\n};\nlet er$2, tr$2, nr$2 = true;\nconst ir$2 = (e3) => {\n  if (nr$2) {\n    er$2 = new Int32Array(512), tr$2 = new Int32Array(32);\n    let t4 = 0;\n    for (; t4 < 144; ) e3.lens[t4++] = 8;\n    for (; t4 < 256; ) e3.lens[t4++] = 9;\n    for (; t4 < 280; ) e3.lens[t4++] = 7;\n    for (; t4 < 288; ) e3.lens[t4++] = 8;\n    for (Ci$1(1, e3.lens, 0, 288, er$2, 0, e3.work, { bits: 9 }), t4 = 0; t4 < 32; ) e3.lens[t4++] = 5;\n    Ci$1(2, e3.lens, 0, 32, tr$2, 0, e3.work, { bits: 5 }), nr$2 = false;\n  }\n  e3.lencode = er$2, e3.lenbits = 9, e3.distcode = tr$2, e3.distbits = 5;\n}, rr$2 = (e3, t4, n2, i3) => {\n  let r2;\n  const s4 = e3.state;\n  return null === s4.window && (s4.wsize = 1 << s4.wbits, s4.wnext = 0, s4.whave = 0, s4.window = new Uint8Array(s4.wsize)), i3 >= s4.wsize ? (s4.window.set(t4.subarray(n2 - s4.wsize, n2), 0), s4.wnext = 0, s4.whave = s4.wsize) : (r2 = s4.wsize - s4.wnext, r2 > i3 && (r2 = i3), s4.window.set(t4.subarray(n2 - i3, n2 - i3 + r2), s4.wnext), (i3 -= r2) ? (s4.window.set(t4.subarray(n2 - i3, n2), 0), s4.wnext = i3, s4.whave = s4.wsize) : (s4.wnext += r2, s4.wnext === s4.wsize && (s4.wnext = 0), s4.whave < s4.wsize && (s4.whave += r2))), 0;\n};\nvar sr$2 = { inflateReset: Xi$1, inflateReset2: Ji$1, inflateResetKeep: Yi$1, inflateInit: (e3) => $i$1(e3, 15), inflateInit2: $i$1, inflate: (e3, t4) => {\n  let n2, i3, r2, s4, o2, a4, c3, u3, l2, h4, d4, _2, f2, p2, E3, g2, v2, b3, m4, y4, w3, S4, T3 = 0;\n  const N2 = new Uint8Array(4);\n  let C2, A2;\n  const I3 = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n  if (Zi$1(e3) || !e3.output || !e3.input && 0 !== e3.avail_in) return Li$1;\n  n2 = e3.state, n2.mode === Hi$1 && (n2.mode = Vi$1), o2 = e3.next_out, r2 = e3.output, c3 = e3.avail_out, s4 = e3.next_in, i3 = e3.input, a4 = e3.avail_in, u3 = n2.hold, l2 = n2.bits, h4 = a4, d4 = c3, S4 = ki$1;\n  e: for (; ; ) switch (n2.mode) {\n    case Fi$1:\n      if (0 === n2.wrap) {\n        n2.mode = Vi$1;\n        break;\n      }\n      for (; l2 < 16; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      if (2 & n2.wrap && 35615 === u3) {\n        0 === n2.wbits && (n2.wbits = 15), n2.check = 0, N2[0] = 255 & u3, N2[1] = u3 >>> 8 & 255, n2.check = Yt$2(n2.check, N2, 2, 0), u3 = 0, l2 = 0, n2.mode = 16181;\n        break;\n      }\n      if (n2.head && (n2.head.done = false), !(1 & n2.wrap) || (((255 & u3) << 8) + (u3 >> 8)) % 31) {\n        e3.msg = \"incorrect header check\", n2.mode = Bi$1;\n        break;\n      }\n      if ((15 & u3) !== Mi$1) {\n        e3.msg = \"unknown compression method\", n2.mode = Bi$1;\n        break;\n      }\n      if (u3 >>>= 4, l2 -= 4, w3 = 8 + (15 & u3), 0 === n2.wbits && (n2.wbits = w3), w3 > 15 || w3 > n2.wbits) {\n        e3.msg = \"invalid window size\", n2.mode = Bi$1;\n        break;\n      }\n      n2.dmax = 1 << n2.wbits, n2.flags = 0, e3.adler = n2.check = 1, n2.mode = 512 & u3 ? 16189 : Hi$1, u3 = 0, l2 = 0;\n      break;\n    case 16181:\n      for (; l2 < 16; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      if (n2.flags = u3, (255 & n2.flags) !== Mi$1) {\n        e3.msg = \"unknown compression method\", n2.mode = Bi$1;\n        break;\n      }\n      if (57344 & n2.flags) {\n        e3.msg = \"unknown header flags set\", n2.mode = Bi$1;\n        break;\n      }\n      n2.head && (n2.head.text = u3 >> 8 & 1), 512 & n2.flags && 4 & n2.wrap && (N2[0] = 255 & u3, N2[1] = u3 >>> 8 & 255, n2.check = Yt$2(n2.check, N2, 2, 0)), u3 = 0, l2 = 0, n2.mode = 16182;\n    case 16182:\n      for (; l2 < 32; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      n2.head && (n2.head.time = u3), 512 & n2.flags && 4 & n2.wrap && (N2[0] = 255 & u3, N2[1] = u3 >>> 8 & 255, N2[2] = u3 >>> 16 & 255, N2[3] = u3 >>> 24 & 255, n2.check = Yt$2(n2.check, N2, 4, 0)), u3 = 0, l2 = 0, n2.mode = 16183;\n    case 16183:\n      for (; l2 < 16; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      n2.head && (n2.head.xflags = 255 & u3, n2.head.os = u3 >> 8), 512 & n2.flags && 4 & n2.wrap && (N2[0] = 255 & u3, N2[1] = u3 >>> 8 & 255, n2.check = Yt$2(n2.check, N2, 2, 0)), u3 = 0, l2 = 0, n2.mode = 16184;\n    case 16184:\n      if (1024 & n2.flags) {\n        for (; l2 < 16; ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        n2.length = u3, n2.head && (n2.head.extra_len = u3), 512 & n2.flags && 4 & n2.wrap && (N2[0] = 255 & u3, N2[1] = u3 >>> 8 & 255, n2.check = Yt$2(n2.check, N2, 2, 0)), u3 = 0, l2 = 0;\n      } else n2.head && (n2.head.extra = null);\n      n2.mode = 16185;\n    case 16185:\n      if (1024 & n2.flags && (_2 = n2.length, _2 > a4 && (_2 = a4), _2 && (n2.head && (w3 = n2.head.extra_len - n2.length, n2.head.extra || (n2.head.extra = new Uint8Array(n2.head.extra_len)), n2.head.extra.set(i3.subarray(s4, s4 + _2), w3)), 512 & n2.flags && 4 & n2.wrap && (n2.check = Yt$2(n2.check, i3, _2, s4)), a4 -= _2, s4 += _2, n2.length -= _2), n2.length)) break e;\n      n2.length = 0, n2.mode = 16186;\n    case 16186:\n      if (2048 & n2.flags) {\n        if (0 === a4) break e;\n        _2 = 0;\n        do {\n          w3 = i3[s4 + _2++], n2.head && w3 && n2.length < 65536 && (n2.head.name += String.fromCharCode(w3));\n        } while (w3 && _2 < a4);\n        if (512 & n2.flags && 4 & n2.wrap && (n2.check = Yt$2(n2.check, i3, _2, s4)), a4 -= _2, s4 += _2, w3) break e;\n      } else n2.head && (n2.head.name = null);\n      n2.length = 0, n2.mode = 16187;\n    case 16187:\n      if (4096 & n2.flags) {\n        if (0 === a4) break e;\n        _2 = 0;\n        do {\n          w3 = i3[s4 + _2++], n2.head && w3 && n2.length < 65536 && (n2.head.comment += String.fromCharCode(w3));\n        } while (w3 && _2 < a4);\n        if (512 & n2.flags && 4 & n2.wrap && (n2.check = Yt$2(n2.check, i3, _2, s4)), a4 -= _2, s4 += _2, w3) break e;\n      } else n2.head && (n2.head.comment = null);\n      n2.mode = 16188;\n    case 16188:\n      if (512 & n2.flags) {\n        for (; l2 < 16; ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        if (4 & n2.wrap && u3 !== (65535 & n2.check)) {\n          e3.msg = \"header crc mismatch\", n2.mode = Bi$1;\n          break;\n        }\n        u3 = 0, l2 = 0;\n      }\n      n2.head && (n2.head.hcrc = n2.flags >> 9 & 1, n2.head.done = true), e3.adler = n2.check = 0, n2.mode = Hi$1;\n      break;\n    case 16189:\n      for (; l2 < 32; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      e3.adler = n2.check = Qi$1(u3), u3 = 0, l2 = 0, n2.mode = qi$1;\n    case qi$1:\n      if (0 === n2.havedict) return e3.next_out = o2, e3.avail_out = c3, e3.next_in = s4, e3.avail_in = a4, n2.hold = u3, n2.bits = l2, Ri$1;\n      e3.adler = n2.check = 1, n2.mode = Hi$1;\n    case Hi$1:\n      if (t4 === Ii$1 || t4 === Oi$1) break e;\n    case Vi$1:\n      if (n2.last) {\n        u3 >>>= 7 & l2, l2 -= 7 & l2, n2.mode = Ki$1;\n        break;\n      }\n      for (; l2 < 3; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      switch (n2.last = 1 & u3, u3 >>>= 1, l2 -= 1, 3 & u3) {\n        case 0:\n          n2.mode = 16193;\n          break;\n        case 1:\n          if (ir$2(n2), n2.mode = Gi$1, t4 === Oi$1) {\n            u3 >>>= 2, l2 -= 2;\n            break e;\n          }\n          break;\n        case 2:\n          n2.mode = 16196;\n          break;\n        case 3:\n          e3.msg = \"invalid block type\", n2.mode = Bi$1;\n      }\n      u3 >>>= 2, l2 -= 2;\n      break;\n    case 16193:\n      for (u3 >>>= 7 & l2, l2 -= 7 & l2; l2 < 32; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      if ((65535 & u3) != (u3 >>> 16 ^ 65535)) {\n        e3.msg = \"invalid stored block lengths\", n2.mode = Bi$1;\n        break;\n      }\n      if (n2.length = 65535 & u3, u3 = 0, l2 = 0, n2.mode = zi$1, t4 === Oi$1) break e;\n    case zi$1:\n      n2.mode = 16195;\n    case 16195:\n      if (_2 = n2.length, _2) {\n        if (_2 > a4 && (_2 = a4), _2 > c3 && (_2 = c3), 0 === _2) break e;\n        r2.set(i3.subarray(s4, s4 + _2), o2), a4 -= _2, s4 += _2, c3 -= _2, o2 += _2, n2.length -= _2;\n        break;\n      }\n      n2.mode = Hi$1;\n      break;\n    case 16196:\n      for (; l2 < 14; ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      if (n2.nlen = 257 + (31 & u3), u3 >>>= 5, l2 -= 5, n2.ndist = 1 + (31 & u3), u3 >>>= 5, l2 -= 5, n2.ncode = 4 + (15 & u3), u3 >>>= 4, l2 -= 4, n2.nlen > 286 || n2.ndist > 30) {\n        e3.msg = \"too many length or distance symbols\", n2.mode = Bi$1;\n        break;\n      }\n      n2.have = 0, n2.mode = 16197;\n    case 16197:\n      for (; n2.have < n2.ncode; ) {\n        for (; l2 < 3; ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        n2.lens[I3[n2.have++]] = 7 & u3, u3 >>>= 3, l2 -= 3;\n      }\n      for (; n2.have < 19; ) n2.lens[I3[n2.have++]] = 0;\n      if (n2.lencode = n2.lendyn, n2.lenbits = 7, C2 = { bits: n2.lenbits }, S4 = Ci$1(0, n2.lens, 0, 19, n2.lencode, 0, n2.work, C2), n2.lenbits = C2.bits, S4) {\n        e3.msg = \"invalid code lengths set\", n2.mode = Bi$1;\n        break;\n      }\n      n2.have = 0, n2.mode = 16198;\n    case 16198:\n      for (; n2.have < n2.nlen + n2.ndist; ) {\n        for (; T3 = n2.lencode[u3 & (1 << n2.lenbits) - 1], E3 = T3 >>> 24, g2 = T3 >>> 16 & 255, v2 = 65535 & T3, !(E3 <= l2); ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        if (v2 < 16) u3 >>>= E3, l2 -= E3, n2.lens[n2.have++] = v2;\n        else {\n          if (16 === v2) {\n            for (A2 = E3 + 2; l2 < A2; ) {\n              if (0 === a4) break e;\n              a4--, u3 += i3[s4++] << l2, l2 += 8;\n            }\n            if (u3 >>>= E3, l2 -= E3, 0 === n2.have) {\n              e3.msg = \"invalid bit length repeat\", n2.mode = Bi$1;\n              break;\n            }\n            w3 = n2.lens[n2.have - 1], _2 = 3 + (3 & u3), u3 >>>= 2, l2 -= 2;\n          } else if (17 === v2) {\n            for (A2 = E3 + 3; l2 < A2; ) {\n              if (0 === a4) break e;\n              a4--, u3 += i3[s4++] << l2, l2 += 8;\n            }\n            u3 >>>= E3, l2 -= E3, w3 = 0, _2 = 3 + (7 & u3), u3 >>>= 3, l2 -= 3;\n          } else {\n            for (A2 = E3 + 7; l2 < A2; ) {\n              if (0 === a4) break e;\n              a4--, u3 += i3[s4++] << l2, l2 += 8;\n            }\n            u3 >>>= E3, l2 -= E3, w3 = 0, _2 = 11 + (127 & u3), u3 >>>= 7, l2 -= 7;\n          }\n          if (n2.have + _2 > n2.nlen + n2.ndist) {\n            e3.msg = \"invalid bit length repeat\", n2.mode = Bi$1;\n            break;\n          }\n          for (; _2--; ) n2.lens[n2.have++] = w3;\n        }\n      }\n      if (n2.mode === Bi$1) break;\n      if (0 === n2.lens[256]) {\n        e3.msg = \"invalid code -- missing end-of-block\", n2.mode = Bi$1;\n        break;\n      }\n      if (n2.lenbits = 9, C2 = { bits: n2.lenbits }, S4 = Ci$1(1, n2.lens, 0, n2.nlen, n2.lencode, 0, n2.work, C2), n2.lenbits = C2.bits, S4) {\n        e3.msg = \"invalid literal/lengths set\", n2.mode = Bi$1;\n        break;\n      }\n      if (n2.distbits = 6, n2.distcode = n2.distdyn, C2 = { bits: n2.distbits }, S4 = Ci$1(2, n2.lens, n2.nlen, n2.ndist, n2.distcode, 0, n2.work, C2), n2.distbits = C2.bits, S4) {\n        e3.msg = \"invalid distances set\", n2.mode = Bi$1;\n        break;\n      }\n      if (n2.mode = Gi$1, t4 === Oi$1) break e;\n    case Gi$1:\n      n2.mode = ji$1;\n    case ji$1:\n      if (a4 >= 6 && c3 >= 258) {\n        e3.next_out = o2, e3.avail_out = c3, e3.next_in = s4, e3.avail_in = a4, n2.hold = u3, n2.bits = l2, mi$1(e3, d4), o2 = e3.next_out, r2 = e3.output, c3 = e3.avail_out, s4 = e3.next_in, i3 = e3.input, a4 = e3.avail_in, u3 = n2.hold, l2 = n2.bits, n2.mode === Hi$1 && (n2.back = -1);\n        break;\n      }\n      for (n2.back = 0; T3 = n2.lencode[u3 & (1 << n2.lenbits) - 1], E3 = T3 >>> 24, g2 = T3 >>> 16 & 255, v2 = 65535 & T3, !(E3 <= l2); ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      if (g2 && !(240 & g2)) {\n        for (b3 = E3, m4 = g2, y4 = v2; T3 = n2.lencode[y4 + ((u3 & (1 << b3 + m4) - 1) >> b3)], E3 = T3 >>> 24, g2 = T3 >>> 16 & 255, v2 = 65535 & T3, !(b3 + E3 <= l2); ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        u3 >>>= b3, l2 -= b3, n2.back += b3;\n      }\n      if (u3 >>>= E3, l2 -= E3, n2.back += E3, n2.length = v2, 0 === g2) {\n        n2.mode = 16205;\n        break;\n      }\n      if (32 & g2) {\n        n2.back = -1, n2.mode = Hi$1;\n        break;\n      }\n      if (64 & g2) {\n        e3.msg = \"invalid literal/length code\", n2.mode = Bi$1;\n        break;\n      }\n      n2.extra = 15 & g2, n2.mode = 16201;\n    case 16201:\n      if (n2.extra) {\n        for (A2 = n2.extra; l2 < A2; ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        n2.length += u3 & (1 << n2.extra) - 1, u3 >>>= n2.extra, l2 -= n2.extra, n2.back += n2.extra;\n      }\n      n2.was = n2.length, n2.mode = 16202;\n    case 16202:\n      for (; T3 = n2.distcode[u3 & (1 << n2.distbits) - 1], E3 = T3 >>> 24, g2 = T3 >>> 16 & 255, v2 = 65535 & T3, !(E3 <= l2); ) {\n        if (0 === a4) break e;\n        a4--, u3 += i3[s4++] << l2, l2 += 8;\n      }\n      if (!(240 & g2)) {\n        for (b3 = E3, m4 = g2, y4 = v2; T3 = n2.distcode[y4 + ((u3 & (1 << b3 + m4) - 1) >> b3)], E3 = T3 >>> 24, g2 = T3 >>> 16 & 255, v2 = 65535 & T3, !(b3 + E3 <= l2); ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        u3 >>>= b3, l2 -= b3, n2.back += b3;\n      }\n      if (u3 >>>= E3, l2 -= E3, n2.back += E3, 64 & g2) {\n        e3.msg = \"invalid distance code\", n2.mode = Bi$1;\n        break;\n      }\n      n2.offset = v2, n2.extra = 15 & g2, n2.mode = 16203;\n    case 16203:\n      if (n2.extra) {\n        for (A2 = n2.extra; l2 < A2; ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        n2.offset += u3 & (1 << n2.extra) - 1, u3 >>>= n2.extra, l2 -= n2.extra, n2.back += n2.extra;\n      }\n      if (n2.offset > n2.dmax) {\n        e3.msg = \"invalid distance too far back\", n2.mode = Bi$1;\n        break;\n      }\n      n2.mode = 16204;\n    case 16204:\n      if (0 === c3) break e;\n      if (_2 = d4 - c3, n2.offset > _2) {\n        if (_2 = n2.offset - _2, _2 > n2.whave && n2.sane) {\n          e3.msg = \"invalid distance too far back\", n2.mode = Bi$1;\n          break;\n        }\n        _2 > n2.wnext ? (_2 -= n2.wnext, f2 = n2.wsize - _2) : f2 = n2.wnext - _2, _2 > n2.length && (_2 = n2.length), p2 = n2.window;\n      } else p2 = r2, f2 = o2 - n2.offset, _2 = n2.length;\n      _2 > c3 && (_2 = c3), c3 -= _2, n2.length -= _2;\n      do {\n        r2[o2++] = p2[f2++];\n      } while (--_2);\n      0 === n2.length && (n2.mode = ji$1);\n      break;\n    case 16205:\n      if (0 === c3) break e;\n      r2[o2++] = n2.length, c3--, n2.mode = ji$1;\n      break;\n    case Ki$1:\n      if (n2.wrap) {\n        for (; l2 < 32; ) {\n          if (0 === a4) break e;\n          a4--, u3 |= i3[s4++] << l2, l2 += 8;\n        }\n        if (d4 -= c3, e3.total_out += d4, n2.total += d4, 4 & n2.wrap && d4 && (e3.adler = n2.check = n2.flags ? Yt$2(n2.check, r2, d4, o2 - d4) : Wt$2(n2.check, r2, d4, o2 - d4)), d4 = c3, 4 & n2.wrap && (n2.flags ? u3 : Qi$1(u3)) !== n2.check) {\n          e3.msg = \"incorrect data check\", n2.mode = Bi$1;\n          break;\n        }\n        u3 = 0, l2 = 0;\n      }\n      n2.mode = 16207;\n    case 16207:\n      if (n2.wrap && n2.flags) {\n        for (; l2 < 32; ) {\n          if (0 === a4) break e;\n          a4--, u3 += i3[s4++] << l2, l2 += 8;\n        }\n        if (4 & n2.wrap && u3 !== (4294967295 & n2.total)) {\n          e3.msg = \"incorrect length check\", n2.mode = Bi$1;\n          break;\n        }\n        u3 = 0, l2 = 0;\n      }\n      n2.mode = 16208;\n    case 16208:\n      S4 = Di$1;\n      break e;\n    case Bi$1:\n      S4 = xi$1;\n      break e;\n    case 16210:\n      return Ui$1;\n    default:\n      return Li$1;\n  }\n  return e3.next_out = o2, e3.avail_out = c3, e3.next_in = s4, e3.avail_in = a4, n2.hold = u3, n2.bits = l2, (n2.wsize || d4 !== e3.avail_out && n2.mode < Bi$1 && (n2.mode < Ki$1 || t4 !== Ai$1)) && rr$2(e3, e3.output, e3.next_out, d4 - e3.avail_out), h4 -= e3.avail_in, d4 -= e3.avail_out, e3.total_in += h4, e3.total_out += d4, n2.total += d4, 4 & n2.wrap && d4 && (e3.adler = n2.check = n2.flags ? Yt$2(n2.check, r2, d4, e3.next_out - d4) : Wt$2(n2.check, r2, d4, e3.next_out - d4)), e3.data_type = n2.bits + (n2.last ? 64 : 0) + (n2.mode === Hi$1 ? 128 : 0) + (n2.mode === Gi$1 || n2.mode === zi$1 ? 256 : 0), (0 === h4 && 0 === d4 || t4 === Ai$1) && S4 === ki$1 && (S4 = Pi$1), S4;\n}, inflateEnd: (e3) => {\n  if (Zi$1(e3)) return Li$1;\n  let t4 = e3.state;\n  return t4.window && (t4.window = null), e3.state = null, ki$1;\n}, inflateGetHeader: (e3, t4) => {\n  if (Zi$1(e3)) return Li$1;\n  const n2 = e3.state;\n  return 2 & n2.wrap ? (n2.head = t4, t4.done = false, ki$1) : Li$1;\n}, inflateSetDictionary: (e3, t4) => {\n  const n2 = t4.length;\n  let i3, r2, s4;\n  return Zi$1(e3) ? Li$1 : (i3 = e3.state, 0 !== i3.wrap && i3.mode !== qi$1 ? Li$1 : i3.mode === qi$1 && (r2 = 1, r2 = Wt$2(r2, t4, n2, 0), r2 !== i3.check) ? xi$1 : (s4 = rr$2(e3, t4, n2, n2), s4 ? (i3.mode = 16210, Ui$1) : (i3.havedict = 1, ki$1)));\n}, inflateInfo: \"pako inflate (from Nodeca project)\" };\nvar or$2 = function() {\n  this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = \"\", this.comment = \"\", this.hcrc = 0, this.done = false;\n};\nconst ar$2 = Object.prototype.toString, { Z_NO_FLUSH: cr$2, Z_FINISH: ur$2, Z_OK: lr$2, Z_STREAM_END: hr$2, Z_NEED_DICT: dr$2, Z_STREAM_ERROR: _r$2, Z_DATA_ERROR: fr$2, Z_MEM_ERROR: pr$2 } = Jt$2;\nfunction Er$1(e3) {\n  this.options = Jn$2({ chunkSize: 65536, windowBits: 15, to: \"\" }, e3 || {});\n  const t4 = this.options;\n  t4.raw && t4.windowBits >= 0 && t4.windowBits < 16 && (t4.windowBits = -t4.windowBits, 0 === t4.windowBits && (t4.windowBits = -15)), !(t4.windowBits >= 0 && t4.windowBits < 16) || e3 && e3.windowBits || (t4.windowBits += 32), t4.windowBits > 15 && t4.windowBits < 48 && (15 & t4.windowBits || (t4.windowBits |= 15)), this.err = 0, this.msg = \"\", this.ended = false, this.chunks = [], this.strm = new si(), this.strm.avail_out = 0;\n  let n2 = sr$2.inflateInit2(this.strm, t4.windowBits);\n  if (n2 !== lr$2) throw new Error(Xt$2[n2]);\n  if (this.header = new or$2(), sr$2.inflateGetHeader(this.strm, this.header), t4.dictionary && (\"string\" == typeof t4.dictionary ? t4.dictionary = ni$1(t4.dictionary) : \"[object ArrayBuffer]\" === ar$2.call(t4.dictionary) && (t4.dictionary = new Uint8Array(t4.dictionary)), t4.raw && (n2 = sr$2.inflateSetDictionary(this.strm, t4.dictionary), n2 !== lr$2))) throw new Error(Xt$2[n2]);\n}\nfunction gr$1(e3, t4) {\n  const n2 = new Er$1(t4);\n  if (n2.push(e3), n2.err) throw n2.msg || Xt$2[n2.err];\n  return n2.result;\n}\nEr$1.prototype.push = function(e3, t4) {\n  const n2 = this.strm, i3 = this.options.chunkSize, r2 = this.options.dictionary;\n  let s4, o2, a4;\n  if (this.ended) return false;\n  for (o2 = t4 === ~~t4 ? t4 : true === t4 ? ur$2 : cr$2, \"[object ArrayBuffer]\" === ar$2.call(e3) ? n2.input = new Uint8Array(e3) : n2.input = e3, n2.next_in = 0, n2.avail_in = n2.input.length; ; ) {\n    for (0 === n2.avail_out && (n2.output = new Uint8Array(i3), n2.next_out = 0, n2.avail_out = i3), s4 = sr$2.inflate(n2, o2), s4 === dr$2 && r2 && (s4 = sr$2.inflateSetDictionary(n2, r2), s4 === lr$2 ? s4 = sr$2.inflate(n2, o2) : s4 === fr$2 && (s4 = dr$2)); n2.avail_in > 0 && s4 === hr$2 && n2.state.wrap > 0 && 0 !== e3[n2.next_in]; ) sr$2.inflateReset(n2), s4 = sr$2.inflate(n2, o2);\n    switch (s4) {\n      case _r$2:\n      case fr$2:\n      case dr$2:\n      case pr$2:\n        return this.onEnd(s4), this.ended = true, false;\n    }\n    if (a4 = n2.avail_out, n2.next_out && (0 === n2.avail_out || s4 === hr$2)) if (\"string\" === this.options.to) {\n      let e4 = ri$1(n2.output, n2.next_out), t5 = n2.next_out - e4, r3 = ii$1(n2.output, e4);\n      n2.next_out = t5, n2.avail_out = i3 - t5, t5 && n2.output.set(n2.output.subarray(e4, e4 + t5), 0), this.onData(r3);\n    } else this.onData(n2.output.length === n2.next_out ? n2.output : n2.output.subarray(0, n2.next_out));\n    if (s4 !== lr$2 || 0 !== a4) {\n      if (s4 === hr$2) return s4 = sr$2.inflateEnd(this.strm), this.onEnd(s4), this.ended = true, true;\n      if (0 === n2.avail_in) break;\n    }\n  }\n  return true;\n}, Er$1.prototype.onData = function(e3) {\n  this.chunks.push(e3);\n}, Er$1.prototype.onEnd = function(e3) {\n  e3 === lr$2 && (\"string\" === this.options.to ? this.result = this.chunks.join(\"\") : this.result = $n$2(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;\n};\nvar vr$1 = { Inflate: Er$1, inflate: gr$1, inflateRaw: function(e3, t4) {\n  return (t4 = t4 || {}).raw = true, gr$1(e3, t4);\n}, ungzip: gr$1 };\nconst { Deflate: br$1, deflate: mr$1, deflateRaw: yr$1, gzip: wr$1 } = vi$1, { Inflate: Sr$1, inflate: Tr$1, inflateRaw: Nr$1, ungzip: Cr$1 } = vr$1;\nvar Ar$1, Ir$1 = { Deflate: br$1, deflate: mr$1, deflateRaw: yr$1, gzip: wr$1, Inflate: Sr$1, inflate: Tr$1, inflateRaw: Nr$1, ungzip: Cr$1, constants: Jt$2 }, Or$1 = function(e3) {\n  return r$1(void 0, void 0, void 0, function() {\n    var t4;\n    return s$1(this, function(n2) {\n      return t4 = Ir$1.ungzip(e3), [2, String.fromCharCode.apply(null, t4)];\n    });\n  });\n}, kr$1 = function(e3) {\n  return r$1(void 0, void 0, void 0, function() {\n    var t4;\n    return s$1(this, function(n2) {\n      switch (n2.label) {\n        case 0:\n          return n2.trys.push([0, 2, , 3]), [4, e3()];\n        case 1:\n          return n2.sent(), [3, 3];\n        case 2:\n          if (!((t4 = n2.sent()) instanceof b$2)) throw t4;\n          return t4.throwOutside(), [3, 3];\n        case 3:\n          return [2];\n      }\n    });\n  });\n}, Dr$1 = function(e3) {\n  return r$1(void 0, void 0, void 0, function() {\n    return s$1(this, function(t4) {\n      switch (t4.label) {\n        case 0:\n          return t4.trys.push([0, 2, , 3]), [4, e3()];\n        case 1:\n        case 2:\n          return t4.sent(), [3, 3];\n        case 3:\n          return [2];\n      }\n    });\n  });\n};\n!function(e3) {\n  e3.CONNECTING = \"CONNECTING\", e3.OPEN = \"OPEN\", e3.CLOSED = \"CLOSED\";\n}(Ar$1 || (Ar$1 = {}));\nvar Rr$1, Lr$1 = function(e3) {\n  function n2(t4, n3) {\n    var i3 = n3.sdkState, r2 = n3.dispatcher, s4 = n3.logger, o2 = e3.call(this) || this;\n    return o2.lastActive = 0, o2._iid = t4, o2._sdkState = i3, o2._dispatcher = r2, o2._logger = s4, o2;\n  }\n  return t$2(n2, e3), Object.defineProperty(n2.prototype, \"isOpen\", { get: function() {\n    return this.connectionState === Ar$1.OPEN;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"connectionState\", { get: function() {\n    if (this._ws) switch (this._ws.readyState) {\n      case 0:\n        return Ar$1.CONNECTING;\n      case 1:\n        return Ar$1.OPEN;\n    }\n    return Ar$1.CLOSED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"ws\", { get: function() {\n    var e4;\n    return null !== (e4 = this._ws) && void 0 !== e4 ? e4 : null;\n  }, enumerable: false, configurable: true }), n2.prototype._handleMessage = function(e4) {\n    var t4 = this;\n    e4.split(\"\\n\").forEach(function(e5) {\n      if (e5) {\n        var n3 = ze$2.createFromRawMessage(t4._iid, e5);\n        if (t4._logger.debug(\"receive websocket event\", n3), \"LOGI\" === n3.code) t4.dispatch(\"message\", n3);\n        else if (\"PONG\" === n3.code) t4.dispatch(\"pong\");\n        else if (\"EXPR\" === n3.code) {\n          if (n3.payload) {\n            var i3 = new Ve$2(n3.payload);\n            i3.expiresIn >= 0 && t4._dispatcher.dispatch(i3);\n          }\n        } else \"NOOP\" === n3.code || t4.dispatch(\"message\", n3);\n      }\n    });\n  }, n2.prototype.connect = function(e4, t4) {\n    return void 0 === t4 && (t4 = \"\"), r$1(this, void 0, void 0, function() {\n      var n3 = this;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return \"function\" == typeof fetch ? [3, 2] : [4, __webpack_require__.e(/*! import() */ 2).then(__webpack_require__.bind(null, /*! ./__bundle-46d64517-HYorftfE.js */ \"./node_modules/@practo/practo-ai/dist/__bundle-46d64517-HYorftfE.js\")).then((n4) => n4._)];\n          case 1:\n            i3.sent(), i3.label = 2;\n          case 2:\n            return Dr$1(function() {\n              return r$1(n3, void 0, void 0, function() {\n                return s$1(this, function(e5) {\n                  return fetch(this._sdkState.api.host), [2];\n                });\n              });\n            }), this._ws = new WebSocket(e4, encodeURIComponent(t4)), this._ws.onopen = function() {\n              n3._logger.debug(\"websocket open\"), n3.dispatch(\"open\");\n            }, this._ws.onmessage = function(e5) {\n              return r$1(n3, void 0, void 0, function() {\n                var t5, n4, i4, o2, a4, c3, u3, l2 = this;\n                return s$1(this, function(h4) {\n                  switch (h4.label) {\n                    case 0:\n                      return (null === (u3 = this._sdkState.websocket) || void 0 === u3 ? void 0 : u3.compression) ? e5.data instanceof Blob ? ((t5 = new FileReader()).readAsArrayBuffer(e5.data), t5.onloadend = function() {\n                        return r$1(l2, void 0, void 0, function() {\n                          var e6, n5;\n                          return s$1(this, function(i5) {\n                            switch (i5.label) {\n                              case 0:\n                                return i5.trys.push([0, 2, , 3]), [4, Or$1(t5.result)];\n                              case 1:\n                                return e6 = i5.sent(), this._handleMessage(e6), [3, 3];\n                              case 2:\n                                return n5 = i5.sent(), this.error(n5), [3, 3];\n                              case 3:\n                                return [2];\n                            }\n                          });\n                        });\n                      }, [3, 12]) : [3, 1] : [3, 13];\n                    case 1:\n                      if (!(e5.data instanceof ArrayBuffer)) return [3, 6];\n                      h4.label = 2;\n                    case 2:\n                      return h4.trys.push([2, 4, , 5]), [4, Or$1(new Uint8Array(e5.data))];\n                    case 3:\n                      return a4 = h4.sent(), this._handleMessage(a4), [3, 5];\n                    case 4:\n                      return n4 = h4.sent(), this.error(n4), [3, 5];\n                    case 5:\n                      return [3, 12];\n                    case 6:\n                      if (!(\"undefined\" != typeof Buffer && e5.data instanceof Buffer)) return [3, 11];\n                      h4.label = 7;\n                    case 7:\n                      return h4.trys.push([7, 9, , 10]), i4 = e5.data, o2 = i4.buffer.slice(i4.byteOffset, i4.byteOffset + i4.byteLength), [4, Or$1(o2)];\n                    case 8:\n                      return a4 = h4.sent(), this._handleMessage(a4), [3, 10];\n                    case 9:\n                      return c3 = h4.sent(), this.error(c3), [3, 10];\n                    case 10:\n                      return [3, 12];\n                    case 11:\n                      \"string\" == typeof e5.data && this._handleMessage(e5.data), h4.label = 12;\n                    case 12:\n                      return [3, 14];\n                    case 13:\n                      this._handleMessage(e5.data), h4.label = 14;\n                    case 14:\n                      return [2];\n                  }\n                });\n              });\n            }, this._ws.onerror = function() {\n              n3._logger.debug(\"websocket error\"), n3.dispatch(\"error\", b$2.networkError);\n            }, this._ws.onclose = function(e5) {\n              n3._logger.debug(\"websocket close\", e5.code, e5.reason), n3.cleanUpWebSocket(), n3.dispatch(\"close\");\n            }, this.lastActive = Date.now(), [2];\n        }\n      });\n    });\n  }, n2.prototype.cleanUpWebSocket = function() {\n    this._ws && (this._ws.onopen = ut$1, this._ws.onmessage = ut$1, this._ws.onerror = ut$1, this._ws.onclose = ut$1, this.connectionState === Ar$1.OPEN && this._ws.close(1e3, \"Normal Closure\"), this._ws = void 0);\n  }, n2.prototype.disconnect = function() {\n    var e4 = this;\n    return new Promise(function(t4) {\n      if (e4._ws) {\n        if (e4.connectionState === Ar$1.CLOSED) return e4.cleanUpWebSocket(), void t4();\n        e4._ws.onclose = function() {\n          e4.cleanUpWebSocket(), e4.dispatch(\"close\"), t4();\n        }, e4._ws.close();\n      } else t4();\n    });\n  }, n2.prototype.send = function(e4) {\n    if (!this._ws) throw b$2.connectionClosed;\n    \"PING\" !== e4.code ? this.dispatch(\"ping-refresh\") : this._logger.debug(\"send ping\", e4), this._ws.send(e4.convertToMessage());\n  }, n2.prototype.error = function(e4) {\n    this._logger.debug(\"websocket error\", e4), this.dispatch(\"error\", e4);\n  }, n2;\n}(ne), xr$1 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.all, i3 = t4.feed, r2 = t4.custom_types, s4 = t4.ts, o2 = e3.call(this) || this;\n    return o2.all = n3, o2.feed = i3, o2.customTypes = r2, o2.ts = s4, o2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), Ur$1 = function() {\n  function e3(e4, t4) {\n    var n2 = t4.session, i3 = t4.sdkState, r2 = t4.dispatcher, s4 = t4.logger, o2 = t4.useFetchCompat, a4 = void 0 !== o2 && o2, c3 = this;\n    this._ackStateMap = /* @__PURE__ */ new Map(), this._sdkState = i3, this._dispatcher = r2, this._logger = s4, this.apiClient = new ct$1(e4, { session: n2, sdkState: i3, dispatcher: r2, logger: s4, useFetchCompat: a4 }), this.websocketClient = new Lr$1(e4, { sdkState: i3, dispatcher: r2, logger: s4 }), this.websocketClient.on(\"message\", function(e5) {\n      if (e5.payload.unread_cnt && c3._dispatcher.dispatch(new xr$1(e5.payload.unread_cnt)), e5.requestId) {\n        if (c3._ackStateMap.has(e5.requestId)) {\n          var t5 = c3._ackStateMap.get(e5.requestId);\n          \"EROR\" !== e5.code ? t5.resolve(e5) : t5.reject(new b$2({ code: e5.payload.code, message: e5.payload.message }));\n        }\n      } else c3._dispatcher.dispatch(e5);\n    }).on(\"close\", function() {\n      c3._ackStateMap.forEach(function(e5) {\n        e5.reject(b$2.connectionClosed);\n      }), c3._ackStateMap.clear();\n    });\n  }\n  return e3.prototype._sendApiRequest = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this.apiClient.send(e4)];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, e3.prototype._sendWebsocketRequest = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i3, r2 = this;\n      return s$1(this, function(s4) {\n        if (!this._sdkState.websocket) throw b$2.connectionRequired;\n        if (t4 = new rt$1(), e4.ackRequired) {\n          i3 = function(i4, s5) {\n            r2._ackStateMap.has(e4.requestId) && (r2._ackStateMap.delete(e4.requestId), n2 && (clearTimeout(n2), n2 = null), i4 ? (r2._logger.debug(\"fail websocket request\", e4.requestId, i4), t4.reject(i4)) : (r2._logger.debug(\"receive websocket ack\", e4.requestId, e4), r2._logger.debug(\"receive websocket ack\", s5), t4.resolve(s5)));\n          };\n          try {\n            n2 = setTimeout(function() {\n              return i3(b$2.noAckTimeout);\n            }, this._sdkState.websocket.responseTimeout), this._ackStateMap.set(e4.requestId, { resolve: function(e5) {\n              return i3(void 0, e5);\n            }, reject: function(e5) {\n              return i3(e5);\n            } }), this.websocketClient.send(e4);\n          } catch (e5) {\n            i3(e5);\n          }\n        } else try {\n          this.websocketClient.send(e4), t4.resolve();\n        } catch (e5) {\n          t4.reject(e5);\n        }\n        return [2, t4.promise];\n      });\n    });\n  }, e3.prototype.send = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 instanceof Fe$2 ? [4, this._sendApiRequest(e4)] : [3, 2];\n          case 1:\n          case 3:\n            return [2, t4.sent()];\n          case 2:\n            return e4 instanceof Ge$1 ? [4, this._sendWebsocketRequest(e4)] : [3, 4];\n          case 4:\n            throw b$2.invalidParameters;\n        }\n      });\n    });\n  }, e3.prototype.cancel = function(e4) {\n    this.apiClient.cancel(e4);\n  }, e3.prototype.cancelAll = function() {\n    this.apiClient.cancelAll();\n  }, e3;\n}();\n!function(e3) {\n  e3[e3.NONE = 0] = \"NONE\", e3[e3.INITIALIZED = 1] = \"INITIALIZED\", e3[e3.CONNECTING = 2] = \"CONNECTING\", e3[e3.CONNECTED = 3] = \"CONNECTED\", e3[e3.RECONNECTING = 4] = \"RECONNECTING\", e3[e3.INTERNAL_DISCONNECTED = 5] = \"INTERNAL_DISCONNECTED\", e3[e3.EXTERNAL_DISCONNECTED = 6] = \"EXTERNAL_DISCONNECTED\", e3[e3.LOGOUT = 7] = \"LOGOUT\";\n}(Rr$1 || (Rr$1 = {}));\nvar Pr$1, Mr$1, Fr$1 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.stateType, i3 = e3.call(this) || this;\n    return i3.stateType = n3, i3;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), qr$1 = function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), Hr$1 = function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), Vr$1 = function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), zr$1 = function() {\n  function e3(e4) {\n    var t4, n2, i3, r2;\n    this.isEnabled = null !== (t4 = e4.enabled) && void 0 !== t4 && t4, this.feedChannels = null !== (n2 = e4.feed_channels) && void 0 !== n2 ? n2 : {}, this.templateListToken = null !== (i3 = e4.template_list_token) && void 0 !== i3 ? i3 : null, this.settingsUpdatedAt = null !== (r2 = e4.settings_updated_at) && void 0 !== r2 ? r2 : 0;\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ enabled: e4.isEnabled, feed_channels: e4.feedChannels, template_list_token: e4.templateListToken, settings_updated_at: e4.settingsUpdatedAt }));\n  }, e3;\n}(), Gr$1 = function(e3) {\n  return \"sendbird@\".concat(e3, \"/changelog_include_chat_notifications\");\n}, jr$1 = function() {\n  function e3(e4) {\n    var t4;\n    this.lastUpdatedAt = null !== (t4 = e4.last_updated_at) && void 0 !== t4 ? t4 : 0;\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ last_updated_at: e4.lastUpdatedAt }));\n  }, e3;\n}(), Kr$1 = function() {\n  function e3(e4) {\n    var t4;\n    this.token = null !== (t4 = e4.template_list_token) && void 0 !== t4 ? t4 : \"\";\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ template_list_token: e4.token }));\n  }, e3;\n}(), Br$1 = function() {\n  function e3(e4) {\n    void 0 === e4 && (e4 = { min_stat_count: 100, min_interval: 10800, max_stat_count_per_request: 1e3, lower_threshold: 10, request_delay_range: 180 }), this.minStatCount = e4.min_stat_count, this.minInterval = 1e3 * e4.min_interval, this.maxStatCountPerRequest = e4.max_stat_count_per_request, this.lowerThreshold = e4.lower_threshold, this.requestDelayRange = 1e3 * e4.request_delay_range;\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ min_stat_count: e4.minStatCount, min_interval: e4.minInterval / 1e3, max_stat_count_per_request: e4.maxStatCountPerRequest, lower_threshold: e4.lowerThreshold, request_delay_range: e4.requestDelayRange / 1e3 }));\n  }, e3;\n}(), Qr$1 = function() {\n  function e3(e4) {\n    void 0 === e4 && (e4 = { default: { min_stat_count: 100, min_interval: 10800, max_stat_count_per_request: 1e3, lower_threshold: 10, request_delay_range: 180 } }), this.default = new Br$1(e4.default), this.realTime = new Br$1(e4.realtime);\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ default: Br$1.payloadify(e4.default), realtime: Br$1.payloadify(e4.realTime) }));\n  }, e3;\n}(), Wr$1 = 1048576, Zr$1 = 5;\n!function(e3) {\n  e3[e3.NONE = 0] = \"NONE\", e3[e3.INCLUDE_REPLY = 1] = \"INCLUDE_REPLY\", e3[e3.EXCLUDE_REPLY = 2] = \"EXCLUDE_REPLY\", e3[e3.INCLUDE_REPLY_TO_CHANNEL = 3] = \"INCLUDE_REPLY_TO_CHANNEL\";\n}(Pr$1 || (Pr$1 = {})), function(e3) {\n  e3[e3.NONE = 0] = \"NONE\", e3[e3.INCLUDE_REPLY = 1] = \"INCLUDE_REPLY\", e3[e3.EXCLUDE_REPLY = 2] = \"EXCLUDE_REPLY\", e3[e3.INCLUDE_REPLY_TO_CHANNEL = 3] = \"INCLUDE_REPLY_TO_CHANNEL\";\n}(Mr$1 || (Mr$1 = {}));\nvar Yr$1 = function() {\n  function e3(e4) {\n    var t4, n2, i3, r2, s4, o2, a4, c3, u3;\n    void 0 === e4 && (e4 = {}), this.emojiHash = e4.emoji_hash || \"\", this.uploadSizeLimit = e4.file_upload_size_limit ? e4.file_upload_size_limit * Wr$1 : Number.MAX_SAFE_INTEGER, this.useReaction = !!e4.use_reaction, this.applicationAttributes = null !== (t4 = e4.application_attributes) && void 0 !== t4 ? t4 : [], this.premiumFeatureList = null !== (n2 = e4.premium_feature_list) && void 0 !== n2 ? n2 : [], this.deviceTokenCache = this.applicationAttributes.includes(\"sdk_device_token_cache\"), this.enabledChannelMemberShipHistory = this.applicationAttributes.includes(\"channel_membership_history\"), this.multipleFilesMessageFileCountLimit = null !== (i3 = e4.multiple_file_send_max_size) && void 0 !== i3 ? i3 : 5, this.allowSdkStatsUpload = null === (r2 = e4.allow_sdk_log_ingestion) || void 0 === r2 || r2, this.unreadCountThreadingPolicy = null !== (s4 = e4.unread_cnt_threading_policy) && void 0 !== s4 ? s4 : Pr$1.NONE, this.lastMessageThreadingPolicy = null !== (o2 = e4.last_msg_threading_policy) && void 0 !== o2 ? o2 : Mr$1.NONE, this.uikitConfigInfo = new jr$1(null !== (a4 = e4.uikit_config) && void 0 !== a4 ? a4 : {}), this.notificationInfo = e4.notifications ? new zr$1(e4.notifications) : null, this.messageTemplateInfo = e4.message_template ? new Kr$1(e4.message_template) : null, this.statConfigInfo = e4.log_publish_config ? new Qr$1(e4.log_publish_config) : new Qr$1(), this.disableSuperGroupMack = null !== (c3 = e4.disable_supergroup_mack) && void 0 !== c3 && c3, this.configSyncNeeded = null !== (u3 = e4.config_sync_needed) && void 0 !== u3 && u3;\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ emoji_hash: e4.emojiHash, file_upload_size_limit: e4.uploadSizeLimit / Wr$1, application_attributes: e4.applicationAttributes, premium_feature_list: e4.premiumFeatureList, use_reaction: e4.useReaction, allow_sdk_log_ingestion: e4.allowSdkStatsUpload, unread_cnt_threading_policy: e4.unreadCountThreadingPolicy, last_msg_threading_policy: e4.lastMessageThreadingPolicy, uikit_config: e4.uikitConfigInfo ? jr$1.payloadify(e4.uikitConfigInfo) : null, notifications: e4.notificationInfo ? zr$1.payloadify(e4.notificationInfo) : null, message_template: e4.messageTemplateInfo ? Kr$1.payloadify(e4.messageTemplateInfo) : null, log_publish_config: e4.statConfigInfo ? Qr$1.payloadify(e4.statConfigInfo) : null, disable_supergroup_mack: e4.disableSuperGroupMack, config_sync_needed: e4.configSyncNeeded }));\n  }, e3;\n}(), Xr$1 = function(e3) {\n  return \"sendbird@\".concat(e3, \"/app_configs_info\");\n}, Jr$1 = function() {\n  function e3(e4) {\n    this._iid = \"\", this._iid = e4;\n  }\n  return e3.payloadify = function(e4) {\n    return {};\n  }, e3;\n}(), $r$1 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.userId, i3 = t4.metadata, r2 = e3.call(this) || this;\n    return r2.method = ae.POST, r2.path = \"\".concat(ue, \"/\").concat(n3, \"/metadata\"), r2.params = { metadata: i3 }, r2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), es$2 = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.metaData = n3, i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), ts$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.userId, i3 = t4.metadata, r2 = t4.upsert, s4 = e3.call(this) || this;\n    return s4.method = ae.PUT, s4.path = \"\".concat(ue, \"/\").concat(n3, \"/metadata\"), s4.params = { metadata: i3, upsert: r2 }, s4;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), ns$2 = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.metadata = n3, i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), is$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.userId, i3 = t4.metadataKey, r2 = e3.call(this) || this;\n    return r2.method = ae.DELETE, r2.path = \"\".concat(ue, \"/\").concat(n3, \"/metadata/\").concat(i3), r2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2);\n!function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(n2, e3);\n}(qe$2);\nvar rs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.userId, i3 = e3.call(this) || this;\n    return i3.method = ae.DELETE, i3.path = \"\".concat(ue, \"/\").concat(n3, \"/metadata\"), i3;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2);\n!function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(n2, e3);\n}(qe$2);\nvar ss$2, os$2 = function(e3, t4) {\n  var n2 = JSON.parse(JSON.stringify(e3));\n  return n2._iid && delete n2._iid, t4 && t4(n2), n2;\n}, as$2 = function(e3, t4) {\n  var n2 = JSON.parse(JSON.stringify(e3));\n  return n2;\n}, cs$2 = function(e3) {\n  return { do: function(t4) {\n    e3 || t4();\n  }, throw: function(t4) {\n    if (!e3) throw t4;\n  } };\n};\n!function(e3) {\n  e3.ONLINE = \"online\", e3.OFFLINE = \"offline\", e3.NON_AVAILABLE = \"nonavailable\";\n}(ss$2 || (ss$2 = {}));\nvar us$2, ls$2 = function(e3) {\n  function i3(t4, n2) {\n    var i4, r2, s4, o2, u3, l2, h4, d4, _2, f2, p2, E3, g2, v2 = this;\n    return (v2 = e3.call(this, t4) || this).userId = null !== (r2 = null !== (i4 = n2.guest_id) && void 0 !== i4 ? i4 : n2.user_id) && void 0 !== r2 ? r2 : \"\", v2.nickname = null !== (o2 = null !== (s4 = n2.nickname) && void 0 !== s4 ? s4 : n2.name) && void 0 !== o2 ? o2 : \"\", v2.plainProfileUrl = null !== (l2 = null !== (u3 = n2.profile_url) && void 0 !== u3 ? u3 : n2.image) && void 0 !== l2 ? l2 : \"\", v2.requireAuth = null !== (h4 = n2.require_auth_for_profile_image) && void 0 !== h4 && h4, v2.metaData = null !== (d4 = n2.metadata) && void 0 !== d4 ? d4 : {}, v2.connectionStatus = ss$2.NON_AVAILABLE, T$2(ss$2, n2.is_online) ? v2.connectionStatus = n2.is_online : S$1(\"boolean\", n2.is_online) && (v2.connectionStatus = n2.is_online ? ss$2.ONLINE : ss$2.OFFLINE), v2.isActive = null === (_2 = n2.is_active) || void 0 === _2 || _2, v2.lastSeenAt = null !== (f2 = n2.last_seen_at) && void 0 !== f2 ? f2 : null, v2.preferredLanguages = n2.preferred_languages ? c([], a$1(n2.preferred_languages), false) : null, v2.friendDiscoveryKey = null !== (p2 = n2.friend_discovery_key) && void 0 !== p2 ? p2 : null, v2.friendName = null !== (E3 = n2.friend_name) && void 0 !== E3 ? E3 : null, v2._hashValue = v2._generateHashValue(), v2._updatedAt = null !== (g2 = n2.updatedat) && void 0 !== g2 ? g2 : 0, v2;\n  }\n  return t$2(i3, e3), i3.payloadify = function(t4) {\n    return se(oe(n$2(n$2({}, e3.payloadify.call(this, t4)), { user_id: t4.userId, nickname: t4.nickname, profile_url: t4.plainProfileUrl, require_auth_for_profile_image: t4.requireAuth, metadata: t4.metaData, is_online: t4.connectionStatus, is_active: t4.isActive, last_seen_at: t4.lastSeenAt, preferred_languages: t4.preferredLanguages, friend_discovery_key: t4.friendDiscoveryKey, friend_name: t4.friendName })));\n  }, i3._buildUserFromSerializedData = function(e4) {\n    var t4 = as$2(e4);\n    return new i3(t4._iid, i3.payloadify(t4));\n  }, i3.prototype._generateHashValue = function() {\n    for (var e4, t4 = JSON.stringify({ userId: this.userId, nickname: this.nickname, plainProfileUrl: this.plainProfileUrl, friendDiscoveryKey: this.friendDiscoveryKey, friendName: this.friendName, metaData: JSON.stringify(this.metaData), performanceLanguages: null === (e4 = this.preferredLanguages) || void 0 === e4 ? void 0 : e4.toString(), requireAuth: this.requireAuth }), n2 = 0, i4 = 0; i4 < t4.length; i4++) {\n      n2 = (n2 << 5) - n2 + t4.charCodeAt(i4), n2 |= 0;\n    }\n    return n2;\n  }, Object.defineProperty(i3.prototype, \"profileUrl\", { get: function() {\n    var e4 = uo.of(this._iid).sessionManager;\n    return this.requireAuth && e4.ekey ? \"\".concat(this.plainProfileUrl, \"?auth=\").concat(e4.ekey) : this.plainProfileUrl;\n  }, enumerable: false, configurable: true }), i3.prototype.serialize = function() {\n    return os$2(this);\n  }, i3.prototype._isValidMetaData = function(e4) {\n    return !Array.isArray(e4) && Object.keys(e4).length > 0 && Object.keys(e4).map(function(t4) {\n      return e4[t4];\n    }).every(function(e5) {\n      return S$1(\"string\", e5);\n    });\n  }, i3.prototype._applyMetaData = function(e4, t4) {\n    var n2 = this;\n    void 0 === t4 && (t4 = false), Object.keys(e4).forEach(function(i4) {\n      t4 ? delete n2.metaData[i4] : n2.metaData[i4] = e4[i4];\n    });\n  }, i3.prototype.createMetaData = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i4, r2, o2, a4;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return cs$2(this._isValidMetaData(e4)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.sdkState, i4 = t4.requestQueue, r2 = new $r$1({ userId: n2.userId, metadata: e4 }), [4, i4.send(r2)];\n          case 1:\n            return o2 = s4.sent(), a4 = o2.as(es$2).metaData, this._applyMetaData(a4), [2, this.metaData];\n        }\n      });\n    });\n  }, i3.prototype.updateMetaData = function(e4, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var n2, i4, r2, o2, a4, c3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return cs$2(this._isValidMetaData(e4)).throw(b$2.invalidParameters), n2 = uo.of(this._iid), i4 = n2.sdkState, r2 = n2.requestQueue, o2 = new ts$2({ userId: i4.userId, metadata: e4, upsert: t4 }), [4, r2.send(o2)];\n          case 1:\n            return a4 = s4.sent(), c3 = a4.as(ns$2).metadata, this._applyMetaData(c3), [2, this.metaData];\n        }\n      });\n    });\n  }, i3.prototype.deleteMetaData = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i4, r2, o2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e4)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.sdkState, i4 = t4.requestQueue, r2 = new is$2({ userId: n2.userId, metadataKey: e4 }), [4, i4.send(r2)];\n          case 1:\n            return s4.sent(), this._applyMetaData(((o2 = {})[e4] = true, o2), true), [2, this.metaData];\n        }\n      });\n    });\n  }, i3.prototype.deleteAllMetaData = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, i4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e4 = uo.of(this._iid), t4 = e4.sdkState, n2 = e4.requestQueue, i4 = new rs$2({ userId: t4.userId }), [4, n2.send(i4)];\n          case 1:\n            return r2.sent(), this.metaData = {}, [2];\n        }\n      });\n    });\n  }, i3;\n}(Jr$1), hs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.userProfile, i3 = e3.call(this) || this;\n    return i3.userProfile = n3, i3;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), ds$2 = function() {\n  function e3(e4, t4) {\n    var n2, i3, r2, s4, o2, a4, c3, u3, l2, h4, d4, _2, f2, p2;\n    this._iid = e4, this.appInfo = new Yr$1(t4), this.user = new ls$2(e4, t4), this.connectedAt = null !== (n2 = t4.login_ts) && void 0 !== n2 ? n2 : 0, this.firstConnectedAt = 0, this.pingInterval = null !== (i3 = t4.ping_interval) && void 0 !== i3 ? i3 : 15e3, this.pongTimeout = null !== (r2 = t4.pong_timeout) && void 0 !== r2 ? r2 : 5e3, this.reconnectInterval = null !== (o2 = null === (s4 = t4.reconnect) || void 0 === s4 ? void 0 : s4.interval) && void 0 !== o2 ? o2 : 3e3, this.reconnectMaxInterval = null !== (c3 = null === (a4 = t4.reconnect) || void 0 === a4 ? void 0 : a4.max_interval) && void 0 !== c3 ? c3 : 6e4, this.reconnectRetryCount = null !== (l2 = null === (u3 = t4.reconnect) || void 0 === u3 ? void 0 : u3.retry_cnt) && void 0 !== l2 ? l2 : 5, this.reconnectIntervalMultiple = null !== (d4 = null === (h4 = t4.reconnect) || void 0 === h4 ? void 0 : h4.mul) && void 0 !== d4 ? d4 : 2, this.maxUnreadCountOnSuperGroup = null !== (_2 = t4.max_unread_cnt_on_super_group) && void 0 !== _2 ? _2 : 100, this.profileImageEncryption = !!t4.profile_image_encryption, this.concurrentCallLimit = null !== (f2 = t4.concurrent_call_limit) && void 0 !== f2 ? f2 : 5, this.backOffDelay = null !== (p2 = t4.back_off_delay) && void 0 !== p2 ? p2 : 100;\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe(n$2(n$2(n$2({}, ls$2.payloadify(e4.user)), Yr$1.payloadify(e4.appInfo)), { login_ts: e4.connectedAt, ping_interval: e4.pingInterval, pong_timeout: e4.pongTimeout, reconnect: { interval: e4.reconnectInterval, max_interval: e4.reconnectMaxInterval, retry_cnt: e4.reconnectRetryCount, mul: e4.reconnectIntervalMultiple }, max_unread_cnt_on_super_group: e4.maxUnreadCountOnSuperGroup, profile_image_encryption: e4.profileImageEncryption, concurrent_call_limit: e4.concurrentCallLimit, back_off_delay: e4.backOffDelay })));\n  }, e3.prototype.apply = function() {\n    var e4 = this.reconnectInterval, t4 = this.reconnectMaxInterval, n2 = this.reconnectIntervalMultiple, i3 = uo.of(this._iid);\n    i3.sdkState.websocket && (i3.sdkState.websocket.pingInterval = 1e3 * this.pingInterval, i3.sdkState.websocket.pongTimeout = 1e3 * this.pongTimeout, i3.sdkState.websocket.reconnectMaxRetry = this.reconnectRetryCount, i3.sdkState.websocket.reconnectRetryStrategy = { calcTimeout: function(i4) {\n      return i4 > 0 ? 1e3 * Math.min(e4 * Math.pow(n2, i4 - 1), t4) : 10;\n    } }), i3.appInfo = this.appInfo, i3.sessionManager.currentUser = this.user, i3.connectedAt = this.connectedAt, this.firstConnectedAt || (i3.firstConnectedAt = this.connectedAt), i3.maxSuperGroupChannelUnreadCount = this.maxUnreadCountOnSuperGroup, i3.concurrentCallLimit = this.concurrentCallLimit, i3.backOffDelay = this.backOffDelay, i3.dispatcher.dispatch(new hs$2({ userProfile: this }));\n  }, e3;\n}(), _s$2 = function(e3) {\n  function i3(t4) {\n    var i4 = t4.request, r2 = void 0 === i4 || i4, s4 = t4.features, o2 = void 0 === s4 ? {} : s4, a4 = t4.options, c3 = void 0 === a4 ? {} : a4, u3 = t4.statConfigInfo, l2 = e3.call(this) || this;\n    return l2.request = r2, l2.features = n$2({ localCache: true, notification: true }, o2), l2.options = n$2({ ingestion: true }, c3), l2.statConfigInfo = u3, l2;\n  }\n  return t$2(i3, e3), i3;\n}(re$1), fs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = e3.call(this) || this;\n    return n3.configSyncNeeded = false, n3.configSyncNeeded = t4, n3;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), ps$2 = function(e3) {\n  function i3(t4, n2, i4) {\n    var r2, s4, o2, a4, c3 = this;\n    return (c3 = e3.call(this, t4, n2, i4) || this).error = null, c3.services = [], c3.userProfile = new ds$2(t4, i4), c3.deviceTokenLastDeletedAt = null !== (r2 = i4.device_token_last_deleted_at) && void 0 !== r2 ? r2 : 0, c3.key = null !== (s4 = i4.key) && void 0 !== s4 ? s4 : \"\", c3.ekey = null !== (o2 = i4.ekey) && void 0 !== o2 ? o2 : \"\", c3.error = i4.error ? new b$2(i4) : null, c3.services = null !== (a4 = i4.services) && void 0 !== a4 ? a4 : [], c3;\n  }\n  return t$2(i3, e3), i3.asError = function(e4) {\n    return new i3(\"\", \"LOGI\", n$2({ user_id: \"\", error: true }, e4));\n  }, i3.prototype.applyTo = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this.error ? [3, 4] : (t4 = uo.of(e4)) ? (n2 = t4.sessionManager, i4 = t4.dispatcher, [4, n2.login(this)]) : [3, 2];\n          case 1:\n            return r2.sent(), this.userProfile.apply(), i4.dispatch(new fs$2(this.userProfile.appInfo.configSyncNeeded)), i4.dispatch(new _s$2({ request: this.userProfile.appInfo.applicationAttributes.includes(\"allow_sdk_request_log_publish\"), features: { localCache: this.userProfile.appInfo.applicationAttributes.includes(\"allow_sdk_feature_local_cache_log_publish\"), notification: this.userProfile.appInfo.applicationAttributes.includes(\"allow_sdk_noti_stats_log_publish\") }, options: { ingestion: this.userProfile.appInfo.allowSdkStatsUpload }, statConfigInfo: this.userProfile.appInfo.statConfigInfo })), [3, 3];\n          case 2:\n            throw b$2.lostInstance;\n          case 3:\n            return [3, 5];\n          case 4:\n            throw this.error;\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(ze$2), Es$2 = function() {\n  function e3() {\n    this.type = Rr$1.NONE, this.name = \"none\";\n  }\n  return e3.prototype.run = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, e3.prototype.onConnect = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, e3.prototype.onReconnect = function(e4, t4) {\n    return t4.resetReconnectCount, r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, e3.prototype.onDisconnect = function(e4, t4) {\n    return t4.error, t4.autoReconnect, t4.cause, r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, e3.prototype.onDisconnectWebSocket = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, e3.prototype.onLogout = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, e3;\n}(), gs$2 = function(e3) {\n  function n2(t4) {\n    void 0 === t4 && (t4 = {});\n    var n3, i3 = this;\n    return (i3 = e3.call(this) || this).type = Rr$1.LOGOUT, i3.name = \"logout\", i3._wasPreviouslyConnected = null === (n3 = t4.wasPreviouslyConnected) || void 0 === n3 || n3, i3;\n  }\n  return t$2(n2, e3), n2.prototype.run = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3, i3 = this;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return t4 = Date.now(), n3 = e4.sdkState.userId, [4, e4.logout()];\n          case 1:\n            return o2.sent(), [4, e4.changeState(new Os$2(), t4)];\n          case 2:\n            return o2.sent(), this._wasPreviouslyConnected && kr$1(function() {\n              return r$1(i3, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  return e4.connectionHandlers.forEach(function(e5) {\n                    e5.onDisconnected && e5.onDisconnected(n3);\n                  }), [2];\n                });\n              });\n            }), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2), vs$2 = function(e3) {\n  function n2() {\n    var t4 = e3.call(this) || this;\n    return t4.type = Rr$1.EXTERNAL_DISCONNECTED, t4.name = \"externaldisconnected\", t4;\n  }\n  return t$2(n2, e3), n2.prototype.run = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, e4.disconnect()];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onConnect = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return n3 = Date.now(), [4, e4.disconnect()];\n          case 1:\n            return i3.sent(), [4, e4.changeState(new Cs$2({ authToken: t4 }), n3)];\n          case 2:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onReconnect = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new Ss$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onLogout = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new gs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2), bs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.autoReconnect, i3 = e3.call(this) || this;\n    return i3.type = Rr$1.INTERNAL_DISCONNECTED, i3.name = \"internaldisconnected\", i3._autoReconnect = false, i3._autoReconnect = n3, i3;\n  }\n  return t$2(n2, e3), n2.prototype.run = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.disconnect()];\n          case 1:\n            return n3.sent(), this._autoReconnect ? [4, e4.changeState(new Ss$2(), t4)] : [3, 3];\n          case 2:\n            n3.sent(), n3.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.onConnect = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return n3 = Date.now(), [4, e4.disconnect()];\n          case 1:\n            return i3.sent(), [4, e4.changeState(new Cs$2({ authToken: t4 }), n3)];\n          case 2:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onReconnect = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new Ss$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onDisconnectWebSocket = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new vs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onLogout = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new gs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2), ms$2 = function(e3) {\n  return r$1(void 0, void 0, void 0, function() {\n    return s$1(this, function(t4) {\n      return [2, new Promise(function(t5) {\n        return setTimeout(t5, e3);\n      })];\n    });\n  });\n}, ys$2 = function() {\n  function e3() {\n  }\n  return e3.prototype.calcTimeout = function() {\n    return 0;\n  }, e3;\n}(), ws$2 = function(e3, t4, n2) {\n  return void 0 === n2 && (n2 = new ys$2()), r$1(void 0, void 0, void 0, function() {\n    var i3, r2, o2, a4, c3, u3;\n    return s$1(this, function(s4) {\n      switch (s4.label) {\n        case 0:\n          i3 = 0, r2 = null, o2 = function(e4) {\n            return r2 = null != e4 ? e4 : new Error(\"Halted\");\n          }, a4 = function() {\n            i3 = 0;\n          }, s4.label = 1;\n        case 1:\n          if (!(-1 === t4 || i3 < t4)) return [3, 9];\n          s4.label = 2;\n        case 2:\n          return s4.trys.push([2, 4, , 8]), [4, e3(o2, a4)];\n        case 3:\n          if (c3 = s4.sent(), r2) throw r2;\n          return [2, c3];\n        case 4:\n          if (u3 = s4.sent(), r2) return [3, 6];\n          if (++i3 === t4) throw u3;\n          return [4, ms$2(n2.calcTimeout(i3))];\n        case 5:\n          return s4.sent(), [3, 7];\n        case 6:\n          throw r2;\n        case 7:\n          return [3, 8];\n        case 8:\n          return [3, 1];\n        case 9:\n          throw \"It should not happen.\";\n      }\n    });\n  });\n}, Ss$2 = function(e3) {\n  function n2() {\n    var t4 = null !== e3 && e3.apply(this, arguments) || this;\n    return t4.type = Rr$1.RECONNECTING, t4.name = \"reconnecting\", t4._callbacks = [], t4;\n  }\n  return t$2(n2, e3), n2.prototype._halt = function(e4) {\n    this._haltConnect && (this._haltConnect(e4), this._haltConnect = void 0);\n  }, n2.prototype._flushCallbacks = function(e4) {\n    this._haltConnect = void 0, this._resetConnect = void 0, this._callbacks.forEach(function(t4) {\n      return t4(e4);\n    });\n  }, n2.prototype.run = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3, i3, o2, a4, c3, l2 = this;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            t4 = Date.now(), n3 = new rt$1(), this._callbacks.push(function(e5) {\n              return e5 ? n3.reject(e5) : n3.resolve();\n            }), kr$1(function() {\n              return r$1(l2, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  return e4.connectionHandlers.forEach(function(e5) {\n                    e5.onReconnectStarted && e5.onReconnectStarted();\n                  }), [2];\n                });\n              });\n            }), h4.label = 1;\n          case 1:\n            return h4.trys.push([1, 4, , 9]), i3 = e4.sdkState.websocket, o2 = i3.reconnectMaxRetry, a4 = i3.reconnectRetryStrategy, [4, ws$2(function(t5, n4) {\n              return r$1(l2, void 0, void 0, function() {\n                var i4;\n                return s$1(this, function(r2) {\n                  switch (r2.label) {\n                    case 0:\n                      this._haltConnect = t5, this._resetConnect = n4, r2.label = 1;\n                    case 1:\n                      return r2.trys.push([1, 3, , 4]), [4, e4.connect()];\n                    case 2:\n                      return r2.sent(), [3, 4];\n                    case 3:\n                      if (i4 = r2.sent(), e4.clearLoginTimer(), i4 instanceof b$2) {\n                        if (i4.code === u$1.CONNECTION_CANCELED) return t5(i4), [2];\n                        if (i4.isSessionExpiredError || i4.isSessionInvalidatedError) return t5(i4), [2];\n                      }\n                      throw i4;\n                    case 4:\n                      return [2];\n                  }\n                });\n              });\n            }, o2, a4)];\n          case 2:\n            return h4.sent(), [4, e4.changeState(new Ts$2(), t4)];\n          case 3:\n            return h4.sent(), this._flushCallbacks(), kr$1(function() {\n              return r$1(l2, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  return e4.connectionHandlers.forEach(function(e5) {\n                    e5.onReconnectSucceeded && e5.onReconnectSucceeded();\n                  }), [2];\n                });\n              });\n            }), [3, 9];\n          case 4:\n            return c3 = h4.sent(), v$2(c3) ? [3, 7] : c3 instanceof b$2 ? c3.code === u$1.CONNECTION_CANCELED ? [3, 6] : [4, e4.changeState(new bs$2({ autoReconnect: false }), t4)] : [3, 6];\n          case 5:\n            h4.sent(), h4.label = 6;\n          case 6:\n            return this._flushCallbacks(c3), kr$1(function() {\n              return r$1(l2, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  return e4.connectionHandlers.forEach(function(e5) {\n                    e5.onReconnectFailed && e5.onReconnectFailed();\n                  }), [2];\n                });\n              });\n            }), [3, 8];\n          case 7:\n            throw c3;\n          case 8:\n            return [3, 9];\n          case 9:\n            return [2, n3.promise];\n        }\n      });\n    });\n  }, n2.prototype.onConnect = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        return n3 = new rt$1(), this._halt(b$2.connectionCanceled), e4.cancelConnectForRetry(), this._callbacks.push(function() {\n          var i4 = Date.now();\n          e4.changeState(new Cs$2({ authToken: t4 }), i4).then(function() {\n            n3.resolve();\n          }).catch(function(e5) {\n            n3.reject(e5);\n          });\n        }), [2, n3.promise];\n      });\n    });\n  }, n2.prototype.onReconnect = function(e4, t4) {\n    var n3 = t4.resetReconnectCount, i3 = void 0 !== n3 && n3;\n    return r$1(this, void 0, void 0, function() {\n      var e5;\n      return s$1(this, function(t5) {\n        return e5 = new rt$1(), this._resetConnect && i3 && this._resetConnect(), this._callbacks.push(function(t6) {\n          return t6 ? e5.reject(t6) : e5.resolve();\n        }), [2, e5.promise];\n      });\n    });\n  }, n2.prototype.onDisconnect = function(e4, t4) {\n    t4._error;\n    var n3 = t4.autoReconnect, i3 = void 0 === n3 || n3;\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n4) {\n        switch (n4.label) {\n          case 0:\n            return t5 = Date.now(), this._halt(b$2.connectionCanceled), [4, e4.changeState(new bs$2({ autoReconnect: i3 }), t5)];\n          case 1:\n            return n4.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onDisconnectWebSocket = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), this._halt(b$2.connectionCanceled), [4, e4.changeState(new vs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onLogout = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), this._halt(b$2.connectionCanceled), [4, e4.changeState(new gs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2), Ts$2 = function(e3) {\n  function n2() {\n    var t4 = null !== e3 && e3.apply(this, arguments) || this;\n    return t4.type = Rr$1.CONNECTED, t4.name = \"connected\", t4;\n  }\n  return t$2(n2, e3), n2.prototype.onReconnect = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.disconnect()];\n          case 1:\n            return n3.sent(), [4, e4.changeState(new Ss$2(), t4)];\n          case 2:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onDisconnect = function(e4, t4) {\n    var n3 = t4.autoReconnect;\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t5 = Date.now(), [4, e4.changeState(new bs$2({ autoReconnect: n3 }), t5)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onDisconnectWebSocket = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new vs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onLogout = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new gs$2(), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2);\n!function(e3) {\n  e3.ExternalSetBackground = \"ExternalSetBackground\", e3.ExternalDisconnectWebSocket = \"ExternalDisconnectWebSocket\";\n}(us$2 || (us$2 = {}));\nvar Ns$2 = function() {\n  function e3(e4, t4) {\n    var n2 = t4.sdkState, i3 = t4.cacheContext, r2 = t4.connectionHandlers, s4 = t4.sessionManager, o2 = t4.websocketClient, a4 = t4.dispatcher, c3 = t4.logger, u3 = t4.disableWebSocketCloseEventHandling, l2 = void 0 !== u3 && u3;\n    this._disableWebSocketCloseEventHandling = false, this._webSocketClosedCause = null, this._logger = c3, this._disableWebSocketCloseEventHandling = l2, this._context = new Ls$2(e4, { sdkState: n2, cacheContext: i3, connectionHandlers: r2, sessionManager: s4, websocketClient: o2, dispatcher: a4, logger: c3 }), this._sdkState = n2, this._sessionManager = s4, this._websocketClient = o2;\n  }\n  return e3.prototype._registerEventDispatcher = function() {\n    var e4 = this;\n    this._disableWebSocketCloseEventHandling || (this._clearEventDispatcher(), this._sessionEventDispatcherContext = this._sessionManager.on(\"refresh\", function() {\n      e4.isConnecting || e4.isConnected || (e4._logger.debug(\"try reconnect by session key refresh\"), Dr$1(function() {\n        return r$1(e4, void 0, void 0, function() {\n          return s$1(this, function(e5) {\n            switch (e5.label) {\n              case 0:\n                return [4, this.reconnect()];\n              case 1:\n                return e5.sent(), [2];\n            }\n          });\n        });\n      }));\n    }), this._websocketEventDispatcherContext = this._websocketClient.on(\"close\", function() {\n      \"foreground\" !== e4._sdkState.appState || e4._webSocketClosedCause || Dr$1(function() {\n        return r$1(e4, void 0, void 0, function() {\n          return s$1(this, function(e5) {\n            switch (e5.label) {\n              case 0:\n                return this._sessionManager.isSessionKeyRefreshing ? [3, 2] : (this._logger.debug(\"try reconnect by websocket connection closed\"), [4, this.reconnect()]);\n              case 1:\n                return e5.sent(), [3, 4];\n              case 2:\n                return [4, this.disconnectWebSocket()];\n              case 3:\n                e5.sent(), e5.label = 4;\n              case 4:\n                return [2];\n            }\n          });\n        });\n      });\n    }));\n  }, e3.prototype._clearEventDispatcher = function() {\n    this._sessionEventDispatcherContext && (this._sessionEventDispatcherContext.close(), this._sessionEventDispatcherContext = void 0), this._websocketEventDispatcherContext && (this._websocketEventDispatcherContext.close(), this._websocketEventDispatcherContext = void 0);\n  }, Object.defineProperty(e3.prototype, \"isConnected\", { get: function() {\n    return this._context.currentState.type === Rr$1.CONNECTED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"isConnecting\", { get: function() {\n    var e4 = this._context.currentState;\n    return e4.type === Rr$1.CONNECTING || e4.type === Rr$1.RECONNECTING;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"websocketClient\", { get: function() {\n    return this._websocketClient;\n  }, enumerable: false, configurable: true }), e3.prototype.connect = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = this._context.currentState, this._webSocketClosedCause = null, [4, t4.onConnect(this._context, e4)];\n          case 1:\n            return n2.sent(), this._registerEventDispatcher(), [2];\n        }\n      });\n    });\n  }, e3.prototype.reconnect = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 = this._context.currentState, this._webSocketClosedCause = null, [4, e4.onReconnect(this._context, {})];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.resetAndReconnect = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 = this._context.currentState, this._webSocketClosedCause = null, [4, e4.onReconnect(this._context, { resetReconnectCount: true })];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.background = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 = this._context.currentState, this._webSocketClosedCause = us$2.ExternalSetBackground, [4, e4.onDisconnect(this._context, { autoReconnect: false, cause: this._webSocketClosedCause })];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.disconnect = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._context.currentState.onDisconnect(this._context, { error: e4, autoReconnect: true, cause: this._webSocketClosedCause })];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.disconnectWebSocket = function(e4) {\n    return void 0 === e4 && (e4 = false), r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = this._context.currentState, e4 && (this._webSocketClosedCause = us$2.ExternalDisconnectWebSocket), [4, t4.onDisconnectWebSocket(this._context, { cause: this._webSocketClosedCause })];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.logout = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = this._context.currentState, this._clearEventDispatcher(), [4, t4.onLogout(this._context, e4)];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, e3;\n}(), Cs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.authToken, i3 = e3.call(this) || this;\n    return i3.type = Rr$1.CONNECTING, i3.name = \"connecting\", i3._authToken = \"\", i3._callbacks = [], i3._authToken = n3, i3;\n  }\n  return t$2(n2, e3), n2.prototype._halt = function(e4) {\n    this._haltConnect && (this._haltConnect(e4), this._haltConnect = void 0);\n  }, n2.prototype._flushCallbacks = function(e4) {\n    this._haltConnect = void 0, this._callbacks.forEach(function(t4) {\n      return t4(e4);\n    });\n  }, n2.prototype.run = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3, i3, o2 = this;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            t4 = Date.now(), n3 = new rt$1(), this._callbacks.push(function(e5) {\n              return e5 ? n3.reject(e5) : n3.resolve();\n            }), a4.label = 1;\n          case 1:\n            return a4.trys.push([1, 4, , 10]), [4, ws$2(function(t5) {\n              return r$1(o2, void 0, void 0, function() {\n                var n4;\n                return s$1(this, function(i4) {\n                  switch (i4.label) {\n                    case 0:\n                      this._haltConnect = t5, i4.label = 1;\n                    case 1:\n                      return i4.trys.push([1, 3, , 4]), [4, e4.connect(this._authToken)];\n                    case 2:\n                      return i4.sent(), [3, 4];\n                    case 3:\n                      if (n4 = i4.sent(), e4.clearLoginTimer(), n4 instanceof b$2 && n4.code === u$1.CONNECTION_CANCELED) return t5(n4), [2];\n                      throw n4;\n                    case 4:\n                      return [2];\n                  }\n                });\n              });\n            }, e4.sdkState.websocket.connectMaxRetry)];\n          case 2:\n            return a4.sent(), [4, e4.changeState(new Ts$2(), t4)];\n          case 3:\n            return a4.sent(), kr$1(function() {\n              return r$1(o2, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  return this._flushCallbacks(), e4.connectionHandlers.forEach(function(t6) {\n                    t6.onConnected && t6.onConnected(e4.sdkState.userId);\n                  }), [2];\n                });\n              });\n            }), [3, 10];\n          case 4:\n            return i3 = a4.sent(), v$2(i3) ? [3, 8] : [4, e4.disconnect()];\n          case 5:\n            return a4.sent(), i3 instanceof b$2 ? i3.code === u$1.CONNECTION_CANCELED ? [3, 7] : [4, e4.changeState(new Os$2(), t4)] : [3, 7];\n          case 6:\n            a4.sent(), a4.label = 7;\n          case 7:\n            return kr$1(function() {\n              return r$1(o2, void 0, void 0, function() {\n                return s$1(this, function(e5) {\n                  return this._flushCallbacks(i3), [2];\n                });\n              });\n            }), [3, 9];\n          case 8:\n            throw i3;\n          case 9:\n            return [3, 10];\n          case 10:\n            return [2, n3.promise];\n        }\n      });\n    });\n  }, n2.prototype.onConnect = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var e5;\n      return s$1(this, function(t4) {\n        return e5 = new rt$1(), this._callbacks.push(function(t5) {\n          return t5 ? e5.reject(t5) : e5.resolve();\n        }), [2, e5.promise];\n      });\n    });\n  }, n2.prototype.onDisconnect = function(e4, t4) {\n    var n3 = t4.error, i3 = void 0 === n3 ? null : n3, o2 = t4.autoReconnect, a4 = void 0 !== o2 && o2, c3 = t4.cause, u3 = void 0 === c3 ? null : c3;\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n4) {\n        switch (n4.label) {\n          case 0:\n            return t5 = Date.now(), this._halt(null != i3 ? i3 : As$2(u3)), e4.hasSession ? [4, e4.changeState(new bs$2({ autoReconnect: a4 }), t5)] : [3, 2];\n          case 1:\n            return n4.sent(), [3, 4];\n          case 2:\n            return [4, e4.changeState(new gs$2(), t5)];\n          case 3:\n            n4.sent(), n4.label = 4;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.onDisconnectWebSocket = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return this._halt(As$2((null == t4 ? void 0 : t4.cause) || null)), n3 = Date.now(), e4.hasSession ? [4, e4.changeState(new vs$2(), n3)] : [3, 2];\n          case 1:\n            return i3.sent(), [3, 4];\n          case 2:\n            return [4, e4.changeState(new gs$2(), n3)];\n          case 3:\n            i3.sent(), i3.label = 4;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.onLogout = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return n3 = Date.now(), this._halt(null != t4 ? t4 : b$2.connectionCanceled), [4, e4.changeState(new gs$2(), n3)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2);\nfunction As$2(e3) {\n  var t4 = b$2.connectionCanceled;\n  if (e3) {\n    var n2 = null;\n    switch (e3) {\n      case us$2.ExternalSetBackground:\n        n2 = \"Connection has been canceled due to the application having externally moved to background while in ConnectingState.\";\n        break;\n      case us$2.ExternalDisconnectWebSocket:\n        n2 = \"Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState.\";\n    }\n    n2 && t4.setDetail(n2);\n  }\n  return t4;\n}\nvar Is$2, Os$2 = function(e3) {\n  function n2() {\n    var t4 = null !== e3 && e3.apply(this, arguments) || this;\n    return t4.type = Rr$1.INITIALIZED, t4.name = \"initialized\", t4;\n  }\n  return t$2(n2, e3), n2.prototype.onConnect = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return n3 = Date.now(), [4, e4.changeState(new Cs$2({ authToken: t4 }), n3)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.onLogout = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = Date.now(), [4, e4.changeState(new gs$2({ wasPreviouslyConnected: false }), t4)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2;\n}(Es$2), ks$2 = function(e3) {\n  function n2() {\n    return e3.call(this, { code: \"PING\", payload: { id: Date.now(), active: 1 }, ackRequired: false }) || this;\n  }\n  return t$2(n2, e3), n2;\n}(Ge$1), Ds$2 = function() {\n  function e3(e4) {\n    var t4 = e4.pingDelegate, n2 = e4.sdkState, i3 = e4.logger;\n    this.pingDelegate = t4, this.sdkState = n2, this._logger = i3;\n  }\n  return Object.defineProperty(e3.prototype, \"isWaiting\", { get: function() {\n    return !!this._pingTimeoutTimer;\n  }, enumerable: false, configurable: true }), e3.prototype.ping = function() {\n    var e4, t4 = this;\n    if (!this.sdkState.websocket) throw b$2.connectionRequired;\n    var n2 = new ks$2();\n    try {\n      var i3 = null !== (e4 = this.sdkState.websocket.pongTimeout) && void 0 !== e4 ? e4 : 5e3;\n      this._pingTimeoutTimer = setTimeout(function() {\n        t4._logger.debug(\"pinger.ping() timeout\"), t4.pingDelegate.error();\n      }, i3), this.pingDelegate.send(n2), this._logger.debug(\"pinger.ping()\");\n    } catch (e5) {\n      this._logger.debug(\"pinger.ping() error\", e5), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = void 0), this.pingDelegate.error();\n    }\n    return n2;\n  }, e3.prototype.pong = function() {\n    this._logger.debug(\"pinger.pong()\"), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = void 0);\n  }, e3.prototype.refreshTimer = function() {\n    var e4, t4 = this;\n    if (!this.sdkState.websocket) throw b$2.connectionRequired;\n    this._logger.debug(\"pinger.refreshTimer()\");\n    var n2 = null !== (e4 = this.sdkState.websocket.pingInterval) && void 0 !== e4 ? e4 : 15e3;\n    this.stop(), this._pingTimer = setInterval(function() {\n      t4.ping();\n    }, n2);\n  }, e3.prototype.start = function() {\n    this._logger.debug(\"pinger.start()\"), this.refreshTimer(), this.ping();\n  }, e3.prototype.stop = function() {\n    this._logger.debug(\"pinger.stop()\"), this._pingTimer && (clearInterval(this._pingTimer), this._pingTimer = void 0), this._pingTimeoutTimer && (clearTimeout(this._pingTimeoutTimer), this._pingTimeoutTimer = void 0);\n  }, e3;\n}(), Rs$2 = [\"premium_feature_list\", \"file_upload_size_limit\", \"application_attributes\", \"emoji_hash\", \"multiple_file_send_max_size\", \"notifications\", \"message_template\"], Ls$2 = function(e3) {\n  function n2(t4, n3) {\n    var i3, r2 = n3.sdkState, s4 = n3.cacheContext, o2 = n3.connectionHandlers, a4 = n3.sessionManager, c3 = n3.websocketClient, u3 = n3.dispatcher, l2 = n3.logger, h4 = n3.entryState, d4 = void 0 === h4 ? new Os$2() : h4, _2 = this;\n    return (_2 = e3.call(this) || this)._stateUpdatedAt = 0, _2._connectingAt = 0, _2._connectedAt = 0, _2._logiReceivedAt = 0, _2._connectionRequestQueue = [], _2._iid = t4, _2.sdkState = r2, _2.cacheContext = s4, _2.connectionHandlers = o2, _2._sessionManager = a4, _2._websocketClient = c3, _2._dispatcher = u3, _2._logger = l2, _2._currentState = d4, (null === (i3 = _2.sdkState.websocket) || void 0 === i3 ? void 0 : i3.pingerDisabled) || (_2._pinger = new Ds$2({ pingDelegate: { send: function(e4) {\n      return _2._websocketClient.send(e4);\n    }, error: function(e4) {\n      return _2._websocketClient.error(e4);\n    } }, sdkState: _2.sdkState, logger: l2 })), _2._websocketClient.on(\"open\", function() {\n      _2._connectedAt = Date.now(), _2._tryResolveConnectionRequest();\n    }).on(\"message\", function(e4) {\n      if (\"LOGI\" === e4.code) _2.clearLoginTimer(), _2._dispatcher.dispatch(e4.as(ps$2));\n    }).on(\"ping-refresh\", function() {\n      var e4;\n      return null === (e4 = _2._pinger) || void 0 === e4 ? void 0 : e4.refreshTimer();\n    }).on(\"pong\", function() {\n      var e4;\n      return null === (e4 = _2._pinger) || void 0 === e4 ? void 0 : e4.pong();\n    }).on(\"error\", function() {\n      var e4;\n      return null === (e4 = _2._pinger) || void 0 === e4 ? void 0 : e4.stop();\n    }).on(\"close\", function() {\n      _2._logiProcessingTimer = setTimeout(function() {\n        _2._logiProcessingTimer = void 0, _2._unresolvedLogi || _2._rejectConnectionRequest(b$2.networkError);\n      }, 500);\n    }), _2._dispatcher.on(function(e4) {\n      e4 instanceof ps$2 && (_2._unresolvedLogi = e4, _2._tryResolveConnectionRequest());\n    }), _2;\n  }\n  return t$2(n2, e3), Object.defineProperty(n2.prototype, \"currentState\", { get: function() {\n    return this._currentState;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"hasSession\", { get: function() {\n    return this._sessionManager.session.hasSession;\n  }, enumerable: false, configurable: true }), n2.prototype.changeState = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 >= this._stateUpdatedAt ? (this._currentState = e4, this._stateUpdatedAt = t4, this._dispatcher.dispatch(new Fr$1({ stateType: e4.type })), this._logger.debug(\"connection state changes to \".concat(e4.name)), [4, this._currentState.run(this)]) : [3, 2];\n          case 1:\n            return n3.sent(), [2, true];\n          case 2:\n            return [2, false];\n        }\n      });\n    });\n  }, n2.prototype._tryResolveConnectionRequest = function() {\n    var e4;\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return t4 = this._unresolvedLogi, this._websocketClient.isOpen && t4 ? (this._unresolvedLogi = void 0, this._logiReceivedAt = Date.now(), t4.error ? [3, 2] : [4, t4.applyTo(this._iid)]) : [3, 3];\n          case 1:\n            return n3.sent(), this._statLogConnection(), null === (e4 = this._pinger) || void 0 === e4 || e4.start(), this._connectionRequestQueue.forEach(function(e5) {\n              return e5.resolve();\n            }), this._connectionRequestQueue = [], this.sdkState.appState = \"foreground\", [3, 3];\n          case 2:\n            this._sessionManager.session.authToken = void 0, t4.error.isSessionExpiredError || t4.error.isSessionInvalidatedError ? this._dispatcher.dispatch(new Ve$2({ reason: t4.error.code, message: t4.error.message })) : this._logger.warn(\"login failed: \".concat(t4.error)), this._rejectConnectionRequest(t4.error), n3.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype._rejectConnectionRequest = function(e4) {\n    var t4;\n    if (null === (t4 = this._pinger) || void 0 === t4 || t4.stop(), this.clearLoginTimer(), this._connectionRequestQueue.length > 0) {\n      var n3 = this._connectionRequestQueue;\n      this._connectionRequestQueue = [], n3.forEach(function(t5) {\n        return t5.reject(e4);\n      }), this._statLogConnection(e4);\n    }\n  }, n2.prototype._url = function(e4) {\n    var t4, n3 = e4.configTs, i3 = this.sdkState, r2 = i3.appId, s4 = i3.appVersion, o2 = i3.userId, a4 = i3.extensions, c3 = i3.sendbirdRuntimeEnvironment, u3 = this.cacheContext.localCacheEnabled, l2 = this._sessionManager.session, d4 = null === (t4 = this.sdkState.websocket) || void 0 === t4 ? void 0 : t4.compression, _2 = !!(null != a4 ? a4 : {}).sb_uikit, f2 = it$1.userAgentWithExtension(a4);\n    return \"\".concat(this.sdkState.websocket.host, \"/?p=JS&pv=\").concat(encodeURIComponent(h$1.OS_VERSION), \"&sv=\").concat(encodeURIComponent(h$1.SDK_VERSION), \"&ai=\").concat(r2).concat(s4 ? \"&av=\".concat(s4) : \"\").concat(l2.hasSession ? \"\" : \"&user_id=\".concat(encodeURIComponent(o2)), \"&pmce=\").concat(d4 ? 1 : 0, \"&active=1&device_token_types=\").concat(encodeURIComponent([\"gcm\", \"huawei\", \"apns\"].join(\",\")), \"&SB-User-Agent=\").concat(f2, \"&SB-SDK-User-Agent=\").concat(encodeURIComponent(it$1.sendbirdSdkUserAgentWithExtension(c3)), \"&Request-Sent-Timestamp=\").concat(Date.now().toString(), \"&include_extra_data=\").concat(encodeURIComponent(String(Rs$2))).concat(this._sessionManager.handler ? \"&expiring_session=1\" : \"\", \"&use_local_cache=\").concat(u3 ? 1 : 0, \"&include_poll_details=1\").concat(_2 ? \"&uikit_config=1\" : \"\", \"&config_ts=\").concat(n3);\n  }, n2.prototype._statLogConnection = function(e4) {\n    var t4;\n    this._dispatcher.dispatch(new We$2(new $e$1({ type: Me$1.WEBSOCKET_CONNECT, data: { host_url: null === (t4 = this.sdkState.websocket) || void 0 === t4 ? void 0 : t4.host, success: !e4, latency: this._connectedAt > 0 ? this._connectedAt - this._connectingAt : Date.now() - this._connectingAt, logi_latency: this._logiReceivedAt > 0 ? this._logiReceivedAt - this._connectingAt : void 0, error_code: null == e4 ? void 0 : e4.code, error_description: null == e4 ? void 0 : e4.message } })));\n  }, n2.prototype.connect = function(e4) {\n    var t4;\n    return void 0 === e4 && (e4 = \"\"), r$1(this, void 0, void 0, function() {\n      var n3, i3, r2, o2, a4, c3 = this;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._logiProcessingTimer && (clearTimeout(this._logiProcessingTimer), this._logiProcessingTimer = void 0, this._rejectConnectionRequest(b$2.connectionCanceled)), n3 = new rt$1(), this._connectionRequestQueue.push(n3), 1 !== this._connectionRequestQueue.length ? [3, 2] : (this._connectingAt = Date.now(), this._connectedAt = 0, this._logiReceivedAt = 0, this._loginTimer = setTimeout(function() {\n              c3._loginTimer = void 0, c3._rejectConnectionRequest(b$2.loginTimeout);\n            }, null === (t4 = this.sdkState.websocket) || void 0 === t4 ? void 0 : t4.responseTimeout), i3 = this._sessionManager.session, e4 && (i3.authToken = e4, i3.sessionKey = void 0), r2 = 0, [4, this.cacheContext.preference.get(Xr$1(this.sdkState.appId))]);\n          case 1:\n            (o2 = s4.sent()) && (r2 = o2.configTs), a4 = this._url({ configTs: r2 }), i3.sessionKey || i3.authToken ? this._websocketClient.connect(a4, JSON.stringify(i3.hasSession ? { auth: i3.sessionKey } : { token: i3.authToken })) : this._websocketClient.connect(a4, JSON.stringify({})), s4.label = 2;\n          case 2:\n            return [2, n3.promise];\n        }\n      });\n    });\n  }, n2.prototype.cancelConnectForRetry = function() {\n    this._dispatcher.dispatch(ps$2.asError(b$2.connectionRenew));\n  }, n2.prototype.disconnect = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, this._websocketClient.disconnect()];\n          case 1:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.logout = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this.sdkState.userId = void 0, this._unresolvedLogi = void 0, [4, this.disconnect()];\n          case 1:\n            return e4.sent(), [4, this._sessionManager.clear()];\n          case 2:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.clearLoginTimer = function() {\n    this._loginTimer && (clearTimeout(this._loginTimer), this._loginTimer = void 0);\n  }, n2;\n}(ne), xs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.appId, i3 = t4.userId, r2 = t4.includeUIKitConfig, s4 = void 0 !== r2 && r2, o2 = t4.localCacheEnabled, a4 = void 0 === o2 || o2, c3 = t4.expiringSession, u3 = void 0 === c3 || c3, l2 = t4.configTs, h4 = void 0 === l2 ? 0 : l2, d4 = e3.call(this) || this;\n    return d4.path = \"\".concat(le, \"/\").concat(i3, \"/authentication\"), d4.method = ae.POST, d4.params = se({ expiring_session: !!u3, include_logi: true, include_extra_data: String(Rs$2), uikit_config: s4, use_local_cache: a4, app_id: n3, config_ts: h4 }), d4.requireAuth = false, d4;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Us$2 = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.logi = new ps$2(t4, \"LOGI\", n3), i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2);\n!function(e3) {\n  e3[e3.ALL = 0] = \"ALL\", e3[e3.WEBSOCKET = 1] = \"WEBSOCKET\", e3[e3.API = 2] = \"API\";\n}(Is$2 || (Is$2 = {}));\nvar Ps$2, Ms$2, Fs$2 = [je$2, xs$2], qs$2 = function() {\n  function e3(e4, t4) {\n    var n2 = t4.session, i3 = t4.sdkState, r2 = t4.dispatcher, s4 = t4.logger, a4 = t4.useFetchCompat, c3 = void 0 !== a4 && a4, u3 = this;\n    this._currentConnectionStateType = Rr$1.INITIALIZED, this._lazyCallQueue = [], this.commandRouter = new Ur$1(e4, { session: n2, sdkState: i3, dispatcher: r2, logger: s4, useFetchCompat: c3 }), this._session = n2, this._logger = s4, this._dispatcher = r2, this._dispatcher.on(function(e5) {\n      var t5, n3, i4;\n      if (e5 instanceof Fr$1) {\n        var r3 = e5.stateType;\n        switch (u3._currentConnectionStateType = r3, r3) {\n          case Rr$1.CONNECTED:\n            u3._resolveLazyCallQueue();\n            break;\n          case Rr$1.INITIALIZED:\n          case Rr$1.INTERNAL_DISCONNECTED:\n          case Rr$1.EXTERNAL_DISCONNECTED:\n          case Rr$1.LOGOUT:\n            u3._session.isRefreshing || u3._rejectLazyCallQueue((null === (i4 = u3._session) || void 0 === i4 ? void 0 : i4.hasSession) ? b$2.connectionClosed : b$2.connectionRequired);\n        }\n      } else if (e5 instanceof qr$1) u3._session.hasChatServicePermission || u3._resolveLazyCallQueue(Is$2.API);\n      else if (e5 instanceof Hr$1 || e5 instanceof Vr$1) u3._rejectLazyCallQueue(b$2.connectionClosed);\n      else if (e5 instanceof Ze$2) {\n        var s5 = e5.request, a5 = e5.deferred, c4 = e5.error;\n        try {\n          for (var l2 = o(Fs$2), h4 = l2.next(); !h4.done; h4 = l2.next()) {\n            if (s5 instanceof h4.value) return void a5.reject(c4);\n          }\n        } catch (e6) {\n          t5 = { error: e6 };\n        } finally {\n          try {\n            h4 && !h4.done && (n3 = l2.return) && n3.call(l2);\n          } finally {\n            if (t5) throw t5.error;\n          }\n        }\n        u3._lazyCallQueue.push({ command: s5, deferred: a5 });\n      }\n    });\n  }\n  return Object.defineProperty(e3.prototype, \"isReady\", { get: function() {\n    return this._currentConnectionStateType === Rr$1.CONNECTED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"isLazyCallActivated\", { get: function() {\n    return this._currentConnectionStateType === Rr$1.CONNECTING || this._currentConnectionStateType === Rr$1.RECONNECTING || this._session.isRefreshing;\n  }, enumerable: false, configurable: true }), e3.prototype._classifyLazyCallQueueByScope = function(e4) {\n    var t4, n2 = [], i3 = [];\n    switch (e4) {\n      case Is$2.ALL:\n        t4 = null;\n        break;\n      case Is$2.WEBSOCKET:\n        t4 = Ge$1;\n        break;\n      case Is$2.API:\n        t4 = Fe$2;\n    }\n    var r2 = false;\n    return this._lazyCallQueue.forEach(function(e5) {\n      !t4 || e5.command instanceof t4 || (r2 = true), r2 ? i3.push(e5) : n2.push(e5);\n    }), [n2, i3];\n  }, e3.prototype._resolveLazyCallQueue = function(e4) {\n    var t4 = this;\n    void 0 === e4 && (e4 = Is$2.ALL);\n    var n2 = a$1(this._classifyLazyCallQueueByScope(e4), 2), i3 = n2[0], o2 = n2[1];\n    this._lazyCallQueue = o2, i3.forEach(function(e5) {\n      return r$1(t4, void 0, void 0, function() {\n        var t5, n3, i4, r2, o3;\n        return s$1(this, function(s4) {\n          switch (s4.label) {\n            case 0:\n              t5 = e5.command, n3 = e5.deferred, (i4 = e5.timeout) && clearTimeout(i4), s4.label = 1;\n            case 1:\n              return s4.trys.push([1, 3, , 4]), [4, this.send(t5)];\n            case 2:\n              return r2 = s4.sent(), n3.resolve(r2), [3, 4];\n            case 3:\n              return o3 = s4.sent(), n3.reject(o3), [3, 4];\n            case 4:\n              return [2];\n          }\n        });\n      });\n    });\n  }, e3.prototype._rejectLazyCallQueue = function(e4, t4) {\n    var n2 = this;\n    void 0 === t4 && (t4 = Is$2.ALL);\n    var i3 = a$1(this._classifyLazyCallQueueByScope(t4), 2), o2 = i3[0], c3 = i3[1];\n    this._lazyCallQueue = c3, o2.forEach(function(t5) {\n      return r$1(n2, void 0, void 0, function() {\n        var n3, i4;\n        return s$1(this, function(r2) {\n          return n3 = t5.deferred, i4 = t5.timeout, clearTimeout(i4), n3.reject(e4), [2];\n        });\n      });\n    });\n  }, e3.prototype.send = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i3 = this;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e4 instanceof Ge$1 ? this.isReady ? (this._logger.debug(\"send websocket request\", e4), [4, this.commandRouter.send(e4)]) : [3, 2] : [3, 4];\n          case 1:\n          case 5:\n          case 7:\n            return [2, r2.sent()];\n          case 2:\n            if (this.isLazyCallActivated) return this._logger.debug(\"wait websocket request\", e4), t4 = new rt$1(), this._lazyCallQueue.push({ command: e4, deferred: t4, timeout: setTimeout(function() {\n              return i3.timeout(e4.requestId);\n            }, 1e4) }), [2, t4.promise];\n            throw this._logger.debug(\"fail websocket request\"), b$2.connectionRequired;\n          case 3:\n          case 9:\n            return [3, 11];\n          case 4:\n            return e4 instanceof Fe$2 ? this._session.hasSession ? (this._logger.debug(\"send api request\", e4), [4, this.commandRouter.send(e4)]) : [3, 6] : [3, 10];\n          case 6:\n            return e4.hasSessionKey ? (this._logger.debug(\"send api request with tmp session key\", e4), [4, this.commandRouter.send(e4)]) : [3, 8];\n          case 8:\n            if (this.isLazyCallActivated) return this._logger.debug(\"wait api request\", e4), t4 = new rt$1(), this._lazyCallQueue.push({ command: e4, deferred: t4, timeout: setTimeout(function() {\n              return i3.timeout(e4.requestId);\n            }, 1e4) }), [2, t4.promise];\n            throw n2 = b$2.connectionRequired, this._logger.debug(\"fail api request\", n2), n2;\n          case 10:\n            throw b$2.invalidCommand;\n          case 11:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.forceSend = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._logger.debug(\"send forced request\", e4), e4 instanceof Ge$1 || e4 instanceof Fe$2 ? [4, this.commandRouter.send(e4)] : [3, 2];\n          case 1:\n            return [2, t4.sent()];\n          case 2:\n            throw b$2.invalidCommand;\n        }\n      });\n    });\n  }, e3.prototype.timeout = function(e4) {\n    this._logger.debug(\"timeout request\", e4);\n    var t4 = this._lazyCallQueue.findIndex(function(t5) {\n      return t5.command.requestId === e4;\n    });\n    t4 > -1 && (this._lazyCallQueue[t4].deferred.reject(b$2.connectionRequired), this._lazyCallQueue.splice(t4, 1));\n  }, e3.prototype.cancel = function(e4) {\n    this._logger.debug(\"cancel api request\", e4), this.commandRouter.cancel(e4);\n  }, e3.prototype.cancelAll = function() {\n    this._logger.debug(\"cancel all api requests\"), this.commandRouter.cancelAll();\n  }, e3;\n}(), Hs$2 = \"sendbird@devicetokens\", Vs$2 = function() {\n  function e3(e4) {\n    var t4 = e4.type, n2 = e4.token, i3 = e4.device_os, r2 = e4.device_manufacturer, s4 = e4.system_push_enabled;\n    this.type = t4, this.token = n2, this.deviceOS = i3, this.deviceManufacturer = r2, this.systemPushEnabled = s4;\n  }\n  return e3.payloadify = function(e4) {\n    return se(oe({ type: e4.type, token: e4.token, device_os: e4.deviceOS, device_manufacturer: e4.deviceManufacturer, system_push_enabled: e4.systemPushEnabled }));\n  }, e3;\n}(), zs$2 = /* @__PURE__ */ new WeakMap(), Gs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4._iid, i3 = t4.session, r2 = t4.cacheContext, s4 = t4.sdkState, o2 = t4.dispatcher, a4 = t4.requestQueue, c3 = t4.logger, u3 = t4.pushNotificationAckManager, l2 = e3.call(this) || this;\n    return l2._currentConnectionStateType = Rr$1.INITIALIZED, l2._isRefreshingAuthToken = false, l2.currentUser = null, l2.session = i3, l2._iid = n3, l2._cacheContext = r2, l2._sdkState = s4, l2._dispatcher = o2, l2._requestQueue = a4, l2._logger = c3, l2._pushNotificationAckManager = u3, l2._deviceTokens = [], l2._dispatcher.on(function(e4) {\n      var t5, n4, i4;\n      if (e4 instanceof Fr$1) {\n        var r3 = e4.stateType;\n        l2._currentConnectionStateType = r3;\n      } else if (e4 instanceof Ve$2 && l2.handler && !l2.isSessionKeyRefreshing) {\n        if (l2._currentConnectionStateType === Rr$1.CONNECTING) return;\n        (null === (t5 = e4.error) || void 0 === t5 ? void 0 : t5.isSessionInvalidatedError) ? l2.close() : ((null === (n4 = e4.error) || void 0 === n4 ? void 0 : n4.isSessionTokenExpiredError) && l2.refreshAuthToken().catch(function(e5) {\n          if (v$2(e5) && \"foreground\" === l2._sdkState.appState) throw e5;\n        }), (null === (i4 = e4.error) || void 0 === i4 ? void 0 : i4.isSessionKeyExpiredError) && (l2._logger.debug(\"session expired\"), l2.handler.onSessionExpired && l2.handler.onSessionExpired(), l2.refreshSessionKey().catch(function(e5) {\n          if (v$2(e5) && \"foreground\" === l2._sdkState.appState) throw e5;\n        })));\n      }\n    }), l2;\n  }\n  return t$2(n2, e3), Object.defineProperty(n2.prototype, \"ekey\", { get: function() {\n    return zs$2.get(this);\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"deviceTokens\", { get: function() {\n    return this._deviceTokens;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"deviceTokenLastDeletedAt\", { get: function() {\n    return this._deviceTokenLastDeletedAt;\n  }, enumerable: false, configurable: true }), n2.prototype.indexOfDeviceToken = function(e4, t4) {\n    return this._deviceTokens.findIndex(function(n3) {\n      return n3.type === e4 && n3.token === t4;\n    });\n  }, n2.prototype.hasDeviceToken = function(e4, t4) {\n    return this.indexOfDeviceToken(e4, t4) >= 0;\n  }, n2.prototype.createRefreshWebsocketCommand = function(e4, t4) {\n    return new Ke$2({ authToken: e4, expiringSession: true, requestId: t4 });\n  }, n2.prototype._refreshSessionKeyByWebSocket = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3, i3, r2, o2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return t4 = this.createRefreshWebsocketCommand(e4), [4, this._requestQueue.forceSend(t4)];\n          case 1:\n            if (n3 = s4.sent(), i3 = n3.as(Qe$2), r2 = i3.newKey, o2 = i3.error) throw o2;\n            return this.session.sessionKey = null != r2 ? r2 : this.session.sessionKey, [2];\n        }\n      });\n    });\n  }, n2.prototype._refreshSessionKeyByApi = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3 = this;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t4 = new je$2({ userId: this._sdkState.userId, authToken: e4, services: this.session.services && this.session.services.length > 0 ? this.session.services : void 0, expiringSession: true }), [4, ws$2(function(e5) {\n              return r$1(n3, void 0, void 0, function() {\n                var n4, i4, r2, o2, a4;\n                return s$1(this, function(s4) {\n                  switch (s4.label) {\n                    case 0:\n                      return s4.trys.push([0, 2, , 3]), [4, this._requestQueue.forceSend(t4)];\n                    case 1:\n                      return n4 = s4.sent(), i4 = n4.as(Be$2), r2 = i4.key, o2 = i4.services, this.session.sessionKey = r2, this.session.services = o2, [3, 3];\n                    case 2:\n                      if (a4 = s4.sent(), !this._isSessionRelatedError(a4)) throw a4;\n                      return e5(a4), [3, 3];\n                    case 3:\n                      return [2];\n                  }\n                });\n              });\n            }, 3)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype._refreshSessionKey = function(e4, t4) {\n    return void 0 === t4 && (t4 = true), r$1(this, void 0, void 0, function() {\n      var n3, i3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            if (this._currentConnectionStateType !== Rr$1.CONNECTED) return [3, 8];\n            r2.label = 1;\n          case 1:\n            return r2.trys.push([1, 3, , 8]), [4, this._refreshSessionKeyByWebSocket(e4)];\n          case 2:\n            return r2.sent(), this.complete(), [2];\n          case 3:\n            n3 = r2.sent(), r2.label = 4;\n          case 4:\n            return r2.trys.push([4, 6, , 7]), [4, this._handleSessionRefreshError(n3, t4)];\n          case 5:\n            return r2.sent(), [2];\n          case 6:\n            return r2.sent(), [3, 7];\n          case 7:\n            return [3, 8];\n          case 8:\n            return r2.trys.push([8, 10, , 12]), [4, this._refreshSessionKeyByApi(e4)];\n          case 9:\n            return r2.sent(), this.complete(), [3, 12];\n          case 10:\n            return i3 = r2.sent(), [4, this._handleSessionRefreshError(i3, t4)];\n          case 11:\n            return r2.sent(), [3, 12];\n          case 12:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype._receiveNewAuthToken = function() {\n    var e4, t4 = this, n3 = new rt$1();\n    if (this._isRefreshingAuthToken = true, this.session.sessionKey = void 0, this.session.authToken = void 0, null === (e4 = this.handler) || void 0 === e4 ? void 0 : e4.onSessionTokenRequired) {\n      var i3 = null, o2 = function() {\n        i3 && (clearTimeout(i3), i3 = null);\n      }, a4 = function(e5) {\n        o2(), t4._isRefreshingAuthToken && (t4._isRefreshingAuthToken = false, n3.resolve(e5));\n      }, c3 = function(e5) {\n        o2(), t4._isRefreshingAuthToken && (t4._isRefreshingAuthToken = false, n3.reject(e5));\n      };\n      i3 = setTimeout(function() {\n        return c3();\n      }, 1e3 * this._sdkState.sessionTokenRefreshTimeout), kr$1(function() {\n        return r$1(t4, void 0, void 0, function() {\n          var e5;\n          return s$1(this, function(t5) {\n            return (null === (e5 = this.handler) || void 0 === e5 ? void 0 : e5.onSessionTokenRequired) && this.handler.onSessionTokenRequired(a4, c3), [2];\n          });\n        });\n      });\n    } else n3.resolve(null);\n    return n3.promise;\n  }, n2.prototype._handleSessionRefreshError = function(e4, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e4 instanceof b$2 && (e4.isSessionTokenExpiredError || e4.code === u$1.APPLICATION_NOT_FOUND) ? (this.session.authToken = void 0, t4 ? [4, this._receiveNewAuthToken()] : [3, 6]) : [3, 6];\n          case 1:\n            return (n3 = i3.sent()) ? (this.session.authToken = n3, [4, this._refreshSessionKey(this.session.authToken, false)]) : [3, 3];\n          case 2:\n            return i3.sent(), [3, 5];\n          case 3:\n            return [4, this.clear()];\n          case 4:\n            i3.sent(), i3.label = 5;\n          case 5:\n            return [2];\n          case 6:\n            throw e4;\n        }\n      });\n    });\n  }, n2.prototype._isSessionRelatedError = function(e4) {\n    return e4 instanceof b$2 && (e4.isSessionExpiredError || e4.isSessionInvalidatedError);\n  }, Object.defineProperty(n2.prototype, \"isSessionKeyRefreshing\", { get: function() {\n    return this.session.isRefreshing;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isRefreshingAuthToken\", { get: function() {\n    return this._isRefreshingAuthToken;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSessionExpiring\", { get: function() {\n    return !!this.handler;\n  }, enumerable: false, configurable: true }), n2.prototype.authenticate = function(e4, t4) {\n    var n3;\n    return r$1(this, void 0, void 0, function() {\n      var i3, r2, o2, a4, c3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this.session.authToken = t4, i3 = 0, [4, this._cacheContext.preference.get(Xr$1(this._sdkState.appId))];\n          case 1:\n            return (r2 = s4.sent()) && (i3 = r2.configTs), o2 = new xs$2({ appId: this._sdkState.appId, userId: e4, includeUIKitConfig: !!(null !== (n3 = this._sdkState.extensions) && void 0 !== n3 ? n3 : {}).sb_uikit, localCacheEnabled: this._cacheContext.localCacheEnabled, expiringSession: this.isSessionExpiring, configTs: i3 }), [4, this._requestQueue.commandRouter.send(o2)];\n          case 2:\n            return a4 = s4.sent(), (c3 = a4.as(Us$2).logi).error ? [3, 5] : this.session.hasChatServicePermission ? [3, 4] : [4, c3.applyTo(this._iid)];\n          case 3:\n            s4.sent(), s4.label = 4;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw c3.error;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.login = function(e4) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      var n3, i3, r2, o2, a4, c3, u3, l2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return n3 = e4.key, i3 = e4.ekey, r2 = e4.services, o2 = e4.userProfile, a4 = e4.deviceTokenLastDeletedAt, c3 = void 0 === a4 ? 0 : a4, this.session.sessionKey = n3, this.session.services = r2, zs$2.set(this, i3), this._deviceTokenCacheEnabled = null === (t4 = null == o2 ? void 0 : o2.appInfo) || void 0 === t4 ? void 0 : t4.deviceTokenCache, u3 = this._cacheContext.preference, this._deviceTokenCacheEnabled ? [4, u3.get(Hs$2)] : [3, 5];\n          case 1:\n            return !(l2 = s4.sent()) || l2.lastDeletedAt < c3 ? (this._deviceTokens = [], this._deviceTokenLastDeletedAt = c3, [4, this.saveDeviceToken()]) : [3, 3];\n          case 2:\n            return s4.sent(), [3, 4];\n          case 3:\n            this._deviceTokens = l2.tokens.map(function(e5) {\n              return new Vs$2(Vs$2.payloadify(e5));\n            }), this._deviceTokenLastDeletedAt = l2.lastDeletedAt, s4.label = 4;\n          case 4:\n            return [3, 7];\n          case 5:\n            return [4, u3.remove(Hs$2)];\n          case 6:\n            s4.sent(), s4.label = 7;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.complete = function() {\n    var e4 = this;\n    this.dispatch(\"refresh\"), this._dispatcher.dispatch(new qr$1()), kr$1(function() {\n      return r$1(e4, void 0, void 0, function() {\n        var e5;\n        return s$1(this, function(t4) {\n          return this._logger.debug(\"session refreshed\"), (null === (e5 = this.handler) || void 0 === e5 ? void 0 : e5.onSessionRefreshed) && this.handler.onSessionRefreshed(), [2];\n        });\n      });\n    });\n  }, n2.prototype.error = function(e4) {\n    var t4 = this;\n    kr$1(function() {\n      return r$1(t4, void 0, void 0, function() {\n        var t5;\n        return s$1(this, function(n3) {\n          return (null === (t5 = this.handler) || void 0 === t5 ? void 0 : t5.onSessionError) && this.handler.onSessionError(e4), [2];\n        });\n      });\n    });\n  }, n2.prototype.close = function() {\n    var e4 = this;\n    this.dispatch(\"close\"), this._dispatcher.dispatch(new Vr$1()), kr$1(function() {\n      return r$1(e4, void 0, void 0, function() {\n        var e5;\n        return s$1(this, function(t4) {\n          return this._logger.debug(\"session closed\"), (null === (e5 = this.handler) || void 0 === e5 ? void 0 : e5.onSessionClosed) && this.handler.onSessionClosed(), [2];\n        });\n      });\n    });\n  }, n2.prototype.refreshAuthToken = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            if (e4 = null, !this.isSessionExpiring || this.session.isRefreshing) return [3, 9];\n            this.session.isRefreshing = true, n3.label = 1;\n          case 1:\n            return n3.trys.push([1, 7, 8, 9]), [4, this._receiveNewAuthToken()];\n          case 2:\n            return (e4 = n3.sent()) ? (this._logger.debug(\"session refreshing..\"), this.session.authToken = e4, [4, this._refreshSessionKey(this.session.authToken)]) : [3, 4];\n          case 3:\n            return n3.sent(), [3, 6];\n          case 4:\n            return [4, this.clear()];\n          case 5:\n            n3.sent(), n3.label = 6;\n          case 6:\n            return [3, 9];\n          case 7:\n            throw n3.sent(), t4 = e4 ? b$2.sessionTokenRefreshFailed : b$2.sessionTokenRequestFailed, this._dispatcher.dispatch(new Hr$1()), this.error(t4), this._logger.debug(\"refresh auth token error = \", t4), t4;\n          case 8:\n            return this.session.isRefreshing = false, [7];\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.refreshSessionKey = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            if (!this.isSessionExpiring || this.session.isRefreshing) return [3, 5];\n            this.session.isRefreshing = true, t4.label = 1;\n          case 1:\n            return t4.trys.push([1, 3, 4, 5]), [4, this._refreshSessionKey(this.session.authToken)];\n          case 2:\n            return t4.sent(), [3, 5];\n          case 3:\n            throw t4.sent(), e4 = b$2.sessionTokenRefreshFailed, this._dispatcher.dispatch(new Hr$1()), this.error(e4), e4;\n          case 4:\n            return this.session.isRefreshing = false, [7];\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.setDeviceToken = function(e4, t4, n3) {\n    if (this._deviceTokenCacheEnabled && this.indexOfDeviceToken(e4, t4) < 0) {\n      var i3 = new Vs$2({ type: e4, token: t4, device_os: null == n3 ? void 0 : n3.deviceOS, device_manufacturer: null == n3 ? void 0 : n3.deviceManufacturer, system_push_enabled: null == n3 ? void 0 : n3.systemPushEnabled });\n      return this._deviceTokens.push(i3), true;\n    }\n    return false;\n  }, n2.prototype.unsetDeviceToken = function(e4, t4) {\n    if (this._deviceTokenCacheEnabled) {\n      var n3 = this.indexOfDeviceToken(e4, t4);\n      n3 >= 0 && this._deviceTokens.splice(n3, 1);\n    }\n  }, n2.prototype.unsetDeviceTokens = function(e4) {\n    this._deviceTokenCacheEnabled && (this._deviceTokens = e4 ? this._deviceTokens.filter(function(t4) {\n      return t4.type !== e4;\n    }) : []);\n  }, n2.prototype.setDeviceTokenDeletedAt = function(e4) {\n    e4 > 0 && (this._deviceTokenLastDeletedAt = e4);\n  }, n2.prototype.saveDeviceToken = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this._deviceTokenCacheEnabled ? [4, this._cacheContext.preference.set(Hs$2, { tokens: this._deviceTokens, lastDeletedAt: this._deviceTokenLastDeletedAt })] : [3, 2];\n          case 1:\n            e4.sent(), e4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this.currentUser = null, this.session.clear(), this.close(), zs$2.delete(this), this._deviceTokens = [], this._deviceTokenLastDeletedAt = 0, [4, this.saveDeviceToken()];\n          case 1:\n            return e4.sent(), this._pushNotificationAckManager.clear(), [2];\n        }\n      });\n    });\n  }, n2;\n}(ne), js$2 = function(e3, t4) {\n  var n2, i3;\n  if (null !== e3 && null !== t4) {\n    var r2 = Object.keys(e3), s4 = Object.keys(t4), u3 = c([], a$1(new Set(c(c([], a$1(r2), false), a$1(s4), false))), false), l2 = {};\n    try {\n      for (var h4 = o(u3), d4 = h4.next(); !d4.done; d4 = h4.next()) {\n        var _2 = d4.value, f2 = typeof e3[_2], p2 = typeof t4[_2];\n        \"undefined\" === f2 ? l2[_2] = t4[_2] : \"undefined\" === p2 ? l2[_2] = e3[_2] : f2 !== p2 ? l2[_2] = t4[_2] : \"object\" === f2 && e3[_2] && t4[_2] ? l2[_2] = js$2(e3[_2], t4[_2]) : l2[_2] = t4[_2];\n      }\n    } catch (e4) {\n      n2 = { error: e4 };\n    } finally {\n      try {\n        d4 && !d4.done && (i3 = h4.return) && i3.call(h4);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n    return l2;\n  }\n  return t4;\n};\n!function(e3) {\n  e3[e3.PENDING = 0] = \"PENDING\", e3[e3.COLLECT_ONLY = 1] = \"COLLECT_ONLY\", e3[e3.ENABLED = 2] = \"ENABLED\", e3[e3.DISABLED = 3] = \"DISABLED\";\n}(Ps$2 || (Ps$2 = {})), function(e3) {\n  e3.DAILY = \"daily\", e3.DEFAULT = \"default\", e3.REALTIME = \"realtime\";\n}(Ms$2 || (Ms$2 = {}));\nvar Ks$2, Bs$2 = 100, Qs$2 = function() {\n  function e3(e4) {\n    var t4 = e4.deviceId, n2 = e4.cacheContext, i3 = e4.requestQueue;\n    this.queue = [], this.flushWaitQueue = [], this.enabledState = Ps$2.PENDING, this.isFlushing = false, this._sentLogStats = [], this.deviceId = t4, this.cacheContext = n2, this.requestQueue = i3, this.logInfo = { deviceId: t4, statLogs: [], generation: 1, lastFlushedAt: 0 }, this.limit = Bs$2;\n  }\n  return Object.defineProperty(e3.prototype, \"isEnabled\", { get: function() {\n    return this.enabledState === Ps$2.ENABLED;\n  }, enumerable: false, configurable: true }), e3.prototype.init = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.key = e4, [4, this.cacheContext.preference.get(this.key)];\n          case 1:\n            return (t4 = n2.sent()) && (this.logInfo = t4), [2];\n        }\n      });\n    });\n  }, e3.prototype._mergeQueue = function() {\n    this.flushWaitQueue.length > 0 && (this.queue = this.queue.concat(this.flushWaitQueue), this.flushWaitQueue = []);\n  }, e3.prototype._isDuplicateStat = function(e4) {\n    var t4 = this._sentLogStats.find(function(t5) {\n      var n2;\n      return t5.channelUrl === e4.data.channel_url && t5.messageId === (null !== (n2 = e4.data.notificationId) && void 0 !== n2 ? n2 : e4.data.message_id) && t5.action === e4.data.action;\n    });\n    return t4 || this._sentLogStats.push({ channelUrl: e4.data.channel_url, messageId: e4.data.message_id, action: e4.data.action }), !!t4;\n  }, e3.prototype._save = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 = c(c([], a$1(this.queue), false), a$1(this.flushWaitQueue), false), [4, this.cacheContext.preference.set(this.key, { deviceId: this.logInfo.deviceId, statLogs: e4.map(function(e5) {\n              return $e$1.payloadify(e5);\n            }), generation: this.logInfo.generation++, lastFlushedAt: this.logInfo.lastFlushedAt })];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        return this.queue = [], this.flushWaitQueue = [], this.logInfo.generation = 1, this._save(), [2];\n      });\n    });\n  }, e3;\n}(), Ws$2 = function(e3) {\n  function n2(t4) {\n    var n3, i3, r2, s4, o2 = t4.type, a4 = t4.data, c3 = t4.ts, u3 = void 0 === c3 ? Date.now() : c3, l2 = e3.call(this, { type: o2, data: a4, ts: u3 }) || this;\n    return l2.date = new Date(u3), l2.key = \"\".concat((n3 = l2.date, i3 = n3.getFullYear(), r2 = String(n3.getMonth() + 1).padStart(2, \"0\"), s4 = String(n3.getDate()).padStart(2, \"0\"), \"\".concat(i3).concat(r2).concat(s4)), \"_\").concat(o2), l2;\n  }\n  return t$2(n2, e3), n2;\n}($e$1), Zs$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.deviceId, i3 = t4.statLogs, r2 = e3.call(this) || this;\n    return r2.method = ae.POST, r2.path = \"\".concat(Se), r2.params = { device_id: n3, log_entries: i3.map(function(e4) {\n      return $e$1.payloadify(e4);\n    }) }, r2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Ys$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.deviceId, i3 = t4.cacheContext, r2 = t4.requestQueue;\n    return e3.call(this, { deviceId: n3, cacheContext: i3, requestQueue: r2 }) || this;\n  }\n  return t$2(n2, e3), Object.defineProperty(n2.prototype, \"_isSendable\", { get: function() {\n    return 0 !== this.queue.length && Date.now() - this.logInfo.lastFlushedAt >= this.statConfig.minInterval;\n  }, enumerable: false, configurable: true }), n2.prototype.init = function(t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return [4, e3.prototype.init.call(this, t4 + \".daily\")];\n          case 1:\n            return n3.sent(), this.queue = this.logInfo.statLogs.map(function(e4) {\n              return new $e$1({ type: e4.stat_type, ts: e4.ts, data: e4.data });\n            }), [2];\n        }\n      });\n    });\n  }, n2.prototype.setConfig = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3, i3, r2, o2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this.statConfig = e4, this.statConfig.minInterval = 864e5, this._mergeQueue(), t4.localCacheStat ? (this.enabledState = t4.enabledStat ? Ps$2.ENABLED : Ps$2.COLLECT_ONLY, [3, 3]) : [3, 1];\n          case 1:\n            return this.enabledState = Ps$2.DISABLED, [4, this.clear()];\n          case 2:\n            s4.sent(), s4.label = 3;\n          case 3:\n            return this.isEnabled && this._isSendable ? [4, this._getUploadStats()] : [3, 9];\n          case 4:\n            n3 = s4.sent(), i3 = Math.max(Math.floor(Math.random() * this.statConfig.requestDelayRange), 100), r2 = 0, s4.label = 5;\n          case 5:\n            return r2 < n3.length ? (o2 = n3.slice(r2, 1 + this.statConfig.maxStatCountPerRequest), [4, ms$2(i3)]) : [3, 9];\n          case 6:\n            return s4.sent(), [4, this._flush(o2)];\n          case 7:\n            s4.sent(), s4.label = 8;\n          case 8:\n            return r2 += this.statConfig.maxStatCountPerRequest, [3, 5];\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.put = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3, i3, r2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this.enabledState === Ps$2.DISABLED ? [2, true] : (t4 = this.enabledState === Ps$2.PENDING || this.isFlushing ? this.flushWaitQueue : this.queue, n3 = a$1(t4.filter(function(t5) {\n              return t5 instanceof Ws$2 && t5.key === e4.key;\n            }), 1), (i3 = n3[0]) ? i3.data = js$2(i3.data, e4.data) : t4.push(e4), this.enabledState === Ps$2.PENDING ? [3, 2] : [4, this._save()]);\n          case 1:\n            s4.sent(), s4.label = 2;\n          case 2:\n            return this.isEnabled ? (this._mergeQueue(), this._isSendable ? [4, this._getUploadStats()] : [3, 5]) : [3, 5];\n          case 3:\n            return r2 = s4.sent(), [4, this._flush(r2)];\n          case 4:\n            return [2, s4.sent()];\n          case 5:\n            return [2, true];\n        }\n      });\n    });\n  }, n2.prototype._getUploadStats = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        return e4 = this.queue.filter(function(e5) {\n          if (e5 instanceof Ws$2) {\n            var t5 = /* @__PURE__ */ new Date(), n3 = a$1([e5.date.getFullYear(), t5.getFullYear()], 2), i3 = n3[0], r2 = n3[1];\n            if (i3 < r2) return true;\n            if (i3 === r2) {\n              var s4 = a$1([e5.date.getMonth(), t5.getMonth()], 2), o2 = s4[0], c3 = s4[1];\n              if (o2 < c3) return true;\n              if (o2 === c3) {\n                var u3 = a$1([e5.date.getDate(), t5.getDate()], 2);\n                return u3[0] < u3[1];\n              }\n            }\n          }\n          return false;\n        }), [2, e4];\n      });\n    });\n  }, n2.prototype._flush = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3, i3, r2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            if (t4 = true, !(e4.length > 0)) return [3, 10];\n            if (this.isFlushing) return [3, 9];\n            this.isFlushing = true, s4.label = 1;\n          case 1:\n            return s4.trys.push([1, 4, 8, 9]), n3 = c([], a$1(e4), false).slice(0, Math.min(this.limit, this.statConfig.maxStatCountPerRequest)), i3 = new Zs$2({ deviceId: this.deviceId, statLogs: n3 }), [4, this.requestQueue.send(i3)];\n          case 2:\n            return s4.sent(), this.queue = c([], a$1(e4), false).slice(n3.length).concat(this.flushWaitQueue), this.flushWaitQueue = [], this.limit = Bs$2, this.logInfo.lastFlushedAt = Date.now(), [4, this._save()];\n          case 3:\n            return s4.sent(), [3, 9];\n          case 4:\n            return (r2 = s4.sent()) instanceof b$2 ? r2.code !== u$1.NON_AUTHORIZED ? [3, 6] : [4, this.clear()] : [3, 7];\n          case 5:\n            return s4.sent(), this.enabledState = Ps$2.DISABLED, [3, 7];\n          case 6:\n            r2.code === u$1.STAT_UPLOAD_NOT_ALLOWED && (this.enabledState = Ps$2.COLLECT_ONLY), s4.label = 7;\n          case 7:\n            return this.limit = this.limit + 20, t4 = false, [3, 9];\n          case 8:\n            return this.isFlushing = false, [7];\n          case 9:\n            return [3, 11];\n          case 10:\n            this.isFlushing = false, s4.label = 11;\n          case 11:\n            return [2, t4];\n        }\n      });\n    });\n  }, n2;\n}(Qs$2), Xs$2 = function(e3) {\n  function i3(t4) {\n    var n2 = t4.deviceId, i4 = t4.cacheContext, r2 = t4.requestQueue;\n    return e3.call(this, { deviceId: n2, cacheContext: i4, requestQueue: r2 }) || this;\n  }\n  return t$2(i3, e3), i3.prototype._isSendable = function(e4) {\n    if (void 0 === e4 && (e4 = false), this.queue.length < this.statConfig.lowerThreshold) return false;\n    if (e4) {\n      if (Date.now() - this.logInfo.lastFlushedAt < this.statConfig.minInterval) return false;\n    } else if (this.queue.length < this.statConfig.minStatCount) return false;\n    return true;\n  }, i3.prototype._filterQueueByType = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, t4 ? e4.filter(function(e5) {\n          return e5.type !== Me$1.FEATURE_LOCALCACHE_EVENT;\n        }) : e4.filter(function(e5) {\n          return e5.type === Me$1.FEATURE_LOCALCACHE_EVENT;\n        })];\n      });\n    });\n  }, i3.prototype.init = function(t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return [4, e3.prototype.init.call(this, t4 + \".default\")];\n          case 1:\n            return i4.sent(), this.queue = this.logInfo.statLogs.map(function(e4) {\n              return e4.data = n$2({ message_init_policy: \"\", starting_point: 0 }, e4.data), new $e$1({ type: e4.stat_type, ts: e4.ts, data: e4.data });\n            }), [2];\n        }\n      });\n    });\n  }, i3.prototype.setConfig = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, i4, r2, o2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this.statConfig = e4, this._mergeQueue(), t4.requestStat || t4.localCacheStat ? (this.enabledState = t4.enabledStat ? Ps$2.ENABLED : Ps$2.COLLECT_ONLY, n2 = void 0, t4.requestStat || (n2 = false), t4.localCacheStat || (n2 = true), void 0 === n2 ? [3, 3] : (i4 = this, [4, this._filterQueueByType(this.queue, n2)])) : [3, 4];\n          case 1:\n            return i4.queue = s4.sent(), r2 = this, [4, this._filterQueueByType(this.flushWaitQueue, n2)];\n          case 2:\n            r2.flushWaitQueue = s4.sent(), this._save(), s4.label = 3;\n          case 3:\n            return [3, 6];\n          case 4:\n            return this.enabledState = Ps$2.DISABLED, [4, this.clear()];\n          case 5:\n            s4.sent(), s4.label = 6;\n          case 6:\n            return this.isEnabled && this._isSendable(true) ? (o2 = Math.max(Math.floor(Math.random() * this.statConfig.requestDelayRange), 100), [4, ms$2(o2)]) : [3, 9];\n          case 7:\n            return s4.sent(), [4, this._flush(this.queue)];\n          case 8:\n            s4.sent(), s4.label = 9;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.put = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.enabledState === Ps$2.DISABLED ? [2, true] : ((t4 = this.enabledState === Ps$2.PENDING || this.isFlushing ? this.flushWaitQueue : this.queue).push(e4), this.enabledState === Ps$2.PENDING ? [3, 2] : [4, this._save()]);\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return this.isEnabled ? (this._mergeQueue(), this._isSendable() ? [4, this._flush(t4)] : [3, 4]) : [3, 4];\n          case 3:\n            return [2, n2.sent()];\n          case 4:\n            return [2, true];\n        }\n      });\n    });\n  }, i3.prototype._flush = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i4, r2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            if (t4 = true, !(e4.length > 0)) return [3, 10];\n            if (this.isFlushing) return [3, 9];\n            this.isFlushing = true, s4.label = 1;\n          case 1:\n            return s4.trys.push([1, 4, 8, 9]), n2 = c([], a$1(e4), false).slice(0, Math.min(this.limit, this.statConfig.maxStatCountPerRequest)), i4 = new Zs$2({ deviceId: this.deviceId, statLogs: n2 }), [4, this.requestQueue.send(i4)];\n          case 2:\n            return s4.sent(), this.queue = c([], a$1(e4), false).slice(n2.length).concat(this.flushWaitQueue), this.flushWaitQueue = [], this.limit = Bs$2, this.logInfo.lastFlushedAt = Date.now(), [4, this._save()];\n          case 3:\n            return s4.sent(), [3, 9];\n          case 4:\n            return (r2 = s4.sent()) instanceof b$2 ? r2.code !== u$1.NON_AUTHORIZED ? [3, 6] : [4, this.clear()] : [3, 7];\n          case 5:\n            return s4.sent(), this.enabledState = Ps$2.DISABLED, [3, 7];\n          case 6:\n            r2.code === u$1.STAT_UPLOAD_NOT_ALLOWED && (this.enabledState = Ps$2.COLLECT_ONLY), s4.label = 7;\n          case 7:\n            return this.limit = this.limit + 20, t4 = false, [3, 9];\n          case 8:\n            return this.isFlushing = false, [7];\n          case 9:\n            return [3, 11];\n          case 10:\n            this.isFlushing = false, s4.label = 11;\n          case 11:\n            return [2, t4];\n        }\n      });\n    });\n  }, i3;\n}(Qs$2), Js$2 = function(e3) {\n  function n2(t4) {\n    var n3 = t4.deviceId, i3 = t4.statLogs, r2 = e3.call(this) || this;\n    return r2.method = ae.POST, r2.path = \"\".concat(Te$1), r2.params = { device_id: n3, log_entries: i3.map(function(e4) {\n      return $e$1.payloadify(e4);\n    }) }, r2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), $s$2 = function(e3) {\n  function i3(t4) {\n    var n2 = t4.deviceId, i4 = t4.cacheContext, r2 = t4.requestQueue;\n    return e3.call(this, { deviceId: n2, cacheContext: i4, requestQueue: r2 }) || this;\n  }\n  return t$2(i3, e3), Object.defineProperty(i3.prototype, \"_isSendable\", { get: function() {\n    return this.queue.length >= this.statConfig.minStatCount && this.queue.length > this.statConfig.lowerThreshold || this.logInfo.lastFlushedAt > 0 && Date.now() - this.logInfo.lastFlushedAt >= this.statConfig.minInterval;\n  }, enumerable: false, configurable: true }), i3.prototype.init = function(t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return [4, e3.prototype.init.call(this, t4 + \".realtime\")];\n          case 1:\n            return i4.sent(), this.queue = this.logInfo.statLogs.map(function(e4) {\n              var t5;\n              return e4.data = se(n$2(n$2({}, e4.data), { message_id: null !== (t5 = e4.data.notificationId) && void 0 !== t5 ? t5 : e4.data.message_id, notificationId: void 0 })), new $e$1({ type: e4.stat_type, ts: e4.ts, data: e4.data });\n            }), this._sentLogStats = this.queue.map(function(e4) {\n              var t5;\n              return { channelUrl: e4.data.channelUrl, messageId: null !== (t5 = e4.data.notificationId) && void 0 !== t5 ? t5 : e4.data.message_id, action: e4.data.action };\n            }), [2];\n        }\n      });\n    });\n  }, i3.prototype.setConfig = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return this.statConfig = e4, this._mergeQueue(), t4.notificationStat ? (this.enabledState = t4.enabledStat ? Ps$2.ENABLED : Ps$2.COLLECT_ONLY, [3, 3]) : [3, 1];\n          case 1:\n            return this.enabledState = Ps$2.DISABLED, [4, this.clear()];\n          case 2:\n            i4.sent(), i4.label = 3;\n          case 3:\n            return this.isEnabled && this._isSendable ? (n2 = Math.max(Math.floor(Math.random() * this.statConfig.requestDelayRange), 100), [4, ms$2(n2)]) : [3, 6];\n          case 4:\n            return i4.sent(), [4, this._flush(this.queue)];\n          case 5:\n            i4.sent(), i4.label = 6;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.put = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.enabledState === Ps$2.DISABLED ? [2, true] : (t4 = this.enabledState === Ps$2.PENDING || this.isFlushing ? this.flushWaitQueue : this.queue, this._isDuplicateStat(e4) ? [2, true] : (t4.push(e4), this.enabledState === Ps$2.PENDING ? [3, 2] : [4, this._save()]));\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return this.isEnabled ? (this._mergeQueue(), this.isEnabled && this._isSendable ? [4, this._flush(t4)] : [3, 4]) : [3, 4];\n          case 3:\n            return [2, n2.sent()];\n          case 4:\n            return [2, true];\n        }\n      });\n    });\n  }, i3.prototype._flush = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, i4, r2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            if (t4 = true, !(e4.length > 0)) return [3, 10];\n            if (this.isFlushing) return [3, 9];\n            this.isFlushing = true, s4.label = 1;\n          case 1:\n            return s4.trys.push([1, 4, 8, 9]), n2 = c([], a$1(e4), false).slice(0, Math.min(this.limit, this.statConfig.maxStatCountPerRequest)), i4 = new Js$2({ deviceId: this.deviceId, statLogs: n2 }), [4, this.requestQueue.send(i4)];\n          case 2:\n            return s4.sent(), this.queue = c([], a$1(e4), false).slice(n2.length).concat(this.flushWaitQueue), this.flushWaitQueue = [], this.limit = Bs$2, this.logInfo.lastFlushedAt = Date.now(), [4, this._save()];\n          case 3:\n            return s4.sent(), [3, 9];\n          case 4:\n            return (r2 = s4.sent()) instanceof b$2 ? r2.code !== u$1.NON_AUTHORIZED ? [3, 6] : [4, this.clear()] : [3, 7];\n          case 5:\n            return s4.sent(), this.enabledState = Ps$2.DISABLED, [3, 7];\n          case 6:\n            r2.code === u$1.STAT_UPLOAD_NOT_ALLOWED && (this.enabledState = Ps$2.COLLECT_ONLY), s4.label = 7;\n          case 7:\n            return this.limit = this.limit + 20, t4 = false, [3, 9];\n          case 8:\n            return this.isFlushing = false, [7];\n          case 9:\n            return [3, 11];\n          case 10:\n            this.isFlushing = false, s4.label = 11;\n          case 11:\n            return [2, t4];\n        }\n      });\n    });\n  }, i3;\n}(Qs$2), eo = function() {\n  function e3(e4) {\n    var t4 = e4.cacheContext, n2 = e4.requestQueue, i3 = e4.dispatcher, r2 = e4.logger;\n    this._collectRequestStat = true, this._collectFeatureLocalCacheStat = true, this._collectionNotificationStat = true, this._retryCount = 0, this.deviceId = ee(), this.cacheContext = t4, this.requestQueue = n2, this.dispatcher = i3, this.logger = r2, this._dailyStatCollector = new Ys$2({ deviceId: this.deviceId, cacheContext: this.cacheContext, requestQueue: this.requestQueue }), this._defaultStatCollector = new Xs$2({ deviceId: this.deviceId, cacheContext: this.cacheContext, requestQueue: this.requestQueue }), this._notificationStatCollector = new $s$2({ deviceId: this.deviceId, cacheContext: this.cacheContext, requestQueue: this.requestQueue });\n  }\n  return e3.prototype._migration = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, i3, r2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return [4, this.cacheContext.preference.get(this.key)];\n          case 1:\n            return (e4 = s4.sent()) ? (t4 = [], e4.statLogs.forEach(function(e5) {\n              e5.stat_type === Me$1.FEATURE_LOCALCACHE && t4.push(new $e$1({ type: e5.stat_type, ts: e5.ts, data: e5.data }));\n            }), [4, this.cacheContext.preference.set(this.key + \".daily\", { deviceId: e4.deviceId, statLogs: t4.map(function(e5) {\n              return $e$1.payloadify(e5);\n            }), generation: e4.generation, lastFlushedAt: e4.lastFlushedAt })]) : [3, 6];\n          case 2:\n            return s4.sent(), i3 = [], e4.statLogs.forEach(function(e5) {\n              e5.stat_type !== Me$1.FEATURE_LOCALCACHE && e5.stat_type !== Me$1.NOTIFICATION && (e5.stat_type === Me$1.FEATURE_LOCALCACHE_EVENT && (e5.data = n$2({ message_init_policy: \"\", starting_point: 0 }, e5.data)), i3.push(new $e$1({ type: e5.stat_type, ts: e5.ts, data: e5.data })));\n            }), [4, this.cacheContext.preference.set(this.key + \".default\", { deviceId: e4.deviceId, statLogs: i3.map(function(e5) {\n              return $e$1.payloadify(e5);\n            }), generation: e4.generation, lastFlushedAt: e4.lastFlushedAt })];\n          case 3:\n            return s4.sent(), r2 = [], e4.statLogs.forEach(function(e5) {\n              var t5;\n              e5.stat_type === Me$1.NOTIFICATION && (e5.data = se(n$2(n$2({}, e5.data), { message_id: null !== (t5 = e5.data.notificationId) && void 0 !== t5 ? t5 : e5.data.message_id, notificationId: void 0 })), r2.push(new $e$1({ type: e5.stat_type, ts: e5.ts, data: e5.data })));\n            }), [4, this.cacheContext.preference.set(this.key + \".realtime\", { deviceId: e4.deviceId, statLogs: r2.map(function(e5) {\n              return $e$1.payloadify(e5);\n            }), generation: e4.generation, lastFlushedAt: e4.lastFlushedAt })];\n          case 4:\n            return s4.sent(), [4, this.cacheContext.preference.remove(this.key)];\n          case 5:\n            s4.sent(), s4.label = 6;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.init = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.key = e4, [4, this._migration()];\n          case 1:\n            return n2.sent(), [4, this._dailyStatCollector.init(this.key)];\n          case 2:\n            return n2.sent(), [4, this._defaultStatCollector.init(this.key)];\n          case 3:\n            return n2.sent(), [4, this._notificationStatCollector.init(this.key)];\n          case 4:\n            return n2.sent(), this.commandEventContext || (this.commandEventContext = this.dispatcher.on(function(e5) {\n              return r$1(t4, void 0, void 0, function() {\n                var t5, n3, i3, r2, o2, a4;\n                return s$1(this, function(s4) {\n                  return e5 instanceof We$2 ? (t5 = e5.statLog, this.put(t5)) : e5 instanceof _s$2 && (n3 = e5.request, i3 = e5.features, r2 = e5.options, o2 = e5.statConfigInfo, this._retryCount = 0, this._collectRequestStat = n3, this._collectFeatureLocalCacheStat = null == i3 ? void 0 : i3.localCache, this._collectionNotificationStat = null == i3 ? void 0 : i3.notification, this._statConfig = o2, this._dailyStatCollector.setConfig(this._statConfig.default, { localCacheStat: this._collectFeatureLocalCacheStat, enabledStat: r2.ingestion }), this._defaultStatCollector.setConfig(this._statConfig.default, { requestStat: this._collectRequestStat, localCacheStat: this._collectFeatureLocalCacheStat, enabledStat: r2.ingestion }), this._notificationStatCollector.setConfig(null !== (a4 = this._statConfig.realTime) && void 0 !== a4 ? a4 : this._statConfig.default, { notificationStat: this._collectionNotificationStat, enabledStat: r2.ingestion })), [2];\n                });\n              });\n            })), [2];\n        }\n      });\n    });\n  }, e3.prototype.put = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = true, e4 instanceof Ws$2 ? this._collectFeatureLocalCacheStat ? [4, this._dailyStatCollector.put(e4)] : [3, 2] : [3, 3];\n          case 1:\n            t4 = n2.sent(), n2.label = 2;\n          case 2:\n            return [3, 13];\n          case 3:\n            switch (e4.type) {\n              case Me$1.API_RESULT:\n              case Me$1.WEBSOCKET_CONNECT:\n                return [3, 4];\n              case Me$1.FEATURE_LOCALCACHE:\n              case Me$1.FEATURE_LOCALCACHE_EVENT:\n                return [3, 7];\n              case Me$1.NOTIFICATION:\n                return [3, 10];\n            }\n            return [3, 13];\n          case 4:\n            return this._collectRequestStat ? [4, this._defaultStatCollector.put(e4)] : [3, 6];\n          case 5:\n            t4 = n2.sent(), n2.label = 6;\n          case 6:\n            return [3, 13];\n          case 7:\n            return this._collectFeatureLocalCacheStat ? [4, this._defaultStatCollector.put(e4)] : [3, 9];\n          case 8:\n            t4 = n2.sent(), n2.label = 9;\n          case 9:\n            return [3, 13];\n          case 10:\n            return this._collectionNotificationStat ? [4, this._notificationStatCollector.put(e4)] : [3, 12];\n          case 11:\n            t4 = n2.sent(), n2.label = 12;\n          case 12:\n            return [3, 13];\n          case 13:\n            return t4 ? this._retryCount = 0 : (this._retryCount++, this._retryCount > 20 && (this._dailyStatCollector.enabledState = Ps$2.COLLECT_ONLY, this._defaultStatCollector.enabledState = Ps$2.COLLECT_ONLY, this._notificationStatCollector.enabledState = Ps$2.COLLECT_ONLY, this.logger.debug(b$2.statLogUploadLimitExceededError))), [2];\n        }\n      });\n    });\n  }, e3.prototype.close = function() {\n    this.commandEventContext && (this.commandEventContext.close(), this.commandEventContext = void 0);\n  }, e3;\n}(), to = function() {\n  function e3(e4) {\n    var t4 = e4.limit, n2 = void 0 === t4 ? 5 : t4;\n    this.workersByKey = {}, this.limit = n2;\n  }\n  return e3.prototype.run = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return this.workersByKey[e4] || (this.workersByKey[e4] = []), this.workersByKey[e4].length < this.limit ? (this.workersByKey[e4].push(t4), [4, t4()]) : [3, 2];\n          case 1:\n            return n2 = i3.sent(), this.workersByKey[e4].pop(), [2, n2];\n          case 2:\n            throw b$2.tooManyRequests;\n        }\n      });\n    });\n  }, e3.prototype.clear = function(e4) {\n    this.workersByKey[e4] = [];\n  }, e3;\n}();\n!function(e3) {\n  e3.DELIVERY_RECEIPT = \"delivery_receipt\", e3.PUSH_ACKNOWLEDGEMENT = \"push_acknowledgement\";\n}(Ks$2 || (Ks$2 = {}));\nvar no, io = function(e3) {\n  function n2() {\n    var t4 = null !== e3 && e3.apply(this, arguments) || this;\n    return t4._pushAckedCache = {}, t4;\n  }\n  return t$2(n2, e3), n2.prototype.isAcked = function(e4, t4) {\n    var n3, i3 = \"\".concat(e4, \"_\").concat(t4);\n    return null !== (n3 = this._pushAckedCache[i3]) && void 0 !== n3 && n3;\n  }, n2.prototype.markAsAcked = function(e4, t4) {\n    var n3 = \"\".concat(e4, \"_\").concat(t4);\n    this._pushAckedCache[n3] = true;\n  }, n2.prototype.clear = function() {\n    uo.of(this._iid).logger.debug(\"clear push acked cache\"), this._pushAckedCache = {};\n  }, n2.prototype.parseData = function(e4) {\n    var t4, n3, i3, r2, s4 = uo.of(this._iid).logger, o2 = e4.sendbird;\n    if (\"string\" == typeof o2) try {\n      o2 = JSON.parse(o2);\n    } catch (e5) {\n      throw s4.info(\"push notification payload does not contain sendbird payload in JSON format.\"), b$2.malformedDataError;\n    }\n    if (!o2 || \"object\" != typeof o2) throw s4.info(\"push notification payload does not contain sendbird payload in JSON format.\"), b$2.malformedDataError;\n    var a4 = null !== (t4 = o2.push_tracking_id) && void 0 !== t4 ? t4 : \"\", c3 = o2.notification_message_id, u3 = o2.notification_channel_key, l2 = o2.notification_template_key, h4 = o2.notification_event_deadline, d4 = null !== (n3 = o2.session_key) && void 0 !== n3 ? n3 : {}, _2 = null !== (i3 = null == d4 ? void 0 : d4.key) && void 0 !== i3 ? i3 : \"\", f2 = null !== (r2 = null == d4 ? void 0 : d4.topics) && void 0 !== r2 ? r2 : [];\n    if (\"string\" != typeof a4 || 0 === a4.length) throw s4.info(\"push tracking id is not available\"), b$2.malformedDataError;\n    if (\"string\" != typeof c3 || 0 === c3.length) throw s4.info(\"message id is not available\"), b$2.malformedDataError;\n    return { pushTrackingId: a4, sessionKey: _2, sessionTopics: f2, messageId: c3, channelKey: u3, templateKey: l2, notificationEventDeadline: h4 };\n  }, n2;\n}(Jr$1), ro = function(e3) {\n  this.name = e3.name, this._custom = e3.custom, this._usedByModerationEngine = e3.used_by_moderation_engine;\n}, so = function(e3) {\n  function n2() {\n    var t4 = e3.call(this) || this;\n    return t4.method = ae.GET, t4.path = ke$2, t4;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), oo = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.reportCategories = n3.categories, i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), ao = function(e3) {\n  function n2(t4) {\n    var n3 = e3.call(this, t4) || this;\n    return n3._categories = [], n3;\n  }\n  return t$2(n2, e3), n2.prototype.categories = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return 0 !== this._categories.length ? [3, 2] : [4, this._fetchCategories()];\n          case 1:\n            e4.sent(), e4.label = 2;\n          case 2:\n            return [2, this._categories];\n        }\n      });\n    });\n  }, n2.prototype._fetchCategories = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n3, i3, r2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return e4 = uo.of(this._iid).requestQueue, t4 = new so(), [4, e4.send(t4)];\n          case 1:\n            return n3 = s4.sent(), (i3 = n3.as(oo).reportCategories) && (r2 = this._categories).push.apply(r2, c([], a$1(i3.map(function(e5) {\n              return new ro(e5);\n            })), false)), [2];\n        }\n      });\n    });\n  }, n2;\n}(Jr$1), co = {}, uo = function() {\n  function e3(e4, t4) {\n    var n2, i3, r2, s4, o2, a4, c3, u3, l2;\n    if (this.connectedAt = 0, this.firstConnectedAt = 0, this.connectionHandlers = /* @__PURE__ */ new Map(), this.userEventHandlers = /* @__PURE__ */ new Map(), !co[e4]) {\n      co[e4] = this;\n      var d4 = null !== (n2 = t4.options) && void 0 !== n2 ? n2 : new L$2(), _2 = this.sdkState = { appId: t4.appId, appVersion: null !== (i3 = t4.appVersion) && void 0 !== i3 ? i3 : \"\", appState: \"foreground\", userId: void 0, extensions: {}, api: { host: null !== (r2 = t4.apiHost) && void 0 !== r2 ? r2 : \"https://api-\".concat(t4.appId, \".sendbird.com\") }, websocket: { host: null !== (s4 = t4.websocketHost) && void 0 !== s4 ? s4 : \"wss://ws-\".concat(t4.appId, \".sendbird.com\"), pingerDisabled: !!t4.noPingpong, pingInterval: void 0, pongTimeout: void 0, connectMaxRetry: 2, compression: true, reconnectMaxRetry: -1, reconnectRetryStrategy: new ys$2(), responseTimeout: d4.websocketResponseTimeout }, sessionTokenRefreshTimeout: d4.sessionTokenRefreshTimeout };\n      this.appInfo = void 0, this.subscribedUnreadMessageCount = { all: 0, feed: 0, customTypes: {}, ts: 0 };\n      var f2 = this.logger = t4.logger;\n      this.connectedAt = 0, this.firstConnectedAt = 0, this.connectionHandlers = /* @__PURE__ */ new Map(), this.userEventHandlers = /* @__PURE__ */ new Map();\n      var p2 = this.cacheContext = new P$1({ encryption: t4.encryption, store: t4.store, localCacheEnabled: null !== (o2 = t4.localCacheEnabled) && void 0 !== o2 && o2, localCacheConfig: null !== (a4 = t4.localCacheConfig) && void 0 !== a4 ? a4 : new q() });\n      this.debugMode = null !== (c3 = t4.debugMode) && void 0 !== c3 && c3, this.maxSuperGroupChannelUnreadCount = h$1.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL, this.useMemberInfoInMessage = d4.useMemberInfoInMessage, this.typingIndicatorInvalidateTime = d4.typingIndicatorInvalidateTime, this.typingIndicatorThrottle = d4.typingIndicatorThrottle, this.concurrentCallLimit = void 0, this.backOffDelay = void 0;\n      var E3 = this.dispatcher = new ie(), g2 = new $();\n      this.requestQueue = new qs$2(e4, { session: g2, sdkState: _2, dispatcher: E3, logger: f2, useFetchCompat: t4.useFetchCompat }), this.pushNotificationAckManager = new io(e4), this.sessionManager = new Gs$2({ _iid: e4, session: g2, cacheContext: p2, sdkState: _2, dispatcher: E3, requestQueue: this.requestQueue, logger: f2, pushNotificationAckManager: this.pushNotificationAckManager }), this.connectionManager = new Ns$2(e4, { sdkState: _2, cacheContext: this.cacheContext, connectionHandlers: this.connectionHandlers, dispatcher: E3, sessionManager: this.sessionManager, websocketClient: this.requestQueue.commandRouter.websocketClient, disableWebSocketCloseEventHandling: null !== (u3 = t4.disableWebSocketCloseEventHandling) && void 0 !== u3 && u3, logger: f2 }), this.statManager = new eo({ cacheContext: this.cacheContext, requestQueue: this.requestQueue, dispatcher: this.dispatcher, logger: f2 }), this.appStateToggleEnabled = null === (l2 = t4.appStateToggleEnabled) || void 0 === l2 || l2, this.messageBackgroundSyncThrottleController = new to({ limit: 5 }), this.reportCategoryManager = new ao(e4);\n    }\n    return co[e4];\n  }\n  return e3.of = function(e4) {\n    if (co[e4]) return co[e4];\n    throw b$2.lostInstance;\n  }, e3.clear = function(e4) {\n    co[e4] && delete co[e4];\n  }, e3.prototype.hasExtension = function(e4) {\n    return this.sdkState.extensions && this.sdkState.extensions[e4];\n  }, e3;\n}(), lo = function() {\n  function e3() {\n  }\n  return e3.prototype.init = function(e4, t4) {\n    var n2 = t4.sdkState, i3 = t4.dispatcher, r2 = t4.sessionManager, s4 = t4.requestQueue, o2 = t4.logger;\n    t4.onlineDetector;\n    var a4 = t4.cacheContext;\n    this._iid = e4, this._cacheContext = a4, this._sdkState = n2, this._dispatcher = i3, this._sessionManager = r2, this._requestQueue = s4, this._logger = o2;\n  }, e3;\n}();\n!function(e3) {\n  e3.UNKNOWN = \"UNKNOWN\", e3.EVENT_CHANNEL_CREATED = \"EVENT_CHANNEL_CREATED\", e3.EVENT_CHANNEL_UPDATED = \"EVENT_CHANNEL_UPDATED\", e3.EVENT_CHANNEL_DELETED = \"EVENT_CHANNEL_DELETED\", e3.EVENT_CHANNEL_READ = \"EVENT_CHANNEL_READ\", e3.EVENT_CHANNEL_DELIVERED = \"EVENT_CHANNEL_DELIVERED\", e3.EVENT_CHANNEL_INVITED = \"EVENT_CHANNEL_INVITED\", e3.EVENT_CHANNEL_JOINED = \"EVENT_CHANNEL_JOINED\", e3.EVENT_CHANNEL_LEFT = \"EVENT_CHANNEL_LEFT\", e3.EVENT_CHANNEL_ACCEPTED_INVITE = \"EVENT_CHANNEL_ACCEPTED_INVITE\", e3.EVENT_CHANNEL_DECLINED_INVITE = \"EVENT_CHANNEL_DECLINED_INVITE\", e3.EVENT_CHANNEL_OPERATOR_UPDATED = \"EVENT_CHANNEL_OPERATOR_UPDATED\", e3.EVENT_CHANNEL_BANNED = \"EVENT_CHANNEL_BANNED\", e3.EVENT_CHANNEL_UNBANNED = \"EVENT_CHANNEL_UNBANNED\", e3.EVENT_CHANNEL_MUTED = \"EVENT_CHANNEL_MUTED\", e3.EVENT_CHANNEL_UNMUTED = \"EVENT_CHANNEL_UNMUTED\", e3.EVENT_CHANNEL_FROZEN = \"EVENT_CHANNEL_FROZEN\", e3.EVENT_CHANNEL_UNFROZEN = \"EVENT_CHANNEL_UNFROZEN\", e3.EVENT_CHANNEL_HIDDEN = \"EVENT_CHANNEL_HIDDEN\", e3.EVENT_CHANNEL_UNHIDDEN = \"EVENT_CHANNEL_UNHIDDEN\", e3.EVENT_CHANNEL_RESET_HISTORY = \"EVENT_CHANNEL_RESET_HISTORY\", e3.EVENT_CHANNEL_TYPING_STATUS_UPDATE = \"EVENT_CHANNEL_TYPING_STATUS_UPDATE\", e3.EVENT_CHANNEL_MEMBER_COUNT_UPDATED = \"EVENT_CHANNEL_MEMBER_COUNT_UPDATED\", e3.EVENT_CHANNEL_METADATA_CREATED = \"EVENT_CHANNEL_METADATA_CREATED\", e3.EVENT_CHANNEL_METADATA_UPDATED = \"EVENT_CHANNEL_METADATA_UPDATED\", e3.EVENT_CHANNEL_METADATA_DELETED = \"EVENT_CHANNEL_METADATA_DELETED\", e3.EVENT_CHANNEL_METACOUNTER_CREATED = \"EVENT_CHANNEL_METACOUNTER_CREATED\", e3.EVENT_CHANNEL_METACOUNTER_UPDATED = \"EVENT_CHANNEL_METACOUNTER_UPDATED\", e3.EVENT_CHANNEL_METACOUNTER_DELETED = \"EVENT_CHANNEL_METACOUNTER_DELETED\", e3.EVENT_MESSAGE_SENT = \"EVENT_MESSAGE_SENT\", e3.EVENT_MESSAGE_RECEIVED = \"EVENT_MESSAGE_RECEIVED\", e3.EVENT_MESSAGE_UPDATED = \"EVENT_MESSAGE_UPDATED\", e3.EVENT_PINNED_MESSAGE_UPDATED = \"EVENT_PINNED_MESSAGE_UPDATED\", e3.REQUEST_CHANNEL = \"REQUEST_CHANNEL\", e3.REQUEST_CHANNEL_CHANGELOGS = \"REQUEST_CHANNEL_CHANGELOGS\", e3.REFRESH_CHANNEL = \"REFRESH_CHANNEL\", e3.CHANNEL_LASTACCESSEDAT_UPDATED = \"CHANNEL_LASTACCESSEDAT_UPDATED\", e3.SYNC_CHANNEL_BACKGROUND = \"SYNC_CHANNEL_BACKGROUND\", e3.SYNC_CHANNEL_CHANGELOGS = \"SYNC_CHANNEL_CHANGELOGS\", e3.EVENT_MESSAGE_SENT_SUCCESS = \"EVENT_MESSAGE_SENT_SUCCESS\", e3.EVENT_MESSAGE_SENT_FAILED = \"EVENT_MESSAGE_SENT_FAILED\", e3.EVENT_MESSAGE_SENT_PENDING = \"EVENT_MESSAGE_SENT_PENDING\", e3.EVENT_MESSAGE_DELETED = \"EVENT_MESSAGE_DELETED\", e3.EVENT_MESSAGE_FEEDBACK_ADDED = \"EVENT_MESSAGE_FEEDBACK_ADDED\", e3.EVENT_MESSAGE_FEEDBACK_UPDATED = \"EVENT_MESSAGE_FEEDBACK_UPDATED\", e3.EVENT_MESSAGE_FEEDBACK_DELETED = \"EVENT_MESSAGE_FEEDBACK_DELETED\", e3.EVENT_MESSAGE_READ = \"EVENT_MESSAGE_READ\", e3.EVENT_MESSAGE_DELIVERED = \"EVENT_MESSAGE_DELIVERED\", e3.EVENT_MESSAGE_REACTION_UPDATED = \"EVENT_MESSAGE_REACTION_UPDATED\", e3.EVENT_MESSAGE_THREADINFO_UPDATED = \"EVENT_MESSAGE_THREADINFO_UPDATED\", e3.EVENT_MESSAGE_OFFSET_UPDATED = \"EVENT_MESSAGE_OFFSET_UPDATED\", e3.REQUEST_MESSAGE = \"REQUEST_MESSAGE\", e3.EVENT_THREAD_INFO_UPDATED = \"EVENT_THREADINFO_UPDATED\", e3.EVENT_POLL_UPDATED = \"EVENT_POLL_UPDATED\", e3.EVENT_POLL_VOTED = \"EVENT_POLL_VOTED\", e3.SYNC_POLL_CHANGELOGS = \"SYNC_POLL_CHANGELOGS\", e3.REQUEST_RESEND_MESSAGE = \"REQUEST_RESEND_MESSAGE\", e3.REQUEST_THREADED_MESSAGE = \"REQUEST_THREADED_MESSAGE\", e3.REQUEST_MESSAGE_CHANGELOGS = \"REQUEST_MESSAGE_CHANGELOGS\", e3.SYNC_MESSAGE_FILL = \"SYNC_MESSAGE_FILL\", e3.SYNC_MESSAGE_BACKGROUND = \"SYNC_MESSAGE_BACKGROUND\", e3.SYNC_MESSAGE_CHANGELOGS = \"SYNC_MESSAGE_CHANGELOGS\", e3.LOCAL_MESSAGE_PENDING_CREATED = \"LOCAL_MESSAGE_PENDING_CREATED\", e3.LOCAL_MESSAGE_FAILED = \"LOCAL_MESSAGE_FAILED\", e3.LOCAL_MESSAGE_CANCELED = \"LOCAL_MESSAGE_CANCELED\", e3.LOCAL_MESSAGE_RESEND_STARTED = \"LOCAL_MESSAGE_RESEND_STARTED\";\n}(no || (no = {}));\nvar ho;\nn$2({}, no);\nvar fo = function(e3) {\n  return e3.startsWith(\"EVENT_\") || e3.startsWith(\"LOCAL_MESSAGE_\") || e3 === no.SYNC_MESSAGE_FILL || e3 === no.SYNC_MESSAGE_CHANGELOGS || e3 === no.SYNC_POLL_CHANGELOGS;\n}, po = function(e3) {\n  function n2(t4) {\n    var n3 = t4.messages, i3 = t4.source, r2 = t4.isWebSocketEventComing, s4 = void 0 !== r2 && r2, o2 = e3.call(this) || this;\n    return o2.messages = n3, o2.source = i3, o2.isWebSocketEventComing = s4, o2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), Eo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.messageIds, i3 = t4.source, r2 = t4.isWebSocketEventComing, s4 = void 0 !== r2 && r2, o2 = e3.call(this) || this;\n    return o2.messageIds = n3, o2.source = i3, o2.isWebSocketEventComing = s4, o2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), go = function(e3) {\n  function n2(t4) {\n    var n3 = t4.messageDeletionTimestamp, i3 = t4.channelUrl, r2 = t4.source, s4 = e3.call(this) || this;\n    return s4.messageDeletionTimestamp = n3, s4.channelUrl = i3, s4.source = r2, s4;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), vo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.event, i3 = t4.source, r2 = t4.isWebSocketEventComing, s4 = void 0 !== r2 && r2, o2 = e3.call(this) || this;\n    return o2.event = n3, o2.source = i3, o2.isWebSocketEventComing = s4, o2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), bo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.event, i3 = t4.source, r2 = t4.isWebSocketEventComing, s4 = void 0 !== r2 && r2, o2 = e3.call(this) || this;\n    return o2.event = n3, o2.source = i3, o2.isWebSocketEventComing = s4, o2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), mo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.reqId, i3 = t4.source, r2 = e3.call(this) || this;\n    return r2.reqId = n3, r2.source = i3, r2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), yo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.polls, i3 = t4.source, r2 = e3.call(this) || this;\n    return r2.polls = n3, r2.source = i3, r2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), wo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.event, i3 = t4.source, r2 = e3.call(this) || this;\n    return r2.event = n3, r2.source = i3, r2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1), So = function(e3) {\n  function n2(t4) {\n    var n3 = t4.event, i3 = t4.source, r2 = e3.call(this) || this;\n    return r2.event = n3, r2.source = i3, r2;\n  }\n  return t$2(n2, e3), n2;\n}(re$1);\n!function(e3) {\n  e3.OPEN = \"open\", e3.CLOSED = \"closed\";\n}(ho || (ho = {}));\nvar To = \"removed\", No = function(e3) {\n  switch (e3) {\n    case \"open\":\n      return ho.OPEN;\n    case \"closed\":\n      return ho.CLOSED;\n    default:\n      return null;\n  }\n}, Co = function(e3) {\n  return !e3 || !!e3.text && S$1(\"string\", e3.text);\n}, Ao = function(e3) {\n  function i3(t4, n2) {\n    var i4, r2, s4, o2, a4, c3, u3, l2 = this;\n    return (l2 = e3.call(this, t4) || this).pollId = 0, l2.id = 0, l2.text = null, l2.voteCount = 0, l2.createdBy = null, l2.createdAt = 0, l2.updatedAt = 0, l2._lastVotedAt = 0, l2.pollId = null !== (i4 = n2.poll_id) && void 0 !== i4 ? i4 : 0, l2.id = null !== (r2 = n2.id) && void 0 !== r2 ? r2 : 0, l2.text = null !== (s4 = n2.text) && void 0 !== s4 ? s4 : null, l2.voteCount = null !== (o2 = n2.vote_count) && void 0 !== o2 ? o2 : 0, l2.createdBy = null !== (a4 = n2.created_by) && void 0 !== a4 ? a4 : null, l2.createdAt = null !== (c3 = n2.created_at) && void 0 !== c3 ? c3 : 0, l2.updatedAt = null !== (u3 = n2.updated_at) && void 0 !== u3 ? u3 : 0, l2;\n  }\n  return t$2(i3, e3), i3.payloadify = function(t4) {\n    return se(oe(n$2(n$2({}, e3.payloadify.call(this, t4)), { vote_count: t4.voteCount, poll_id: t4.pollId, text: t4.text, created_at: t4.createdAt, id: t4.id, created_by: t4.createdBy, updated_at: t4.updatedAt })));\n  }, i3;\n}(Jr$1), Io = function(e3) {\n  function i3(t4, n2) {\n    var i4, r2, s4, o2, a4, c3, u3, l2, h4, d4, _2, f2, p2, E3 = this;\n    return (E3 = e3.call(this, t4) || this).id = 0, E3.title = null, E3.createdAt = 0, E3.updatedAt = 0, E3.closeAt = -1, E3.status = ho.CLOSED, E3.messageId = 0, E3.data = null, E3.voterCount = -1, E3.options = [], E3.createdBy = null, E3.allowUserSuggestion = false, E3.allowMultipleVotes = false, E3.votedPollOptionIds = [], E3.id = null !== (i4 = n2.id) && void 0 !== i4 ? i4 : 0, E3.title = null !== (r2 = n2.title) && void 0 !== r2 ? r2 : null, E3.createdAt = null !== (s4 = n2.created_at) && void 0 !== s4 ? s4 : 0, E3.updatedAt = null !== (o2 = n2.updated_at) && void 0 !== o2 ? o2 : 0, E3.closeAt = null !== (a4 = n2.close_at) && void 0 !== a4 ? a4 : -1, E3.status = null !== (c3 = No(n2.status)) && void 0 !== c3 ? c3 : ho.CLOSED, E3.messageId = null !== (u3 = n2.message_id) && void 0 !== u3 ? u3 : 0, E3.data = null !== (l2 = n2.data) && void 0 !== l2 ? l2 : null, E3.voterCount = null !== (h4 = n2.voter_count) && void 0 !== h4 ? h4 : -1, E3.options = n2.options ? n2.options.map(function(e4) {\n      return new Ao(E3._iid, e4);\n    }) : [], E3.createdBy = null !== (d4 = n2.created_by) && void 0 !== d4 ? d4 : null, E3.allowUserSuggestion = null !== (_2 = n2.allow_user_suggestion) && void 0 !== _2 && _2, E3.allowMultipleVotes = null !== (f2 = n2.allow_multiple_votes) && void 0 !== f2 && f2, E3.votedPollOptionIds = null !== (p2 = n2.voted_option_ids) && void 0 !== p2 ? p2 : [], E3;\n  }\n  return t$2(i3, e3), i3.prototype._applyPollUpdatePayload = function(e4) {\n    var t4, n2, i4, r2, s4, o2, a4, c3, u3 = this;\n    this.title = null !== (t4 = e4.title) && void 0 !== t4 ? t4 : this.title, this.updatedAt = null !== (n2 = e4.updated_at) && void 0 !== n2 ? n2 : this.updatedAt, this.closeAt = null !== (i4 = e4.close_at) && void 0 !== i4 ? i4 : this.closeAt, this.status = null !== (r2 = No(e4.status)) && void 0 !== r2 ? r2 : this.status, this.data = null !== (s4 = e4.data) && void 0 !== s4 ? s4 : this.data, this.voterCount = null !== (o2 = e4.voter_count) && void 0 !== o2 ? o2 : this.voterCount, e4.options && (this.options = e4.options.map(function(e5) {\n      return new Ao(u3._iid, e5);\n    }), this.votedPollOptionIds = e4.options.filter(function(e5) {\n      return e5.vote_count > 0;\n    }).map(function(e5) {\n      return e5.id;\n    })), this.allowUserSuggestion = null !== (a4 = e4.allow_user_suggestion) && void 0 !== a4 ? a4 : this.allowUserSuggestion, this.allowMultipleVotes = null !== (c3 = e4.allow_multiple_votes) && void 0 !== c3 ? c3 : this.allowMultipleVotes;\n  }, i3.payloadify = function(t4) {\n    return se(oe(n$2(n$2({}, e3.payloadify.call(this, t4)), { id: t4.id, title: t4.title, created_at: t4.createdAt, updated_at: t4.updatedAt, close_at: t4.closeAt, status: t4.status, message_id: t4.messageId, data: t4.data, voter_count: t4.voterCount, options: t4.options.map(function(e4) {\n      return Ao.payloadify(e4);\n    }), created_by: t4.createdBy, allow_user_suggestion: t4.allowUserSuggestion, allow_multiple_votes: t4.allowMultipleVotes, voted_option_ids: t4.votedPollOptionIds })));\n  }, i3.prototype.applyPollUpdateEvent = function(e4) {\n    var t4 = e4._payload.poll;\n    return !(!t4 || this.id !== t4.id || t4.updated_at < this.updatedAt) && (this._applyPollUpdatePayload(t4), true);\n  }, i3.prototype.applyPollVoteEvent = function(e4) {\n    if (this.id !== e4.pollId) return false;\n    var t4 = this.options, n2 = t4.map(function(e5) {\n      return e5.id;\n    }), i4 = e4._payload, r2 = Math.floor(i4.ts / 1e3);\n    return i4.updated_vote_counts.forEach(function(e5) {\n      var i5 = n2.indexOf(e5.option_id);\n      if (i5 > -1) {\n        var s4 = t4[i5];\n        r2 >= s4._lastVotedAt && (s4.voteCount = e5.vote_count, s4._lastVotedAt = r2);\n      }\n    }), i4.req_id && i4.voted_option_ids && (this.votedPollOptionIds = i4.voted_option_ids), \"number\" == typeof i4.voter_count && (this.voterCount = i4.voter_count), true;\n  }, i3.prototype.serialize = function() {\n    return os$2(this);\n  }, i3;\n}(Jr$1), Oo = function() {\n  function e3(e4, t4) {\n    var n2;\n    this.limit = 20, this._isLoading = false, this._hasNext = true, this._token = \"\", this._iid = e4, this.limit = null !== (n2 = t4.limit) && void 0 !== n2 ? n2 : 20;\n  }\n  return Object.defineProperty(e3.prototype, \"hasNext\", { get: function() {\n    return this._hasNext;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"isLoading\", { get: function() {\n    return this._isLoading;\n  }, enumerable: false, configurable: true }), e3.prototype._validate = function() {\n    return S$1(\"number\", this.limit) && this.limit > 0;\n  }, e3;\n}(), ko = function(e3) {\n  function n2(t4, n3, i3, r2) {\n    var s4 = e3.call(this, t4, r2) || this;\n    return s4.channelUrl = n3, s4.channelType = i3, s4;\n  }\n  return t$2(n2, e3), n2.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"string\", this.channelUrl) && T$2(H$1, this.channelType);\n  }, n2;\n}(Oo), Do = function(e3) {\n  this.pollId = 0, this.messageId = 0, this.pollId = e3.poll_id, this.messageId = e3.message_id, this._payload = e3;\n}, Ro = function(e3) {\n  function n2(t4) {\n    var n3 = t4.title, i3 = t4.optionTexts, r2 = t4.data, s4 = t4.allowUserSuggestion, o2 = t4.allowMultipleVotes, a4 = t4.closeAt, c3 = e3.call(this) || this;\n    return c3.method = ae.POST, c3.path = me$1, c3.params = { title: n3, options: i3, data: r2, allow_user_suggestion: s4, allow_multiple_votes: o2, close_at: a4 }, c3;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Lo = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.poll = new Io(t4, n3), i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), xo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.channelUrl, i3 = t4.channelType, r2 = t4.pollId, s4 = e3.call(this) || this;\n    return s4.method = ae.GET, s4.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(r2)), s4.params = { channel_url: n3, channel_type: i3 }, s4;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Uo = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.poll = new Io(t4, n3), i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), Po = function(e3) {\n  function n2(t4) {\n    var n3 = t4.channelUrl, i3 = t4.channelType, r2 = t4.pollId, s4 = t4.pollOptionId, o2 = e3.call(this) || this;\n    return o2.method = ae.GET, o2.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(r2), \"/options/\").concat(encodeURIComponent(s4)), o2.params = { channel_url: n3, channel_type: i3 }, o2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Mo = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.pollOption = new Ao(t4, n3), i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), Fo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.channelType, i3 = t4.channelUrl, r2 = t4.timestamp, s4 = t4.token, o2 = e3.call(this) || this;\n    return o2.method = ae.GET, o2.path = \"\".concat(Re$3(n3), \"/\").concat(encodeURIComponent(i3), \"/polls/changelogs\"), o2.params = se({ change_ts: r2, token: s4 }), o2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), qo = function(e3) {\n  function n2(t4, n3) {\n    var i3 = e3.call(this, t4, n3) || this;\n    return i3.updatedPolls = n3.updated.map(function(e4) {\n      return function(e5, t5) {\n        return new Io(e5, t5);\n      }(t4, e4);\n    }), i3.deletedPollIds = n3.deleted.map(function(e4) {\n      return e4;\n    }), i3.hasMore = n3.has_more, i3.nextToken = n3.next, i3;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), Ho = { title: \"\", optionTexts: [], data: void 0, allowUserSuggestion: void 0, allowMultipleVotes: void 0, closeAt: -1 }, Vo = function(e3) {\n  return S$1(\"string\", e3.title) && (t4 = e3.optionTexts, C$1(\"string\", t4) && t4.every(function(e4) {\n    return \"\" !== e4.trim();\n  })) && Co(e3.data) && S$1(\"boolean\", e3.allowUserSuggestion, true) && S$1(\"boolean\", e3.allowMultipleVotes, true) && S$1(\"number\", e3.closeAt, true);\n  var t4;\n}, zo = { channelUrl: \"\", channelType: H$1.BASE, pollId: 0, pollOptionId: 0 }, Go = function(e3) {\n  return S$1(\"string\", e3.channelUrl) && \"\" !== e3.channelUrl && T$2(H$1, e3.channelType) && S$1(\"number\", e3.pollId) && e3.pollId > 0 && S$1(\"number\", e3.pollOptionId) && e3.pollOptionId > 0;\n}, jo = { channelUrl: \"\", channelType: H$1.BASE, pollId: 0 }, Ko = function(e3) {\n  return S$1(\"string\", e3.channelUrl) && \"\" !== e3.channelUrl && T$2(H$1, e3.channelType) && S$1(\"number\", e3.pollId);\n}, Bo = {}, Qo = function() {\n  function e3(e4, t4) {\n    var n2 = t4.sdkState, i3 = t4.dispatcher, r2 = t4.sessionManager, s4 = t4.requestQueue, o2 = t4.logger;\n    this._iid = e4, this._sdkState = n2, this._sessionManager = r2, this._requestQueue = s4, this._dispatcher = i3, this._logger = o2, Bo[e4] = this;\n  }\n  return e3.of = function(e4) {\n    return Bo[e4];\n  }, e3.prototype.buildPollFromSerializedData = function(e4) {\n    var t4 = as$2(e4);\n    return new Io(this._iid, Io.payloadify(t4));\n  }, e3.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, i3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return cs$2(Ko(e4)).throw(b$2.invalidParameters), t4 = new xo(n$2({}, e4)), [4, this._requestQueue.send(t4)];\n          case 1:\n            return i3 = r2.sent(), [2, i3.as(Uo).poll];\n        }\n      });\n    });\n  }, e3.prototype.create = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, i3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return cs$2(Vo(e4)).throw(b$2.invalidParameters), t4 = new Ro(n$2({}, e4)), [4, this._requestQueue.send(t4)];\n          case 1:\n            return i3 = r2.sent(), [2, i3.as(Lo).poll];\n        }\n      });\n    });\n  }, e3.prototype.getOption = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, i3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return cs$2(Go(e4)).throw(b$2.invalidParameters), t4 = new Po(n$2({}, e4)), [4, this._requestQueue.send(t4)];\n          case 1:\n            return i3 = r2.sent(), [2, i3.as(Mo).pollOption];\n        }\n      });\n    });\n  }, e3.prototype.getPollChangeLogs = function(e4, t4, n2, i3) {\n    return void 0 === i3 && (i3 = no.SYNC_POLL_CHANGELOGS), r$1(this, void 0, void 0, function() {\n      var r2, o2, a4, c3, u3, l2, h4;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return r2 = new Fo(oe({ channelType: t4, channelUrl: e4, timestamp: \"number\" == typeof n2 ? n2 : null, token: \"string\" == typeof n2 ? n2 : null })), [4, this._requestQueue.send(r2)];\n          case 1:\n            return o2 = s4.sent(), a4 = o2.as(qo), c3 = a4.updatedPolls, u3 = a4.deletedPollIds, l2 = a4.hasMore, h4 = a4.nextToken, c3.length > 0 && this._dispatcher.dispatch(new yo({ polls: c3, source: i3 })), [2, { updatedPolls: c3, deletedPollIds: u3, hasMore: l2, token: h4 }];\n        }\n      });\n    });\n  }, e3;\n}(), Wo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.channelUrl, i3 = t4.channelType, r2 = t4.token, s4 = t4.limit, o2 = e3.call(this) || this;\n    return o2.method = ae.GET, o2.path = me$1, o2.params = { channel_url: n3, channel_type: i3, token: r2, limit: s4 }, o2;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Zo = function(e3) {\n  function n2(t4, n3) {\n    var i3, r2 = this;\n    return (r2 = e3.call(this, t4, n3) || this).polls = (null !== (i3 = n3.polls) && void 0 !== i3 ? i3 : []).map(function(e4) {\n      return new Io(t4, e4);\n    }), r2.token = n3.next, r2;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), Yo = function(e3) {\n  function i3(t4, n2) {\n    return e3.call(this, t4, n2.channelUrl, n2.channelType, n2) || this;\n  }\n  return t$2(i3, e3), i3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, i4, r2, o2, a4;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t4 = new Wo(n$2(n$2({}, this), { token: this._token })), [4, e4.send(t4)]) : [3, 2] : [3, 5];\n          case 1:\n            return i4 = s4.sent(), r2 = i4.as(Zo), o2 = r2.polls, a4 = r2.token, this._token = a4, this._hasNext = !!a4, this._isLoading = false, [2, o2];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(ko), Xo = function(e3) {\n  function n2(t4) {\n    var n3 = t4.channelUrl, i3 = t4.channelType, r2 = t4.pollId, s4 = t4.pollOptionId, o2 = t4.token, a4 = t4.limit, c3 = e3.call(this) || this;\n    return c3.method = ae.GET, c3.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(r2), \"/options/\").concat(encodeURIComponent(s4), \"/voters\"), c3.params = { channel_url: n3, channel_type: i3, token: o2, limit: a4 }, c3;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), Jo = function(e3) {\n  function n2(t4, n3) {\n    var i3, r2 = this;\n    return (r2 = e3.call(this, t4, n3) || this).voters = (null !== (i3 = n3.voters) && void 0 !== i3 ? i3 : []).map(function(e4) {\n      return new ls$2(t4, e4);\n    }), r2.token = n3.next, r2;\n  }\n  return t$2(n2, e3), n2;\n}(qe$2), $o = function(e3) {\n  function i3(t4, n2) {\n    var i4 = e3.call(this, t4, n2.channelUrl, n2.channelType, n2) || this;\n    return i4.pollId = n2.pollId, i4.pollOptionId = n2.pollOptionId, i4;\n  }\n  return t$2(i3, e3), i3.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"number\", this.pollId) && S$1(\"number\", this.pollOptionId);\n  }, i3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, i4, r2, o2, a4;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t4 = new Xo(n$2(n$2({}, this), { pollId: this.pollId, pollOptionId: this.pollOptionId, token: this._token })), [4, e4.send(t4)]) : [3, 2] : [3, 5];\n          case 1:\n            return i4 = s4.sent(), r2 = i4.as(Jo), o2 = r2.voters, a4 = r2.token, this._token = a4, this._hasNext = !!a4, this._isLoading = false, [2, o2];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(ko);\nvar ke$1, Pe$2 = function() {\n  function r2(e3, t4, n2) {\n    var r3, i3;\n    this.width = 0, this.height = 0, this.realWidth = 0, this.realHeight = 0, this._requireAuth = false, this._iid = e3, this.plainUrl = t4.url, this.width = t4.width, this.height = t4.height, this.realWidth = null !== (r3 = t4.real_width) && void 0 !== r3 ? r3 : t4.width, this.realHeight = null !== (i3 = t4.real_height) && void 0 !== i3 ? i3 : t4.height, this._requireAuth = n2;\n  }\n  return r2.payloadify = function(n2) {\n    return se(oe(n2 instanceof r2 ? { url: n2.plainUrl, width: n2.width, height: n2.height, real_width: n2.realWidth, real_height: n2.realHeight } : { url: \"\", width: n2.maxWidth, height: n2.maxHeight, real_width: 0, real_height: 0 }));\n  }, Object.defineProperty(r2.prototype, \"url\", { get: function() {\n    var e3 = uo.of(this._iid).sessionManager;\n    return this._requireAuth && e3.ekey ? \"\".concat(this.plainUrl, \"?auth=\").concat(e3.ekey) : this.plainUrl;\n  }, enumerable: false, configurable: true }), r2;\n}(), Re$2 = function(t4) {\n  function n2(n3) {\n    var r2 = t4.call(this) || this;\n    if (r2.method = ae.POST, r2.path = \"\".concat(he), r2.params = se({ file: n3.file, channel_url: n3.channelUrl }), n3.thumbnailSizes) for (var a4 = 0; a4 < n3.thumbnailSizes.length; a4++) {\n      var o2 = n3.thumbnailSizes[a4], u3 = o2.maxWidth, c3 = o2.maxHeight;\n      r2.params[\"thumbnail\".concat(a4 + 1)] = \"\".concat(u3, \",\").concat(c3);\n    }\n    return r2.requestId = n3.requestId, r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), xe$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2, i3, s4, a4, o2 = this;\n    return (o2 = e3.call(this, t5, n2) || this).url = n2.url, o2.fileSize = null !== (r2 = n2.file_size) && void 0 !== r2 ? r2 : 0, o2.thumbnails = null !== (s4 = null === (i3 = n2.thumbnails) || void 0 === i3 ? void 0 : i3.map(function(e4) {\n      return new Pe$2(t5, e4, false);\n    })) && void 0 !== s4 ? s4 : [], o2.requireAuth = null !== (a4 = n2.require_auth) && void 0 !== a4 && a4, o2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), De$2 = function(n2) {\n  function i3(e3, t4) {\n    var r2, i4, s4, a4, o2, u3 = this;\n    return (u3 = n2.call(this, e3) || this).replyCount = 0, u3.memberCount = 0, u3.lastRepliedAt = 0, u3.updatedAt = 0, u3.replyCount = null !== (r2 = t4.reply_count) && void 0 !== r2 ? r2 : 0, u3.memberCount = null !== (i4 = t4.member_count) && void 0 !== i4 ? i4 : 0, u3.mostRepliedUsers = t4.most_replies && C$1(\"object\", t4.most_replies) ? t4.most_replies.map(function(e4) {\n      return new ls$2(u3._iid, e4);\n    }) : [], u3.unreadReplyCount = null !== (s4 = t4.unread_message_count) && void 0 !== s4 ? s4 : 0, u3.isPushNotificationEnabled = \"number\" == typeof t4.push_enabled ? t4.push_enabled > 0 : void 0, u3.lastRepliedAt = null !== (a4 = t4.last_replied_at) && void 0 !== a4 ? a4 : 0, u3.updatedAt = null !== (o2 = t4.updated_at) && void 0 !== o2 ? o2 : 0, u3;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { reply_count: r2.replyCount, unread_message_count: r2.unreadReplyCount, member_count: r2.memberCount, most_replies: Array.isArray(r2.mostRepliedUsers) ? r2.mostRepliedUsers.map(function(e3) {\n      return ls$2.payloadify(e3);\n    }) : [], push_enabled: \"boolean\" == typeof r2.isPushNotificationEnabled ? r2.isPushNotificationEnabled ? 1 : 0 : void 0, last_replied_at: r2.lastRepliedAt, updated_at: r2.updatedAt })));\n  }, Object.defineProperty(i3.prototype, \"_isUpdateRequired\", { get: function() {\n    return void 0 === this.unreadReplyCount || void 0 === this.isPushNotificationEnabled;\n  }, enumerable: false, configurable: true }), i3.prototype._updateFrom = function(e3) {\n    var t4, n3;\n    this.unreadReplyCount = null !== (t4 = e3.unreadReplyCount) && void 0 !== t4 ? t4 : this.unreadReplyCount, this.isPushNotificationEnabled = null !== (n3 = e3.isPushNotificationEnabled) && void 0 !== n3 ? n3 : this.isPushNotificationEnabled;\n  }, i3;\n}(Jr$1);\n!function(e3) {\n  e3.ADD = \"add\", e3.DELETE = \"delete\";\n}(ke$1 || (ke$1 = {}));\nvar Le$1, Fe$1 = function(e3) {\n  var t4;\n  this.messageId = 0, this.operation = null, this.updatedAt = 0;\n  var n2 = S$1(\"string\", e3.msg_id) ? parseInt(e3.msg_id) : e3.msg_id, r2 = e3.user_id, i3 = e3.operation ? e3.operation.toLowerCase() : null, s4 = e3.reaction, a4 = e3.updated_at, o2 = e3.count, u3 = e3.sampled_user_ids, c3 = null !== (t4 = e3.sampled_user_info) && void 0 !== t4 ? t4 : {};\n  n2 && S$1(\"string\", r2) && S$1(\"string\", i3) && T$2(ke$1, i3) && S$1(\"string\", s4) && s4 && S$1(\"number\", a4) && (this.messageId = n2, this.userId = r2, this.key = s4, this.operation = i3, this.updatedAt = a4, this._count = o2, this._sampledUserIds = u3, this._sampledUserInfoList = c3);\n}, qe$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3, s4 = this;\n    return (s4 = e3.call(this, t5) || this).userId = n2, s4.nickname = r2.nickname, s4.plainProfileUrl = r2.profile_url, s4.requireAuth = null !== (i3 = r2.require_auth_for_profile_image) && void 0 !== i3 && i3, s4;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"profileUrl\", { get: function() {\n    var e4 = uo.of(this._iid).sessionManager;\n    return this.requireAuth && e4.ekey ? \"\".concat(this.plainProfileUrl, \"?auth=\").concat(e4.ekey) : this.plainProfileUrl;\n  }, enumerable: false, configurable: true }), t4.payloadify = function(e4) {\n    return { nickname: e4.nickname, profile_url: e4.plainProfileUrl, require_auth_for_profile_image: e4.requireAuth };\n  }, t4;\n}(Jr$1), ze$1 = function(i3) {\n  function s4(e3, t4) {\n    var r2, s5, a4, o$1, u3, c$1, l2, f2, y4, _2 = this;\n    (_2 = i3.call(this, e3) || this)._sampledUserInfoList = [], _2._count = 0, _2._hasCurrentUserReacted = false;\n    var g2 = t4.key, b3 = c([], a$1(null !== (o$1 = null !== (a4 = t4.sampled_user_ids) && void 0 !== a4 ? a4 : t4.user_ids) && void 0 !== o$1 ? o$1 : []), false), I3 = null !== (c$1 = null !== (u3 = t4.last_ts) && void 0 !== u3 ? u3 : t4.updated_at) && void 0 !== c$1 ? c$1 : 0, E3 = null !== (l2 = t4.is_self_included) && void 0 !== l2 ? l2 : b3.includes(uo.of(e3).sdkState.userId), T3 = null !== (f2 = t4.sampled_user_info) && void 0 !== f2 ? f2 : {};\n    S$1(\"string\", g2) && g2 && C$1(\"string\", b3) && b3.length > 0 && S$1(\"number\", I3) && (_2.key = g2, _2._sampledUserIds = b3, _2._updatedAt = I3, _2._count = null !== (y4 = t4.count) && void 0 !== y4 ? y4 : b3.length, _2._hasCurrentUserReacted = E3, Object.keys(T3).forEach(function(t5) {\n      _2._sampledUserInfoList.push(new qe$1(e3, t5, T3[t5]));\n    }));\n    var w3 = {};\n    try {\n      for (var M4 = o(_2.sampledUserIds), S4 = M4.next(); !S4.done; S4 = M4.next()) {\n        w3[S4.value] = _2.updatedAt;\n      }\n    } catch (e4) {\n      r2 = { error: e4 };\n    } finally {\n      try {\n        S4 && !S4.done && (s5 = M4.return) && s5.call(M4);\n      } finally {\n        if (r2) throw r2.error;\n      }\n    }\n    return _2._version = w3, _2;\n  }\n  return t$2(s4, i3), Object.defineProperty(s4.prototype, \"isEmpty\", { get: function() {\n    return 0 === this._count;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"userIds\", { get: function() {\n    return this._sampledUserIds;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"sampledUserIds\", { get: function() {\n    return this._sampledUserIds;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"sampledUserInfoList\", { get: function() {\n    return this._sampledUserInfoList;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"count\", { get: function() {\n    return this._count;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"updatedAt\", { get: function() {\n    return this._updatedAt;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"hasCurrentUserReacted\", { get: function() {\n    return this._hasCurrentUserReacted;\n  }, enumerable: false, configurable: true }), s4.payloadify = function(n2) {\n    var r2 = {};\n    return n2._sampledUserInfoList.forEach(function(e3) {\n      r2[e3.userId] = qe$1.payloadify(e3);\n    }), se(oe({ key: n2.key, sampled_user_ids: n2._sampledUserIds, sampled_user_info: r2, count: n2._count, is_self_included: n2._hasCurrentUserReacted, last_ts: n2._updatedAt }));\n  }, s4.prototype.applyEvent = function(e3) {\n    var t4 = this;\n    if (e3.key === this.key && this.updatedAt <= e3.updatedAt) if (e3._sampledUserIds) this._sampledUserIds = e3._sampledUserIds, this._sampledUserInfoList = [], Object.keys(e3._sampledUserInfoList).forEach(function(n3) {\n      t4._sampledUserInfoList.push(new qe$1(t4._iid, n3, e3._sampledUserInfoList[n3]));\n    }), this._count = e3._count, void 0 !== e3._hasCurrentUserReacted && (this._hasCurrentUserReacted = e3._hasCurrentUserReacted), this._updatedAt = e3.updatedAt;\n    else {\n      if (!this._version[e3.userId] || this._version[e3.userId] <= e3.updatedAt) {\n        var n2 = this._sampledUserIds.indexOf(e3.userId);\n        switch (e3.operation) {\n          case ke$1.ADD:\n            n2 < 0 && this._sampledUserIds.push(e3.userId);\n            break;\n          case ke$1.DELETE:\n            n2 >= 0 && this._sampledUserIds.splice(n2, 1);\n        }\n        this._count = this._sampledUserIds.length, this._version[e3.userId] = e3.updatedAt;\n      }\n      this._updatedAt = Math.max(this.updatedAt, e3.updatedAt);\n    }\n  }, s4;\n}(Jr$1), Be$1 = function() {\n  function n2(e3) {\n    this.secureUrl = null, this.type = null, this.width = 0, this.height = 0, this.alt = null, this.url = e3.url, e3.secure_url && (this.secureUrl = e3.secure_url), e3.type && (this.type = e3.type), e3.width && (this.width = e3.width), e3.height && (this.height = e3.height), e3.alt && (this.alt = e3.alt);\n  }\n  return n2.payloadify = function(n3) {\n    var r2, i3;\n    return se(oe({ url: n3.url, secure_url: n3.secureUrl, type: n3.type, width: null !== (r2 = n3.width) && void 0 !== r2 ? r2 : 0, height: null !== (i3 = n3.height) && void 0 !== i3 ? i3 : 0, alt: n3.alt }));\n  }, n2;\n}(), je$1 = function() {\n  function n2(e3) {\n    this.title = null, this.url = null, this.description = null, this.defaultImage = null, e3[\"og:title\"] && (this.title = e3[\"og:title\"]), e3[\"og:url\"] && (this.url = e3[\"og:url\"]), e3[\"og:description\"] && (this.description = e3[\"og:description\"]), e3[\"og:image\"] && (this.defaultImage = new Be$1(e3[\"og:image\"]));\n  }\n  return n2.payloadify = function(n3) {\n    return se(oe({ \"og:title\": n3.title, \"og:url\": n3.url, \"og:description\": n3.description, \"og:image\": n3.defaultImage ? Be$1.payloadify(n3.defaultImage) : null }));\n  }, n2;\n}(), Ke$1 = function() {\n  function n2(e3) {\n    var t4, n3;\n    this.volume = 0, this.name = null !== (t4 = e3.name) && void 0 !== t4 ? t4 : \"default\", this.volume = null !== (n3 = e3.volume) && void 0 !== n3 ? n3 : 1;\n  }\n  return n2.prototype.serialize = function() {\n    return { name: this.name, volume: this.volume };\n  }, n2.payloadify = function(n3) {\n    return se(oe({ name: n3.name, volume: n3.volume }));\n  }, n2;\n}();\n!function(e3) {\n  e3.GOOD = \"good\", e3.BAD = \"bad\";\n}(Le$1 || (Le$1 = {}));\nvar Qe$1 = function() {\n  function n2(e3) {\n    this.id = e3.id, this.rating = e3.rating, this.comment = e3.comment;\n  }\n  return n2._getStatus = function(e3) {\n    return e3 ? \"id\" in e3 ? \"SUBMITTED\" : \"NO_FEEDBACK\" : \"NOT_APPLICABLE\";\n  }, n2._isSubmitted = function(e3) {\n    return \"SUBMITTED\" === n2._getStatus(e3);\n  }, n2._getPayloadByStatus = function(e3) {\n    return \"NO_FEEDBACK\" === e3 ? {} : null;\n  }, n2.payloadify = function(n3) {\n    return se(oe({ id: n3.id, rating: n3.rating, comment: n3.comment }));\n  }, n2;\n}(), Ge = function(n2) {\n  function i3(e3, t4) {\n    var r2, i4 = this;\n    return (i4 = n2.call(this, e3, t4) || this).isBlockedByMe = false, i4.role = T$2(V, t4.role) ? t4.role : V.NONE, i4.isBlockedByMe = null !== (r2 = t4.is_blocked_by_me) && void 0 !== r2 && r2, i4;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { role: r2.role, is_blocked_by_me: r2.isBlockedByMe })));\n  }, i3;\n}(ls$2), Ve$1 = function() {\n  function n2(e3) {\n    this.key = e3.key, this.value = C$1(\"string\", e3.value) ? c([], a$1(e3.value), false) : [];\n  }\n  return n2.payloadify = function(n3) {\n    var r2;\n    return se(oe({ key: n3.key, value: null !== (r2 = n3.value) && void 0 !== r2 ? r2 : [] }));\n  }, n2;\n}(), He$2 = function(e3) {\n  switch (e3) {\n    case G.BASE:\n      return \"\";\n    case G.USER:\n      return \"MESG\";\n    case G.FILE:\n      return \"FILE\";\n    case G.ADMIN:\n      return \"ADMM\";\n  }\n}, We$1 = function(n2) {\n  function i3(e3, t4) {\n    var r2, i4, s4, a4, o2, u3, l2, d4, h4, p2 = this;\n    (p2 = n2.call(this, e3) || this).channelType = H$1.BASE, p2.messageType = G.BASE, p2.mentionType = null, p2.mentionedUsers = null, p2.mentionedUserIds = null, p2.metaArrays = [], p2.extendedMessage = {}, p2.createdAt = 0, p2.updatedAt = 0, p2.channelUrl = t4.channel_url, p2.channelType = T$2(H$1, t4.channel_type) ? t4.channel_type : H$1.GROUP, t4.channel && (t4.channel.channel_url && (p2.channelUrl = t4.channel.channel_url), t4.channel.channel_type && (p2.channelType = t4.channel.channel_type)), p2.data = null !== (r2 = t4.data) && void 0 !== r2 ? r2 : \"\", p2.customType = null !== (i4 = t4.custom_type) && void 0 !== i4 ? i4 : \"\", p2.mentionType = T$2(B, t4.mention_type) ? t4.mention_type : null, p2.mentionedUsers = t4.mentioned_users ? t4.mentioned_users.map(function(e4) {\n      return new ls$2(p2._iid, e4);\n    }) : null, p2.mentionedUserIds = null !== (s4 = t4.mentioned_user_ids) && void 0 !== s4 ? s4 : null, p2.mentionedUsers && !p2.mentionedUserIds && (p2.mentionedUserIds = p2.mentionedUsers.map(function(e4) {\n      return e4.userId;\n    }));\n    var m4 = null !== (a4 = t4.metaarray) && void 0 !== a4 ? a4 : {}, v2 = null !== (o2 = t4.metaarray_key_order) && void 0 !== o2 ? o2 : Object.keys(m4).sort(function(e4, t5) {\n      return e4.localeCompare(t5);\n    });\n    p2.metaArrays = [];\n    for (var y4 = 0; y4 < v2.length; y4++) {\n      var _2 = v2[y4];\n      p2.metaArrays.push(new Ve$1({ key: _2, value: m4[_2] || [] }));\n    }\n    return t4.sorted_metaarray && (p2.metaArrays = t4.sorted_metaarray.map(function(e4) {\n      return new Ve$1(e4);\n    })), p2.extendedMessage = null !== (u3 = t4.extended_message) && void 0 !== u3 ? u3 : {}, p2.extendedMessagePayload = t4.extended_message_payload, p2.createdAt = null !== (d4 = null !== (l2 = t4.created_at) && void 0 !== l2 ? l2 : t4.ts) && void 0 !== d4 ? d4 : 0, p2.updatedAt = null !== (h4 = t4.updated_at) && void 0 !== h4 ? h4 : 0, p2;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    var i4, s4;\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { channel_url: r2.channelUrl, channel_type: r2.channelType, type: He$2(r2.messageType), data: r2.data, custom_type: r2.customType, mention_type: r2.mentionType, mentioned_user_ids: r2.mentionedUserIds, mentioned_users: null === (i4 = r2.mentionedUsers) || void 0 === i4 ? void 0 : i4.map(function(e3) {\n      return ls$2.payloadify(e3);\n    }), sorted_metaarray: null === (s4 = r2.metaArrays) || void 0 === s4 ? void 0 : s4.map(function(e3) {\n      return Ve$1.payloadify(e3);\n    }), extended_message: r2.extendedMessage, extended_message_payload: r2.extendedMessagePayload, created_at: r2.createdAt, updated_at: r2.updatedAt })));\n  }, i3.prototype.isIdentical = function(e3) {\n    return true;\n  }, i3.prototype.isEqual = function(e3) {\n    return w$1(this, e3);\n  }, i3.prototype.isUserMessage = function() {\n    return this.messageType === G.USER;\n  }, i3.prototype.isFileMessage = function() {\n    return this.messageType === G.FILE && !Object.prototype.hasOwnProperty.call(this, \"fileInfoList\");\n  }, i3.prototype.isMultipleFilesMessage = function() {\n    return this.messageType === G.FILE && Object.prototype.hasOwnProperty.call(this, \"fileInfoList\");\n  }, i3.prototype.isAdminMessage = function() {\n    return this.messageType === G.ADMIN;\n  }, i3.prototype.serialize = function() {\n    return os$2(this);\n  }, i3.prototype.getMetaArraysByKeys = function(e3) {\n    return this.metaArrays.filter(function(t4) {\n      return e3.includes(t4.key);\n    });\n  }, i3;\n}(Jr$1), Ye$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2, i3, s4 = this;\n    return (s4 = e3.call(this, t5) || this).channelUrl = null !== (r2 = n2.channel_url) && void 0 !== r2 ? r2 : \"\", s4.channelType = null !== (i3 = n2.channel_type) && void 0 !== i3 ? i3 : H$1.GROUP, s4.reader = new ls$2(s4._iid, n2.user), s4.readAt = n2.ts, s4;\n  }\n  return t$2(t4, e3), t4;\n}(Jr$1), Je$1 = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelUrl;\n    return e3.call(this, { code: \"READ\", ackRequired: true, payload: { channel_url: n2 } }) || this;\n  }\n  return t$2(t4, e3), t4;\n}(Ge$1);\n(function(n2) {\n  function s4(r2) {\n    var s5 = n2.call(this) || this, a4 = r2.channelUrl, o2 = r2.channelType, u3 = r2.userId, c3 = r2.notificationIds;\n    return s5.method = ae.PUT, s5.path = \"\".concat(Re$3(o2), \"/\").concat(encodeURIComponent(a4), \"/messages/mark_as_read\"), s5.params = se(oe({ user_id: u3, message_ids: c3 })), s5;\n  }\n  return t$2(s4, n2), s4;\n})(Fe$2);\nvar Ze$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"READ\", r2) || this;\n    return i3.readStatus = new Ye$1(t5, r2), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2);\n(function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.readAt = n2.ts, r2.unreadMessageCount = n2.unread_message_count, r2;\n  }\n  return t$2(t4, e3), t4;\n})(qe$2);\nvar et = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelUrl, r2 = t5.messageId;\n    return e3.call(this, { code: \"READ\", ackRequired: true, payload: { channel_url: n2, parent_message_id: r2 } }) || this;\n  }\n  return t$2(t4, e3), t4;\n}(Ge$1), tt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.pushEnabled, o2 = e3.call(this) || this;\n    return o2.method = ae.PUT, o2.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/thread_push\"), o2.params = { push_enabled: a4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    return e3.call(this, t5, n2) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar nt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.rating, o2 = t5.comment, u3 = e3.call(this) || this;\n    return u3.method = ae.POST, u3.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/feedbacks\"), u3.params = { rating: a4, comment: o2 }, u3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), rt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.feedback = new Qe$1(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), it = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.feedbackId, o2 = t5.rating, u3 = t5.comment, c3 = e3.call(this) || this;\n    return c3.method = ae.PUT, c3.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/feedbacks/\").concat(a4), c3.params = { rating: o2, comment: u3 }, c3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), st = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.feedback = new Qe$1(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), at = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.feedbackId, o2 = e3.call(this) || this;\n    return o2.method = ae.DELETE, o2.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/feedbacks/\").concat(a4), o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.feedback = new Qe$1(n2), r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar ot, ut, ct = function(i3) {\n  function s4(e3, t4) {\n    var n2, r2, s5, a4, o2, c3 = this;\n    return (c3 = i3.call(this, e3) || this).plainUrl = \"\", c3.fileName = null, c3.mimeType = null, c3.fileSize = 0, c3.thumbnails = [], c3._requireAuth = false, c3.plainUrl = null !== (n2 = t4.url) && void 0 !== n2 ? n2 : \"\", c3.fileName = null !== (r2 = t4.file_name) && void 0 !== r2 ? r2 : null, c3.mimeType = null !== (s5 = t4.file_type) && void 0 !== s5 ? s5 : null, c3.fileSize = null !== (a4 = t4.file_size) && void 0 !== a4 ? a4 : 0, c3._requireAuth = null !== (o2 = t4.require_auth) && void 0 !== o2 && o2, c3.thumbnails = t4.thumbnails ? t4.thumbnails.map(function(e4) {\n      var t5;\n      return new Pe$2(c3._iid, \"string\" == typeof e4 ? { url: e4, width: 0, height: 0 } : n$2(n$2({}, e4), { url: (null !== (t5 = e4.url) && void 0 !== t5 ? t5 : \"\").split(\"auth=\")[0] }), c3._requireAuth);\n    }) : [], c3;\n  }\n  return t$2(s4, i3), s4.payloadify = function(n2) {\n    var r2;\n    return se(oe({ url: n2.plainUrl, file_name: n2.fileName, file_type: n2.mimeType, file_size: n2.fileSize, thumbnails: null === (r2 = n2.thumbnails) || void 0 === r2 ? void 0 : r2.map(function(e3) {\n      var t4;\n      return { url: (null !== (t4 = e3.plainUrl) && void 0 !== t4 ? t4 : \"\").split(\"auth=\")[0], width: e3.width, height: e3.height, real_width: e3.realWidth, real_height: e3.realHeight };\n    }), require_auth: n2._requireAuth }));\n  }, Object.defineProperty(s4.prototype, \"url\", { get: function() {\n    var e3 = uo.of(this._iid).sessionManager;\n    return this._requireAuth && e3.ekey ? \"\".concat(this.plainUrl, \"?auth=\").concat(e3.ekey) : this.plainUrl;\n  }, enumerable: false, configurable: true }), s4;\n}(Jr$1), lt = function(e3) {\n  var t4 = e3.channelUrl, n2 = e3.channelType, r2 = e3.parentMessage;\n  this.channelUrl = t4, this.channelType = n2, this.parentMessage = r2;\n};\n!function(e3) {\n  e3.NUMBER = \"number\", e3.ENUM = \"enum\", e3.TEXT = \"text\", e3.REGEX = \"regex\", e3.DECIMAL_PLACE = \"decimal_place\";\n}(ot || (ot = {})), function(e3) {\n  e3.TEXT = \"text\", e3.TEXTAREA = \"textarea\", e3.NUMBER = \"number\", e3.PHONE = \"phone\", e3.EMAIL = \"email\", e3.CHIP = \"chip\";\n}(ut || (ut = {}));\nvar dt, ht, ft = function() {\n  function n2(e3, t4) {\n    var n3 = t4.id, r2 = t4.name, i3 = t4.items, s4 = t4.version, a4 = t4.is_submitted;\n    this.messageId = e3, this.id = n3, this.name = r2, this.items = i3.map(function(e4) {\n      return new pt(e4);\n    }).sort(function(e4, t5) {\n      return e4.sortOrder - t5.sortOrder;\n    }), this.version = null != s4 ? s4 : 1, this._isSubmitted = a4;\n  }\n  return Object.defineProperty(n2.prototype, \"isSubmitted\", { get: function() {\n    var e3;\n    return null !== (e3 = this._isSubmitted) && void 0 !== e3 ? e3 : this.items.some(function(e4) {\n      return Array.isArray(e4.submittedValues);\n    });\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isSubmittable\", { get: function() {\n    return this.items.every(function(e3) {\n      return e3.required ? !!(Array.isArray(e3.draftValues) && e3.draftValues.length > 0) && e3.isValid(e3.draftValues) : !(Array.isArray(e3.draftValues) && e3.draftValues.length > 0) || e3.isValid(e3.draftValues);\n    });\n  }, enumerable: false, configurable: true }), n2.payloadify = function(n3) {\n    return se(oe({ id: n3.id, name: n3.name, items: n3.items.map(function(e3) {\n      return pt.payloadify(e3);\n    }), version: n3.version, is_submitted: n3._isSubmitted }));\n  }, n2.isMessageFormPayload = function(e3) {\n    return Boolean(null == e3 ? void 0 : e3.message_form);\n  }, n2;\n}(), pt = function() {\n  function n2(t4) {\n    var n3 = t4.id, r2 = t4.name, i3 = t4.required, s4 = t4.sort_order, a4 = t4.placeholder, o2 = t4.style, u3 = t4.item_type, c3 = t4.validators, l2 = t4.value, d4 = t4.values;\n    this.id = n3, this.name = r2, this.required = i3, this.sortOrder = s4, this.placeholder = a4, 0 === Object.keys(o2).length ? this.style = { layout: u3 } : this.style = se({ layout: o2.layout, options: o2.options, defaultOptions: o2.default_options, resultCount: o2.result_count }), d4 ? this.submittedValues = d4 : l2 && (this.submittedValues = [l2]), this._validators = c3;\n  }\n  return n2.prototype.isValid = function(e3) {\n    var t4 = this;\n    return e3.every(function(e4) {\n      var n3 = function(e5, t5) {\n        return t5.every(function(t6) {\n          switch (t6.key) {\n            case ot.NUMBER:\n              var n4 = Number(e5);\n              return !(isNaN(n4) || t6.min && \"number\" != typeof t6.min || t6.max && \"number\" != typeof t6.max || \"number\" == typeof t6.min && n4 < t6.min || \"number\" == typeof t6.max && n4 > t6.max);\n            case ot.ENUM:\n              return \"string\" == typeof e5 && (!(t6.enums && Array.isArray(t6.enums) && t6.enums.length > 0 && !t6.enums.includes(e5)) || t6.allow_other);\n            case ot.TEXT:\n              return !(\"string\" != typeof e5 || \"number\" == typeof t6.min_length && e5.length < t6.min_length || \"number\" == typeof t6.max_length && e5.length > t6.max_length);\n            case ot.REGEX:\n              if (\"string\" != typeof e5) return false;\n              if (t6.regex) {\n                if (\"string\" != typeof t6.regex) return false;\n                if (!new RegExp(t6.regex).test(e5)) return false;\n              }\n              return true;\n            case ot.DECIMAL_PLACE:\n              return 0 !== e5.length && (n4 = Number(e5), !(isNaN(n4) || (!t6.max_decimal_place || \"number\" == typeof t6.max_decimal_place) && t6.max_decimal_place && !function(e6, t7) {\n                var n5 = e6.toString(), r2 = n5.indexOf(\".\");\n                return -1 === r2 || n5.slice(r2 + 1).length <= t7;\n              }(n4, t6.max_decimal_place)));\n            default:\n              return true;\n          }\n        });\n      }(e4, t4._validators);\n      return n3;\n    });\n  }, n2.payloadify = function(n3) {\n    return se(oe({ id: n3.id, name: n3.name, required: n3.required, sort_order: n3.sortOrder, placeholder: n3.placeholder, style: se({ layout: n3.style.layout, options: n3.style.options, default_options: n3.style.defaultOptions, result_count: n3.style.resultCount }), item_type: n3.style.layout, validators: n3._validators, values: n3.submittedValues }));\n  }, n2;\n}(), mt = function(t4) {\n  function n2(n3) {\n    var r2 = t4.call(this) || this;\n    return r2.method = ae.POST, r2.path = \"\".concat(Oe$1, \"/\").concat(n3.formId, \"/submit\"), r2.params = se({ message_id: n3.messageId, items: n3.items }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(e3) {\n  e3.PENDING = \"pending\", e3.SENT = \"sent\", e3.FAILED = \"failed\", e3.CANCELED = \"canceled\";\n}(dt || (dt = {})), function(e3) {\n  e3.PENDING = \"pending\", e3.IN_QUEUE = \"in_queue\", e3.SENT = \"sent\", e3.FAILED = \"failed\", e3.CANCELED = \"canceled\", e3.REMOVED = \"removed\";\n}(ht || (ht = {}));\nvar vt, yt = function(i3) {\n  function s4(e3, t4) {\n    var n2, r2, s5, a4, o2, u3, c3, l2, d4, h4 = this;\n    return (h4 = i3.call(this, e3, t4) || this).parentMessage = null, h4.silent = false, h4.isOperatorMessage = false, h4.threadInfo = null, h4.reactions = [], h4.appleCriticalAlertOptions = null, h4.scheduledInfo = null, h4.suggestedReplies = null, h4.myFeedback = null, h4.myFeedbackStatus = \"NOT_APPLICABLE\", h4.messageForm = null, h4._isContinuousMessages = false, h4._scheduledStatus = null, h4._poll = null, h4.messageId = null !== (r2 = null !== (n2 = t4.msg_id) && void 0 !== n2 ? n2 : t4.message_id) && void 0 !== r2 ? r2 : 0, h4.parentMessageId = null !== (s5 = \"string\" == typeof t4.parent_message_id ? parseInt(t4.parent_message_id) : t4.parent_message_id) && void 0 !== s5 ? s5 : 0, h4.threadInfo = t4.thread_info ? new De$2(h4._iid, t4.thread_info) : null, t4.reactions_summary ? h4.reactions = t4.reactions_summary.map(function(t5) {\n      return new ze$1(e3, t5);\n    }) : t4.reactions ? h4.reactions = t4.reactions.map(function(t5) {\n      return new ze$1(e3, t5);\n    }) : h4.reactions = [], h4.ogMetaData = t4.og_tag ? new je$1(t4.og_tag) : null, h4.silent = null !== (a4 = t4.silent) && void 0 !== a4 && a4, h4.isOperatorMessage = null !== (o2 = t4.is_op_msg) && void 0 !== o2 && o2, h4.appleCriticalAlertOptions = t4.apple_critical_alert_options ? new Ke$1(t4.apple_critical_alert_options) : null, \"number\" == typeof t4.scheduled_message_id && \"number\" == typeof t4.scheduled_at && t4.scheduled_status && (h4.scheduledInfo = { scheduledMessageId: t4.scheduled_message_id, scheduledAt: t4.scheduled_at }, h4._scheduledStatus = t4.scheduled_status), h4._isContinuousMessages = null !== (u3 = t4.is_continuous_messages) && void 0 !== u3 && u3, h4.myFeedback = Qe$1._isSubmitted(t4.feedback) ? new Qe$1(t4.feedback) : null, h4.myFeedbackStatus = Qe$1._getStatus(t4.feedback), h4.suggestedReplies = null !== (l2 = null === (c3 = t4.extended_message_payload) || void 0 === c3 ? void 0 : c3.suggested_replies) && void 0 !== l2 ? l2 : null, h4.messageForm = ft.isMessageFormPayload(t4.extended_message_payload) ? new ft(h4.messageId, t4.extended_message_payload.message_form) : null, h4.message = null !== (d4 = t4.message) && void 0 !== d4 ? d4 : \"\", h4._poll = t4.poll ? new Io(h4._iid, t4.poll) : null, h4;\n  }\n  return t$2(s4, i3), s4.payloadify = function(n2) {\n    var r2, s5;\n    return se(oe(n$2(n$2({}, i3.payloadify.call(this, n2)), { message_id: n2.messageId, parent_message_id: n2.parentMessageId, thread_info: n2.threadInfo ? De$2.payloadify(n2.threadInfo) : null, reactions_summary: n2.reactions.map(function(e3) {\n      return ze$1.payloadify(e3);\n    }), og_tag: n2.ogMetaData ? je$1.payloadify(n2.ogMetaData) : null, silent: n2.silent, is_op_msg: n2.isOperatorMessage, apple_critical_alert_options: n2.appleCriticalAlertOptions ? Ke$1.payloadify(n2.appleCriticalAlertOptions) : null, scheduled_message_id: null === (r2 = n2.scheduledInfo) || void 0 === r2 ? void 0 : r2.scheduledMessageId, scheduled_at: null === (s5 = n2.scheduledInfo) || void 0 === s5 ? void 0 : s5.scheduledAt, scheduled_status: n2._scheduledStatus, feedback: n2.myFeedback ? Qe$1.payloadify(n2.myFeedback) : Qe$1._getPayloadByStatus(n2.myFeedbackStatus), message: n2.message, poll: n2._poll ? Io.payloadify(n2._poll) : null })));\n  }, s4._getParentMessageInfoPayload = function(n2) {\n    return se(oe({ type: He$2(n2.messageType), ts: n2.createdAt, user: n2.sender ? Ge.payloadify(n2.sender) : null, message: n2.message, file: { url: n2.plainUrl, name: n2.name, type: n2.type, require_auth: n2.requireAuth }, files: Array.isArray(n2.fileInfoList) ? n2.fileInfoList.map(function(e3) {\n      return ct.payloadify(e3);\n    }) : null }));\n  }, s4.prototype.isIdentical = function(e3) {\n    return this.messageId === e3.messageId;\n  }, s4.prototype.applyThreadInfoUpdateEvent = function(e3) {\n    return this.messageId === e3.targetMessageId && (e3.threadInfo._isUpdateRequired && this.threadInfo && e3.threadInfo._updateFrom(this.threadInfo), this.threadInfo = e3.threadInfo, true);\n  }, s4.prototype._findReactionIndex = function(e3) {\n    for (var t4 = 0; t4 < this.reactions.length; t4++) if (this.reactions[t4].key === e3) return t4;\n    return -1;\n  }, s4.prototype.applyReactionEvent = function(e3) {\n    var t4 = uo.of(this._iid).sdkState;\n    if (this.messageId === e3.messageId) switch (e3.operation) {\n      case ke$1.ADD:\n        e3.userId === t4.userId && (e3._hasCurrentUserReacted = true), -1 !== (r2 = this._findReactionIndex(e3.key)) ? this.reactions[r2].applyEvent(e3) : e3._sampledUserIds ? this.reactions.push(new ze$1(this._iid, { key: e3.key, sampled_user_ids: e3._sampledUserIds, sampled_user_info: e3._sampledUserInfoList, count: e3._count, is_self_included: e3._hasCurrentUserReacted, last_ts: e3.updatedAt })) : this.reactions.push(new ze$1(this._iid, { key: e3.key, user_ids: [e3.userId], updated_at: e3.updatedAt }));\n        break;\n      case ke$1.DELETE:\n        var r2;\n        -1 !== (r2 = this._findReactionIndex(e3.key)) && (e3._sampledUserIds ? 0 === e3._count ? this.reactions.splice(r2, 1) : (e3.userId === t4.userId && (e3._hasCurrentUserReacted = false), this.reactions[r2].applyEvent(e3)) : (this.reactions[r2].applyEvent(e3), this.reactions[r2].isEmpty && this.reactions.splice(r2, 1)));\n    }\n  }, s4.prototype.applyParentMessage = function(e3) {\n    if (!this.parentMessage) return this.parentMessage = e3, true;\n    if (this.parentMessageId === e3.messageId) {\n      var t4 = this.parentMessage.updatedAt;\n      if (e3.updatedAt >= t4) return this.parentMessage = e3, true;\n    }\n    return false;\n  }, s4.prototype.applyPoll = function(e3) {\n    return !(this._poll && this._poll.id === e3.id && this._poll.updatedAt > e3.updatedAt) && (this._poll = e3, true);\n  }, Object.defineProperty(s4.prototype, \"poll\", { get: function() {\n    return this._poll;\n  }, enumerable: false, configurable: true }), s4.prototype._triggerThreadInfoUpdatedEvent = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3;\n      return s$1(this, function(t4) {\n        return (e3 = uo.of(this._iid).dispatcher).dispatch(new lt({ channelType: H$1.GROUP, channelUrl: this.channelUrl, parentMessage: this })), e3.dispatch(new po({ messages: [this], source: no.EVENT_MESSAGE_THREADINFO_UPDATED })), [2];\n      });\n    });\n  }, s4.prototype.markThreadAsRead = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new et({ channelUrl: this.channelUrl, messageId: this.messageId }), [4, e3.send(t4)];\n          case 1:\n            return r2.sent(), this.threadInfo && 0 !== this.threadInfo.unreadReplyCount ? (this.threadInfo.unreadReplyCount = 0, [4, this._triggerThreadInfoUpdatedEvent()]) : [3, 3];\n          case 2:\n            r2.sent(), r2.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, s4.prototype.setPushNotificationEnabled = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return t4 = uo.of(this._iid).requestQueue, r2 = new tt({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, pushEnabled: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), this.threadInfo && this.threadInfo.isPushNotificationEnabled !== e3 && (this.threadInfo.isPushNotificationEnabled = e3), [2];\n        }\n      });\n    });\n  }, s4.prototype.submitMessageForm = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            if (t4 = uo.of(this._iid).requestQueue, r2 = null, i4 = null, s5 = this.messageForm, !e3 && s5) {\n              if (!s5.isSubmittable) throw new b$2({ code: u$1.INVALID_PARAMETER, message: \"The form is not submittable. Please check all form items are valid before submitting.\" });\n              if (s5.isSubmitted) throw new b$2({ code: u$1.INVALID_PARAMETER, message: \"The form has already been submitted.\" });\n              r2 = s5.id, i4 = s5.items.reduce(function(e4, t5) {\n                return e4.push({ form_item_id: t5.id, values: Array.isArray(t5.draftValues) ? t5.draftValues : [] }), e4;\n              }, []);\n            } else e3 && (r2 = e3.formId, i4 = Object.entries(e3.answers).reduce(function(e4, t5) {\n              var n2 = a$1(t5, 2), r3 = n2[0], i5 = n2[1], s6 = Number(r3);\n              if (Number.isNaN(s6)) throw new b$2({ code: u$1.INVALID_PARAMETER, message: \"Keys in answers must be numeric string.\" });\n              return e4.push({ form_item_id: s6, value: i5 }), e4;\n            }, []));\n            if (!r2 || !i4) throw new b$2({ code: u$1.INVALID_PARAMETER, message: \"Missing one or more required inputs: formId, answers.\" });\n            return a4 = new mt({ messageId: this.messageId, formId: r2, items: i4 }), [4, t4.send(a4)];\n          case 1:\n            return o2.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.submitFeedback = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5, a4, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return t4 = uo.of(this._iid), r2 = t4.requestQueue, i4 = t4.dispatcher, s5 = new nt({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, rating: e3.rating, comment: e3.comment }), [4, r2.send(s5)];\n          case 1:\n            return a4 = u3.sent(), o2 = a4.as(rt), this.myFeedback = o2.feedback, this.myFeedbackStatus = \"SUBMITTED\", i4.dispatch(new po({ messages: [this], source: no.EVENT_MESSAGE_FEEDBACK_ADDED })), [2];\n        }\n      });\n    });\n  }, s4.prototype.updateFeedback = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5, a4, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return t4 = uo.of(this._iid), r2 = t4.requestQueue, i4 = t4.dispatcher, s5 = new it({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, feedbackId: e3.id, rating: e3.rating, comment: e3.comment }), [4, r2.send(s5)];\n          case 1:\n            return a4 = u3.sent(), o2 = a4.as(st), this.myFeedback = o2.feedback, this.myFeedbackStatus = \"SUBMITTED\", i4.dispatch(new po({ messages: [this], source: no.EVENT_MESSAGE_FEEDBACK_UPDATED })), [2];\n        }\n      });\n    });\n  }, s4.prototype.deleteFeedback = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return t4 = uo.of(this._iid), r2 = t4.requestQueue, i4 = t4.dispatcher, s5 = new at({ channelUrl: this.channelUrl, channelType: this.channelType, messageId: this.messageId, feedbackId: e3 }), [4, r2.send(s5)];\n          case 1:\n            return a4.sent(), this.myFeedback = null, this.myFeedbackStatus = \"NO_FEEDBACK\", i4.dispatch(new po({ messages: [this], source: no.EVENT_MESSAGE_FEEDBACK_DELETED })), [2];\n        }\n      });\n    });\n  }, s4;\n}(We$1), _t = function(n2) {\n  function i3(e3, t4) {\n    var r2, i4, s4, a4, o2 = this;\n    if ((o2 = n2.call(this, e3, t4) || this).reqId = \"\", o2.replyToChannel = false, o2.errorCode = 0, o2.sender = t4.user ? new Ge(o2._iid, t4.user) : t4.sender_id, o2.reqId = null !== (i4 = null !== (r2 = t4.req_id) && void 0 !== r2 ? r2 : t4.request_id) && void 0 !== i4 ? i4 : \"\", o2.replyToChannel = null !== (s4 = t4.is_reply_to_channel) && void 0 !== s4 && s4, t4.request_state && T$2(Z, t4.request_state) && (o2.sendingStatus = t4.request_state), !o2.sendingStatus) if (o2.messageId > 0) o2.sendingStatus = Z.SUCCEEDED;\n    else if (o2.scheduledInfo) switch (t4.scheduled_status && (o2._scheduledStatus = t4.scheduled_status), t4.scheduled_status) {\n      case ht.SENT:\n      case ht.IN_QUEUE:\n        o2.sendingStatus = Z.SUCCEEDED;\n        break;\n      case ht.PENDING:\n        o2.sendingStatus = Z.SCHEDULED;\n        break;\n      case ht.FAILED:\n      case ht.REMOVED:\n        o2.sendingStatus = Z.FAILED;\n        break;\n      case ht.CANCELED:\n        o2.sendingStatus = Z.CANCELED;\n    }\n    else o2.sendingStatus = Z.PENDING;\n    return o2.errorCode = null !== (a4 = t4.error_code) && void 0 !== a4 ? a4 : 0, o2._messageToken = t4.mesg_token, o2;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { user: Ge.payloadify(r2.sender), req_id: r2.reqId, is_reply_to_channel: r2.replyToChannel, request_state: r2.sendingStatus, error_code: r2.errorCode, mesg_token: r2._messageToken })));\n  }, Object.defineProperty(i3.prototype, \"isResendable\", { get: function() {\n    return (this.sendingStatus === Z.FAILED || this.sendingStatus === Z.CANCELED) && I$2(this.errorCode);\n  }, enumerable: false, configurable: true }), i3.prototype.isIdentical = function(e3) {\n    return this.messageId > 0 && e3.messageId > 0 ? this.messageId === e3.messageId : this.reqId === e3.reqId;\n  }, i3;\n}(yt), gt = { prevResultSize: 0, nextResultSize: 0, isInclusive: false, reverse: false, messageTypeFilter: j.ALL, customTypesFilter: void 0, senderUserIdsFilter: void 0, includeReactions: false, includeMetaArray: false, includeParentMessageInfo: false }, bt = function(e3) {\n  return S$1(\"number\", e3.prevResultSize) && S$1(\"number\", e3.nextResultSize) && S$1(\"boolean\", e3.isInclusive) && S$1(\"boolean\", e3.reverse) && S$1(\"string\", e3.messageTypeFilter) && T$2(j, e3.messageTypeFilter) && C$1(\"string\", e3.customTypesFilter, true) && C$1(\"string\", e3.senderUserIdsFilter, true) && S$1(\"boolean\", e3.includeMetaArray) && S$1(\"boolean\", e3.includeReactions) && S$1(\"boolean\", e3.includeParentMessageInfo);\n}, It$1 = function(n2) {\n  function i3(r2, i4) {\n    var s4, a4, o2, c3 = this;\n    if ((c3 = n2.call(this, r2, i4) || this).translations = {}, c3.messageType = G.ADMIN, c3.translations = null !== (s4 = i4.translations) && void 0 !== s4 ? s4 : {}, i4.parent_message_info) {\n      var l2 = i4.parent_message_info;\n      c3.parentMessage = At$1(r2, se(oe(n$2(n$2({}, l2), { message_id: c3.parentMessageId, channel_url: c3.channelUrl, channel_type: c3.channelType, file: l2.file, url: null === (a4 = l2.file) || void 0 === a4 ? void 0 : a4.url, require_auth: null === (o2 = l2.file) || void 0 === o2 ? void 0 : o2.require_auth }))));\n    }\n    return c3;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { translations: r2.translations, parent_message_info: r2.parentMessage ? n2._getParentMessageInfoPayload.call(this, r2.parentMessage) : null })));\n  }, i3.prototype.getThreadedMessagesByTimestamp = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n3 = n$2(n$2({}, gt), t4), cs$2(this.messageId > 0 && S$1(\"number\", e3) && bt(n3)).throw(b$2.invalidParameters), [4, la.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n3)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, i3;\n}(yt), Et$1 = function() {\n  function n2(e3) {\n    var t4, n3;\n    this.detail = {}, this.type = null !== (t4 = e3.type) && void 0 !== t4 ? t4 : \"\", this.vendor = null !== (n3 = e3.vendor) && void 0 !== n3 ? n3 : \"\", e3.detail && S$1(\"object\", e3.detail) && !Array.isArray(e3.detail) && (this.detail = e3.detail);\n  }\n  return n2.payloadify = function(n3) {\n    return se(oe({ type: n3.type, vendor: n3.vendor, detail: n3.detail }));\n  }, n2;\n}(), Tt$1 = function() {\n  function t4(e3) {\n    this.status = e3.status, e3.original_message_info && (this.originalMessageInfo = { createdAt: e3.original_message_info.ts, messageId: e3.original_message_info.id });\n  }\n  return t4.payloadify = function(t5) {\n    return se({ status: t5.status, original_message_info: t5.originalMessageInfo ? { id: t5.originalMessageInfo.messageId, ts: t5.originalMessageInfo.createdAt } : void 0 });\n  }, t4;\n}(), wt = function(n2) {\n  function i3(r2, i4) {\n    var s4, a4, o$1, c3, l2, d4, h4, f2 = this;\n    if ((f2 = n2.call(this, r2, i4) || this).messageParams = null, f2.mentionedMessageTemplate = void 0, f2.translations = {}, f2.translationTargetLanguages = [], f2.messageSurvivalSeconds = -1, f2.plugins = [], f2.messageType = G.USER, f2.translations = null !== (o$1 = i4.translations) && void 0 !== o$1 ? o$1 : {}, f2.translationTargetLanguages = null !== (c3 = i4.target_langs) && void 0 !== c3 ? c3 : [], 0 === Object.keys(f2.translations).length && f2.translationTargetLanguages.length > 0) try {\n      for (var p2 = o(f2.translationTargetLanguages), m4 = p2.next(); !m4.done; m4 = p2.next()) {\n        var y4 = m4.value;\n        f2.translations[y4] = \"\";\n      }\n    } catch (e3) {\n      s4 = { error: e3 };\n    } finally {\n      try {\n        m4 && !m4.done && (a4 = p2.return) && a4.call(p2);\n      } finally {\n        if (s4) throw s4.error;\n      }\n    }\n    if (f2.mentionedMessageTemplate = i4.mentioned_message_template, f2.messageSurvivalSeconds = null !== (l2 = i4.message_survival_seconds) && void 0 !== l2 ? l2 : -1, f2.plugins = i4.plugins ? i4.plugins.map(function(e3) {\n      return new Et$1(e3);\n    }) : [], i4.parent_message_info) {\n      var _2 = i4.parent_message_info;\n      f2.parentMessage = At$1(r2, se(oe(n$2(n$2({}, _2), { created_at: _2.ts, message_id: f2.parentMessageId, channel_url: f2.channelUrl, channel_type: f2.channelType, file: _2.file, url: null === (d4 = _2.file) || void 0 === d4 ? void 0 : d4.url, require_auth: null === (h4 = _2.file) || void 0 === h4 ? void 0 : h4.require_auth }))));\n    }\n    return i4.review_info && (f2.messageReviewInfo = new Tt$1(i4.review_info)), f2;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { translations: r2.translations, message_survival_seconds: r2.messageSurvivalSeconds, mentioned_message_template: r2.mentionedMessageTemplate, plugins: r2.plugins.map(function(e3) {\n      return Et$1.payloadify(e3);\n    }), parent_message_info: r2.parentMessage ? n2._getParentMessageInfoPayload.call(this, r2.parentMessage) : null, review_info: r2.messageReviewInfo ? Tt$1.payloadify(r2.messageReviewInfo) : void 0 })));\n  }, i3.prototype.getThreadedMessagesByTimestamp = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n3 = n$2(n$2({}, gt), t4), cs$2(this.messageId > 0 && S$1(\"number\", e3) && bt(n3)).throw(b$2.invalidParameters), [4, la.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n3)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, i3;\n}(_t), Mt$1 = function(n2) {\n  function i3(r2, i4) {\n    var s4, a4, o2, c3, l2, d4, h4, f2, p2 = this;\n    if ((p2 = n2.call(this, r2, i4) || this).messageParams = null, p2.fileInfoList = [], p2.messageSurvivalSeconds = -1, p2.messageType = G.FILE, p2.data = null !== (o2 = null !== (a4 = null === (s4 = i4.file) || void 0 === s4 ? void 0 : s4.data) && void 0 !== a4 ? a4 : i4.custom) && void 0 !== o2 ? o2 : \"\", p2.fileInfoList = null !== (l2 = null === (c3 = i4.files) || void 0 === c3 ? void 0 : c3.map(function(e3) {\n      return new ct(r2, e3);\n    })) && void 0 !== l2 ? l2 : [], p2.messageSurvivalSeconds = null !== (d4 = i4.message_survival_seconds) && void 0 !== d4 ? d4 : -1, i4.parent_message_info) {\n      var m4 = i4.parent_message_info;\n      p2.parentMessage = At$1(r2, se(oe(n$2(n$2({}, m4), { created_at: m4.ts, message_id: p2.parentMessageId, channel_url: p2.channelUrl, channel_type: p2.channelType, file: m4.file, url: null === (h4 = m4.file) || void 0 === h4 ? void 0 : h4.url, require_auth: null === (f2 = m4.file) || void 0 === f2 ? void 0 : f2.require_auth }))));\n    }\n    return p2;\n  }\n  return t$2(i3, n2), i3.prototype.getThreadedMessagesByTimestamp = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n3 = n$2(n$2({}, gt), t4), cs$2(this.messageId > 0 && S$1(\"number\", e3) && bt(n3)).throw(b$2.invalidParameters), [4, la.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n3)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, i3.payloadify = function(r2) {\n    var i4, s4, a4, o2, c3, l2;\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { file: { name: null !== (s4 = null === (i4 = r2.fileInfoList[0]) || void 0 === i4 ? void 0 : i4.fileName) && void 0 !== s4 ? s4 : \"\", size: null !== (o2 = null === (a4 = r2.fileInfoList[0]) || void 0 === a4 ? void 0 : a4.fileSize) && void 0 !== o2 ? o2 : 0, type: null !== (l2 = null === (c3 = r2.fileInfoList[0]) || void 0 === c3 ? void 0 : c3.mimeType) && void 0 !== l2 ? l2 : \"\", data: r2.data }, files: Array.isArray(r2.fileInfoList) ? r2.fileInfoList.map(function(e3) {\n      return ct.payloadify(e3);\n    }) : null, message_survival_seconds: r2.messageSurvivalSeconds, parent_message_info: r2.parentMessage ? n2._getParentMessageInfoPayload.call(this, r2.parentMessage) : null })));\n  }, i3._isMultipleFilesMessagePayload = function(e3) {\n    var t4 = e3.files;\n    return Array.isArray(t4) && t4.length >= 2;\n  }, i3._isMultipleFilesMessageSerializedData = function(e3) {\n    var t4 = e3.fileInfoList;\n    return Array.isArray(t4);\n  }, i3;\n}(_t);\n!function(e3) {\n  e3.SENT = \"SENT\", e3.READ = \"READ\";\n}(vt || (vt = {}));\nvar St$1 = function(n2) {\n  function i3(e3, t4) {\n    var r2, i4, s4 = this;\n    if ((s4 = n2.call(this, e3, t4) || this).notificationData = null, s4.notificationId = t4.notification_message_id, s4.messageType = G.ADMIN, s4.messageStatus = null !== (r2 = t4.message_status) && void 0 !== r2 ? r2 : vt.SENT, s4.priority = null !== (i4 = t4.priority) && void 0 !== i4 ? i4 : X.NORMAL, s4.notificationEventDeadline = t4.notification_event_deadline, 0 === s4.extendedMessage.sub_type) try {\n      var a4 = JSON.parse(s4.extendedMessage.sub_data), o2 = a4.label, u3 = a4.tags, c3 = void 0 === u3 ? [] : u3, l2 = a4.template_key, d4 = a4.template_variables;\n      s4.notificationData = { label: o2, tags: c3, templateKey: l2, templateVariables: d4 };\n    } catch (e4) {\n    }\n    return s4;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), { notification_message_id: r2.notificationId, message_status: r2.messageStatus, priority: r2.priority, notification_event_deadline: r2.notificationEventDeadline })));\n  }, i3.prototype.isIdentical = function(e3) {\n    return this.notificationId === e3.notificationId;\n  }, i3;\n}(We$1), Ut$1 = function(e3) {\n  if (e3.notificationId) return St$1.payloadify(e3);\n  switch (e3.messageType) {\n    case G.USER:\n      return wt.payloadify(e3);\n    case G.FILE:\n      return e3.fileInfoList ? Mt$1.payloadify(e3) : Nt$1.payloadify(e3);\n    case G.ADMIN:\n      return It$1.payloadify(e3);\n    default:\n      throw b$2.unknown;\n  }\n}, At$1 = function(e3, t4) {\n  if (t4.notification_message_id) return new St$1(e3, t4);\n  switch (t4.type) {\n    case \"MESG\":\n      return new wt(e3, t4);\n    case \"FILE\":\n      return Mt$1._isMultipleFilesMessagePayload(t4) ? new Mt$1(e3, t4) : new Nt$1(e3, t4);\n    case \"ADMM\":\n    case \"BRDM\":\n      return new It$1(e3, t4);\n    default:\n      return null;\n  }\n}, Nt$1 = function(i3) {\n  function s4(n2, r2) {\n    var s5, a4, o2, c3, l2, d4, h4, f2, p2, m4, v2, y4, _2, b3, I3 = this;\n    (I3 = i3.call(this, n2, r2) || this).messageParams = null, I3.plainUrl = \"\", I3.requireAuth = false, I3.thumbnails = [], I3.messageSurvivalSeconds = -1, I3.messageType = G.FILE;\n    var E3 = r2.file;\n    if (I3.plainUrl = (null !== (a4 = null !== (s5 = null == E3 ? void 0 : E3.url) && void 0 !== s5 ? s5 : r2.url) && void 0 !== a4 ? a4 : \"\").split(\"?auth=\")[0], I3.name = null !== (c3 = null !== (o2 = null == E3 ? void 0 : E3.name) && void 0 !== o2 ? o2 : r2.name) && void 0 !== c3 ? c3 : \"File\", I3.size = null !== (d4 = null !== (l2 = null == E3 ? void 0 : E3.size) && void 0 !== l2 ? l2 : r2.size) && void 0 !== d4 ? d4 : 0, I3.data = null !== (f2 = null !== (h4 = null == E3 ? void 0 : E3.data) && void 0 !== h4 ? h4 : r2.custom) && void 0 !== f2 ? f2 : \"\", I3.type = E3 ? null !== (p2 = E3.type) && void 0 !== p2 ? p2 : \"\" : null !== (m4 = r2.type) && void 0 !== m4 ? m4 : \"\", I3.requireAuth = null !== (v2 = r2.require_auth) && void 0 !== v2 && v2, I3.thumbnails = r2.thumbnails ? r2.thumbnails.map(function(e3) {\n      var t4;\n      return new Pe$2(I3._iid, \"string\" == typeof e3 ? { url: e3, width: 0, height: 0 } : n$2(n$2({}, e3), { url: (null !== (t4 = e3.url) && void 0 !== t4 ? t4 : \"\").split(\"auth=\")[0] }), I3.requireAuth);\n    }) : [], I3.messageSurvivalSeconds = null !== (y4 = r2.message_survival_seconds) && void 0 !== y4 ? y4 : -1, r2.parent_message_info) {\n      var T3 = r2.parent_message_info;\n      I3.parentMessage = At$1(n2, se(oe(n$2(n$2({}, T3), { created_at: T3.ts, message_id: I3.parentMessageId, channel_url: I3.channelUrl, channel_type: I3.channelType, file: T3.file, url: null === (_2 = T3.file) || void 0 === _2 ? void 0 : _2.url, require_auth: null === (b3 = T3.file) || void 0 === b3 ? void 0 : b3.require_auth }))));\n    }\n    return I3;\n  }\n  return t$2(s4, i3), s4.payloadify = function(n2) {\n    var r2;\n    return se(oe(n$2(n$2({}, i3.payloadify.call(this, n2)), { url: n2.plainUrl, require_auth: n2.requireAuth, file: { name: n2.name, size: n2.size, type: n2.type, data: n2.data }, thumbnails: null === (r2 = n2.thumbnails) || void 0 === r2 ? void 0 : r2.map(function(e3) {\n      return { url: e3.plainUrl, width: e3.width, height: e3.height, real_width: e3.realWidth, real_height: e3.realHeight };\n    }), message_survival_seconds: n2.messageSurvivalSeconds, parent_message_info: n2.parentMessage ? i3._getParentMessageInfoPayload.call(this, n2.parentMessage) : null })));\n  }, Object.defineProperty(s4.prototype, \"url\", { get: function() {\n    var e3 = uo.of(this._iid).sessionManager;\n    return this.requireAuth && e3.ekey ? \"\".concat(this.plainUrl, \"?auth=\").concat(e3.ekey) : this.plainUrl;\n  }, enumerable: false, configurable: true }), s4.prototype.getThreadedMessagesByTimestamp = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, gt), t4), cs$2(this.messageId > 0 && S$1(\"number\", e3) && bt(n2)).throw(b$2.invalidParameters), [4, la.of(this._iid).getThreadedMessagesByTimestamp(this, e3, n2)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, s4;\n}(_t), Ct$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = n2.file, i3 = n2.fileUrl, s4 = n2.fileName, a4 = n2.fileSize, o2 = n2.mimeType, u3 = n2.thumbnailSizes, c3 = n2._uploadedMetaData, l2 = n2._thumbnails, d4 = e3.call(this, t5) || this;\n    return d4._plainUrl = i3, d4.file = r2, d4.fileName = s4, d4.fileSize = a4, d4.mimeType = o2, d4.thumbnailSizes = u3, d4._uploadedMetaData = c3, d4._thumbnails = l2, d4;\n  }\n  return t$2(t4, e3), t4.getPlainUrl = function(e4) {\n    return e4 instanceof t4 ? e4._plainUrl : e4.fileUrl;\n  }, Object.defineProperty(t4.prototype, \"fileUrl\", { get: function() {\n    var e4, t5 = uo.of(this._iid).sessionManager;\n    return this._plainUrl && (null === (e4 = this._uploadedMetaData) || void 0 === e4 ? void 0 : e4.requireAuth) && t5.ekey ? \"\".concat(this._plainUrl, \"?auth=\").concat(t5.ekey) : this._plainUrl;\n  }, set: function(e4) {\n    this._plainUrl = e4;\n  }, enumerable: false, configurable: true }), t4.prototype.toJSON = function() {\n    return { file: this.file, fileUrl: this._plainUrl, fileName: this.fileName, fileSize: this.fileSize, mimeType: this.mimeType, thumbnailSizes: this.thumbnailSizes, _thumbnails: this._thumbnails, _uploadedMetaData: this._uploadedMetaData };\n  }, t4;\n}(Jr$1), Ot$1 = function(n2) {\n  function i3(r2) {\n    var i4, s4, a4, o2, u3 = [];\n    return r2.mentionType === B.USERS && (r2.mentionedUserIds ? u3 = r2.mentionedUserIds : r2.mentionedUsers && (u3 = r2.mentionedUsers.map(function(e3) {\n      return e3.userId;\n    }))), n2.call(this, { code: \"FILE\", ackRequired: true, payload: se(oe({ channel_url: r2.channelUrl, files: r2.files ? xt$1(r2.files) : null, url: r2.url, name: null !== (i4 = r2.fileName) && void 0 !== i4 ? i4 : \"\", type: null !== (s4 = r2.mimeType) && void 0 !== s4 ? s4 : \"\", size: null !== (a4 = r2.fileSize) && void 0 !== a4 ? a4 : 0, custom: r2.data, custom_type: r2.customType, thumbnails: null === (o2 = r2._thumbnails) || void 0 === o2 ? void 0 : o2.map(function(e3) {\n      return Pe$2.payloadify(e3);\n    }), require_auth: r2.requireAuth, metaarray: r2.metaArrays, mention_type: r2.mentionType, mentioned_user_ids: u3, push_option: r2.pushNotificationDeliveryOption && r2.pushNotificationDeliveryOption !== W.DEFAULT ? r2.pushNotificationDeliveryOption : void 0, apple_critical_alert_options: r2.appleCriticalAlertOptions ? Ke$1.payloadify(r2.appleCriticalAlertOptions) : null, silent: r2.silent, reply_to_channel: r2.isReplyToChannel, parent_message_id: r2.parentMessageId ? r2.parentMessageId : null, req_id: r2.reqId, poll_id: r2.pollId, pin_message: r2.isPinnedMessage, message: r2.message })) }) || this;\n  }\n  return t$2(i3, n2), i3;\n}(Ge$1), kt = function(n2) {\n  function s4(r2) {\n    var s5, a4, o2 = this;\n    o2 = n2.call(this) || this;\n    var u3 = [];\n    return r2.mentionType === B.USERS && (r2.mentionedUserIds ? u3 = r2.mentionedUserIds : r2.mentionedUsers && (u3 = r2.mentionedUsers.map(function(e3) {\n      return e3.userId;\n    }))), o2.method = ae.POST, o2.path = \"\".concat(Re$3(r2.channelType), \"/\").concat(encodeURIComponent(r2.channelUrl), \"/messages\"), o2.params = se(oe({ message_type: G.FILE, user_id: r2.userId, files: r2.files ? xt$1(r2.files) : null, url: r2.fileUrl, mention_type: r2.mentionType, mentioned_user_ids: u3, file_name: r2.fileName, file_size: r2.fileSize, file_type: r2.mimeType, data: r2.data, custom_type: r2.customType, thumbnails: null === (s5 = r2._thumbnails) || void 0 === s5 ? void 0 : s5.map(function(e3) {\n      return Pe$2.payloadify(e3);\n    }), require_auth: r2.requireAuth, sorted_metaarray: null === (a4 = r2.metaArrays) || void 0 === a4 ? void 0 : a4.map(function(e3) {\n      return Ve$1.payloadify(e3);\n    }), push_option: r2.pushNotificationDeliveryOption, parent_message_id: r2.parentMessageId ? r2.parentMessageId : null, apple_critical_alert_options: r2.appleCriticalAlertOptions ? Ke$1.payloadify(r2.appleCriticalAlertOptions) : null, reply_to_channel: r2.isReplyToChannel, req_id: r2.reqId, poll_id: r2.pollId, pin_message: r2.isPinnedMessage })), o2;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Pt$1 = function(e3) {\n  function t4(t5, r2, i3) {\n    var s4, a4, o2, u3, c3 = this;\n    (c3 = e3.call(this, t5, \"FILE\", i3) || this).message = i3.files && i3.files.length >= 2 ? new Mt$1(t5, i3) : new Nt$1(t5, i3);\n    var l2 = uo.of(t5).sdkState;\n    return c3.isMentioned = xe$2(c3.message.mentionType, null !== (o2 = null !== (s4 = c3.message.mentionedUserIds) && void 0 !== s4 ? s4 : null === (a4 = c3.message.mentionedUsers) || void 0 === a4 ? void 0 : a4.map(function(e4) {\n      return e4.userId;\n    })) && void 0 !== o2 ? o2 : [], l2.userId), c3.forceUpdateLastMessage = null !== (u3 = i3.force_update_last_message) && void 0 !== u3 && u3, c3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), Rt$1 = function(e3) {\n  function t4(t5, r2) {\n    var i3, s4, a4, o2, u3 = this;\n    (u3 = e3.call(this, t5, r2) || this).message = r2.files && r2.files.length >= 2 ? new Mt$1(t5, r2) : new Nt$1(t5, r2);\n    var c3 = uo.of(t5).sdkState;\n    return u3.isMentioned = xe$2(u3.message.mentionType, null !== (a4 = null !== (i3 = u3.message.mentionedUserIds) && void 0 !== i3 ? i3 : null === (s4 = u3.message.mentionedUsers) || void 0 === s4 ? void 0 : s4.map(function(e4) {\n      return e4.userId;\n    })) && void 0 !== a4 ? a4 : [], c3.userId), u3.forceUpdateLastMessage = null !== (o2 = r2.force_update_last_message) && void 0 !== o2 && o2, u3;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2);\nfunction xt$1(n2) {\n  return n2.map(function(n3) {\n    var r2, i3;\n    return se(oe({ url: Ct$1.getPlainUrl(n3), file_name: n3.fileName, file_type: n3.mimeType, file_size: n3.fileSize, thumbnails: null === (r2 = n3._thumbnails) || void 0 === r2 ? void 0 : r2.map(function(e3) {\n      return Pe$2.payloadify(e3);\n    }), require_auth: null === (i3 = n3._uploadedMetaData) || void 0 === i3 ? void 0 : i3.requireAuth }));\n  });\n}\nvar Dt$1;\n!function(e3) {\n  e3[e3.PENDING = 0] = \"PENDING\", e3[e3.UPLOADING = 1] = \"UPLOADING\", e3[e3.UPLOADED = 2] = \"UPLOADED\", e3[e3.SENDING = 3] = \"SENDING\", e3[e3.FAILED = 4] = \"FAILED\";\n}(Dt$1 || (Dt$1 = {}));\nvar Lt$1 = function() {\n  function e3(e4, t4) {\n    var n2 = t4.sdkState, r2 = t4.dispatcher, i3 = t4.requestQueue, s4 = t4.onlineDetector, a4 = t4.cacheContext, o2 = this;\n    this._queueMap = /* @__PURE__ */ new Map(), this._iid = e4, this._sdkState = n2, this._requestQueue = i3, this._cacheContext = a4, this._dispatcher = r2, this._dispatcher.on(function(e5) {\n      e5 instanceof Fr$1 && (o2._connectionState = e5.stateType);\n    }), this._onlineDetector = s4;\n  }\n  return Object.defineProperty(e3.prototype, \"_shouldSendThroughWebSocket\", { get: function() {\n    return this._connectionState === Rr$1.CONNECTED || this._connectionState === Rr$1.CONNECTING || this._connectionState === Rr$1.RECONNECTING;\n  }, enumerable: false, configurable: true }), e3.prototype._sendFileMessage = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return n2 = this._createSendFileMessageRequestParams(e4, t4), this._shouldSendThroughWebSocket ? (r2 = new Ot$1(n2), [4, this._requestQueue.send(r2)]) : [3, 2];\n          case 1:\n            return i3 = s4.sent(), [2, i3.as(Pt$1).message];\n          case 2:\n            return r2 = new kt(n$2(n$2({}, n2), { userId: this._sdkState.userId })), [4, this._requestQueue.send(r2)];\n          case 3:\n            return i3 = s4.sent(), [2, i3.as(Rt$1).message];\n        }\n      });\n    });\n  }, e3.prototype._createSendFileMessageRequestParams = function(e4, t4) {\n    var n2 = n$2(n$2({}, t4.params), { channelUrl: e4.url, channelType: e4.channelType, reqId: t4.requestId, url: \"\" });\n    if (t4.multipleFileUploadInfo) {\n      var r2 = t4.params;\n      n2.files = r2.fileInfoList;\n    } else {\n      r2 = t4.params;\n      n2.url = r2.fileUrl, n2.requireAuth = r2.requireAuth;\n    }\n    return n2;\n  }, e3.prototype._resolveMessageQueue = function(e4) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4, o$1, u3, c3, l2, d4, h4, f2, p2;\n      return s$1(this, function(m4) {\n        switch (m4.label) {\n          case 0:\n            if (!(n2 = this._queueMap.get(e4.url))) return [3, 21];\n            if (n2.isResolving) return [3, 20];\n            n2.isResolving = true, r2 = [], i3 = true, m4.label = 1;\n          case 1:\n            m4.trys.push([1, 15, 16, 17]), s4 = o(n2.messageQueue), a4 = s4.next(), m4.label = 2;\n          case 2:\n            if (a4.done) return [3, 14];\n            switch (o$1 = a4.value, o$1.state) {\n              case Dt$1.PENDING:\n              case Dt$1.UPLOADING:\n                return [3, 3];\n              case Dt$1.UPLOADED:\n                return [3, 4];\n              case Dt$1.FAILED:\n                return [3, 12];\n            }\n            return [3, 13];\n          case 3:\n            return i3 = false, r2.push(o$1), [3, 13];\n          case 4:\n            if (!i3) return [3, 10];\n            m4.label = 5;\n          case 5:\n            return m4.trys.push([5, 8, , 9]), o$1.state = Dt$1.SENDING, [4, this._sendFileMessage(e4, o$1)];\n          case 6:\n            return u3 = m4.sent(), o$1.deferred.resolve(u3), [4, ms$2(100)];\n          case 7:\n            return m4.sent(), [3, 9];\n          case 8:\n            return c3 = m4.sent(), o$1.deferred.reject(c3), [3, 9];\n          case 9:\n            return [3, 11];\n          case 10:\n            r2.push(o$1), m4.label = 11;\n          case 11:\n            return [3, 13];\n          case 12:\n            return l2 = null !== (t4 = o$1.error) && void 0 !== t4 ? t4 : b$2.unknown, o$1.deferred.reject(l2.code === u$1.REQUEST_CANCELED ? b$2.fileUploadCanceled : l2), [3, 13];\n          case 13:\n            return a4 = s4.next(), [3, 2];\n          case 14:\n            return [3, 17];\n          case 15:\n            return d4 = m4.sent(), f2 = { error: d4 }, [3, 17];\n          case 16:\n            try {\n              a4 && !a4.done && (p2 = s4.return) && p2.call(s4);\n            } finally {\n              if (f2) throw f2.error;\n            }\n            return [7];\n          case 17:\n            return h4 = n2.isResolveRequestPending, n2.messageQueue = r2, n2.isResolving = false, n2.isResolveRequestPending = false, h4 ? [4, this._resolveMessageQueue(e4)] : [3, 19];\n          case 18:\n            m4.sent(), m4.label = 19;\n          case 19:\n            return [3, 21];\n          case 20:\n            n2.isResolveRequestPending = true, m4.label = 21;\n          case 21:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._uploadNextPendingItem = function(e4) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4, o2, u3, c3, l2, d4;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            return (n2 = this._queueMap.get(e4.url)) && (r2 = n2.messageQueue.find(function(e5) {\n              return e5.state === Dt$1.PENDING;\n            })) ? r2.multipleFileUploadInfo ? (i3 = r2.multipleFileUploadInfo, s4 = i3.uploadIndex, a4 = i3.uploadCount, o2 = i3.requestHandler, d4 = r2.params, u3 = d4.fileInfoList[s4], !k(u3.file) || (null === (t4 = u3._uploadedMetaData) || void 0 === t4 ? void 0 : t4.isUploaded) ? [3, 2] : [4, this._tryUploadNextItemAndUpdateItemState(e4, n2, r2)]) : [3, 4] : [3, 9];\n          case 1:\n            return h4.sent(), [3, 3];\n          case 2:\n            r2.state = s4 < a4 - 1 ? Dt$1.PENDING : Dt$1.UPLOADED, h4.label = 3;\n          case 3:\n            return c3 = d4.fileInfoList[s4], l2 = r2.multipleFileUploadInfo.uploadIndex++, r2.multipleFileUploadInfo.isCopy || null == o2 || o2._triggerOnFileUploaded(r2.requestId, l2, c3, r2.error), [3, 7];\n          case 4:\n            return d4 = r2.params, k(d4.file) ? [4, this._tryUploadNextItemAndUpdateItemState(e4, n2, r2)] : [3, 6];\n          case 5:\n            return h4.sent(), [3, 7];\n          case 6:\n            d4.thumbnailSizes = [], r2.state = Dt$1.UPLOADED, h4.label = 7;\n          case 7:\n            return this._uploadNextPendingItem(e4), [4, this._resolveMessageQueue(e4)];\n          case 8:\n            h4.sent(), h4.label = 9;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._tryUploadNextItemAndUpdateItemState = function(e4, t4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      var i3, s4, a4, o2, u3, c3;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return [4, this._onlineDetector.isOnline()];\n          case 1:\n            if (i3 = l2.sent(), !uo.of(this._iid).sessionManager.currentUser || !i3) return r2.error = b$2.connectionRequired, r2.state = Dt$1.FAILED, [2];\n            if (!(t4.uploadQueue.length < 6)) return [3, 9];\n            r2.state = Dt$1.UPLOADING, t4.uploadQueue.push(r2), l2.label = 2;\n          case 2:\n            return l2.trys.push([2, 7, , 8]), r2.multipleFileUploadInfo ? (s4 = r2.multipleFileUploadInfo, a4 = s4.uploadIndex, o2 = s4.uploadCount, u3 = r2.params, [4, this._uploadNextFileForMultipleFilesItemAndUpdateParams(e4, r2, u3)]) : [3, 4];\n          case 3:\n            return l2.sent(), r2.state = a4 < o2 - 1 ? Dt$1.PENDING : Dt$1.UPLOADED, [3, 6];\n          case 4:\n            return u3 = r2.params, [4, this._uploadNextFileForSingleFileItemAndUpdateParams(e4, r2, u3)];\n          case 5:\n            l2.sent(), r2.state = Dt$1.UPLOADED, l2.label = 6;\n          case 6:\n            return [3, 8];\n          case 7:\n            switch ((c3 = l2.sent()).code) {\n              case u$1.REQUEST_FAILED:\n                r2.error = new b$2({ code: u$1.NETWORK_ERROR, message: \"Failed to upload a file.\" });\n                break;\n              case u$1.REQUEST_CANCELED:\n                r2.error = b$2.fileUploadCanceled;\n                break;\n              default:\n                r2.error = c3;\n            }\n            return r2.state = Dt$1.FAILED, [3, 8];\n          case 8:\n            this._dequeueUploadItem(t4, r2), l2.label = 9;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._dequeueUploadItem = function(e4, t4) {\n    var n2 = e4.uploadQueue.findIndex(function(e5) {\n      return e5.requestId === t4.requestId;\n    });\n    n2 >= 0 && e4.uploadQueue.splice(n2, 1);\n  }, e3.prototype._uploadNextFileForSingleFileItemAndUpdateParams = function(e4, t4, n2) {\n    var r2, i3, s4;\n    return r$1(this, void 0, void 0, function() {\n      var a4, o2, u3, c3, l2, d4, h4, f2, p2, m4;\n      return s$1(this, function(v2) {\n        switch (v2.label) {\n          case 0:\n            return a4 = new Re$2({ file: n2.file, channelUrl: e4.url, thumbnailSizes: n2.thumbnailSizes, requestId: t4.requestId }), [4, this._requestQueue.send(a4)];\n          case 1:\n            return o2 = v2.sent(), u3 = o2.as(xe$1), c3 = u3.url, l2 = u3.fileSize, d4 = void 0 === l2 ? n2.fileSize : l2, h4 = u3.thumbnails, f2 = void 0 === h4 ? [] : h4, p2 = u3.requireAuth, m4 = void 0 !== p2 && p2, n2.fileName = null !== (r2 = n2.fileName) && void 0 !== r2 ? r2 : n2.file.name, n2.mimeType = null !== (i3 = n2.mimeType) && void 0 !== i3 ? i3 : n2.file.type, n2.fileSize = null !== (s4 = n2.fileSize) && void 0 !== s4 ? s4 : n2.file.size, n2.fileUrl = c3, n2.fileSize = d4, n2.requireAuth = m4, n2._thumbnails = f2, [2];\n        }\n      });\n    });\n  }, e3.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams = function(e4, t4, n2) {\n    var r2, i3, s4;\n    return r$1(this, void 0, void 0, function() {\n      var a4, o2, c3, l2, d4, h4, f2, p2, m4, v2, y4;\n      return s$1(this, function(_2) {\n        switch (_2.label) {\n          case 0:\n            return a4 = t4.multipleFileUploadInfo.uploadIndex, o2 = n2.fileInfoList[a4], c3 = new Re$2({ file: o2.file, channelUrl: e4.url, thumbnailSizes: o2.thumbnailSizes, requestId: t4.requestId }), [4, this._requestQueue.send(c3)];\n          case 1:\n            return l2 = _2.sent(), d4 = l2.as(xe$1), h4 = d4.url, f2 = d4.fileSize, p2 = void 0 === f2 ? o2.fileSize : f2, m4 = d4.thumbnails, v2 = d4.requireAuth, y4 = void 0 !== v2 && v2, o2.fileName = null !== (r2 = o2.fileName) && void 0 !== r2 ? r2 : o2.file.name, o2.mimeType = null !== (i3 = o2.mimeType) && void 0 !== i3 ? i3 : o2.file.type, o2.fileSize = null !== (s4 = o2.fileSize) && void 0 !== s4 ? s4 : o2.file.size, o2.file = void 0, o2.fileUrl = h4, o2.fileSize = p2, o2._thumbnails = m4, o2._uploadedMetaData = n$2(n$2({}, o2._uploadedMetaData), { requireAuth: y4, isUploaded: true }), o2 instanceof Ct$1 || (n2.fileInfoList[a4] = new Ct$1(this._iid, o2)), [2];\n        }\n      });\n    });\n  }, e3.prototype.request = function(e4, t4, n2, r2) {\n    return void 0 === r2 && (r2 = {}), r$1(this, void 0, void 0, function() {\n      var i3, s4, a4, o2, c3;\n      return s$1(this, function(l2) {\n        return this._queueMap.has(e4.url) || (i3 = { messageQueue: [], uploadQueue: [], isResolving: false, isResolveRequestPending: false }, this._queueMap.set(e4.url, i3)), s4 = this._queueMap.get(e4.url), a4 = new rt$1(), o2 = { requestId: t4, params: n2, state: Dt$1.PENDING, deferred: a4 }, function(e5) {\n          return \"fileInfoList\" in e5;\n        }(n2) && (c3 = n$2({ uploadIndex: 0, uploadCount: n2.fileInfoList.length }, r2), o2.multipleFileUploadInfo = c3), s4.messageQueue.push(o2), this._uploadNextPendingItem(e4), [2, a4.promise];\n      });\n    });\n  }, e3.prototype.cancel = function(e4, t4) {\n    var n2, r2, i3 = this._queueMap.get(e4.url);\n    if (i3) {\n      var s4 = t4 ? [i3.messageQueue.find(function(e5) {\n        return e5.requestId === t4;\n      })] : c([], a$1(i3.messageQueue), false);\n      try {\n        for (var a4 = o(s4), o$1 = a4.next(); !o$1.done; o$1 = a4.next()) {\n          var u3 = o$1.value;\n          if (u3) switch (u3.state) {\n            case Dt$1.PENDING:\n              if (u3.state = Dt$1.FAILED, u3.error = b$2.requestCanceled, u3.multipleFileUploadInfo && !u3.multipleFileUploadInfo.isCopy) {\n                var c$1 = u3.multipleFileUploadInfo, l2 = c$1.uploadIndex, d4 = c$1.requestHandler, h4 = u3.params.fileInfoList[l2];\n                null == d4 || d4._triggerOnFileUploaded(u3.requestId, l2, h4, b$2.fileUploadCanceled);\n              }\n              this._resolveMessageQueue(e4);\n              break;\n            case Dt$1.UPLOADING:\n              this._requestQueue.cancel(u3.requestId), this._dispatcher.dispatch(new st$1({ requestId: u3.requestId }));\n          }\n        }\n      } catch (e5) {\n        n2 = { error: e5 };\n      } finally {\n        try {\n          o$1 && !o$1.done && (r2 = a4.return) && r2.call(a4);\n        } finally {\n          if (n2) throw n2.error;\n        }\n      }\n    } else t4 && (this._requestQueue.cancel(t4), this._dispatcher.dispatch(new st$1({ requestId: t4 })));\n  }, e3;\n}();\nvar Ft$1, qt$1, zt$1 = { prevResultSize: 0, nextResultSize: 0, isInclusive: false, reverse: false, messageTypeFilter: j.ALL, customTypesFilter: void 0, senderUserIdsFilter: void 0, replyType: Q.NONE, includeReactions: false, includeMetaArray: false, includeParentMessageInfo: false, includeThreadInfo: false, showSubchannelMessagesOnly: false }, Bt$1 = function(e3) {\n  return S$1(\"number\", e3.prevResultSize) && S$1(\"number\", e3.nextResultSize) && S$1(\"boolean\", e3.isInclusive) && S$1(\"boolean\", e3.reverse) && S$1(\"string\", e3.messageTypeFilter) && T$2(j, e3.messageTypeFilter) && C$1(\"string\", e3.customTypesFilter, true) && C$1(\"string\", e3.senderUserIdsFilter, true) && T$2(Q, e3.replyType) && S$1(\"boolean\", e3.includeMetaArray) && S$1(\"boolean\", e3.includeReactions) && S$1(\"boolean\", e3.includeParentMessageInfo) && S$1(\"boolean\", e3.includeThreadInfo) && S$1(\"boolean\", e3.showSubchannelMessagesOnly);\n}, jt$1 = { replyType: Q.NONE, includeReactions: false, includeThreadInfo: false, includeMetaArray: false, includeParentMessageInfo: false }, Kt$1 = function(e3) {\n  return T$2(Q, e3.replyType) && S$1(\"boolean\", e3.includeReactions) && S$1(\"boolean\", e3.includeMetaArray) && S$1(\"boolean\", e3.includeParentMessageInfo) && S$1(\"boolean\", e3.includeThreadInfo);\n};\n!function(e3) {\n  e3.MESSAGE = \"message\";\n}(Ft$1 || (Ft$1 = {})), function(e3) {\n  e3.INTERNAL_BACKSYNC = \"internal_backsync\", e3.INTERNAL_FILL_GAP = \"internal_fill_gap\", e3.EXTERNAL_LEGACY = \"external_legacy\", e3.EXTERNAL_COLLECTION = \"external_collection\";\n}(qt$1 || (qt$1 = {}));\nvar Qt$1, Gt$1 = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.includeMetaArray, o2 = t5.includeReactions, u3 = t5.includeThreadInfo, c3 = t5.includeParentMessageInfo, l2 = e3.call(this) || this;\n    return l2.method = ae.GET, l2.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(encodeURIComponent(s4)), l2.params = { is_sdk: true, with_sorted_meta_array: a4, include_reactions_summary: null != o2 && o2, include_thread_info: u3, include_parent_message_info: c3, include_poll_details: true }, l2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Vt$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.message = n2 ? At$1(t5, n$2({}, n2)) : null, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Ht$1 = function(n2) {\n  function s4(r2) {\n    var s5 = r2.channelType, a4 = r2.channelUrl, o2 = r2.timestamp, u3 = r2.token, c3 = r2.prevResultSize, l2 = r2.nextResultSize, d4 = r2.isInclusive, h4 = r2.reverse, f2 = r2.messageTypeFilter, p2 = r2.customTypesFilter, m4 = r2.senderUserIdsFilter, v2 = r2.replyType, y4 = r2.includeMetaArray, _2 = r2.includeReactions, g2 = r2.parentMessageId, b3 = r2.includeThreadInfo, I3 = r2.includeParentMessageInfo, E3 = r2.showSubchannelMessagesOnly, T3 = r2.checkingHasNext, M4 = r2.checkingContinuousMessages, S4 = r2.sdkSource, U2 = n2.call(this) || this;\n    return U2.method = ae.GET, U2.path = \"\".concat(Re$3(s5), \"/\").concat(encodeURIComponent(a4), \"/messages\"), U2.params = se(oe({ is_sdk: true, prev_limit: c3, next_limit: l2, include: d4, reverse: h4, message_ts: o2, message_id: u3, message_type: null != f2 ? f2 : null, custom_types: p2, sender_ids: m4, include_reply_type: v2, with_sorted_meta_array: y4, include_reactions_summary: _2, parent_message_id: g2, include_thread_info: b3, include_parent_message_info: I3, show_subchannel_message_only: E3, include_poll_details: true, checking_has_next: T3, checking_continuous_messages: M4, sdk_source: S4 })), U2;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Wt$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return void 0 !== n2.is_continuous_messages && (r2.isContinuousMessages = n2.is_continuous_messages), void 0 !== n2.has_next && (r2.hasNext = n2.has_next), r2.messages = n2.messages.map(function(e4) {\n      return At$1(t5, e4);\n    }), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Yt$1 = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.timestamp, a4 = t5.token, o2 = t5.replyType, u3 = t5.includeMetaArray, c3 = t5.includeReactions, l2 = t5.includeThreadInfo, d4 = t5.includeParentMessageInfo, h4 = e3.call(this) || this;\n    return h4.method = ae.GET, h4.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/changelogs\"), h4.params = { change_ts: s4, token: a4, with_sorted_meta_array: u3, include_reactions_summary: c3, include_thread_info: l2, include_reply_type: o2, include_parent_message_info: d4, include_poll_details: true }, h4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Jt$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.updatedMessages = n2.updated.map(function(e4) {\n      return At$1(t5, e4);\n    }), r2.deletedMessagesInfo = n2.deleted.map(function(e4) {\n      return { messageId: e4.message_id, deletedAt: e4.deleted_at };\n    }), r2.hasMore = n2.has_more, r2.nextToken = n2.next, r2.forceUseNextToken = n2.force_use_next_token || false, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Xt$1 = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelUrl, r2 = t5.scheduledMessageId, s4 = e3.call(this) || this;\n    return s4.method = ae.GET, s4.path = \"\".concat(de, \"/\").concat(encodeURIComponent(n2), \"/scheduled_messages/\").concat(encodeURIComponent(r2)), s4.params = {}, s4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Zt$2 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.message = n2 ? At$1(t5, n$2({}, n2)) : null, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2);\n!function(e3) {\n  e3.MUTED = \"muted\", e3.BANNED = \"banned\";\n}(Qt$1 || (Qt$1 = {}));\nvar $t$2 = function() {\n  function n2(e3) {\n    var t4, n3, r2, i3;\n    this.restrictionType = null, T$2(Qt$1, e3.restriction_type) && (this.restrictionType = e3.restriction_type), this.description = null !== (t4 = e3.description) && void 0 !== t4 ? t4 : null, this.endAt = null !== (r2 = null !== (n3 = e3.end_at) && void 0 !== n3 ? n3 : e3.muted_end_at) && void 0 !== r2 ? r2 : -1, this.remainingDuration = null !== (i3 = e3.remaining_duration) && void 0 !== i3 ? i3 : -1;\n  }\n  return n2.payloadify = function(n3) {\n    return se(oe({ restriction_type: n3.restrictionType, description: n3.description, end_at: n3.endAt, remaining_duration: n3.remainingDuration }));\n  }, n2;\n}(), en$2 = function(n2) {\n  function i3(e3, t4) {\n    var r2 = n2.call(this, e3, t4) || this;\n    return r2.restrictionInfo = new $t$2(t4), r2;\n  }\n  return t$2(i3, n2), i3.payloadify = function(r2) {\n    return se(oe(n$2(n$2({}, n2.payloadify.call(this, r2)), $t$2.payloadify(r2.restrictionInfo))));\n  }, i3;\n}(ls$2), tn$2 = function(e3) {\n  function t4(t5, n2) {\n    var r2, i3 = this;\n    return (i3 = e3.call(this, t5, n2) || this).isMuted = false, i3.isMuted = null !== (r2 = n2.is_muted) && void 0 !== r2 && r2, i3;\n  }\n  return t$2(t4, e3), t4;\n}(ls$2), nn$2 = function() {\n  function e3() {\n    this._onPending = ut$1, this._onFailed = ut$1, this._onSucceeded = ut$1;\n  }\n  return e3.prototype._trigger = function(e4) {\n    switch (null == e4 ? void 0 : e4.sendingStatus) {\n      case Z.PENDING:\n        0 === e4.errorCode && this._onPending(e4);\n        break;\n      case Z.SCHEDULED:\n      case Z.SUCCEEDED:\n        this._onSucceeded(e4);\n    }\n  }, e3.prototype._triggerFailed = function(e4, t4) {\n    switch (null == t4 ? void 0 : t4.sendingStatus) {\n      case Z.FAILED:\n      case Z.CANCELED:\n        this._onFailed(e4, t4.scheduledInfo ? null : t4);\n    }\n  }, e3.prototype.onPending = function(e4) {\n    return this._onPending = e4, this;\n  }, e3.prototype.onFailed = function(e4) {\n    return this._onFailed = e4, this;\n  }, e3.prototype.onSucceeded = function(e4) {\n    return this._onSucceeded = e4, this;\n  }, e3;\n}(), rn$2 = { data: void 0, customType: void 0, mentionType: B.USERS, mentionedUserIds: void 0, mentionedUsers: void 0, metaArrays: void 0, parentMessageId: void 0, isReplyToChannel: false, pushNotificationDeliveryOption: void 0, appleCriticalAlertOptions: void 0, isPinnedMessage: false, pollId: void 0 }, sn$2 = function(e3) {\n  return S$1(\"string\", e3.data, true) && S$1(\"string\", e3.customType, true) && T$2(B, e3.mentionType) && C$1(\"string\", e3.mentionedUserIds, true) && C$1(ls$2, e3.mentionedUsers, true) && C$1(Ve$1, e3.metaArrays, true) && S$1(\"number\", e3.parentMessageId, true) && S$1(\"boolean\", e3.isReplyToChannel) && T$2(W, e3.pushNotificationDeliveryOption, true) && S$1(Ke$1, e3.appleCriticalAlertOptions, true) && S$1(\"boolean\", e3.isPinnedMessage, true) && S$1(\"number\", e3.pollId, true);\n}, an$2 = function(e3) {\n  return { isReplyToChannel: e3.isReplyToChannel, pushNotificationDeliveryOption: e3.pushNotificationDeliveryOption, pollId: e3.pollId };\n}, on$2 = n$2(n$2({}, rn$2), { message: \"\", mentionedMessageTemplate: void 0, translationTargetLanguages: void 0, extendedMessagePayload: void 0 });\nfunction un$2(e3) {\n  var n2, r2, i3;\n  return null !== (n2 = e3.messageParams) && void 0 !== n2 ? n2 : oe(n$2(n$2({}, e3), { mentionType: e3.mentionType, mentionedUserIds: null !== (r2 = e3.mentionedUserIds) && void 0 !== r2 ? r2 : null === (i3 = e3.mentionedUsers) || void 0 === i3 ? void 0 : i3.map(function(e4) {\n    return e4.userId;\n  }), mentionedMessageTemplate: e3.mentionedMessageTemplate, translationTargetLanguages: Object.keys(e3.translations), pushNotificationDeliveryOption: W.DEFAULT, parentMessageId: null, isReplyToChannel: false, isPinnedMessage: false }));\n}\nvar cn$2, ln$2 = function(n2) {\n  var r2;\n  return se(oe({ data: n2.data, customType: n2.customType, mentionType: n2.mentionType, mentionedUsers: n2.mentionedUsers, mentionedUserIds: n2.mentionedUserIds, mentionedMessageTemplate: n2.mentionedMessageTemplate, metaArrays: n2.metaArrays, pollId: null === (r2 = n2.poll) || void 0 === r2 ? void 0 : r2.id, parentMessageId: n2.parentMessageId, appleCriticalAlertOptions: n2.appleCriticalAlertOptions, message: n2.message, translationTargetLanguages: Object.keys(n2.translations), extendedMessagePayload: n2.extendedMessagePayload }));\n}, dn$2 = function(e3) {\n  return sn$2(e3) && S$1(\"string\", e3.message) && S$1(\"string\", e3.mentionedMessageTemplate, true) && C$1(\"string\", e3.translationTargetLanguages, true) && S$1(\"object\", e3.extendedMessagePayload, true);\n};\n!function(e3) {\n  e3.FILE = \"file\", e3.BLOB = \"blob\", e3.BLOB_LIKE_OBJECT = \"blobLikeObject\", e3.URL = \"url\";\n}(cn$2 || (cn$2 = {}));\nvar hn$2 = function(e3) {\n  return \"undefined\" != typeof window && \"Blob\" in window && \"undefined\" != typeof Blob && e3 instanceof Blob;\n}, fn$2 = function(e3) {\n  return e3 === cn$2.BLOB || e3 === cn$2.FILE;\n}, pn$2 = function(e3) {\n  return { file: e3.file, fileKey: e3.fileKey, fileType: e3.fileType, isReplyToChannel: e3.isReplyToChannel, pushNotificationDeliveryOption: e3.pushNotificationDeliveryOption };\n}, mn$2 = n$2(n$2({}, rn$2), { file: void 0, fileKey: void 0, fileUrl: void 0, fileName: void 0, fileType: void 0, fileSize: void 0, mimeType: void 0, thumbnailSizes: void 0, requireAuth: false, message: void 0 });\nfunction vn$2(e3) {\n  var n2, r2, i3, s4;\n  return null !== (n2 = e3.messageParams) && void 0 !== n2 ? n2 : oe(n$2(n$2({}, e3), { fileUrl: e3.plainUrl, fileName: e3.name, fileSize: e3.size, mimeType: e3.type, mentionType: e3.mentionType, mentionedUserIds: null !== (r2 = e3.mentionedUserIds) && void 0 !== r2 ? r2 : null === (i3 = e3.mentionedUsers) || void 0 === i3 ? void 0 : i3.map(function(e4) {\n    return e4.userId;\n  }), pushNotificationDeliveryOption: W.DEFAULT, parentMessageId: null, isReplyToChannel: false, thumbnailSizes: null === (s4 = e3.thumbnails) || void 0 === s4 ? void 0 : s4.map(function(e4) {\n    return { maxWidth: e4.width, maxHeight: e4.height };\n  }), requireAuth: e3.requireAuth, isPinnedMessage: false, _thumbnails: e3.thumbnails, message: e3.message }));\n}\nvar yn$2, _n$2 = function(n2, r2) {\n  var i3, s4;\n  return n2.messageParams ? (!n2.url && k(r2) && (n2.messageParams.file = r2), n2.messageParams) : se(oe({ data: n2.data, customType: n2.customType, mentionType: n2.mentionType, mentionedUsers: n2.mentionedUsers, mentionedUserIds: n2.mentionedUserIds, metaArrays: n2.metaArrays, parentMessageId: n2.parentMessageId, appleCriticalAlertOptions: n2.appleCriticalAlertOptions, file: r2, fileUrl: n2.url, fileName: n2.name, fileSize: n2.size, mimeType: n2.type, thumbnailSizes: null === (i3 = n2.thumbnails) || void 0 === i3 ? void 0 : i3.map(function(e3) {\n    return { maxWidth: e3.width, maxHeight: e3.height };\n  }), message: n2.message, pollId: null === (s4 = n2.poll) || void 0 === s4 ? void 0 : s4.id }));\n}, gn$2 = function(e3) {\n  return sn$2(e3) && (k(e3.file) || S$1(\"string\", e3.fileUrl)) && S$1(\"string\", e3.fileName, true) && S$1(\"string\", e3.mimeType, true) && S$1(\"number\", e3.fileSize, true) && S$1(\"string\", e3.message, true) && (null === e3.thumbnailSizes || void 0 === e3.thumbnailSizes || Array.isArray(e3.thumbnailSizes) && e3.thumbnailSizes.every(function(e4) {\n    return S$1(\"object\", e4) && e4.maxWidth > 0 && e4.maxHeight > 0;\n  }));\n}, bn$2 = { data: void 0, customType: void 0, mentionType: B.USERS, mentionedUserIds: void 0, mentionedUsers: void 0, metaArrays: void 0, pushNotificationDeliveryOption: void 0, appleCriticalAlertOptions: void 0 }, In$2 = function(e3) {\n  return S$1(\"string\", e3.data, true) && S$1(\"string\", e3.customType, true) && T$2(B, e3.mentionType) && C$1(\"string\", e3.mentionedUserIds, true) && C$1(ls$2, e3.mentionedUsers, true) && C$1(Ve$1, e3.metaArrays, true) && T$2(W, e3.pushNotificationDeliveryOption, true) && S$1(Ke$1, e3.appleCriticalAlertOptions, true);\n}, En$2 = n$2(n$2({}, bn$2), { message: void 0, mentionedMessageTemplate: void 0, translationTargetLanguages: void 0, pollId: void 0 }), Tn$2 = function(e3) {\n  return In$2(e3) && S$1(\"string\", e3.mentionedMessageTemplate, true) && S$1(\"string\", e3.message, true) && C$1(\"string\", e3.translationTargetLanguages, true) && S$1(\"number\", e3.pollId, true);\n}, wn$2 = n$2({}, bn$2), Mn$2 = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelUrl, r2 = t5.channelType, s4 = t5.token, a4 = t5.limit, o2 = e3.call(this) || this;\n    return o2.method = ae.GET, o2.path = \"\".concat(Re$3(r2), \"/\").concat(encodeURIComponent(n2), \"/operators\"), o2.params = { token: s4, limit: a4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Sn$2 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.operators = n2.operators.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), r2.token = n2.next, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Un$2 = function(e3) {\n  function t4(t5, n2, r2, i3) {\n    return e3.call(this, t5, n2, r2, i3) || this;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this);\n  }, t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, r2, i3, s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : (e4 = [], this._hasNext ? (this._isLoading = true, t5 = uo.of(this._iid).requestQueue, r2 = new Mn$2(n$2(n$2({}, this), { channelUrl: this.channelUrl, token: this._token })), [4, t5.send(r2)]) : [3, 2]) : [3, 5];\n          case 1:\n            return i3 = c3.sent(), s4 = i3.as(Sn$2), a4 = s4.operators, o2 = s4.token, this._token = o2, this._hasNext = !!o2, this._isLoading = false, [2, a4];\n          case 2:\n            return [2, e4];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(ko), An$2 = function(e3) {\n  function n2(t4, n3, r2, i3) {\n    var s4, a4, o2, u3, c3, l2, d4, h4, f2, p2, m4 = this;\n    return (m4 = e3.call(this, t4, n3, r2, i3) || this).reverse = false, m4.messageTypeFilter = j.ALL, m4.customTypesFilter = null, m4.senderUserIdsFilter = null, m4.replyType = Q.NONE, m4.includeMetaArray = false, m4.includeReactions = false, m4.includeParentMessageInfo = false, m4.includeThreadInfo = false, m4.showSubchannelMessagesOnly = false, m4._edge = Number.MAX_SAFE_INTEGER, m4.reverse = null !== (s4 = i3.reverse) && void 0 !== s4 && s4, m4.messageTypeFilter = null !== (a4 = i3.messageTypeFilter) && void 0 !== a4 ? a4 : j.ALL, m4.customTypesFilter = null !== (o2 = i3.customTypesFilter) && void 0 !== o2 ? o2 : null, m4.senderUserIdsFilter = null !== (u3 = i3.senderUserIdsFilter) && void 0 !== u3 ? u3 : null, m4.replyType = null !== (c3 = i3.replyType) && void 0 !== c3 ? c3 : Q.NONE, m4.includeMetaArray = null !== (l2 = i3.includeMetaArray) && void 0 !== l2 && l2, m4.includeReactions = null !== (d4 = i3.includeReactions) && void 0 !== d4 && d4, m4.includeParentMessageInfo = null !== (h4 = i3.includeParentMessageInfo) && void 0 !== h4 && h4, m4.includeThreadInfo = null !== (f2 = i3.includeThreadInfo) && void 0 !== f2 && f2, m4.showSubchannelMessagesOnly = null !== (p2 = i3.showSubchannelMessagesOnly) && void 0 !== p2 && p2, m4;\n  }\n  return t$2(n2, e3), n2.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"boolean\", this.reverse) && T$2(j, this.messageTypeFilter) && T$2(Q, this.replyType) && C$1(\"string\", this.customTypesFilter, true) && C$1(\"string\", this.senderUserIdsFilter, true) && S$1(\"boolean\", this.includeMetaArray) && S$1(\"boolean\", this.includeReactions) && S$1(\"boolean\", this.includeParentMessageInfo) && S$1(\"boolean\", this.includeThreadInfo) && S$1(\"boolean\", this.showSubchannelMessagesOnly);\n  }, n2.prototype.load = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, [4, la.of(this._iid).getMessagesByTimestamp(this.channelUrl, this.channelType, this._edge, oe({ prevResultSize: this.limit, nextResultSize: 0, isInclusive: false, reverse: this.reverse, messageTypeFilter: this.messageTypeFilter, customTypesFilter: this.customTypesFilter, replyType: this.replyType, senderUserIdsFilter: this.senderUserIdsFilter, includeReactions: this.includeReactions, includeMetaArray: this.includeMetaArray, includeParentMessageInfo: this.includeParentMessageInfo, includeThreadInfo: this.includeThreadInfo, showSubchannelMessagesOnly: this.showSubchannelMessagesOnly }))]) : [3, 2] : [3, 5];\n          case 1:\n            return e4 = n3.sent(), this._edge = Math.min.apply(Math, c([Number.MAX_SAFE_INTEGER], a$1(e4.map(function(e5) {\n              return e5.createdAt;\n            })), false)), this._hasNext = e4.length >= this.limit, this._isLoading = false, [2, e4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, n2;\n}(ko), Nn$2 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.limit, o2 = t5.token;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/mute\"), n2.params = { limit: a4, token: o2 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Cn$2 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    r2.mutedUsers = [];\n    var i3 = n2.next, s4 = n2.muted_list;\n    return r2.token = i3, s4 && s4.length > 0 && (r2.mutedUsers = s4.map(function(e4) {\n      return new en$2(t5, e4);\n    })), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), On$2 = function(e3) {\n  function t4(t5, n2, r2, i3) {\n    return e3.call(this, t5, n2, r2, i3) || this;\n  }\n  return t$2(t4, e3), t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, r2, i3, s4, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t5 = new Nn$2(n$2(n$2({}, this), { token: this._token })), [4, e4.send(t5)]) : [3, 2] : [3, 5];\n          case 1:\n            return r2 = o2.sent(), i3 = r2.as(Cn$2), s4 = i3.mutedUsers, a4 = i3.token, this._token = a4, this._hasNext = !!a4, this._isLoading = false, [2, s4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(ko), kn$2 = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.channelUrl, a4 = n3.channelType, o2 = n3.limit, u3 = n3.token;\n    return (r2 = t4.call(this) || this).method = ae.GET, r2.path = \"\".concat(Re$3(a4), \"/\").concat(encodeURIComponent(s4), \"/ban\"), r2.params = se({ limit: o2, token: u3 }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Pn$2 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    r2.bannedUsers = [];\n    var i3 = n2.next, s4 = n2.banned_list;\n    return r2.token = i3, s4 && s4.length > 0 && (r2.bannedUsers = s4.map(function(e4) {\n      return new en$2(t5, e4.user);\n    })), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Rn$1 = function(e3) {\n  function t4(t5, n2, r2, i3) {\n    return e3.call(this, t5, n2, r2, i3) || this;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this);\n  }, t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, r2, i3, s4, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t5 = new kn$2(n$2(n$2({}, this), { token: this._token })), [4, e4.send(t5)]) : [3, 2] : [3, 5];\n          case 1:\n            return r2 = o2.sent(), i3 = r2.as(Pn$2), s4 = i3.bannedUsers, a4 = i3.token, this._token = a4, this._hasNext = !!a4, this._isLoading = false, [2, s4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(ko);\n!function(e3) {\n  e3.SPAM = \"spam\", e3.HARASSING = \"harassing\", e3.SUSPICIOUS = \"suspicious\", e3.INAPPROPRIATE = \"inappropriate\";\n}(yn$2 || (yn$2 = {}));\nvar xn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.operatorUserIds;\n    return (n2 = e3.call(this) || this).method = ae.POST, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/operators\"), n2.params = { operator_ids: a4 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar Dn$2 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.operatorUserIds;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/operators\"), n2.params = { operator_ids: a4 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    return e3.call(this, t5, n2) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar Ln$2 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.userId;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/mute/\").concat(a4), n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Fn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    r2.isMuted = false, r2.startAt = 0, r2.endAt = 0;\n    var i3 = n2.is_muted, s4 = n2.start_at, a4 = n2.end_at, o2 = n2.remaining_duration, u3 = n2.description;\n    return r2.isMuted = i3, r2.startAt = s4, r2.endAt = a4, r2.remainingDuration = o2, r2.description = u3, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), qn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.keys;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metadata\"), n2.params = { keys: a4, include_ts: true }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), zn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this, i3 = n2.metadata, s4 = n2.ts;\n    return r2.metadata = i3, r2.ts = s4, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Bn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.metadata;\n    return (n2 = e3.call(this) || this).method = ae.POST, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metadata\"), n2.params = { metadata: a4, include_ts: true }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), jn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2, i3, s4 = this;\n    return (s4 = e3.call(this, t5, n2) || this).metaData = null !== (r2 = n2.metadata) && void 0 !== r2 ? r2 : {}, s4.ts = null !== (i3 = n2.ts) && void 0 !== i3 ? i3 : null, s4;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Kn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.metadata, o2 = t5.upsert;\n    return (n2 = e3.call(this) || this).method = ae.PUT, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metadata\"), n2.params = { metadata: a4, include_ts: true, upsert: null != o2 && o2 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Qn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this, i3 = n2.metadata, s4 = n2.ts;\n    return r2.metadata = i3, r2.ts = s4, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Gn$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return r2.data && (i3.created = r2.data.created, i3.updated = r2.data.updated, i3.deleted = r2.data.deleted), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), Vn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.key;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metadata/\").concat(a4), n2.params = { include_ts: true }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Hn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this, i3 = n2.ts;\n    return r2.ts = i3, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Wn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metadata\"), n2.params = { include_ts: true }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Yn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this, i3 = n2.ts;\n    return r2.ts = i3, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Jn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.keys;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metacounter\"), n2.params = { keys: a4 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Xn$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.metaCounter = n2, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Zn$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.metaCounter;\n    return (n2 = e3.call(this) || this).method = ae.POST, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metacounter\"), n2.params = { metacounter: a4 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), $n$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.metaCounter = n2, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), er$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.metaCounter, o2 = t5.upsert, u3 = void 0 !== o2 && o2, c3 = t5.mode, l2 = void 0 === c3 ? \"set\" : c3;\n    return (n2 = e3.call(this) || this).method = ae.PUT, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metacounter\"), n2.params = { metacounter: a4, upsert: u3, mode: l2 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), tr$1 = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.metaCounter = n2, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), nr$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return r2.data && (i3.created = r2.data.created, i3.updated = r2.data.updated, i3.deleted = r2.data.deleted), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), rr$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.key;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metacounter/\").concat(a4), n2.params = {}, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    return e3.call(this, t5, n2) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar ir$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/metacounter\"), n2.params = {}, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar sr$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.userId, o2 = t5.seconds, u3 = t5.description;\n    return (n2 = e3.call(this) || this).method = ae.POST, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/mute\"), n2.params = { user_id: a4, seconds: o2, description: u3 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    return e3.call(this, t5, n2) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar ar$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return i3.user = new en$2(t5, r2.data), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), or$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.userId;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/mute/\").concat(encodeURIComponent(a4)), n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar ur$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return i3.user = new en$2(t5, r2.data), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), cr$1 = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.channelUrl, a4 = n3.channelType, o2 = n3.userId, u3 = n3.seconds, c3 = n3.description;\n    return (r2 = t4.call(this) || this).method = ae.POST, r2.path = \"\".concat(Re$3(a4), \"/\").concat(encodeURIComponent(s4), \"/ban\"), r2.params = se({ user_id: o2, seconds: u3, description: c3 }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar lr$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return i3.user = new en$2(t5, r2.data), r2.data.member_count && (i3.memberCount = r2.data.member_count), r2.data.joined_member_count && (i3.joinedMemberCount = r2.data.joined_member_count), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), dr$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.userId;\n    return (n2 = e3.call(this) || this).method = ae.DELETE, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/ban/\").concat(encodeURIComponent(a4)), n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar hr$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return i3.user = new en$2(t5, r2.data), i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), fr$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.channelUrl, s4 = t5.channelType, a4 = t5.freezing;\n    return (n2 = e3.call(this) || this).method = ae.PUT, n2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/freeze\"), n2.params = { freeze: a4 }, n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar pr$1 = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"SYEV\", r2) || this;\n    return i3.freeze = r2.data.freeze, i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), mr = function(e3) {\n  return e3 instanceof ro ? e3._custom ? \"custom\" : e3.name : e3;\n}, vr = function(e3) {\n  if (e3 instanceof ro && e3._custom) return e3.name;\n}, yr = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.channelUrl, a4 = n3.channelType, o2 = n3.category, u3 = n3.userId, c3 = n3.description;\n    return (r2 = t4.call(this) || this).method = ae.POST, r2.path = \"\".concat(Le$2(a4), \"/\").concat(encodeURIComponent(s4)), r2.params = se({ report_category: mr(o2), reporting_user_id: u3, report_description: c3, custom_report_category_name: vr(o2) }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), _r$1 = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.channelUrl, a4 = n3.channelType, o2 = n3.category, u3 = n3.userId, c3 = n3.offendingUserId, l2 = n3.description;\n    return (r2 = t4.call(this) || this).method = ae.POST, r2.path = \"\".concat(ge$1, \"/users/\").concat(c3), r2.params = se({ channel_url: s4, channel_type: a4 === H$1.OPEN ? \"open_channels\" : \"group_channels\", report_category: mr(o2), reporting_user_id: u3, report_description: l2, custom_report_category_name: vr(o2) }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), gr = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.channelUrl, a4 = n3.channelType, o2 = n3.category, u3 = n3.userId, c3 = n3.offendingUserId, l2 = n3.messageId, d4 = n3.description;\n    return (r2 = t4.call(this) || this).method = ae.POST, r2.path = \"\".concat(Le$2(a4), \"/\").concat(encodeURIComponent(s4), \"/messages/\").concat(l2), r2.params = se({ report_category: mr(o2), reporting_user_id: u3, report_description: d4, offending_user_id: c3, custom_report_category_name: vr(o2) }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), br = function(n2) {\n  function i3(r2) {\n    var i4 = [];\n    return r2.mentionType === B.USERS && (r2.mentionedUserIds ? i4 = r2.mentionedUserIds : r2.mentionedUsers && (i4 = r2.mentionedUsers.map(function(e3) {\n      return e3.userId;\n    }))), n2.call(this, { code: \"MESG\", ackRequired: true, payload: se(oe({ channel_url: r2.channelUrl, message: r2.message, data: r2.data, custom_type: r2.customType, metaarray: r2.metaArrays, mention_type: r2.mentionType, mentioned_user_ids: i4, mentioned_message_template: r2.mentionedMessageTemplate, target_langs: r2.translationTargetLanguages, push_option: r2.pushNotificationDeliveryOption && r2.pushNotificationDeliveryOption !== W.DEFAULT ? r2.pushNotificationDeliveryOption : void 0, apple_critical_alert_options: r2.appleCriticalAlertOptions, silent: r2.silent, reply_to_channel: r2.isReplyToChannel, parent_message_id: r2.parentMessageId ? r2.parentMessageId : null, req_id: r2.reqId, poll_id: r2.pollId, pin_message: r2.isPinnedMessage, extended_message_payload: r2.extendedMessagePayload })) }) || this;\n  }\n  return t$2(i3, n2), i3;\n}(Ge$1), Ir = function(e3) {\n  function t4(t5, r2, i3) {\n    var s4, a4, o2, u3, c3 = this;\n    (c3 = e3.call(this, t5, \"MESG\", i3) || this).message = new wt(t5, i3);\n    var l2 = uo.of(t5).sdkState;\n    return c3.isMentioned = xe$2(c3.message.mentionType, null !== (o2 = null !== (s4 = c3.message.mentionedUserIds) && void 0 !== s4 ? s4 : null === (a4 = c3.message.mentionedUsers) || void 0 === a4 ? void 0 : a4.map(function(e4) {\n      return e4.userId;\n    })) && void 0 !== o2 ? o2 : [], l2.userId), c3.forceUpdateLastMessage = null !== (u3 = i3.force_update_last_message) && void 0 !== u3 && u3, c3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), Er = function(n2) {\n  function i3(r2) {\n    var i4 = null;\n    return r2.mentionType === B.USERS && (r2.mentionedUserIds ? i4 = r2.mentionedUserIds : r2.mentionedUsers && (i4 = r2.mentionedUsers.map(function(e3) {\n      return e3.userId;\n    }))), n2.call(this, { code: \"MEDI\", ackRequired: true, payload: se(oe({ channel_url: r2.channelUrl, msg_id: r2.messageId, message: r2.message, data: r2.data, custom_type: r2.customType, metaarray: r2.metaArrayParams, mention_type: r2.mentionType, mentioned_user_ids: i4, mentioned_message_template: r2.mentionedMessageTemplate, apple_critical_alert_options: r2.appleCriticalAlertOptions ? Ke$1.payloadify(r2.appleCriticalAlertOptions) : null, poll_id: r2.pollId })) }) || this;\n  }\n  return t$2(i3, n2), i3;\n}(Ge$1), Tr = function(e3) {\n  function i3(r2, i4, s4) {\n    var a4, o2, u3, c3, l2, d4 = this;\n    (d4 = e3.call(this, r2, \"MEDI\", s4) || this).message = new wt(r2, s4);\n    var h4 = uo.of(r2).sdkState;\n    return d4.mentionCountChange = Ue$1({ mentionType: null === (a4 = s4.old_values) || void 0 === a4 ? void 0 : a4.mention_type, mentionedUserIds: null !== (u3 = null === (o2 = s4.old_values) || void 0 === o2 ? void 0 : o2.mentioned_user_ids) && void 0 !== u3 ? u3 : [] }, oe({ mentionType: d4.message.mentionType, mentionedUserIds: null !== (c3 = d4.message.mentionedUserIds) && void 0 !== c3 ? c3 : null === (l2 = d4.message.mentionedUsers) || void 0 === l2 ? void 0 : l2.map(function(e4) {\n      return e4.userId;\n    }) }), h4.userId), d4;\n  }\n  return t$2(i3, e3), i3;\n}(ze$2), wr = function(n2) {\n  function i3(r2) {\n    var i4 = null;\n    return r2.mentionType === B.USERS && (r2.mentionedUserIds ? i4 = r2.mentionedUserIds : r2.mentionedUsers && (i4 = r2.mentionedUsers.map(function(e3) {\n      return e3.userId;\n    }))), n2.call(this, { code: \"FEDI\", ackRequired: true, payload: se(oe({ channel_url: r2.channelUrl, msg_id: r2.messageId, data: r2.data, custom_type: r2.customType, metaarray: r2.metaArrayParams, mention_type: r2.mentionType, mentioned_user_ids: i4, apple_critical_alert_options: r2.appleCriticalAlertOptions })) }) || this;\n  }\n  return t$2(i3, n2), i3;\n}(Ge$1), Mr = function(e3) {\n  function i3(r2, i4, s4) {\n    var a4, o2, u3, c3, l2, d4 = this;\n    (d4 = e3.call(this, r2, \"FEDI\", s4) || this).message = new Nt$1(r2, s4);\n    var h4 = uo.of(r2).sdkState;\n    return d4.mentionCountChange = Ue$1({ mentionType: null === (a4 = s4.old_values) || void 0 === a4 ? void 0 : a4.mention_type, mentionedUserIds: null !== (u3 = null === (o2 = s4.old_values) || void 0 === o2 ? void 0 : o2.mentioned_user_ids) && void 0 !== u3 ? u3 : [] }, oe({ mentionType: d4.message.mentionType, mentionedUserIds: null !== (c3 = d4.message.mentionedUserIds) && void 0 !== c3 ? c3 : null === (l2 = d4.message.mentionedUsers) || void 0 === l2 ? void 0 : l2.map(function(e4) {\n      return e4.userId;\n    }) }), h4.userId), d4;\n  }\n  return t$2(i3, e3), i3;\n}(ze$2), Sr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.reactionKey, o2 = e3.call(this) || this;\n    return o2.method = ae.POST, o2.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/reactions\"), o2.params = { reaction: a4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Ur = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.reactionEvent = new Fe$1(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Ar = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.reactionKey, o2 = e3.call(this) || this;\n    return o2.method = ae.DELETE, o2.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/reactions\"), o2.params = { reaction: a4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Nr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.reactionEvent = new Fe$1(n$2({}, n2)), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Cr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = t5.translationTargetLanguages, o2 = e3.call(this) || this;\n    return o2.method = ae.POST, o2.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(encodeURIComponent(s4), \"/translation\"), o2.params = { target_langs: a4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Or = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.message = new wt(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), kr = function(n2) {\n  function s4(r2) {\n    var s5, a4 = this;\n    a4 = n2.call(this) || this;\n    var o2 = [];\n    r2.mentionType === B.USERS && (r2.mentionedUserIds ? o2 = r2.mentionedUserIds : r2.mentionedUsers && (o2 = r2.mentionedUsers.map(function(e3) {\n      return e3.userId;\n    })));\n    var u3 = r2.channelType, c3 = r2.channelUrl;\n    return a4.method = ae.POST, a4.path = \"\".concat(Re$3(u3), \"/\").concat(encodeURIComponent(c3), \"/scheduled_messages\"), a4.params = se(oe({ req_id: r2.reqId, scheduled_at: r2.scheduledAt, message_type: K$1.USER, message: r2.message, custom_type: r2.customType, data: r2.data, mention_type: r2.mentionType, mentioned_user_ids: o2, sorted_metaarray: null === (s5 = r2.metaArrays) || void 0 === s5 ? void 0 : s5.map(function(e3) {\n      return Ve$1.payloadify(e3);\n    }), apple_critical_alert_options: r2.appleCriticalAlertOptions ? Ke$1.payloadify(r2.appleCriticalAlertOptions) : null, target_langs: r2.translationTargetLanguages, push_option: r2.pushNotificationDeliveryOption })), a4;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Pr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.message = new wt(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Rr = function(e3) {\n  function n2(n3) {\n    var r2, s4, a4 = this;\n    a4 = e3.call(this) || this;\n    var o2 = [];\n    n3.mentionType === B.USERS && (n3.mentionedUserIds ? o2 = n3.mentionedUserIds : n3.mentionedUsers && (o2 = n3.mentionedUsers.map(function(e4) {\n      return e4.userId;\n    })));\n    var u3 = n3.channelType, c3 = n3.channelUrl;\n    return a4.method = ae.POST, a4.path = \"\".concat(Re$3(u3), \"/\").concat(encodeURIComponent(c3), \"/scheduled_messages\"), a4.params = oe({ req_id: n3.reqId, scheduled_at: n3.scheduledAt, message_type: K$1.FILE, url: n3.fileUrl, file_name: n3.fileName, file_size: n3.fileSize, file_type: n3.mimeType, thumbnails: null === (r2 = n3._thumbnails) || void 0 === r2 ? void 0 : r2.map(function(e4) {\n      return Pe$2.payloadify(e4);\n    }), custom_type: n3.customType, data: n3.data, require_auth: n3.requireAuth, mention_type: n3.mentionType, mentioned_user_ids: o2, sorted_metaarray: null === (s4 = n3.metaArrays) || void 0 === s4 ? void 0 : s4.map(function(e4) {\n      return Ve$1.payloadify(e4);\n    }), apple_critical_alert_options: n3.appleCriticalAlertOptions ? Ke$1.payloadify(n3.appleCriticalAlertOptions) : null, push_option: n3.pushNotificationDeliveryOption }), a4;\n  }\n  return t$2(n2, e3), n2;\n}(Fe$2), xr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.message = new Nt$1(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Dr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.pollId, r2 = t5.title, s4 = t5.data, a4 = t5.allowUserSuggestion, o2 = t5.allowMultipleVotes, u3 = t5.closeAt, c3 = e3.call(this) || this;\n    return c3.method = ae.PUT, c3.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(n2)), c3.params = { title: r2, data: s4, allow_user_suggestion: a4, allow_multiple_votes: o2, close_at: u3 }, c3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Lr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.poll = new Io(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Fr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.pollId, r2 = e3.call(this) || this;\n    return r2.method = ae.DELETE, r2.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(n2)), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar qr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.pollId, r2 = e3.call(this) || this;\n    return r2.method = ae.PUT, r2.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(n2), \"/close\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), zr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.poll = new Io(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Br = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelUrl, r2 = t5.channelType, s4 = t5.pollId, a4 = t5.optionText, o2 = e3.call(this) || this;\n    return o2.method = ae.POST, o2.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(s4), \"/options\"), o2.params = { channel_url: n2, channel_type: r2, text: a4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), jr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.poll = new Io(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Kr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.pollId, r2 = t5.pollOptionId, s4 = t5.optionText, a4 = e3.call(this) || this;\n    return a4.method = ae.PUT, a4.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(n2), \"/options/\").concat(encodeURIComponent(r2)), a4.params = { text: s4 }, a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Qr = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.poll = new Io(t5, n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Gr = function(e3) {\n  function t4(t5) {\n    var n2 = t5.pollId, r2 = t5.pollOptionId, s4 = e3.call(this) || this;\n    return s4.method = ae.DELETE, s4.path = \"\".concat(me$1, \"/\").concat(encodeURIComponent(n2), \"/options/\").concat(encodeURIComponent(r2)), s4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar Vr = function(t4) {\n  function n2(n3) {\n    var r2 = n3.reqId, i3 = n3.channelType, s4 = n3.channelUrl, a4 = n3.pollId, o2 = n3.pollOptionIds;\n    return t4.call(this, { code: \"VOTE\", ackRequired: true, payload: se({ req_id: r2, channel_type: i3 === H$1.OPEN ? \"open_channels\" : \"group_channels\", channel_url: s4, poll_id: a4, option_ids: o2 }) }) || this;\n  }\n  return t$2(n2, t4), n2;\n}(Ge$1), Hr = function(e3) {\n  function t4(t5, n2, r2) {\n    var i3 = e3.call(this, t5, \"VOTE\", r2) || this;\n    return i3.event = new Do(r2), i3.channelUrl = r2.channel_url, i3.channelType = r2.channel_type, i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), Wr = 100, Yr = \"GroupChannel\", Jr = \"url\", Xr = 100, Zr = \"Message\", $r = \"messageId\", ti = \"NotificationMessage\", ni = \"notificationId\", ri = \"Poll\", ii = \"pollId\", ai = \"FeedChannel\", oi = \"url\", ui = \"UserInfo\", ci = \"userId\";\nfunction li(e3) {\n  var n2, r2, i3;\n  return null !== (n2 = e3.messageParams) && void 0 !== n2 ? n2 : oe(n$2(n$2({}, e3), { isReplyToChannel: false, mentionedUserIds: null !== (r2 = e3.mentionedUserIds) && void 0 !== r2 ? r2 : null === (i3 = e3.mentionedUsers) || void 0 === i3 ? void 0 : i3.map(function(e4) {\n    return e4.userId;\n  }), pushNotificationDeliveryOption: W.DEFAULT, isPinnedMessage: false, fileInfoList: e3.fileInfoList.map(function(e4) {\n    var t4;\n    return { fileUrl: e4.plainUrl, fileName: e4.fileName, fileSize: e4.fileSize, mimeType: e4.mimeType, thumbnailSizes: null === (t4 = e4.thumbnails) || void 0 === t4 ? void 0 : t4.map(function(e5) {\n      return { maxWidth: e5.width, maxHeight: e5.height };\n    }), _thumbnails: e4.thumbnails, _uploadedMetaData: { requireAuth: e4._requireAuth, isUploaded: true } };\n  }) }));\n}\nvar di = n$2(n$2({}, rn$2), { fileInfoList: [], message: \"\" }), hi = function(e3) {\n  return (k(e3.file) || S$1(\"string\", e3.fileUrl)) && S$1(\"string\", e3.fileName, true) && S$1(\"string\", e3.mimeType, true) && S$1(\"number\", e3.fileSize, true) && (void 0 === e3.thumbnailSizes || Array.isArray(e3.thumbnailSizes) && e3.thumbnailSizes.every(function(e4) {\n    return e4.maxWidth > 0 && e4.maxHeight > 0;\n  }));\n}, fi = function(e3) {\n  function t4() {\n    var t5 = null !== e3 && e3.apply(this, arguments) || this;\n    return t5._onFileUploaded = ut$1, t5;\n  }\n  return t$2(t4, e3), t4.prototype._triggerOnFileUploaded = function(e4, t5, n2, r2) {\n    this._onFileUploaded(e4, t5, n2, r2);\n  }, t4.prototype.onFileUploaded = function(e4) {\n    return this._onFileUploaded = e4, this;\n  }, t4.prototype.onPending = function(t5) {\n    return e3.prototype.onPending.call(this, t5), this;\n  }, t4.prototype.onFailed = function(t5) {\n    return e3.prototype.onFailed.call(this, t5), this;\n  }, t4.prototype.onSucceeded = function(t5) {\n    return e3.prototype.onSucceeded.call(this, t5), this;\n  }, t4;\n}(nn$2), pi = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5) || this;\n    return r2.message = null, r2.message = At$1(t5, n2.message), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Jr$1), mi = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.channelType, a4 = n3.channelUrl, o2 = n3.limit, u3 = n3.token, c3 = n3.includeReactions, l2 = n3.includeMetaArray, d4 = n3.includeParentMessageInfo, h4 = n3.includeThreadInfo, f2 = n3.includePollDetails;\n    return (r2 = t4.call(this) || this).method = ae.GET, r2.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(a4), \"/pinned_messages\"), r2.params = se({ limit: o2, token: u3, include_reactions_summary: c3, with_sorted_meta_array: l2, include_thread_info: h4, include_parent_message_info: d4, include_poll_details: f2 }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), vi = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this, i3 = n2.pinned_messages, s4 = n2.has_more, a4 = n2.next;\n    return r2.pinnedMessages = i3.map(function(e4) {\n      return new pi(t5, e4);\n    }), r2.hasMore = s4, r2.token = a4, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), yi = function(e3) {\n  function t4(t5, n2, r2, i3) {\n    var s4 = e3.call(this, t5, n2, r2, i3) || this;\n    return s4.includeMetaArray = i3.includeMetaArray, s4.includeReactions = i3.includeReactions, s4.includeParentMessageInfo = i3.includeParentMessageInfo, s4.includeThreadInfo = i3.includeThreadInfo, s4.includePollDetails = i3.includePollDetails, s4;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"boolean\", this.includeMetaArray, true) && S$1(\"boolean\", this.includeReactions, true) && S$1(\"boolean\", this.includeParentMessageInfo, true) && S$1(\"boolean\", this.includeThreadInfo, true) && S$1(\"boolean\", this.includePollDetails, true);\n  }, t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, r2, i3, s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t5 = new mi(n$2(n$2({}, this), { token: this._token })), [4, e4.send(t5)]) : [3, 2] : [3, 5];\n          case 1:\n            return r2 = c3.sent(), i3 = r2.as(vi), s4 = i3.pinnedMessages, a4 = i3.hasMore, o2 = i3.token, this._token = o2, this._hasNext = !!a4, this._isLoading = false, [2, s4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(ko), _i = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = e3.call(this) || this;\n    return a4.method = ae.POST, a4.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/pin\"), a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    return e3.call(this, t5, n2) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar gi = function(e3) {\n  function t4(t5) {\n    var n2 = t5.channelType, r2 = t5.channelUrl, s4 = t5.messageId, a4 = e3.call(this) || this;\n    return a4.method = ae.DELETE, a4.path = \"\".concat(Re$3(n2), \"/\").concat(encodeURIComponent(r2), \"/messages/\").concat(s4, \"/pin\"), a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    return e3.call(this, t5, n2) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar bi, Ii = 2;\n!function(e3) {\n  e3.SEND = \"send\", e3.RESEND = \"resend\", e3.COPY = \"copy\";\n}(bi || (bi = {}));\nvar Ei, Ti = function(i3) {\n  function s4(e3, t4) {\n    var n2, r2, s5, a4, o2, u3, l2, d4 = this;\n    return (d4 = i3.call(this, e3) || this)._name = \"\", d4._createdAt = 0, d4.pinnedMessageIds = [], d4.channelType = H$1.BASE, d4.coverUrl = \"\", d4.customType = \"\", d4.data = \"\", d4.isFrozen = false, d4.isEphemeral = false, d4.creator = null, d4._messageCollectionLastAccessedAt = 0, d4._url = t4.channel_url, d4._name = null !== (n2 = t4.name) && void 0 !== n2 ? n2 : \"\", d4._createdAt = 1e3 * t4.created_at, d4.coverUrl = null !== (r2 = t4.cover_url) && void 0 !== r2 ? r2 : \"\", d4.customType = null !== (s5 = t4.custom_type) && void 0 !== s5 ? s5 : \"\", d4.data = null !== (a4 = t4.data) && void 0 !== a4 ? a4 : \"\", d4.isFrozen = null !== (o2 = t4.freeze) && void 0 !== o2 && o2, d4.isEphemeral = null !== (u3 = t4.is_ephemeral) && void 0 !== u3 && u3, d4.creator = t4.created_by ? new ls$2(d4._iid, t4.created_by) : null, t4.metadata && Object.keys(t4.metadata).length > 0 && t4.ts ? (d4._cachedMetaData = /* @__PURE__ */ new Map(), Object.keys(t4.metadata).forEach(function(e4) {\n      d4._cachedMetaData.set(e4, { value: t4.metadata[e4], isRemoved: false, updatedAt: t4.ts });\n    })) : \"string\" == typeof t4.metadata && (d4._cachedMetaData = new Map(Object.entries(JSON.parse(t4.metadata)))), d4.pinnedMessageIds = null !== (l2 = t4.pinned_message_ids) && void 0 !== l2 ? l2 : [], d4;\n  }\n  return t$2(s4, i3), Object.defineProperty(s4.prototype, \"url\", { get: function() {\n    return this._url;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"name\", { get: function() {\n    return this._name;\n  }, set: function(e3) {\n    this._name = e3;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"createdAt\", { get: function() {\n    return this._createdAt;\n  }, enumerable: false, configurable: true }), s4.prototype.toJSON = function() {\n    return n$2(n$2({}, this), { url: this._url, name: this._name, createdAt: this._createdAt });\n  }, s4.payloadify = function(n2) {\n    return se(oe(n$2(n$2({}, i3.payloadify.call(this, n2)), { channel_url: n2.url, name: n2.name, cover_url: n2.coverUrl, custom_type: n2.customType, data: n2.data, freeze: n2.isFrozen, is_ephemeral: n2.isEphemeral, created_by: n2.creator ? ls$2.payloadify(n2.creator) : null, created_at: n2.createdAt / 1e3, metadata: n2.cachedMetaData, pinned_message_ids: n2.pinnedMessageIds })));\n  }, s4.prototype.isGroupChannel = function() {\n    return this.channelType === H$1.GROUP;\n  }, s4.prototype.isOpenChannel = function() {\n    return this.channelType === H$1.OPEN;\n  }, s4.prototype.isFeedChannel = function() {\n    return this.channelType === H$1.FEED;\n  }, Object.defineProperty(s4.prototype, \"cachedMetaData\", { get: function() {\n    var e3 = {};\n    return this._cachedMetaData ? (this._cachedMetaData.forEach(function(t4, n2) {\n      t4.isRemoved || (e3[n2] = t4.value);\n    }), e3) : e3;\n  }, enumerable: false, configurable: true }), Object.defineProperty(s4.prototype, \"messageCollectionLastAccessedAt\", { get: function() {\n    return this._messageCollectionLastAccessedAt;\n  }, enumerable: false, configurable: true }), s4.prototype._serializeCachedMetaData = function() {\n    return this._cachedMetaData ? { cachedMetaData: JSON.stringify(Object.fromEntries(this._cachedMetaData)) } : {};\n  }, s4.prototype._updateMessageCollectionLastAccessedAt = function() {\n    this._messageCollectionLastAccessedAt = Date.now();\n  }, s4.prototype._update = function(e3) {\n    Object.assign(this, e3);\n  }, s4.prototype._upsertCachedMetaData = function(e3, t4) {\n    var n2 = this;\n    Object.keys(e3).forEach(function(r2) {\n      n2._cachedMetaData || (n2._cachedMetaData = /* @__PURE__ */ new Map());\n      var i4 = n2._cachedMetaData.get(r2);\n      (!i4 || i4.updatedAt <= t4) && n2._cachedMetaData.set(r2, { value: e3[r2], isRemoved: false, updatedAt: t4 });\n    });\n  }, s4.prototype._updateCachedMetaData = function(e3, t4) {\n    var n2 = this, r2 = false;\n    return this._cachedMetaData ? this._cachedMetaData.forEach(function(i4, s5) {\n      var a4;\n      i4.updatedAt <= t4 && (n2._cachedMetaData.set(s5, { value: null !== (a4 = e3[s5]) && void 0 !== a4 ? a4 : i4.value, isRemoved: !e3[s5], updatedAt: t4 }), r2 = true);\n    }) : (this._cachedMetaData = /* @__PURE__ */ new Map(), Object.keys(e3).forEach(function(r3) {\n      n2._cachedMetaData.set(r3, { value: e3[r3], isRemoved: false, updatedAt: t4 });\n    }), r2 = true), { isUpdated: r2 };\n  }, s4.prototype._removeFromCachedMetaData = function(e3, t4) {\n    var n2 = this;\n    this._cachedMetaData && e3.forEach(function(e4) {\n      var r2 = n2._cachedMetaData.get(e4);\n      r2 && r2.updatedAt < t4 && (r2.isRemoved = true, r2.updatedAt = t4);\n    });\n  }, s4.prototype._clearCachedMetaData = function() {\n    this._cachedMetaData && this._cachedMetaData.clear();\n  }, s4.prototype._runIfHandleableWithGroupChannel = function(e3) {\n    this.isGroupChannel() ? e3(this) : this.isFeedChannel() && e3(this.groupChannel);\n  }, s4.prototype._generateRequestId = function() {\n    return \"rq-\".concat(ee());\n  }, s4.prototype.isIdentical = function(e3) {\n    return e3 && this.url === e3.url;\n  }, s4.prototype.isEqual = function(e3) {\n    return w$1(this, e3);\n  }, s4.prototype.createOperatorListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new Un$2(this._iid, this.url, this.channelType, e3);\n  }, s4.prototype.createMutedUserListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new On$2(this._iid, this.url, this.channelType, e3);\n  }, s4.prototype.createBannedUserListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new Rn$1(this._iid, this.url, this.channelType, e3);\n  }, s4.prototype.createPreviousMessageListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new An$2(this._iid, this.url, this.channelType, e3);\n  }, s4.prototype.createPinnedMessageListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new yi(this._iid, this.url, this.channelType, e3);\n  }, s4.prototype.addOperators = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new xn$1({ channelUrl: this.url, channelType: this.channelType, operatorUserIds: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.removeOperators = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new Dn$2({ channelUrl: this.url, channelType: this.channelType, operatorUserIds: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.getMyMutedInfo = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, r2, i4, s5, a4, o2, u3, c3, l2, d4;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.sdkState, r2 = e3.requestQueue, i4 = new Ln$2({ channelUrl: this.url, channelType: this.channelType, userId: t4.userId }), [4, r2.send(i4)];\n          case 1:\n            return s5 = h4.sent(), a4 = s5.as(Fn$1), o2 = a4.isMuted, u3 = a4.startAt, c3 = a4.endAt, l2 = a4.remainingDuration, d4 = a4.description, [2, { isMuted: o2, startAt: u3, endAt: c3, remainingDuration: l2, description: d4 }];\n        }\n      });\n    });\n  }, s4.prototype.getMetaData = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5, a4, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new qn$1({ channelUrl: this.url, channelType: this.channelType, keys: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4 = u3.sent(), s5 = i4.as(zn$1), a4 = s5.metadata, o2 = s5.ts, this._upsertCachedMetaData(a4, o2), [2, a4];\n        }\n      });\n    });\n  }, s4.prototype.getAllMetaData = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, r2, i4, s5, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new qn$1({ channelUrl: this.url, channelType: this.channelType, keys: [] }), [4, e3.send(t4)];\n          case 1:\n            return r2 = o2.sent(), i4 = r2.as(zn$1), s5 = i4.metadata, a4 = i4.ts, this._updateCachedMetaData(s5, a4), [2, s5];\n        }\n      });\n    });\n  }, s4.prototype.createMetaData = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return t4 = uo.of(this._iid).requestQueue, r2 = new Bn$1({ channelUrl: this.url, channelType: this.channelType, metadata: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4 = a4.sent(), s5 = i4.as(jn$1).metaData, this._upsertCachedMetaData(s5, 0), [2, s5];\n        }\n      });\n    });\n  }, s4.prototype.updateMetaData = function(e3, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var r2, i4, s5, a4, o2, u3;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return r2 = uo.of(this._iid).requestQueue, i4 = new Kn$1({ channelUrl: this.url, channelType: this.channelType, metadata: e3, upsert: t4 }), [4, r2.send(i4)];\n          case 1:\n            return s5 = c3.sent(), a4 = s5.as(Qn$1), o2 = a4.metadata, u3 = a4.ts, this._upsertCachedMetaData(o2, u3), [2, o2];\n        }\n      });\n    });\n  }, s4.prototype.deleteMetaData = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new Vn$1({ channelUrl: this.url, channelType: this.channelType, key: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4 = a4.sent(), s5 = i4.as(Hn$1).ts, this._removeFromCachedMetaData([e3], s5), [2];\n        }\n      });\n    });\n  }, s4.prototype.deleteAllMetaData = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, r2, i4;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new Wn$1({ channelUrl: this.url, channelType: this.channelType }), [4, e3.send(t4)];\n          case 1:\n            return r2 = s5.sent(), i4 = r2.as(Yn$1).ts, this._removeFromCachedMetaData(c([], a$1(this._cachedMetaData.keys()), false), i4), [2];\n        }\n      });\n    });\n  }, s4.prototype.getMetaCounters = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new Jn$1({ channelUrl: this.url, channelType: this.channelType, keys: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4 = s5.sent(), [2, i4.as(Xn$1).metaCounter];\n        }\n      });\n    });\n  }, s4.prototype.getAllMetaCounters = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new Jn$1({ channelUrl: this.url, channelType: this.channelType, keys: [] }), [4, e3.send(t4)];\n          case 1:\n            return r2 = i4.sent(), [2, r2.as(Xn$1).metaCounter];\n        }\n      });\n    });\n  }, s4.prototype.createMetaCounters = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return t4 = uo.of(this._iid).requestQueue, r2 = new Zn$1({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4 = s5.sent(), [2, i4.as($n$1).metaCounter];\n        }\n      });\n    });\n  }, s4.prototype.updateMetaCounters = function(e3, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return r2 = uo.of(this._iid).requestQueue, i4 = new er$1({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3, upsert: t4 }), [4, r2.send(i4)];\n          case 1:\n            return s5 = a4.sent(), [2, s5.as(tr$1).metaCounter];\n        }\n      });\n    });\n  }, s4.prototype.increaseMetaCounters = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return t4 = uo.of(this._iid).requestQueue, r2 = new er$1({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3, upsert: false, mode: \"increase\" }), [4, t4.send(r2)];\n          case 1:\n            return i4 = s5.sent(), [2, i4.as(tr$1).metaCounter];\n        }\n      });\n    });\n  }, s4.prototype.decreaseMetaCounters = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return t4 = uo.of(this._iid).requestQueue, r2 = new er$1({ channelUrl: this.url, channelType: this.channelType, metaCounter: e3, upsert: false, mode: \"decrease\" }), [4, t4.send(r2)];\n          case 1:\n            return i4 = s5.sent(), [2, i4.as(tr$1).metaCounter];\n        }\n      });\n    });\n  }, s4.prototype.deleteMetaCounter = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new rr$1({ channelUrl: this.url, channelType: this.channelType, key: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.deleteAllMetaCounters = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new ir$1({ channelUrl: this.url, channelType: this.channelType }), [4, e3.send(t4)];\n          case 1:\n            return r2.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.muteUser = function(e3, t4, n2) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(r2) {\n        return [2, this.muteUserWithUserId(e3.userId, t4, n2)];\n      });\n    });\n  }, s4.prototype.muteUserWithUserId = function(e3, t4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      var i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3) && S$1(\"number\", t4, true) && S$1(\"string\", r2, true)).throw(b$2.invalidParameters), i4 = uo.of(this._iid).requestQueue, s5 = new sr$1({ channelUrl: this.url, channelType: this.channelType, userId: e3, seconds: t4, description: r2 }), [4, i4.send(s5)];\n          case 1:\n            return a4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.unmuteUser = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return [2, this.unmuteUserWithUserId(e3.userId)];\n      });\n    });\n  }, s4.prototype.unmuteUserWithUserId = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new or$1({ channelUrl: this.url, channelType: this.channelType, userId: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.banUser = function(e3, t4, n2) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(r2) {\n        return [2, this.banUserWithUserId(e3.userId, t4, n2)];\n      });\n    });\n  }, s4.prototype.banUserWithUserId = function(e3, t4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      var i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3) && S$1(\"number\", t4, true) && S$1(\"string\", r2, true)).throw(b$2.invalidParameters), i4 = uo.of(this._iid).requestQueue, s5 = new cr$1({ channelUrl: this.url, channelType: this.channelType, userId: e3, seconds: t4, description: r2 }), [4, i4.send(s5)];\n          case 1:\n            return a4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.unbanUser = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return [2, this.unbanUserWithUserId(e3.userId)];\n      });\n    });\n  }, s4.prototype.unbanUserWithUserId = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new dr$1({ channelUrl: this.url, channelType: this.channelType, userId: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.freeze = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new fr$1({ channelUrl: this.url, channelType: this.channelType, freezing: true }), [4, e3.send(t4)];\n          case 1:\n            return r2.sent(), this.isFrozen = true, [2];\n        }\n      });\n    });\n  }, s4.prototype.unfreeze = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new fr$1({ channelUrl: this.url, channelType: this.channelType, freezing: false }), [4, e3.send(t4)];\n          case 1:\n            return r2.sent(), this.isFrozen = false, [2];\n        }\n      });\n    });\n  }, s4.prototype.getMessagesByMessageId = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, zt$1), t4), cs$2(S$1(\"number\", e3) && Bt$1(n2)).throw(b$2.invalidParameters), [4, la.of(this._iid).getMessagesByMessageId(this.url, this.channelType, e3, n2)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, s4.prototype.getMessagesByTimestamp = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, zt$1), t4), cs$2(S$1(\"number\", e3) && Bt$1(n2)).throw(b$2.invalidParameters), [4, la.of(this._iid).getMessagesByTimestamp(this.url, this.channelType, e3, n2)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, s4.prototype.getMessageChangeLogsSinceTimestamp = function(e3, t4) {\n    return void 0 === t4 && (t4 = {}), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, jt$1), t4), cs$2(S$1(\"number\", e3) && Kt$1(n2)).throw(b$2.invalidParameters), [4, la.of(this._iid).getMessageChangelogs(this.url, this.channelType, e3, n2)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, s4.prototype.getMessageChangeLogsSinceToken = function(e3, t4) {\n    return void 0 === t4 && (t4 = {}), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, jt$1), t4), cs$2(S$1(\"string\", e3) && Kt$1(n2)).throw(b$2.invalidParameters), [4, la.of(this._iid).getMessageChangelogs(this.url, this.channelType, e3, n2)];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, s4.prototype._createPendingSendableMessagePayload = function(r2, i4, s5) {\n    var a4, o2 = uo.of(this._iid).sessionManager;\n    return se(oe({ channel_url: this.url, channel_type: this.channelType, msg_id: 0, parent_message_id: r2.parentMessageId, data: r2.data, custom_type: r2.customType, mention_type: r2.mentionType, sorted_metaarray: r2.metaArrays ? r2.metaArrays.map(function(e3) {\n      return Ve$1.payloadify(e3);\n    }) : null, apple_critical_alert_options: r2.appleCriticalAlertOptions ? Ke$1.payloadify(r2.appleCriticalAlertOptions) : null, created_at: s5, user: o2.currentUser ? Ge.payloadify(o2.currentUser) : null, req_id: i4, request_state: Z.PENDING, mentioned_user_ids: r2.mentionedUserIds, mentioned_users: null === (a4 = r2.mentionedUsers) || void 0 === a4 ? void 0 : a4.map(function(e3) {\n      return ls$2.payloadify(e3);\n    }) }));\n  }, s4.prototype._createPendingUserMessage = function(t4, n2, r2) {\n    var i4, s5, a4 = {};\n    if (t4.translationTargetLanguages) try {\n      for (var o$1 = o(t4.translationTargetLanguages), c3 = o$1.next(); !c3.done; c3 = o$1.next()) {\n        a4[c3.value] = \"\";\n      }\n    } catch (e3) {\n      i4 = { error: e3 };\n    } finally {\n      try {\n        c3 && !c3.done && (s5 = o$1.return) && s5.call(o$1);\n      } finally {\n        if (i4) throw i4.error;\n      }\n    }\n    var l2 = se(n$2(n$2({}, this._createPendingSendableMessagePayload(t4, n2, r2)), { type: G.USER, message: t4.message, translations: a4, extended_message_payload: t4.extendedMessagePayload })), d4 = new wt(this._iid, l2);\n    return d4.messageParams = t4, d4;\n  }, s4.prototype._createPendingScheduledUserMessage = function(e3, t4, n2) {\n    var r2 = this._createPendingUserMessage(e3, t4, n2);\n    return r2.scheduledInfo = { scheduledMessageId: 0, scheduledAt: e3.scheduledAt, scheduledMessageParams: e3 }, r2;\n  }, s4.prototype._createPendingFileMessage = function(t4, n2, r2) {\n    var i4, s5, a4, o2, c3, l2, d4, h4 = se(n$2(n$2({}, this._createPendingSendableMessagePayload(t4, n2, r2)), { type: G.FILE, url: t4.fileUrl, file: { name: null !== (i4 = t4.fileName) && void 0 !== i4 ? i4 : null === (s5 = t4.file) || void 0 === s5 ? void 0 : s5.name, size: null !== (a4 = t4.fileSize) && void 0 !== a4 ? a4 : null === (o2 = t4.file) || void 0 === o2 ? void 0 : o2.size, type: null !== (c3 = t4.mimeType) && void 0 !== c3 ? c3 : null === (l2 = t4.file) || void 0 === l2 ? void 0 : l2.type, data: t4.data }, thumbnails: null === (d4 = t4._thumbnails) || void 0 === d4 ? void 0 : d4.map(function(e3) {\n      return Pe$2.payloadify(e3);\n    }), message: t4.message })), f2 = new Nt$1(this._iid, h4);\n    return f2.messageParams = t4, f2;\n  }, s4.prototype._createPendingMultipleFilesMessage = function(t4, n2, r2) {\n    var i4 = se(n$2(n$2({}, this._createPendingSendableMessagePayload(t4, n2, r2)), { type: G.FILE, file: t4.fileInfoList.length > 0 ? { name: t4.fileInfoList[0].fileName, size: t4.fileInfoList[0].fileSize, type: t4.fileInfoList[0].mimeType, data: t4.data } : void 0, message: t4.message })), s5 = new Mt$1(this._iid, i4);\n    return s5.messageParams = t4, s5;\n  }, s4.prototype._validateFailedFileMessageHasFile = function(e3, t4) {\n    var n2;\n    return Boolean(e3.url) || k(t4) || k(null === (n2 = e3.messageParams) || void 0 === n2 ? void 0 : n2.file);\n  }, s4.prototype._createPendingScheduledFileMessage = function(e3, t4, n2) {\n    var r2 = this._createPendingFileMessage(e3, t4, n2);\n    return r2.scheduledInfo = { scheduledMessageId: 0, scheduledAt: e3.scheduledAt, scheduledMessageParams: e3 }, r2;\n  }, s4.prototype._markMessageAsFailed = function(e3, t4, n2) {\n    void 0 === n2 && (n2 = false), e3.errorCode = t4.code, t4.code === u$1.REQUEST_CANCELED || t4.code === u$1.FILE_UPLOAD_CANCEL_FAILED ? e3.sendingStatus = Z.CANCELED : n2 || (e3.sendingStatus = Z.FAILED);\n  }, s4.prototype.sendUserMessage = function(e3) {\n    var t4 = n$2(n$2({}, on$2), e3);\n    return cs$2(dn$2(t4)).throw(b$2.invalidParameters), this._sendUserMessage(t4);\n  }, s4.prototype._sendUserMessage = function(e3, t4, r2) {\n    var i4 = this;\n    void 0 === t4 && (t4 = bi.SEND);\n    var s5 = uo.of(this._iid), a4 = s5.dispatcher, o2 = s5.requestQueue, c3 = null != r2 ? r2 : this._generateRequestId(), l2 = Date.now(), d4 = new nn$2();\n    return ms$2(2).then(function() {\n      var r3 = i4._createPendingUserMessage(e3, c3, l2);\n      a4.dispatch(new po({ messages: [r3], source: t4 === bi.RESEND ? no.LOCAL_MESSAGE_RESEND_STARTED : no.EVENT_MESSAGE_SENT_PENDING })), kr$1(function() {\n        return r$1(i4, void 0, void 0, function() {\n          return s$1(this, function(e4) {\n            return [2, d4._trigger(r3)];\n          });\n        });\n      });\n      var s6 = new br(n$2(n$2({}, e3), { channelUrl: i4.url, channelType: i4.channelType, reqId: c3 }));\n      o2.send(s6).then(function(e4) {\n        var t5 = e4.as(Ir).message;\n        a4.dispatch(new po({ messages: [t5], source: no.EVENT_MESSAGE_SENT_SUCCESS })), kr$1(function() {\n          return r$1(i4, void 0, void 0, function() {\n            return s$1(this, function(e5) {\n              return [2, d4._trigger(t5)];\n            });\n          });\n        });\n      }).catch(function(t5) {\n        if (v$2(t5)) throw t5;\n        ms$2(2).then(function() {\n          var r4 = i4._createPendingUserMessage(e3, c3, l2), s7 = uo.of(i4._iid).cacheContext, o3 = s7.localCacheEnabled && s7.localCacheConfig.enableAutoResend && O$2(t5.code);\n          i4._markMessageAsFailed(r4, t5, o3), a4.dispatch(new po({ messages: [r4], source: r4.sendingStatus === Z.PENDING ? no.REQUEST_RESEND_MESSAGE : no.EVENT_MESSAGE_SENT_FAILED })), kr$1(function() {\n            return r$1(i4, void 0, void 0, function() {\n              return s$1(this, function(e4) {\n                return [2, d4._triggerFailed(t5, r4)];\n              });\n            });\n          });\n        });\n      });\n    }), d4;\n  }, s4.prototype._autoResendUserMessage = function(e3) {\n    return cs$2(e3 instanceof wt && !!e3.messageParams).throw(b$2.invalidParameters), this._sendUserMessage(e3.messageParams, bi.SEND, e3.reqId);\n  }, s4.prototype.resendUserMessage = function(e3) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2;\n      return s$1(this, function(i4) {\n        return cs$2(e3 instanceof wt && !e3.scheduledInfo).throw(b$2.invalidParameters), n2 = new rt$1(), r2 = null !== (t4 = e3.messageParams) && void 0 !== t4 ? t4 : ln$2(e3), this._sendUserMessage(r2, bi.RESEND, e3.reqId).onFailed(function(e4) {\n          return n2.reject(e4);\n        }).onSucceeded(function(e4) {\n          return n2.resolve(e4);\n        }), [2, n2.promise];\n      });\n    });\n  }, s4.prototype.updateUserMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return r2 = n$2(n$2({}, En$2), t4), cs$2(S$1(\"number\", e3) && Tn$2(r2)).throw(b$2.invalidParameters), i4 = uo.of(this._iid).requestQueue, s5 = new Er(n$2({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: r2.metaArrays ? { array: r2.metaArrays, mode: \"add\", upsert: true } : void 0 }, r2)), [4, i4.send(s5)];\n          case 1:\n            return a4 = o2.sent(), [2, a4.as(Tr).message];\n        }\n      });\n    });\n  }, s4.prototype.copyUserMessage = function(e3, n2) {\n    var r2, i4, a4;\n    return r$1(this, void 0, void 0, function() {\n      var o2, c3;\n      return s$1(this, function(l2) {\n        return cs$2(e3 instanceof s4 && n2 instanceof wt && n2.sendingStatus === Z.SUCCEEDED && this.url === n2.channelUrl && !n2.scheduledInfo).throw(b$2.invalidParameters), cs$2(!n2.poll).throw(b$2.notSupportedError), o2 = new rt$1(), c3 = null !== (r2 = n2.messageParams) && void 0 !== r2 ? r2 : oe(n$2(n$2({}, n2), { mentionType: n2.mentionType, mentionedUserIds: null !== (i4 = n2.mentionedUserIds) && void 0 !== i4 ? i4 : null === (a4 = n2.mentionedUsers) || void 0 === a4 ? void 0 : a4.map(function(e4) {\n          return e4.userId;\n        }), translationTargetLanguages: Object.keys(n2.translations), pushNotificationDeliveryOption: W.DEFAULT, parentMessageId: null, isReplyToChannel: false, isPinnedMessage: false })), e3._sendUserMessage(c3).onSucceeded(function(e4) {\n          o2.resolve(e4);\n        }).onFailed(function(e4) {\n          return o2.reject(e4);\n        }), [2, o2.promise];\n      });\n    });\n  }, s4.prototype.translateUserMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(e3 instanceof wt && e3.messageId > 0 && C$1(\"string\", t4)).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, i4 = new Cr({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, translationTargetLanguages: t4 }), [4, r2.send(i4)];\n          case 1:\n            return s5 = a4.sent(), [2, s5.as(Or).message];\n        }\n      });\n    });\n  }, s4.prototype._createScheduledUserMessage = function(e3, t4) {\n    var r2 = this, i4 = uo.of(this._iid).requestQueue, s5 = Date.now(), a4 = this._generateRequestId();\n    ms$2(2).then(function() {\n      var n2 = r2._createPendingScheduledUserMessage(e3, a4, s5);\n      kr$1(function() {\n        return r$1(r2, void 0, void 0, function() {\n          return s$1(this, function(e4) {\n            return [2, t4._trigger(n2)];\n          });\n        });\n      });\n    });\n    var o2 = new kr(n$2({ reqId: a4, channelType: this.channelType, channelUrl: this.url }, e3));\n    i4.send(o2).then(function(e4) {\n      var n2 = e4.as(Pr).message;\n      kr$1(function() {\n        return r$1(r2, void 0, void 0, function() {\n          return s$1(this, function(e5) {\n            return [2, t4._trigger(n2)];\n          });\n        });\n      });\n    }).catch(function(n2) {\n      if (v$2(n2)) throw n2;\n      ms$2(2).then(function() {\n        var i5 = r2._createPendingScheduledUserMessage(e3, a4, s5);\n        r2._markMessageAsFailed(i5, n2), kr$1(function() {\n          return r$1(r2, void 0, void 0, function() {\n            return s$1(this, function(e4) {\n              return [2, t4._triggerFailed(n2, i5)];\n            });\n          });\n        });\n      });\n    });\n  }, s4.prototype.sendFileMessage = function(e3) {\n    var t4 = n$2(n$2({}, mn$2), e3);\n    return cs$2(gn$2(t4)).throw(b$2.invalidParameters), this._sendFileMessage(t4);\n  }, s4.prototype.sendMultipleFilesMessage = function(e3) {\n    var t4, r2 = n$2(n$2({}, di), e3), i4 = uo.of(this._iid);\n    cs$2(function(e4, t5) {\n      return void 0 === t5 && (t5 = Zr$1), sn$2(e4) && S$1(\"string\", e4.message, true) && Array.isArray(e4.fileInfoList) && e4.fileInfoList.length >= 2 && e4.fileInfoList.length <= t5 && e4.fileInfoList.every(function(e5) {\n        return hi(e5);\n      });\n    }(r2, null === (t4 = i4.appInfo) || void 0 === t4 ? void 0 : t4.multipleFilesMessageFileCountLimit)).throw(b$2.invalidParameters);\n    var s5 = !!e3.fileInfoList.find(function(e4) {\n      var t5 = i4.appInfo.uploadSizeLimit;\n      return e4.file instanceof Blob && e4.file.size > t5 || e4.fileSize > t5;\n    });\n    return cs$2(!s5).throw(b$2.fileSizeLimitExceededError), this._sendMultipleFilesMessage(r2);\n  }, s4.prototype._sendFileMessage = function(e3, t4, r2) {\n    var i4 = this;\n    void 0 === t4 && (t4 = bi.SEND);\n    var s5 = uo.of(this._iid).dispatcher, a4 = la.of(this._iid).fileMessageQueue, o2 = null != r2 ? r2 : this._generateRequestId(), u3 = Date.now(), c3 = new nn$2();\n    return ms$2(2).then(function() {\n      var r3 = i4._createPendingFileMessage(e3, o2, u3);\n      s5.dispatch(new po({ messages: [r3], source: t4 === bi.RESEND ? no.LOCAL_MESSAGE_RESEND_STARTED : no.EVENT_MESSAGE_SENT_PENDING })), kr$1(function() {\n        return r$1(i4, void 0, void 0, function() {\n          return s$1(this, function(e4) {\n            return [2, c3._trigger(r3)];\n          });\n        });\n      }), a4.request(i4, o2, e3).then(function(e4) {\n        s5.dispatch(new po({ messages: [e4], source: no.EVENT_MESSAGE_SENT_SUCCESS })), kr$1(function() {\n          return r$1(i4, void 0, void 0, function() {\n            return s$1(this, function(t5) {\n              return [2, c3._trigger(e4)];\n            });\n          });\n        });\n      }).catch(function(t5) {\n        if (v$2(t5)) throw t5;\n        ms$2(2).then(function() {\n          var r4 = i4._createPendingFileMessage(e3, o2, u3), a5 = uo.of(i4._iid).cacheContext, l2 = a5.localCacheEnabled && a5.localCacheConfig.enableAutoResend && O$2(t5.code);\n          i4._markMessageAsFailed(r4, t5, l2), s5.dispatch(new po({ messages: [r4], source: r4.sendingStatus === Z.PENDING ? no.REQUEST_RESEND_MESSAGE : t5.code === u$1.FILE_UPLOAD_CANCEL_FAILED ? no.LOCAL_MESSAGE_CANCELED : no.EVENT_MESSAGE_SENT_FAILED })), kr$1(function() {\n            return r$1(i4, void 0, void 0, function() {\n              return s$1(this, function(e4) {\n                return [2, c3._triggerFailed(t5, r4)];\n              });\n            });\n          });\n        });\n      });\n    }), c3;\n  }, s4.prototype._autoResendFileMessage = function(e3) {\n    cs$2(e3 instanceof Nt$1 && !!e3.messageParams).throw(b$2.invalidParameters);\n    var t4 = uo.of(this._iid).logger;\n    return t4.debug(\"autoResendFileMessage pending\", e3), this._sendFileMessage(e3.messageParams, bi.SEND, e3.reqId).onFailed(function(e4) {\n      t4.debug(\"autoResendFileMessage failed\", e4);\n    }).onSucceeded(function(e4) {\n      t4.debug(\"autoResendFileMessage success\", e4);\n    });\n  }, s4.prototype._sendMultipleFilesMessage = function(e3, t4, r2) {\n    var i4 = this, s5 = uo.of(this._iid).dispatcher, a4 = la.of(this._iid).fileMessageQueue, o2 = null != r2 ? r2 : this._generateRequestId(), u3 = Date.now(), c3 = new fi();\n    return ms$2(2).then(function() {\n      var n2 = i4._createPendingMultipleFilesMessage(e3, o2, u3);\n      s5.dispatch(new po({ messages: [n2], source: t4 === bi.RESEND ? no.LOCAL_MESSAGE_RESEND_STARTED : no.EVENT_MESSAGE_SENT_PENDING })), kr$1(function() {\n        return r$1(i4, void 0, void 0, function() {\n          return s$1(this, function(e4) {\n            return [2, c3._trigger(n2)];\n          });\n        });\n      }), a4.request(i4, o2, e3, { requestHandler: c3, isCopy: t4 === bi.COPY }).then(function(e4) {\n        s5.dispatch(new po({ messages: [e4], source: no.EVENT_MESSAGE_SENT_SUCCESS })), kr$1(function() {\n          return r$1(i4, void 0, void 0, function() {\n            return s$1(this, function(t5) {\n              return [2, c3._trigger(e4)];\n            });\n          });\n        });\n      }).catch(function(t5) {\n        if (v$2(t5)) throw t5;\n        ms$2(2).then(function() {\n          var n3 = i4._createPendingMultipleFilesMessage(e3, o2, u3);\n          i4._markMessageAsFailed(n3, t5), s5.dispatch(new po({ messages: [n3], source: no.EVENT_MESSAGE_SENT_FAILED })), kr$1(function() {\n            return r$1(i4, void 0, void 0, function() {\n              return s$1(this, function(e4) {\n                return [2, c3._triggerFailed(t5, n3)];\n              });\n            });\n          });\n        });\n      });\n    }), c3;\n  }, s4.prototype._createScheduledFileMessage = function(e3, t4, r2, i4) {\n    var s5 = this, a4 = uo.of(this._iid).requestQueue, o2 = new Rr(n$2(n$2({ reqId: r2, channelType: this.channelType, channelUrl: this.url }, e3), { fileUrl: e3.fileUrl, requireAuth: e3.requireAuth }));\n    a4.send(o2).then(function(e4) {\n      var n2 = e4.as(xr).message;\n      kr$1(function() {\n        return r$1(s5, void 0, void 0, function() {\n          return s$1(this, function(e5) {\n            return [2, t4._trigger(n2)];\n          });\n        });\n      });\n    }).catch(function(n2) {\n      if (v$2(n2)) throw n2;\n      ms$2(2).then(function() {\n        var a5 = s5._createPendingScheduledFileMessage(e3, r2, i4);\n        s5._markMessageAsFailed(a5, n2), kr$1(function() {\n          return r$1(s5, void 0, void 0, function() {\n            return s$1(this, function(e4) {\n              return [2, t4._triggerFailed(n2, a5)];\n            });\n          });\n        });\n      });\n    });\n  }, s4.prototype.sendFileMessages = function(e3) {\n    var t4, n2;\n    cs$2(e3.every(function(e4) {\n      return gn$2(n$2(n$2({}, mn$2), e4));\n    })).throw(b$2.invalidParameters);\n    var r2 = new nn$2();\n    try {\n      for (var i4 = o(e3), s5 = i4.next(); !s5.done; s5 = i4.next()) {\n        var a4 = s5.value;\n        this.sendFileMessage(a4).onPending(function(e4) {\n          return r2._trigger(e4);\n        }).onFailed(function(e4, t5) {\n          return r2._triggerFailed(e4, t5);\n        }).onSucceeded(function(e4) {\n          return r2._trigger(e4);\n        });\n      }\n    } catch (e4) {\n      t4 = { error: e4 };\n    } finally {\n      try {\n        s5 && !s5.done && (n2 = i4.return) && n2.call(i4);\n      } finally {\n        if (t4) throw t4.error;\n      }\n    }\n    return r2;\n  }, s4.prototype.resendFileMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i4;\n      return s$1(this, function(s5) {\n        return n2 = this._validateFailedFileMessageHasFile(e3, t4), cs$2(e3 instanceof Nt$1 && n2 && !e3.scheduledInfo).throw(b$2.invalidParameters), r2 = new rt$1(), i4 = _n$2(e3, t4), this._sendFileMessage(i4, bi.RESEND, e3.reqId).onFailed(function(e4) {\n          return r2.reject(e4);\n        }).onSucceeded(function(e4) {\n          return r2.resolve(e4);\n        }), [2, r2.promise];\n      });\n    });\n  }, s4.prototype.resendMessage = function(e3, t4) {\n    var n2, r2;\n    if (cs$2(e3 instanceof _t && !e3.scheduledInfo && e3.isResendable).throw(b$2.invalidParameters), e3.isUserMessage()) {\n      var i4 = null !== (n2 = e3.messageParams) && void 0 !== n2 ? n2 : ln$2(e3);\n      return this._sendUserMessage(i4, bi.RESEND, e3.reqId);\n    }\n    if (e3.isFileMessage()) {\n      var s5 = this._validateFailedFileMessageHasFile(e3, t4);\n      cs$2(s5).throw(b$2.invalidParameters);\n      i4 = null !== (r2 = e3.messageParams) && void 0 !== r2 ? r2 : _n$2(e3, t4);\n      return this._sendFileMessage(i4, bi.RESEND, e3.reqId);\n    }\n    if (e3.isMultipleFilesMessage()) throw b$2.channelTypeNotSupportedError;\n  }, s4.prototype.updateFileMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return r2 = n$2(n$2({}, wn$2), t4), cs$2(S$1(\"number\", e3) && function(e4) {\n              return In$2(e4);\n            }(r2)).throw(b$2.invalidParameters), i4 = uo.of(this._iid).requestQueue, s5 = new wr(n$2({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: r2.metaArrays ? { array: r2.metaArrays, mode: \"add\", upsert: true } : void 0 }, r2)), [4, i4.send(s5)];\n          case 1:\n            return a4 = o2.sent(), [2, a4.as(Mr).message];\n        }\n      });\n    });\n  }, s4.prototype.uploadFile = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5, a4, o2, u3;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return t4 = uo.of(this._iid).requestQueue, r2 = ee(), (i4 = new Re$2({ file: e3.file, channelUrl: this.url, thumbnailSizes: e3.thumbnailSizes, requestId: r2 })).uploadProgressHandler = e3.progressHandler, e3.uploadStartedHandler && e3.uploadStartedHandler(r2), [4, t4.send(i4)];\n          case 1:\n            return s5 = c3.sent(), a4 = s5.as(xe$1), o2 = a4.url, u3 = a4.thumbnails, [2, { requestId: r2, url: o2, thumbnails: u3 }];\n        }\n      });\n    });\n  }, s4.prototype.cancelUploadingFileMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), la.of(this._iid).fileMessageQueue.cancel(this, e3), [2, true];\n      });\n    });\n  }, s4.prototype.copyFileMessage = function(e3, n2) {\n    var r2, i4, a4;\n    return r$1(this, void 0, void 0, function() {\n      var o2, c3;\n      return s$1(this, function(l2) {\n        return cs$2(e3 instanceof s4 && n2 instanceof Nt$1 && n2.sendingStatus === Z.SUCCEEDED && this.url === n2.channelUrl && !n2.scheduledInfo).throw(b$2.invalidParameters), o2 = new rt$1(), c3 = oe(n$2(n$2({}, n2), { fileUrl: n2.url, fileName: n2.name, fileSize: n2.size, mimeType: n2.type, mentionType: n2.mentionType, mentionedUserIds: null !== (r2 = n2.mentionedUserIds) && void 0 !== r2 ? r2 : null === (i4 = n2.mentionedUsers) || void 0 === i4 ? void 0 : i4.map(function(e4) {\n          return e4.userId;\n        }), pushNotificationDeliveryOption: W.DEFAULT, parentMessageId: null, isReplyToChannel: false, thumbnailSizes: null === (a4 = n2.thumbnails) || void 0 === a4 ? void 0 : a4.map(function(e4) {\n          return { maxWidth: e4.width, maxHeight: e4.height };\n        }), requireAuth: n2.requireAuth, isPinnedMessage: false })), e3._sendFileMessage(c3).onSucceeded(function(e4) {\n          return o2.resolve(e4);\n        }).onFailed(function(e4) {\n          return o2.reject(e4);\n        }), [2, o2.promise];\n      });\n    });\n  }, s4.prototype.copyMessage = function(e3, t4) {\n    cs$2(e3 instanceof s4 && t4 instanceof _t && t4.sendingStatus === Z.SUCCEEDED && this.url === t4.channelUrl && !t4.scheduledInfo).throw(b$2.invalidParameters);\n    var n2 = t4, r2 = e3;\n    if (n2.isUserMessage()) {\n      cs$2(!n2.poll).throw(b$2.notSupportedError);\n      var i4 = un$2(n2);\n      return r2._sendUserMessage(i4);\n    }\n    if (n2.isFileMessage()) {\n      i4 = vn$2(n2);\n      return r2._sendFileMessage(i4);\n    }\n    if (t4.isMultipleFilesMessage()) throw b$2.channelTypeNotSupportedError;\n  }, s4.prototype.deleteMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(e3 instanceof yt).throw(b$2.invalidParameters), e3.messageId > 0 ? (t4 = uo.of(this._iid).requestQueue, r2 = new ot$1({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, messageToken: e3 instanceof _t ? e3._messageToken : void 0 }), [4, t4.send(r2)]) : [3, 2];\n          case 1:\n            i4.sent(), i4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, s4.prototype.addReaction = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(e3 instanceof yt && e3.messageId > 0 && S$1(\"string\", t4)).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, i4 = new Sr({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, reactionKey: t4 }), [4, r2.send(i4)];\n          case 1:\n            return s5 = a4.sent(), [2, s5.as(Ur).reactionEvent];\n        }\n      });\n    });\n  }, s4.prototype.deleteReaction = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(e3 instanceof yt && e3.messageId > 0 && S$1(\"string\", t4)).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, i4 = new Ar({ channelType: this.channelType, channelUrl: this.url, messageId: e3.messageId, reactionKey: t4 }), [4, r2.send(i4)];\n          case 1:\n            return s5 = a4.sent(), [2, s5.as(Nr).reactionEvent];\n        }\n      });\n    });\n  }, s4.prototype._updateUserMessageMetaArray = function(e3, t4, r2, i4) {\n    return r$1(this, void 0, void 0, function() {\n      var s5, a4, o2, u3, c3, l2;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return s5 = uo.of(this._iid), a4 = s5.dispatcher, o2 = s5.requestQueue, u3 = new Er({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: { array: t4, mode: r2, upsert: i4 } }), [4, o2.send(u3)];\n          case 1:\n            return c3 = d4.sent(), l2 = c3.as(Tr).message, a4.dispatch(new po({ messages: [l2], source: no.EVENT_MESSAGE_UPDATED })), [2, l2];\n        }\n      });\n    });\n  }, s4.prototype._updateFileMessageMetaArray = function(e3, t4, r2, i4) {\n    return r$1(this, void 0, void 0, function() {\n      var s5, a4, o2, u3, c3, l2;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return s5 = uo.of(this._iid), a4 = s5.dispatcher, o2 = s5.requestQueue, u3 = new wr({ channelType: this.channelType, channelUrl: this.url, messageId: e3, metaArrayParams: { array: t4, mode: r2, upsert: i4 } }), [4, o2.send(u3)];\n          case 1:\n            return c3 = d4.sent(), l2 = c3.as(Mr).message, a4.dispatch(new po({ messages: [l2], source: no.EVENT_MESSAGE_UPDATED })), [2, l2];\n        }\n      });\n    });\n  }, s4.prototype.createMessageMetaArrayKeys = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        return cs$2(e3 instanceof yt && e3.messageId > 0 && C$1(\"string\", t4)).throw(b$2.invalidParameters), n2 = t4.map(function(e4) {\n          return new Ve$1({ key: e4 });\n        }), e3 instanceof Nt$1 ? [2, this._updateFileMessageMetaArray(e3.messageId, n2, \"add\", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, n2, \"add\", true)];\n      });\n    });\n  }, s4.prototype.deleteMessageMetaArrayKeys = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        return cs$2(e3 instanceof yt && e3.messageId > 0 && C$1(\"string\", t4)).throw(b$2.invalidParameters), n2 = t4.map(function(e4) {\n          return new Ve$1({ key: e4 });\n        }), e3 instanceof Nt$1 ? [2, this._updateFileMessageMetaArray(e3.messageId, n2, \"remove\", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, n2, \"remove\", true)];\n      });\n    });\n  }, s4.prototype.addMessageMetaArrayValues = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return cs$2(e3 instanceof yt && e3.messageId > 0 && t4.every(function(e4) {\n          return e4 instanceof Ve$1;\n        })).throw(b$2.invalidParameters), e3 instanceof Nt$1 ? [2, this._updateFileMessageMetaArray(e3.messageId, t4, \"add\", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, t4, \"add\", true)];\n      });\n    });\n  }, s4.prototype.removeMessageMetaArrayValues = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return cs$2(e3 instanceof yt && e3.messageId > 0 && t4.every(function(e4) {\n          return e4 instanceof Ve$1;\n        })).throw(b$2.invalidParameters), e3 instanceof Nt$1 ? [2, this._updateFileMessageMetaArray(e3.messageId, t4, \"remove\", true)] : [2, this._updateUserMessageMetaArray(e3.messageId, t4, \"remove\", true)];\n      });\n    });\n  }, s4.prototype.report = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return cs$2((T$2(yn$2, e3) || e3 instanceof ro) && S$1(\"string\", t4)).throw(b$2.invalidParameters), r2 = uo.of(this._iid), i4 = r2.sdkState, s5 = r2.requestQueue, a4 = new yr({ channelUrl: this.url, channelType: this.channelType, userId: i4.userId, category: e3, description: t4 }), [4, s5.send(a4)];\n          case 1:\n            return o2.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.reportUser = function(e3, t4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      var i4, s5, a4, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return cs$2(e3 instanceof ls$2 && (T$2(yn$2, t4) || t4 instanceof ro) && S$1(\"string\", r2)).throw(b$2.invalidParameters), i4 = uo.of(this._iid), s5 = i4.sdkState, a4 = i4.requestQueue, o2 = new _r$1({ channelUrl: this.url, channelType: this.channelType, userId: s5.userId, offendingUserId: e3.userId, category: t4, description: r2 }), [4, a4.send(o2)];\n          case 1:\n            return u3.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.reportMessage = function(e3, t4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      var i4, s5, a4, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return cs$2(e3 instanceof _t && (T$2(yn$2, t4) || t4 instanceof ro) && S$1(\"string\", r2)).throw(b$2.invalidParameters), i4 = uo.of(this._iid), s5 = i4.sdkState, a4 = i4.requestQueue, o2 = new gr({ channelUrl: this.url, channelType: this.channelType, userId: s5.userId, offendingUserId: e3.sender.userId, messageId: e3.messageId, category: t4, description: r2, messageToken: e3._messageToken }), [4, a4.send(o2)];\n          case 1:\n            return u3.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.updatePoll = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return cs$2(S$1(\"number\", e3) && function(e4) {\n              return S$1(\"string\", e4.title, true) && Co(e4.data) && S$1(\"boolean\", e4.allowUserSuggestion, true) && S$1(\"boolean\", e4.allowMultipleVotes, true) && S$1(\"number\", e4.closeAt, true);\n            }(t4)).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, i4 = new Dr(n$2({ pollId: e3 }, t4)), [4, r2.send(i4)];\n          case 1:\n            return s5 = a4.sent(), [2, s5.as(Lr).poll];\n        }\n      });\n    });\n  }, s4.prototype.deletePoll = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return t4 = S$1(\"number\", e3), cs$2(t4).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, i4 = new Fr({ pollId: e3 }), [4, r2.send(i4)];\n          case 1:\n            return s5.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.closePoll = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return t4 = S$1(\"number\", e3), cs$2(t4).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, i4 = new qr({ pollId: e3 }), [4, r2.send(i4)];\n          case 1:\n            return s5 = a4.sent(), [2, s5.as(zr).poll];\n        }\n      });\n    });\n  }, s4.prototype.addPollOption = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return r2 = S$1(\"number\", e3) && S$1(\"string\", t4) && \"\" !== t4.trim(), cs$2(r2).throw(b$2.invalidParameters), i4 = uo.of(this._iid).requestQueue, s5 = new Br({ channelUrl: this.url, channelType: this.channelType, pollId: e3, optionText: t4 }), [4, i4.send(s5)];\n          case 1:\n            return a4 = o2.sent(), [2, a4.as(jr).poll];\n        }\n      });\n    });\n  }, s4.prototype.updatePollOption = function(e3, t4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      var i4, s5, a4, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return i4 = S$1(\"number\", e3) && S$1(\"number\", t4) && S$1(\"string\", r2) && \"\" !== r2.trim(), cs$2(i4).throw(b$2.invalidParameters), s5 = uo.of(this._iid).requestQueue, a4 = new Kr({ pollId: e3, pollOptionId: t4, optionText: r2 }), [4, s5.send(a4)];\n          case 1:\n            return o2 = u3.sent(), [2, o2.as(Qr).poll];\n        }\n      });\n    });\n  }, s4.prototype.deletePollOption = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return r2 = S$1(\"number\", e3) && S$1(\"number\", t4), cs$2(r2).throw(b$2.invalidParameters), i4 = uo.of(this._iid).requestQueue, s5 = new Gr({ pollId: e3, pollOptionId: t4 }), [4, i4.send(s5)];\n          case 1:\n            return a4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.votePoll = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i4, s5, a4, o2, u3, c3;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return r2 = S$1(\"number\", e3) && C$1(\"number\", t4), cs$2(r2).throw(b$2.invalidParameters), i4 = uo.of(this._iid), s5 = i4.requestQueue, a4 = i4.dispatcher, o2 = new Vr({ reqId: this._generateRequestId(), channelUrl: this.url, channelType: this.channelType, pollId: e3, pollOptionIds: t4 }), [4, s5.send(o2)];\n          case 1:\n            return u3 = l2.sent(), c3 = u3.as(Hr).event, a4.dispatch(new So({ event: c3, source: no.EVENT_POLL_VOTED })), [2, c3];\n        }\n      });\n    });\n  }, s4.prototype.getPollChangeLogsSinceTimestamp = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return cs$2(S$1(\"number\", e3)).throw(b$2.invalidParameters), [4, Qo.of(this._iid).getPollChangeLogs(this.url, this.channelType, e3)];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, s4.prototype.getPollChangeLogsSinceToken = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3, true)), [4, Qo.of(this._iid).getPollChangeLogs(this.url, this.channelType, e3)];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, s4.prototype.createPollListQuery = function(e3) {\n    return void 0 === e3 && (e3 = 10), new Yo(this._iid, { channelUrl: this.url, channelType: this.channelType, limit: e3 });\n  }, s4.prototype.createPollVoterListQuery = function(e3, t4, n2) {\n    return void 0 === n2 && (n2 = 20), new $o(this._iid, { channelUrl: this.url, channelType: this.channelType, pollId: e3, pollOptionId: t4, limit: n2 });\n  }, s4.prototype.pinMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(S$1(\"number\", e3) && e3 > 0).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new _i({ channelType: this.channelType, channelUrl: this.url, messageId: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4.prototype.unpinMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, r2;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return cs$2(S$1(\"number\", e3) && e3 > 0).throw(b$2.invalidParameters), t4 = uo.of(this._iid).requestQueue, r2 = new gi({ channelType: this.channelType, channelUrl: this.url, messageId: e3 }), [4, t4.send(r2)];\n          case 1:\n            return i4.sent(), [2];\n        }\n      });\n    });\n  }, s4;\n}(Jr$1), wi = function(e3) {\n  function t4(t5) {\n    void 0 === t5 && (t5 = {});\n    var n2 = e3.call(this) || this;\n    return Object.keys(t5).forEach(function(e4) {\n      n2.hasOwnProperty(e4) && (n2[e4] = t5[e4]);\n    }), n2;\n  }\n  return t$2(t4, e3), t4;\n}(function() {\n  this.onConnected = ut$1, this.onReconnectStarted = ut$1, this.onReconnectSucceeded = ut$1, this.onReconnectFailed = ut$1, this.onDisconnected = ut$1;\n}), Mi = function(e3) {\n  function t4(t5) {\n    void 0 === t5 && (t5 = {});\n    var n2 = e3.call(this) || this;\n    return Object.keys(t5).forEach(function(e4) {\n      n2.hasOwnProperty(e4) && (n2[e4] = t5[e4]);\n    }), n2;\n  }\n  return t$2(t4, e3), t4;\n}(function() {\n  this.onSessionExpired = ut$1, this.onSessionTokenRequired = function(e3) {\n    return e3(null);\n  }, this.onSessionError = ut$1, this.onSessionRefreshed = ut$1, this.onSessionClosed = ut$1;\n}), Si = function(e3) {\n  function t4(t5) {\n    void 0 === t5 && (t5 = {});\n    var n2 = e3.call(this) || this;\n    return Object.keys(t5).forEach(function(e4) {\n      n2.hasOwnProperty(e4) && (n2[e4] = t5[e4]);\n    }), n2;\n  }\n  return t$2(t4, e3), t4;\n}(function() {\n  this.onFriendsDiscovered = ut$1, this.onTotalUnreadMessageCountChanged = ut$1, this.onTotalUnreadMessageCountUpdated = ut$1;\n}), Ui = function(t4) {\n  function n2(n3) {\n    var r2 = n3.limit, s4 = n3.token, a4 = n3.userIdsFilter, o2 = n3.metaDataKeyFilter, u3 = n3.metaDataValuesFilter, c3 = n3.nicknameStartsWithFilter, l2 = t4.call(this) || this;\n    return l2.method = ae.GET, l2.path = ue, l2.params = se({ limit: r2, token: s4, user_ids: a4, metadatakey: o2, metadatavalues_in: u3, nickname_startswith: c3 }), l2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Ai = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.users = n2.users.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), r2.next = n2.next, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Ni = function(e3) {\n  function i3(t4, n2) {\n    var r2, i4, s4, a4 = this;\n    return (a4 = e3.call(this, t4, n2) || this).userIdsFilter = null, a4.metaDataKeyFilter = null, a4.metaDataValuesFilter = null, a4.nicknameStartsWithFilter = null, a4.userIdsFilter = null !== (r2 = n2.userIdsFilter) && void 0 !== r2 ? r2 : null, a4.metaDataKeyFilter = null !== (i4 = n2.metaDataKeyFilter) && void 0 !== i4 ? i4 : null, a4.metaDataValuesFilter = null !== (s4 = n2.metaDataValuesFilter) && void 0 !== s4 ? s4 : null, a4.nicknameStartsWithFilter = n2.nicknameStartsWithFilter || null, a4;\n  }\n  return t$2(i3, e3), i3.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && C$1(\"string\", this.userIdsFilter, true) && S$1(\"string\", this.metaDataKeyFilter, true) && C$1(\"string\", this.metaDataValuesFilter, true) && S$1(\"string\", this.nicknameStartsWithFilter, true);\n  }, i3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, r2, i4, s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, r2 = new Ui(oe(n$2(n$2({}, this), { token: this._token }))), [4, e4.send(r2)]) : [3, 2] : [3, 5];\n          case 1:\n            return i4 = c3.sent(), s4 = i4.as(Ai), a4 = s4.users, o2 = s4.next, this._token = o2, this._hasNext = !!o2, this._isLoading = false, [2, a4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(Oo), Ci = function(t4) {\n  function n2(n3) {\n    var r2 = n3.userId, s4 = n3.limit, a4 = n3.token, o2 = n3.userIdsFilter, u3 = t4.call(this) || this;\n    return u3.method = ae.GET, u3.path = \"\".concat(ue, \"/\").concat(r2, \"/block\"), u3.params = se({ limit: s4, token: a4, user_ids: o2 }), u3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Oi = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.users = n2.users.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), r2.next = n2.next, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), ki = function(e3) {\n  function i3(t4, n2) {\n    var r2, i4 = this;\n    return (i4 = e3.call(this, t4, n2) || this).userIdsFilter = null, i4.userIdsFilter = null !== (r2 = n2.userIdsFilter) && void 0 !== r2 ? r2 : null, i4;\n  }\n  return t$2(i3, e3), i3.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && C$1(\"string\", this.userIdsFilter, true);\n  }, i3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, r2, i4, s4, a4, o2, c3, l2;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid), r2 = e4.sdkState, i4 = e4.requestQueue, s4 = new Ci(oe(n$2(n$2({}, this), { userId: r2.userId, token: this._token }))), [4, i4.send(s4)]) : [3, 2] : [3, 5];\n          case 1:\n            return a4 = d4.sent(), o2 = a4.as(Oi), c3 = o2.users, l2 = o2.next, this._token = l2, this._hasNext = !!l2, this._isLoading = false, [2, c3];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(Oo), Pi = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.limit, s4 = t5.token, a4 = e3.call(this) || this;\n    return a4.method = ae.GET, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/friends\"), a4.params = { limit: r2, token: s4 }, a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Ri = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.hasMore = n2.has_more, r2.users = n2.users.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), r2.next = n2.next, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), xi = function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this);\n  }, t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, r2, i3, s4, a4, o2, c3, l2;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid), t5 = e4.sdkState, r2 = e4.requestQueue, i3 = new Pi(n$2(n$2({}, this), { userId: t5.userId, token: this._token })), [4, r2.send(i3)]) : [3, 2] : [3, 5];\n          case 1:\n            return s4 = d4.sent(), a4 = s4.as(Ri), o2 = a4.users, c3 = a4.hasMore, l2 = a4.next, this._token = l2, this._hasNext = c3, this._isLoading = false, [2, o2];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(Oo), Di = {}, Li = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.itemSizeLimit, r2 = void 0 === n2 ? 1048576 : n2, i3 = e4.cacheLimit, s4 = void 0 === i3 ? 256 : i3, a4 = e4.blockHashBase, o2 = void 0 === a4 ? 2 : a4, u3 = e4.blockHashMultiplier, c3 = void 0 === u3 ? 10 : u3, l2 = e4.blockHashConstant, d4 = void 0 === l2 ? 11 : l2, h4 = e4.transactionApplyDelay, f2 = void 0 === h4 ? 200 : h4, p2 = e4.disableLogger, m4 = void 0 !== p2 && p2;\n    return Di[t4] || (this.itemSizeLimit = r2, this.cacheLimit = s4, this.blockHashBase = o2, this.blockHashMultiplier = c3, this.blockHashConstant = d4, this.transactionApplyDelay = f2, this.disableLogger = m4, Di[t4] = this), Di[t4];\n  }\n  return e3.get = function(e4) {\n    return Di[e4];\n  }, e3;\n}();\n!function(e3) {\n  e3[e3.UNKNOWN_ERROR = 6e7] = \"UNKNOWN_ERROR\", e3[e3.STORE_NOT_DEFINED = 61001e3] = \"STORE_NOT_DEFINED\", e3[e3.STORE_NOT_AVAILABLE = 61001001] = \"STORE_NOT_AVAILABLE\", e3[e3.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING = 61001002] = \"STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING\", e3[e3.STORE_IS_FULL = 61001003] = \"STORE_IS_FULL\", e3[e3.STORE_NOT_INITIALIZED = 61001004] = \"STORE_NOT_INITIALIZED\", e3[e3.STORE_INVALID_KEY_TYPE = 61002e3] = \"STORE_INVALID_KEY_TYPE\", e3[e3.STORE_BROKEN_INTEGRITY = 61002001] = \"STORE_BROKEN_INTEGRITY\", e3[e3.STORE_BROKEN_BLOB = 61002002] = \"STORE_BROKEN_BLOB\", e3[e3.STORE_ENCRYPTION_INVALID = 61002003] = \"STORE_ENCRYPTION_INVALID\", e3[e3.STORE_ITEM_SIZE_LIMIT_EXCEEDED = 61017e3] = \"STORE_ITEM_SIZE_LIMIT_EXCEEDED\", e3[e3.STORE_READ_FAILED = 61017001] = \"STORE_READ_FAILED\", e3[e3.STORE_WRITE_FAILED = 61017002] = \"STORE_WRITE_FAILED\", e3[e3.DATABASE_SCHEMA_NOT_ON_UPGRADE = 62002e3] = \"DATABASE_SCHEMA_NOT_ON_UPGRADE\", e3[e3.COLLECTION_NOT_READY = 63001e3] = \"COLLECTION_NOT_READY\", e3[e3.COLLECTION_KEY_NOT_MATCH = 63002e3] = \"COLLECTION_KEY_NOT_MATCH\", e3[e3.COLLECTION_QUERY_NOT_VALID = 63002001] = \"COLLECTION_QUERY_NOT_VALID\", e3[e3.COLLECTION_KEY_NOT_FOUND = 63004e3] = \"COLLECTION_KEY_NOT_FOUND\", e3[e3.COLLECTION_KEY_NOT_GIVEN = 63004001] = \"COLLECTION_KEY_NOT_GIVEN\", e3[e3.COLLECTION_INSERT_DUPLICATE = 63009e3] = \"COLLECTION_INSERT_DUPLICATE\", e3[e3.COLLECTION_WRITE_FAILED = 63017e3] = \"COLLECTION_WRITE_FAILED\", e3[e3.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED = 63017001] = \"COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED\", e3[e3.INDEX_TABLE_IS_REQUIRED = 65001e3] = \"INDEX_TABLE_IS_REQUIRED\", e3[e3.INDEX_TYPE_NOT_MATCH = 65002e3] = \"INDEX_TYPE_NOT_MATCH\", e3[e3.COMPARE_TYPE_NOT_MATCH = 69002001] = \"COMPARE_TYPE_NOT_MATCH\", e3[e3.CIRCULAR_REFERENCE_FOUND = 69002002] = \"CIRCULAR_REFERENCE_FOUND\";\n}(Ei || (Ei = {}));\nvar Fi, qi = function(e3) {\n  function t4(n2) {\n    var r2 = n2.code, i3 = void 0 === r2 ? Ei.UNKNOWN_ERROR : r2, s4 = n2.message, a4 = void 0 === s4 ? \"Unknown error occurred.\" : s4, o2 = e3.call(this, a4) || this;\n    return o2.code = i3, Object.setPrototypeOf(o2, t4.prototype), o2;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4, \"storeNotDefined\", { get: function() {\n    return new t4({ code: Ei.STORE_NOT_DEFINED, message: \"Store is not defined. Specify the store on NestDB()\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeNotAvailable\", { get: function() {\n    return new t4({ code: Ei.STORE_NOT_AVAILABLE, message: \"Store is not available. Check your environment settings.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeNotAvailableInPrivateBrowsing\", { get: function() {\n    return new t4({ code: Ei.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING, message: \"Store is not available because it is in private browsing.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeIsFull\", { get: function() {\n    return new t4({ code: Ei.STORE_IS_FULL, message: \"Store is full.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeNotInitialized\", { get: function() {\n    return new t4({ code: Ei.STORE_NOT_INITIALIZED, message: \"Store is not initialized.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeKeyTypeIsInvalid\", { get: function() {\n    return new t4({ code: Ei.STORE_INVALID_KEY_TYPE, message: \"Store key should be string type.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeBrokenIntegrity\", { get: function() {\n    return new t4({ code: Ei.STORE_BROKEN_INTEGRITY, message: \"Data should be in a store but it does not. Integrity is broken.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeBrokenBlob\", { get: function() {\n    return new t4({ code: Ei.STORE_BROKEN_BLOB, message: \"Data should be in a store but it does not. Blob data is broken.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeEncryptionInvalid\", { get: function() {\n    return new t4({ code: Ei.STORE_ENCRYPTION_INVALID, message: \"Encryption algorithm has changed. All the store should reset.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeItemSizeExceeded\", { get: function() {\n    return new t4({ code: Ei.STORE_ITEM_SIZE_LIMIT_EXCEEDED, message: \"The size of the item exceeds the limit that the store allows.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeReadFailed\", { get: function() {\n    return new t4({ code: Ei.STORE_READ_FAILED, message: \"Failed to read from store.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"storeWriteFailed\", { get: function() {\n    return new t4({ code: Ei.STORE_WRITE_FAILED, message: \"Failed to write to store.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"databaseSchemaNotOnUpgrade\", { get: function() {\n    return new t4({ code: Ei.DATABASE_SCHEMA_NOT_ON_UPGRADE, message: \"Committing schema is not allowed when upgrade is not running.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionNotReady\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_NOT_READY, message: \"Collection is not ready due to an error during initialization.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionKeyNotMatch\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_KEY_NOT_MATCH, message: \"keyName of collection could not change.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionQueryNotValid\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_QUERY_NOT_VALID, message: \"Query parameter is not a valid format.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionInsertDuplicate\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_INSERT_DUPLICATE, message: \"The key already exists.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionKeyNotFound\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_KEY_NOT_FOUND, message: \"The key is not found.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionKeyNotGiven\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_KEY_NOT_GIVEN, message: \"The item should contain [keyName] property.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionWriteFailed\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_WRITE_FAILED, message: \"Failed to write an item.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"collectionItemSizeExceeded\", { get: function() {\n    return new t4({ code: Ei.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED, message: \"The size of the item exceeds the limit that a collection allows.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"indexTableIsRequired\", { get: function() {\n    return new t4({ code: Ei.INDEX_TABLE_IS_REQUIRED, message: \"Index table is required.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"indexTypesNotMatch\", { get: function() {\n    return new t4({ code: Ei.INDEX_TYPE_NOT_MATCH, message: \"Indexed column should have primitive type.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"compareTypesNotMatch\", { get: function() {\n    return new t4({ code: Ei.COMPARE_TYPE_NOT_MATCH, message: \"Values to compare have different types.\" });\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"circularReferenceFound\", { get: function() {\n    return new t4({ code: Ei.CIRCULAR_REFERENCE_FOUND, message: \"Cannot handle circular referenced object.\" });\n  }, enumerable: false, configurable: true }), t4;\n}(Error);\n!function(e3) {\n  e3.INIT = \"init\", e3.READY = \"ready\", e3.CLOSED = \"closed\";\n}(Fi || (Fi = {}));\nvar zi, Bi = function(e3, t4) {\n  if (void 0 === t4 && (t4 = /* @__PURE__ */ new WeakMap()), \"object\" == typeof e3 && null !== e3) {\n    if (t4.has(e3)) throw qi.circularReferenceFound;\n    var n2;\n    return t4.set(e3, true), Array.isArray(e3) ? n2 = e3.map(function(e4) {\n      return Bi(e4, t4);\n    }) : e3 instanceof RegExp || e3 instanceof Date ? n2 = e3 : (n2 = {}, Object.keys(e3).forEach(function(r2) {\n      n2[r2] = Bi(e3[r2], t4);\n    })), t4.delete(e3), n2;\n  }\n  return e3;\n}, ji = function(e3, t4) {\n  if (null == t4) return 1;\n  if (null == e3) return -1;\n  if (typeof e3 != typeof t4) throw qi.compareTypesNotMatch;\n  var n2 = 0;\n  switch (typeof e3) {\n    case \"boolean\":\n    case \"number\":\n      n2 = e3 - t4;\n      break;\n    case \"string\":\n      n2 = e3.localeCompare(t4);\n  }\n  return n2;\n}, Ki = function(e3, t4) {\n  for (var n2 = 0, r2 = 0; r2 < e3.length; r2++) n2 = e3.charCodeAt(r2) + (n2 << 6) + (n2 << 16) - n2;\n  return (n2 >>> 0) % t4;\n}, Qi = function(e3) {\n  return new Promise(function(t4) {\n    setTimeout(function() {\n      return t4();\n    }, e3);\n  });\n}, Gi = function(e3, t4) {\n  if (!t4) return false;\n  if (\"function\" != typeof e3) {\n    for (var n2 in e3) {\n      if ([\"/and\", \"&&\"].includes(n2)) {\n        if (e3[n2].some(function(e4) {\n          return !Gi(e4, t4);\n        })) return false;\n      } else if ([\"/or\", \"||\"].includes(n2)) {\n        if (e3[n2].every(function(e4) {\n          return !Gi(e4, t4);\n        })) return false;\n      } else if (\"/where\" === n2) {\n        if (!(0, e3[n2])(t4)) return false;\n      } else {\n        var r2 = n2;\n        if (\"object\" == typeof e3[r2]) {\n          var i3 = e3[r2];\n          for (var s4 in i3) switch (s4) {\n            case \"/eq\":\n            case \"=\":\n              if ((a4 = t4[r2]) !== (o2 = i3[s4])) return false;\n              break;\n            case \"/neq\":\n            case \"!=\":\n              if ((a4 = t4[r2]) === (o2 = i3[s4])) return false;\n              break;\n            case \"/gt\":\n            case \">\":\n              var a4 = t4[r2], o2 = i3[s4];\n              if (!(ji(a4, o2) > 0)) return false;\n              break;\n            case \"/gte\":\n            case \">=\":\n              a4 = t4[r2], o2 = i3[s4];\n              if (!(ji(a4, o2) >= 0)) return false;\n              break;\n            case \"/lt\":\n            case \"<\":\n              a4 = t4[r2], o2 = i3[s4];\n              if (!(ji(a4, o2) < 0)) return false;\n              break;\n            case \"/lte\":\n            case \"<=\":\n              a4 = t4[r2], o2 = i3[s4];\n              if (!(ji(a4, o2) <= 0)) return false;\n              break;\n            case \"/in\":\n              a4 = t4[r2];\n              if (!(o2 = i3[s4]).includes(a4)) return false;\n              break;\n            case \"/nin\":\n              a4 = t4[r2];\n              if ((o2 = i3[s4]).includes(a4)) return false;\n              break;\n            case \"/contain\":\n              a4 = t4[r2], o2 = i3[s4];\n              if (!a4.includes(o2)) return false;\n              break;\n            case \"/regex\":\n              a4 = t4[r2];\n              if (!(o2 = i3[s4]).test(a4)) return false;\n              break;\n            case \"/where\":\n              a4 = t4[r2];\n              if (!(0, i3[s4])(a4)) return false;\n          }\n        } else if (\"function\" == typeof e3[r2]) {\n          if (!e3[r2](t4[r2])) return false;\n        } else if (e3[r2] !== t4[r2]) return false;\n      }\n    }\n    return true;\n  }\n  return e3(t4);\n}, Vi = function() {\n}, Hi = function() {\n  return Promise.resolve();\n}, Wi = function(e3) {\n  return e3;\n}, Yi = function(e3, t4) {\n  t4();\n};\n!function(e3) {\n  e3[e3.FORWARD = 0] = \"FORWARD\", e3[e3.BACKWARD = 1] = \"BACKWARD\";\n}(zi || (zi = {}));\nvar Ji, Xi, Zi, $i = function() {\n  function e3(e4) {\n    var t4 = e4.initialPrevValue, n2 = void 0 === t4 ? null : t4, r2 = e4.initialNextValue, i3 = void 0 === r2 ? null : r2, s4 = e4.iterator, a4 = e4.map, o2 = void 0 === a4 ? Wi : a4, u3 = e4.backward, c3 = void 0 === u3 ? Hi : u3, l2 = e4.forward, d4 = void 0 === l2 ? Hi : l2, h4 = e4.complete, f2 = void 0 === h4 ? Vi : h4;\n    this._prevValue = n2, this._nextValue = i3, this._error = null, this._map = o2, this._backward = c3, this._forward = d4, this._iterator = s4, this._complete = f2;\n  }\n  return Object.defineProperty(e3.prototype, \"prevValue\", { get: function() {\n    return this._map(this._prevValue);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"nextValue\", { get: function() {\n    return this._map(this._nextValue);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"error\", { get: function() {\n    return this._error;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"hasPrevious\", { get: function() {\n    return !!this._prevValue;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"hasNext\", { get: function() {\n    return !!this._nextValue;\n  }, enumerable: false, configurable: true }), e3.prototype.prev = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            if (!this.hasPrevious) return [3, 6];\n            r2.label = 1;\n          case 1:\n            return r2.trys.push([1, 3, , 4]), e4 = this._prevValue, t4 = this, [4, this._backward()];\n          case 2:\n            return t4._prevValue = r2.sent() || null, this._nextValue = e4, [3, 4];\n          case 3:\n            return n2 = r2.sent(), this._error = n2, [3, 4];\n          case 4:\n            return [4, this._iterator(this)];\n          case 5:\n            return [2, r2.sent()];\n          case 6:\n            this._complete(), r2.label = 7;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            if (!this.hasNext) return [3, 6];\n            r2.label = 1;\n          case 1:\n            return r2.trys.push([1, 3, , 4]), e4 = this._nextValue, t4 = this, [4, this._forward()];\n          case 2:\n            return t4._nextValue = r2.sent() || null, this._prevValue = e4, [3, 4];\n          case 3:\n            return n2 = r2.sent(), this._error = n2, [3, 4];\n          case 4:\n            return [4, this._iterator(this)];\n          case 5:\n            return [2, r2.sent()];\n          case 6:\n            this._complete(), r2.label = 7;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.stop = function() {\n    this._prevValue = null, this._nextValue = null, this._complete();\n  }, e3;\n}(), es$1 = function() {\n  function e3(e4) {\n    var t4 = e4.condition, n2 = void 0 === t4 ? {} : t4, r2 = e4.backward, i3 = void 0 !== r2 && r2, s4 = e4.blockManager, a4 = e4.indexer;\n    this.condition = n2, this.backward = i3, this._blockManager = s4, this._indexer = a4;\n  }\n  return e3.prototype.findOptimizedStartPosition = function() {\n    var e4 = this, t4 = [\"=\", \"/eq\", \">\", \">=\", \"/gt\", \"/gte\"], n2 = [\"=\", \"/eq\", \"<\", \"<=\", \"/lt\", \"/lte\"];\n    if (this.backward) {\n      var r2 = this._indexer.origin.length - 1;\n      if (\"function\" != typeof this.condition) for (h4 = 0; h4 < this._indexer.fields.length; h4++) {\n        var i3 = this._indexer.fields[h4], s4 = 1;\n        if (\"-\" === i3[0] && (i3 = i3.slice(1), s4 = -1), this.condition[i3]) {\n          if (\"object\" == typeof this.condition[i3]) {\n            var a4 = s4 > 0 ? n2 : t4;\n            for (var o2 in this.condition[i3]) if (a4.includes(o2)) {\n              for (var u3 = r2; u3 >= 0; u3--) if (s4 * ji(this._indexer.origin[u3].columnValues[h4], this.condition[i3][o2]) <= 0) {\n                r2 = u3;\n                break;\n              }\n            }\n          } else for (u3 = r2; u3 >= 0; u3--) if (s4 * ji(this._indexer.origin[u3].columnValues[h4], this.condition[i3]) <= 0) {\n            r2 = u3;\n            break;\n          }\n        }\n      }\n      return Math.min(r2 + 1, this._indexer.origin.length - 1);\n    }\n    var c3 = 0;\n    if (\"function\" != typeof this.condition) for (var l2 = function(r3) {\n      var i4 = d4._indexer.fields[r3], s5 = 1;\n      if (\"-\" === i4[0] && (i4 = i4.slice(1), s5 = -1), d4.condition[i4]) {\n        if (\"object\" == typeof d4.condition[i4]) Object.keys(d4.condition[i4]).forEach(function(a6) {\n          if ((s5 > 0 ? t4 : n2).includes(a6)) {\n            for (var o3 = c3; o3 < e4._indexer.origin.length; o3++) if (s5 * ji(e4._indexer.origin[o3].columnValues[r3], e4.condition[i4][a6]) >= 0) {\n              c3 = o3;\n              break;\n            }\n          }\n        });\n        else for (var a5 = c3; a5 < d4._indexer.origin.length; a5++) if (s5 * ji(d4._indexer.origin[a5].columnValues[r3], d4.condition[i4]) >= 0) {\n          c3 = a5;\n          break;\n        }\n      }\n    }, d4 = this, h4 = 0; h4 < this._indexer.fields.length; h4++) l2(h4);\n    return Math.max(c3 - 1, 0);\n  }, e3.prototype.each = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o2, u3 = this;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            if (t4 = this.findOptimizedStartPosition(), n2 = 0, this.backward && this._indexer.origin[t4] && (n2 = this._indexer.origin[t4].keys.length - 1), r2 = function() {\n              if (u3._indexer.origin[t4]) {\n                if (!u3._indexer.origin[t4].keys[++n2]) {\n                  if (!u3._indexer.origin[++t4]) return false;\n                  n2 = 0;\n                }\n                return true;\n              }\n              return false;\n            }, i3 = function() {\n              if (u3._indexer.origin[t4]) {\n                if (!u3._indexer.origin[t4].keys[--n2]) {\n                  if (!u3._indexer.origin[--t4]) return false;\n                  n2 = u3._indexer.origin[t4].keys.length - 1;\n                }\n                return true;\n              }\n              return false;\n            }, s4 = null, !this._indexer.origin[t4]) return [3, 4];\n            a4 = this.backward ? i3 : r2, c3.label = 1;\n          case 1:\n            return [4, this._blockManager.getFromBlock(this._indexer.origin[t4].keys[n2])];\n          case 2:\n            if ((o2 = c3.sent()) && Gi(this.condition, o2)) return s4 = o2, [3, 4];\n            c3.label = 3;\n          case 3:\n            if (a4()) return [3, 1];\n            c3.label = 4;\n          case 4:\n            return [4, new Promise(function(a5) {\n              var o3 = new $i({ initialNextValue: Bi(s4), iterator: e4, forward: function() {\n                return r$1(u3, void 0, void 0, function() {\n                  var e5, s5;\n                  return s$1(this, function(a6) {\n                    switch (a6.label) {\n                      case 0:\n                        e5 = this.backward ? i3 : r2, a6.label = 1;\n                      case 1:\n                        return e5() ? [4, this._blockManager.getFromBlock(this._indexer.origin[t4].keys[n2])] : [3, 3];\n                      case 2:\n                        return (s5 = a6.sent()) && Gi(this.condition, s5) ? [2, Bi(s5)] : [3, 1];\n                      case 3:\n                        return [2, null];\n                    }\n                  });\n                });\n              }, backward: function() {\n                return r$1(u3, void 0, void 0, function() {\n                  var e5, s5;\n                  return s$1(this, function(a6) {\n                    switch (a6.label) {\n                      case 0:\n                        e5 = this.backward ? r2 : i3, a6.label = 1;\n                      case 1:\n                        return e5() ? [4, this._blockManager.getFromBlock(this._indexer.origin[t4].keys[n2])] : [3, 3];\n                      case 2:\n                        return (s5 = a6.sent()) && Gi(this.condition, s5) ? [2, Bi(s5)] : [3, 1];\n                      case 3:\n                        return [2, null];\n                    }\n                  });\n                });\n              }, complete: a5 });\n              e4(o3);\n            })];\n          case 5:\n            return [2, c3.sent()];\n        }\n      });\n    });\n  }, e3;\n}(), ts$1 = function() {\n  function e3(e4) {\n    var t4 = e4.condition, n2 = void 0 === t4 ? {} : t4, r2 = e4.backward, i3 = void 0 !== r2 && r2, s4 = e4.mutex, a4 = e4.blockManager, o2 = e4.indexer;\n    this._mutex = s4, this._iterator = new es$1({ condition: n2, backward: i3, blockManager: a4, indexer: o2 });\n  }\n  return e3.prototype.fetch = function(e4) {\n    return void 0 === e4 && (e4 = {}), r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4 = this;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            if (t4 = Math.max(e4.offset || 0, 0), 0 === (n2 = \"number\" == typeof e4.limit ? e4.limit : Number.MAX_SAFE_INTEGER)) return [2, []];\n            if (n2 < 0) throw qi.collectionQueryNotValid;\n            a4.label = 1;\n          case 1:\n            return a4.trys.push([1, 4, , 5]), r2 = [], [4, this._mutex.lock()];\n          case 2:\n            return a4.sent(), [4, this._iterator.each(function(e5) {\n              return r$1(s4, void 0, void 0, function() {\n                return s$1(this, function(i4) {\n                  return e5.error ? e5.stop() : e5.hasNext ? 0 === t4 ? (r2.push(e5.nextValue), 0 < n2 && n2 <= r2.length ? e5.stop() : e5.next()) : (t4--, e5.next()) : e5.stop(), [2];\n                });\n              });\n            })];\n          case 3:\n            return a4.sent(), this._mutex.unlock(), [2, r2];\n          case 4:\n            throw i3 = a4.sent(), this._mutex.unlock(), i3;\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.count = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2 = this;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return r2.trys.push([0, 3, , 4]), e4 = 0, [4, this._mutex.lock()];\n          case 1:\n            return r2.sent(), [4, this._iterator.each(function(t5) {\n              return r$1(n2, void 0, void 0, function() {\n                return s$1(this, function(n3) {\n                  return t5.error ? t5.stop() : t5.hasNext ? (e4++, t5.next()) : t5.stop(), [2];\n                });\n              });\n            })];\n          case 2:\n            return r2.sent(), this._mutex.unlock(), [2, e4];\n          case 3:\n            throw t4 = r2.sent(), this._mutex.unlock(), t4;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e3;\n}(), ns$1 = function(e3) {\n  return \"\".concat(\"nest\", \"@\").concat(e3);\n}, rs$1 = function(e3, t4) {\n  return \"\".concat(ns$1(e3), \"/\").concat(t4);\n}, is$1 = function(e3, t4) {\n  return \"\".concat(rs$1(e3, t4), \".metadata\");\n}, ss$1 = function(e3, t4) {\n  return \"\".concat(rs$1(e3, t4), \"/block.\");\n}, as$1 = function(e3, t4) {\n  return \"\".concat(rs$1(e3, t4), \"/blob.\");\n}, os$1 = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.collectionName, r2 = e4.store;\n    this.dbname = t4, this.collectionName = n2, this.store = r2;\n  }\n  return e3.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o2, u3, c3;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return [4, this.store.get(e4)];\n          case 1:\n            return (t4 = l2.sent()) ? (n2 = t4.data, r2 = t4.type, \"undefined\" == typeof fetch ? [3, 4] : [4, fetch(n2)]) : [3, 5];\n          case 2:\n            return [4, l2.sent().blob()];\n          case 3:\n            return [2, l2.sent()];\n          case 4:\n            for (i3 = [], s4 = atob(n2.split(\",\")[1]), a4 = 0; a4 < s4.length; a4 += 512) {\n              for (o2 = s4.slice(a4, a4 + 512), u3 = new Array(o2.length), c3 = 0; c3 < o2.length; c3++) u3[c3] = o2.charCodeAt(c3);\n              i3.push(new Uint8Array(u3));\n            }\n            return [2, new Blob(i3, { type: r2 })];\n          case 5:\n            return [2, null];\n        }\n      });\n    });\n  }, e3.prototype.save = function(e4, t4) {\n    return void 0 === t4 && (t4 = \"\".concat(Date.now())), r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4 = this;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return [4, new Promise(function(n3) {\n              var r3 = function(e5, t5, n4, r4) {\n                return void 0 === r4 && (r4 = 0), \"\".concat(as$1(e5, t5)).concat(n4, \".\").concat(r4);\n              }(a4.dbname, a4.collectionName, t4), i4 = new FileReader();\n              i4.onload = function() {\n                n3({ blobId: r3, data: i4.result, type: e4.type });\n              }, i4.readAsDataURL(e4);\n            })];\n          case 1:\n            return n2 = o2.sent(), r2 = n2.blobId, i3 = n2.data, s4 = n2.type, [4, this.store.set({ key: r2, value: { data: i3, type: s4 } })];\n          case 2:\n            return o2.sent(), [2, r2];\n        }\n      });\n    });\n  }, e3.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this.store.remove(e4)];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2 = this;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e4 = as$1(this.dbname, this.collectionName), [4, this.store.getAllKeys()];\n          case 1:\n            return t4 = r2.sent(), [4, Promise.all(t4.filter(function(t5) {\n              return t5.startsWith(e4);\n            }).map(function(e5) {\n              return r$1(n2, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  switch (t5.label) {\n                    case 0:\n                      return [4, this.store.remove(e5)];\n                    case 1:\n                      return [2, t5.sent()];\n                  }\n                });\n              });\n            }))];\n          case 2:\n            return r2.sent(), [2];\n        }\n      });\n    });\n  }, e3;\n}();\n!function(e3) {\n  e3[e3.COMMIT = 0] = \"COMMIT\", e3[e3.WRITE = 1] = \"WRITE\", e3[e3.ERROR = 2] = \"ERROR\";\n}(Ji || (Ji = {})), function(e3) {\n  e3.PENDING = \"pending\", e3.PERSISTENT = \"persistent\", e3.VOLATILE = \"volatile\";\n}(Xi || (Xi = {})), function(e3) {\n  e3[e3.NO_CACHE = 0] = \"NO_CACHE\", e3[e3.DEFAULT = 1] = \"DEFAULT\", e3[e3.PERSISTENT = 2] = \"PERSISTENT\";\n}(Zi || (Zi = {}));\nvar us$1, cs$1, ls$1 = [Xi.PENDING, Xi.VOLATILE], ds$1 = {}, hs$1 = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.limit, r2 = void 0 === n2 ? 256 : n2;\n    return ds$1[t4] || (this.dbname = t4, this._items = [], this._limit = r2, ds$1[t4] = this), ds$1[t4];\n  }\n  return e3.get = function(e4) {\n    return ds$1[e4];\n  }, Object.defineProperty(e3.prototype, \"items\", { get: function() {\n    return this._items;\n  }, enumerable: false, configurable: true }), e3.prototype.find = function(e4, t4, n2) {\n    return void 0 === n2 && (n2 = Zi.DEFAULT), r$1(this, void 0, void 0, function() {\n      var r2, i3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return (r2 = this.get(t4)) ? [3, 2] : [4, e4.get(t4)];\n          case 1:\n            return (i3 = s4.sent()) && (r2 = { key: t4, value: i3, state: n2 === Zi.PERSISTENT ? Xi.PERSISTENT : Xi.VOLATILE }, this.put(r2)), [3, 3];\n          case 2:\n            n2 === Zi.PERSISTENT && (r2.state = Xi.PERSISTENT), s4.label = 3;\n          case 3:\n            return [2, r2];\n        }\n      });\n    });\n  }, e3.prototype.get = function(e4, t4) {\n    void 0 === t4 && (t4 = Zi.DEFAULT);\n    var n2 = this._items.map(function(e5) {\n      return e5.key;\n    }).indexOf(e4);\n    if (n2 > -1) {\n      var r2 = this._items[n2];\n      return t4 === Zi.PERSISTENT && (r2.state = Xi.PERSISTENT), t4 !== Zi.NO_CACHE && this.put(r2), r2;\n    }\n    return null;\n  }, e3.prototype.put = function(e4) {\n    var t4, n2;\n    if (this._limit > 0) {\n      var r2 = this._items.map(function(e5) {\n        return e5.key;\n      }).indexOf(e4.key);\n      if (r2 > -1) ls$1.includes(this._items[r2].state) && ls$1.includes(e4.state) ? (this._items.splice(r2, 1), this._items.push(e4)) : (this._items[r2].state = e4.state, this._items[r2].value = e4.value);\n      else {\n        this._items.push(e4);\n        var i3 = this._items.filter(function(e5) {\n          return e5.state === Xi.VOLATILE;\n        }), s4 = i3.length - this._limit;\n        if (s4 > 0) {\n          var a4 = [];\n          try {\n            for (var o$1 = o(this._items), u3 = o$1.next(); !u3.done; u3 = o$1.next()) {\n              var c3 = u3.value;\n              c3.state === Xi.VOLATILE && s4 > 0 ? s4-- : a4.push(c3);\n            }\n          } catch (e5) {\n            t4 = { error: e5 };\n          } finally {\n            try {\n              u3 && !u3.done && (n2 = o$1.return) && n2.call(o$1);\n            } finally {\n              if (t4) throw t4.error;\n            }\n          }\n          this._items = a4;\n        }\n      }\n    }\n  }, e3.prototype.remove = function(e4) {\n    var t4 = this._items.map(function(e5) {\n      return e5.key;\n    }).indexOf(e4);\n    t4 > -1 && this._items.splice(t4, 1);\n  }, e3.prototype.clearByCondition = function(e4) {\n    this._items = this._items.filter(function(t4) {\n      return !e4(t4);\n    });\n  }, e3.prototype.clearForDatabase = function(e4) {\n    this.clearByCondition(function(t4) {\n      return t4.key.startsWith(ns$1(e4));\n    });\n  }, e3.prototype.clear = function(e4) {\n    void 0 === e4 && (e4 = false), this._items = e4 ? [] : this._items.filter(function(e5) {\n      return e5.state !== Xi.VOLATILE;\n    });\n  }, e3;\n}(), fs$1 = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.collectionName, r2 = e4.store;\n    this._requests = [], this._onCommit = /* @__PURE__ */ new Map(), this._onWrite = /* @__PURE__ */ new Map(), this._onError = /* @__PURE__ */ new Map(), this.dbname = t4, this.collectionName = n2, this.metadataKey = function(e5, t5) {\n      return \"\".concat(rs$1(e5, t5), \"/trans.metadata\");\n    }(t4, n2), this.recordsetKey = function(e5, t5) {\n      return \"\".concat(rs$1(e5, t5), \"/trans.recordset\");\n    }(t4, n2), this._store = r2;\n  }\n  return Object.defineProperty(e3.prototype, \"generation\", { get: function() {\n    return this._metadata ? this._metadata.generation : 0;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"requestCount\", { get: function() {\n    return this._requests.length;\n  }, enumerable: false, configurable: true }), e3.prototype._getReducedRecordset = function(e4) {\n    return void 0 === e4 && (e4 = []), r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._store.get(this.recordsetKey)];\n          case 1:\n            return (t4 = n2.sent() || []).push.apply(t4, c([], a$1(e4), false)), [2, this._reduceRecordSet(t4)];\n        }\n      });\n    });\n  }, e3.prototype._reduceRecordSet = function(e4) {\n    for (var t4 = [], n2 = {}, r2 = e4.length - 1; r2 >= 0; r2--) {\n      for (var i3 = e4[r2], s4 = [], a4 = i3.requests.length - 1; a4 >= 0; a4--) {\n        var o2 = i3.requests[a4], u3 = o2.data;\n        n2[u3.key] || (s4.unshift(o2), n2[u3.key] = true);\n      }\n      s4.length > 0 && (i3.requests = s4, t4.unshift(i3));\n    }\n    return t4;\n  }, e3.prototype._applyRecord = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4, o2, c3, l2, d4;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            n2 = hs$1.get(this.dbname), r2 = t4.generation, i3 = t4.requests, s4 = null, h4.label = 1;\n          case 1:\n            return h4.trys.push([1, 3, , 4]), [4, this._store.setMany(i3.map(function(e5) {\n              return n$2(n$2({}, e5.data), { generation: r2 });\n            }))];\n          case 2:\n            for (a4 = h4.sent(), o2 = 0; o2 < i3.length; o2++) a4[o2] instanceof Error && (s4 || (s4 = a4[o2]), c3 = i3[o2].data, n2.put(n$2(n$2({}, c3), { state: Xi.PERSISTENT })));\n            return [3, 4];\n          case 3:\n            return l2 = h4.sent(), s4 = l2, [3, 4];\n          case 4:\n            return s4 ? [3, 6] : (d4 = e4.filter(function(e5) {\n              return e5.generation !== r2;\n            }), [4, this._store.set({ key: this.recordsetKey, value: d4 })]);\n          case 5:\n            return h4.sent(), this._onWrite.forEach(function(e5) {\n              e5(i3.map(function(e6) {\n                return e6.data;\n              }));\n            }), [3, 7];\n          case 6:\n            this._onError.forEach(function(e5) {\n              s4 && e5(s4);\n            }), h4.label = 7;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.init = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, r2, i3, s4, a4, o$1;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return e4 = this, [4, this._store.get(this.metadataKey)];\n          case 1:\n            return e4._metadata = u3.sent() || { generation: 1 }, [4, this._getReducedRecordset()];\n          case 2:\n            t4 = u3.sent(), u3.label = 3;\n          case 3:\n            u3.trys.push([3, 8, 9, 10]), n2 = o(t4), r2 = n2.next(), u3.label = 4;\n          case 4:\n            return r2.done ? [3, 7] : (i3 = r2.value, [4, this._applyRecord(t4, i3)]);\n          case 5:\n            u3.sent(), u3.label = 6;\n          case 6:\n            return r2 = n2.next(), [3, 4];\n          case 7:\n            return [3, 10];\n          case 8:\n            return s4 = u3.sent(), a4 = { error: s4 }, [3, 10];\n          case 9:\n            try {\n              r2 && !r2.done && (o$1 = n2.return) && o$1.call(n2);\n            } finally {\n              if (a4) throw a4.error;\n            }\n            return [7];\n          case 10:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.on = function(e4, t4, n2) {\n    switch (e4) {\n      case Ji.COMMIT:\n        this._onCommit.set(t4, n2);\n        break;\n      case Ji.WRITE:\n        this._onWrite.set(t4, n2);\n        break;\n      case Ji.ERROR:\n        this._onError.set(t4, n2);\n    }\n  }, e3.prototype.requestWrite = function(e4, t4) {\n    this._requests.push({ data: e4, options: t4 }), hs$1.get(this.dbname).put(n$2({ state: Xi.PENDING }, e4));\n  }, e3.prototype.requestMultipleWrite = function(e4, t4) {\n    var n2, r2, i3 = hs$1.get(this.dbname);\n    try {\n      for (var s4 = o(e4), a4 = s4.next(); !a4.done; a4 = s4.next()) {\n        var o$1 = a4.value;\n        this._requests.push({ data: o$1, options: t4 }), i3.put(n$2({ state: Xi.PENDING }, o$1));\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        a4 && !a4.done && (r2 = s4.return) && r2.call(s4);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        return hs$1.get(this.dbname).clearByCondition(function(e5) {\n          return e5.state === Xi.PENDING;\n        }), this._requests = [], [2];\n      });\n    });\n  }, e3.prototype.commit = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, r2, i3, s4, a4, o2, c3, l2, d4, h4, f2 = this;\n      return s$1(this, function(p2) {\n        switch (p2.label) {\n          case 0:\n            if (!((e4 = this._requests).length > 0)) return [3, 4];\n            for (t4 = [], n2 = {}, o2 = e4.length - 1; o2 >= 0; o2--) r2 = e4[o2], l2 = r2.data, n2[l2.key] || (n2[l2.key] = true, t4.unshift(r2));\n            return i3 = { generation: this.generation, requests: t4 }, [4, this._getReducedRecordset([i3])];\n          case 1:\n            return s4 = p2.sent(), [4, this._store.set({ key: this.recordsetKey, value: s4 })];\n          case 2:\n            return p2.sent(), this._metadata.generation++, [4, this._store.set({ key: this.metadataKey, value: this._metadata })];\n          case 3:\n            for (p2.sent(), a4 = hs$1.get(this.dbname), o2 = 0; o2 < t4.length; o2++) c3 = t4[o2], l2 = c3.data, d4 = c3.options, a4.put(n$2(n$2({}, l2), { state: d4 && d4.persistent ? Xi.PERSISTENT : Xi.VOLATILE }));\n            this._requests = [], this._onCommit.forEach(function(t5) {\n              t5(e4.map(function(e5) {\n                return e5.data;\n              }));\n            }), h4 = Li.get(this.dbname), setTimeout(function() {\n              try {\n                f2._applyRecord(s4, i3);\n              } catch (e5) {\n                f2._onError.forEach(function(t5) {\n                  return t5(e5);\n                });\n              }\n            }, h4.transactionApplyDelay), p2.label = 4;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e3;\n}(), ps$1 = function() {\n  function e3(e4) {\n    var t4 = e4.blockId, n2 = e4.keyName, r2 = e4.items, i3 = void 0 === r2 ? [] : r2, s4 = e4.limit;\n    this.blockId = t4, this.keyName = n2, this.limit = s4, this._items = c([], a$1(i3), false);\n  }\n  return e3.createFromCacheItem = function(t4) {\n    return t4 ? new e3(t4.value) : null;\n  }, Object.defineProperty(e3.prototype, \"isEmpty\", { get: function() {\n    return 0 === this._items.length;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"items\", { get: function() {\n    return this._items;\n  }, enumerable: false, configurable: true }), e3.prototype.serialize = function() {\n    return { blockId: this.blockId, keyName: this.keyName, limit: this.limit, items: this._items };\n  }, e3.prototype.getItemByKey = function(e4) {\n    var t4 = this, n2 = this._items.find(function(n3) {\n      var r2 = n3[t4.keyName];\n      return e4 === r2;\n    });\n    return null != n2 ? n2 : null;\n  }, e3.prototype.has = function(e4) {\n    var t4 = this;\n    return this._items.map(function(e5) {\n      return e5[t4.keyName];\n    }).includes(e4);\n  }, e3.prototype.add = function(e4) {\n    var t4 = this, n2 = this._items.map(function(e5) {\n      return e5[t4.keyName];\n    }).indexOf(e4[this.keyName]);\n    return n2 < 0 ? this._items.length < this.limit && (this._items.push(e4), true) : (this._items[n2] = e4, true);\n  }, e3.prototype.remove = function(e4) {\n    for (var t4 = 0; t4 < this._items.length; t4++) if (this._items[t4][this.keyName] === e4) return this._items.splice(t4, 1), true;\n    return false;\n  }, e3.prototype.clear = function() {\n    this._items = [];\n  }, e3;\n}(), ms$1 = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.collectionName, r2 = e4.metadata, i3 = e4.hashFunction, s4 = void 0 === i3 ? Ki : i3, a4 = e4.transaction, o2 = e4.store;\n    this.dbname = t4, this.collectionName = n2, this.hashFunction = s4, this.metadata = r2, this._transaction = a4, this._store = o2;\n  }\n  return Object.defineProperty(e3.prototype, \"keyName\", { get: function() {\n    return this.metadata.keyName;\n  }, enumerable: false, configurable: true }), e3.prototype.createBlockId = function(e4, t4) {\n    return void 0 === t4 && (t4 = this.metadata.blockLevel), n2 = this.dbname, r2 = this.collectionName, i3 = t4, s4 = \"\".concat(function(e5, t5, n3) {\n      var r3 = n3.base * Math.pow(n3.multiplier, t5) + n3.constant;\n      return (n3.hashFunction || Ki)(e5, r3);\n    }(e4, t4, { hashFunction: this.hashFunction, base: this.metadata.blockHashBase, multiplier: this.metadata.blockHashMultiplier, constant: this.metadata.blockHashConstant })), \"\".concat(ss$1(n2, r2)).concat(i3, \".\").concat(s4);\n    var n2, r2, i3, s4;\n  }, e3.prototype._findBlock = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            t4 = hs$1.get(this.dbname), n2 = this.metadata.blockLevel, a4.label = 1;\n          case 1:\n            return n2 > 0 ? (r2 = this.createBlockId(e4, n2), [4, t4.find(this._store, r2)]) : [3, 4];\n          case 2:\n            if ((i3 = a4.sent()) && (s4 = ps$1.createFromCacheItem(i3), null == s4 ? void 0 : s4.getItemByKey(e4))) return [2, s4];\n            a4.label = 3;\n          case 3:\n            return n2--, [3, 1];\n          case 4:\n            return [2, null];\n        }\n      });\n    });\n  }, e3.prototype.getFromBlock = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._findBlock(e4)];\n          case 1:\n            return [2, (t4 = n2.sent()) ? t4.getItemByKey(e4) : null];\n        }\n      });\n    });\n  }, e3.prototype.putToBlock = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return n2 = Li.get(this.dbname), r2 = this.createBlockId(e4), i3 = Math.floor(this._store.itemSizeLimit / n2.itemSizeLimit), [4, hs$1.get(this.dbname).find(this._store, r2)];\n          case 1:\n            return s4 = o2.sent(), (null == (a4 = s4 ? ps$1.createFromCacheItem(s4) : new ps$1({ blockId: r2, keyName: this.keyName, items: [], limit: i3 })) ? void 0 : a4.add(t4)) ? (this._transaction.requestWrite({ key: a4.blockId, value: a4.serialize() }), [2, true]) : [2, false];\n        }\n      });\n    });\n  }, e3.prototype.removeFromBlock = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._findBlock(e4)];\n          case 1:\n            return (t4 = n2.sent()) && t4.remove(e4) ? (this._transaction.requestWrite({ key: t4.blockId, value: t4.serialize() }), [2, true]) : [2, false];\n        }\n      });\n    });\n  }, e3.prototype.clearAllBlocks = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e4 = ss$1(this.dbname, this.collectionName), [4, this._store.getAllKeys()];\n          case 1:\n            return t4 = r2.sent(), n2 = t4.filter(function(t5) {\n              return t5.startsWith(e4);\n            }), [4, this._store.removeMany(n2)];\n          case 2:\n            return r2.sent(), [4, this._transaction.clear()];\n          case 3:\n            return r2.sent(), hs$1.get(this.dbname).clearByCondition(function(t5) {\n              return t5.key.startsWith(e4);\n            }), [2];\n        }\n      });\n    });\n  }, e3;\n}(), vs$1 = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.collectionName, r2 = e4.keyName, i3 = e4.fields, s4 = e4.transaction, a4 = e4.store, o2 = this;\n    this._origin = [], this._table = [];\n    var u3 = function(e5, t5, n3) {\n      return \"\".concat(rs$1(e5, t5), \"/index.\").concat(n3);\n    }(t4, n2, i3.join(\">\"));\n    this.dbname = t4, this.collectionName = n2, this.keyName = r2, this.fields = i3, this.indexerKey = u3, this._store = a4, this._transaction = s4, this._transaction.on(Ji.COMMIT, this.indexerKey, function() {\n      return o2.commit();\n    }), this._transaction.on(Ji.ERROR, this.indexerKey, function() {\n      return o2.abort();\n    });\n  }\n  return e3.createKey = function(e4) {\n    return e4.join(\">\");\n  }, e3.parseKey = function(e4) {\n    return e4.split(\">\");\n  }, e3.prototype._addItem = function(e4) {\n    var t4 = e4[this.keyName], n2 = this.getColumnValues(e4), r2 = a$1(this.indexOf(n2), 2), i3 = r2[0];\n    return r2[1] ? !this._table[i3].keys.includes(t4) && (this._table[i3].keys.push(t4), true) : (this._table.splice(i3, 0, { columnValues: n2, keys: [t4] }), true);\n  }, e3.prototype._removeItem = function(e4) {\n    var t4 = e4[this.keyName], n2 = this.getColumnValues(e4), r2 = a$1(this.indexOf(n2), 2), i3 = r2[0];\n    if (r2[1]) {\n      var s4 = this._table[i3].keys.indexOf(t4);\n      if (s4 > -1) return this._table[i3].keys.splice(s4, 1), 0 === this._table[i3].keys.length && this._table.splice(i3, 1), true;\n    }\n    return false;\n  }, Object.defineProperty(e3.prototype, \"origin\", { get: function() {\n    return this._origin;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"table\", { get: function() {\n    return this._table;\n  }, enumerable: false, configurable: true }), e3.prototype.getColumnValues = function(e4) {\n    var t4, n2, r2, i3, s4 = [];\n    try {\n      for (var a4 = o(this.fields), o$1 = a4.next(); !o$1.done; o$1 = a4.next()) {\n        var u3 = o$1.value;\n        if (\"-\" === u3[0] && (u3 = u3.slice(1)), r2 = e4[u3], i3 = void 0, i3 = typeof r2, null !== r2 && \"undefined\" !== i3 && \"boolean\" !== i3 && \"number\" !== i3 && \"string\" !== i3) throw qi.indexTypesNotMatch;\n        s4.push(e4[u3]);\n      }\n    } catch (e5) {\n      t4 = { error: e5 };\n    } finally {\n      try {\n        o$1 && !o$1.done && (n2 = a4.return) && n2.call(a4);\n      } finally {\n        if (t4) throw t4.error;\n      }\n    }\n    return s4;\n  }, e3.prototype.diff = function(e4, t4) {\n    for (var n2 in this.fields) {\n      var r2 = \"-\" === this.fields[n2][0] ? -1 : 1, i3 = ji(e4[n2], t4[n2]);\n      if (0 !== i3) return r2 * i3;\n    }\n    return 0;\n  }, e3.prototype.indexOf = function(e4) {\n    if (this._table.length > 0) {\n      for (var t4 = 0, n2 = this._table.length - 1; t4 <= n2; ) {\n        var r2 = Math.floor((t4 + n2) / 2), i3 = this.diff(e4, this._table[r2].columnValues);\n        if (i3 > 0) t4 = r2 + 1;\n        else {\n          if (!(i3 < 0)) return [r2, true];\n          n2 = r2 - 1;\n        }\n      }\n      return [t4, false];\n    }\n    return [0, false];\n  }, e3.prototype.ensure = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, r2, i3, s4, a4, o$1, u3, c3, l2, d4, h4, f2, p2, m4, y4;\n      return s$1(this, function(_2) {\n        switch (_2.label) {\n          case 0:\n            return [4, (e4 = hs$1.get(this.dbname)).find(this._store, this.indexerKey, Zi.PERSISTENT)];\n          case 1:\n            return (t4 = _2.sent()) ? [3, 11] : (n2 = ss$1(this.dbname, this.collectionName), [4, this._store.getAllKeys()]);\n          case 2:\n            r2 = _2.sent(), _2.label = 3;\n          case 3:\n            _2.trys.push([3, 8, 9, 10]), i3 = o(r2), s4 = i3.next(), _2.label = 4;\n          case 4:\n            return s4.done ? [3, 7] : (a4 = s4.value).startsWith(n2) ? [4, e4.find(this._store, a4, Zi.NO_CACHE)] : [3, 6];\n          case 5:\n            if (o$1 = _2.sent(), u3 = ps$1.createFromCacheItem(o$1)) try {\n              for (m4 = void 0, c3 = o(u3.items), l2 = c3.next(); !l2.done; l2 = c3.next()) d4 = l2.value, this._addItem(d4);\n            } catch (e5) {\n              m4 = { error: e5 };\n            } finally {\n              try {\n                l2 && !l2.done && (y4 = c3.return) && y4.call(c3);\n              } finally {\n                if (m4) throw m4.error;\n              }\n            }\n            _2.label = 6;\n          case 6:\n            return s4 = i3.next(), [3, 4];\n          case 7:\n            return [3, 10];\n          case 8:\n            return h4 = _2.sent(), f2 = { error: h4 }, [3, 10];\n          case 9:\n            try {\n              s4 && !s4.done && (p2 = i3.return) && p2.call(i3);\n            } finally {\n              if (f2) throw f2.error;\n            }\n            return [7];\n          case 10:\n            return this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [3, 12];\n          case 11:\n            this._origin = t4.value, this._table = Bi(this._origin), _2.label = 12;\n          case 12:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.drop = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return hs$1.get(this.dbname).remove(this.indexerKey), [4, this._store.remove(this.indexerKey)];\n          case 1:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.addItem = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return this._addItem(e4) && this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [2];\n      });\n    });\n  }, e3.prototype.removeItem = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return this._removeItem(e4) && this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [2];\n      });\n    });\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        return this._table = [], this._transaction.requestWrite({ key: this.indexerKey, value: this._table }, { persistent: true }), [2];\n      });\n    });\n  }, e3.prototype.commit = function() {\n    this._origin = this._table, this._table = Bi(this._origin);\n  }, e3.prototype.abort = function() {\n    this._table = Bi(this._origin);\n  }, e3;\n}(), ys$1 = function() {\n  return \"undefined\" != typeof document && \"undefined\" != typeof navigator && \"ReactNative\" !== navigator.product;\n}, _s$1 = function() {\n  var e3 = (/* @__PURE__ */ new Date()).getTime();\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(t4) {\n    var n2 = (e3 + 16 * Math.random()) % 16 | 0;\n    return e3 = Math.floor(e3 / 16), (\"x\" === t4 ? n2 : 3 & n2 | 8).toString(16);\n  });\n};\n!function(e3) {\n  e3[e3.PROCESSING = 0] = \"PROCESSING\", e3[e3.DONE = 1] = \"DONE\";\n}(us$1 || (us$1 = {})), function(e3) {\n  e3.NEWNODE = \"newnode\", e3.REMOVENODE = \"removenode\", e3.CLAIM_HOST = \"claimhost\", e3.SYNC_HOST = \"synchost\", e3.REQUEST_LOCK = \"requestlock\", e3.ACQUIRE_LOCK = \"acquirelock\", e3.RELEASE_LOCK = \"releaselock\";\n}(cs$1 || (cs$1 = {}));\nvar gs$1, bs$1 = {}, Is$1 = function() {\n  function e3(e4, t4) {\n    void 0 === t4 && (t4 = {});\n    var n2 = this;\n    return this._state = us$1.PROCESSING, this._queue = [], this._activationQueue = [], bs$1[e4] && !t4.forceCreate || (this.nodeId = _s$1(), this.key = e4, ys$1() && (t4.startAsInvisible ? this.registerNode() : \"visible\" === document.visibilityState ? this.claimHost() : this.registerNode(), document.addEventListener(\"visibilitychange\", function() {\n      \"visible\" === document.visibilityState && n2.claimHost();\n    }), window.addEventListener(\"message\", function(e5) {\n      var t5, r2, i3 = e5.data;\n      if (null == i3 ? void 0 : i3.isNestDbMessage) {\n        var s4 = i3.nodeId, a4 = i3.requestId, o$1 = i3.key, u3 = i3.op, c3 = i3.data;\n        if (s4 !== n2.nodeId && o$1 === n2.key) switch (u3) {\n          case cs$1.NEWNODE:\n            n2._sendSync();\n            break;\n          case cs$1.CLAIM_HOST:\n            n2._sendSync(), n2._hostId = s4;\n            break;\n          case cs$1.SYNC_HOST:\n            if (!n2.isInSync) {\n              n2._activationTimeout && clearTimeout(n2._activationTimeout);\n              var l2 = c3, d4 = l2.currentItemRequestId, h4 = l2.queue, f2 = function(e6) {\n                var t6 = n2._queue.findIndex(function(t7) {\n                  return t7.requestId === e6.requestId;\n                });\n                t6 < 0 && n2._requestLock({ isNestDbMessage: true, nodeId: e6.nodeId, requestId: e6.requestId, key: n2.key, op: cs$1.REQUEST_LOCK, ts: e6.ts });\n              };\n              try {\n                for (var p2 = o(h4), m4 = p2.next(); !m4.done; m4 = p2.next()) {\n                  f2(m4.value);\n                }\n              } catch (e6) {\n                t5 = { error: e6 };\n              } finally {\n                try {\n                  m4 && !m4.done && (r2 = p2.return) && r2.call(p2);\n                } finally {\n                  if (t5) throw t5.error;\n                }\n              }\n              n2._currentItem = n2._queue.find(function(e6) {\n                return e6.requestId === d4;\n              }), n2._completeSync();\n            }\n            break;\n          case cs$1.REMOVENODE:\n            n2._queue = n2._queue.filter(function(e6) {\n              return e6.nodeId !== i3.nodeId;\n            }), n2._currentItem && n2._currentItem.nodeId === i3.nodeId && (n2._currentItem = void 0, n2._acquire(n2._queue[0]));\n            break;\n          case cs$1.REQUEST_LOCK:\n            n2._requestLock(i3);\n            break;\n          case cs$1.ACQUIRE_LOCK:\n            var y4 = n2._queue.find(function(e6) {\n              return e6.requestId === a4;\n            });\n            n2._acquire(y4);\n            break;\n          case cs$1.RELEASE_LOCK:\n            n2._release(a4);\n        }\n      }\n    }), window.addEventListener(\"beforeunload\", function() {\n      n2._send(cs$1.REMOVENODE);\n    })), bs$1[e4] = this), bs$1[e4];\n  }\n  return Object.defineProperty(e3.prototype, \"locked\", { get: function() {\n    return !!this._currentItem;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"isHost\", { get: function() {\n    return this._hostId === this.nodeId;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"isInSync\", { get: function() {\n    return this._state == us$1.DONE;\n  }, enumerable: false, configurable: true }), e3.prototype._send = function(e4, t4) {\n    var n2;\n    void 0 === t4 && (t4 = {});\n    var r2 = { isNestDbMessage: true, nodeId: this.nodeId, requestId: null !== (n2 = null == t4 ? void 0 : t4.requestId) && void 0 !== n2 ? n2 : _s$1(), key: this.key, op: e4, data: t4.data, ts: Date.now() };\n    return ys$1() && window.postMessage(r2, \"*\"), r2;\n  }, e3.prototype._acquire = function(e4) {\n    e4 ? (this._currentItem = e4, this._currentItem.onAcquired && this._currentItem.onAcquired(e4.requestId)) : this._currentItem = void 0;\n  }, e3.prototype._release = function(e4) {\n    if (this._currentItem && this._currentItem.requestId === e4) {\n      var t4 = this._currentItem;\n      this._currentItem = void 0, t4.nodeId === this.nodeId && this._send(cs$1.RELEASE_LOCK, { requestId: t4.requestId });\n      var n2 = this._queue.findIndex(function(t5) {\n        return t5.requestId === e4;\n      });\n      n2 > -1 && this._queue.splice(n2, 1), t4.onReleased && t4.onReleased(e4);\n    }\n  }, e3.prototype._requestLock = function(e4) {\n    var t4 = this;\n    return new Promise(function(n2) {\n      for (var r2 = { nodeId: e4.nodeId, requestId: e4.requestId, ts: e4.ts, onAcquired: function(e5) {\n        t4.isHost && t4._send(cs$1.ACQUIRE_LOCK, { requestId: e5 }), n2();\n      }, onReleased: function() {\n        t4._acquire(t4._queue[0]);\n      } }, i3 = false, s4 = 0; s4 < t4._queue.length; s4++) if (t4._queue[s4].ts > r2.ts) {\n        t4._queue.splice(s4, 0, r2), i3 = true;\n        break;\n      }\n      i3 || t4._queue.push(r2), t4._currentItem || t4._acquire(t4._queue[0]);\n    });\n  }, e3.prototype._sendSync = function() {\n    var e4;\n    this.isHost && this._send(cs$1.SYNC_HOST, { data: { currentItemRequestId: null === (e4 = this._currentItem) || void 0 === e4 ? void 0 : e4.requestId, queue: this._queue.map(function(e5) {\n      return { nodeId: e5.nodeId, requestId: e5.requestId, ts: e5.ts };\n    }) } });\n  }, e3.prototype._waitUntilSyncCompleted = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4 = this;\n      return s$1(this, function(t4) {\n        return this.isHost && !this.isInSync ? [2, new Promise(function(t5) {\n          e4._activationQueue.push(t5);\n        })] : [2];\n      });\n    });\n  }, e3.prototype._waitSync = function() {\n    var e4 = this;\n    this.isInSync || (this._activationTimeout = setTimeout(function() {\n      e4._completeSync();\n    }, 8));\n  }, e3.prototype._completeSync = function() {\n    this.isInSync || (this._state = us$1.DONE, this._activationQueue.forEach(function(e4) {\n      return e4();\n    }), this._activationQueue = []);\n  }, e3.prototype.registerNode = function() {\n    this._send(cs$1.NEWNODE), this._waitSync();\n  }, e3.prototype.claimHost = function() {\n    this._hostId = this.nodeId, this._send(cs$1.CLAIM_HOST), this._waitSync();\n  }, e3.prototype.lock = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._waitUntilSyncCompleted()];\n          case 1:\n            return t4.sent(), e4 = this._send(cs$1.REQUEST_LOCK), [4, this._requestLock(e4)];\n          case 2:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.unlock = function() {\n    var e4;\n    (null === (e4 = this._currentItem) || void 0 === e4 ? void 0 : e4.requestId) && this._release(this._currentItem.requestId);\n  }, e3;\n}(), Es$1 = function() {\n  function e3(e4) {\n    var t4 = e4.dbname, n2 = e4.collectionName, r2 = e4.keyName, i3 = e4.keyHash, s4 = e4.indexes, a4 = e4.store, o2 = this;\n    this._state = Fi.INIT, this._indexers = [], this.dbname = t4, this.name = n2, this.keyName = r2, this.indexes = c([[r2]], a$1(s4.filter(function(e5) {\n      return vs$1.createKey(e5) !== o2.keyName;\n    })), false), this._keyHash = i3, this._store = a4, this._mutex = new Is$1(function(e5, t5) {\n      return \"\".concat(rs$1(e5, t5), \".lock\");\n    }(t4, n2)), this._blobContainer = new os$1({ dbname: t4, collectionName: n2, store: a4 }), this._transaction = new fs$1({ dbname: t4, collectionName: n2, store: a4 });\n  }\n  return e3.metadataOf = function(e4, t4, n2) {\n    return r$1(this, void 0, void 0, function() {\n      var r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return r2 = is$1(e4, t4), [4, n2.get(r2)];\n          case 1:\n            return [2, i3.sent()];\n        }\n      });\n    });\n  }, Object.defineProperty(e3.prototype, \"state\", { get: function() {\n    return this._state;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"isReady\", { get: function() {\n    return this._state === Fi.READY;\n  }, enumerable: false, configurable: true }), e3.prototype.init = function() {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3, c$1, l2, d4, h4, f2, y4, _2 = this;\n      return s$1(this, function(g2) {\n        switch (g2.label) {\n          case 0:\n            return [4, this._mutex.lock()];\n          case 1:\n            g2.sent(), g2.label = 2;\n          case 2:\n            return g2.trys.push([2, 9, , 10]), t4 = Li.get(this.dbname), [4, e3.metadataOf(this.dbname, this.name, this._store)];\n          case 3:\n            return n2 = g2.sent(), this._metadata = n2 || { keyName: this.keyName, blockLevel: 1, blockHashBase: t4.blockHashBase, blockHashMultiplier: t4.blockHashMultiplier, blockHashConstant: t4.blockHashConstant, indexes: this.indexes }, [4, this._transaction.init()];\n          case 4:\n            g2.sent(), this._blockManager = new ms$1({ dbname: this.dbname, collectionName: this.name, hashFunction: this._keyHash, metadata: this._metadata, transaction: this._transaction, store: this._store }), r2 = c([], a$1(this.indexes), false), i3 = [], s4 = r2.map(function(e4) {\n              return vs$1.createKey(e4);\n            }), a4 = n2 ? n2.indexes.map(function(e4) {\n              return vs$1.createKey(e4);\n            }) : [];\n            try {\n              for (o$1 = o(a4), u3 = o$1.next(); !u3.done; u3 = o$1.next()) c$1 = u3.value, s4.includes(c$1) || i3.push(vs$1.parseKey(c$1));\n            } catch (e4) {\n              f2 = { error: e4 };\n            } finally {\n              try {\n                u3 && !u3.done && (y4 = o$1.return) && y4.call(o$1);\n              } finally {\n                if (f2) throw f2.error;\n              }\n            }\n            return (l2 = []).push.apply(l2, c([], a$1(r2.map(function(e4) {\n              var t5 = new vs$1({ dbname: _2.dbname, collectionName: _2.name, keyName: _2.keyName, fields: e4, transaction: _2._transaction, store: _2._store });\n              return _2._indexers.push(t5), t5.ensure();\n            })), false)), l2.push.apply(l2, c([], a$1(i3.map(function(e4) {\n              return new vs$1({ dbname: _2.dbname, collectionName: _2.name, keyName: _2.keyName, fields: e4, transaction: _2._transaction, store: _2._store }).drop();\n            })), false)), [4, Promise.all(l2)];\n          case 5:\n            return g2.sent(), [4, this._transaction.commit()];\n          case 6:\n            return g2.sent(), s4.sort().join(\",\") === a4.sort().join(\",\") ? [3, 8] : (d4 = is$1(this.dbname, this.name), this._metadata.indexes = r2, [4, this._store.set({ key: d4, value: this._metadata })]);\n          case 7:\n            g2.sent(), g2.label = 8;\n          case 8:\n            return this._state = Fi.READY, this._mutex.unlock(), [3, 10];\n          case 9:\n            throw h4 = g2.sent(), this._mutex.unlock(), h4;\n          case 10:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.close = function() {\n    this._state = Fi.CLOSED;\n  }, e3.prototype._hasPropertyOfKeyName = function(e4) {\n    var t4 = e4[this.keyName];\n    return \"string\" == typeof t4 && !!t4;\n  }, e3.prototype._getIndexerBy = function(e4) {\n    var t4, n2;\n    void 0 === e4 && (e4 = null), e4 || (e4 = [this.keyName]);\n    var r2 = vs$1.createKey(e4);\n    try {\n      for (var i3 = o(this._indexers), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        if (r2 === vs$1.createKey(a4.fields)) return a4;\n      }\n    } catch (e5) {\n      t4 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (n2 = i3.return) && n2.call(i3);\n      } finally {\n        if (t4) throw t4.error;\n      }\n    }\n    throw qi.indexTableIsRequired;\n  }, e3.prototype._upgradeBlockLevel = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 = is$1(this.dbname, this.name), this._metadata.blockLevel++, [4, this._store.set({ key: e4, value: this._metadata })];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype._requestInsert = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4;\n      return s$1(this, function(o$1) {\n        switch (o$1.label) {\n          case 0:\n            return t4 = e4[this.keyName], [4, this._blockManager.getFromBlock(t4)];\n          case 1:\n            return o$1.sent() ? [3, 13] : [4, this._blockManager.putToBlock(t4, e4)];\n          case 2:\n            return o$1.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];\n          case 3:\n            return o$1.sent(), [4, this._blockManager.putToBlock(t4, e4)];\n          case 4:\n            o$1.sent(), o$1.label = 5;\n          case 5:\n            o$1.trys.push([5, 10, 11, 12]), n2 = o(this._indexers), r2 = n2.next(), o$1.label = 6;\n          case 6:\n            return r2.done ? [3, 9] : [4, r2.value.addItem(e4)];\n          case 7:\n            o$1.sent(), o$1.label = 8;\n          case 8:\n            return r2 = n2.next(), [3, 6];\n          case 9:\n            return [3, 12];\n          case 10:\n            return i3 = o$1.sent(), s4 = { error: i3 }, [3, 12];\n          case 11:\n            try {\n              r2 && !r2.done && (a4 = n2.return) && a4.call(n2);\n            } finally {\n              if (s4) throw s4.error;\n            }\n            return [7];\n          case 12:\n            return [3, 14];\n          case 13:\n            throw qi.collectionInsertDuplicate;\n          case 14:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._requestUpsert = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3, c3, l2, d4, h4, f2;\n      return s$1(this, function(p2) {\n        switch (p2.label) {\n          case 0:\n            return t4 = e4[this.keyName], [4, this._blockManager.getFromBlock(t4)];\n          case 1:\n            return (n2 = p2.sent()) ? [3, 13] : [4, this._blockManager.putToBlock(t4, e4)];\n          case 2:\n            return p2.sent() ? [3, 5] : [4, this._upgradeBlockLevel()];\n          case 3:\n            return p2.sent(), [4, this._blockManager.putToBlock(t4, e4)];\n          case 4:\n            p2.sent(), p2.label = 5;\n          case 5:\n            p2.trys.push([5, 10, 11, 12]), r2 = o(this._indexers), i3 = r2.next(), p2.label = 6;\n          case 6:\n            return i3.done ? [3, 9] : [4, (u3 = i3.value).addItem(e4)];\n          case 7:\n            p2.sent(), p2.label = 8;\n          case 8:\n            return i3 = r2.next(), [3, 6];\n          case 9:\n            return [3, 12];\n          case 10:\n            return s4 = p2.sent(), l2 = { error: s4 }, [3, 12];\n          case 11:\n            try {\n              i3 && !i3.done && (d4 = r2.return) && d4.call(r2);\n            } finally {\n              if (l2) throw l2.error;\n            }\n            return [7];\n          case 12:\n            return [3, 23];\n          case 13:\n            return [4, this._blockManager.putToBlock(t4, e4)];\n          case 14:\n            p2.sent(), p2.label = 15;\n          case 15:\n            p2.trys.push([15, 21, 22, 23]), a4 = o(this._indexers), o$1 = a4.next(), p2.label = 16;\n          case 16:\n            return o$1.done ? [3, 20] : 0 === (u3 = o$1.value).diff(u3.getColumnValues(n2), u3.getColumnValues(e4)) ? [3, 19] : [4, u3.removeItem(n2)];\n          case 17:\n            return p2.sent(), [4, u3.addItem(e4)];\n          case 18:\n            p2.sent(), p2.label = 19;\n          case 19:\n            return o$1 = a4.next(), [3, 16];\n          case 20:\n            return [3, 23];\n          case 21:\n            return c3 = p2.sent(), h4 = { error: c3 }, [3, 23];\n          case 22:\n            try {\n              o$1 && !o$1.done && (f2 = a4.return) && f2.call(a4);\n            } finally {\n              if (h4) throw h4.error;\n            }\n            return [7];\n          case 23:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._requestUpdate = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return t4 = e4[this.keyName], [4, this._blockManager.getFromBlock(t4)];\n          case 1:\n            return (n2 = c3.sent()) ? [4, this._blockManager.putToBlock(t4, e4)] : [3, 11];\n          case 2:\n            c3.sent(), c3.label = 3;\n          case 3:\n            c3.trys.push([3, 9, 10, 11]), r2 = o(this._indexers), i3 = r2.next(), c3.label = 4;\n          case 4:\n            return i3.done ? [3, 8] : 0 === (s4 = i3.value).diff(s4.getColumnValues(n2), s4.getColumnValues(e4)) ? [3, 7] : [4, s4.removeItem(n2)];\n          case 5:\n            return c3.sent(), [4, s4.addItem(e4)];\n          case 6:\n            c3.sent(), c3.label = 7;\n          case 7:\n            return i3 = r2.next(), [3, 4];\n          case 8:\n            return [3, 11];\n          case 9:\n            return a4 = c3.sent(), o$1 = { error: a4 }, [3, 11];\n          case 10:\n            try {\n              i3 && !i3.done && (u3 = r2.return) && u3.call(r2);\n            } finally {\n              if (o$1) throw o$1.error;\n            }\n            return [7];\n          case 11:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._requestRemove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4;\n      return s$1(this, function(o$1) {\n        switch (o$1.label) {\n          case 0:\n            return [4, this._blockManager.getFromBlock(e4)];\n          case 1:\n            return (t4 = o$1.sent()) ? [4, this._blockManager.removeFromBlock(e4)] : [3, 10];\n          case 2:\n            o$1.sent(), o$1.label = 3;\n          case 3:\n            o$1.trys.push([3, 8, 9, 10]), n2 = o(this._indexers), r2 = n2.next(), o$1.label = 4;\n          case 4:\n            return r2.done ? [3, 7] : [4, r2.value.removeItem(t4)];\n          case 5:\n            o$1.sent(), o$1.label = 6;\n          case 6:\n            return r2 = n2.next(), [3, 4];\n          case 7:\n            return [3, 10];\n          case 8:\n            return i3 = o$1.sent(), s4 = { error: i3 }, [3, 10];\n          case 9:\n            try {\n              r2 && !r2.done && (a4 = n2.return) && a4.call(n2);\n            } finally {\n              if (s4) throw s4.error;\n            }\n            return [7];\n          case 10:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._requestClear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, r2, i3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return [4, this._blockManager.clearAllBlocks()];\n          case 1:\n            s4.sent(), s4.label = 2;\n          case 2:\n            s4.trys.push([2, 7, 8, 9]), e4 = o(this._indexers), t4 = e4.next(), s4.label = 3;\n          case 3:\n            return t4.done ? [3, 6] : [4, t4.value.clear()];\n          case 4:\n            s4.sent(), s4.label = 5;\n          case 5:\n            return t4 = e4.next(), [3, 3];\n          case 6:\n            return [3, 9];\n          case 7:\n            return n2 = s4.sent(), r2 = { error: n2 }, [3, 9];\n          case 8:\n            try {\n              t4 && !t4.done && (i3 = e4.return) && i3.call(e4);\n            } finally {\n              if (r2) throw r2.error;\n            }\n            return [7];\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.getByKey = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 6];\n          case 1:\n            r2.sent(), r2.label = 2;\n          case 2:\n            return r2.trys.push([2, 4, , 5]), [4, this._blockManager.getFromBlock(e4)];\n          case 3:\n            return t4 = r2.sent(), this._mutex.unlock(), [2, Bi(t4)];\n          case 4:\n            throw n2 = r2.sent(), this._mutex.unlock(), n2;\n          case 5:\n            return [3, 7];\n          case 6:\n            throw qi.collectionNotReady;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.query = function(e4) {\n    if (void 0 === e4 && (e4 = {}), this.isReady) return new ts$1({ condition: e4.where, mutex: this._mutex, blockManager: this._blockManager, indexer: this._getIndexerBy(e4.index), backward: !!e4.backward });\n    throw qi.collectionNotReady;\n  }, e3.prototype.insertOne = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 8];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            if (n2.trys.push([2, 5, , 7]), !this._hasPropertyOfKeyName(e4)) throw qi.collectionKeyNotGiven;\n            return [4, this._requestInsert(Bi(e4))];\n          case 3:\n            return n2.sent(), [4, this._transaction.commit()];\n          case 4:\n            return n2.sent(), this._mutex.unlock(), [2, e4];\n          case 5:\n            return t4 = n2.sent(), [4, this._transaction.clear()];\n          case 6:\n            throw n2.sent(), this._mutex.unlock(), t4;\n          case 7:\n            return [3, 9];\n          case 8:\n            throw qi.collectionNotReady;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.insertMany = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3 = this;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 15];\n          case 1:\n            c3.sent(), c3.label = 2;\n          case 2:\n            if (c3.trys.push([2, 12, , 14]), e4.some(function(e5) {\n              return !u3._hasPropertyOfKeyName(e5);\n            })) throw qi.collectionKeyNotGiven;\n            c3.label = 3;\n          case 3:\n            c3.trys.push([3, 8, 9, 10]), t4 = o(e4), n2 = t4.next(), c3.label = 4;\n          case 4:\n            return n2.done ? [3, 7] : (r2 = n2.value, [4, this._requestInsert(Bi(r2))]);\n          case 5:\n            c3.sent(), c3.label = 6;\n          case 6:\n            return n2 = t4.next(), [3, 4];\n          case 7:\n            return [3, 10];\n          case 8:\n            return i3 = c3.sent(), a4 = { error: i3 }, [3, 10];\n          case 9:\n            try {\n              n2 && !n2.done && (o$1 = t4.return) && o$1.call(t4);\n            } finally {\n              if (a4) throw a4.error;\n            }\n            return [7];\n          case 10:\n            return [4, this._transaction.commit()];\n          case 11:\n            return c3.sent(), this._mutex.unlock(), [2, e4];\n          case 12:\n            return s4 = c3.sent(), [4, this._transaction.clear()];\n          case 13:\n            throw c3.sent(), this._mutex.unlock(), s4;\n          case 14:\n            return [3, 16];\n          case 15:\n            throw qi.collectionNotReady;\n          case 16:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.upsertOne = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 8];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            if (n2.trys.push([2, 5, , 7]), !this._hasPropertyOfKeyName(e4)) throw qi.collectionKeyNotGiven;\n            return [4, this._requestUpsert(Bi(e4))];\n          case 3:\n            return n2.sent(), [4, this._transaction.commit()];\n          case 4:\n            return n2.sent(), this._mutex.unlock(), [2, e4];\n          case 5:\n            return t4 = n2.sent(), [4, this._transaction.clear()];\n          case 6:\n            throw n2.sent(), this._mutex.unlock(), t4;\n          case 7:\n            return [3, 9];\n          case 8:\n            throw qi.collectionNotReady;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.upsertMany = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3 = this;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 15];\n          case 1:\n            c3.sent(), c3.label = 2;\n          case 2:\n            if (c3.trys.push([2, 12, , 14]), e4.some(function(e5) {\n              return !u3._hasPropertyOfKeyName(e5);\n            })) throw qi.collectionKeyNotGiven;\n            c3.label = 3;\n          case 3:\n            c3.trys.push([3, 8, 9, 10]), t4 = o(e4), n2 = t4.next(), c3.label = 4;\n          case 4:\n            return n2.done ? [3, 7] : (r2 = n2.value, [4, this._requestUpsert(Bi(r2))]);\n          case 5:\n            c3.sent(), c3.label = 6;\n          case 6:\n            return n2 = t4.next(), [3, 4];\n          case 7:\n            return [3, 10];\n          case 8:\n            return i3 = c3.sent(), a4 = { error: i3 }, [3, 10];\n          case 9:\n            try {\n              n2 && !n2.done && (o$1 = t4.return) && o$1.call(t4);\n            } finally {\n              if (a4) throw a4.error;\n            }\n            return [7];\n          case 10:\n            return [4, this._transaction.commit()];\n          case 11:\n            return c3.sent(), this._mutex.unlock(), [2, e4];\n          case 12:\n            return s4 = c3.sent(), [4, this._transaction.clear()];\n          case 13:\n            throw c3.sent(), this._mutex.unlock(), s4;\n          case 14:\n            return [3, 16];\n          case 15:\n            throw qi.collectionNotReady;\n          case 16:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.update = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 8];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            if (n2.trys.push([2, 5, , 7]), !this._hasPropertyOfKeyName(e4)) throw qi.collectionKeyNotGiven;\n            return [4, this._requestUpdate(Bi(e4))];\n          case 3:\n            return n2.sent(), [4, this._transaction.commit()];\n          case 4:\n            return n2.sent(), this._mutex.unlock(), [2, e4];\n          case 5:\n            return t4 = n2.sent(), [4, this._transaction.clear()];\n          case 6:\n            throw n2.sent(), this._mutex.unlock(), t4;\n          case 7:\n            return [3, 9];\n          case 8:\n            throw qi.collectionNotReady;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.updateIf = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4, o$1, u3, c3, l2, d4, h4, f2, p2, m4, y4 = this;\n      return s$1(this, function(_2) {\n        switch (_2.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 16];\n          case 1:\n            _2.sent(), _2.label = 2;\n          case 2:\n            return _2.trys.push([2, 13, , 15]), n2 = e4.where, r2 = void 0 === n2 ? {} : n2, i3 = e4.index, s4 = void 0 === i3 ? null : i3, a4 = e4.backward, o$1 = void 0 !== a4 && a4, u3 = [], [4, new es$1({ condition: r2, blockManager: this._blockManager, backward: o$1, indexer: this._getIndexerBy(s4) }).each(function(e5) {\n              return r$1(y4, void 0, void 0, function() {\n                var n3;\n                return s$1(this, function(i4) {\n                  if (e5.error) throw e5.stop(), e5.error;\n                  return e5.hasNext ? (n3 = e5.nextValue, Gi(r2, n3) && t4.set && (\"function\" != typeof t4.set ? Object.keys(t4.set).forEach(function(e6) {\n                    var r3;\n                    n3[e6] = null === (r3 = t4.set) || void 0 === r3 ? void 0 : r3[e6];\n                  }) : t4.set(n3), u3.push(n3)), e5.next()) : e5.stop(), [2];\n                });\n              });\n            })];\n          case 3:\n            _2.sent(), _2.label = 4;\n          case 4:\n            _2.trys.push([4, 9, 10, 11]), c3 = o(u3), l2 = c3.next(), _2.label = 5;\n          case 5:\n            return l2.done ? [3, 8] : (d4 = l2.value, [4, this._requestUpdate(Bi(d4))]);\n          case 6:\n            _2.sent(), _2.label = 7;\n          case 7:\n            return l2 = c3.next(), [3, 5];\n          case 8:\n            return [3, 11];\n          case 9:\n            return h4 = _2.sent(), p2 = { error: h4 }, [3, 11];\n          case 10:\n            try {\n              l2 && !l2.done && (m4 = c3.return) && m4.call(c3);\n            } finally {\n              if (p2) throw p2.error;\n            }\n            return [7];\n          case 11:\n            return [4, this._transaction.commit()];\n          case 12:\n            return _2.sent(), this._mutex.unlock(), [2, u3];\n          case 13:\n            return f2 = _2.sent(), [4, this._transaction.clear()];\n          case 14:\n            throw _2.sent(), this._mutex.unlock(), f2;\n          case 15:\n            return [3, 17];\n          case 16:\n            throw this._transaction.clear(), qi.collectionNotReady;\n          case 17:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 8];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return n2.trys.push([2, 5, , 7]), [4, this._requestRemove(e4)];\n          case 3:\n            return n2.sent(), [4, this._transaction.commit()];\n          case 4:\n            return n2.sent(), this._mutex.unlock(), [3, 7];\n          case 5:\n            return t4 = n2.sent(), [4, this._transaction.clear()];\n          case 6:\n            throw n2.sent(), this._mutex.unlock(), t4;\n          case 7:\n            return [3, 9];\n          case 8:\n            throw qi.collectionNotReady;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.removeIf = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3, c3, l2, d4, h4, f2, p2, m4 = this;\n      return s$1(this, function(y4) {\n        switch (y4.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 15];\n          case 1:\n            y4.sent(), y4.label = 2;\n          case 2:\n            return y4.trys.push([2, 13, , 14]), t4 = e4.where, n2 = void 0 === t4 ? {} : t4, r2 = e4.index, i3 = void 0 === r2 ? null : r2, s4 = e4.backward, a4 = void 0 !== s4 && s4, o$1 = [], [4, new es$1({ condition: n2, blockManager: this._blockManager, backward: a4, indexer: this._getIndexerBy(i3) }).each(function(e5) {\n              return r$1(m4, void 0, void 0, function() {\n                var t5, r3;\n                return s$1(this, function(i4) {\n                  if (e5.error) throw e5.stop(), e5.error;\n                  return e5.hasNext ? (t5 = e5.nextValue, Gi(n2, t5) && (r3 = t5[this.keyName], o$1.push(r3)), e5.next()) : e5.stop(), [2];\n                });\n              });\n            })];\n          case 3:\n            y4.sent(), y4.label = 4;\n          case 4:\n            y4.trys.push([4, 9, 10, 11]), u3 = o(o$1), c3 = u3.next(), y4.label = 5;\n          case 5:\n            return c3.done ? [3, 8] : (l2 = c3.value, [4, this._requestRemove(l2)]);\n          case 6:\n            y4.sent(), y4.label = 7;\n          case 7:\n            return c3 = u3.next(), [3, 5];\n          case 8:\n            return [3, 11];\n          case 9:\n            return d4 = y4.sent(), f2 = { error: d4 }, [3, 11];\n          case 10:\n            try {\n              c3 && !c3.done && (p2 = u3.return) && p2.call(u3);\n            } finally {\n              if (f2) throw f2.error;\n            }\n            return [7];\n          case 11:\n            return [4, this._transaction.commit()];\n          case 12:\n            return y4.sent(), this._mutex.unlock(), [2, o$1];\n          case 13:\n            throw h4 = y4.sent(), this._mutex.unlock(), h4;\n          case 14:\n            return [3, 16];\n          case 15:\n            throw this._transaction.clear(), qi.collectionNotReady;\n          case 16:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this.isReady ? [4, this._mutex.lock()] : [3, 8];\n          case 1:\n            t4.sent(), t4.label = 2;\n          case 2:\n            return t4.trys.push([2, 5, , 7]), [4, this._requestClear()];\n          case 3:\n            return t4.sent(), [4, this._transaction.commit()];\n          case 4:\n            return t4.sent(), this._mutex.unlock(), [3, 7];\n          case 5:\n            return e4 = t4.sent(), [4, this._transaction.clear()];\n          case 6:\n            throw t4.sent(), this._mutex.unlock(), e4;\n          case 7:\n            return [3, 9];\n          case 8:\n            throw qi.collectionNotReady;\n          case 9:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.getBlob = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._blobContainer.get(e4)];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, e3.prototype.saveBlob = function(e4, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._blobContainer.save(e4, t4)];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, e3.prototype.removeBlob = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._blobContainer.remove(e4)];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.removeAllBlobs = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, this._blobContainer.clear()];\n          case 1:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, e3;\n}(), Ts$1 = \"[NESTDB]\", ws$1 = true, Ms$1 = function() {\n  function e3() {\n  }\n  return e3.off = function() {\n    ws$1 = false;\n  }, e3.log = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    ws$1 && console.log.apply(console, c([\"\".concat(Ts$1, \"[LOG]\")], a$1(e4), false));\n  }, e3.warning = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    ws$1 && console.warn.apply(console, c([\"\".concat(Ts$1, \"[WARNING]\")], a$1(e4), false));\n  }, e3.error = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    ws$1 && console.error.apply(console, c([\"\".concat(Ts$1, \"[ERROR]\")], a$1(e4), false));\n  }, e3;\n}(), Ss$1 = [{}, { a: 700400, n: \"error\" }], Us$1 = function() {\n  function e3(e4) {\n    var t4, n2, r2;\n    this.encryption = null !== (t4 = e4.encryption) && void 0 !== t4 ? t4 : x, this.itemSizeLimit = null !== (n2 = e4.itemSizeLimit) && void 0 !== n2 ? n2 : 4194304, this.metadataBuffer = null !== (r2 = e4.metadataBuffer) && void 0 !== r2 ? r2 : 256;\n  }\n  return Object.defineProperty(e3.prototype, \"_encryptionCheckKey\", { get: function() {\n    return \"\".concat(this.dbname, \".encrypt\");\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"_reservedKeys\", { get: function() {\n    return [this._encryptionCheckKey];\n  }, enumerable: false, configurable: true }), e3.prototype._getRawKey = function(e4, t4) {\n    return void 0 === t4 && (t4 = \"\"), \"\".concat(e4).concat(t4);\n  }, e3.prototype._generateShardPostfixArray = function(e4) {\n    return void 0 === e4 && (e4 = 1), c([], a$1(Array(e4).keys()), false);\n  }, e3.prototype._shardify = function(e4) {\n    var t4 = this, n2 = e4.key, r2 = e4.value, i3 = JSON.stringify(this.encryption.encrypt(r2)), s4 = Math.ceil(i3.length / this.adjustedItemSizeLimit);\n    return this._generateShardPostfixArray(s4).map(function(e5) {\n      var r3 = { key: t4._getRawKey(n2, \".\".concat(e5)), data: i3.substring(e5 * t4.adjustedItemSizeLimit, (e5 + 1) * t4.adjustedItemSizeLimit) };\n      return 0 === e5 && (r3.metadata = { shards: s4 }), r3;\n    });\n  }, e3.prototype._resetIfEncryptionChanged = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, r2, i3, s4, a4, o2, u3, c3 = this;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return [4, this.get(this._encryptionCheckKey)];\n          case 1:\n            if (e4 = l2.sent(), t4 = { encrypted: Ss$1.map(function(e5) {\n              var t5;\n              return null === (t5 = c3.encryption) || void 0 === t5 ? void 0 : t5.encrypt(e5);\n            }) }, !e4) return [3, 8];\n            if (!e4.encrypted || !Array.isArray(e4.encrypted)) return [3, 6];\n            for (i3 in n2 = e4.encrypted, r2 = [], n2) r2.push(i3);\n            s4 = 0, l2.label = 2;\n          case 2:\n            return s4 < r2.length ? (i3 = r2[s4]) in n2 ? (a4 = i3, o2 = JSON.stringify(e4.encrypted[a4]), u3 = JSON.stringify(t4.encrypted[a4]), o2 === u3 ? [3, 4] : (Ms$1.warning(\"Encryption algorithm has changed. Stored data would be cleared.\"), [4, this.clear()])) : [3, 4] : [3, 5];\n          case 3:\n            return l2.sent(), [3, 5];\n          case 4:\n            return s4++, [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return [4, this.clear()];\n          case 7:\n            l2.sent(), l2.label = 8;\n          case 8:\n            return [4, this.set({ key: this._encryptionCheckKey, value: t4 })];\n          case 9:\n            return l2.sent(), [2];\n        }\n      });\n    });\n  }, Object.defineProperty(e3.prototype, \"adjustedItemSizeLimit\", { get: function() {\n    return Math.max(this.itemSizeLimit - this.metadataBuffer, 4);\n  }, enumerable: false, configurable: true }), e3.prototype.usage = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, r2, i3, s4, a4, o$1, u3;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return e4 = 0, [4, this._getAllRawKeys()];\n          case 1:\n            t4 = c3.sent(), c3.label = 2;\n          case 2:\n            c3.trys.push([2, 7, 8, 9]), n2 = o(t4), r2 = n2.next(), c3.label = 3;\n          case 3:\n            return r2.done ? [3, 6] : (i3 = r2.value, [4, this._getRaw(i3)]);\n          case 4:\n            (s4 = c3.sent()) && (e4 += JSON.stringify(s4).length), c3.label = 5;\n          case 5:\n            return r2 = n2.next(), [3, 3];\n          case 6:\n            return [3, 9];\n          case 7:\n            return a4 = c3.sent(), o$1 = { error: a4 }, [3, 9];\n          case 8:\n            try {\n              r2 && !r2.done && (u3 = n2.return) && u3.call(n2);\n            } finally {\n              if (o$1) throw o$1.error;\n            }\n            return [7];\n          case 9:\n            return [2, e4];\n        }\n      });\n    });\n  }, e3.prototype.getAllKeys = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4 = this;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._getAllRawKeys()];\n          case 1:\n            return [2, t4.sent().filter(function(e5) {\n              return e5.endsWith(\".0\");\n            }).map(function(e5) {\n              return e5.replace(/\\.0$/, \"\");\n            }).filter(function(t5) {\n              return !e4._reservedKeys.includes(t5);\n            })];\n        }\n      });\n    });\n  }, e3.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o2 = this;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return t4 = this._getRawKey(e4, \".0\"), [4, this._getRaw(t4)];\n          case 1:\n            if (!(n2 = u3.sent())) return [3, 7];\n            u3.label = 2;\n          case 2:\n            return u3.trys.push([2, 6, , 7]), r2 = n2.data, (null == (i3 = n2.metadata) ? void 0 : i3.shards) && i3.shards > 1 ? [4, Promise.all(this._generateShardPostfixArray(null == i3 ? void 0 : i3.shards).map(function(t5) {\n              return r$1(o2, void 0, void 0, function() {\n                var n3, i4;\n                return s$1(this, function(s5) {\n                  switch (s5.label) {\n                    case 0:\n                      return t5 > 0 ? (n3 = this._getRawKey(e4, \".\".concat(t5)), [4, this._getRaw(n3)]) : [3, 2];\n                    case 1:\n                      if (!(i4 = s5.sent())) throw qi.storeBrokenIntegrity;\n                      return [2, i4.data];\n                    case 2:\n                      return [2, r2];\n                  }\n                });\n              });\n            }))] : [3, 4];\n          case 3:\n            return a4 = u3.sent(), [3, 5];\n          case 4:\n            a4 = [r2], u3.label = 5;\n          case 5:\n            return s4 = a4, [2, this.encryption.decrypt(JSON.parse(s4.join(\"\")))];\n          case 6:\n            return u3.sent(), [2, null];\n          case 7:\n            return [2, null];\n        }\n      });\n    });\n  }, e3.prototype.set = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = this._shardify(e4), [4, this._setRaw(t4)];\n          case 1:\n            return n2.sent(), [2, n$2({}, e4.value)];\n        }\n      });\n    });\n  }, e3.prototype.setMany = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2 = this;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return t4 = [], [4, this._setRaw(t4.concat.apply(t4, c([], a$1(e4.map(function(e5) {\n              return n2._shardify(e5);\n            })), false)))];\n          case 1:\n            return r2.sent(), [2, e4.map(function(e5) {\n              return e5.value;\n            })];\n        }\n      });\n    });\n  }, e3.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4 = this;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return t4 = this._getRawKey(e4, \".0\"), [4, this._getRaw(t4)];\n          case 1:\n            return (n2 = o2.sent()) ? (r2 = n2.metadata, i3 = this._generateShardPostfixArray(null == r2 ? void 0 : r2.shards).map(function(t5) {\n              return a4._getRawKey(e4, \".\".concat(t5));\n            }), [4, this._removeRaw(i3)]) : [3, 3];\n          case 2:\n            return o2.sent(), null == (s4 = hs$1.get(this.dbname)) || s4.remove(e4), [2, true];\n          case 3:\n            return [2, false];\n        }\n      });\n    });\n  }, e3.prototype.removeMany = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3, c$1, l2, d4 = this;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            t4 = hs$1.get(this.dbname), n2 = [], r2 = function(e5) {\n              var r3, s5, a5;\n              return s$1(this, function(o2) {\n                switch (o2.label) {\n                  case 0:\n                    return r3 = i3._getRawKey(e5, \".0\"), [4, i3._getRaw(r3)];\n                  case 1:\n                    return (s5 = o2.sent()) && (a5 = s5.metadata, n2.push.apply(n2, c([], a$1(i3._generateShardPostfixArray(null == a5 ? void 0 : a5.shards).map(function(t5) {\n                      return d4._getRawKey(e5, \".\".concat(t5));\n                    })), false))), null == t4 || t4.remove(e5), [2];\n                }\n              });\n            }, i3 = this, h4.label = 1;\n          case 1:\n            h4.trys.push([1, 6, 7, 8]), s4 = o(e4), a4 = s4.next(), h4.label = 2;\n          case 2:\n            return a4.done ? [3, 5] : (o$1 = a4.value, [5, r2(o$1)]);\n          case 3:\n            h4.sent(), h4.label = 4;\n          case 4:\n            return a4 = s4.next(), [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return u3 = h4.sent(), c$1 = { error: u3 }, [3, 8];\n          case 7:\n            try {\n              a4 && !a4.done && (l2 = s4.return) && l2.call(s4);\n            } finally {\n              if (c$1) throw c$1.error;\n            }\n            return [7];\n          case 8:\n            return n2.length > 0 ? [4, this._removeRaw(n2)] : [3, 10];\n          case 9:\n            h4.sent(), h4.label = 10;\n          case 10:\n            return [2, e4];\n        }\n      });\n    });\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        return null == (e4 = hs$1.get(this.dbname)) || e4.clearForDatabase(this.dbname), [2];\n      });\n    });\n  }, e3;\n}(), As$1 = {}, Ns$1 = function(e3) {\n  function t4(t5) {\n    void 0 === t5 && (t5 = {});\n    var n2, r2 = this;\n    r2 = e3.call(this, n$2(n$2({}, t5), { itemSizeLimit: null !== (n2 = t5.itemSizeLimit) && void 0 !== n2 ? n2 : 4194304 })) || this;\n    var i3 = t5.delay, s4 = void 0 === i3 ? 1 : i3;\n    return r2.delay = s4, r2.observer = {}, r2;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"rawData\", { get: function() {\n    return As$1[this.dbname];\n  }, set: function(e4) {\n    As$1[this.dbname] = e4;\n  }, enumerable: false, configurable: true }), t4.prototype._getAllRawKeys = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        if (As$1[this.dbname]) return [2, Object.keys(As$1[this.dbname])];\n        throw qi.storeNotAvailable;\n      });\n    });\n  }, t4.prototype._getRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return As$1[this.dbname] ? [4, Qi(this.delay)] : [3, 2];\n          case 1:\n            return t5.sent(), [2, As$1[this.dbname][e4] ? n$2({ key: e4 }, As$1[this.dbname][e4]) : null];\n          case 2:\n            throw qi.storeNotAvailable;\n        }\n      });\n    });\n  }, t4.prototype._setRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4, o$1, u3;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return As$1[this.dbname] ? [4, Qi(this.delay)] : [3, 2];\n          case 1:\n            c3.sent();\n            try {\n              for (t5 = o(e4), n2 = t5.next(); !n2.done; n2 = t5.next()) r2 = n2.value, i3 = r2.key, s4 = r2.data, a4 = r2.metadata, As$1[this.dbname][i3] = Object.freeze({ data: s4, metadata: a4 });\n            } catch (e5) {\n              o$1 = { error: e5 };\n            } finally {\n              try {\n                n2 && !n2.done && (u3 = t5.return) && u3.call(t5);\n              } finally {\n                if (o$1) throw o$1.error;\n              }\n            }\n            return [3, 3];\n          case 2:\n            throw qi.storeNotAvailable;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype._removeRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return As$1[this.dbname] ? [4, Qi(this.delay)] : [3, 2];\n          case 1:\n            a4.sent();\n            try {\n              for (t5 = o(e4), n2 = t5.next(); !n2.done; n2 = t5.next()) r2 = n2.value, As$1[this.dbname][r2] && delete As$1[this.dbname][r2];\n            } catch (e5) {\n              i3 = { error: e5 };\n            } finally {\n              try {\n                n2 && !n2.done && (s4 = t5.return) && s4.call(t5);\n              } finally {\n                if (i3) throw i3.error;\n              }\n            }\n            return [3, 3];\n          case 2:\n            throw qi.storeNotAvailable;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.observe = function(e4, t5, n2) {\n    var r2 = this;\n    this.observer[e4] || (this.observer[e4] = {}), t5.forEach(function(t6) {\n      return r2.observer[e4][t6] = n2;\n    });\n  }, t4.prototype.checkAvailability = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        return [2];\n      });\n    });\n  }, t4.prototype.init = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return this.dbname = e4, As$1[this.dbname] || (As$1[this.dbname] = {}), [4, this._resetIfEncryptionChanged()];\n          case 1:\n            return t5.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.set = function(t5) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2;\n      return s$1(this, function(i3) {\n        if ((n2 = this.observer[t5.key]) && \"function\" == typeof n2.set && (r2 = n2.set())) throw r2;\n        return [2, e3.prototype.set.call(this, t5)];\n      });\n    });\n  }, t4.prototype.setMany = function(t5) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4, o$1, u3;\n      return s$1(this, function(c3) {\n        try {\n          for (n2 = o(t5), r2 = n2.next(); !r2.done; r2 = n2.next()) if (i3 = r2.value, (s4 = this.observer[i3.key]) && \"function\" == typeof s4.set && (a4 = s4.set())) throw a4;\n        } catch (e4) {\n          o$1 = { error: e4 };\n        } finally {\n          try {\n            r2 && !r2.done && (u3 = n2.return) && u3.call(n2);\n          } finally {\n            if (o$1) throw o$1.error;\n          }\n        }\n        return [2, e3.prototype.setMany.call(this, t5)];\n      });\n    });\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return [4, e3.prototype.clear.call(this)];\n          case 1:\n            return t5.sent(), [4, Qi(this.delay)];\n          case 2:\n            return t5.sent(), As$1[this.dbname] = {}, [2];\n        }\n      });\n    });\n  }, t4;\n}(Us$1), Cs$1 = \"NestDBStore\";\n!function(e3) {\n  e3[e3.UNINITIALIZED = 0] = \"UNINITIALIZED\", e3[e3.OPENING = 1] = \"OPENING\", e3[e3.OPEN = 2] = \"OPEN\", e3[e3.CLOSED = 3] = \"CLOSED\";\n}(gs$1 || (gs$1 = {}));\nvar Os$1, ks$1 = function(e3) {\n  function t4(t5) {\n    void 0 === t5 && (t5 = {});\n    var n2, r2 = this;\n    return (r2 = e3.call(this, n$2(n$2({}, t5), { itemSizeLimit: null !== (n2 = t5.itemSizeLimit) && void 0 !== n2 ? n2 : 104857600 })) || this)._storeName = Cs$1, r2._state = gs$1.UNINITIALIZED, r2._openJobQueue = [], r2._window = \"undefined\" != typeof window ? window : void 0, r2._indexedDb = r2._window ? r2._window.indexedDB || r2._window.mozIndexedDB || r2._window.webkitIndexedDB || r2._window.msIndexedDB : void 0, r2;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"state\", { get: function() {\n    return this._state;\n  }, enumerable: false, configurable: true }), t4.prototype.isTransactionInactiveError = function(e4) {\n    return e4 instanceof Error && e4.message.includes(\"The transaction is inactive\");\n  }, t4.prototype._putToObjectStore = function(e4, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, new Promise(function(n3, r2) {\n          var i3 = e4.put(t5);\n          i3.addEventListener(\"success\", function(e5) {\n            n3(e5.target.result);\n          }), i3.addEventListener(\"error\", function() {\n            r2(\"Failed to write.\");\n          });\n        })];\n      });\n    });\n  }, t4.prototype._deleteFromObjectStore = function(e4, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, new Promise(function(n3, r2) {\n          var i3 = e4.delete(t5);\n          i3.addEventListener(\"success\", function() {\n            return n3(t5);\n          }), i3.addEventListener(\"error\", function(e5) {\n            return r2(e5.target.error);\n          });\n        })];\n      });\n    });\n  }, t4.prototype._openDatabase = function(e4) {\n    var t5 = this;\n    return new Promise(function(n2, r2) {\n      if (t5._indexedDb) {\n        t5._state = gs$1.OPENING;\n        var i3 = t5._indexedDb.open(e4);\n        i3.addEventListener(\"upgradeneeded\", function(e5) {\n          e5.target.result.createObjectStore(Cs$1, { keyPath: \"key\" });\n        }), i3.addEventListener(\"success\", function(r3) {\n          t5._state = gs$1.OPEN, t5._database = r3.target.result, t5._openJobQueue.forEach(function(e5) {\n            return e5();\n          }), t5._openJobQueue = [], t5._database.onclose = function() {\n            t5._database = void 0, t5._state = gs$1.OPENING, setTimeout(function() {\n              t5._openDatabase(e4);\n            }, 5);\n          }, n2(t5._database);\n        }), i3.addEventListener(\"error\", function(e5) {\n          t5._state = gs$1.UNINITIALIZED, r2(e5.target.error);\n        });\n      } else r2(qi.storeNotAvailable);\n    });\n  }, t4.prototype._getObjectStore = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this._database ? [2, this._database.transaction(this._storeName, e4).objectStore(this._storeName)] : [3, 1];\n          case 1:\n            switch (this._state) {\n              case gs$1.UNINITIALIZED:\n              case gs$1.OPEN:\n                return [3, 2];\n              case gs$1.OPENING:\n              case gs$1.CLOSED:\n                return [3, 3];\n            }\n            return [3, 4];\n          case 2:\n            throw qi.storeNotInitialized;\n          case 3:\n            return [2, new Promise(function(n3) {\n              t5._openJobQueue.push(function() {\n                return n3(t5._getObjectStore(e4));\n              });\n            })];\n          case 4:\n            return [4, this._getObjectStore(e4)];\n          case 5:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, t4.prototype._getAllRawKeys = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return [4, this._getObjectStore(\"readonly\")];\n          case 1:\n            return e4 = t5.sent(), [4, new Promise(function(t6, n2) {\n              var r2 = e4.getAllKeys();\n              r2.addEventListener(\"success\", function(e5) {\n                t6(e5.target.result);\n              }), r2.addEventListener(\"error\", function(e5) {\n                return n2(e5.target.error);\n              });\n            })];\n          case 2:\n            return [2, t5.sent()];\n        }\n      });\n    });\n  }, t4.prototype._getRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._getObjectStore(\"readonly\")];\n          case 1:\n            return t5 = n2.sent(), [4, new Promise(function(n3, r2) {\n              var i3 = t5.get(e4);\n              i3.addEventListener(\"success\", function(e5) {\n                var t6;\n                n3(null === (t6 = null == e5 ? void 0 : e5.target) || void 0 === t6 ? void 0 : t6.result);\n              }), i3.addEventListener(\"error\", function(e5) {\n                return r2(e5.target.error);\n              });\n            })];\n          case 2:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, t4.prototype._setRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4, o$1, u3, c3 = this;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return [4, this._getObjectStore(\"readwrite\")];\n          case 1:\n            t5 = l2.sent(), l2.label = 2;\n          case 2:\n            return l2.trys.push([2, 4, , 15]), [4, Promise.all(e4.map(function(e5) {\n              return c3._putToObjectStore(t5, e5);\n            }))];\n          case 3:\n            return l2.sent(), [3, 15];\n          case 4:\n            if (n2 = l2.sent(), !this.isTransactionInactiveError(n2)) return [3, 13];\n            l2.label = 5;\n          case 5:\n            l2.trys.push([5, 10, 11, 12]), r2 = o(e4), i3 = r2.next(), l2.label = 6;\n          case 6:\n            return i3.done ? [3, 9] : (s4 = i3.value, [4, this._putToObjectStore(t5, s4)]);\n          case 7:\n            l2.sent(), l2.label = 8;\n          case 8:\n            return i3 = r2.next(), [3, 6];\n          case 9:\n            return [3, 12];\n          case 10:\n            return a4 = l2.sent(), o$1 = { error: a4 }, [3, 12];\n          case 11:\n            try {\n              i3 && !i3.done && (u3 = r2.return) && u3.call(r2);\n            } finally {\n              if (o$1) throw o$1.error;\n            }\n            return [7];\n          case 12:\n            return [3, 14];\n          case 13:\n            throw n2;\n          case 14:\n            return [3, 15];\n          case 15:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype._removeRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4, o$1, u3, c3 = this;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return [4, this._getObjectStore(\"readwrite\")];\n          case 1:\n            t5 = l2.sent(), l2.label = 2;\n          case 2:\n            return l2.trys.push([2, 4, , 15]), [4, Promise.all(e4.map(function(e5) {\n              return c3._deleteFromObjectStore(t5, e5);\n            }))];\n          case 3:\n            return l2.sent(), [3, 15];\n          case 4:\n            if (n2 = l2.sent(), !this.isTransactionInactiveError(n2)) return [3, 13];\n            l2.label = 5;\n          case 5:\n            l2.trys.push([5, 10, 11, 12]), r2 = o(e4), i3 = r2.next(), l2.label = 6;\n          case 6:\n            return i3.done ? [3, 9] : (s4 = i3.value, [4, this._deleteFromObjectStore(t5, s4)]);\n          case 7:\n            l2.sent(), l2.label = 8;\n          case 8:\n            return i3 = r2.next(), [3, 6];\n          case 9:\n            return [3, 12];\n          case 10:\n            return a4 = l2.sent(), o$1 = { error: a4 }, [3, 12];\n          case 11:\n            try {\n              i3 && !i3.done && (u3 = r2.return) && u3.call(r2);\n            } finally {\n              if (o$1) throw o$1.error;\n            }\n            return [7];\n          case 12:\n            return [3, 14];\n          case 13:\n            throw n2;\n          case 14:\n            return [3, 15];\n          case 15:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype._triggerDatabaseClose = function() {\n    this._database && this._database.onclose && this._database.onclose(new Event(\"dummy\"));\n  }, t4.prototype.checkAvailability = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            if (!((null == (e4 = \"undefined\" != typeof window ? window : null) ? void 0 : e4.indexedDB) || (null == e4 ? void 0 : e4.mozIndexedDB) || (null == e4 ? void 0 : e4.webkitIndexedDB) || (null == e4 ? void 0 : e4.msIndexedDB))) return [3, 6];\n            if (this._indexedDb = e4.indexedDB || e4.mozIndexedDB || e4.webkitIndexedDB || e4.msIndexedDB, !this._window || !ys$1()) return [3, 4];\n            if (!(ys$1() && navigator.userAgent && navigator.userAgent.includes(\"Edge/\"))) return [3, 1];\n            if (!this._window.indexedDB && (e4.PointerEvent || e4.MSPointerEvent)) throw qi.storeNotAvailableInPrivateBrowsing;\n            return [3, 3];\n          case 1:\n            return [4, new Promise(function(e5, n3) {\n              if (t5._indexedDb) try {\n                var r2 = t5._indexedDb.open(\"_testMozilla\");\n                r2.onerror = function() {\n                  return n3(qi.storeNotAvailableInPrivateBrowsing);\n                }, r2.onsuccess = function(r3) {\n                  if (r3.target.result.close(), t5._indexedDb) {\n                    var i3 = t5._indexedDb.deleteDatabase(\"_testMozilla\");\n                    i3.onerror = function() {\n                      return e5();\n                    }, i3.onsuccess = function() {\n                      return e5();\n                    };\n                  } else n3(qi.storeNotAvailable);\n                };\n              } catch (e6) {\n                n3(qi.storeNotAvailableInPrivateBrowsing);\n              }\n              else n3(qi.storeNotAvailable);\n            })];\n          case 2:\n            n2.sent(), n2.label = 3;\n          case 3:\n            return [3, 5];\n          case 4:\n            throw qi.storeNotAvailable;\n          case 5:\n            return [3, 7];\n          case 6:\n            throw qi.storeNotAvailable;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.init = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return this.dbname = e4, [4, this.checkAvailability()];\n          case 1:\n            return t5.sent(), [4, this._openDatabase(e4)];\n          case 2:\n            return t5.sent(), [4, this._resetIfEncryptionChanged()];\n          case 3:\n            return t5.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, e3.prototype.clear.call(this)];\n          case 1:\n            return n2.sent(), [4, this._getObjectStore(\"readwrite\")];\n          case 2:\n            return t5 = n2.sent(), [4, new Promise(function(e4, n3) {\n              var r2 = t5.clear();\n              r2.addEventListener(\"success\", function() {\n                return e4();\n              }), r2.addEventListener(\"error\", function(e5) {\n                return n3(e5.target.error);\n              });\n            })];\n          case 3:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, t4;\n}(Us$1), Ps$1 = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.AsyncStorage, i$1 = t5.itemSizeLimit, s4 = void 0 === i$1 ? 2097152 : i$1, a4 = i(t5, [\"AsyncStorage\", \"itemSizeLimit\"]);\n    return (n2 = e3.call(this, n$2(n$2({}, a4), { itemSizeLimit: s4 })) || this)._asyncStorage = r2, n2;\n  }\n  return t$2(t4, e3), t4.prototype._isBelonging = function(e4) {\n    return e4.startsWith(\"\".concat(this.dbname, \"/\"));\n  }, t4.prototype._getActualKey = function(e4) {\n    return \"\".concat(this.dbname, \"/\").concat(e4);\n  }, t4.prototype._getAllRawKeys = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._asyncStorage.getAllKeys()];\n          case 1:\n            return e4 = n2.sent(), [2, e4.filter(function(e5) {\n              return t5._isBelonging(e5);\n            }).map(function(e5) {\n              return e5.substring(\"\".concat(t5.dbname, \"/\").length);\n            })];\n        }\n      });\n    });\n  }, t4.prototype._getRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._asyncStorage.getItem(this._getActualKey(e4))];\n          case 1:\n            return [2, (t5 = n2.sent()) ? JSON.parse(t5) : null];\n        }\n      });\n    });\n  }, t4.prototype._setRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4, o$1;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            t5 = [];\n            try {\n              for (n2 = o(e4), r2 = n2.next(); !r2.done; r2 = n2.next()) i3 = r2.value, s4 = i3.key, i3.data.length <= this.adjustedItemSizeLimit && t5.push([this._getActualKey(s4), JSON.stringify(i3)]);\n            } catch (e5) {\n              a4 = { error: e5 };\n            } finally {\n              try {\n                r2 && !r2.done && (o$1 = n2.return) && o$1.call(n2);\n              } finally {\n                if (a4) throw a4.error;\n              }\n            }\n            return [4, this._asyncStorage.multiSet(t5)];\n          case 1:\n            return u3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype._removeRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._asyncStorage.multiRemove(e4.map(function(e5) {\n              return t5._getActualKey(e5);\n            }))];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.checkAvailability = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        if (!this._asyncStorage) throw qi.storeNotAvailable;\n        return [2];\n      });\n    });\n  }, t4.prototype.init = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return this.dbname = e4, [4, this._resetIfEncryptionChanged()];\n          case 1:\n            return t5.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, e3.prototype.clear.call(this)];\n          case 1:\n            return n2.sent(), [4, this.getAllKeys()];\n          case 2:\n            return t5 = n2.sent(), [4, this.removeMany(t5)];\n          case 3:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, t4;\n}(Us$1), Rs$1 = function(e3) {\n  function t4(t5) {\n    var n2, r2 = this;\n    return (r2 = e3.call(this, n$2(n$2({}, t5), { itemSizeLimit: null !== (n2 = t5.itemSizeLimit) && void 0 !== n2 ? n2 : 6291456 })) || this)._mmkv = t5.MMKV, r2;\n  }\n  return t$2(t4, e3), t4.prototype._isBelonging = function(e4) {\n    return e4.startsWith(\"\".concat(this.dbname, \"/\"));\n  }, t4.prototype._getActualKey = function(e4) {\n    return \"\".concat(this.dbname, \"/\").concat(e4);\n  }, t4.prototype._getAllRawKeys = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._mmkv.getAllKeys()];\n          case 1:\n            return e4 = n2.sent(), [2, e4.filter(function(e5) {\n              return t5._isBelonging(e5);\n            }).map(function(e5) {\n              return e5.substring(\"\".concat(t5.dbname, \"/\").length);\n            })];\n        }\n      });\n    });\n  }, t4.prototype._getRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._mmkv.getString(this._getActualKey(e4))];\n          case 1:\n            return [2, (t5 = n2.sent()) ? JSON.parse(t5) : null];\n        }\n      });\n    });\n  }, t4.prototype._setRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4;\n      return s$1(this, function(o$1) {\n        try {\n          for (t5 = o(e4), n2 = t5.next(); !n2.done; n2 = t5.next()) r2 = n2.value, i3 = r2.key, r2.data.length <= this.adjustedItemSizeLimit && this._mmkv.set(this._getActualKey(i3), JSON.stringify(r2));\n        } catch (e5) {\n          s4 = { error: e5 };\n        } finally {\n          try {\n            n2 && !n2.done && (a4 = t5.return) && a4.call(t5);\n          } finally {\n            if (s4) throw s4.error;\n          }\n        }\n        return [2];\n      });\n    });\n  }, t4.prototype._removeRaw = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4;\n      return s$1(this, function(a4) {\n        try {\n          for (t5 = o(e4), n2 = t5.next(); !n2.done; n2 = t5.next()) r2 = n2.value, this._mmkv.delete(this._getActualKey(r2));\n        } catch (e5) {\n          i3 = { error: e5 };\n        } finally {\n          try {\n            n2 && !n2.done && (s4 = t5.return) && s4.call(t5);\n          } finally {\n            if (i3) throw i3.error;\n          }\n        }\n        return [2];\n      });\n    });\n  }, t4.prototype.checkAvailability = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        if (!this._mmkv) throw qi.storeNotAvailable;\n        return [2];\n      });\n    });\n  }, t4.prototype.init = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return this.dbname = e4, [4, this._resetIfEncryptionChanged()];\n          case 1:\n            return t5.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, e3.prototype.clear.call(this)];\n          case 1:\n            return n2.sent(), [4, this.getAllKeys()];\n          case 2:\n            return t5 = n2.sent(), [4, this.removeMany(t5)];\n          case 3:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, t4;\n}(Us$1);\n!function(e3) {\n  e3.INIT = \"INIT\", e3.OPENING = \"OPENING\", e3.OPENED = \"OPENED\", e3.CLOSED = \"CLOSED\";\n}(Os$1 || (Os$1 = {}));\nvar xs$1, Ds$1 = function() {\n  function e3(e4) {\n    var t4 = e4.name, n2 = e4.version, r2 = e4.store, i3 = e4.config;\n    this.name = t4, this._version = n2, this._state = Os$1.INIT, this._config = i3 || new Li({ dbname: t4 }), this._store = r2, this._event = { success: Vi, error: Vi, storeReplaced: Vi, upgrade: Yi }, this._collections = /* @__PURE__ */ new Map(), this._globalMutex = new Is$1(\"\".concat(this.name, \".lock\")), this._config.disableLogger && Ms$1.off(), new hs$1({ dbname: t4, limit: this._config.cacheLimit });\n  }\n  return Object.defineProperty(e3.prototype, \"version\", { get: function() {\n    return this._version;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"state\", { get: function() {\n    return this._state;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"store\", { get: function() {\n    return this._store;\n  }, enumerable: false, configurable: true }), e3.prototype._initializeCollection = function(e4, t4) {\n    var n2;\n    return r$1(this, void 0, void 0, function() {\n      var r2, i3, s4;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return i3 = this._collections.get(e4), t4 ? (r2 = new Es$1({ dbname: this.name, collectionName: e4, keyName: t4.keyName, indexes: null !== (n2 = t4.index) && void 0 !== n2 ? n2 : [[t4.keyName]], store: this._store }), [3, 3]) : [3, 1];\n          case 1:\n            return i3 && i3.state === Fi.READY ? [3, 3] : [4, Es$1.metadataOf(this.name, e4, this._store)];\n          case 2:\n            (s4 = a4.sent()) && (r2 = new Es$1({ dbname: this.name, collectionName: e4, keyName: s4.keyName, indexes: s4.indexes, store: this._store })), a4.label = 3;\n          case 3:\n            return r2 ? (this._collections.set(e4, r2), [4, r2.init()]) : [3, 5];\n          case 4:\n            a4.sent(), a4.label = 5;\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.estimateUsage = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, (t4 = this._store, r$1(void 0, void 0, void 0, function() {\n              return s$1(this, function(e5) {\n                switch (e5.label) {\n                  case 0:\n                    return [4, t4.usage()];\n                  case 1:\n                    return [2, e5.sent()];\n                }\n              });\n            }))];\n          case 1:\n            return [2, e4.sent()];\n        }\n        var t4;\n      });\n    });\n  }, e3.prototype.commitSchema = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this._state !== Os$1.OPENING ? [3, 2] : [4, Promise.all(e4.map(function(e5) {\n              return r$1(t4, void 0, void 0, function() {\n                return s$1(this, function(t5) {\n                  switch (t5.label) {\n                    case 0:\n                      return [4, this._initializeCollection(e5.collectionName, e5)];\n                    case 1:\n                      return t5.sent(), [2];\n                  }\n                });\n              });\n            }))];\n          case 1:\n            return n2.sent(), [3, 3];\n          case 2:\n            throw qi.databaseSchemaNotOnUpgrade;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.open = function() {\n    var e4;\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, i3, s4, a4, o$1, u3, c3, l2, d4 = this;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            return [4, this._globalMutex.lock()];\n          case 1:\n            if (h4.sent(), this._state === Os$1.OPENED) return [3, 20];\n            this._state = Os$1.OPENING, h4.label = 2;\n          case 2:\n            return h4.trys.push([2, 13, , 20]), [4, this._store.init(this.name)];\n          case 3:\n            return h4.sent(), f2 = this.name, t4 = \"\".concat(ns$1(f2), \".metadata\"), n2 = { version: 0, collectionNames: [] }, [4, this._store.get(t4)];\n          case 4:\n            r2 = null !== (e4 = h4.sent()) && void 0 !== e4 ? e4 : n2, h4.label = 5;\n          case 5:\n            h4.trys.push([5, 10, 11, 12]), i3 = o(r2.collectionNames), s4 = i3.next(), h4.label = 6;\n          case 6:\n            return s4.done ? [3, 9] : (a4 = s4.value, [4, this._initializeCollection(a4)]);\n          case 7:\n            h4.sent(), h4.label = 8;\n          case 8:\n            return s4 = i3.next(), [3, 6];\n          case 9:\n            return [3, 12];\n          case 10:\n            return o$1 = h4.sent(), c3 = { error: o$1 }, [3, 12];\n          case 11:\n            try {\n              s4 && !s4.done && (l2 = i3.return) && l2.call(i3);\n            } finally {\n              if (c3) throw c3.error;\n            }\n            return [7];\n          case 12:\n            return [2, new Promise(function(e5, n3) {\n              var i4 = function(e6) {\n                r2.version < d4._version ? d4._event.upgrade(r2.version, function(n4) {\n                  return r$1(d4, void 0, void 0, function() {\n                    var i5;\n                    return s$1(this, function(s6) {\n                      switch (s6.label) {\n                        case 0:\n                          if (n4) return [3, 5];\n                          r2.version++, r2.collectionNames = Array.from(this._collections.keys()), s6.label = 1;\n                        case 1:\n                          return s6.trys.push([1, 3, , 4]), [4, this._store.set({ key: t4, value: r2 })];\n                        case 2:\n                          return s6.sent(), e6({ continued: true }), [3, 4];\n                        case 3:\n                          return i5 = s6.sent(), e6({ continued: false, err: i5 }), [3, 4];\n                        case 4:\n                          return [3, 6];\n                        case 5:\n                          e6({ continued: false, err: n4 }), s6.label = 6;\n                        case 6:\n                          return [2];\n                      }\n                    });\n                  });\n                }) : e6({ continued: false });\n              }, s5 = function(t5) {\n                var a5 = t5.continued, o2 = void 0 !== a5 && a5, u4 = t5.err, c4 = void 0 === u4 ? null : u4;\n                o2 ? setTimeout(function() {\n                  return i4(s5);\n                }, 10) : c4 ? (Ms$1.error(c4.message), d4._globalMutex.unlock(), d4._event.error(c4), n3(c4)) : Promise.all(r2.collectionNames.map(function(e6) {\n                  return d4._initializeCollection(e6);\n                })).then(function() {\n                  d4._state = Os$1.OPENED, d4._globalMutex.unlock(), d4._event.success(), e5();\n                }).catch(function(e6) {\n                  Ms$1.error(e6.message), d4._globalMutex.unlock(), d4._event.error(e6), n3(e6);\n                });\n              };\n              i4(s5);\n            })];\n          case 13:\n            switch (u3 = h4.sent(), u3.code) {\n              case Ei.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:\n                return [3, 14];\n              case Ei.STORE_NOT_AVAILABLE:\n                return [3, 16];\n            }\n            return [3, 18];\n          case 14:\n            return Ms$1.warning(\"Access to the local storage is not allowed. Switched to MemoryStore automatically.\"), this._store = new Ns$1({}), this._globalMutex.unlock(), this._event.error(u3), this._event.storeReplaced(this._store), [4, this.open()];\n          case 15:\n            return h4.sent(), [3, 19];\n          case 16:\n            return Ms$1.warning(\"IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage).\"), this._store = new Ns$1({}), this._globalMutex.unlock(), this._event.error(u3), this._event.storeReplaced(this._store), [4, this.open()];\n          case 17:\n            return h4.sent(), [3, 19];\n          case 18:\n            throw Ms$1.error(u3.message), this._globalMutex.unlock(), this._event.error(u3), u3;\n          case 19:\n            return [3, 20];\n          case 20:\n            return [2];\n        }\n        var f2;\n      });\n    });\n  }, e3.prototype.close = function() {\n    this._collections.forEach(function(e4) {\n      return e4.close();\n    }), this._state = Os$1.CLOSED;\n  }, e3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, Promise.all(Array.from(this._collections.values()).map(function(e5) {\n              return e5.clear();\n            }))];\n          case 1:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.reset = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return (e4 = hs$1.get(this.name)) && e4.clearForDatabase(this.name), [4, this._store.clear()];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype.on = function(e4, t4) {\n    this._event[e4] = t4;\n  }, e3.prototype.off = function(e4) {\n    if (\"function\" == typeof this._event[e4]) if (\"upgrade\" === e4) this._event[e4] = Yi;\n    else this._event[e4] = Vi;\n  }, e3.prototype.collection = function(e4) {\n    var t4 = this._collections.get(e4);\n    if (t4) return t4;\n    throw qi.collectionNotReady;\n  }, e3;\n}();\n!function(e3) {\n  e3[e3.VERBOSE = 0] = \"VERBOSE\", e3[e3.DEBUG = 1] = \"DEBUG\", e3[e3.INFO = 2] = \"INFO\", e3[e3.WARN = 3] = \"WARN\", e3[e3.ERROR = 4] = \"ERROR\", e3[e3.NONE = 5] = \"NONE\";\n}(xs$1 || (xs$1 = {}));\nvar Ls$1, Fs$1 = function() {\n  function e3() {\n    this.level = xs$1.WARN;\n  }\n  return e3.prototype.verbose = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    this.level <= xs$1.VERBOSE && console.log.apply(console, c([\"[verbose]\"], a$1(e4), false));\n  }, e3.prototype.debug = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    this.level <= xs$1.DEBUG && console.log.apply(console, c([\"[debug]\"], a$1(e4), false));\n  }, e3.prototype.info = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    this.level <= xs$1.INFO && console.log.apply(console, c([\"[info]\"], a$1(e4), false));\n  }, e3.prototype.warn = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    this.level <= xs$1.WARN && console.warn.apply(console, c([\"[warn]\"], a$1(e4), false));\n  }, e3.prototype.error = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    this.level <= xs$1.ERROR && console.error.apply(console, c([\"[error]\"], a$1(e4), false));\n  }, e3;\n}(), qs$1 = function() {\n  function e3(e4) {\n    var t4, n2, r2, i3;\n    this.messageTypeFilter = null !== (t4 = null == e4 ? void 0 : e4.messageTypeFilter) && void 0 !== t4 ? t4 : j.ALL, this.customTypesFilter = null !== (n2 = null == e4 ? void 0 : e4.customTypesFilter) && void 0 !== n2 ? n2 : null, this.senderUserIdsFilter = null !== (r2 = null == e4 ? void 0 : e4.senderUserIdsFilter) && void 0 !== r2 ? r2 : null, this.replyType = null !== (i3 = null == e4 ? void 0 : e4.replyType) && void 0 !== i3 ? i3 : Q.NONE;\n  }\n  return e3.prototype.clone = function() {\n    var t4 = new e3(), n2 = JSON.parse(JSON.stringify(this));\n    return Object.keys(n2).forEach(function(e4) {\n      t4[e4] = n2[e4];\n    }), t4;\n  }, e3.prototype.match = function(e4) {\n    switch (this.messageTypeFilter) {\n      case j.USER:\n        if (e4.messageType !== G.USER) return false;\n        break;\n      case j.FILE:\n        if (e4.messageType !== G.FILE) return false;\n        break;\n      case j.ADMIN:\n        if (e4.messageType !== G.ADMIN) return false;\n    }\n    if (this.customTypesFilter && this.customTypesFilter.length > 0 && !this.customTypesFilter.includes(\"*\") && !this.customTypesFilter.includes(e4.customType)) return false;\n    if (this.senderUserIdsFilter && this.senderUserIdsFilter.length > 0) {\n      if (!(e4 instanceof _t)) return false;\n      if (!this.senderUserIdsFilter.includes(e4.sender.userId)) return false;\n    }\n    if (e4 instanceof yt) switch (this.replyType) {\n      case Q.NONE:\n        if (e4.parentMessageId > 0) return false;\n        break;\n      case Q.ONLY_REPLY_TO_CHANNEL:\n        if (e4 instanceof _t && e4.parentMessageId > 0 && !e4.replyToChannel) return false;\n    }\n    return true;\n  }, e3;\n}();\n!function(e3) {\n  e3.CHANNEL_LATEST = \"channel_latest\", e3.NEWEST_CHILD_MESSAGE = \"newest_child_message\";\n}(Ls$1 || (Ls$1 = {}));\nvar zs$1, Bs$1 = function(e3) {\n  switch (e3) {\n    case Ls$1.CHANNEL_LATEST:\n      return [\"channelUrl\", \"-createdAt\", \"-messageId\"];\n    case Ls$1.NEWEST_CHILD_MESSAGE:\n      return [\"channelUrl\", \"-parentMessageId\", \"-createdAt\", \"-messageId\"];\n  }\n}, js$1 = function() {\n  return [\"channelUrl\", \"-createdAt\", \"-notificationId\"];\n}, Ks$1 = n$2(n$2({}, on$2), { scheduledAt: void 0 }), Qs$1 = function(e3) {\n  return dn$2(e3) && S$1(\"number\", e3.scheduledAt, true);\n}, Gs$1 = n$2(n$2({}, rn$2), { scheduledAt: 0, file: void 0, fileUrl: void 0, fileName: void 0, mimeType: void 0, fileSize: void 0, thumbnailSizes: void 0, requireAuth: false }), Vs$1 = function(e3) {\n  return sn$2(e3) && S$1(\"number\", e3.scheduledAt) && (k(e3.file) || S$1(\"string\", e3.fileUrl)) && S$1(\"string\", e3.fileName, true) && S$1(\"string\", e3.mimeType, true) && S$1(\"number\", e3.fileSize, true) && (null === e3.thumbnailSizes || void 0 === e3.thumbnailSizes || e3.thumbnailSizes.every(function(e4) {\n    return S$1(\"object\", e4) && e4.maxWidth > 0 && e4.maxHeight > 0;\n  }));\n}, Hs$1 = \"UnsentMessage\", Ws$1 = \"reqId\", Ys$1 = {}, Js$1 = function(t4) {\n  function i3(e3) {\n    var n2 = t4.call(this, e3) || this;\n    return n2._mutex = new Is$1(\"unsendmessagecache.lock\"), Ys$1[e3] = n2, n2;\n  }\n  return t$2(i3, t4), Object.defineProperty(i3.prototype, \"_cacheContext\", { get: function() {\n    return uo.of(this._iid).cacheContext;\n  }, enumerable: false, configurable: true }), i3.of = function(e3, t5) {\n    return void 0 === t5 && (t5 = false), Ys$1[e3] && !t5 || (Ys$1[e3] = new i3(e3)), Ys$1[e3];\n  }, Object.defineProperty(i3.prototype, \"collection\", { get: function() {\n    var e3 = this._cacheContext.nestdb, t5 = null == e3 ? void 0 : e3.collection(Hs$1);\n    if (!t5) throw b$2.databaseError;\n    return t5;\n  }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, \"localCacheEnabled\", { get: function() {\n    return this._cacheContext.localCacheEnabled && !!this.collection;\n  }, enumerable: false, configurable: true }), i3.prototype._serialize = function(t5) {\n    if (t5.messageId > 0) throw b$2.invalidParameters;\n    var n2, r2 = n$2({}, t5.serialize());\n    return t5 instanceof wt ? (t5.messageParams && (r2.messageParams = an$2(t5.messageParams)), t5.scheduledInfo && t5.scheduledInfo.scheduledMessageParams && (r2.scheduledInfo.scheduledMessageParams = (n2 = t5.scheduledInfo.scheduledMessageParams, n$2(n$2({}, an$2(n2)), { scheduledAt: n2.scheduledAt })))) : t5 instanceof Nt$1 ? (t5.messageParams && (r2.messageParams = pn$2(t5.messageParams)), t5.scheduledInfo && t5.scheduledInfo.scheduledMessageParams && (r2.scheduledInfo.scheduledMessageParams = function(e3) {\n      return n$2(n$2({}, pn$2(e3)), { scheduledAt: e3.scheduledAt });\n    }(t5.scheduledInfo.scheduledMessageParams))) : t5 instanceof Mt$1 && t5.messageParams && (r2.messageParams = function(t6) {\n      return se({ fileInfoList: t6.fileInfoList.map(function(e3) {\n        return { file: e3.file, fileUrl: Ct$1.getPlainUrl(e3), fileName: e3.fileName, fileSize: e3.fileSize, mimeType: e3.mimeType, thumbnailSizes: e3.thumbnailSizes, _thumbnails: e3._thumbnails, _uploadedMetaData: e3._uploadedMetaData };\n      }), isReplyToChannel: t6.isReplyToChannel, pushNotificationDeliveryOption: t6.pushNotificationDeliveryOption });\n    }(t5.messageParams)), r2;\n  }, i3.prototype._deserialize = function(e3) {\n    return e3 = n$2(n$2({}, e3), { messageId: parseInt(e3.messageId) }), la.of(this._iid).buildMessageFromSerializedData(e3);\n  }, i3.prototype._deserializeWithMessageCreateParams = function(e3) {\n    var t5, n2, r2;\n    return r$1(this, void 0, void 0, function() {\n      var i4, s4, a4, o2, u3, c3, l2 = this;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return i4 = la.of(this._iid), s4 = this._deserialize(e3), e3.messageParams ? s4 instanceof wt ? (o2 = e3.messageParams, s4.messageParams = i4.buildUserMessageCreateParamsFromSerializedData(o2, s4), [3, 6]) : [3, 1] : [3, 6];\n          case 1:\n            return s4 instanceof Nt$1 ? (o2 = e3.messageParams).fileKey && \"string\" == typeof o2.fileKey && fn$2(null !== (t5 = o2.fileType) && void 0 !== t5 ? t5 : \"\") ? (a4 = o2, [4, this.collection.getBlob(o2.fileKey)]) : [3, 3] : [3, 4];\n          case 2:\n            a4.file = null !== (n2 = d4.sent()) && void 0 !== n2 ? n2 : void 0, d4.label = 3;\n          case 3:\n            return s4.messageParams = i4.buildFileMessageCreateParamsFromSerializedData(o2, s4), [3, 6];\n          case 4:\n            return s4 instanceof Mt$1 && ((o2 = e3.messageParams) && o2.fileInfoList) ? (s4.messageParams = i4.buildMultipleFilesMessageCreateParamsFromSerializedData(o2, s4), [4, Promise.all(s4.messageParams.fileInfoList.map(function(e4) {\n              return r$1(l2, void 0, void 0, function() {\n                var t6, n3, r3, i5, s5;\n                return s$1(this, function(a5) {\n                  switch (a5.label) {\n                    case 0:\n                      return \"string\" == typeof (null === (n3 = e4._uploadedMetaData) || void 0 === n3 ? void 0 : n3.fileKey) && fn$2(null !== (i5 = null === (r3 = e4._uploadedMetaData) || void 0 === r3 ? void 0 : r3.fileType) && void 0 !== i5 ? i5 : \"\") ? (t6 = e4, [4, this.collection.getBlob(e4._uploadedMetaData.fileKey)]) : [3, 2];\n                    case 1:\n                      t6.file = null !== (s5 = a5.sent()) && void 0 !== s5 ? s5 : void 0, a5.label = 2;\n                    case 2:\n                      return [2];\n                  }\n                });\n              });\n            }))]) : [3, 6];\n          case 5:\n            d4.sent(), d4.label = 6;\n          case 6:\n            return s4.scheduledInfo && e3.scheduledInfo && e3.scheduledInfo.scheduledMessageParams ? s4 instanceof wt ? (u3 = e3.scheduledInfo.scheduledMessageParams, s4.scheduledInfo.scheduledMessageParams = i4.buildScheduledUserMessageCreateParamsFromSerializedData(u3, s4), [3, 10]) : [3, 7] : [3, 10];\n          case 7:\n            return s4 instanceof Nt$1 ? (u3 = e3.scheduledInfo.scheduledMessageParams).fileKey && \"string\" == typeof u3.fileKey && \"string\" == typeof u3.fileType && fn$2(u3.fileType) ? (c3 = u3, [4, this.collection.getBlob(u3.fileKey)]) : [3, 9] : [3, 10];\n          case 8:\n            c3.file = null !== (r2 = d4.sent()) && void 0 !== r2 ? r2 : void 0, d4.label = 9;\n          case 9:\n            s4.scheduledInfo.scheduledMessageParams = i4.buildScheduledFileMessageCreateParamsFromSerializedData(u3, s4), d4.label = 10;\n          case 10:\n            return [2, s4];\n        }\n      });\n    });\n  }, i3.prototype._getFileInfoBlobKey = function(e3, t5) {\n    return \"\".concat(e3, \".\").concat(t5);\n  }, i3.prototype.get = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.getByKey(\"\".concat(e3))] : [3, 2];\n          case 1:\n            if (t5 = n2.sent()) return [2, this._deserializeWithMessageCreateParams(t5)];\n            n2.label = 2;\n          case 2:\n            return [2, void 0];\n        }\n      });\n    });\n  }, i3.prototype.fetch = function(e3) {\n    var t5 = e3.channelUrl, n2 = e3.filter, r2 = void 0 === n2 ? new qs$1() : n2, i4 = e3.order, s4 = void 0 === i4 ? Ls$1.CHANNEL_LATEST : i4, a4 = e3.sendingStatus, o2 = e3.backward, u3 = void 0 !== o2 && o2, c3 = e3.parentMessageId;\n    return r$1(this, void 0, void 0, function() {\n      var e4, n3, i5, o3, l2 = this;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return this.localCacheEnabled ? (e4 = Bs$1(s4), n3 = { \"/where\": function(e5) {\n              return !!(s4 !== Ls$1.NEWEST_CHILD_MESSAGE || c3 && 0 !== e5.parentMessageId && e5.parentMessageId === c3) && r2.match(l2._deserialize(e5));\n            } }, t5 && (n3.channelUrl = t5), a4 && (n3.sendingStatus = a4), i5 = { where: n3, index: e4, backward: u3 }, [4, this.collection.query(i5)]) : [3, 3];\n          case 1:\n            return [4, d4.sent().fetch({})];\n          case 2:\n            return o3 = d4.sent(), [2, Promise.all(o3.map(function(e5) {\n              return r$1(l2, void 0, void 0, function() {\n                return s$1(this, function(t6) {\n                  switch (t6.label) {\n                    case 0:\n                      return [4, this._deserializeWithMessageCreateParams(e5)];\n                    case 1:\n                      return [2, t6.sent()];\n                  }\n                });\n              });\n            }))];\n          case 3:\n            return [2, []];\n        }\n      });\n    });\n  }, i3.prototype.getAllChildMessages = function(e3, t5) {\n    return void 0 === t5 && (t5 = new qs$1()), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this.fetch({ filter: t5, order: Ls$1.NEWEST_CHILD_MESSAGE, channelUrl: e3.channelUrl, backward: false, parentMessageId: e3.messageId })];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, i3.prototype.upsert = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, Promise.all(e3.map(function(e4) {\n              return r$1(t5, void 0, void 0, function() {\n                var t6;\n                return s$1(this, function(n3) {\n                  switch (n3.label) {\n                    case 0:\n                      return e4 instanceof Nt$1 || e4 instanceof Mt$1 ? [4, this._mutex.lock()] : [3, 4];\n                    case 1:\n                      return n3.sent(), [4, this.saveBlob(e4)];\n                    case 2:\n                      return n3.sent(), [4, this._mutex.unlock()];\n                    case 3:\n                      n3.sent(), n3.label = 4;\n                    case 4:\n                      return t6 = this._serialize(e4), [4, this.collection.upsertOne(t6)];\n                    case 5:\n                      return n3.sent(), [2];\n                  }\n                });\n              });\n            }))] : [3, 2];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.upsertChildMessages = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, Promise.all(e3.map(function(e4) {\n              return r$1(t5, void 0, void 0, function() {\n                var t6;\n                return s$1(this, function(n3) {\n                  switch (n3.label) {\n                    case 0:\n                      return t6 = [], e4.threadInfo && e4.threadInfo.replyCount > 0 ? [4, this.getAllChildMessages(e4)] : [3, 2];\n                    case 1:\n                      t6 = n3.sent(), n3.label = 2;\n                    case 2:\n                      return t6.length > 0 ? (t6.forEach(function(t7) {\n                        return t7.applyParentMessage(e4);\n                      }), [4, this.upsert(t6)]) : [3, 4];\n                    case 3:\n                      n3.sent(), n3.label = 4;\n                    case 4:\n                      return [2];\n                  }\n                });\n              });\n            }))] : [3, 2];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.remove = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i4, s4, a4;\n      return s$1(this, function(o$1) {\n        switch (o$1.label) {\n          case 0:\n            if (!this.localCacheEnabled) return [3, 8];\n            o$1.label = 1;\n          case 1:\n            o$1.trys.push([1, 6, 7, 8]), t5 = o(e3), n2 = t5.next(), o$1.label = 2;\n          case 2:\n            return n2.done ? [3, 5] : (r2 = n2.value, [4, this.collection.remove(r2)]);\n          case 3:\n            o$1.sent(), o$1.label = 4;\n          case 4:\n            return n2 = t5.next(), [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return i4 = o$1.sent(), s4 = { error: i4 }, [3, 8];\n          case 7:\n            try {\n              n2 && !n2.done && (a4 = t5.return) && a4.call(t5);\n            } finally {\n              if (s4) throw s4.error;\n            }\n            return [7];\n          case 8:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.removeMessagesOfChannel = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e3 } })] : [3, 2];\n          case 1:\n            t5.sent(), t5.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];\n          case 1:\n            e3.sent(), e3.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, i3.prototype.saveBlob = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i4 = this;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return e3 instanceof Nt$1 ? e3.messageParams && (r2 = e3.messageParams).file && hn$2(r2.file) ? [4, this.collection.saveBlob(r2.file, e3.reqId)] : [3, 2] : [3, 5];\n          case 1:\n            n2 = s4.sent(), r2.fileKey = n2, r2.fileType = cn$2.BLOB, s4.label = 2;\n          case 2:\n            return e3.scheduledInfo && e3.scheduledInfo.scheduledMessageParams && ((t5 = e3.scheduledInfo.scheduledMessageParams).file && hn$2(t5.file)) ? [4, this.collection.saveBlob(t5.file, e3.reqId)] : [3, 4];\n          case 3:\n            n2 = s4.sent(), t5.fileKey = n2, t5.fileType = cn$2.BLOB, s4.label = 4;\n          case 4:\n            return [3, 7];\n          case 5:\n            return e3 instanceof Mt$1 && ((r2 = e3.messageParams) && r2.fileInfoList && Array.isArray(r2.fileInfoList)) ? [4, Promise.all(r2.fileInfoList.map(function(t6, n3) {\n              return r$1(i4, void 0, void 0, function() {\n                var r3;\n                return s$1(this, function(i5) {\n                  switch (i5.label) {\n                    case 0:\n                      return t6.file && hn$2(t6.file) ? [4, this.collection.saveBlob(t6.file, this._getFileInfoBlobKey(e3.reqId, n3))] : [3, 2];\n                    case 1:\n                      r3 = i5.sent(), t6._uploadedMetaData || (t6._uploadedMetaData = {}), t6._uploadedMetaData.fileKey = r3, t6._uploadedMetaData.fileType = cn$2.BLOB, i5.label = 2;\n                    case 2:\n                      return [2];\n                  }\n                });\n              });\n            }))] : [3, 7];\n          case 6:\n            s4.sent(), s4.label = 7;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(Jr$1), Xs$1 = {}, Zs$1 = function(e3) {\n  function t4(t5) {\n    var n2 = e3.call(this, t5) || this;\n    return Xs$1[t5] = n2, n2;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"_sdkState\", { get: function() {\n    return uo.of(this._iid).sdkState;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_cacheContext\", { get: function() {\n    return uo.of(this._iid).cacheContext;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_unsentMessageCache\", { get: function() {\n    return Js$1.of(this._iid);\n  }, enumerable: false, configurable: true }), t4.of = function(e4, n2) {\n    return void 0 === n2 && (n2 = false), Xs$1[e4] && !n2 || (Xs$1[e4] = new t4(e4)), Xs$1[e4];\n  }, Object.defineProperty(t4.prototype, \"collection\", { get: function() {\n    var e4 = this._cacheContext.nestdb;\n    return cs$2(!!e4).throw(b$2.databaseError), e4.collection(Zr);\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"localCacheEnabled\", { get: function() {\n    return this._cacheContext.localCacheEnabled && !!this.collection;\n  }, enumerable: false, configurable: true }), t4.prototype._serialize = function(e4) {\n    return n$2(n$2({}, e4.serialize()), { messageId: \"\".concat(e4.messageId) });\n  }, t4.prototype._deserialize = function(e4) {\n    return e4 = n$2(n$2({}, e4), { messageId: parseInt(e4.messageId) }), la.of(this._iid).buildMessageFromSerializedData(e4);\n  }, t4.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.getByKey(\"\".concat(e4))] : [3, 2];\n          case 1:\n            if (t5 = n2.sent()) return [2, this._deserialize(t5)];\n            n2.label = 2;\n          case 2:\n            return [2, void 0];\n        }\n      });\n    });\n  }, t4.prototype.fetch = function(e4) {\n    var t5 = e4.channelUrl, n2 = e4.token, r2 = e4.limit, i3 = void 0 === r2 ? 100 : r2, s4 = e4.filter, a4 = void 0 === s4 ? new qs$1() : s4, o2 = e4.order, u3 = void 0 === o2 ? Ls$1.CHANNEL_LATEST : o2, c3 = e4.backward, l2 = void 0 !== c3 && c3, d4 = e4.parentMessageId, h4 = e4.isPollOnly, f2 = void 0 !== h4 && h4, p2 = e4.exactMatch, m4 = void 0 !== p2 && p2, v2 = e4.inclusive, y4 = void 0 === v2 || v2;\n    return r$1(this, void 0, void 0, function() {\n      var e5, r3, s5, o3 = this;\n      return s$1(this, function(c4) {\n        switch (c4.label) {\n          case 0:\n            return this.localCacheEnabled ? (e5 = Bs$1(u3), r3 = { where: { channelUrl: t5, \"/where\": function(e6) {\n              if (null != n2 && \"\" !== n2) switch (u3) {\n                case Ls$1.CHANNEL_LATEST:\n                  if (m4 && e6.createdAt !== n2) return false;\n                  if (l2) {\n                    if (y4 && e6.createdAt < n2 || !y4 && e6.createdAt <= n2) return false;\n                  } else if (y4 && e6.createdAt > n2 || !y4 && e6.createdAt >= n2) return false;\n                  break;\n                case Ls$1.NEWEST_CHILD_MESSAGE:\n                  if (!d4 || 0 === e6.parentMessageId || e6.parentMessageId !== d4) return false;\n              }\n              return !(f2 && !e6._poll) && a4.match(o3._deserialize(e6));\n            } }, index: e5, backward: l2 }, [4, this.collection.query(r3)]) : [3, 3];\n          case 1:\n            return [4, c4.sent().fetch({ limit: null != i3 ? i3 : void 0 })];\n          case 2:\n            return s5 = c4.sent(), [2, Promise.all(s5.map(function(e6) {\n              return r$1(o3, void 0, void 0, function() {\n                return s$1(this, function(t6) {\n                  return [2, this._deserialize(e6)];\n                });\n              });\n            }))];\n          case 3:\n            return [2, []];\n        }\n      });\n    });\n  }, t4.prototype.getAllChildMessages = function(e4, t5) {\n    return void 0 === t5 && (t5 = new qs$1()), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this.fetch({ channelUrl: e4.channelUrl, token: Date.now(), limit: null, backward: false, filter: t5, order: Ls$1.NEWEST_CHILD_MESSAGE, parentMessageId: e4.messageId })];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, t4.prototype.upsert = function(e4) {\n    var t5;\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, i3, s4, a4, o$1, u3, c3, l2 = this;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.saveBlobs(e4)] : [3, 13];\n          case 1:\n            d4.sent(), d4.label = 2;\n          case 2:\n            d4.trys.push([2, 7, 8, 9]), n2 = o(e4), r2 = n2.next(), d4.label = 3;\n          case 3:\n            return r2.done ? [3, 6] : (i3 = r2.value, (null === (t5 = i3.threadInfo) || void 0 === t5 ? void 0 : t5._isUpdateRequired) ? [4, this.get(i3.messageId)] : [3, 5]);\n          case 4:\n            (null == (s4 = d4.sent()) ? void 0 : s4.threadInfo) && i3.threadInfo._updateFrom(s4.threadInfo), d4.label = 5;\n          case 5:\n            return r2 = n2.next(), [3, 3];\n          case 6:\n            return [3, 9];\n          case 7:\n            return a4 = d4.sent(), u3 = { error: a4 }, [3, 9];\n          case 8:\n            try {\n              r2 && !r2.done && (c3 = n2.return) && c3.call(n2);\n            } finally {\n              if (u3) throw u3.error;\n            }\n            return [7];\n          case 9:\n            return o$1 = e4.map(function(e5) {\n              return l2._serialize(e5);\n            }), [4, this.collection.upsertMany(o$1)];\n          case 10:\n            return d4.sent(), [4, this.upsertChildMessages(e4)];\n          case 11:\n            return d4.sent(), [4, this._unsentMessageCache.upsertChildMessages(e4)];\n          case 12:\n            d4.sent(), d4.label = 13;\n          case 13:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.upsertChildMessages = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, Promise.all(e4.map(function(e5) {\n              return r$1(t5, void 0, void 0, function() {\n                var t6, n3;\n                return s$1(this, function(r2) {\n                  switch (r2.label) {\n                    case 0:\n                      return t6 = [], (null === (n3 = e5.threadInfo) || void 0 === n3 ? void 0 : n3.replyCount) && e5.threadInfo.replyCount > 0 ? [4, this.getAllChildMessages(e5)] : [3, 2];\n                    case 1:\n                      t6 = r2.sent(), r2.label = 2;\n                    case 2:\n                      return t6.length > 0 ? (t6.forEach(function(t7) {\n                        return t7.applyParentMessage(e5);\n                      }), [4, this.upsert(t6)]) : [3, 4];\n                    case 3:\n                      r2.sent(), r2.label = 4;\n                    case 4:\n                      return [2];\n                  }\n                });\n              });\n            }))] : [3, 2];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4;\n      return s$1(this, function(o$1) {\n        switch (o$1.label) {\n          case 0:\n            if (!this.localCacheEnabled) return [3, 8];\n            o$1.label = 1;\n          case 1:\n            o$1.trys.push([1, 6, 7, 8]), t5 = o(e4), n2 = t5.next(), o$1.label = 2;\n          case 2:\n            return n2.done ? [3, 5] : (r2 = n2.value, [4, this.collection.remove(\"\".concat(r2))]);\n          case 3:\n            o$1.sent(), o$1.label = 4;\n          case 4:\n            return n2 = t5.next(), [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return i3 = o$1.sent(), s4 = { error: i3 }, [3, 8];\n          case 7:\n            try {\n              n2 && !n2.done && (a4 = t5.return) && a4.call(t5);\n            } finally {\n              if (s4) throw s4.error;\n            }\n            return [7];\n          case 8:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.removeMessagesOfChannel = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4 }, index: Bs$1(Ls$1.CHANNEL_LATEST) })] : [3, 6];\n          case 1:\n            return n2.sent(), [4, (t5 = this._cacheContext.preference).remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/sync\"))];\n          case 2:\n            return n2.sent(), [4, t5.remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/sync.meta\"))];\n          case 3:\n            return n2.sent(), [4, t5.remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/changelogs\"))];\n          case 4:\n            return n2.sent(), [4, t5.remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/changelogs.meta\"))];\n          case 5:\n            n2.sent(), n2.label = 6;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.removeUnderOffset = function(e4, t5, n2) {\n    return void 0 === n2 && (n2 = false), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4, createdAt: n2 ? { \"<=\": t5 } : { \"<\": t5 } }, index: Bs$1(Ls$1.CHANNEL_LATEST) })] : [3, 2];\n          case 1:\n            r2.sent(), r2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];\n          case 1:\n            e4.sent(), e4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.countBetween = function(e4, t5, n2) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i3 = this;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this.localCacheEnabled ? (r2 = Bs$1(Ls$1.CHANNEL_LATEST), [4, this.collection.query({ where: { channelUrl: e4, \"/where\": function(e5) {\n              var r3 = i3._deserialize(e5);\n              return n2.includes(r3.createdAt) && t5.match(r3);\n            } }, index: r2 }).count()]) : [3, 2];\n          case 1:\n            return [2, s4.sent()];\n          case 2:\n            return [2, 0];\n        }\n      });\n    });\n  }, t4.prototype.saveBlobs = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5 = this;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, Promise.all(e4.map(function(e5) {\n              return r$1(t5, void 0, void 0, function() {\n                var t6, n3;\n                return s$1(this, function(r2) {\n                  switch (r2.label) {\n                    case 0:\n                      return e5 instanceof Nt$1 && e5.messageParams && ((t6 = e5.messageParams).file && hn$2(t6.file)) ? [4, this.collection.saveBlob(t6.file, e5.reqId)] : [3, 2];\n                    case 1:\n                      n3 = r2.sent(), t6.fileKey = n3, r2.label = 2;\n                    case 2:\n                      return [2];\n                  }\n                });\n              });\n            }))];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype._getGroupChannelPreferenceSize = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return t5 = 0, [4, (n2 = this._cacheContext.preference).get(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/sync\"))];\n          case 1:\n            return r2 = o2.sent(), [4, n2.get(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/sync.meta\"))];\n          case 2:\n            return i3 = o2.sent(), [4, n2.get(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/changelogs\"))];\n          case 3:\n            return s4 = o2.sent(), [4, n2.get(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/changelogs.meta\"))];\n          case 4:\n            return a4 = o2.sent(), r2 && (t5 += JSON.stringify(r2).length), i3 && (t5 += JSON.stringify(i3).length), s4 && (t5 += JSON.stringify(s4).length), a4 && (t5 += JSON.stringify(a4).length), [2, t5];\n        }\n      });\n    });\n  }, t4;\n}(Jr$1), $s$1 = {}, ea = function(e3) {\n  function t4(t5) {\n    var n2 = e3.call(this, t5) || this;\n    return $s$1[t5] = n2, n2;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"_sdkState\", { get: function() {\n    return uo.of(this._iid).sdkState;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_cacheContext\", { get: function() {\n    return uo.of(this._iid).cacheContext;\n  }, enumerable: false, configurable: true }), t4.of = function(e4, n2) {\n    return void 0 === n2 && (n2 = false), $s$1[e4] && !n2 || ($s$1[e4] = new t4(e4)), $s$1[e4];\n  }, Object.defineProperty(t4.prototype, \"collection\", { get: function() {\n    var e4 = this._cacheContext.nestdb;\n    return cs$2(!!e4).throw(b$2.databaseError), e4.collection(ti);\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"localCacheEnabled\", { get: function() {\n    return this._cacheContext.localCacheEnabled && !!this.collection;\n  }, enumerable: false, configurable: true }), t4.prototype._serialize = function(e4) {\n    return n$2({}, e4.serialize());\n  }, t4.prototype._deserialize = function(e4) {\n    return la.of(this._iid).buildMessageFromSerializedData(e4);\n  }, t4.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.getByKey(e4)] : [3, 2];\n          case 1:\n            if (t5 = n2.sent()) return [2, this._deserialize(t5)];\n            n2.label = 2;\n          case 2:\n            return [2, void 0];\n        }\n      });\n    });\n  }, t4.prototype.fetch = function(e4) {\n    var t5 = e4.channelUrl, n2 = e4.token, r2 = e4.limit, i3 = void 0 === r2 ? 100 : r2, s4 = e4.filter, a4 = void 0 === s4 ? new qs$1() : s4, o2 = e4.backward, u3 = void 0 !== o2 && o2, c3 = e4.exactMatch, l2 = void 0 !== c3 && c3, d4 = e4.inclusive, h4 = void 0 === d4 || d4;\n    return r$1(this, void 0, void 0, function() {\n      var e5, r3 = this;\n      return s$1(this, function(s5) {\n        switch (s5.label) {\n          case 0:\n            return this.localCacheEnabled ? (e5 = { where: { channelUrl: t5, \"/where\": function(e6) {\n              if (n2) {\n                if (l2 && e6.createdAt !== n2) return false;\n                if (u3) {\n                  if (h4 && e6.createdAt < n2 || !h4 && e6.createdAt <= n2) return false;\n                } else if (h4 && e6.createdAt > n2 || !h4 && e6.createdAt >= n2) return false;\n              }\n              return a4.match(r3._deserialize(e6));\n            } }, index: [\"channelUrl\", \"-createdAt\", \"-notificationId\"], backward: u3 }, [4, this.collection.query(e5)]) : [3, 3];\n          case 1:\n            return [4, s5.sent().fetch({ limit: null != i3 ? i3 : void 0 })];\n          case 2:\n            return [2, s5.sent().map(function(e6) {\n              return r3._deserialize(e6);\n            })];\n          case 3:\n            return [2, []];\n        }\n      });\n    });\n  }, t4.prototype.upsert = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2 = this;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this.localCacheEnabled ? (t5 = e4.map(function(e5) {\n              return n2._serialize(e5);\n            }), [4, this.collection.upsertMany(t5)]) : [3, 2];\n          case 1:\n            r2.sent(), r2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, i3, s4, a4;\n      return s$1(this, function(o$1) {\n        switch (o$1.label) {\n          case 0:\n            if (!this.localCacheEnabled) return [3, 8];\n            o$1.label = 1;\n          case 1:\n            o$1.trys.push([1, 6, 7, 8]), t5 = o(e4), n2 = t5.next(), o$1.label = 2;\n          case 2:\n            return n2.done ? [3, 5] : (r2 = n2.value, [4, this.collection.remove(r2)]);\n          case 3:\n            o$1.sent(), o$1.label = 4;\n          case 4:\n            return n2 = t5.next(), [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return i3 = o$1.sent(), s4 = { error: i3 }, [3, 8];\n          case 7:\n            try {\n              n2 && !n2.done && (a4 = t5.return) && a4.call(t5);\n            } finally {\n              if (s4) throw s4.error;\n            }\n            return [7];\n          case 8:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.markAsReadByTimestamp = function(e4, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.updateIf({ where: { channelUrl: e4, messageStatus: vt.SENT, createdAt: { \"<\": t5 } } }, { set: { messageStatus: vt.READ } })] : [3, 2];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.markAsReadByMessageIds = function(e4, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.updateIf({ where: { channelUrl: e4, notificationId: { \"/in\": t5 }, messageStatus: vt.SENT } }, { set: { messageStatus: vt.READ } })] : [3, 2];\n          case 1:\n            return [2, n2.sent().length];\n          case 2:\n            return [2, 0];\n        }\n      });\n    });\n  }, t4.prototype.removeMessagesOfChannel = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4 }, index: [\"channelUrl\", \"-createdAt\", \"-notificationId\"] })] : [3, 6];\n          case 1:\n            return n2.sent(), [4, (t5 = this._cacheContext.preference).remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/sync\"))];\n          case 2:\n            return n2.sent(), [4, t5.remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/sync.meta\"))];\n          case 3:\n            return n2.sent(), [4, t5.remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/changelogs\"))];\n          case 4:\n            return n2.sent(), [4, t5.remove(\"sendbird:\".concat(this._sdkState.userId, \"@groupchannel/\").concat(e4, \"/message/changelogs.meta\"))];\n          case 5:\n            n2.sent(), n2.label = 6;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.removeUnderOffset = function(e4, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.removeIf({ where: { channelUrl: e4, createdAt: { \"<\": t5 } }, index: Bs$1(Ls$1.CHANNEL_LATEST) })] : [3, 2];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];\n          case 1:\n            e4.sent(), e4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.countBetween = function(e4, t5, n2) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, i3 = this;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this.localCacheEnabled ? (r2 = [\"channelUrl\", \"-createdAt\", \"-notificationId\"], [4, this.collection.query({ where: { channelUrl: e4, \"/where\": function(e5) {\n              var r3 = i3._deserialize(e5);\n              return n2.includes(r3.createdAt) && t5.match(r3);\n            } }, index: r2 }).count()]) : [3, 2];\n          case 1:\n            return [2, s4.sent()];\n          case 2:\n            return [2, 0];\n        }\n      });\n    });\n  }, t4;\n}(Jr$1), ta = {}, na = function(e3) {\n  function t4(t5) {\n    var n2 = e3.call(this, t5) || this;\n    return n2._observers = /* @__PURE__ */ new Map(), n2._dispatcherContext = n2._dispatcher.on(function(e4) {\n      return r$1(n2, void 0, void 0, function() {\n        var t6, n3, r2, i3, s4, a4, o2, u3, c3, l2, d4, h4, f2, p2, m4, v2, y4, _2, g2, b3, E3, T3 = this;\n        return s$1(this, function(w3) {\n          switch (w3.label) {\n            case 0:\n              return e4 instanceof po ? (t6 = e4.messages, E3 = e4.source, a4 = e4.isWebSocketEventComing, n3 = t6.filter(function(e5) {\n                return e5 instanceof yt && e5.channelType !== H$1.OPEN && e5.messageId > 0;\n              }), r2 = t6.filter(function(e5) {\n                return e5 instanceof yt && e5.channelType !== H$1.OPEN && 0 === e5.messageId;\n              }), i3 = t6.filter(function(e5) {\n                return e5 instanceof St$1;\n              }), n3.length > 0 ? [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._messageCache.upsert(n3)];\n                      case 1:\n                        return e5.sent(), [4, this._unsentMessageCache.remove(n3.map(function(e6) {\n                          return e6 instanceof _t ? e6.reqId : null;\n                        }).filter(function(e6) {\n                          return null !== e6;\n                        }))];\n                      case 2:\n                        return e5.sent(), [2];\n                    }\n                  });\n                });\n              })] : [3, 2]) : [3, 7];\n            case 1:\n              w3.sent(), a4 || this._broadcastUpdateEvent(n3, E3), w3.label = 2;\n            case 2:\n              return r2.length > 0 ? [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._unsentMessageCache.upsert(r2)];\n                      case 1:\n                        return e5.sent(), [2];\n                    }\n                  });\n                });\n              })] : [3, 4];\n            case 3:\n              w3.sent(), a4 || this._broadcastUpdateEvent(r2, E3), w3.label = 4;\n            case 4:\n              return i3.length > 0 ? [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._notificationCache.upsert(i3)];\n                      case 1:\n                        return e5.sent(), [2];\n                    }\n                  });\n                });\n              })] : [3, 6];\n            case 5:\n              w3.sent(), a4 || this._broadcastUpdateEvent(i3, E3), w3.label = 6;\n            case 6:\n              return [3, 24];\n            case 7:\n              return e4 instanceof Eo ? (s4 = e4.messageIds, E3 = e4.source, a4 = e4.isWebSocketEventComing, o2 = s4.filter(function(e5) {\n                return \"number\" == typeof e5;\n              }), u3 = s4.filter(function(e5) {\n                return \"string\" == typeof e5;\n              }), [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return o2.length > 0 ? [4, this._messageCache.remove(o2)] : [3, 2];\n                      case 1:\n                        e5.sent(), e5.label = 2;\n                      case 2:\n                        return u3.length > 0 ? [4, this._notificationCache.remove(u3)] : [3, 4];\n                      case 3:\n                        e5.sent(), e5.label = 4;\n                      case 4:\n                        return [2];\n                    }\n                  });\n                });\n              })]) : [3, 9];\n            case 8:\n              return w3.sent(), a4 || this._broadcastRemoveEvent(s4, E3), [3, 24];\n            case 9:\n              return e4 instanceof mo ? (c3 = e4.reqId, E3 = e4.source, [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._unsentMessageCache.remove([c3])];\n                      case 1:\n                        return e5.sent(), [2];\n                    }\n                  });\n                });\n              })]) : [3, 11];\n            case 10:\n              return w3.sent(), this._broadcastRemoveUnsentEvent(c3, E3), [3, 24];\n            case 11:\n              return e4 instanceof yo ? (l2 = e4.polls, E3 = e4.source, this._cacheContext.localCacheEnabled ? (d4 = l2.map(function(e5) {\n                return e5.messageId;\n              }), [4, Promise.all(d4.map(function(e5) {\n                return T3._messageCache.get(e5);\n              }))]) : [3, 14]) : [3, 15];\n            case 12:\n              return (h4 = w3.sent().filter(function(e5) {\n                return e5;\n              })).length > 0 && l2.forEach(function(e5) {\n                var t7 = h4.find(function(t8) {\n                  return t8.messageId === e5.messageId;\n                });\n                t7 && t7.applyPoll(e5);\n              }), [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._messageCache.upsert(h4)];\n                      case 1:\n                        return [2, e5.sent()];\n                    }\n                  });\n                });\n              })];\n            case 13:\n              w3.sent(), w3.label = 14;\n            case 14:\n              return this._broadcastPollChangeLogEvent(l2, E3), [3, 24];\n            case 15:\n              return e4 instanceof wo ? (f2 = e4.event, E3 = e4.source, [4, this._messageCache.get(f2.messageId)]) : [3, 19];\n            case 16:\n              return (p2 = w3.sent()) && p2.isUserMessage() && p2.poll && p2.poll.applyPollUpdateEvent(f2) ? [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._messageCache.upsert([p2])];\n                      case 1:\n                        return [2, e5.sent()];\n                    }\n                  });\n                });\n              })] : [3, 18];\n            case 17:\n              w3.sent(), w3.label = 18;\n            case 18:\n              return this._broadcastPollUpdateEvent(f2, E3), [3, 24];\n            case 19:\n              return e4 instanceof So ? (m4 = e4.event, E3 = e4.source, [4, this._messageCache.get(m4.messageId)]) : [3, 23];\n            case 20:\n              return (v2 = w3.sent()) && v2.isUserMessage() && v2.poll && v2.poll.applyPollVoteEvent(m4) ? [4, Dr$1(function() {\n                return r$1(T3, void 0, void 0, function() {\n                  return s$1(this, function(e5) {\n                    switch (e5.label) {\n                      case 0:\n                        return [4, this._messageCache.upsert([v2])];\n                      case 1:\n                        return [2, e5.sent()];\n                    }\n                  });\n                });\n              })] : [3, 22];\n            case 21:\n              w3.sent(), w3.label = 22;\n            case 22:\n              return this._broadcastPollVoteEvent(m4, E3), [3, 24];\n            case 23:\n              e4 instanceof vo ? (y4 = e4.event, E3 = e4.source, y4.messageId > 0 && this._broadcastReactionUpdateEvent(y4, E3)) : e4 instanceof bo ? (_2 = e4.event, E3 = e4.source, this._broadcastThreadUpdateEvent(_2, E3)) : e4 instanceof go && (g2 = e4.messageDeletionTimestamp, b3 = e4.channelUrl, E3 = e4.source, this._broadcastMessageRetentionEvent(g2, b3, E3)), w3.label = 24;\n            case 24:\n              return [2];\n          }\n        });\n      });\n    }), n2;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"_cacheContext\", { get: function() {\n    return uo.of(this._iid).cacheContext;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_dispatcher\", { get: function() {\n    return uo.of(this._iid).dispatcher;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_messageCache\", { get: function() {\n    return Zs$1.of(this._iid);\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_unsentMessageCache\", { get: function() {\n    return Js$1.of(this._iid);\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"_notificationCache\", { get: function() {\n    return ea.of(this._iid);\n  }, enumerable: false, configurable: true }), t4.of = function(e4, n2) {\n    var r2;\n    return void 0 === n2 && (n2 = false), ta[e4] && !n2 || (ta[e4] && (null === (r2 = ta[e4]._dispatcherContext) || void 0 === r2 || r2.close()), ta[e4] = new t4(e4)), ta[e4];\n  }, t4.prototype._broadcastUpdateEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onUpdate && a4.onUpdate(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastPollChangeLogEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onPollChangeLogUpdate && a4.onPollChangeLogUpdate(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastPollUpdateEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onPollUpdate && a4.onPollUpdate(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastPollVoteEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onPollVote && a4.onPollVote(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastRemoveEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onRemove && a4.onRemove(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastRemoveUnsentEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onRemoveUnsent && a4.onRemoveUnsent(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastReactionUpdateEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onReactionUpdate && a4.onReactionUpdate(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastThreadUpdateEvent = function(e4, t5) {\n    var n2, r2;\n    try {\n      for (var i3 = o(this._observers.values()), s4 = i3.next(); !s4.done; s4 = i3.next()) {\n        var a4 = s4.value;\n        a4.onThreadInfoUpdate && a4.onThreadInfoUpdate(e4, t5);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        s4 && !s4.done && (r2 = i3.return) && r2.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, t4.prototype._broadcastMessageRetentionEvent = function(e4, t5, n2) {\n    var r2, i3;\n    try {\n      for (var s4 = o(this._observers.values()), a4 = s4.next(); !a4.done; a4 = s4.next()) {\n        var o$1 = a4.value;\n        o$1.onDeletedByRetentionPolicy && o$1.onDeletedByRetentionPolicy(e4, t5, n2);\n      }\n    } catch (e5) {\n      r2 = { error: e5 };\n    } finally {\n      try {\n        a4 && !a4.done && (i3 = s4.return) && i3.call(s4);\n      } finally {\n        if (r2) throw r2.error;\n      }\n    }\n  }, t4.prototype.subscribe = function(e4, t5) {\n    this._observers.set(e4, t5);\n  }, t4.prototype.unsubscribe = function(e4) {\n    this._observers.delete(e4);\n  }, t4.prototype.unsubscribeAll = function() {\n    this._observers.clear();\n  }, t4;\n}(Jr$1), ra = {}, ia = function(e3) {\n  function t4(t5, n2) {\n    var r2 = n2.sdkState, i3 = n2.cacheContext, s4 = e3.call(this, t5) || this;\n    return s4._users = /* @__PURE__ */ new Map(), s4._sdkState = r2, s4._cacheContext = i3, ra[t5] = s4, s4;\n  }\n  return t$2(t4, e3), t4.of = function(e4) {\n    return ra[e4];\n  }, Object.defineProperty(t4.prototype, \"collection\", { get: function() {\n    var e4 = this._cacheContext.nestdb;\n    return cs$2(!!e4).throw(b$2.databaseError), e4.collection(ui);\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"localCacheEnabled\", { get: function() {\n    return this._cacheContext.localCacheEnabled && !!this.collection;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"users\", { get: function() {\n    return c([], a$1(this._users.values()), false);\n  }, enumerable: false, configurable: true }), t4.prototype._serialize = function(e4, t5) {\n    return n$2(n$2({}, e4.serialize()), { updatedAt: t5 });\n  }, t4.prototype._deserialize = function(e4) {\n    return ls$2._buildUserFromSerializedData(e4);\n  }, t4.prototype.isCachedInMemory = function(e4) {\n    return this._users.has(e4);\n  }, t4.prototype.getUserInfoFromCache = function(e4) {\n    if (this._users.has(e4)) return this._users.get(e4);\n  }, t4.prototype.get = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this._users.has(e4) ? [3, 3] : this.localCacheEnabled ? [4, this.collection.getByKey(e4)] : [3, 2];\n          case 1:\n            if (t5 = r2.sent()) return n2 = this._deserialize(t5), this._users.set(n2.userId, n2), [2, n2];\n            r2.label = 2;\n          case 2:\n            return [2, void 0];\n          case 3:\n            return [2, this._users.get(e4)];\n        }\n      });\n    });\n  }, t4.prototype.fetch = function(e4) {\n    var t5 = e4.limit, n2 = void 0 === t5 ? 100 : t5, r2 = e4.backward, i3 = void 0 !== r2 && r2;\n    return r$1(this, void 0, void 0, function() {\n      var e5, t6, r3, s4 = this;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            if (!this.localCacheEnabled) return [2, []];\n            a4.label = 1;\n          case 1:\n            return a4.trys.push([1, 4, , 5]), e5 = { index: [\"-userId\", \"-updatedAt\"], backward: i3 }, [4, this.collection.query(e5)];\n          case 2:\n            return [4, a4.sent().fetch({ limit: n2 })];\n          case 3:\n            return t6 = a4.sent(), (r3 = t6.map(function(e6) {\n              return s4._deserialize(e6);\n            })).forEach(function(e6) {\n              s4._users.has(e6.userId) || s4._users.set(e6.userId, e6);\n            }), [2, r3];\n          case 4:\n            return a4.sent(), [2, []];\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.upsert = function(e4, t5) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            if (!this.localCacheEnabled) return [3, 2];\n            if (n2 = this._serialize(e4, t5), r2 = this._users.get(e4.userId)) {\n              if (r2._hashValue === e4._hashValue) return [2];\n              if (r2._updatedAt > t5) return [2];\n            }\n            return this._users.set(e4.userId, ls$2._buildUserFromSerializedData(n2)), [4, this.collection.upsertOne(n2)];\n          case 1:\n            i3.sent(), i3.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.remove = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return this._users.has(e4) && this._users.delete(e4), this.localCacheEnabled ? [4, this.collection.remove(e4)] : [3, 2];\n          case 1:\n            t5.sent(), t5.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.clearMemoryCache = function() {\n    this._users.clear();\n  }, t4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this.clearMemoryCache(), this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];\n          case 1:\n            e4.sent(), e4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(Jr$1), sa = function(t4) {\n  function n2(n3) {\n    var r2 = this, s4 = n3.reverse, a4 = void 0 !== s4 && s4, o2 = n3.limit, u3 = void 0 === o2 ? 20 : o2, c3 = n3.keys, l2 = n3.token;\n    return (r2 = t4.call(this) || this).method = ae.GET, r2.path = \"\".concat(Ae), r2.params = se({ token: l2, limit: u3, reverse: a4, order: J.UPDATED_AT, show_ui_template: true, show_color_variables: true, keys: c3 }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), aa = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this, i3 = n2.next, s4 = n2.has_more, a4 = void 0 !== s4 && s4, o2 = n2.templates;\n    return r2.nextToken = i3, r2.hasMore = a4, r2.templates = o2.map(function(e4) {\n      return { template: JSON.stringify(e4) };\n    }), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), oa = function(e3) {\n  function t4(t5) {\n    var n2 = this, r2 = t5.key;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = \"\".concat(Ae, \"/\").concat(r2), n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), ua = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.template = JSON.stringify(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), ca = {}, la = function() {\n  function n2(e3, t4) {\n    var n3 = t4.sdkState, r2 = t4.dispatcher, i3 = t4.requestQueue, s4 = t4.onlineDetector, a4 = t4.cacheContext;\n    this._iid = e3, this._sdkState = n3, this._requestQueue = i3, this._dispatcher = r2, this._cacheContext = a4, Zs$1.of(e3), Js$1.of(e3), na.of(e3), this.fileMessageQueue = new Lt$1(e3, { sdkState: n3, dispatcher: r2, requestQueue: i3, onlineDetector: s4, cacheContext: a4 }), ca[e3] = this;\n  }\n  return n2.of = function(e3) {\n    return ca[e3];\n  }, n2.prototype._setSenderInfo = function(e3) {\n    if (this._cacheContext.localCacheEnabled && (e3.messageType === G.USER || e3.messageType === G.FILE)) {\n      var t4 = e3.sender;\n      if (t4) {\n        var n3 = ia.of(this._iid).getUserInfoFromCache(t4.user_id);\n        n3 && (e3.sender = ls$2.payloadify(n3));\n      }\n    }\n  }, n2.prototype.buildMessageFromSerializedData = function(e3) {\n    var t4 = as$2(e3);\n    if (t4.notificationId) return new St$1(this._iid, St$1.payloadify(t4));\n    switch (this._setSenderInfo(t4), t4.messageType) {\n      case G.USER:\n        return new wt(this._iid, wt.payloadify(t4));\n      case G.FILE:\n        return Mt$1._isMultipleFilesMessageSerializedData(t4) ? new Mt$1(this._iid, Mt$1.payloadify(t4)) : new Nt$1(this._iid, Nt$1.payloadify(t4));\n      case G.ADMIN:\n        return new It$1(this._iid, It$1.payloadify(t4));\n    }\n    throw b$2.invalidParameters;\n  }, n2.prototype.buildUserMessageCreateParamsFromSerializedData = function(n3, r2) {\n    return se(oe({ data: r2.data, customType: r2.customType, mentionType: r2.mentionType, mentionedUserIds: r2.mentionedUserIds, mentionedUsers: r2.mentionedUsers, mentionedMessageTemplate: r2.mentionedMessageTemplate, metaArrays: r2.metaArrays, parentMessageId: r2.parentMessageId, isReplyToChannel: n3.isReplyToChannel, pushNotificationDeliveryOption: n3.pushNotificationDeliveryOption, appleCriticalAlertOptions: r2.appleCriticalAlertOptions, reqId: r2.reqId, message: r2.message, translationTargetLanguages: Object.keys(r2.translations), pollId: n3.pollId }));\n  }, n2.prototype.buildFileMessageCreateParamsFromSerializedData = function(n3, r2) {\n    var i3;\n    return se(oe({ data: r2.data, customType: r2.customType, mentionType: r2.mentionType, mentionedUserIds: r2.mentionedUserIds, mentionedUsers: r2.mentionedUsers, metaArrays: r2.metaArrays, parentMessageId: r2.parentMessageId, isReplyToChannel: n3.isReplyToChannel, pushNotificationDeliveryOption: n3.pushNotificationDeliveryOption, appleCriticalAlertOptions: r2.appleCriticalAlertOptions, reqId: r2.reqId, file: n3.file, fileKey: n3.fileKey, fileUrl: r2.plainUrl, fileName: r2.name, fileSize: r2.size, mimeType: r2.type, thumbnailSizes: null === (i3 = r2.thumbnails) || void 0 === i3 ? void 0 : i3.map(function(e3) {\n      return { maxWidth: e3.width, maxHeight: e3.height };\n    }), fileType: n3.fileType, requireAuth: r2.requireAuth }));\n  }, n2.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData = function(t4, n3) {\n    var r2 = this;\n    return se({ data: n3.data, customType: n3.customType, mentionType: n3.mentionType, mentionedUserIds: n3.mentionedUserIds, mentionedUsers: n3.mentionedUsers, metaArrays: n3.metaArrays, parentMessageId: n3.parentMessageId, isReplyToChannel: t4.isReplyToChannel, pushNotificationDeliveryOption: t4.pushNotificationDeliveryOption, appleCriticalAlertOptions: n3.appleCriticalAlertOptions, reqId: n3.reqId, fileInfoList: t4.fileInfoList.map(function(e3) {\n      return new Ct$1(r2._iid, e3);\n    }) });\n  }, n2.prototype.buildScheduledUserMessageCreateParamsFromSerializedData = function(e3, t4) {\n    return n$2(n$2({}, this.buildUserMessageCreateParamsFromSerializedData(e3, t4)), { scheduledAt: e3.scheduledAt });\n  }, n2.prototype.buildScheduledFileMessageCreateParamsFromSerializedData = function(e3, t4) {\n    return n$2(n$2({}, this.buildFileMessageCreateParamsFromSerializedData(e3, t4)), { scheduledAt: e3.scheduledAt });\n  }, n2.prototype.buildSenderFromSerializedData = function(e3) {\n    var t4 = as$2(e3);\n    return new Ge(this._iid, Ge.payloadify(t4));\n  }, n2.prototype.getMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return t4 = new Gt$1(e3), [4, this._requestQueue.send(t4)];\n          case 1:\n            return n3 = r2.sent(), [2, n3.as(Vt$1).message];\n        }\n      });\n    });\n  }, n2.prototype.getScheduledMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return t4 = new Xt$1(e3), [4, this._requestQueue.send(t4)];\n          case 1:\n            return n3 = r2.sent(), [2, n3.as(Zt$2).message];\n        }\n      });\n    });\n  }, n2.prototype.getMessagesByMessageId = function(e3, t4, n3, r2, i3) {\n    return void 0 === i3 && (i3 = no.REQUEST_MESSAGE), r$1(this, void 0, void 0, function() {\n      var s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return s4 = new Ht$1(n$2(n$2(n$2({ channelType: t4, channelUrl: e3, token: String(n3) }, zt$1), r2), { sdkSource: qt$1.EXTERNAL_LEGACY })), [4, this._requestQueue.send(s4)];\n          case 1:\n            return a4 = c3.sent(), o2 = a4.as(Wt$1).messages, this._dispatcher.dispatch(new po({ messages: o2, source: i3 })), [2, o2];\n        }\n      });\n    });\n  }, n2.prototype.getMessagesByTimestamp = function(e3, t4, n3, r2, i3) {\n    return void 0 === i3 && (i3 = no.REQUEST_MESSAGE), r$1(this, void 0, void 0, function() {\n      var s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return s4 = new Ht$1(n$2(n$2(n$2({ channelType: t4, channelUrl: e3, timestamp: n3 }, zt$1), r2), { sdkSource: qt$1.EXTERNAL_LEGACY })), [4, this._requestQueue.send(s4)];\n          case 1:\n            return a4 = c3.sent(), o2 = a4.as(Wt$1).messages, this._dispatcher.dispatch(new po({ messages: o2, source: i3 })), [2, o2];\n        }\n      });\n    });\n  }, n2.prototype._getMessagesByTimestampForCollection = function(e3, t4, n3, r2, i3, s4, a4, o2) {\n    return void 0 === i3 && (i3 = no.REQUEST_MESSAGE), r$1(this, void 0, void 0, function() {\n      var c3, l2, d4, h4, f2, p2;\n      return s$1(this, function(m4) {\n        switch (m4.label) {\n          case 0:\n            return c3 = new Ht$1(n$2(n$2(n$2({ channelType: t4, channelUrl: e3, timestamp: n3 }, zt$1), r2), { checkingHasNext: s4, checkingContinuousMessages: a4, sdkSource: o2 })), [4, this._requestQueue.send(c3)];\n          case 1:\n            return l2 = m4.sent(), d4 = l2.as(Wt$1), h4 = d4.messages, f2 = d4.isContinuousMessages, p2 = d4.hasNext, this._dispatcher.dispatch(new po({ messages: h4, source: i3 })), [2, { messages: h4, isContinuousMessages: f2, hasNext: p2 }];\n        }\n      });\n    });\n  }, n2.prototype.getThreadedMessagesByTimestamp = function(e3, t4, n3, r2) {\n    return void 0 === r2 && (r2 = no.REQUEST_THREADED_MESSAGE), r$1(this, void 0, void 0, function() {\n      var i3, s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return i3 = new Ht$1(n$2(n$2(n$2({ channelUrl: e3.channelUrl, channelType: e3.channelType, timestamp: t4 }, gt), n3), { replyType: Q.ALL, parentMessageId: e3.messageId, includeThreadInfo: true })), [4, this._requestQueue.send(i3)];\n          case 1:\n            return s4 = c3.sent(), a4 = s4.as(Wt$1).messages, (o2 = a4.slice(1)).forEach(function(t5) {\n              t5.parentMessage = e3;\n            }), this._dispatcher.dispatch(new po({ messages: o2, source: r2 })), [2, { parentMessage: a4[0], threadedMessages: o2 }];\n        }\n      });\n    });\n  }, n2.prototype.getMessageTemplatesByToken = function(e3, t4) {\n    return void 0 === t4 && (t4 = {}), r$1(this, void 0, void 0, function() {\n      var n3, r2, i3, s4, a4, o2;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return n3 = new sa(n$2({ token: e3 }, t4)), [4, this._requestQueue.send(n3)];\n          case 1:\n            return r2 = c3.sent(), i3 = r2.as(aa), s4 = i3.hasMore, a4 = i3.nextToken, o2 = i3.templates, [2, { hasMore: s4, token: a4, templates: o2 }];\n        }\n      });\n    });\n  }, n2.prototype.getMessageTemplate = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n3;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return t4 = new oa({ key: e3 }), [4, this._requestQueue.send(t4)];\n          case 1:\n            return n3 = r2.sent(), [2, { template: n3.as(ua).template }];\n        }\n      });\n    });\n  }, n2.prototype.getMessageChangelogs = function(n3, r2, i3, s4, a4) {\n    return void 0 === a4 && (a4 = no.REQUEST_MESSAGE_CHANGELOGS), r$1(this, void 0, void 0, function() {\n      var o2, c3, l2, d4, h4, f2, p2, m4, v2;\n      return s$1(this, function(y4) {\n        switch (y4.label) {\n          case 0:\n            return o2 = new Yt$1(se(oe(n$2(n$2({ channelType: r2, channelUrl: n3, timestamp: \"number\" == typeof i3 ? i3 : null, token: \"string\" == typeof i3 ? i3 : null }, jt$1), s4)))), [4, this._requestQueue.send(o2)];\n          case 1:\n            return c3 = y4.sent(), l2 = c3.as(Jt$1), d4 = l2.updatedMessages, h4 = l2.deletedMessagesInfo, f2 = l2.hasMore, p2 = l2.nextToken, m4 = l2.forceUseNextToken, v2 = h4.map(function(e3) {\n              return e3.messageId;\n            }), d4.length > 0 && this._dispatcher.dispatch(new po({ messages: d4, source: a4 })), v2.length > 0 && this._dispatcher.dispatch(new Eo({ messageIds: v2, source: a4 })), [2, { updatedMessages: d4, deletedMessageIds: v2, hasMore: f2, token: p2, forceUseNextToken: m4 }];\n        }\n      });\n    });\n  }, n2;\n}(), da = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5) || this;\n    r2.targetMessageId = 0;\n    var i3 = n2.thread_info, s4 = n2.parent_message_id, a4 = n2.channel_url, o2 = n2.channel_type;\n    return i3 && S$1(\"object\", i3) && S$1(\"number\", s4) && S$1(\"string\", a4) && S$1(\"string\", o2) && (r2.threadInfo = new De$2(t5, i3), r2.targetMessageId = s4, r2.channelUrl = a4, r2.channelType = o2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Jr$1), ha = { channelUrl: \"\", channelType: H$1.BASE, messageId: 0, includeReactions: false, includeMetaArray: false, includeParentMessageInfo: false, includeThreadInfo: false }, fa = function(t4) {\n  function n2(n3) {\n    var r2 = n3.channelCustomType, s4 = n3.keyword, a4 = n3.limit, o2 = n3.reverse, u3 = n3.exactMatch, c3 = n3.channelUrl, l2 = n3.order, d4 = n3.messageTimestampFrom, h4 = n3.messageTimestampTo, f2 = n3.advancedQuery, p2 = n3.targetFields, m4 = n3.nextToken, v2 = t4.call(this) || this;\n    return v2.method = ae.GET, v2.path = \"\".concat(Ee$1, \"/messages\"), v2.params = se({ custom_type: r2, query: s4, limit: a4, reverse: o2, exact_match: u3, channel_url: c3, message_ts_from: d4, message_ts_to: h4, sort_field: l2, advanced_query: f2, target_fields: p2, after: m4 }), v2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), pa = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.messages = n2.results.map(function(e4) {\n      return At$1(t5, e4);\n    }), r2.hasNext = n2.has_next, r2.nextToken = n2.end_cursor, r2.totalCount = n2.total_count, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2);\n!function(e3) {\n  e3.SCORE = \"score\", e3.TIMESTAMP = \"ts\";\n}(zs$1 || (zs$1 = {}));\nvar ma = function(e3) {\n  function i3(t4, n2) {\n    var r2, i4, s4, a4, o2, u3, c3, l2, d4, h4 = this;\n    return (h4 = e3.call(this, t4, n2) || this).keyword = \"\", h4.reverse = false, h4.exactMatch = false, h4.channelUrl = null, h4.channelCustomType = null, h4.messageTimestampFrom = null, h4.messageTimestampTo = null, h4.order = zs$1.SCORE, h4.advancedQuery = false, h4.targetFields = null, h4._nextToken = \"\", h4.totalCount = -1, h4.keyword = n2.keyword, h4.reverse = null !== (r2 = n2.reverse) && void 0 !== r2 && r2, h4.exactMatch = null !== (i4 = n2.exactMatch) && void 0 !== i4 && i4, h4.channelUrl = null !== (s4 = n2.channelUrl) && void 0 !== s4 ? s4 : null, h4.channelCustomType = null !== (a4 = n2.channelCustomType) && void 0 !== a4 ? a4 : null, h4.messageTimestampFrom = null !== (o2 = n2.messageTimestampFrom) && void 0 !== o2 ? o2 : null, h4.messageTimestampTo = null !== (u3 = n2.messageTimestampTo) && void 0 !== u3 ? u3 : null, h4.order = null !== (c3 = n2.order) && void 0 !== c3 ? c3 : zs$1.SCORE, h4.advancedQuery = null !== (l2 = n2.advancedQuery) && void 0 !== l2 && l2, h4.targetFields = null !== (d4 = n2.targetFields) && void 0 !== d4 ? d4 : null, h4;\n  }\n  return t$2(i3, e3), i3.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"string\", this.keyword) && this.keyword.length > 0 && S$1(\"boolean\", this.reverse) && S$1(\"boolean\", this.exactMatch) && S$1(\"string\", this.channelUrl, true) && S$1(\"string\", this.channelCustomType, true) && S$1(\"number\", this.messageTimestampFrom, true) && S$1(\"number\", this.messageTimestampTo, true) && T$2(zs$1, this.order) && S$1(\"boolean\", this.advancedQuery) && C$1(\"string\", this.targetFields, true);\n  }, i3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, r2, i4, s4, a4, o2, c3, l2;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, r2 = new fa(oe(n$2(n$2({}, this), { nextToken: this._nextToken ? this._nextToken : null }))), [4, e4.send(r2)]) : [3, 2] : [3, 5];\n          case 1:\n            return i4 = d4.sent(), s4 = i4.as(pa), a4 = s4.messages, o2 = s4.hasNext, c3 = s4.nextToken, l2 = s4.totalCount, this._nextToken = c3, this._hasNext = o2, this._isLoading = false, this.totalCount = l2, [2, a4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(Oo), va = function(n2) {\n  function s4(r2) {\n    var s5 = r2.channelType, a4 = r2.channelUrl, o2 = r2.limit, u3 = r2.token, c3 = n2.call(this) || this;\n    return c3.method = ae.GET, c3.path = \"\".concat(Re$3(s5), \"/\").concat(encodeURIComponent(a4), \"/messages/parent_thread_message\"), c3.params = se(oe({ limit: o2, token: u3 })), c3;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), ya = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.token = n2.next, r2.messages = n2.messages.map(function(e4) {\n      return At$1(t5, e4);\n    }), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), _a$2 = function(e3) {\n  function t4(t5, n2, r2, i3) {\n    var s4 = e3.call(this, t5, n2, r2, i3) || this;\n    return s4._edge = \"\", s4;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this);\n  }, t4.prototype.load = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, r2, i3, s4, a4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t5 = new va({ channelType: this.channelType, channelUrl: this.channelUrl, token: this._edge, limit: this.limit }), [4, e4.send(t5)]) : [3, 2] : [3, 5];\n          case 1:\n            return r2 = o2.sent(), i3 = r2.as(ya), s4 = i3.messages, a4 = i3.token, this._edge = a4, this._hasNext = !!a4, this._isLoading = false, [2, s4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(ko), ga = { channelUrl: \"\", scheduledMessageId: 0 }, ba = { reverse: false, limit: 20 }, Ia = function(e3) {\n  function t4() {\n    var t5 = null !== e3 && e3.apply(this, arguments) || this;\n    return t5.name = \"message\", t5;\n  }\n  return t$2(t4, e3), t4.prototype.init = function(t5, n2) {\n    var r2 = n2.sdkState, i3 = n2.dispatcher, s4 = n2.sessionManager, a4 = n2.requestQueue, o2 = n2.logger, u3 = n2.onlineDetector, c3 = n2.cacheContext;\n    e3.prototype.init.call(this, t5, { sdkState: r2, dispatcher: i3, sessionManager: s4, requestQueue: a4, logger: o2, onlineDetector: u3, cacheContext: c3 }), this._manager = new la(t5, { sdkState: r2, dispatcher: i3, requestQueue: a4, onlineDetector: u3, cacheContext: c3 });\n  }, t4.prototype.buildMessageFromSerializedData = function(e4) {\n    return this._manager.buildMessageFromSerializedData(e4);\n  }, t4.prototype.buildSenderFromSerializedData = function(e4) {\n    return this._manager.buildSenderFromSerializedData(e4);\n  }, t4.prototype.getMessage = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return t5 = n$2(n$2({}, ha), e4), cs$2(function(e5) {\n              return S$1(\"string\", e5.channelUrl) && T$2(H$1, e5.channelType) && S$1(\"number\", e5.messageId) && S$1(\"boolean\", e5.includeReactions, true) && S$1(\"boolean\", e5.includeMetaArray, true) && S$1(\"boolean\", e5.includeParentMessageInfo, true) && S$1(\"boolean\", e5.includeThreadInfo, true);\n            }(t5)).throw(b$2.invalidParameters), [4, this._manager.getMessage(t5)];\n          case 1:\n            if ((n2 = r2.sent()) instanceof yt || n2 instanceof St$1 || null === n2) return [2, n2];\n            throw \"Unknown message type is given.\";\n        }\n      });\n    });\n  }, t4.prototype.getScheduledMessage = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        return t5 = n$2(n$2({}, ga), e4), cs$2(function(e5) {\n          return S$1(\"string\", e5.channelUrl) && \"\" !== e5.channelUrl && S$1(\"number\", e5.scheduledMessageId) && e5.scheduledMessageId > 0;\n        }(t5)).throw(b$2.invalidParameters), [2, this._manager.getScheduledMessage(t5)];\n      });\n    });\n  }, t4.prototype.getMessageTemplatesByToken = function(e4, t5) {\n    return void 0 === t5 && (t5 = {}), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(r2) {\n        return n2 = n$2(n$2({}, ba), t5), cs$2(S$1(\"string\", e4, true) && function(e5) {\n          return S$1(\"boolean\", e5.reverse, true) && S$1(\"number\", e5.limit, true) && C$1(\"string\", e5.keys, true);\n        }(n2)).throw(b$2.invalidParameters), [2, this._manager.getMessageTemplatesByToken(e4, n2)];\n      });\n    });\n  }, t4.prototype.getMessageTemplate = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return cs$2(S$1(\"string\", e4)).throw(b$2.invalidParameters), [2, this._manager.getMessageTemplate(e4)];\n      });\n    });\n  }, t4;\n}(lo);\nvar E, C, R;\n!function(e3) {\n  e3.LATEST_LAST_MESSAGE = \"latest_last_message\", e3.CHRONOLOGICAL = \"chronological\", e3.CHANNEL_NAME_ALPHABETICAL = \"channel_name_alphabetical\", e3.METADATA_VALUE_ALPHABETICAL = \"metadata_value_alphabetical\";\n}(E || (E = {})), function(e3) {\n  e3.CHRONOLOGICAL = \"chronological\", e3.CHANNEL_NAME_ALPHABETICAL = \"channel_name_alphabetical\", e3.METADATA_VALUE_ALPHABETICAL = \"metadata_value_alphabetical\";\n}(C || (C = {})), function(e3) {\n  e3.CREATED_AT = \"created_at\", e3.SCHEDULED_AT = \"scheduled_at\";\n}(R || (R = {}));\nvar L$1, b$1 = function(e3) {\n  switch (e3) {\n    case E.LATEST_LAST_MESSAGE:\n      return [\"-lastMessageUpdatedAt\", \"-createdAt\", \"syncIndex\"];\n    case E.CHRONOLOGICAL:\n      return [\"-createdAt\", \"syncIndex\"];\n    case E.CHANNEL_NAME_ALPHABETICAL:\n      return [\"name\"];\n    default:\n      return [\"-lastMessageUpdatedAt\", \"-createdAt\", \"syncIndex\"];\n  }\n}, y$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.message, s4 = t4.call(this) || this;\n    return s4.message = n3, s4;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), I$1 = {}, N = function() {\n  function e3(e4, t4) {\n    var n2 = t4.localCacheEnabled, s4 = t4.enableAutoResend, r2 = t4.dispatcher, i3 = t4.sdkState, u3 = t4.logger, c3 = this;\n    this._iid = e4, I$1[e4] = this, this._localCacheEnabled = n2, this._enableAutoResend = s4, this._isProcessingAutoResend = false, this._autoResendQueue = [], this._dispatcher = r2, this._logger = u3, this._sdkState = i3, this._localCacheEnabled && r2.on(function(e5) {\n      if (e5 instanceof Fr$1) switch (e5.stateType) {\n        case Rr$1.CONNECTED:\n          c3._isProcessingAutoResend || c3.processAutoResendRegisteredPendingMessages().then(function() {\n            return c3._processNextAutoResend();\n          });\n          break;\n        case Rr$1.INTERNAL_DISCONNECTED:\n        case Rr$1.EXTERNAL_DISCONNECTED:\n          c3._isProcessingAutoResend = false;\n      }\n    });\n  }\n  return e3.of = function(e4) {\n    return I$1[e4];\n  }, e3.prototype.processNonAutoResendRegisteredPendingMessages = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, i3, a4, o$1;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._enableAutoResend ? [4, this._fetchAllCachedPendingMessages()] : [2];\n          case 1:\n            e4 = s4.sent();\n            try {\n              for (t4 = o(e4), n2 = t4.next(); !n2.done; n2 = t4.next()) 0 === (i3 = n2.value).errorCode && (this._logger.debug(\"cached pending message is not auto-resend registered. changing its sending status to failed: \", i3.reqId), i3.sendingStatus = Z.FAILED, i3.errorCode = u$1.ACK_TIMEOUT, this._dispatcher.dispatch(new po({ messages: [i3], source: no.LOCAL_MESSAGE_FAILED })));\n            } catch (e5) {\n              a4 = { error: e5 };\n            } finally {\n              try {\n                n2 && !n2.done && (o$1 = t4.return) && o$1.call(t4);\n              } finally {\n                if (a4) throw a4.error;\n              }\n            }\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.processAutoResendRegisteredPendingMessages = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, a4, o$1, c3, l2, _2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return [4, this._fetchAllCachedPendingMessages()];\n          case 1:\n            e4 = s4.sent();\n            try {\n              for (t4 = o(e4), n2 = t4.next(); !n2.done; n2 = t4.next()) a4 = n2.value, this._enableAutoResend && a4.errorCode && O$2(a4.errorCode) && (o$1 = (/* @__PURE__ */ new Date()).getTime(), c3 = a4.createdAt + 2592e5, this._enableAutoResend && o$1 <= c3 ? this._autoResendQueue.map(function(e5) {\n                return e5.reqId;\n              }).indexOf(a4.reqId) < 0 && this._autoResendQueue.push(a4) : (this._logger.debug(\"auto-resend registered pending messaged expired. expiration date: \", new Date(c3).toLocaleString()), a4.sendingStatus = Z.FAILED, this._dispatcher.dispatch(new po({ messages: [a4], source: no.LOCAL_MESSAGE_FAILED }))));\n            } catch (e5) {\n              l2 = { error: e5 };\n            } finally {\n              try {\n                n2 && !n2.done && (_2 = t4.return) && _2.call(t4);\n              } finally {\n                if (l2) throw l2.error;\n              }\n            }\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.completeCurrentAndProcessNextAutoResend = function(e4) {\n    if (this._localCacheEnabled && this._enableAutoResend && (e4.sendingStatus === Z.SUCCEEDED || e4.sendingStatus === Z.FAILED && !O$2(e4.errorCode))) {\n      var t4 = this.indexOf(e4);\n      t4 >= 0 && this._autoResendQueue.splice(t4, 1), 0 === t4 && this._processNextAutoResend();\n    }\n  }, e3.prototype._fetchAllCachedPendingMessages = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return e4 = Js$1.of(this._iid), (t4 = new qs$1()).replyType = Q.ALL, [4, e4.fetch({ sendingStatus: Z.PENDING, backward: true, filter: t4 })];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, e3.prototype.indexOf = function(e4) {\n    return this._autoResendQueue.length > 0 ? this._autoResendQueue.map(function(e5) {\n      return e5.reqId;\n    }).indexOf(e4.reqId) : -1;\n  }, e3.prototype._isNotInQueue = function(e4) {\n    return -1 === this._autoResendQueue.map(function(e5) {\n      return e5.reqId;\n    }).indexOf(e4.reqId);\n  }, e3.prototype._processNextAutoResend = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        if (this._localCacheEnabled && this._enableAutoResend && \"foreground\" === this._sdkState.appState) try {\n          this._autoResendQueue.length > 0 ? (this._isProcessingAutoResend || (this._logger.debug(\"auto-resend queue started.\"), this._isProcessingAutoResend = true), e4 = this._autoResendQueue[0], this._dispatcher.dispatch(new y$1({ message: e4 })), this._logger.debug(\"processing auto-resend for message request id: \", e4.reqId)) : (this._logger.debug(\"auto-resend queue finished.\"), this._isProcessingAutoResend = false);\n        } catch (e5) {\n          this._logger.warn(\"process auto-resend error: \", e5), this._isProcessingAutoResend = false;\n        }\n        return [2];\n      });\n    });\n  }, e3;\n}();\n!function(e3) {\n  e3[e3.USER_BLOCK = 20001] = \"USER_BLOCK\", e3[e3.USER_UNBLOCK = 2e4] = \"USER_UNBLOCK\", e3[e3.FRIEND_DISCOVERED = 20900] = \"FRIEND_DISCOVERED\";\n}(L$1 || (L$1 = {}));\nvar D$1, v$1 = function() {\n  function e3(e4) {\n    this.category = e4.cat, this.data = e4.data;\n  }\n  return e3.getDataAsUserBlockEvent = function(e4, t4) {\n    var n2 = t4.data, s4 = n2.blocker, r2 = n2.blockee;\n    return { blocker: new ls$2(e4, s4), blockee: new ls$2(e4, r2) };\n  }, e3.getDataAsFriendDiscoveredEvent = function(e4, t4) {\n    var n2 = t4.data.friend_discoveries;\n    return { friendDiscoveries: Array.isArray(n2) ? n2.map(function(t5) {\n      return new ls$2(e4, t5);\n    }) : [] };\n  }, e3;\n}(), T$1 = function(t4) {\n  function n2(e3, n3) {\n    var s4 = n3.userId, r2 = t4.call(this) || this;\n    return r2._iid = e3, r2.userId = s4, r2;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), S = function(t4) {\n  function n2() {\n    return t4.call(this) || this;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), m$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.configTs, s4 = t4.call(this) || this;\n    return s4.configTs = n3, s4;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), O$1 = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, \"USEV\", s4) || this;\n    return r2.event = new v$1(s4), r2;\n  }\n  return t$2(n2, t4), n2;\n}(ze$2), P = function(t4) {\n  function n2(e3) {\n    var n3 = e3.appConfigsInfo, s4 = e3.configTs, r2 = t4.call(this) || this;\n    return r2.appConfigsInfo = {}, r2.configTs = 0, r2.appConfigsInfo = n3, r2.configTs = s4, r2;\n  }\n  return t$2(n2, t4), n2;\n}(re$1);\n!function(e3) {\n  e3[e3.IDLE = 0] = \"IDLE\", e3[e3.RUNNING = 1] = \"RUNNING\", e3[e3.END = 2] = \"END\";\n}(D$1 || (D$1 = {}));\nvar w = function(t4) {\n  function r2(e3, n2, s4, r3) {\n    var i3 = t4.call(this) || this;\n    return i3._state = D$1.IDLE, i3._retryCount = 0, i3._retryLimit = 3, i3.priority = 0, i3._worker = n2, i3;\n  }\n  return t$2(r2, t4), Object.defineProperty(r2.prototype, \"isIdle\", { get: function() {\n    return this._state === D$1.IDLE;\n  }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, \"isRunning\", { get: function() {\n    return this._state === D$1.RUNNING;\n  }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, \"isDone\", { get: function() {\n    return this._state === D$1.END;\n  }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, \"retryCount\", { get: function() {\n    return this._retryCount;\n  }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, \"retryLimit\", { get: function() {\n    return this._retryLimit;\n  }, enumerable: false, configurable: true }), r2.prototype._run = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            if (!this.isRunning) return [3, 4];\n            s4.label = 1;\n          case 1:\n            return s4.trys.push([1, 3, , 4]), [4, this._worker(e3)];\n          case 2:\n            return t5 = s4.sent(), this._retryCount = 0, this.dispatch(\"progress\", t5), t5.hasNext ? this._run(t5.nextToken) : this.end(), [3, 4];\n          case 3:\n            return n2 = s4.sent(), this.dispatch(\"error\", n2), this._retryCount < this._retryLimit ? (this._retryCount++, this._run(e3)) : this.stop(), [3, 4];\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, r2.prototype.start = function(e3) {\n    this.isIdle && (this._state = D$1.RUNNING, this._run(e3));\n  }, r2.prototype.stop = function() {\n    this._state = D$1.IDLE, this.dispatch(\"stop\");\n  }, r2.prototype.end = function() {\n    this._state = D$1.END, this.dispatch(\"end\");\n  }, r2;\n}(ne);\nvar s = function(s4, i3) {\n  this.pollId = 0, this.messageId = 0, this.pollId = i3.poll.id, this.messageId = i3.poll.message_id, this._iid = s4, this._payload = i3;\n};\nvar f;\n!function(e3) {\n  e3[e3.NONE = 0] = \"NONE\", e3[e3.CHANNEL_ENTER = 10102] = \"CHANNEL_ENTER\", e3[e3.CHANNEL_EXIT = 10103] = \"CHANNEL_EXIT\", e3[e3.USER_CHANNEL_MUTE = 10201] = \"USER_CHANNEL_MUTE\", e3[e3.USER_CHANNEL_UNMUTE = 10200] = \"USER_CHANNEL_UNMUTE\", e3[e3.USER_CHANNEL_BAN = 10601] = \"USER_CHANNEL_BAN\", e3[e3.USER_CHANNEL_UNBAN = 10600] = \"USER_CHANNEL_UNBAN\", e3[e3.CHANNEL_FREEZE = 10701] = \"CHANNEL_FREEZE\", e3[e3.CHANNEL_UNFREEZE = 10700] = \"CHANNEL_UNFREEZE\", e3[e3.TYPING_START = 10900] = \"TYPING_START\", e3[e3.TYPING_END = 10901] = \"TYPING_END\", e3[e3.CHANNEL_JOIN = 1e4] = \"CHANNEL_JOIN\", e3[e3.CHANNEL_LEAVE = 10001] = \"CHANNEL_LEAVE\", e3[e3.CHANNEL_OPERATOR_UPDATE = 10002] = \"CHANNEL_OPERATOR_UPDATE\", e3[e3.CHANNEL_INVITE = 10020] = \"CHANNEL_INVITE\", e3[e3.CHANNEL_ACCEPT_INVITE = 10021] = \"CHANNEL_ACCEPT_INVITE\", e3[e3.CHANNEL_DECLINE_INVITE = 10022] = \"CHANNEL_DECLINE_INVITE\", e3[e3.CHANNEL_PROP_CHANGED = 11e3] = \"CHANNEL_PROP_CHANGED\", e3[e3.CHANNEL_DELETED = 12e3] = \"CHANNEL_DELETED\", e3[e3.CHANNEL_META_DATA_CHANGED = 11100] = \"CHANNEL_META_DATA_CHANGED\", e3[e3.CHANNEL_META_COUNTERS_CHANGED = 11200] = \"CHANNEL_META_COUNTERS_CHANGED\", e3[e3.CHANNEL_HIDE = 13e3] = \"CHANNEL_HIDE\", e3[e3.CHANNEL_UNHIDE = 13001] = \"CHANNEL_UNHIDE\", e3[e3.PINNED_MESSAGE_CHANGED = 11300] = \"PINNED_MESSAGE_CHANGED\";\n}(f || (f = {}));\nvar m = function() {\n  function n2(e3) {\n    var n3;\n    this.channelUrl = e3.channel_url, this.channelType = e3.channel_type, this.category = e3.cat, this.data = null !== (n3 = e3.data) && void 0 !== n3 ? n3 : {}, this.ts = e3.ts;\n  }\n  return Object.defineProperty(n2.prototype, \"isGroupChannelEvent\", { get: function() {\n    return this.channelType === H$1.GROUP;\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"isOpenChannelEvent\", { get: function() {\n    return this.channelType === H$1.OPEN;\n  }, enumerable: false, configurable: true }), n2;\n}(), v = function(e3) {\n  function t4(n2, t5, s4) {\n    var r2 = e3.call(this, n2, \"SYEV\", s4) || this;\n    return r2.event = new m(s4), r2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), T = function(e3) {\n  function t4(n2, t5, r2) {\n    var a4 = e3.call(this, n2, t5, r2) || this, i3 = r2.data.operators, o2 = void 0 === i3 ? [] : i3;\n    return a4.operators = o2.map(function(e4) {\n      return new ls$2(a4._iid, e4);\n    }), a4;\n  }\n  return t$2(t4, e3), t4;\n}(v), H = function(e3) {\n  function t4(n2, t5, s4) {\n    var a4, i3 = this;\n    return (i3 = e3.call(this, n2, \"SYEV\", s4) || this).pinnedMessageIds = [], i3.latestPinnedMessage = null, i3.ts = 0, s4.data && (i3.pinnedMessageIds = null !== (a4 = s4.data.pinned_message_ids) && void 0 !== a4 ? a4 : [], i3.latestPinnedMessage = s4.data.latest_pinned_message ? At$1(n2, n$2({}, s4.data.latest_pinned_message)) : null), i3.ts = s4.ts, i3;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), g = function(e3) {\n  function t4(n2, t5) {\n    var s4 = e3.call(this, n2) || this;\n    return s4._logger = t5.logger, s4._sdkState = t5.sdkState, s4._sessionManager = t5.sessionManager, s4._requestQueue = t5.requestQueue, s4._dispatcher = t5.dispatcher, s4._cacheContext = t5.cacheContext, s4._channelType = t5.channelType, s4;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"_messageBroadcast\", { get: function() {\n    return na.of(this._iid);\n  }, enumerable: false, configurable: true }), t4.prototype.subscribeMessageEvent = function(e4, n2) {\n    this._messageBroadcast.subscribe(e4, n2);\n  }, t4.prototype.unsubscribeMessageEvent = function(e4) {\n    this._messageBroadcast.unsubscribe(e4);\n  }, t4.prototype.getMessageFromCache = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2, null];\n      });\n    });\n  }, t4.prototype.getExactlyMatchingMessagesForTokenFromCache = function(e4, n2, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2, []];\n      });\n    });\n  }, t4.prototype.getMessagesFromCache = function(e4, n2, t5, s4, r2, o2) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2, []];\n      });\n    });\n  }, t4.prototype.getPollMessagesFromCache = function(e4, n2, t5, s4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2, []];\n      });\n    });\n  }, t4.prototype.getCachedMessageCountBetween = function(e4, n2, t5, s4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2, 0];\n      });\n    });\n  }, t4.prototype.getUnsentMessagesFromCache = function(e4, n2) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2, []];\n      });\n    });\n  }, t4.prototype.removeFailedMessageFromCache = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e5) {\n        return [2];\n      });\n    });\n  }, t4;\n}(Jr$1), L = function(e3) {\n  function t4(n2, t5, s4) {\n    var r2, a4, i3, o2, N2 = this;\n    (N2 = e3.call(this, n2, \"ADMM\", s4) || this).message = new It$1(n2, s4);\n    var c3 = uo.of(n2).sdkState;\n    return N2.isMentioned = xe$2(N2.message.mentionType, null !== (i3 = null !== (r2 = N2.message.mentionedUserIds) && void 0 !== r2 ? r2 : null === (a4 = N2.message.mentionedUsers) || void 0 === a4 ? void 0 : a4.map(function(e4) {\n      return e4.userId;\n    })) && void 0 !== i3 ? i3 : [], c3.userId), N2.forceUpdateLastMessage = null !== (o2 = s4.force_update_last_message) && void 0 !== o2 && o2, N2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), I = function(e3) {\n  function t4(n2, t5, s4) {\n    var r2, a4, i3, o2, E3, _2 = this;\n    (_2 = e3.call(this, n2, \"AEDI\", s4) || this).message = new It$1(n2, s4);\n    var l2 = uo.of(n2).sdkState;\n    return _2.mentionCountChange = Ue$1({ mentionType: null === (r2 = s4.old_values) || void 0 === r2 ? void 0 : r2.mention_type, mentionedUserIds: null !== (i3 = null === (a4 = s4.old_values) || void 0 === a4 ? void 0 : a4.mentioned_user_ids) && void 0 !== i3 ? i3 : [] }, oe({ mentionType: _2.message.mentionType, mentionedUserIds: null !== (o2 = _2.message.mentionedUserIds) && void 0 !== o2 ? o2 : null === (E3 = _2.message.mentionedUsers) || void 0 === E3 ? void 0 : E3.map(function(e4) {\n      return e4.userId;\n    }) }), l2.userId), _2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), U = function(e3) {\n  function t4(n2, t5, s4) {\n    var r2 = e3.call(this, n2, \"MRCT\", s4) || this;\n    return r2.channelUrl = s4.channel_url, r2.channelType = s4.channel_type, r2.event = new Fe$1(s4), r2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), M = function(e3) {\n  function t4(n2, t5, s4) {\n    var r2 = e3.call(this, n2, \"MTHD\", s4) || this;\n    return r2.event = new da(n2, s4), r2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), y = function(e3) {\n  function t4(n2, t5, s4) {\n    var r2 = e3.call(this, n2, \"MCNT\", s4) || this;\n    return r2.groupChannelMemberCounts = s4.group_channels.map(function(e4) {\n      return { channelUrl: e4.channel_url, memberCount: e4.member_count, joinedMemberCount: e4.joined_member_count, updatedAt: e4.ts };\n    }), r2.openChannelMemberCounts = s4.open_channels.map(function(e4) {\n      return { channelUrl: e4.channel_url, participantCount: e4.participant_count, updatedAt: e4.ts };\n    }), r2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2), D = function(e3) {\n  function t4(n2, t5, s$12) {\n    var r2 = e3.call(this, n2, \"PEDI\", s$12) || this;\n    return r2.event = new s(n2, s$12), r2.status = No(s$12.poll.status) || s$12.poll.status, r2.channelUrl = s$12.channel_url, r2.channelType = s$12.channel_type, r2;\n  }\n  return t$2(t4, e3), t4;\n}(ze$2);\nvar Zt$1;\n!function(e3) {\n  e3.NONE = \"none\", e3.JOINED = \"joined\", e3.INVITED = \"invited\", e3.LEFT = \"left\";\n}(Zt$1 || (Zt$1 = {}));\nvar $t$1, en$1, tn$1, nn$1, sn$1, rn$1, an$1, on$1, un$1 = function(i3) {\n  function o2(e3, t4) {\n    var n2 = i3.call(this, e3, t4) || this;\n    return n2.state = null, n2.role = null, n2.isMuted = false, n2.isBlockedByMe = false, n2.isBlockingMe = false, n2.state = T$2(Zt$1, t4.state) ? t4.state : null, n2.role = T$2(V, t4.role) ? t4.role : null, \"boolean\" == typeof t4.is_muted && (n2.isMuted = t4.is_muted), \"boolean\" == typeof t4.is_blocked_by_me && (n2.isBlockedByMe = t4.is_blocked_by_me), \"boolean\" == typeof t4.is_blocking_me && (n2.isBlockingMe = t4.is_blocking_me), n2;\n  }\n  return t$2(o2, i3), o2.payloadify = function(e3) {\n    return se(oe(n$2(n$2({}, i3.payloadify.call(this, e3)), { state: e3.state, role: e3.role, is_muted: e3.isMuted, is_blocked_by_me: e3.isBlockedByMe, is_blocking_me: e3.isBlockingMe })));\n  }, o2;\n}(en$2), cn$1 = function(t4) {\n  function n2(e3, n3) {\n    var s4, r2, a4 = this;\n    return (a4 = t4.call(this, e3) || this).channelUrl = null !== (s4 = n3.channel_url) && void 0 !== s4 ? s4 : \"\", a4.channelType = null !== (r2 = n3.channel_type) && void 0 !== r2 ? r2 : H$1.GROUP, a4.member = new ls$2(a4._iid, n3.user), a4.deliveryAt = n3.ts, a4;\n  }\n  return t$2(n2, t4), n2;\n}(Jr$1);\n!function(e3) {\n  e3.ALL = \"all\", e3.PUBLIC = \"public\", e3.PRIVATE = \"private\";\n}($t$1 || ($t$1 = {})), function(e3) {\n  e3.ALL = \"all\", e3.JOINED = \"joined_only\", e3.INVITED = \"invited_only\", e3.INVITED_BY_FRIEND = \"invited_by_friend\", e3.INVITED_BY_NON_FRIEND = \"invited_by_non_friend\";\n}(en$1 || (en$1 = {})), function(e3) {\n  e3.ALL = \"all\", e3.SUPER = \"super\", e3.NON_SUPER = \"nonsuper\", e3.BROADCAST_ONLY = \"broadcast_only\", e3.EXCLUSIVE_ONLY = \"exclusive_only\";\n}(tn$1 || (tn$1 = {})), function(e3) {\n  e3.ALL = \"all\", e3.UNREAD_MESSAGE = \"unread_message\";\n}(nn$1 || (nn$1 = {})), function(e3) {\n  e3.ALL = \"all\", e3.UNHIDDEN = \"unhidden_only\", e3.HIDDEN = \"hidden_only\", e3.HIDDEN_ALLOW_AUTO_UNHIDE = \"hidden_allow_auto_unhide\", e3.HIDDEN_PREVENT_AUTO_UNHIDE = \"hidden_prevent_auto_unhide\";\n}(sn$1 || (sn$1 = {})), function(e3) {\n  e3.ALL = \"all\", e3.OPERATOR = \"operator\", e3.NONOPERATOR = \"nonoperator\";\n}(rn$1 || (rn$1 = {})), function(e3) {\n  e3.AND = \"AND\", e3.OR = \"OR\";\n}(an$1 || (an$1 = {})), function(e3) {\n  e3.MEMBER_NICKNAME = \"member_nickname\", e3.CHANNEL_NAME = \"channel_name\";\n}(on$1 || (on$1 = {}));\nvar ln$1, hn$1 = function() {\n  function e3(e4) {\n    var t4, n2, s4, r2, a4, i3, o2, u3, c3, l2, h4, d4, _2, p2, f2;\n    this._searchFilter = null, this._userIdsFilter = null, this.includeEmpty = null !== (t4 = null == e4 ? void 0 : e4.includeEmpty) && void 0 !== t4 && t4, this.nicknameContainsFilter = null !== (n2 = null == e4 ? void 0 : e4.nicknameContainsFilter) && void 0 !== n2 ? n2 : null, this.nicknameStartsWithFilter = null !== (s4 = null == e4 ? void 0 : e4.nicknameStartsWithFilter) && void 0 !== s4 ? s4 : null, this.nicknameExactMatchFilter = null !== (r2 = null == e4 ? void 0 : e4.nicknameExactMatchFilter) && void 0 !== r2 ? r2 : null, this.channelNameContainsFilter = null !== (a4 = null == e4 ? void 0 : e4.channelNameContainsFilter) && void 0 !== a4 ? a4 : \"\", this.myMemberStateFilter = null !== (i3 = null == e4 ? void 0 : e4.myMemberStateFilter) && void 0 !== i3 ? i3 : en$1.ALL, this.customTypesFilter = null !== (o2 = null == e4 ? void 0 : e4.customTypesFilter) && void 0 !== o2 ? o2 : null, this.channelUrlsFilter = null !== (u3 = null == e4 ? void 0 : e4.channelUrlsFilter) && void 0 !== u3 ? u3 : null, this.superChannelFilter = null !== (c3 = null == e4 ? void 0 : e4.superChannelFilter) && void 0 !== c3 ? c3 : tn$1.ALL, this.publicChannelFilter = null !== (l2 = null == e4 ? void 0 : e4.publicChannelFilter) && void 0 !== l2 ? l2 : $t$1.ALL, this.customTypeStartsWithFilter = null !== (h4 = null == e4 ? void 0 : e4.customTypeStartsWithFilter) && void 0 !== h4 ? h4 : null, this.unreadChannelFilter = null !== (d4 = null == e4 ? void 0 : e4.unreadChannelFilter) && void 0 !== d4 ? d4 : nn$1.ALL, this.hiddenChannelFilter = null !== (_2 = null == e4 ? void 0 : e4.hiddenChannelFilter) && void 0 !== _2 ? _2 : sn$1.UNHIDDEN, this.includeFrozen = null === (p2 = null == e4 ? void 0 : e4.includeFrozen) || void 0 === p2 || p2, (null == e4 ? void 0 : e4.createdAfter) && (this.createdAfter = e4.createdAfter), (null == e4 ? void 0 : e4.createdBefore) && (this.createdBefore = e4.createdBefore), this.includeMetaData = null === (f2 = null == e4 ? void 0 : e4.includeMetaData) || void 0 === f2 || f2;\n  }\n  return e3.prototype._isFriend = function(e4) {\n    return !(!e4 || !e4.friendDiscoveryKey && !e4.friendName);\n  }, Object.defineProperty(e3.prototype, \"searchFilter\", { get: function() {\n    return this._searchFilter;\n  }, enumerable: false, configurable: true }), e3.prototype.setSearchFilter = function(e4, t4) {\n    Array.isArray(e4) && 0 !== e4.length && \"string\" == typeof t4 && t4 && (this._searchFilter = { query: t4, fields: e4 });\n  }, Object.defineProperty(e3.prototype, \"userIdsFilter\", { get: function() {\n    return this._userIdsFilter;\n  }, enumerable: false, configurable: true }), e3.prototype.setUserIdsFilter = function(e4, t4, n2) {\n    void 0 === n2 && (n2 = an$1.AND), this._userIdsFilter = { userIds: e4, includeMode: t4, queryType: n2 };\n  }, e3.prototype.clone = function() {\n    var t4, n2 = new e3();\n    this.searchFilter && n2.setSearchFilter(this.searchFilter.fields, null !== (t4 = this.searchFilter.query) && void 0 !== t4 ? t4 : void 0), this.userIdsFilter && n2.setUserIdsFilter(this.userIdsFilter.userIds, this.userIdsFilter.includeMode, this.userIdsFilter.queryType);\n    var s4 = JSON.parse(JSON.stringify(this));\n    return Object.keys(s4).forEach(function(e4) {\n      n2[e4] = s4[e4];\n    }), n2;\n  }, e3.prototype.match = function(e4, t4) {\n    if (this._searchFilter) {\n      var n2 = this._searchFilter, s4 = n2.query, r2 = n2.fields;\n      if (s4 && r2 && r2.length > 0 && !r2.some(function(t5) {\n        switch (t5) {\n          case on$1.CHANNEL_NAME:\n            return e4.name.toLowerCase().includes(s4.toLowerCase());\n          case on$1.MEMBER_NICKNAME:\n            return e4.members.some(function(e5) {\n              return e5.nickname.toLowerCase().includes(s4.toLowerCase());\n            });\n          default:\n            return true;\n        }\n      })) return false;\n    }\n    if (this._userIdsFilter) {\n      var a4 = this._userIdsFilter, i3 = a4.userIds, o2 = a4.includeMode, u3 = a4.queryType, l2 = e4.members.map(function(e5) {\n        return e5.userId;\n      });\n      if (o2) {\n        if (i3.length > 0) switch (u3) {\n          case an$1.AND:\n            if (i3.some(function(e5) {\n              return !l2.includes(e5);\n            })) return false;\n            break;\n          case an$1.OR:\n            if (i3.every(function(e5) {\n              return !l2.includes(e5);\n            })) return false;\n        }\n      } else {\n        if (i3.includes(t4) || i3.push(t4), e4.members.length > i3.length) return false;\n        if (!D$2(i3, l2)) return false;\n      }\n    }\n    if (!this.includeEmpty && !e4.lastMessage) return false;\n    if (!this.includeFrozen && e4.isFrozen) return false;\n    if (this.customTypesFilter && this.customTypesFilter.length > 0 && !this.customTypesFilter.includes(\"*\") && !this.customTypesFilter.includes(e4.customType)) return false;\n    if (this.customTypeStartsWithFilter && !new RegExp(\"^\".concat(this.customTypeStartsWithFilter)).test(e4.customType)) return false;\n    if (this.channelNameContainsFilter && !e4.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase())) return false;\n    if (this.nicknameContainsFilter) {\n      var h4 = this.nicknameContainsFilter.toLowerCase();\n      if (!e4.members.some(function(e5) {\n        return e5.userId !== t4 && e5.nickname.toLowerCase().includes(h4);\n      })) return false;\n    }\n    if (this.nicknameStartsWithFilter) {\n      var d4 = this.nicknameStartsWithFilter.toLowerCase();\n      if (!e4.members.some(function(e5) {\n        return e5.userId !== t4 && e5.nickname.toLowerCase().startsWith(d4);\n      })) return false;\n    }\n    if (this.nicknameExactMatchFilter) {\n      var _2 = this.nicknameExactMatchFilter.toLowerCase();\n      if (!e4.members.some(function(e5) {\n        return e5.userId !== t4 && e5.nickname.toLowerCase() != _2;\n      })) return false;\n    }\n    if (this.channelUrlsFilter && this.channelUrlsFilter.length > 0 && !this.channelUrlsFilter.includes(e4.url)) return false;\n    if (this.myMemberStateFilter) switch (this.myMemberStateFilter) {\n      case en$1.ALL:\n        if (\"none\" === e4.myMemberState) return false;\n        break;\n      case en$1.JOINED:\n        if (\"joined\" !== e4.myMemberState) return false;\n        break;\n      case en$1.INVITED:\n        if (\"invited\" !== e4.myMemberState) return false;\n        break;\n      case en$1.INVITED_BY_FRIEND:\n        if (\"invited\" !== e4.myMemberState || !this._isFriend(e4.inviter)) return false;\n        break;\n      case en$1.INVITED_BY_NON_FRIEND:\n        if (\"invited\" !== e4.myMemberState || this._isFriend(e4.inviter)) return false;\n    }\n    if (this.hiddenChannelFilter) switch (this.hiddenChannelFilter) {\n      case sn$1.UNHIDDEN:\n        if (e4.isHidden || \"unhidden\" !== e4.hiddenState) return false;\n        break;\n      case sn$1.HIDDEN:\n        if (!e4.isHidden) return false;\n        break;\n      case sn$1.HIDDEN_ALLOW_AUTO_UNHIDE:\n        if (!e4.isHidden || \"hidden_allow_auto_unhide\" !== e4.hiddenState) return false;\n        break;\n      case sn$1.HIDDEN_PREVENT_AUTO_UNHIDE:\n        if (!e4.isHidden || \"hidden_prevent_auto_unhide\" !== e4.hiddenState) return false;\n    }\n    if (this.unreadChannelFilter && this.unreadChannelFilter === nn$1.UNREAD_MESSAGE) {\n      if (0 === e4.unreadMessageCount) return false;\n    }\n    if (this.publicChannelFilter) switch (this.publicChannelFilter) {\n      case $t$1.PUBLIC:\n        if (!e4.isPublic) return false;\n        break;\n      case $t$1.PRIVATE:\n        if (e4.isPublic) return false;\n    }\n    if (this.superChannelFilter) switch (this.superChannelFilter) {\n      case tn$1.SUPER:\n        if (!e4.isSuper) return false;\n        break;\n      case tn$1.NON_SUPER:\n        if (e4.isSuper) return false;\n    }\n    return !(this.createdAfter && e4.createdAt < this.createdAfter) && !(this.createdBefore && e4.createdAt > this.createdBefore);\n  }, e3;\n}(), dn$1 = function(t4) {\n  function n2(e3, n3) {\n    var s4 = n3.sdkState, r2 = n3.cacheContext, a4 = t4.call(this, e3) || this;\n    return a4._channels = /* @__PURE__ */ new Map(), a4._sdkState = s4, a4._cacheContext = r2, a4;\n  }\n  return t$2(n2, t4), Object.defineProperty(n2.prototype, \"collection\", { get: function() {\n    var e3 = this._cacheContext.nestdb;\n    return cs$2(!!e3).throw(b$2.databaseError), e3.collection(Yr);\n  }, enumerable: false, configurable: true }), Object.defineProperty(n2.prototype, \"localCacheEnabled\", { get: function() {\n    return this._cacheContext.localCacheEnabled && !!this.collection;\n  }, enumerable: false, configurable: true }), n2.prototype._serialize = function(e3, t5) {\n    return void 0 === t5 && (t5 = 0), n$2(n$2({}, e3.serialize()), { lastMessageUpdatedAt: e3.lastMessage ? e3.lastMessage.createdAt : 0, syncIndex: t5 });\n  }, n2.prototype._deserialize = function(e3) {\n    return ys.of(this._iid).buildGroupChannelFromSerializedData(e3);\n  }, Object.defineProperty(n2.prototype, \"channels\", { get: function() {\n    return c([], a$1(this._channels.values()), false);\n  }, enumerable: false, configurable: true }), n2.prototype.isCachedInMemory = function(e3) {\n    return this._channels.has(e3);\n  }, n2.prototype.filterOffsetChanged = function(e3) {\n    var t5 = this;\n    return e3.filter(function(e4) {\n      if (t5._channels.has(e4.url)) return t5._channels.get(e4.url).messageOffsetTimestamp < e4.messageOffsetTimestamp;\n    });\n  }, n2.prototype.get = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._channels.has(e3) ? [3, 3] : this.localCacheEnabled ? [4, this.collection.getByKey(e3)] : [3, 2];\n          case 1:\n            if (t5 = s4.sent()) return n3 = this._deserialize(t5), this._channels.set(e3, n3), [2, n3];\n            s4.label = 2;\n          case 2:\n            return [2, void 0];\n          case 3:\n            return [2, this._channels.get(e3)];\n        }\n      });\n    });\n  }, n2.prototype.fetch = function(e3) {\n    var t5 = e3.token, n3 = e3.limit, s4 = void 0 === n3 ? Wr : n3, r2 = e3.backward, a4 = void 0 !== r2 && r2, i3 = e3.filter, o2 = void 0 === i3 ? new hn$1() : i3, u3 = e3.order, c3 = void 0 === u3 ? E.LATEST_LAST_MESSAGE : u3, l2 = e3.borderlineChannelUrl;\n    return r$1(this, void 0, void 0, function() {\n      var e4, n4, r3, i4, u4, h4 = this;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return this.localCacheEnabled ? (e4 = !!l2, n4 = b$1(c3), r3 = { where: function(n5) {\n              if (t5) switch (c3) {\n                case E.CHANNEL_NAME_ALPHABETICAL:\n                  if (!a4 && n5.name.localeCompare(t5) < 0 || a4 && n5.name.localeCompare(t5) > 0) return false;\n                  break;\n                case E.CHRONOLOGICAL:\n                  if (!a4 && n5.createdAt > t5 || a4 && n5.createdAt < t5) return false;\n                  break;\n                case E.LATEST_LAST_MESSAGE:\n                  if (!a4 && n5.lastMessageUpdatedAt > t5 || a4 && n5.lastMessageUpdatedAt < t5) return false;\n              }\n              return e4 && l2 && l2 === n5.url ? (e4 = false, false) : !e4 && o2.match(h4._deserialize(n5), h4._sdkState.userId);\n            }, index: n4, backward: a4 }, [4, this.collection.query(r3)]) : [3, 3];\n          case 1:\n            return [4, d4.sent().fetch({ limit: s4 })];\n          case 2:\n            return i4 = d4.sent(), (u4 = i4.map(function(e5) {\n              return h4._deserialize(e5);\n            })).forEach(function(e5) {\n              !o2.includeMetaData && e5.cachedMetaData && e5._clearCachedMetaData(), h4._channels.has(e5.url) || h4._channels.set(e5.url, e5);\n            }), [2, u4];\n          case 3:\n            return [2, []];\n        }\n      });\n    });\n  }, n2.prototype.upsert = function(e3, t5) {\n    return r$1(this, void 0, void 0, function() {\n      var n3, s4, r2, a4 = this;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            if (n3 = [], e3.forEach(function(e4) {\n              if (a4._channels.has(e4.url)) {\n                var s5 = a4._channels.get(e4.url);\n                if (s5._pinnedMessagesUpdatedAt < e4._pinnedMessagesUpdatedAt && (s5._pinnedMessagesUpdatedAt = e4._pinnedMessagesUpdatedAt), s5._messageCollectionLastAccessedAt > e4._messageCollectionLastAccessedAt && (e4._messageCollectionLastAccessedAt = s5._messageCollectionLastAccessedAt), e4.cachedMetaData instanceof Map && e4.cachedMetaData.size > 0 && t5) s5._updateCachedMetaData(e4.cachedMetaData, t5).isUpdated || Object.assign(e4, { _cachedMetaData: s5.cachedMetaData });\n                s5._update(e4), n3.push(s5);\n              } else a4._channels.set(e4.url, e4), n3.push(e4);\n            }), !this.localCacheEnabled) return [3, 2];\n            for (s4 = [], r2 = 0; r2 < n3.length; r2++) s4.push(this._serialize(n3[r2], r2));\n            return [4, this.collection.upsertMany(s4)];\n          case 1:\n            i3.sent(), i3.label = 2;\n          case 2:\n            return [2, n3];\n        }\n      });\n    });\n  }, n2.prototype.remove = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n3, s4, r2, a4, i3;\n      return s$1(this, function(o$1) {\n        switch (o$1.label) {\n          case 0:\n            o$1.trys.push([0, 5, 6, 7]), t5 = o(e3), n3 = t5.next(), o$1.label = 1;\n          case 1:\n            return n3.done ? [3, 4] : (s4 = n3.value, this._channels.delete(s4), this.localCacheEnabled ? [4, this.collection.remove(s4)] : [3, 3]);\n          case 2:\n            o$1.sent(), o$1.label = 3;\n          case 3:\n            return n3 = t5.next(), [3, 1];\n          case 4:\n            return [3, 7];\n          case 5:\n            return r2 = o$1.sent(), a4 = { error: r2 }, [3, 7];\n          case 6:\n            try {\n              n3 && !n3.done && (i3 = t5.return) && i3.call(t5);\n            } finally {\n              if (a4) throw a4.error;\n            }\n            return [7];\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return this.clearMemoryCache(), this.localCacheEnabled ? [4, this.collection.clear()] : [3, 2];\n          case 1:\n            e3.sent(), e3.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.clearMemoryCache = function() {\n    this._channels.clear();\n  }, n2.prototype._setBlockStateOfAllChannels = function(e3, t5, n3) {\n    return r$1(this, void 0, void 0, function() {\n      var s4, r2, a4, i3, o$1, u3, c3, l2, h4, d4, _2, p2, m4, g2, E3, C2, y4, M4, b3;\n      return s$1(this, function(f2) {\n        switch (f2.label) {\n          case 0:\n            if (s4 = [], e3 === this._sdkState.userId) try {\n              for (r2 = o(this._channels.values()), a4 = r2.next(); !a4.done; a4 = r2.next()) {\n                l2 = a4.value;\n                try {\n                  for (g2 = void 0, i3 = o(l2.members), o$1 = i3.next(); !o$1.done; o$1 = i3.next()) if ((_2 = o$1.value).userId === t5) {\n                    _2.isBlockedByMe = n3, s4.push(l2);\n                    break;\n                  }\n                } catch (e4) {\n                  g2 = { error: e4 };\n                } finally {\n                  try {\n                    o$1 && !o$1.done && (E3 = i3.return) && E3.call(i3);\n                  } finally {\n                    if (g2) throw g2.error;\n                  }\n                }\n              }\n            } catch (e4) {\n              p2 = { error: e4 };\n            } finally {\n              try {\n                a4 && !a4.done && (m4 = r2.return) && m4.call(r2);\n              } finally {\n                if (p2) throw p2.error;\n              }\n            }\n            else if (t5 === this._sdkState.userId) try {\n              for (u3 = o(this._channels.values()), c3 = u3.next(); !c3.done; c3 = u3.next()) {\n                l2 = c3.value;\n                try {\n                  for (M4 = void 0, h4 = o(l2.members), d4 = h4.next(); !d4.done; d4 = h4.next()) if ((_2 = d4.value).userId === e3) {\n                    _2.isBlockingMe = n3, s4.push(l2);\n                    break;\n                  }\n                } catch (e4) {\n                  M4 = { error: e4 };\n                } finally {\n                  try {\n                    d4 && !d4.done && (b3 = h4.return) && b3.call(h4);\n                  } finally {\n                    if (M4) throw M4.error;\n                  }\n                }\n              }\n            } catch (e4) {\n              C2 = { error: e4 };\n            } finally {\n              try {\n                c3 && !c3.done && (y4 = u3.return) && y4.call(u3);\n              } finally {\n                if (C2) throw C2.error;\n              }\n            }\n            return s4.length > 0 ? [4, this.upsert(s4)] : [3, 2];\n          case 1:\n            f2.sent(), f2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, n2.prototype.block = function(e3, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return [4, this._setBlockStateOfAllChannels(e3, t5, true)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.unblock = function(e3, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n3) {\n        switch (n3.label) {\n          case 0:\n            return [4, this._setBlockStateOfAllChannels(e3, t5, false)];\n          case 1:\n            return n3.sent(), [2];\n        }\n      });\n    });\n  }, n2.prototype.markAsRead = function(e3, t5) {\n    return void 0 === t5 && (t5 = c([], a$1(this._channels.keys()), false)), r$1(this, void 0, void 0, function() {\n      var n3, s4, r2, a4, i3, o$1, u3, c3;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            n3 = [], l2.label = 1;\n          case 1:\n            l2.trys.push([1, 6, 7, 8]), s4 = o(t5), r2 = s4.next(), l2.label = 2;\n          case 2:\n            return r2.done ? [3, 5] : (a4 = r2.value, [4, this.get(a4)]);\n          case 3:\n            (null == (i3 = l2.sent()) ? void 0 : i3._updateUnreadMemberState(this._sdkState.userId, e3)) && (i3._updateUnreadCount(0, 0), n3.push(i3)), l2.label = 4;\n          case 4:\n            return r2 = s4.next(), [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return o$1 = l2.sent(), u3 = { error: o$1 }, [3, 8];\n          case 7:\n            try {\n              r2 && !r2.done && (c3 = s4.return) && c3.call(s4);\n            } finally {\n              if (u3) throw u3.error;\n            }\n            return [7];\n          case 8:\n            return n3.length > 0 ? [4, this.upsert(n3)] : [3, 10];\n          case 9:\n            l2.sent(), l2.label = 10;\n          case 10:\n            return [2];\n        }\n      });\n    });\n  }, n2;\n}(Jr$1), _n$1 = { invitedUserIds: void 0, channelUrl: void 0, coverUrl: void 0, coverImage: void 0, isDistinct: void 0, isSuper: void 0, isBroadcast: void 0, isExclusive: void 0, isPublic: void 0, isDiscoverable: void 0, isStrict: void 0, isEphemeral: void 0, accessCode: void 0, name: void 0, data: void 0, customType: void 0, operatorUserIds: void 0, messageSurvivalSeconds: void 0 }, pn$1 = function(e3) {\n  return C$1(\"string\", e3.invitedUserIds, true) && S$1(\"string\", e3.channelUrl, true) && S$1(\"string\", e3.coverUrl, true) && (k(e3.coverImage) || S$1(\"string\", e3.coverImage, true)) && S$1(\"boolean\", e3.isDistinct, true) && S$1(\"boolean\", e3.isSuper, true) && S$1(\"boolean\", e3.isBroadcast, true) && S$1(\"boolean\", e3.isExclusive, true) && S$1(\"boolean\", e3.isPublic, true) && S$1(\"boolean\", e3.isStrict, true) && S$1(\"boolean\", e3.isDiscoverable, true) && S$1(\"boolean\", e3.isEphemeral, true) && S$1(\"string\", e3.accessCode, true) && S$1(\"string\", e3.name, true) && S$1(\"string\", e3.data, true) && S$1(\"string\", e3.customType, true) && C$1(\"string\", e3.operatorUserIds, true) && S$1(\"number\", e3.messageSurvivalSeconds, true);\n}, fn$1 = { customTypes: void 0, includeEmpty: false, includeFrozen: true, includeMetaData: true, includeChatNotification: false }, vn$1 = function(e3) {\n  return C$1(\"string\", e3.customTypes, true) && S$1(\"boolean\", e3.includeEmpty, true) && S$1(\"boolean\", e3.includeFrozen, true) && S$1(\"boolean\", e3.includeMetaData, true) && S$1(\"boolean\", e3.includeChatNotification, true);\n}, mn$1 = { myMemberStateFilter: en$1.ALL }, gn$1 = function(e3) {\n  return T$2(en$1, e3.myMemberStateFilter);\n};\n!function(e3) {\n  e3.GROUP_CHANNEL_UNREAD_MENTION_COUNT = \"group_channel_unread_mention_count\", e3.NONSUPER_UNREAD_MENTION_COUNT = \"non_super_group_channel_unread_mention_count\", e3.SUPER_UNREAD_MENTION_COUNT = \"super_group_channel_unread_mention_count\", e3.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT = \"group_channel_unread_message_count\", e3.NONSUPER_UNREAD_MESSAGE_COUNT = \"non_super_group_channel_unread_message_count\", e3.SUPER_UNREAD_MESSAGE_COUNT = \"super_group_channel_unread_message_count\", e3.GROUP_CHANNEL_INVITATION_COUNT = \"group_channel_invitation_count\", e3.NONSUPER_INVITATION_COUNT = \"non_super_group_channel_invitation_count\", e3.SUPER_INVITATION_COUNT = \"super_group_channel_invitation_count\";\n}(ln$1 || (ln$1 = {}));\nvar En$1 = { keys: [ln$1.GROUP_CHANNEL_UNREAD_MENTION_COUNT, ln$1.NONSUPER_UNREAD_MENTION_COUNT, ln$1.SUPER_UNREAD_MENTION_COUNT, ln$1.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT, ln$1.NONSUPER_UNREAD_MESSAGE_COUNT, ln$1.SUPER_UNREAD_MESSAGE_COUNT, ln$1.GROUP_CHANNEL_INVITATION_COUNT, ln$1.NONSUPER_INVITATION_COUNT, ln$1.SUPER_INVITATION_COUNT], customTypeFilters: void 0, customTypesFilter: void 0 }, Cn$1 = { channelCustomTypesFilter: void 0, superChannelFilter: tn$1.ALL }, yn$1 = function(e3) {\n  return C$1(\"string\", e3.channelCustomTypesFilter, true) && T$2(tn$1, e3.superChannelFilter);\n}, Mn$1 = { channelUrl: void 0, scheduledStatus: void 0, messageTypeFilter: j.ALL }, bn$1 = n$2({}, no), Nn$1 = function(e3) {\n  return e3.startsWith(\"EVENT_\") || e3 === no.SYNC_CHANNEL_CHANGELOGS || e3 === no.REFRESH_CHANNEL;\n}, Un$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channels, s4 = e3.context, r2 = e3.isWebSocketEventComing, a4 = void 0 !== r2 && r2, i3 = e3.ts, o2 = t4.call(this) || this;\n    return o2.channels = n3, o2.context = s4, o2.isWebSocketEventComing = a4, o2.ts = i3, o2;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), Sn$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channelUrls, s4 = e3.context, r2 = e3.isWebSocketEventComing, a4 = void 0 !== r2 && r2, i3 = t4.call(this) || this;\n    return i3.channelUrls = n3, i3.context = s4, i3.isWebSocketEventComing = a4, i3;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), Tn$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channel, s4 = t4.call(this) || this;\n    return s4.channel = n3, s4;\n  }\n  return t$2(n2, t4), n2;\n}(re$1), An$1 = function() {\n  function e3(e4) {\n    var t4 = e4.groupChannelCache, n2 = e4.userInfoCache, s4 = e4.messageCache, r2 = e4.unsentMessageCache, a4 = e4.dispatcher, i3 = this;\n    this._observers = /* @__PURE__ */ new Map(), a4.on(function(e5) {\n      return r$1(i3, void 0, void 0, function() {\n        var a5, i4, o$1, u3, c3, l2, h4, d4, _2, m4, g2, E3, C2, M4, N2, U2, S4, T3, A2 = this;\n        return s$1(this, function(I3) {\n          switch (I3.label) {\n            case 0:\n              if (!(e5 instanceof Un$1)) return [3, 19];\n              if (a5 = e5.channels, C2 = e5.context, M4 = e5.isWebSocketEventComing, i4 = a5.filter(function(e6) {\n                return e6 instanceof fr;\n              }), C2.source !== no.EVENT_CHANNEL_RESET_HISTORY && C2.source !== no.EVENT_CHANNEL_HIDDEN) return [3, 9];\n              I3.label = 1;\n            case 1:\n              I3.trys.push([1, 6, 7, 8]), o$1 = o(i4), u3 = o$1.next(), I3.label = 2;\n            case 2:\n              return u3.done ? [3, 5] : (_2 = u3.value, [4, s4.removeUnderOffset(_2.url, _2.messageOffsetTimestamp)]);\n            case 3:\n              I3.sent(), I3.label = 4;\n            case 4:\n              return u3 = o$1.next(), [3, 2];\n            case 5:\n              return [3, 8];\n            case 6:\n              return c3 = I3.sent(), N2 = { error: c3 }, [3, 8];\n            case 7:\n              try {\n                u3 && !u3.done && (U2 = o$1.return) && U2.call(o$1);\n              } finally {\n                if (N2) throw N2.error;\n              }\n              return [7];\n            case 8:\n              return [3, 17];\n            case 9:\n              l2 = t4.filterOffsetChanged(i4), I3.label = 10;\n            case 10:\n              I3.trys.push([10, 15, 16, 17]), h4 = o(l2), d4 = h4.next(), I3.label = 11;\n            case 11:\n              return d4.done ? [3, 14] : (_2 = d4.value, [4, s4.removeUnderOffset(_2.url, _2.messageOffsetTimestamp)]);\n            case 12:\n              I3.sent(), I3.label = 13;\n            case 13:\n              return d4 = h4.next(), [3, 11];\n            case 14:\n              return [3, 17];\n            case 15:\n              return m4 = I3.sent(), S4 = { error: m4 }, [3, 17];\n            case 16:\n              try {\n                d4 && !d4.done && (T3 = h4.return) && T3.call(h4);\n              } finally {\n                if (S4) throw S4.error;\n              }\n              return [7];\n            case 17:\n              return [4, t4.upsert(i4, e5.ts)];\n            case 18:\n              return g2 = I3.sent(), M4 || this._broadcastUpdateEvent(g2, C2), [3, 25];\n            case 19:\n              return e5 instanceof Sn$1 ? (E3 = e5.channelUrls, C2 = e5.context, M4 = e5.isWebSocketEventComing, [4, t4.remove(E3)]) : [3, 22];\n            case 20:\n              return I3.sent(), [4, Dr$1(function() {\n                return r$1(A2, void 0, void 0, function() {\n                  var e6, t5, n3, a6, i5, o$12;\n                  return s$1(this, function(u4) {\n                    switch (u4.label) {\n                      case 0:\n                        u4.trys.push([0, 6, 7, 8]), e6 = o(E3), t5 = e6.next(), u4.label = 1;\n                      case 1:\n                        return t5.done ? [3, 5] : (n3 = t5.value, [4, s4.removeMessagesOfChannel(n3)]);\n                      case 2:\n                        return u4.sent(), [4, r2.removeMessagesOfChannel(n3)];\n                      case 3:\n                        u4.sent(), u4.label = 4;\n                      case 4:\n                        return t5 = e6.next(), [3, 1];\n                      case 5:\n                        return [3, 8];\n                      case 6:\n                        return a6 = u4.sent(), i5 = { error: a6 }, [3, 8];\n                      case 7:\n                        try {\n                          t5 && !t5.done && (o$12 = e6.return) && o$12.call(e6);\n                        } finally {\n                          if (i5) throw i5.error;\n                        }\n                        return [7];\n                      case 8:\n                        return [2];\n                    }\n                  });\n                });\n              })];\n            case 21:\n              return I3.sent(), M4 || this._broadcastRemoveEvent(E3, C2), [3, 25];\n            case 22:\n              return e5 instanceof T$1 ? [4, t4.fetch({ token: Number.MAX_SAFE_INTEGER, limit: Number.MAX_SAFE_INTEGER })] : [3, 25];\n            case 23:\n              return I3.sent(), [4, n2.fetch({ limit: Number.MAX_SAFE_INTEGER })];\n            case 24:\n              I3.sent(), I3.label = 25;\n            case 25:\n              return [2];\n          }\n        });\n      });\n    });\n  }\n  return e3.prototype._broadcastUpdateEvent = function(e4, t4) {\n    var n2, s4;\n    try {\n      for (var r2 = o(this._observers.values()), a4 = r2.next(); !a4.done; a4 = r2.next()) {\n        var i3 = a4.value;\n        i3.onUpdate && i3.onUpdate(e4, t4);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        a4 && !a4.done && (s4 = r2.return) && s4.call(r2);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, e3.prototype._broadcastRemoveEvent = function(e4, t4) {\n    var n2, s4;\n    try {\n      for (var r2 = o(this._observers.values()), a4 = r2.next(); !a4.done; a4 = r2.next()) {\n        var i3 = a4.value;\n        i3.onRemove && i3.onRemove(e4, t4);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        a4 && !a4.done && (s4 = r2.return) && s4.call(r2);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n  }, e3.prototype.subscribe = function(e4, t4) {\n    this._observers.set(e4, t4);\n  }, e3.prototype.unsubscribe = function(e4) {\n    this._observers.delete(e4);\n  }, e3.prototype.unsubscribeAll = function() {\n    this._observers.clear();\n  }, e3;\n}(), In$1 = function(r2) {\n  function a4(e3) {\n    var a5 = e3.userId, i3 = e3.ts, o2 = e3.token, u3 = e3.filter, c3 = e3.includeChatNotification, l2 = void 0 !== c3 && c3, h4 = r2.call(this) || this, d4 = n$2(n$2({}, fn$1), u3), _2 = d4.customTypes, p2 = d4.includeEmpty, f2 = d4.includeFrozen;\n    return h4.method = ae.GET, h4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(a5), \"/my_group_channels/changelogs\"), h4.params = se(oe({ show_delivery_receipt: true, show_member: true, show_read_receipt: true, change_ts: i3 || null, token: o2, custom_types: _2, show_empty: p2, show_frozen: f2, include_chat_notification: l2 })), h4;\n  }\n  return t$2(a4, r2), a4;\n}(Fe$2), wn$1 = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.updatedChannels = n3.updated.map(function(t5) {\n      return new fr(e3, Object.assign(t5, { ts: n3.ts }));\n    }), s4.deletedChannelUrls = n3.deleted, s4.hasMore = n3.has_more, s4.token = n3.next, s4.ts = n3.ts, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Ln$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channelUrl, s4 = e3.isInternalCall, r2 = e3.showLatestMessage, a4 = t4.call(this) || this;\n    return a4.method = ae.GET, a4.path = \"\".concat(s4 ? _e$1 : de, \"/\").concat(encodeURIComponent(n3)), a4.params = { show_member: true, show_read_receipt: true, show_delivery_receipt: true, show_latest_message: null != r2 && r2 }, a4;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Dn$1 = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.channel = new fr(e3, n3), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), xn = { includeEmpty: false, myMemberStateFilter: en$1.ALL, unreadChannelFilter: nn$1.ALL, superChannelFilter: tn$1.ALL, publicChannelFilter: $t$1.ALL, hiddenChannelFilter: sn$1.ALL, userIdsFilter: { queryType: an$1.AND }, order: E.LATEST_LAST_MESSAGE }, Rn = function(n2) {\n  function s4(e3) {\n    var s5 = this, r2 = e3.userId, a4 = e3.token, i3 = e3.limit, o2 = e3.order, u3 = e3.includeEmpty, c3 = e3.myMemberStateFilter, l2 = e3.superChannelFilter, h4 = e3.publicChannelFilter, d4 = e3.unreadChannelFilter, _2 = e3.nicknameContainsFilter, p2 = e3.nicknameStartsWithFilter, f2 = e3.nicknameExactMatchFilter, v2 = e3.channelNameContainsFilter, m4 = e3.channelUrlsFilter, g2 = e3.customTypesFilter, E3 = e3.customTypeStartsWithFilter, C2 = e3.hiddenChannelFilter, y4 = e3.metadataOrderKeyFilter, M4 = e3.metadataKey, b3 = e3.metadataValues, S4 = e3.metadataValueStartsWith, T3 = e3.includeFrozen, A2 = e3.includeMetaData, I3 = e3.searchFilter, w3 = e3.userIdsFilter, L3 = e3.includeChatNotification, D3 = void 0 !== L3 && L3, x3 = e3.includeLeftChannel, R3 = void 0 !== x3 && x3, F2 = e3.createdAfter, k3 = e3.createdBefore;\n    return (s5 = n2.call(this) || this).method = ae.GET, s5.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(r2), \"/my_group_channels\"), s5.params = se({ token: a4, limit: i3, order: null != o2 ? o2 : xn.order, show_member: true, show_read_receipt: true, show_delivery_receipt: true, show_empty: null != u3 ? u3 : xn.includeEmpty, member_state_filter: null != c3 ? c3 : xn.myMemberStateFilter, super_mode: null != l2 ? l2 : xn.superChannelFilter, public_mode: null != h4 ? h4 : xn.publicChannelFilter, unread_filter: null != d4 ? d4 : xn.unreadChannelFilter, members_nickname_contains: _2, members_nickname_startswith: p2, members_nickname: f2, name_contains: v2, channel_urls: m4, custom_types: g2, custom_type_startswith: E3, hidden_mode: C2, metadata_order_key: y4, metadata_key: M4, metadata_values: b3, metadata_value_startswith: S4, show_frozen: T3, show_metadata: A2, include_chat_notification: D3, include_left_channel: R3, created_after: F2, created_before: k3 }), I3 && I3.query && I3.fields && (s5.params.search_query = I3.query, s5.params.search_fields = I3.fields), w3 && w3.userIds && w3.userIds.length > 0 && (w3.includeMode ? (s5.params.members_include_in = w3.userIds, s5.params.query_type = w3.queryType.toUpperCase()) : s5.params.members_exactly_in = w3.userIds), s5;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Fn = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    s4.channels = [];\n    var r2 = n3.next, a4 = n3.channels, i3 = n3.ts;\n    return s4.token = r2, a4 && a4.length > 0 && (s4.channels = a4.map(function(t5) {\n      return t5.ts = i3, new fr(e3, t5);\n    })), s4.ts = null != i3 ? i3 : 0, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), kn$1 = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = e3.filter, r2 = t4.call(this) || this, a4 = s4.myMemberStateFilter;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/group_channel_count\"), r2.params = { state: null != a4 ? a4 : en$1.ALL }, r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Pn$1 = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.groupChannelCount = n3.group_channel_count, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), On$1 = function(n2) {\n  function s4(e3) {\n    var s5 = e3.userId, r2 = e3.filter, a4 = n2.call(this) || this, i3 = r2.keys, o2 = r2.customTypeFilters, u3 = r2.customTypesFilter;\n    return a4.method = ae.GET, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(s5), \"/unread_item_count\"), a4.params = se({ item_keys: i3, custom_types: null != u3 ? u3 : o2 }), a4;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Hn = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return \"number\" == typeof n3[ln$1.GROUP_CHANNEL_UNREAD_MENTION_COUNT] && (s4.groupChannelUnreadMentionCount = n3[ln$1.GROUP_CHANNEL_UNREAD_MENTION_COUNT]), \"number\" == typeof n3[ln$1.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT] && (s4.groupChannelUnreadMessageCount = n3[ln$1.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]), \"number\" == typeof n3[ln$1.GROUP_CHANNEL_INVITATION_COUNT] && (s4.groupChannelInvitationCount = n3[ln$1.GROUP_CHANNEL_INVITATION_COUNT]), \"number\" == typeof n3[ln$1.SUPER_UNREAD_MENTION_COUNT] && (s4.superGroupChannelUnreadMentionCount = n3[ln$1.SUPER_UNREAD_MENTION_COUNT]), \"number\" == typeof n3[ln$1.SUPER_UNREAD_MESSAGE_COUNT] && (s4.superGroupChannelUnreadMessageCount = n3[ln$1.SUPER_UNREAD_MESSAGE_COUNT]), \"number\" == typeof n3[ln$1.SUPER_INVITATION_COUNT] && (s4.superGroupChannelInvitationCount = n3[ln$1.SUPER_INVITATION_COUNT]), \"number\" == typeof n3[ln$1.NONSUPER_UNREAD_MENTION_COUNT] && (s4.nonSuperGroupChannelUnreadMentionCount = n3[ln$1.NONSUPER_UNREAD_MENTION_COUNT]), \"number\" == typeof n3[ln$1.NONSUPER_UNREAD_MESSAGE_COUNT] && (s4.nonSuperGroupChannelUnreadMessageCount = n3[ln$1.NONSUPER_UNREAD_MESSAGE_COUNT]), \"number\" == typeof n3[ln$1.NONSUPER_INVITATION_COUNT] && (s4.nonSuperGroupChannelInvitationCount = n3[ln$1.NONSUPER_INVITATION_COUNT]), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Gn = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = t4.call(this) || this;\n    return s4.method = ae.GET, s4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/unread_channel_count\"), s4;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Vn = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.unreadCount = n3.unread_count, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Bn = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = e3.filter, r2 = e3.includeFeedChannel, a4 = void 0 !== r2 && r2, i3 = t4.call(this) || this, o2 = s4.channelCustomTypesFilter, u3 = s4.superChannelFilter;\n    return i3.method = ae.GET, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/unread_message_count\"), i3.params = { super_mode: null != u3 ? u3 : tn$1.ALL, custom_types: o2, include_feed_channel: a4 }, i3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), qn = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.unreadCount = n3.unread_count, s4.unreadFeedCount = n3.unread_feed_count, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), zn = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channelUrl, s4 = e3.scheduledStatus, r2 = e3.messageTypeFilter, a4 = t4.call(this) || this;\n    return a4.method = ae.GET, a4.path = \"\".concat(ye$1, \"/count\"), a4.params = { channel_url: n3, status: jn(s4) }, r2 && (a4.params.message_type = r2), a4;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Wn = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.count = n3.count, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), jn = function(e3) {\n  if (!e3) return [];\n  var t4 = [];\n  return e3.forEach(function(e4) {\n    switch (e4) {\n      case dt.PENDING:\n        t4.push(ht.PENDING);\n        break;\n      case dt.SENT:\n        t4.push(ht.IN_QUEUE), t4.push(ht.SENT);\n        break;\n      case dt.CANCELED:\n        t4.push(ht.CANCELED);\n        break;\n      case dt.FAILED:\n        t4.push(ht.FAILED);\n    }\n  }), t4;\n}, Qn = function(n2) {\n  function s4(e3) {\n    var s5 = this, r2 = e3.userId, a4 = e3.channelUrl, i3 = e3.coverUrl, o2 = e3.coverImage, u3 = e3.isDistinct, c$1 = e3.isSuper, l2 = e3.isBroadcast, h4 = e3.isPublic, p2 = e3.isExclusive, f2 = e3.isDiscoverable, v2 = e3.isStrict, m4 = e3.isEphemeral, g2 = e3.accessCode, E3 = e3.name, C2 = e3.data, y4 = e3.customType, M4 = e3.messageSurvivalSeconds, b3 = e3.invitedUserIds, U2 = e3.operatorUserIds;\n    return (s5 = n2.call(this) || this).method = ae.POST, s5.path = de, s5.params = se({ user_ids: c([r2], a$1(null != b3 ? b3 : []), false).filter(function(e4, t4, n3) {\n      return t4 === n3.indexOf(e4);\n    }), channel_url: a4, cover_url: i3, cover_file: o2, is_distinct: u3, is_super: c$1, is_broadcast: l2, is_exclusive: p2, is_public: h4, is_discoverable: f2, strict: v2, is_ephemeral: m4, access_code: g2, name: E3, data: C2, custom_type: y4, operator_ids: U2, message_survival_seconds: M4 }), s5;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Yn = function(t4) {\n  function n2(e3, n3) {\n    var s4, r2 = this;\n    return (r2 = t4.call(this, e3, n3) || this).channel = new fr(e3, n3), r2.isCreated = null === (s4 = n3.is_created) || void 0 === s4 || s4, r2;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Kn = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = e3.channelUrls, r2 = t4.call(this) || this;\n    return r2.method = ae.PUT, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/mark_as_read_all\"), r2.params = { channel_urls: s4 }, r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(t4) {\n  function n2() {\n    return null !== t4 && t4.apply(this, arguments) || this;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar Jn = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.userId, a4 = e3.accessCode;\n    return (n3 = t4.call(this) || this).method = ae.PUT, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/join\"), n3.params = { user_id: r2, access_code: a4 }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Xn = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.channel = new fr(e3, n3), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Zn = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, n3, s4) || this, a4 = s4.data, i3 = a4.member_count, o2 = void 0 === i3 ? 0 : i3, u3 = a4.joined_member_count, c3 = void 0 === u3 ? 0 : u3, l2 = a4.users, h4 = void 0 === l2 ? null : l2;\n    return r2.memberCount = o2, r2.joinedMemberCount = c3, r2.members = Array.isArray(h4) ? h4.map(function(t5) {\n      return new un$1(e3, t5);\n    }) : [new un$1(e3, s4.data)], r2;\n  }\n  return t$2(n2, t4), n2;\n}(v), $n = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.userId, a4 = e3.shouldRemoveOperatorStatus;\n    return (n3 = t4.call(this) || this).method = ae.PUT, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/leave\"), n3.params = { user_id: r2, should_remove_operator_status: a4 }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(t4) {\n  function n2(e3, n3) {\n    return t4.call(this, e3, n3) || this;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar es = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, n3, s4) || this, a4 = s4.data, i3 = a4.member_count, o2 = void 0 === i3 ? 0 : i3, u3 = a4.joined_member_count, c3 = void 0 === u3 ? 0 : u3;\n    return r2.memberCount = o2, r2.joinedMemberCount = c3, r2.member = new un$1(r2._iid, s4.data), r2;\n  }\n  return t$2(n2, t4), n2;\n}(v), ts = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.userIds;\n    return (n3 = t4.call(this) || this).method = ae.POST, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/invite\"), n3.params = { user_ids: r2 }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), ns = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.channel = new fr(e3, n3), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), ss = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, n3, s4) || this;\n    r2.inviter = null;\n    var a4 = s4.data, i3 = a4.member_count, u3 = void 0 === i3 ? 0 : i3, c3 = a4.joined_member_count, l2 = void 0 === c3 ? 0 : c3, h4 = a4.inviter, d4 = a4.invitees, _2 = void 0 === d4 ? [] : d4;\n    return r2.memberCount = u3, r2.joinedMemberCount = l2, h4 && Object.keys(h4).length > 0 && (r2.inviter = new ls$2(e3, h4)), r2.invitees = _2.map(function(t5) {\n      return new un$1(e3, t5);\n    }), r2;\n  }\n  return t$2(n2, t4), n2;\n}(v), rs = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.userId;\n    return (n3 = t4.call(this) || this).method = ae.PUT, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/decline\"), n3.params = { user_id: r2 }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.channel = new fr(e3, n3), s4.channel.myMemberState = Zt$1.NONE, s4;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar as = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, n3, s4) || this, a4 = s4.data, i3 = a4.member_count, u3 = a4.joined_member_count, c3 = a4.inviter, l2 = a4.invitee;\n    return r2.memberCount = null != i3 ? i3 : 0, r2.joinedMemberCount = null != u3 ? u3 : 0, r2.inviter = new ls$2(e3, c3), r2.invitee = new un$1(e3, l2), r2;\n  }\n  return t$2(n2, t4), n2;\n}(v), is = { hidePreviousMessages: false, allowAutoUnhide: true }, os = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.userId, a4 = e3.hidePreviousMessages, i3 = e3.allowAutoUnhide;\n    return (n3 = t4.call(this) || this).method = ae.PUT, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/hide\"), n3.params = { user_id: r2, hide_previous_messages: null != a4 ? a4 : is.hidePreviousMessages, allow_auto_unhide: null != i3 ? i3 : is.allowAutoUnhide }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), us = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this, r2 = n3.ts_message_offset;\n    return s4.messageOffsetTimestamp = r2, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), cs = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2, a4, i3, o2 = this;\n    return (o2 = t4.call(this, e3, \"SYEV\", s4) || this).allowAutoUnhide = null, o2.hidePreviousMessages = null, o2.messageOffsetTimestamp = null, s4.data && (o2.allowAutoUnhide = null !== (r2 = s4.data.allow_auto_unhide) && void 0 !== r2 ? r2 : null, o2.hidePreviousMessages = null !== (a4 = s4.data.hide_previous_messages) && void 0 !== a4 ? a4 : null), o2.messageOffsetTimestamp = null !== (i3 = s4.ts_message_offset) && void 0 !== i3 ? i3 : null, o2;\n  }\n  return t$2(n2, t4), n2;\n}(ze$2), ls = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channelUrl, s4 = e3.time;\n    return t4.call(this, { code: \"TPST\", ackRequired: false, payload: { channel_url: n3, time: s4 } }) || this;\n  }\n  return t$2(n2, t4), n2;\n}(Ge$1), hs = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, \"SYEV\", s4) || this;\n    return r2.user = new ls$2(e3, s4.data), r2;\n  }\n  return t$2(n2, t4), n2;\n}(ze$2), ds = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channelUrl, s4 = e3.time;\n    return t4.call(this, { code: \"TPEN\", ackRequired: false, payload: { channel_url: n3, time: s4 } }) || this;\n  }\n  return t$2(n2, t4), n2;\n}(Ge$1), _s = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, \"SYEV\", s4) || this;\n    return r2.user = new ls$2(e3, s4.data), r2;\n  }\n  return t$2(n2, t4), n2;\n}(ze$2), ps = function(t4) {\n  function n2(e3) {\n    var n3 = e3.channelUrl, s4 = e3.messageId;\n    return t4.call(this, { code: \"MACK\", ackRequired: false, payload: { channel_url: n3, msg_id: s4 } }) || this;\n  }\n  return t$2(n2, t4), n2;\n}(Ge$1), fs = function(t4) {\n  function a4(e3, n2) {\n    var s4, r2, a5, i3, o2, u3, c3, l2, h4, d4, _2, p2, f2, v2, m4, g2, E$12, C2, y4, M4, b3, N2, U2, S4 = this;\n    return (S4 = t4.call(this, e3, n2) || this).includeEmpty = false, S4.includeFrozen = true, S4.includeMetaData = true, S4.includeChatNotification = false, S4.channelUrlsFilter = null, S4.customTypesFilter = null, S4.customTypeStartsWithFilter = null, S4.nicknameContainsFilter = null, S4.nicknameStartsWithFilter = null, S4.nicknameExactMatchFilter = null, S4.channelNameContainsFilter = \"\", S4.myMemberStateFilter = en$1.ALL, S4.unreadChannelFilter = nn$1.ALL, S4.superChannelFilter = tn$1.ALL, S4.publicChannelFilter = $t$1.ALL, S4.hiddenChannelFilter = sn$1.UNHIDDEN, S4.searchFilter = { fields: [], query: null }, S4.userIdsFilter = { userIds: [], includeMode: true, queryType: an$1.AND }, S4.metadataKey = null, S4.metadataValues = null, S4.metadataOrderKeyFilter = null, S4.metadataValueStartsWith = null, S4.order = E.LATEST_LAST_MESSAGE, S4.includeEmpty = null !== (s4 = n2.includeEmpty) && void 0 !== s4 && s4, S4.includeFrozen = null === (r2 = n2.includeFrozen) || void 0 === r2 || r2, S4.includeMetaData = null === (a5 = n2.includeMetaData) || void 0 === a5 || a5, S4.includeChatNotification = null !== (i3 = n2.includeChatNotification) && void 0 !== i3 && i3, S4.channelUrlsFilter = null !== (o2 = n2.channelUrlsFilter) && void 0 !== o2 ? o2 : null, S4.customTypesFilter = null !== (u3 = n2.customTypesFilter) && void 0 !== u3 ? u3 : null, S4.customTypeStartsWithFilter = null !== (c3 = n2.customTypeStartsWithFilter) && void 0 !== c3 ? c3 : \"\", S4.nicknameContainsFilter = null !== (l2 = n2.nicknameContainsFilter) && void 0 !== l2 ? l2 : null, S4.nicknameStartsWithFilter = null !== (h4 = n2.nicknameStartsWithFilter) && void 0 !== h4 ? h4 : null, S4.nicknameExactMatchFilter = null !== (d4 = n2.nicknameExactMatchFilter) && void 0 !== d4 ? d4 : null, S4.channelNameContainsFilter = null !== (_2 = n2.channelNameContainsFilter) && void 0 !== _2 ? _2 : \"\", S4.myMemberStateFilter = null !== (p2 = n2.myMemberStateFilter) && void 0 !== p2 ? p2 : en$1.ALL, S4.unreadChannelFilter = null !== (f2 = n2.unreadChannelFilter) && void 0 !== f2 ? f2 : nn$1.ALL, S4.superChannelFilter = null !== (v2 = n2.superChannelFilter) && void 0 !== v2 ? v2 : tn$1.ALL, S4.publicChannelFilter = null !== (m4 = n2.publicChannelFilter) && void 0 !== m4 ? m4 : $t$1.ALL, S4.hiddenChannelFilter = null !== (g2 = n2.hiddenChannelFilter) && void 0 !== g2 ? g2 : sn$1.UNHIDDEN, S4.searchFilter = null !== (E$12 = n2.searchFilter) && void 0 !== E$12 ? E$12 : { fields: [], query: null }, S4.userIdsFilter = null !== (C2 = n2.userIdsFilter) && void 0 !== C2 ? C2 : { userIds: [], includeMode: true, queryType: an$1.AND }, S4.metadataKey = null !== (y4 = n2.metadataKey) && void 0 !== y4 ? y4 : null, S4.metadataValues = null !== (M4 = n2.metadataValues) && void 0 !== M4 ? M4 : null, S4.metadataOrderKeyFilter = null !== (b3 = n2.metadataOrderKeyFilter) && void 0 !== b3 ? b3 : null, S4.metadataValueStartsWith = null !== (N2 = n2.metadataValueStartsWith) && void 0 !== N2 ? N2 : null, S4.order = null !== (U2 = n2.order) && void 0 !== U2 ? U2 : E.LATEST_LAST_MESSAGE, n2.createdAfter && (S4.createdAfter = n2.createdAfter), n2.createdBefore && (S4.createdBefore = n2.createdBefore), S4;\n  }\n  return t$2(a4, t4), a4.prototype._validate = function() {\n    return t4.prototype._validate.call(this) && S$1(\"boolean\", this.includeEmpty) && S$1(\"boolean\", this.includeFrozen) && S$1(\"boolean\", this.includeMetaData) && S$1(\"string\", this.channelNameContainsFilter) && C$1(\"string\", this.channelUrlsFilter, true) && C$1(\"string\", this.customTypesFilter, true) && S$1(\"string\", this.customTypeStartsWithFilter) && S$1(\"string\", this.nicknameContainsFilter, true) && S$1(\"string\", this.nicknameStartsWithFilter, true) && S$1(\"string\", this.nicknameExactMatchFilter, true) && T$2(en$1, this.myMemberStateFilter) && T$2(tn$1, this.superChannelFilter) && T$2($t$1, this.publicChannelFilter) && T$2(nn$1, this.unreadChannelFilter) && T$2(sn$1, this.hiddenChannelFilter) && C$1(on$1, this.searchFilter.fields) && S$1(\"string\", this.searchFilter.query, true) && C$1(\"string\", this.userIdsFilter.userIds) && S$1(\"boolean\", this.userIdsFilter.includeMode) && T$2(an$1, this.userIdsFilter.queryType) && T$2(E, this.order) && S$1(\"string\", this.metadataOrderKeyFilter, true) && S$1(\"string\", this.metadataKey, true) && C$1(\"string\", this.metadataValues, true) && S$1(\"string\", this.metadataValueStartsWith, true) && A(this.createdAfter) && A(this.createdBefore);\n  }, a4.prototype.serialize = function() {\n    return os$2(this);\n  }, a4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, r2;\n      return s$1(this, function(a5) {\n        switch (a5.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, [4, ys.of(this._iid).getMyGroupChannels(this._token, oe(n$2({}, this)), this.limit, no.REQUEST_CHANNEL, true)]) : [3, 2] : [3, 5];\n          case 1:\n            return e3 = a5.sent(), t5 = e3.channels, r2 = e3.token, this._token = r2, this._hasNext = !!r2, this._isLoading = false, [2, t5];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, a4;\n}(Oo), vs = function(n2) {\n  function s4(e3) {\n    var s5 = e3.channelUrl, r2 = e3.userId, a4 = n2.call(this) || this;\n    return a4.method = ae.PUT, a4.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s5), \"/messages/mark_as_delivered\"), a4.params = se({ user_id: r2 }), a4;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2);\n!function(t4) {\n  function n2() {\n    return null !== t4 && t4.apply(this, arguments) || this;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar ms, gs = function(t4) {\n  function n2(e3, n3, s4) {\n    var r2 = t4.call(this, e3, \"DLVR\", s4) || this;\n    return r2.channelUrl = s4.channel_url, r2.deliveredStateUpdate = s4.updated, r2;\n  }\n  return t$2(n2, t4), n2;\n}(ze$2), Es = function() {\n  function e3(e4) {\n    var t4 = e4.top, n2 = void 0 === t4 ? Number.MAX_SAFE_INTEGER : t4, s4 = e4.bottom, r2 = void 0 === s4 ? 0 : s4;\n    this.top = n2, this.bottom = r2;\n  }\n  return e3.prototype.includes = function() {\n    for (var e4 = this, t4 = [], n2 = 0; n2 < arguments.length; n2++) t4[n2] = arguments[n2];\n    return t4.every(function(t5) {\n      return e4.top <= t5 && t5 <= e4.bottom;\n    });\n  }, e3.prototype.overlap = function(e4) {\n    return this.includes(e4.top) || this.includes(e4.bottom);\n  }, e3.prototype.intersect = function() {\n    for (var e4 = this, t4 = [], n2 = 0; n2 < arguments.length; n2++) t4[n2] = arguments[n2];\n    return t4.some(function(t5) {\n      return e4.top <= t5 && t5 <= e4.bottom;\n    });\n  }, e3.prototype.extends = function() {\n    for (var e4 = [], t4 = 0; t4 < arguments.length; t4++) e4[t4] = arguments[t4];\n    this.top = Math.min.apply(Math, c([this.top], a$1(e4), false)), this.bottom = Math.max.apply(Math, c([this.bottom], a$1(e4), false));\n  }, e3;\n}(), Cs = {}, ys = function(u3) {\n  function c$1(e3, t4) {\n    var n2, r2 = this;\n    return (r2 = u3.call(this, e3, n$2(n$2({}, t4), { channelType: H$1.GROUP })) || this)._leftChannels = /* @__PURE__ */ new Map(), r2._markAsReadAllLastSentAt = 0, r2._forceDisableMack = null !== (n2 = t4.forceDisableMack) && void 0 !== n2 && n2, r2._groupChannelHandlers = /* @__PURE__ */ new Map(), r2._groupChannelCache = new dn$1(r2._iid, { sdkState: t4.sdkState, cacheContext: t4.cacheContext }), r2._userInfoCache = new ia(r2._iid, { sdkState: t4.sdkState, cacheContext: t4.cacheContext }), r2._groupChannelBroadcast = new An$1({ dispatcher: t4.dispatcher, groupChannelCache: r2._groupChannelCache, userInfoCache: r2._userInfoCache, messageCache: Zs$1.of(r2._iid), unsentMessageCache: Js$1.of(r2._iid) }), setInterval(function() {\n      var e4, t5, n3 = function(e5) {\n        e5.invalidateTypingStatus() && (r2._dispatcher.dispatch(new Un$1({ channels: [e5], context: { source: no.EVENT_CHANNEL_TYPING_STATUS_UPDATE } })), r2._groupChannelHandlers.forEach(function(t6) {\n          t6.onTypingStatusUpdated && t6.onTypingStatusUpdated(e5);\n        }));\n      };\n      try {\n        for (var s4 = o(r2._groupChannelCache.channels), a4 = s4.next(); !a4.done; a4 = s4.next()) {\n          n3(a4.value);\n        }\n      } catch (t6) {\n        e4 = { error: t6 };\n      } finally {\n        try {\n          a4 && !a4.done && (t5 = s4.return) && t5.call(s4);\n        } finally {\n          if (e4) throw e4.error;\n        }\n      }\n    }, 1e3), r2._dispatcher.on(function(e4) {\n      if (e4 instanceof ze$2) r2._handleEvent(e4).catch(function(e5) {\n        if (v$2(e5) && \"foreground\" === r2._sdkState.appState) throw e5;\n      });\n      else if (e4 instanceof y$1) r$1(r2, void 0, void 0, function() {\n        var t6, n4;\n        return s$1(this, function(s5) {\n          switch (s5.label) {\n            case 0:\n              return t6 = e4.message, [4, this.getChannelFromCache(t6.channelUrl)];\n            case 1:\n              return (n4 = s5.sent()) && !n4.isFrozen ? [3, 3] : [4, this.getChannelWithoutCache(t6.channelUrl, true)];\n            case 2:\n              n4 = s5.sent(), s5.label = 3;\n            case 3:\n              return n4.isFrozen || (t6 instanceof wt ? n4._autoResendUserMessage(t6) : t6 instanceof Nt$1 && n4._autoResendFileMessage(t6)), [2];\n          }\n        });\n      });\n      else if (e4 instanceof S) r2.reduceDBSize();\n      else if (e4 instanceof P) {\n        var t5 = e4.appConfigsInfo, n3 = e4.configTs, s4 = t5.message_purge_offset;\n        s4 && r2._messageDataRetention(s4), r2._dispatcher.dispatch(new m$1({ configTs: n3 }));\n      } else e4 instanceof lt && r$1(r2, void 0, void 0, function() {\n        var t6, n4, s5, r3, a4, o$1 = this;\n        return s$1(this, function(u4) {\n          switch (u4.label) {\n            case 0:\n              return t6 = e4.channelUrl, n4 = e4.channelType, s5 = e4.parentMessage, r3 = new da(this._iid, { channel_type: H$1.GROUP, channel_url: t6, parent_message_id: s5.messageId, thread_info: De$2.payloadify(s5.threadInfo) }), n4 !== H$1.GROUP ? [3, 2] : [4, this.getChannel(t6, true)];\n            case 1:\n              a4 = u4.sent(), kr$1(function() {\n                return r$1(o$1, void 0, void 0, function() {\n                  var e5, t7, n5, s6, i3;\n                  return s$1(this, function(o$12) {\n                    try {\n                      for (e5 = o(this._groupChannelHandlers.values()), t7 = e5.next(); !t7.done; t7 = e5.next()) (n5 = t7.value).onThreadInfoUpdated && n5.onThreadInfoUpdated(a4, r3);\n                    } catch (e6) {\n                      s6 = { error: e6 };\n                    } finally {\n                      try {\n                        t7 && !t7.done && (i3 = e5.return) && i3.call(e5);\n                      } finally {\n                        if (s6) throw s6.error;\n                      }\n                    }\n                    return [2];\n                  });\n                });\n              }), u4.label = 2;\n            case 2:\n              return [2];\n          }\n        });\n      });\n    }), Cs[e3] || (Cs[e3] = r2), r2;\n  }\n  return t$2(c$1, u3), Object.defineProperty(c$1.prototype, \"_messageCache\", { get: function() {\n    return Zs$1.of(this._iid);\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"_unsentMessageCache\", { get: function() {\n    return Js$1.of(this._iid);\n  }, enumerable: false, configurable: true }), c$1.of = function(e3) {\n    return Cs[e3] || (Cs[e3] = new c$1(e3, uo.of(e3))), Cs[e3];\n  }, c$1.clear = function(e3) {\n    Cs[e3] && delete Cs[e3];\n  }, Object.defineProperty(c$1.prototype, \"handlers\", { get: function() {\n    return c([], a$1(this._groupChannelHandlers.values()), false);\n  }, enumerable: false, configurable: true }), c$1.prototype.buildGroupChannelFromSerializedData = function(e3) {\n    var t4 = as$2(e3);\n    return new fr(this._iid, fr.payloadify(t4));\n  }, c$1.prototype.buildGroupChannelListQueryFromSerializedData = function(e3) {\n    var t4 = as$2(e3);\n    return new fs(this._iid, t4);\n  }, c$1.prototype.buildMemberFromSerializedData = function(e3) {\n    var t4 = as$2(e3);\n    return new un$1(this._iid, un$1.payloadify(t4));\n  }, c$1.prototype.getChannelFromCache = function(e3) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._groupChannelCache.get(e3)];\n          case 1:\n            return [2, null !== (t4 = n2.sent()) && void 0 !== t4 ? t4 : null];\n        }\n      });\n    });\n  }, c$1.prototype.getChannelsFromCache = function(e3, t4, n2, s4, r2) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return [4, this._groupChannelCache.fetch({ token: e3, filter: t4, order: n2, limit: s4, borderlineChannelUrl: r2 })];\n          case 1:\n            return [2, a4.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.upsertChannelsToCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._groupChannelCache.upsert(e3)];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.removeChannelsFromCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._groupChannelCache.remove(e3)];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.clearChannelsFromCache = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return [4, this._groupChannelCache.clear()];\n          case 1:\n            return e3.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.reduceDBSize = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2, a4, i3, o2, u4, c3, l2, h4, d4, _2, p2;\n      return s$1(this, function(f2) {\n        switch (f2.label) {\n          case 0:\n            return e3 = Zs$1.of(this._iid), t4 = uo.of(this._iid).cacheContext, n2 = t4.localCacheConfig, s4 = t4.nestdb, t4.localCacheEnabled && s4 && s4.state == Os$1.OPENED ? (r2 = 1024 * n2.maxSize * 1024, [4, s4.estimateUsage()]) : [2];\n          case 1:\n            if ((a4 = f2.sent()) < r2) return [2];\n            i3 = [], o2 = this._groupChannelCache.channels, u4 = {}, d4 = 0, f2.label = 2;\n          case 2:\n            return d4 < o2.length ? [4, this.getMessagesFromCache(o2[d4].url, 0, \"prev\", new qs$1())] : [3, 5];\n          case 3:\n            c3 = f2.sent(), u4[o2[d4].url] = JSON.stringify(c3).length, l2 = new F({ channel: o2[d4], cachedMessageCount: c3.length }), i3.push(l2), f2.label = 4;\n          case 4:\n            return d4++, [3, 2];\n          case 5:\n            h4 = i3.sort(n2.clearOrderComparator), d4 = 0, f2.label = 6;\n          case 6:\n            return d4 < h4.length ? [4, e3.removeMessagesOfChannel(h4[d4].channel.url)] : [3, 10];\n          case 7:\n            return f2.sent(), [4, e3._getGroupChannelPreferenceSize(h4[d4].channel.url)];\n          case 8:\n            if (_2 = f2.sent(), p2 = u4[h4[d4].channel.url] + _2, (a4 -= p2) < r2) return [3, 10];\n            f2.label = 9;\n          case 9:\n            return d4++, [3, 6];\n          case 10:\n            return [4, ia.of(this._iid).clear()];\n          case 11:\n            return f2.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype._messageDataRetention = function(e3) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      var n2, s4, r2, a4, i3, o$1, u4, c3, l2, h4, d4 = this;\n      return s$1(this, function(_2) {\n        switch (_2.label) {\n          case 0:\n            n2 = [], s4 = Zs$1.of(this._iid), r2 = function(r3) {\n              var i4, o$12;\n              return s$1(this, function(u5) {\n                switch (u5.label) {\n                  case 0:\n                    return i4 = r3.customType, o$12 = null !== (t4 = e3[i4]) && void 0 !== t4 ? t4 : e3.global, [4, s4.removeUnderOffset(r3.url, o$12, true)];\n                  case 1:\n                    return u5.sent(), r3.lastMessage && r3.lastMessage.createdAt <= o$12 && (r3.lastMessage = null, n2.push(r3), kr$1(function() {\n                      return r$1(d4, void 0, void 0, function() {\n                        var e4, t5, n3, s5, a5;\n                        return s$1(this, function(i5) {\n                          try {\n                            for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelChanged && n3.onChannelChanged(r3);\n                          } catch (e5) {\n                            s5 = { error: e5 };\n                          } finally {\n                            try {\n                              t5 && !t5.done && (a5 = e4.return) && a5.call(e4);\n                            } finally {\n                              if (s5) throw s5.error;\n                            }\n                          }\n                          return [2];\n                        });\n                      });\n                    })), a4._dispatcher.dispatch(new go({ channelUrl: r3.url, messageDeletionTimestamp: o$12, source: no.EVENT_MESSAGE_OFFSET_UPDATED })), [2];\n                }\n              });\n            }, a4 = this, _2.label = 1;\n          case 1:\n            _2.trys.push([1, 6, 7, 8]), i3 = o(this._groupChannelCache.channels), o$1 = i3.next(), _2.label = 2;\n          case 2:\n            return o$1.done ? [3, 5] : (u4 = o$1.value, [5, r2(u4)]);\n          case 3:\n            _2.sent(), _2.label = 4;\n          case 4:\n            return o$1 = i3.next(), [3, 2];\n          case 5:\n            return [3, 8];\n          case 6:\n            return c3 = _2.sent(), l2 = { error: c3 }, [3, 8];\n          case 7:\n            try {\n              o$1 && !o$1.done && (h4 = i3.return) && h4.call(i3);\n            } finally {\n              if (l2) throw l2.error;\n            }\n            return [7];\n          case 8:\n            return n2.length > 0 && this._dispatcher.dispatch(new Un$1({ channels: n2, context: { source: no.EVENT_CHANNEL_UPDATED } })), [2];\n        }\n      });\n    });\n  }, c$1.prototype._isSuperGroupMackDisabled = function(e3) {\n    var t4 = uo.of(this._iid).appInfo;\n    return !(!e3.isSuper || e3.isBroadcast || !(null == t4 ? void 0 : t4.disableSuperGroupMack));\n  }, c$1.prototype._getCachedUserInfo = function(e3) {\n    return this._userInfoCache.getUserInfoFromCache(e3);\n  }, c$1.prototype._upsertCachedUserInfo = function(e3, t4) {\n    uo.of(this._iid).useMemberInfoInMessage && this._userInfoCache.upsert(e3, t4);\n  }, c$1.prototype._handleEvent = function(e3) {\n    var t4, n2;\n    return r$1(this, void 0, void 0, function() {\n      var s4, r2, u4, c3, l2, h4, d4, _2, m4, g2, E3, C2, M$12, N2, U$12, S4, T$12, A2, I$12, w3, L$22, D$12, x3, R3, F2, P2, G3, V$1, J2, Z2, $2, ee2, te2, ne2, se2, re2, ae2, ie2, oe2, ue2, ce2, le2, he2, de2, _e2, pe2, fe2, ve2, me2, ge2, Ee2, Ce2, ye2, Me2, be2, Ne2, Ue2, Se2, Te2, Ae2, Ie2, we2, Le2, De2, xe2, Je2, Xe2, Ze2, $e2, et2, tt2, nt2, st2, rt2, at2, it2, ot2, ut2, ct2, lt2, ht2, dt2, _t$12, pt2, ft2, vt2, mt2, gt2, Et2, Ct2, yt$12, Mt2, bt2, Nt2, Ut2, St2, Tt2, At2, It2, wt2, Lt2, Dt2, xt2, Rt2, Ft2, Ht2, Gt2, Bt2, $t2, en2, tn2, nn2, sn2, rn2, an2, on2, un2, cn2, ln2, hn2, dn2, _n2, pn2, fn2, vn2, mn2, gn2, En2, Cn2, yn2, Mn2, bn2, Nn2, Tn2, An2, In2, wn2, Ln2, Dn2, xn2, Rn2, Fn2, kn2, Pn2, On2, Hn2, Gn2, Vn2, Bn2, qn2, zn2, Wn2, jn2, Qn2, Yn2, Kn2, Jn2, Xn2, $n2, ts2, ns2, rs2, is2 = this;\n      return s$1(this, function(os2) {\n        switch (os2.label) {\n          case 0:\n            switch (os2.trys.push([0, 88, , 89]), e3.code) {\n              case \"MESG\":\n              case \"FILE\":\n              case \"ADMM\":\n              case \"BRDM\":\n                return [3, 1];\n              case \"MEDI\":\n              case \"FEDI\":\n              case \"AEDI\":\n                return [3, 4];\n              case \"DELM\":\n                return [3, 7];\n              case \"READ\":\n                return [3, 10];\n              case \"DLVR\":\n                return [3, 13];\n              case \"MRCT\":\n                return [3, 15];\n              case \"MTHD\":\n                return [3, 27];\n              case \"MCNT\":\n                return [3, 31];\n              case \"PEDI\":\n                return [3, 40];\n              case \"VOTE\":\n                return [3, 43];\n              case \"SYEV\":\n                return [3, 46];\n              case \"USEV\":\n                return [3, 86];\n            }\n            return [3, 87];\n          case 1:\n            return _2 = null, \"MESG\" === e3.code ? _2 = e3.as(Ir) : \"FILE\" === e3.code ? _2 = e3.as(Pt$1) : \"ADMM\" !== e3.code && \"BRDM\" != e3.code || (_2 = e3.as(L)), _2 ? (s4 = _2.message, r2 = _2.isMentioned, u4 = _2.forceUpdateLastMessage, s4.channelType !== H$1.GROUP ? [3, 3] : ($2 = this._groupChannelCache.isCachedInMemory(s4.channelUrl), F2 = s4 instanceof _t && s4.sender.userId === this._sdkState.userId, [4, this.getChannel(s4.channelUrl, true)])) : [3, 3];\n          case 2:\n            if (c3 = os2.sent(), E3 = uo.of(this._iid).useMemberInfoInMessage, this._forceDisableMack || this._isSuperGroupMackDisabled(c3) || s4 instanceof It$1 || F2 || Dr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4;\n                return s$1(this, function(t5) {\n                  switch (t5.label) {\n                    case 0:\n                      return e4 = new ps(s4), [4, this._requestQueue.send(e4)];\n                    case 1:\n                      return t5.sent(), [2];\n                  }\n                });\n              });\n            }), s4 instanceof _t) {\n              l2 = s4.sender, c3.isSuper && this._upsertCachedUserInfo(l2, s4.createdAt);\n              try {\n                for (h4 = o(c3.members), d4 = h4.next(); !d4.done; d4 = h4.next()) if ((Ht2 = d4.value).userId === s4.sender.userId) {\n                  E3 && (Ht2.nickname = s4.sender.nickname, Ht2.plainProfileUrl = s4.sender.plainProfileUrl, Ht2.metaData = s4.sender.metaData, Ht2.isBlockedByMe = s4.sender.isBlockedByMe);\n                  break;\n                }\n              } catch (e4) {\n                On2 = { error: e4 };\n              } finally {\n                try {\n                  d4 && !d4.done && (Hn2 = h4.return) && Hn2.call(h4);\n                } finally {\n                  if (On2) throw On2.error;\n                }\n              }\n              E3 && r2 && (null === (t4 = s4.mentionedUsers) || void 0 === t4 || t4.forEach(function(e4) {\n                var t5, n3;\n                try {\n                  for (var s5 = o(c3.members), r3 = s5.next(); !r3.done; r3 = s5.next()) {\n                    var a4 = r3.value;\n                    if (e4.userId === a4.userId) {\n                      a4.nickname = e4.nickname, a4.plainProfileUrl = e4.plainProfileUrl, a4.metaData = e4.metaData;\n                      break;\n                    }\n                  }\n                } catch (e5) {\n                  t5 = { error: e5 };\n                } finally {\n                  try {\n                    r3 && !r3.done && (n3 = s5.return) && n3.call(s5);\n                  } finally {\n                    if (t5) throw t5.error;\n                  }\n                }\n              })), F2 && (T$12 = this._sessionManager.currentUser) && (T$12.nickname = s4.sender.nickname, T$12.plainProfileUrl = s4.sender.plainProfileUrl, T$12.metaData = s4.sender.metaData);\n            }\n            s4.silent && !F2 || (c3.isEphemeral || $2) && (c3._updateLastMessage(s4), F2 || c3._shouldUpdateUnreadCountWith(s4) && c3._updateUnreadCount(c3.unreadMessageCount + 1, c3.unreadMentionCount + (r2 ? 1 : 0))), u4 && c3._updateLastMessage(s4), this._dispatcher.dispatch(new Un$1({ channels: [c3], context: { source: no.EVENT_MESSAGE_RECEIVED } })), s4.silent && !F2 || kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelChanged && n3.onChannelChanged(c3);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), this._dispatcher.dispatch(new po({ messages: [s4], source: no.EVENT_MESSAGE_RECEIVED })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, a4, i3;\n                return s$1(this, function(o$1) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onMessageReceived && n3.onMessageReceived(c3, s4), r2 && n3.onMentionReceived && n3.onMentionReceived(c3, s4);\n                  } catch (e5) {\n                    a4 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (i3 = e4.return) && i3.call(e4);\n                    } finally {\n                      if (a4) throw a4.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 3;\n          case 3:\n            return [3, 87];\n          case 4:\n            return _2 = null, \"MEDI\" === e3.code ? _2 = e3.as(Tr) : \"FEDI\" === e3.code ? _2 = e3.as(Mr) : \"AEDI\" === e3.code && (_2 = e3.as(I)), _2 ? (m4 = _2.message, g2 = _2.mentionCountChange, E3 = uo.of(this._iid).useMemberInfoInMessage, m4.threadInfo && (m4.threadInfo.unreadReplyCount = void 0), m4.channelType !== H$1.GROUP ? [3, 6] : ($2 = this._groupChannelCache.isCachedInMemory(m4.channelUrl), [4, this.getChannel(m4.channelUrl, true)])) : [3, 6];\n          case 5:\n            if (C2 = os2.sent(), F2 = false, m4 instanceof _t) {\n              F2 = m4.sender.userId === this._sdkState.userId, C2.isSuper && this._upsertCachedUserInfo(m4.sender, m4.updatedAt);\n              try {\n                for (M$12 = o(C2.members), N2 = M$12.next(); !N2.done; N2 = M$12.next()) if ((Ht2 = N2.value).userId === m4.sender.userId) {\n                  E3 && (Ht2.nickname = m4.sender.nickname, Ht2.plainProfileUrl = m4.sender.plainProfileUrl, Ht2.metaData = m4.sender.metaData, Ht2.isBlockedByMe = m4.sender.isBlockedByMe);\n                  break;\n                }\n              } catch (e4) {\n                Gn2 = { error: e4 };\n              } finally {\n                try {\n                  N2 && !N2.done && (Vn2 = M$12.return) && Vn2.call(M$12);\n                } finally {\n                  if (Gn2) throw Gn2.error;\n                }\n              }\n            }\n            U$12 = false, F2 ? (S4 = m4.sender, (T$12 = this._sessionManager.currentUser) && (T$12.nickname = S4.nickname, T$12.plainProfileUrl = S4.plainProfileUrl, T$12.metaData = S4.metaData)) : C2.isReadMessage(m4) || 0 !== g2 && !m4.silent && $2 && (C2._updateUnreadCount(C2.unreadMessageCount, C2.unreadMentionCount + g2), U$12 = true), C2._updateLastMessage(m4) ? U$12 = true : (null === (n2 = C2.lastMessage) || void 0 === n2 ? void 0 : n2.isIdentical(m4)) && ($2 ? C2._updateLastMessage(m4) && (U$12 = true) : U$12 = true), A2 = false, C2.lastPinnedMessage && C2.lastPinnedMessage.messageId === m4.messageId && (C2.lastPinnedMessage = m4, U$12 = true, A2 = true), U$12 && (this._dispatcher.dispatch(new Un$1({ channels: [C2], context: { source: A2 ? no.EVENT_PINNED_MESSAGE_UPDATED : no.EVENT_MESSAGE_UPDATED } })), m4.silent && !F2 || kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelChanged && n3.onChannelChanged(C2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), A2 && kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onPinnedMessageUpdated && n3.onPinnedMessageUpdated(C2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            })), this._dispatcher.dispatch(new po({ messages: [m4], source: no.EVENT_MESSAGE_UPDATED })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onMessageUpdated && n3.onMessageUpdated(C2, m4), g2 > 0 && n3.onMentionReceived && n3.onMentionReceived(C2, m4);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 6;\n          case 6:\n            return [3, 87];\n          case 7:\n            return I$12 = e3.as(at$1), Ie2 = I$12.channelUrl, we2 = I$12.channelType, w3 = I$12.messageId, L$22 = I$12.silent, D$12 = I$12.messageCreatedAt, x3 = I$12.senderId, we2 !== H$1.GROUP ? [3, 9] : [4, this.getChannel(Ie2, true)];\n          case 8:\n            R3 = os2.sent(), F2 = x3 === this._sdkState.userId, L$22 || F2 || D$12 > 0 && R3.myLastRead < D$12 && R3.unreadMessageCount > 0 && R3._updateUnreadCount(R3.unreadMessageCount - 1, 0), this._dispatcher.dispatch(new Eo({ messageIds: [w3], source: no.EVENT_MESSAGE_DELETED })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onMessageDeleted && n3.onMessageDeleted(R3, w3);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 9;\n          case 9:\n            return [3, 87];\n          case 10:\n            return (P2 = e3.as(Ze$1).readStatus).channelType !== H$1.GROUP ? [3, 12] : ($2 = this._groupChannelCache.isCachedInMemory(P2.channelUrl), [4, this.getChannel(P2.channelUrl, true)]);\n          case 11:\n            G3 = os2.sent(), $2 && G3._updateUnreadMemberState(P2.reader.userId, P2.readAt), P2.reader.userId === this._sdkState.userId ? $2 ? (G3.unreadMessageCount > 0 || G3.unreadMentionCount > 0) && (G3._updateUnreadCount(0, 0), this._dispatcher.dispatch(new Un$1({ channels: [G3], context: { source: no.EVENT_CHANNEL_READ } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelChanged && n3.onChannelChanged(G3);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            })) : 0 !== G3.unreadMessageCount && 0 !== G3.unreadMentionCount || (this._dispatcher.dispatch(new Un$1({ channels: [G3], context: { source: no.EVENT_CHANNEL_READ } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelChanged && n3.onChannelChanged(G3);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            })) : (this._dispatcher.dispatch(new Un$1({ channels: [G3], context: { source: no.EVENT_CHANNEL_READ } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onUnreadMemberStatusUpdated && n3.onUnreadMemberStatusUpdated(G3);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            })), os2.label = 12;\n          case 12:\n            return [3, 87];\n          case 13:\n            return V$1 = e3.as(gs), Ie2 = V$1.channelUrl, J2 = V$1.deliveredStateUpdate, Z2 = void 0 === J2 ? {} : J2, $2 = this._groupChannelCache.isCachedInMemory(Ie2), [4, this.getChannel(Ie2, true)];\n          case 14:\n            return ee2 = os2.sent(), $2 && Object.keys(Z2).forEach(function(e4) {\n              ee2._updateUndeliveredMemberState(e4, Z2[e4]);\n            }), Object.keys(Z2).some(function(e4) {\n              return e4 !== is2._sdkState.userId;\n            }) && (this._dispatcher.dispatch(new Un$1({ channels: [ee2], context: { source: no.EVENT_CHANNEL_DELIVERED } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onUndeliveredMemberStatusUpdated && n3.onUndeliveredMemberStatusUpdated(ee2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            })), [3, 87];\n          case 15:\n            return te2 = e3.as(U), Ie2 = te2.channelUrl, we2 = te2.channelType, ne2 = te2.event, we2 !== H$1.GROUP ? [3, 26] : [4, this.getChannel(Ie2, true)];\n          case 16:\n            return se2 = os2.sent(), [4, this.getMessageFromCache(ne2.messageId)];\n          case 17:\n            if (de2 = os2.sent(), !se2.isSuper) return [3, 25];\n            os2.label = 18;\n          case 18:\n            os2.trys.push([18, 23, 24, 25]), re2 = o(Object.keys(ne2._sampledUserInfoList)), ae2 = re2.next(), os2.label = 19;\n          case 19:\n            return ae2.done ? [3, 22] : (ie2 = ae2.value, [4, this._userInfoCache.get(ie2)]);\n          case 20:\n            (oe2 = os2.sent()) ? (oe2.plainProfileUrl = ne2._sampledUserInfoList[ie2].profile_url, oe2.nickname = ne2._sampledUserInfoList[ie2].nickname, this._upsertCachedUserInfo(oe2, ne2.updatedAt)) : (ue2 = new ls$2(this._iid, { user_id: ie2, nickname: ne2._sampledUserInfoList[ie2].nickname, profile_url: ne2._sampledUserInfoList[ie2].profile_url, require_auth_for_profile_image: ne2._sampledUserInfoList[ie2].require_auth_for_profile_image }), this._upsertCachedUserInfo(ue2, ne2.updatedAt)), os2.label = 21;\n          case 21:\n            return ae2 = re2.next(), [3, 19];\n          case 22:\n            return [3, 25];\n          case 23:\n            return ce2 = os2.sent(), Bn2 = { error: ce2 }, [3, 25];\n          case 24:\n            try {\n              ae2 && !ae2.done && (qn2 = re2.return) && qn2.call(re2);\n            } finally {\n              if (Bn2) throw Bn2.error;\n            }\n            return [7];\n          case 25:\n            de2 ? de2 instanceof yt && (de2.applyReactionEvent(ne2), this._dispatcher.dispatch(new po({ messages: [de2], source: no.EVENT_MESSAGE_REACTION_UPDATED }))) : this._dispatcher.dispatch(new vo({ event: ne2, source: no.EVENT_MESSAGE_REACTION_UPDATED })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onReactionUpdated && n3.onReactionUpdated(se2, ne2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 26;\n          case 26:\n            return [3, 87];\n          case 27:\n            return (le2 = e3.as(M).event).channelType !== H$1.GROUP ? [3, 30] : [4, this.getChannel(le2.channelUrl, true)];\n          case 28:\n            return he2 = os2.sent(), [4, this.getMessageFromCache(le2.targetMessageId)];\n          case 29:\n            if ((de2 = os2.sent()) ? de2 instanceof yt && (de2.applyThreadInfoUpdateEvent(le2), this._dispatcher.dispatch(new po({ messages: [de2], source: no.EVENT_MESSAGE_THREADINFO_UPDATED }))) : this._dispatcher.dispatch(new bo({ event: le2, source: no.EVENT_MESSAGE_THREADINFO_UPDATED })), he2.isSuper) try {\n              for (_e2 = o(le2.threadInfo.mostRepliedUsers), pe2 = _e2.next(); !pe2.done; pe2 = _e2.next()) wt2 = pe2.value, this._upsertCachedUserInfo(wt2, le2.threadInfo.updatedAt);\n            } catch (e4) {\n              zn2 = { error: e4 };\n            } finally {\n              try {\n                pe2 && !pe2.done && (Wn2 = _e2.return) && Wn2.call(_e2);\n              } finally {\n                if (zn2) throw zn2.error;\n              }\n            }\n            kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onThreadInfoUpdated && n3.onThreadInfoUpdated(he2, le2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 30;\n          case 30:\n            return [3, 87];\n          case 31:\n            fe2 = e3.as(y).groupChannelMemberCounts, ve2 = [], os2.label = 32;\n          case 32:\n            os2.trys.push([32, 37, 38, 39]), me2 = o(fe2), ge2 = me2.next(), os2.label = 33;\n          case 33:\n            return ge2.done ? [3, 36] : (Ee2 = ge2.value, Ie2 = Ee2.channelUrl, Nt2 = Ee2.memberCount, Ut2 = Ee2.joinedMemberCount, Ce2 = Ee2.updatedAt, [4, this.getChannelFromCache(Ie2)]);\n          case 34:\n            (ye2 = os2.sent()) && ye2._setLatestMemberCount(Nt2, Ut2, Ce2) && ve2.push(ye2), os2.label = 35;\n          case 35:\n            return ge2 = me2.next(), [3, 33];\n          case 36:\n            return [3, 39];\n          case 37:\n            return Me2 = os2.sent(), jn2 = { error: Me2 }, [3, 39];\n          case 38:\n            try {\n              ge2 && !ge2.done && (Qn2 = me2.return) && Qn2.call(me2);\n            } finally {\n              if (jn2) throw jn2.error;\n            }\n            return [7];\n          case 39:\n            return ve2.length > 0 && (this._dispatcher.dispatch(new Un$1({ channels: ve2, context: { source: no.EVENT_CHANNEL_MEMBER_COUNT_UPDATED } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelMemberCountChanged && n3.onChannelMemberCountChanged(ve2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            })), [3, 87];\n          case 40:\n            return be2 = e3.as(D), Ne2 = be2.event, Ue2 = be2.status, Ie2 = be2.channelUrl, we2 = be2.channelType, Ie2 && we2 === H$1.GROUP ? [4, this.getChannel(Ie2, true)] : [3, 42];\n          case 41:\n            Se2 = os2.sent(), this._dispatcher.dispatch(new wo({ event: Ne2, source: no.EVENT_POLL_UPDATED })), kr$1(Ue2 === To ? function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onPollDeleted && n3.onPollDeleted(Se2, Ne2.pollId);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            } : function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onPollUpdated && n3.onPollUpdated(Se2, Ne2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 42;\n          case 42:\n            return [3, 87];\n          case 43:\n            return Te2 = e3.as(Hr), Ae2 = Te2.event, Ie2 = Te2.channelUrl, we2 = Te2.channelType, Ie2 && we2 === H$1.GROUP ? [4, this.getChannel(Ie2, true)] : [3, 45];\n          case 44:\n            Le2 = os2.sent(), this._dispatcher.dispatch(new So({ event: Ae2, source: no.EVENT_POLL_VOTED })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onPollVoted && n3.onPollVoted(Le2, Ae2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), os2.label = 45;\n          case 45:\n            return [3, 87];\n          case 46:\n            if (!(De2 = e3.as(v).event).isGroupChannelEvent) return [3, 85];\n            switch (De2.category) {\n              case f.CHANNEL_JOIN:\n                return [3, 47];\n              case f.CHANNEL_LEAVE:\n                return [3, 49];\n              case f.CHANNEL_OPERATOR_UPDATE:\n                return [3, 53];\n              case f.CHANNEL_INVITE:\n                return [3, 55];\n              case f.CHANNEL_DECLINE_INVITE:\n                return [3, 57];\n              case f.TYPING_START:\n              case f.TYPING_END:\n                return [3, 59];\n              case f.USER_CHANNEL_MUTE:\n              case f.USER_CHANNEL_UNMUTE:\n                return [3, 61];\n              case f.USER_CHANNEL_BAN:\n                return [3, 63];\n              case f.USER_CHANNEL_UNBAN:\n                return [3, 67];\n              case f.CHANNEL_FREEZE:\n              case f.CHANNEL_UNFREEZE:\n                return [3, 69];\n              case f.CHANNEL_HIDE:\n                return [3, 71];\n              case f.CHANNEL_UNHIDE:\n                return [3, 73];\n              case f.CHANNEL_DELETED:\n                return [3, 75];\n              case f.CHANNEL_PROP_CHANGED:\n                return [3, 77];\n              case f.CHANNEL_META_DATA_CHANGED:\n                return [3, 79];\n              case f.CHANNEL_META_COUNTERS_CHANGED:\n                return [3, 81];\n              case f.PINNED_MESSAGE_CHANGED:\n                return [3, 83];\n            }\n            return [3, 85];\n          case 47:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 48:\n            if (xe2 = os2.sent(), Je2 = e3.as(Zn), Xe2 = Je2.memberCount, Ze2 = Je2.joinedMemberCount, $e2 = Je2.members, et2 = false, $e2.forEach(function(e4) {\n              xe2.isExclusive || xe2.isSuper || xe2.isBroadcast ? et2 = et2 || xe2._setLatestMemberCount(Xe2, Ze2, De2.ts) : (e4.state = Zt$1.JOINED, xe2.addMember(e4, De2.ts), is2._updateJoinedMemberCount(xe2)), e4.userId === is2._sdkState.userId && (xe2.myMemberState = Zt$1.JOINED);\n            }), xe2.isSuper) try {\n              for (tt2 = o($e2), nt2 = tt2.next(); !nt2.done; nt2 = tt2.next()) Ht2 = nt2.value, this._upsertCachedUserInfo(Ht2, De2.ts);\n            } catch (e4) {\n              Yn2 = { error: e4 };\n            } finally {\n              try {\n                nt2 && !nt2.done && (Kn2 = tt2.return) && Kn2.call(tt2);\n              } finally {\n                if (Yn2) throw Yn2.error;\n              }\n            }\n            return this._dispatcher.dispatch(new Un$1({ channels: [xe2], context: { source: no.EVENT_CHANNEL_JOINED, users: $e2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    var t5, n3;\n                    try {\n                      for (var s5 = o($e2), r3 = s5.next(); !r3.done; r3 = s5.next()) {\n                        var a4 = r3.value;\n                        e5.onUserJoined && e5.onUserJoined(xe2, a4);\n                      }\n                    } catch (e6) {\n                      t5 = { error: e6 };\n                    } finally {\n                      try {\n                        r3 && !r3.done && (n3 = s5.return) && n3.call(s5);\n                      } finally {\n                        if (t5) throw t5.error;\n                      }\n                    }\n                    xe2.isBroadcast && et2 && e5.onChannelMemberCountChanged && e5.onChannelMemberCountChanged([xe2]);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 49:\n            return (Gt2 = this._leftChannels.get(De2.channelUrl)) ? (rt2 = Gt2.channel, [3, 52]) : [3, 50];\n          case 50:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 51:\n            rt2 = os2.sent(), os2.label = 52;\n          case 52:\n            return st2 = rt2, at2 = e3.as(es), Nt2 = at2.memberCount, Ut2 = at2.joinedMemberCount, it2 = at2.member, ot2 = false, ut2 = uo.of(this._iid).appInfo, st2.isExclusive || st2.isSuper || st2.isBroadcast ? ot2 = st2._setLatestMemberCount(Nt2, Ut2, De2.ts) : ((null == ut2 ? void 0 : ut2.enabledChannelMemberShipHistory) ? ((ct2 = st2.members.find(function(e4) {\n              return e4.userId === it2.userId;\n            })) && (ct2.state = Zt$1.LEFT), st2.memberCount = Nt2) : st2.removeMember(it2), this._updateJoinedMemberCount(st2)), it2.userId === this._sdkState.userId ? (st2.myMemberState = Zt$1.NONE, st2.invitedAt = 0, st2.joinedAt = 0, st2._updateUnreadCount(0, 0), st2.isPublic ? this._dispatcher.dispatch(new Un$1({ channels: [st2], context: { source: no.EVENT_CHANNEL_LEFT, user: it2 } })) : (this._markAsLeave(st2), this._dispatcher.dispatch(new Sn$1({ channelUrls: [st2.url], context: { source: no.EVENT_CHANNEL_LEFT, user: it2 } })))) : this._dispatcher.dispatch(new Un$1({ channels: [st2], context: { source: no.EVENT_CHANNEL_LEFT, user: it2 } })), st2.isSuper && this._upsertCachedUserInfo(it2, De2.ts), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onUserLeft && e5.onUserLeft(st2, it2), st2.isBroadcast && ot2 && e5.onChannelMemberCountChanged && e5.onChannelMemberCountChanged([st2]);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 53:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 54:\n            lt2 = os2.sent(), ht2 = e3.as(T).operators, dt2 = ht2.map(function(e4) {\n              return e4.userId;\n            });\n            try {\n              for (_t$12 = o(lt2.members), pt2 = _t$12.next(); !pt2.done; pt2 = _t$12.next()) (Ht2 = pt2.value).role = dt2.includes(Ht2.userId) ? V.OPERATOR : V.NONE;\n            } catch (e4) {\n              Jn2 = { error: e4 };\n            } finally {\n              try {\n                pt2 && !pt2.done && (Xn2 = _t$12.return) && Xn2.call(_t$12);\n              } finally {\n                if (Jn2) throw Jn2.error;\n              }\n            }\n            return lt2.myRole = dt2.includes(this._sdkState.userId) ? V.OPERATOR : V.NONE, this._dispatcher.dispatch(new Un$1({ channels: [lt2], context: { source: no.EVENT_CHANNEL_OPERATOR_UPDATED, operators: ht2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onOperatorUpdated && e5.onOperatorUpdated(lt2, ht2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 55:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 56:\n            ft2 = os2.sent(), vt2 = e3.as(ss), Nt2 = vt2.memberCount, Ut2 = vt2.joinedMemberCount, mt2 = vt2.inviter, (gt2 = vt2.invitees).forEach(function(e4) {\n              return e4.state = Zt$1.INVITED;\n            });\n            try {\n              for (Et2 = o(gt2), Ct2 = Et2.next(); !Ct2.done; Ct2 = Et2.next()) yt$12 = Ct2.value, ft2.isExclusive || ft2.isSuper || ft2.isBroadcast ? (ft2.isSuper && this._userInfoCache.upsert(yt$12, De2.ts), ft2._setLatestMemberCount(Nt2, Ut2, De2.ts)) : ft2.addMember(yt$12, De2.ts), this._sdkState.userId === yt$12.userId && (ft2.hiddenState = ir.UNHIDDEN, ft2.myMemberState !== Zt$1.JOINED && (ft2.myMemberState = Zt$1.INVITED), ft2.invitedAt = De2.ts);\n            } catch (e4) {\n              $n2 = { error: e4 };\n            } finally {\n              try {\n                Ct2 && !Ct2.done && (ts2 = Et2.return) && ts2.call(Et2);\n              } finally {\n                if ($n2) throw $n2.error;\n              }\n            }\n            return this._dispatcher.dispatch(new Un$1({ channels: [ft2], context: { source: no.EVENT_CHANNEL_INVITED, inviter: mt2, invitees: gt2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onUserReceivedInvitation && e5.onUserReceivedInvitation(ft2, mt2, gt2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 57:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 58:\n            return Mt2 = os2.sent(), bt2 = e3.as(as), Nt2 = bt2.memberCount, Ut2 = bt2.joinedMemberCount, St2 = bt2.inviter, Tt2 = bt2.invitee, Mt2.isExclusive || Mt2.isSuper || Mt2.isBroadcast ? (Mt2.isSuper && this._userInfoCache.upsert(Tt2, De2.ts), Mt2._setLatestMemberCount(Nt2, Ut2, De2.ts)) : Mt2.removeMember(Tt2), this._sdkState.userId === Tt2.userId ? (Mt2.invitedAt = 0, Mt2.myMemberState = Zt$1.NONE, Mt2.isPublic ? this._dispatcher.dispatch(new Un$1({ channels: [Mt2], context: { source: no.EVENT_CHANNEL_DECLINED_INVITE, inviter: St2, invitee: Tt2 } })) : this._dispatcher.dispatch(new Sn$1({ channelUrls: [Mt2.url], context: { source: no.EVENT_CHANNEL_DECLINED_INVITE, inviter: St2, invitee: Tt2 } }))) : this._dispatcher.dispatch(new Un$1({ channels: [Mt2], context: { source: no.EVENT_CHANNEL_DECLINED_INVITE, inviter: St2, invitee: Tt2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onUserDeclinedInvitation && e5.onUserDeclinedInvitation(Mt2, St2, Tt2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 59:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 60:\n            return At2 = os2.sent(), It2 = De2.category === f.TYPING_START, wt2 = e3.as(It2 ? hs : _s).user, At2._updateTypingStatus(wt2, It2 ? De2.ts : 0), this._dispatcher.dispatch(new Un$1({ channels: [At2], context: { source: no.EVENT_CHANNEL_TYPING_STATUS_UPDATE } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onTypingStatusUpdated && e5.onTypingStatusUpdated(At2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 61:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 62:\n            Lt2 = os2.sent(), Dt2 = De2.category === f.USER_CHANNEL_MUTE, (xt2 = e3.as(Dt2 ? ar$1 : ur$1).user).userId === this._sdkState.userId && (Lt2.myMutedState = Dt2 ? z.MUTED : z.UNMUTED, Lt2._myMutedRemainingTime = xt2.restrictionInfo.remainingDuration);\n            try {\n              for (Rt2 = o(Lt2.members), Ft2 = Rt2.next(); !Ft2.done; Ft2 = Rt2.next()) if ((Ht2 = Ft2.value).userId === xt2.userId) {\n                Ht2.isMuted = Dt2;\n                break;\n              }\n            } catch (e4) {\n              ns2 = { error: e4 };\n            } finally {\n              try {\n                Ft2 && !Ft2.done && (rs2 = Rt2.return) && rs2.call(Rt2);\n              } finally {\n                if (ns2) throw ns2.error;\n              }\n            }\n            return Lt2.isSuper && this._userInfoCache.upsert(xt2, De2.ts), this._dispatcher.dispatch(new Un$1({ channels: [Lt2], context: { source: Dt2 ? no.EVENT_CHANNEL_MUTED : no.EVENT_CHANNEL_UNMUTED, user: xt2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    Dt2 ? e5.onUserMuted && e5.onUserMuted(Lt2, xt2) : e5.onUserUnmuted && e5.onUserUnmuted(Lt2, xt2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 63:\n            return (Gt2 = this._leftChannels.get(De2.channelUrl)) ? ($t2 = Gt2.channel, [3, 66]) : [3, 64];\n          case 64:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 65:\n            $t2 = os2.sent(), os2.label = 66;\n          case 66:\n            return Bt2 = $t2, this._markAsLeave(Bt2), en2 = e3.as(lr$1).user, sn2 = en2.userId === this._sdkState.userId, Bt2.isSuper && this._userInfoCache.upsert(en2, De2.ts), sn2 && this._dispatcher.dispatch(new Sn$1({ channelUrls: [Bt2.url], context: { source: no.EVENT_CHANNEL_BANNED, user: en2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onUserBanned && e5.onUserBanned(Bt2, en2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 67:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 68:\n            return tn2 = os2.sent(), nn2 = e3.as(hr$1).user, sn2 = nn2.userId === this._sdkState.userId, tn2.isSuper && this._userInfoCache.upsert(nn2, De2.ts), sn2 && this._dispatcher.dispatch(new Sn$1({ channelUrls: [tn2.url], context: { source: no.EVENT_CHANNEL_UNBANNED, user: nn2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onUserUnbanned && e5.onUserUnbanned(tn2, nn2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 69:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 70:\n            return rn2 = os2.sent(), an2 = e3.as(pr$1).freeze, rn2.isFrozen = an2, this._dispatcher.dispatch(new Un$1({ channels: [rn2], context: { source: an2 ? no.EVENT_CHANNEL_FROZEN : no.EVENT_CHANNEL_UNFROZEN } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    an2 ? e5.onChannelFrozen && e5.onChannelFrozen(rn2) : e5.onChannelUnfrozen && e5.onChannelUnfrozen(rn2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 71:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 72:\n            return on2 = os2.sent(), un2 = e3.as(cs), cn2 = un2.allowAutoUnhide, ln2 = un2.hidePreviousMessages, hn2 = un2.messageOffsetTimestamp, null !== cn2 && (on2.hiddenState = cn2 ? ir.HIDDEN_ALLOW_AUTO_UNHIDE : ir.HIDDEN_PREVENT_AUTO_UNHIDE), null !== ln2 && ln2 && on2._updateUnreadCount(0, 0), null !== hn2 && (on2.messageOffsetTimestamp = hn2), this._dispatcher.dispatch(new Un$1({ channels: [on2], context: { source: no.EVENT_CHANNEL_HIDDEN } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onChannelHidden && e5.onChannelHidden(on2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 73:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 74:\n            return (dn2 = os2.sent()).hiddenState = ir.UNHIDDEN, this._dispatcher.dispatch(new Un$1({ channels: [dn2], context: { source: no.EVENT_CHANNEL_UNHIDDEN } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onChannelChanged && e5.onChannelChanged(dn2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 75:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 76:\n            return _n2 = os2.sent(), this._dispatcher.dispatch(new Sn$1({ channelUrls: [De2.channelUrl], context: { source: no.EVENT_CHANNEL_DELETED } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onChannelDeleted && e5.onChannelDeleted(_n2.url, _n2.channelType);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 77:\n            return [4, this.getChannelWithoutCache(De2.channelUrl, true)];\n          case 78:\n            return pn2 = os2.sent(), this._dispatcher.dispatch(new Un$1({ channels: [pn2], context: { source: no.EVENT_CHANNEL_UPDATED } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onChannelChanged && e5.onChannelChanged(pn2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 79:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 80:\n            return fn2 = os2.sent(), vn2 = e3.as(Gn$1), mn2 = vn2.created, gn2 = vn2.updated, En2 = vn2.deleted, mn2 && (fn2._upsertCachedMetaData(mn2, De2.ts), this._dispatcher.dispatch(new Un$1({ channels: [fn2], context: { source: no.EVENT_CHANNEL_METADATA_CREATED, metaData: mn2 }, ts: De2.ts }))), gn2 && (fn2._upsertCachedMetaData(gn2, De2.ts), this._dispatcher.dispatch(new Un$1({ channels: [fn2], context: { source: no.EVENT_CHANNEL_METADATA_UPDATED, metaData: gn2 }, ts: De2.ts }))), En2 && (fn2._removeFromCachedMetaData(En2, De2.ts), this._dispatcher.dispatch(new Un$1({ channels: [fn2], context: { source: no.EVENT_CHANNEL_METADATA_DELETED, metaDataKeys: En2 }, ts: De2.ts }))), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    mn2 && e5.onMetaDataCreated && e5.onMetaDataCreated(fn2, mn2), gn2 && e5.onMetaDataUpdated && e5.onMetaDataUpdated(fn2, gn2), En2 && e5.onMetaDataDeleted && e5.onMetaDataDeleted(fn2, En2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 81:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 82:\n            return Cn2 = os2.sent(), yn2 = e3.as(nr$1), Mn2 = yn2.created, bn2 = yn2.updated, Nn2 = yn2.deleted, Mn2 && this._dispatcher.dispatch(new Un$1({ channels: [Cn2], context: { source: no.EVENT_CHANNEL_METACOUNTER_CREATED, metaCounters: Mn2 } })), bn2 && this._dispatcher.dispatch(new Un$1({ channels: [Cn2], context: { source: no.EVENT_CHANNEL_METACOUNTER_UPDATED, metaCounters: bn2 } })), Nn2 && this._dispatcher.dispatch(new Un$1({ channels: [Cn2], context: { source: no.EVENT_CHANNEL_METACOUNTER_DELETED, metaCounterKeys: Nn2 } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    Mn2 && e5.onMetaCounterCreated && e5.onMetaCounterCreated(Cn2, Mn2), bn2 && e5.onMetaCounterUpdated && e5.onMetaCounterUpdated(Cn2, bn2), Nn2 && e5.onMetaCounterDeleted && e5.onMetaCounterDeleted(Cn2, Nn2);\n                  }), [2];\n                });\n              });\n            }), [3, 85];\n          case 83:\n            return [4, this.getChannel(De2.channelUrl, true)];\n          case 84:\n            return Tn2 = os2.sent(), An2 = e3.as(H), In2 = An2.pinnedMessageIds, wn2 = An2.latestPinnedMessage, (Ln2 = An2.ts) > Tn2._pinnedMessagesUpdatedAt && (Tn2.pinnedMessageIds = null != In2 ? In2 : [], Tn2.lastPinnedMessage = wn2, Tn2._pinnedMessagesUpdatedAt = Ln2, this._dispatcher.dispatch(new Un$1({ channels: [Tn2], context: { source: no.EVENT_PINNED_MESSAGE_UPDATED } })), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                var e4, t5, n3, s5, r3;\n                return s$1(this, function(a4) {\n                  try {\n                    for (e4 = o(this._groupChannelHandlers.values()), t5 = e4.next(); !t5.done; t5 = e4.next()) (n3 = t5.value).onChannelChanged && n3.onChannelChanged(Tn2);\n                  } catch (e5) {\n                    s5 = { error: e5 };\n                  } finally {\n                    try {\n                      t5 && !t5.done && (r3 = e4.return) && r3.call(e4);\n                    } finally {\n                      if (s5) throw s5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), kr$1(function() {\n              return r$1(is2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._groupChannelHandlers.forEach(function(e5) {\n                    e5.onPinnedMessageUpdated && e5.onPinnedMessageUpdated(Tn2);\n                  }), [2];\n                });\n              });\n            })), [3, 85];\n          case 85:\n            return [3, 87];\n          case 86:\n            switch ((Dn2 = e3.as(O$1).event).category) {\n              case L$1.USER_BLOCK:\n                xn2 = v$1.getDataAsUserBlockEvent(this._iid, Dn2), Fn2 = xn2.blocker, kn2 = xn2.blockee, this._groupChannelCache.block(Fn2.userId, kn2.userId);\n                break;\n              case L$1.USER_UNBLOCK:\n                Rn2 = v$1.getDataAsUserBlockEvent(this._iid, Dn2), Fn2 = Rn2.blocker, kn2 = Rn2.blockee, this._groupChannelCache.unblock(Fn2.userId, kn2.userId);\n            }\n            return [3, 87];\n          case 87:\n            return [3, 89];\n          case 88:\n            if (Pn2 = os2.sent(), v$2(Pn2)) throw Pn2;\n            return [3, 89];\n          case 89:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype._markAsLeave = function(e3) {\n    var t4, n2 = this, s4 = null !== (t4 = this._leftChannels.get(e3.url)) && void 0 !== t4 ? t4 : { channel: e3, ref: 0 };\n    s4.ref++, this._leftChannels.set(e3.url, s4), setTimeout(function() {\n      s4.ref--, 0 === s4.ref && n2._leftChannels.delete(e3.url);\n    }, 1e4);\n  }, c$1.prototype.addHandler = function(e3, t4) {\n    this._groupChannelHandlers.set(e3, t4);\n  }, c$1.prototype.removeHandler = function(e3) {\n    this._groupChannelHandlers.delete(e3);\n  }, c$1.prototype.clearHandler = function() {\n    this._groupChannelHandlers.clear();\n  }, c$1.prototype.subscribeChannelEvent = function(e3, t4) {\n    this._groupChannelBroadcast.subscribe(e3, t4);\n  }, c$1.prototype.unsubscribeChannelEvent = function(e3) {\n    this._groupChannelBroadcast.unsubscribe(e3);\n  }, c$1.prototype._updateJoinedMemberCount = function(e3) {\n    e3.joinedMemberCount = e3.members.filter(function(e4) {\n      return e4.state === Zt$1.JOINED;\n    }).length;\n  }, c$1.prototype.getChannel = function(e3, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), s4.label = 1;\n          case 1:\n            return s4.trys.push([1, 3, , 4]), [4, this.getChannelFromCache(e3)];\n          case 2:\n            return (n2 = s4.sent()) ? [2, n2] : [3, 4];\n          case 3:\n            return s4.sent(), [3, 4];\n          case 4:\n            return [4, this.getChannelWithoutCache(e3, t4)];\n          case 5:\n            return [2, s4.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.getChannelWithoutCache = function(e3, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var n2, s4, r2, a4, i3;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), n2 = new Ln$1({ channelUrl: e3, isInternalCall: t4 }), [4, this._requestQueue.send(n2)];\n          case 1:\n            switch (s4 = o2.sent(), r2 = s4.as(Dn$1).channel, a4 = r2.unreadMessageCount, i3 = r2.unreadMentionCount, r2.myCountPreference) {\n              case ar.UNREAD_MESSAGE_COUNT_ONLY:\n                i3 = 0;\n                break;\n              case ar.UNREAD_MENTION_COUNT_ONLY:\n                a4 = 0;\n                break;\n              case ar.OFF:\n                a4 = 0, i3 = 0;\n            }\n            return r2._updateUnreadCount(a4, i3), [4, this.upsertChannelsToCache([r2])];\n          case 2:\n            return [2, o2.sent()[0]];\n        }\n      });\n    });\n  }, c$1.prototype.refreshChannel = function(e3, t4, n2, s4) {\n    return void 0 === t4 && (t4 = true), void 0 === n2 && (n2 = no.REFRESH_CHANNEL), void 0 === s4 && (s4 = false), r$1(this, void 0, void 0, function() {\n      var r2, a4, i3, o2, u4;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return c3.trys.push([0, 5, , 6]), r2 = new Ln$1({ channelUrl: e3, isInternalCall: t4, showLatestMessage: s4 }), [4, this._requestQueue.send(r2)];\n          case 1:\n            return a4 = c3.sent(), (i3 = a4.as(Dn$1).channel).myMemberState !== Zt$1.NONE ? [3, 2] : (this._dispatcher.dispatch(new Sn$1({ channelUrls: [i3.url], context: { source: n2 } })), [3, 4]);\n          case 2:\n            return [4, this.upsertChannelsToCache([i3])];\n          case 3:\n            o2 = c3.sent(), this._dispatcher.dispatch(new Un$1({ channels: o2, context: { source: n2 } })), c3.label = 4;\n          case 4:\n            return [3, 6];\n          case 5:\n            return (u4 = c3.sent()).code !== u$1.NON_AUTHORIZED && u4.code !== u$1.NOT_FOUND_IN_DATABASE || this._dispatcher.dispatch(new Sn$1({ channelUrls: [e3], context: { source: n2 } })), [3, 6];\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype.getMyGroupChannels = function(e3, t4, n2, r2, a4) {\n    return void 0 === r2 && (r2 = no.REQUEST_CHANNEL), void 0 === a4 && (a4 = false), r$1(this, void 0, void 0, function() {\n      var i3, o2, u4, c3, l2, h4, d4, _2, p2;\n      return s$1(this, function(f2) {\n        switch (f2.label) {\n          case 0:\n            return t4.createdAfter && (t4.createdAfter = Math.floor(t4.createdAfter / 1e3)), t4.createdBefore && (t4.createdBefore = Math.floor(t4.createdBefore / 1e3)), i3 = false, a4 && (o2 = uo.of(this._iid), u4 = o2.appInfo, (c3 = o2.cacheContext) && !c3.localCacheEnabled && (null == u4 ? void 0 : u4.enabledChannelMemberShipHistory) && (null == u4 ? void 0 : u4.applicationAttributes.includes(\"left_user_view_support\")) && (i3 = true)), l2 = new Rn(n$2(n$2({}, t4), { userId: this._sdkState.userId, token: e3, limit: n2, includeLeftChannel: a4 && i3 })), [4, this._requestQueue.send(l2)];\n          case 1:\n            return h4 = f2.sent(), d4 = h4.as(Fn), _2 = d4.channels, p2 = d4.token, this._dispatcher.dispatch(new Un$1({ channels: _2, context: { source: r2 } })), [2, { channels: _2, token: p2 }];\n        }\n      });\n    });\n  }, c$1.prototype.getMyGroupChannelChangeLogs = function(e3, t4, r2) {\n    return void 0 === r2 && (r2 = no.REQUEST_CHANNEL_CHANGELOGS), r$1(this, void 0, void 0, function() {\n      var a4, i3, o2, u4, c3, d4, _2, p2;\n      return s$1(this, function(f2) {\n        switch (f2.label) {\n          case 0:\n            return a4 = n$2(n$2({}, fn$1), t4), cs$2((S$1(\"string\", e3) || S$1(\"number\", e3)) && vn$1(a4)).throw(b$2.invalidParameters), i3 = new In$1(oe({ userId: this._sdkState.userId, ts: \"number\" == typeof e3 ? e3 : null, token: \"string\" == typeof e3 ? e3 : null, filter: a4 })), [4, this._requestQueue.send(i3)];\n          case 1:\n            return o2 = f2.sent(), u4 = o2.as(wn$1), c3 = u4.updatedChannels, d4 = u4.deletedChannelUrls, _2 = u4.hasMore, p2 = u4.ts, c3.length > 0 && this._dispatcher.dispatch(new Un$1({ channels: c3, context: { source: r2 }, ts: p2 })), d4.length > 0 && this._dispatcher.dispatch(new Sn$1({ channelUrls: d4, context: { source: r2 } })), [2, { updatedChannels: c3, deletedChannelUrls: d4, hasMore: _2, token: u4.token }];\n        }\n      });\n    });\n  }, c$1.prototype.getGroupChannelCount = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return t4 = n$2(n$2({}, mn$1), e3), cs$2(gn$1(t4)).throw(b$2.invalidParameters), n2 = new kn$1({ userId: this._sdkState.userId, filter: t4 }), [4, this._requestQueue.send(n2)];\n          case 1:\n            return r2 = a4.sent(), [2, r2.as(Pn$1).groupChannelCount];\n        }\n      });\n    });\n  }, c$1.prototype.getUnreadItemCount = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, a4, i3, o2, u4, c3, d4, _2, p2, v2, g2, E3, C2, y4, M4;\n      return s$1(this, function(f2) {\n        switch (f2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, En$1), e3), cs$2(function(e4) {\n              return C$1(ln$1, e4.keys) && C$1(\"string\", e4.customTypeFilters, true) && C$1(\"string\", e4.customTypesFilter, true);\n            }(n2)).throw(b$2.invalidParameters), r2 = uo.of(this._iid), a4 = r2.sdkState, i3 = r2.requestQueue, o2 = new On$1({ userId: a4.userId, filter: n2 }), [4, i3.send(o2)];\n          case 1:\n            return u4 = f2.sent(), c3 = u4.as(Hn), d4 = c3.groupChannelUnreadMentionCount, _2 = c3.groupChannelUnreadMessageCount, p2 = c3.groupChannelInvitationCount, v2 = c3.superGroupChannelUnreadMentionCount, g2 = c3.superGroupChannelUnreadMessageCount, E3 = c3.superGroupChannelInvitationCount, C2 = c3.nonSuperGroupChannelUnreadMentionCount, y4 = c3.nonSuperGroupChannelUnreadMessageCount, M4 = c3.nonSuperGroupChannelInvitationCount, [2, se({ groupChannelUnreadMentionCount: d4, groupChannelUnreadMessageCount: _2, groupChannelInvitationCount: p2, superGroupChannelUnreadMentionCount: v2, superGroupChannelUnreadMessageCount: g2, superGroupChannelInvitationCount: E3, nonSuperGroupChannelUnreadMentionCount: C2, nonSuperGroupChannelUnreadMessageCount: y4, nonSuperGroupChannelInvitationCount: M4 })];\n        }\n      });\n    });\n  }, c$1.prototype.getTotalUnreadChannelCount = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.sdkState, n2 = e3.requestQueue, s4 = new Gn({ userId: t4.userId }), [4, n2.send(s4)];\n          case 1:\n            return r2 = a4.sent(), [2, r2.as(Vn).unreadCount];\n        }\n      });\n    });\n  }, c$1.prototype.getTotalUnreadMessageCount = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, a4, i3, o2;\n      return s$1(this, function(u4) {\n        switch (u4.label) {\n          case 0:\n            return t4 = n$2(n$2({}, Cn$1), e3), cs$2(yn$1(t4)).throw(b$2.invalidParameters), n2 = uo.of(this._iid), r2 = n2.sdkState, a4 = n2.requestQueue, i3 = new Bn({ userId: r2.userId, filter: t4 }), [4, a4.send(i3)];\n          case 1:\n            return o2 = u4.sent(), [2, o2.as(qn).unreadCount];\n        }\n      });\n    });\n  }, c$1.prototype.getTotalScheduledMessageCount = function(e3) {\n    return void 0 === e3 && (e3 = {}), r$1(this, void 0, void 0, function() {\n      var t4, n2, a4, i3;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return t4 = n$2(n$2({}, Mn$1), e3), cs$2(function(e4) {\n              return S$1(\"string\", e4.channelUrl, true) && C$1(dt, e4.scheduledStatus, true) && T$2(j, e4.messageTypeFilter);\n            }(t4)).throw(b$2.invalidParameters), n2 = uo.of(this._iid).requestQueue, a4 = new zn(t4), [4, n2.send(a4)];\n          case 1:\n            return i3 = o2.sent(), [2, i3.as(Wn).count];\n        }\n      });\n    });\n  }, c$1.prototype.getSubscribedTotalUnreadMessageCount = function() {\n    var e3 = uo.of(this._iid).subscribedUnreadMessageCount;\n    return e3.all >= 0 ? e3.all : 0;\n  }, c$1.prototype.getSubscribedCustomTypeTotalUnreadMessageCount = function() {\n    var e3 = 0, t4 = uo.of(this._iid).subscribedUnreadMessageCount;\n    return Object.keys(t4.customTypes).forEach(function(n2) {\n      e3 += t4.customTypes[n2];\n    }), e3;\n  }, c$1.prototype.getSubscribedCustomTypeUnreadMessageCount = function(e3) {\n    var t4;\n    return null !== (t4 = uo.of(this._iid).subscribedUnreadMessageCount.customTypes[e3]) && void 0 !== t4 ? t4 : 0;\n  }, c$1.prototype.createChannel = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t4 = n$2(n$2({}, _n$1), e3), cs$2(pn$1(t4)).throw(b$2.invalidParameters), t4.isPublic || (t4.accessCode = void 0), n2 = new Qn(n$2({ userId: this._sdkState.userId }, t4)), [4, this._requestQueue.send(n2)];\n          case 1:\n            return r2 = i3.sent(), a4 = r2.as(Yn).channel, [4, this.upsertChannelsToCache([a4])];\n          case 2:\n            return i3.sent(), [2, a4];\n        }\n      });\n    });\n  }, c$1.prototype.markAsReadAll = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2, a4, i3, o$1;\n      return s$1(this, function(u4) {\n        switch (u4.label) {\n          case 0:\n            return e3 = Date.now(), cs$2(e3 - this._markAsReadAllLastSentAt >= 1e3).throw(b$2.markAsReadAllRateLimitExceeded), this._markAsReadAllLastSentAt = e3, t4 = new Kn({ userId: this._sdkState.userId }), [4, this._requestQueue.send(t4)];\n          case 1:\n            u4.sent(), n2 = this._groupChannelCache.channels;\n            try {\n              for (s4 = o(n2), r2 = s4.next(); !r2.done; r2 = s4.next()) (a4 = r2.value)._updateUnreadMemberState(this._sdkState.userId, e3), a4._updateUnreadCount(0, 0);\n            } catch (e4) {\n              i3 = { error: e4 };\n            } finally {\n              try {\n                r2 && !r2.done && (o$1 = s4.return) && o$1.call(s4);\n              } finally {\n                if (i3) throw i3.error;\n              }\n            }\n            return n2.length > 0 ? [4, this.upsertChannelsToCache(n2)] : [3, 3];\n          case 2:\n            u4.sent(), u4.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype.markAsReadWithChannelUrls = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2, a4, i3, o$1, u4, c3;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return t4 = Date.now(), cs$2(C$1(\"string\", e3) && t4 - this._markAsReadAllLastSentAt >= 1e3).throw(b$2.markAsReadAllRateLimitExceeded), this._markAsReadAllLastSentAt = t4, n2 = new Kn({ userId: this._sdkState.userId, channelUrls: e3 }), [4, this._requestQueue.send(n2)];\n          case 1:\n            d4.sent(), s4 = this._groupChannelCache.channels, r2 = [];\n            try {\n              for (a4 = o(s4), i3 = a4.next(); !i3.done; i3 = a4.next()) o$1 = i3.value, e3.includes(o$1.url) && (o$1._updateUnreadMemberState(this._sdkState.userId, t4), o$1._updateUnreadCount(0, 0), r2.push(o$1));\n            } catch (e4) {\n              u4 = { error: e4 };\n            } finally {\n              try {\n                i3 && !i3.done && (c3 = a4.return) && c3.call(a4);\n              } finally {\n                if (u4) throw u4.error;\n              }\n            }\n            return r2.length > 0 ? [4, this.upsertChannelsToCache(r2)] : [3, 3];\n          case 2:\n            d4.sent(), d4.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype.markAsDelivered = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this.getChannel(e3)];\n          case 1:\n            return [4, t4.sent().markAsDelivered()];\n          case 2:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.getMessageFromCache = function(e3) {\n    var t4;\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._messageCache.get(e3)];\n          case 1:\n            return [2, null !== (t4 = n2.sent()) && void 0 !== t4 ? t4 : null];\n        }\n      });\n    });\n  }, c$1.prototype.getExactlyMatchingMessagesForTokenFromCache = function(e3, t4, n2) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return [4, this._messageCache.fetch({ channelUrl: e3, token: t4, filter: n2, exactMatch: true })];\n          case 1:\n            return [2, s4.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.getMessagesFromCache = function(e3, t4, n2, s4, r2, a4) {\n    return void 0 === r2 && (r2 = Xr), void 0 === a4 && (a4 = true), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return [4, this._messageCache.fetch({ channelUrl: e3, token: t4, limit: r2, filter: s4, backward: \"next\" === n2, inclusive: a4 })];\n          case 1:\n            return [2, i3.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.getPollMessagesFromCache = function(e3, t4, n2, s4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return [4, this._messageCache.fetch({ channelUrl: e3, token: t4, limit: s4, filter: n2, backward: false, isPollOnly: true })];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.getCachedMessageCountBetween = function(e3, t4, n2, s4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return [4, this._messageCache.countBetween(e3, t4, new Es({ top: n2, bottom: s4 }))];\n          case 1:\n            return [2, r2.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.getUnsentMessagesFromCache = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._unsentMessageCache.fetch({ channelUrl: e3, filter: t4 })];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, c$1.prototype.removeFailedMessageFromCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, this._unsentMessageCache.remove([e3])];\n          case 1:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, c$1;\n}(g), Ms = function(e3, t4) {\n  return t4 instanceof _t ? e3.findIndex(function(e4) {\n    return e4 instanceof _t && t4.isIdentical(e4);\n  }) : e3.findIndex(function(e4) {\n    return e4.isIdentical(t4);\n  });\n}, bs = function(e3, t4) {\n  return e3.findIndex(function(e4) {\n    return e4 instanceof yt ? e4.messageId === t4 : e4 instanceof St$1 ? e4.notificationId === t4 : void 0;\n  });\n}, Ns = function(e3, t4) {\n  if (e3.length > 0) {\n    for (var n2 = 0, s4 = e3.length - 1, r2 = Math.floor((n2 + s4) / 2); n2 < s4; ) {\n      var a4 = e3[r2].createdAt - t4.createdAt;\n      if (a4 > 0) s4 = r2, r2 = Math.floor((n2 + s4) / 2);\n      else {\n        if (!(a4 < 0)) return r2;\n        n2 = r2 + 1, r2 = Math.floor((n2 + s4) / 2);\n      }\n    }\n    return e3[r2].createdAt > t4.createdAt ? r2 : r2 + 1;\n  }\n  return e3.length;\n}, Us = {}, Ss = function() {\n  function e3(e4) {\n    var t4 = e4._iid, n2 = e4.channel, s4 = e4.limit, r2 = void 0 === s4 ? 100 : s4, a4 = this;\n    this.ref = 0, this._iid = t4, this._channel = n2, this._limit = r2, this._prevSyncLoopCount = 0;\n    var i3, o2, u3 = uo.of(this._iid), c$1 = u3.sdkState, l2 = u3.cacheContext, v2 = u3.dispatcher, m4 = u3.logger, g2 = u3.statManager, E3 = u3.messageBackgroundSyncThrottleController;\n    this._metadataKey = (i3 = c$1.userId, o2 = n2.url, \"sendbird:\".concat(i3, \"@groupchannel/\").concat(o2, \"/message/sync.meta\"));\n    var C2 = function(e5, t5) {\n      return \"sendbird:\".concat(e5, \"@groupchannel/\").concat(t5, \"/message/sync\");\n    }(c$1.userId, n2.url);\n    this._prevSync = new w(C2, function(e5) {\n      return r$1(a4, void 0, void 0, function() {\n        var t5 = this;\n        return s$1(this, function(s5) {\n          switch (s5.label) {\n            case 0:\n              return [4, E3.run(\"message-background-sync-\".concat(n2.url, \"-prev\"), function() {\n                return r$1(t5, void 0, void 0, function() {\n                  var t6, s6, r3, a5, i4, o3, u4, c$12, p2, v3, E4, C3;\n                  return s$1(this, function(f2) {\n                    switch (f2.label) {\n                      case 0:\n                        return t6 = { hasNext: true, nextToken: 0 }, this._prevSyncLoopCount++, [4, this.loadMetadata()];\n                      case 1:\n                        if (f2.sent(), m4.debug(\"message background prev sync from\", null === (o3 = this._metadata) || void 0 === o3 ? void 0 : o3.range.top), null === (u4 = this._metadata) || void 0 === u4 ? void 0 : u4.previousComplete) return [3, 10];\n                        f2.label = 2;\n                      case 2:\n                        return f2.trys.push([2, 5, 8, 9]), [4, la.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url, this._channel.channelType, (null === (p2 = null === (c$12 = this._metadata) || void 0 === c$12 ? void 0 : c$12.range) || void 0 === p2 ? void 0 : p2.top) ? this._metadata.range.top : e5, { prevResultSize: this._limit, nextResultSize: 0, replyType: Q.ALL, includeReactions: true, includeMetaArray: true, includeParentMessageInfo: true, includeThreadInfo: true, isInclusive: true }, no.SYNC_MESSAGE_BACKGROUND, false, false, qt$1.INTERNAL_BACKSYNC)];\n                      case 3:\n                        return (s6 = f2.sent().messages).length > 0 && (r3 = s6.map(function(e6) {\n                          return e6.createdAt;\n                        }), (null === (v3 = this._metadata) || void 0 === v3 ? void 0 : (i4 = v3.range).intersect.apply(i4, c([], a$1(r3), false))) ? this.extendRange(s6) : this._metadata = { range: new Es({ top: Math.min.apply(Math, c([], a$1(r3), false)), bottom: Math.max.apply(Math, c([], a$1(r3), false)) }), previousComplete: false }), t6.hasNext = s6.length >= this._limit && this._prevSyncLoopCount < 1, this._metadata && (t6.nextToken = this._metadata.range.top, this._metadata.previousComplete = s6.length < this._limit), m4.debug(\"message background prev sync progress\", t6), [4, this.saveMetadata()];\n                      case 4:\n                        return f2.sent(), [3, 9];\n                      case 5:\n                        return a5 = f2.sent(), m4.debug(\"message background prev sync error\", a5), a5 instanceof b$2 && a5.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];\n                      case 6:\n                        f2.sent(), f2.label = 7;\n                      case 7:\n                        throw a5;\n                      case 8:\n                        return g2.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: n2.url, measured_on: \"back_sync\", event: \"cache_fetch\", max_db_size: null !== (C3 = null === (E4 = l2.localCacheConfig) || void 0 === E4 ? void 0 : E4.maxSize) && void 0 !== C3 ? C3 : 0, use_local_cache: l2.localCacheEnabled, starting_point: 0, message_init_policy: \"\" } })), [7];\n                      case 9:\n                        return [3, 11];\n                      case 10:\n                        t6.hasNext = false, f2.label = 11;\n                      case 11:\n                        return [2, t6];\n                    }\n                  });\n                });\n              })];\n            case 1:\n              return [2, s5.sent()];\n          }\n        });\n      });\n    }), this._nextSync = new w(C2, function(e5) {\n      return r$1(a4, void 0, void 0, function() {\n        var t5 = this;\n        return s$1(this, function(s5) {\n          switch (s5.label) {\n            case 0:\n              return [4, E3.run(\"message-background-sync-\".concat(n2.url, \"-next\"), function() {\n                return r$1(t5, void 0, void 0, function() {\n                  var t6, s6, r3, a5, i4, o3, u4, c$12, h4, p2, v3;\n                  return s$1(this, function(f2) {\n                    switch (f2.label) {\n                      case 0:\n                        return t6 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];\n                      case 1:\n                        f2.sent(), m4.debug(\"message background next sync from\", null === (o3 = this._metadata) || void 0 === o3 ? void 0 : o3.range.bottom), f2.label = 2;\n                      case 2:\n                        return f2.trys.push([2, 5, 6, 7]), [4, la.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url, this._channel.channelType, (null === (c$12 = null === (u4 = this._metadata) || void 0 === u4 ? void 0 : u4.range) || void 0 === c$12 ? void 0 : c$12.bottom) ? this._metadata.range.bottom : e5, { prevResultSize: 0, nextResultSize: this._limit, replyType: Q.ALL, includeReactions: true, includeMetaArray: true, includeParentMessageInfo: true, includeThreadInfo: true, isInclusive: true }, no.SYNC_MESSAGE_BACKGROUND, false, false, qt$1.INTERNAL_BACKSYNC)];\n                      case 3:\n                        return (s6 = f2.sent().messages).length > 0 && (r3 = s6.map(function(e6) {\n                          return e6.createdAt;\n                        }), (null === (h4 = this._metadata) || void 0 === h4 ? void 0 : (i4 = h4.range).intersect.apply(i4, c([], a$1(r3), false))) ? this.extendRange(s6) : this._metadata = { range: new Es({ top: Math.min.apply(Math, c([], a$1(r3), false)), bottom: Math.max.apply(Math, c([], a$1(r3), false)) }), previousComplete: false }), t6.hasNext = s6.length >= this._limit, this._metadata && (t6.nextToken = this._metadata.range.bottom), m4.debug(\"message background next sync progress\", t6), [4, this.saveMetadata()];\n                      case 4:\n                        return f2.sent(), [3, 7];\n                      case 5:\n                        throw a5 = f2.sent(), m4.debug(\"message background next sync error\", a5), a5;\n                      case 6:\n                        return g2.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: n2.url, measured_on: \"back_sync\", event: \"cache_fetch\", max_db_size: null !== (v3 = null === (p2 = l2.localCacheConfig) || void 0 === p2 ? void 0 : p2.maxSize) && void 0 !== v3 ? v3 : 0, use_local_cache: l2.localCacheEnabled, starting_point: 0, message_init_policy: \"\" } })), [7];\n                      case 7:\n                        return [2, t6];\n                    }\n                  });\n                });\n              })];\n            case 1:\n              return [2, s5.sent()];\n          }\n        });\n      });\n    }), this._connectionEventContext = v2.on(function(e5) {\n      if (e5 instanceof Fr$1) if (e5.stateType === Rr$1.CONNECTED) a4.resume();\n      else a4.pause();\n    });\n  }\n  return e3.of = function(t4, n2) {\n    return Us[t4] || (Us[t4] = {}), Us[t4][n2.url] || (Us[t4][n2.url] = new e3({ _iid: t4, channel: n2 })), Us[t4][n2.url].ref++, Us[t4][n2.url];\n  }, e3.clear = function(e4, t4) {\n    Us[e4] && Us[e4][t4] && (Us[e4][t4].close(), delete Us[e4]);\n  }, Object.defineProperty(e3.prototype, \"range\", { get: function() {\n    var e4, t4;\n    return null !== (t4 = null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.range) && void 0 !== t4 ? t4 : new Es({});\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"previousComplete\", { get: function() {\n    var e4;\n    return !!(null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.previousComplete);\n  }, enumerable: false, configurable: true }), e3.prototype.isWrappingMessages = function(e4) {\n    var t4;\n    return null === (t4 = this.range) || void 0 === t4 ? void 0 : t4.includes.apply(t4, c([], a$1(e4.map(function(e5) {\n      return e5.createdAt;\n    })), false));\n  }, e3.prototype.extendRange = function(e4) {\n    var t4;\n    this._metadata && (t4 = this._metadata.range).extends.apply(t4, c([], a$1(e4.map(function(e5) {\n      return e5.createdAt;\n    })), false));\n  }, e3.prototype.loadMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._metadata ? [3, 2] : [4, uo.of(this._iid).cacheContext.preference.get(this._metadataKey)];\n          case 1:\n            e4 = t4.sent(), this._metadata = e4 ? { range: new Es(e4.range), previousComplete: e4.previousComplete } : { range: new Es({}), previousComplete: false }, t4.label = 2;\n          case 2:\n            return [2, this._metadata];\n        }\n      });\n    });\n  }, e3.prototype.saveMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this._metadata ? [4, uo.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];\n          case 1:\n            return e4.sent(), [2, true];\n          case 2:\n            return [2, false];\n        }\n      });\n    });\n  }, e3.prototype.clearMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, uo.of(this._iid).cacheContext.preference.remove(this._metadataKey)];\n          case 1:\n            return e4.sent(), this._metadata = void 0, [2];\n        }\n      });\n    });\n  }, e3.prototype.resume = function(e4) {\n    var t4, n2, s4, r2;\n    void 0 === e4 && (e4 = Date.now());\n    var a4 = uo.of(this._iid), i3 = a4.logger, o2 = a4.sessionManager;\n    a4.cacheContext.localCacheEnabled && o2.session.hasSession && (i3.debug(\"message background sync resume()\"), this._prevSyncLoopCount = 0, this._metadata && this._metadata.previousComplete || this._prevSync.start(null !== (n2 = null === (t4 = this._metadata) || void 0 === t4 ? void 0 : t4.range.top) && void 0 !== n2 ? n2 : e4), this._nextSync.start(null !== (r2 = null === (s4 = this._metadata) || void 0 === s4 ? void 0 : s4.range.bottom) && void 0 !== r2 ? r2 : e4));\n  }, e3.prototype.pause = function() {\n    uo.of(this._iid).logger.debug(\"message background sync stop()\"), this._prevSync.stop(), this._nextSync.stop();\n  }, e3.prototype.close = function() {\n    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Us[this._iid][this._channel.url]);\n  }, e3;\n}(), Ts = {}, As = function() {\n  function e3(e4) {\n    var t4 = e4._iid, n2 = e4.channel, r2 = e4.includeParams, a4 = this;\n    this.ref = 0, this._iid = t4, this._channel = n2, this._includeParams = r2;\n    var i3, o2, u3 = uo.of(this._iid), c3 = u3.logger, l2 = u3.sdkState, d4 = u3.dispatcher;\n    this._metadataKey = (i3 = l2.userId, o2 = n2.url, \"sendbird:\".concat(i3, \"@groupchannel/\").concat(o2, \"/message/changelogs.meta\"));\n    var _2 = function(e5, t5) {\n      return \"sendbird:\".concat(e5, \"@groupchannel/\").concat(t5, \"/message/changelogs\");\n    }(l2.userId, this._channel.url);\n    this._sync = new w(_2, function() {\n      return r$1(a4, void 0, void 0, function() {\n        var e5, t5, n3, r3, a5, i4, o3, u4, l3;\n        return s$1(this, function(d5) {\n          switch (d5.label) {\n            case 0:\n              return e5 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];\n            case 1:\n              d5.sent(), c3.debug(\"message changelog sync from\", null === (l3 = this._metadata) || void 0 === l3 ? void 0 : l3.token), d5.label = 2;\n            case 2:\n              return d5.trys.push([2, 5, , 8]), [4, la.of(this._iid).getMessageChangelogs(this._channel.url, this._channel.channelType, this._metadata.token, n$2({ replyType: Q.ALL }, this._includeParams), no.SYNC_MESSAGE_CHANGELOGS)];\n            case 3:\n              return t5 = d5.sent(), n3 = t5.updatedMessages, r3 = t5.deletedMessageIds, a5 = t5.hasMore, i4 = t5.token, o3 = t5.forceUseNextToken, e5.hasNext = a5, e5.nextToken = i4, n3.length > 0 || r3.length > 0 ? this._metadata && (this._metadata.token = i4) : o3 && this._metadata && (this._metadata.token = i4), c3.debug(\"message changelog sync progress\", e5), [4, this.saveMetadata()];\n            case 4:\n              return d5.sent(), [3, 8];\n            case 5:\n              return u4 = d5.sent(), c3.debug(\"message changelog sync error\", u4), u4 instanceof b$2 && u4.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 7];\n            case 6:\n              d5.sent(), d5.label = 7;\n            case 7:\n              throw u4;\n            case 8:\n              return [2, e5];\n          }\n        });\n      });\n    }), this._connectionEventContext = d4.on(function(e5) {\n      if (e5 instanceof Fr$1) if (e5.stateType === Rr$1.CONNECTED) a4.resume();\n      else a4.pause();\n    });\n  }\n  return e3.of = function(t4, n2, s4) {\n    return Ts[t4] || (Ts[t4] = {}), Ts[t4][n2.url] || (Ts[t4][n2.url] = new e3({ _iid: t4, channel: n2, includeParams: s4 })), Ts[t4][n2.url].ref++, Ts[t4][n2.url];\n  }, e3.clear = function(e4, t4) {\n    Ts[e4] && Ts[e4][t4] && (Ts[e4][t4].close(), delete Ts[e4]);\n  }, e3.prototype.loadMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, s4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this._metadata ? [3, 2] : (e4 = uo.of(this._iid), t4 = e4.cacheContext, n2 = e4.firstConnectedAt, [4, t4.preference.get(this._metadataKey)]);\n          case 1:\n            s4 = r2.sent(), this._metadata = { token: s4 ? s4.token : n2 }, r2.label = 2;\n          case 2:\n            return [2, this._metadata];\n        }\n      });\n    });\n  }, e3.prototype.saveMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this._metadata ? [4, uo.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];\n          case 1:\n            return e4.sent(), [2, true];\n          case 2:\n            return [2, false];\n        }\n      });\n    });\n  }, e3.prototype.clearMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, uo.of(this._iid).cacheContext.preference.remove(this._metadataKey)];\n          case 1:\n            return e4.sent(), this._metadata = void 0, [2];\n        }\n      });\n    });\n  }, e3.prototype.resume = function() {\n    var e4 = uo.of(this._iid), t4 = e4.logger;\n    e4.sessionManager.session.hasSession && (t4.debug(\"message changelog sync resume()\"), this._sync.start(0));\n  }, e3.prototype.pause = function() {\n    uo.of(this._iid).logger.debug(\"message changelog sync pause()\"), this._sync.stop();\n  }, e3.prototype.close = function() {\n    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Ts[this._iid][this._channel.url]);\n  }, e3;\n}(), Is = {}, ws = function() {\n  function e3(e4) {\n    var t4 = e4._iid, n2 = e4.channel, s4 = e4.hasPollMessage, r2 = this;\n    this.ref = 0, this._iid = t4, this._channel = n2;\n    var a4, i3, o2 = uo.of(this._iid), u3 = o2.logger, c3 = o2.sdkState, l2 = o2.dispatcher;\n    this._metadataKey = (a4 = c3.userId, i3 = n2.url, \"sendbird:\".concat(a4, \"@groupchannel/\").concat(i3, \"/poll/changelogs.meta\"));\n    var d4 = function(e5, t5) {\n      return \"sendbird:\".concat(e5, \"@groupchannel/\").concat(t5, \"/poll/changelogs\");\n    }(c3.userId, this._channel.url);\n    this._sync = new w(d4, function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e5, t5, n3, r3, a5, i4, o3, c4;\n        return s$1(this, function(l3) {\n          switch (l3.label) {\n            case 0:\n              return e5 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];\n            case 1:\n              return l3.sent(), u3.debug(\"poll changelog sync from\", null === (c4 = this._metadata) || void 0 === c4 ? void 0 : c4.token), (t5 = !this._metadata || !this._metadata.token) ? [4, s4()] : [3, 3];\n            case 2:\n              t5 = !l3.sent(), l3.label = 3;\n            case 3:\n              if (t5) return [2, { hasNext: false, nextToken: 0 }];\n              this._metadata || (n3 = uo.of(this._iid).firstConnectedAt, this._metadata = { token: n3 }), l3.label = 4;\n            case 4:\n              return l3.trys.push([4, 7, , 10]), [4, Qo.of(this._iid).getPollChangeLogs(this._channel.url, this._channel.channelType, this._metadata.token)];\n            case 5:\n              return r3 = l3.sent(), a5 = r3.hasMore, i4 = r3.token, e5.hasNext = a5, e5.nextToken = i4, this._metadata.token = i4, u3.debug(\"poll changelog sync progress\", e5), [4, this.saveMetadata()];\n            case 6:\n              return l3.sent(), [3, 10];\n            case 7:\n              return o3 = l3.sent(), u3.debug(\"poll changelog sync error\", o3), o3 instanceof b$2 && o3.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 9];\n            case 8:\n              l3.sent(), l3.label = 9;\n            case 9:\n              throw o3;\n            case 10:\n              return [2, e5];\n          }\n        });\n      });\n    }), this._connectionEventContext = l2.on(function(e5) {\n      if (e5 instanceof Fr$1) if (e5.stateType === Rr$1.CONNECTED) r2.resume();\n      else r2.pause();\n    });\n  }\n  return e3.of = function(t4, n2, s4) {\n    return Is[t4] || (Is[t4] = {}), Is[t4][n2.url] || (Is[t4][n2.url] = new e3({ _iid: t4, channel: n2, hasPollMessage: s4 })), Is[t4][n2.url].ref++, Is[t4][n2.url];\n  }, e3.prototype.loadMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._metadata ? [3, 2] : [4, uo.of(this._iid).cacheContext.preference.get(this._metadataKey)];\n          case 1:\n            e4 = t4.sent(), this._metadata = e4 ? { token: e4.token } : void 0, t4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.saveMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this._metadata ? [4, uo.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];\n          case 1:\n            e4.sent(), e4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.clearMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, uo.of(this._iid).cacheContext.preference.remove(this._metadataKey)];\n          case 1:\n            return e4.sent(), this._metadata = void 0, [2];\n        }\n      });\n    });\n  }, e3.prototype.resume = function() {\n    uo.of(this._iid).logger.debug(\"poll changelog sync resume()\"), this._sync.start(0);\n  }, e3.prototype.pause = function() {\n    uo.of(this._iid).logger.debug(\"poll changelog sync pause()\"), this._sync.stop();\n  }, e3.prototype.close = function() {\n    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Is[this._iid][this._channel.url]);\n  }, e3;\n}(), Ls = function(n2) {\n  function s4(e3) {\n    var s5, r2, a4, i3, o2, u3, c3, l2, h4, d4, _2 = this;\n    return (_2 = n2.call(this) || this).method = ae.GET, _2.path = \"\".concat(Re$3(e3.channelType), \"/\").concat(e3.channelUrl, \"/messages_gap\"), _2.params = se({ prev_start_ts: e3.prevStart, prev_end_ts: e3.prevEnd, prev_cache_count: e3.prevCount, next_start_ts: e3.nextStart, next_end_ts: e3.nextEnd, next_cache_count: e3.nextCount, huge_gap_threshold: null !== (s5 = e3.threshold) && void 0 !== s5 ? s5 : null, reverse: true, custom_types: null !== (r2 = e3.customTypes) && void 0 !== r2 ? r2 : [\"*\"], message_type: null !== (a4 = e3.messageType) && void 0 !== a4 ? a4 : null, include_reply_type: null !== (i3 = e3.replyType) && void 0 !== i3 ? i3 : Q.NONE, include_reactions_summary: null === (o2 = e3.includeReactions) || void 0 === o2 || o2, include_meta_array: null === (u3 = e3.includeMetaArray) || void 0 === u3 || u3, include_thread_info: null === (c3 = e3.includeThreadInfo) || void 0 === c3 || c3, include_parent_message_info: null === (l2 = e3.includeParentMessageInfo) || void 0 === l2 || l2, with_sorted_meta_array: null === (h4 = e3.includeMetaArray) || void 0 === h4 || h4, show_subchannel_messages_only: null !== (d4 = e3.showSubchannelMessagesOnly) && void 0 !== d4 && d4, include_poll_details: true, checking_continuous_messages: e3.checkingContinuousMessages }), _2;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Ds = function(t4) {\n  function n2(e3, n3) {\n    var s4, r2, a4, i3, o2, u3, c3 = this;\n    return (c3 = t4.call(this, e3, n3) || this).isHugeGap = n3.is_huge_gap, c3.prevMessages = (null !== (s4 = n3.prev_messages) && void 0 !== s4 ? s4 : []).map(function(t5) {\n      return At$1(e3, t5);\n    }), c3.prevHasMore = null !== (r2 = n3.prev_hasmore) && void 0 !== r2 && r2, c3.isContinuousPrevMessages = null !== (a4 = n3.is_continuous_prev_messages) && void 0 !== a4 && a4, c3.nextMessages = (null !== (i3 = n3.next_messages) && void 0 !== i3 ? i3 : []).map(function(t5) {\n      return At$1(e3, t5);\n    }), c3.nextHasmore = null !== (o2 = n3.next_hasmore) && void 0 !== o2 && o2, c3.isContinuousNextMessages = null !== (u3 = n3.is_continuous_next_messages) && void 0 !== u3 && u3, c3;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), xs = { includeMetaArray: true, includeReactions: true, includeThreadInfo: true, includeParentMessageInfo: true };\n!function(e3) {\n  e3.CACHE_AND_REPLACE_BY_API = \"cache_and_replace_by_api\";\n}(ms || (ms = {}));\nvar Rs, Fs, ks, Ps = function() {\n  function e3() {\n    this._onCacheResult = ut$1, this._onApiResult = ut$1;\n  }\n  return e3.prototype._invokeResponse = function(e4, t4, n2) {\n    var s4 = this;\n    kr$1(function() {\n      return r$1(s4, void 0, void 0, function() {\n        return s$1(this, function(s5) {\n          switch (e4) {\n            case \"local\":\n              this._onCacheResult(t4, n2);\n              break;\n            case \"remote\":\n              this._onApiResult(t4, n2);\n          }\n          return [2];\n        });\n      });\n    });\n  }, e3.prototype.onCacheResult = function(e4) {\n    return this._onCacheResult = e4, this;\n  }, e3.prototype.onApiResult = function(e4) {\n    return this._onApiResult = e4, this;\n  }, e3;\n}(), Os = function() {\n  function e3(e4, t4) {\n    var n2 = t4.filter, s4 = t4.startingPoint, r2 = t4.limit, a4 = t4.prevResultLimit, i3 = t4.nextResultLimit, o$1 = t4.channel, u3 = t4.channelManager, c$1 = t4.disableBackgroundSync, l2 = void 0 !== c$1 && c$1, h4 = this;\n    this._messages = [], this._unsentMessages = [], this._isLoadingPrevious = false, this._isLoadingNext = false, this._iid = e4, this._key = \"mc-\".concat(ee()), this._isDisposed = false, this.filter = null != n2 ? n2 : new qs$1(), this._channel = o$1, this._syncRange = new Es({}), this._hasPrevious = true, this._hasNext = true, this._startingPoint = \"number\" == typeof s4 && Number.isFinite(s4) ? s4 : Number.MAX_SAFE_INTEGER, this._limit = r2 || Xr, this._prevResultLimit = null != a4 ? a4 : Math.floor(this._limit / 2), this._nextResultLimit = null != i3 ? i3 : Math.floor(this._limit / 2), this._channelManager = u3;\n    var m4 = uo.of(this._iid).statManager;\n    this._channelManager.subscribeChannelEvent(this._key, { onUpdate: function(e5, t5) {\n      var n3 = t5.source, s5 = e5.findIndex(function(e6) {\n        return e6.isIdentical(h4.channel);\n      });\n      s5 >= 0 && (h4._replaceChannelOfCollection(e5[s5]), h4.channel._runIfHandleableWithGroupChannel(function(e6) {\n        switch (n3) {\n          case no.EVENT_CHANNEL_UPDATED:\n            for (var s6 = false, r3 = 0; r3 < h4._messages.length; r3++) {\n              if (h4._messages[r3].createdAt >= e6.messageOffsetTimestamp) {\n                s6 = true;\n                var a5 = r3;\n                if (a5 > 0) {\n                  var i4 = h4._messages.splice(0, a5);\n                  h4._removeMessagesFromView(i4.map(function(e7) {\n                    return h4.keyOf(e7);\n                  }), no.EVENT_MESSAGE_OFFSET_UPDATED);\n                }\n                break;\n              }\n            }\n            !s6 && h4._messages.length > 0 && h4._removeMessagesFromView(h4._messages.map(function(e7) {\n              return h4.keyOf(e7);\n            }), no.EVENT_MESSAGE_OFFSET_UPDATED);\n            break;\n          case no.EVENT_CHANNEL_UNMUTED:\n            var o2 = uo.of(h4._iid).sdkState, u4 = t5.user;\n            o2.userId === u4.userId && h4._clearCheckMyMutedTimer();\n            break;\n          case no.EVENT_CHANNEL_MUTED:\n            o2 = uo.of(h4._iid).sdkState, u4 = t5.user;\n            o2.userId === u4.userId && -1 !== e6._myMutedRemainingTime && h4._startCheckMyMutedTimer(e6._myMutedRemainingTime);\n            break;\n          case no.EVENT_CHANNEL_LEFT:\n            e6.isPublic && h4._clearCheckMyMutedTimer();\n        }\n        kr$1(function() {\n          return r$1(h4, void 0, void 0, function() {\n            var e7;\n            return s$1(this, function(s7) {\n              return Nn$1(n3) && (null === (e7 = this._handler) || void 0 === e7 ? void 0 : e7.onChannelUpdated) && this._handler.onChannelUpdated(t5, this.channel), [2];\n            });\n          });\n        });\n      }), h4._postprocessChannelUpdateEvent(e5[s5], n3));\n    }, onRemove: function(e5, t5) {\n      var n3 = e5.indexOf(h4.channel.url);\n      n3 >= 0 && h4._channel._runIfHandleableWithGroupChannel(function(s5) {\n        s5.myMemberState = Zt$1.NONE, h4._clearCheckMyMutedTimer(), kr$1(function() {\n          return r$1(h4, void 0, void 0, function() {\n            var e6;\n            return s$1(this, function(n4) {\n              return (null === (e6 = this._handler) || void 0 === e6 ? void 0 : e6.onChannelDeleted) && this._handler.onChannelDeleted(t5, this.channel.url), [2];\n            });\n          });\n        }), h4._postprocessChannelRemoveEvent(e5[n3]);\n      });\n    } }), this._channelManager.subscribeMessageEvent(this._key, { onUpdate: function(e5, t5) {\n      var n3, s5, r3 = [], a5 = [];\n      try {\n        for (var i4 = o(e5), o$12 = i4.next(); !o$12.done; o$12 = i4.next()) {\n          var u4 = o$12.value;\n          u4.channelUrl === h4._channel.url && (h4.filter.match(u4) ? r3.push(u4) : a5.push(h4.keyOf(u4)));\n        }\n      } catch (e6) {\n        n3 = { error: e6 };\n      } finally {\n        try {\n          o$12 && !o$12.done && (s5 = i4.return) && s5.call(i4);\n        } finally {\n          if (n3) throw n3.error;\n        }\n      }\n      if (fo(t5)) {\n        if (r3.length > 0) switch (t5) {\n          case no.LOCAL_MESSAGE_CANCELED:\n          case no.LOCAL_MESSAGE_RESEND_STARTED:\n          case no.EVENT_MESSAGE_SENT_FAILED:\n          case no.EVENT_MESSAGE_SENT_SUCCESS:\n          case no.EVENT_MESSAGE_UPDATED:\n          case no.EVENT_MESSAGE_THREADINFO_UPDATED:\n          case no.EVENT_MESSAGE_REACTION_UPDATED:\n          case no.EVENT_MESSAGE_FEEDBACK_ADDED:\n          case no.EVENT_MESSAGE_FEEDBACK_UPDATED:\n          case no.EVENT_MESSAGE_FEEDBACK_DELETED:\n          case no.SYNC_MESSAGE_CHANGELOGS:\n            h4._updateMessagesToView(r3, t5);\n            break;\n          case no.EVENT_MESSAGE_SENT_PENDING:\n            h4._addMessagesToView(r3, t5);\n            break;\n          case no.EVENT_MESSAGE_RECEIVED:\n            h4.hasNext || h4._addMessagesToView(r3, t5);\n            break;\n          case no.SYNC_MESSAGE_FILL:\n            h4._addMessagesToView(r3, t5);\n        }\n        a5.length > 0 && h4._removeMessagesFromView(a5, t5);\n      }\n      h4._postprocessMessageUpdateEvent(e5, t5);\n    }, onRemove: function(e5, t5) {\n      h4._removeMessagesFromView(e5, t5), h4._postprocessMessageRemoveEvent(e5);\n    }, onRemoveUnsent: function(e5, t5) {\n      h4._removeUnsentMessageFromView(e5, t5);\n    }, onPollChangeLogUpdate: function(e5, t5) {\n      h4._updatePollsToView(e5, t5);\n    }, onPollUpdate: function(e5, t5) {\n      h4._applyPollUpdateEventToView(e5, t5);\n    }, onPollVote: function(e5, t5) {\n      h4._applyPollVoteEventToView(e5, t5);\n    }, onReactionUpdate: function(e5, t5) {\n      h4._applyReactionEventToView(e5, t5);\n    }, onThreadInfoUpdate: function(e5, t5) {\n      h4._applyThreadInfoEventToView(e5, t5);\n    }, onDeletedByRetentionPolicy: function(e5, t5, n3) {\n      t5 === h4.channel.url && h4._messageRetention(e5, n3);\n    } });\n    var g2 = uo.of(this._iid), E3 = g2.cacheContext, C2 = g2.dispatcher, M4 = g2.messageBackgroundSyncThrottleController;\n    this._channel._updateMessageCollectionLastAccessedAt(), C2.dispatch(new Un$1({ channels: [this._channel], context: { source: no.CHANNEL_LASTACCESSEDAT_UPDATED } })), this._backgroundSync = Ss.of(this._iid, this._channel), !l2 && this._shouldStartBackgroundSync() && this._backgroundSync.resume(this._startingPoint), this._changelogSync = As.of(this._iid, this._channel, this.changelogIncludeParams), this._changelogSync.resume(), this._pollChangelogSync = ws.of(this._iid, this._channel, this._hasPollMessage.bind(this)), this._pollChangelogSync.resume(), this._prevFill = new w(this._key, function(e5) {\n      return r$1(h4, void 0, void 0, function() {\n        var t5 = this;\n        return s$1(this, function(n3) {\n          switch (n3.label) {\n            case 0:\n              return [4, M4.run(\"message-fill-sync-\".concat(o$1.url, \"-prev\"), function() {\n                return r$1(t5, void 0, void 0, function() {\n                  var t6, n4, s5, r3, a5, i4, o2;\n                  return s$1(this, function(u4) {\n                    switch (u4.label) {\n                      case 0:\n                        return [4, this._getRemoteMessages(e5, { prevLimit: this._prevResultLimit, source: no.SYNC_MESSAGE_FILL, checkingContinuousMessages: E3.localCacheEnabled, sdkSource: qt$1.INTERNAL_FILL_GAP })];\n                      case 1:\n                        return t6 = u4.sent(), n4 = t6.messages, s5 = t6.isContinuousMessages, n4.length > 0 ? (r3 = Math.min.apply(Math, c([], a$1(n4.map(function(e6) {\n                          return e6.createdAt;\n                        })), false)), this._syncRange.extends(r3), s5 && (null === (a5 = this._backgroundSync) || void 0 === a5 || a5.range.extends(r3)), [2, { hasNext: n4.length >= this._prevResultLimit && this.viewTop < r3, nextToken: this._syncRange.top }]) : (E3.localCacheEnabled && m4.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: \"gap_check\", event: \"cache_fetch\", max_db_size: null !== (o2 = null === (i4 = E3.localCacheConfig) || void 0 === i4 ? void 0 : i4.maxSize) && void 0 !== o2 ? o2 : 0, use_local_cache: E3.localCacheEnabled, starting_point: 0, message_init_policy: \"\" } })), [2, { hasNext: false, nextToken: 0 }]);\n                    }\n                  });\n                });\n              })];\n            case 1:\n              return [2, n3.sent()];\n          }\n        });\n      });\n    }), this._nextFill = new w(this._key, function(e5) {\n      return r$1(h4, void 0, void 0, function() {\n        var t5 = this;\n        return s$1(this, function(n3) {\n          switch (n3.label) {\n            case 0:\n              return [4, M4.run(\"message-fill-sync-\".concat(o$1.url, \"-next\"), function() {\n                return r$1(t5, void 0, void 0, function() {\n                  var t6, n4, s5, r3, a5, i4, o2, u4;\n                  return s$1(this, function(c$12) {\n                    switch (c$12.label) {\n                      case 0:\n                        return [4, this._getRemoteMessages(e5, { nextLimit: this._nextResultLimit, source: no.SYNC_MESSAGE_FILL, checkingHasNext: true, checkingContinuousMessages: E3.localCacheEnabled, sdkSource: qt$1.INTERNAL_FILL_GAP })];\n                      case 1:\n                        return t6 = c$12.sent(), n4 = t6.messages, s5 = t6.isContinuousMessages, r3 = t6.hasNext, n4.length > 0 ? (a5 = Math.max.apply(Math, c([], a$1(n4.map(function(e6) {\n                          return e6.createdAt;\n                        })), false)), this._syncRange.extends(a5), s5 && (null === (i4 = this._backgroundSync) || void 0 === i4 || i4.range.extends(a5)), [2, { hasNext: r3, nextToken: this._syncRange.bottom }]) : (E3.localCacheEnabled && m4.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: \"gap_check\", event: \"cache_fetch\", max_db_size: null !== (u4 = null === (o2 = E3.localCacheConfig) || void 0 === o2 ? void 0 : o2.maxSize) && void 0 !== u4 ? u4 : 0, use_local_cache: E3.localCacheEnabled, starting_point: 0, message_init_policy: \"\" } })), [2, { hasNext: false, nextToken: 0 }]);\n                    }\n                  });\n                });\n              })];\n            case 1:\n              return [2, n3.sent()];\n          }\n        });\n      });\n    }), this._connectionEventContext = C2.on(function(e5) {\n      if (e5 instanceof Fr$1) switch (e5.stateType) {\n        case Rr$1.CONNECTED:\n          Dr$1(function() {\n            return r$1(h4, void 0, void 0, function() {\n              return s$1(this, function(e6) {\n                return this._activate(), [2];\n              });\n            });\n          });\n          break;\n        case Rr$1.LOGOUT:\n          h4.dispose();\n          break;\n        default:\n          h4._clearCheckMyMutedTimer(), h4._prevFill.stop(), h4._nextFill.stop();\n      }\n    });\n  }\n  return e3.prototype.keyOf = function(e4) {\n    return 0;\n  }, Object.defineProperty(e3.prototype, \"changelogIncludeParams\", { get: function() {\n    return { includeReactions: true, includeThreadInfo: true, includeMetaArray: true, includeParentMessageInfo: true };\n  }, enumerable: false, configurable: true }), e3.prototype._postprocessChannelUpdateEvent = function(e4, t4) {\n  }, e3.prototype._postprocessChannelRemoveEvent = function(e4) {\n  }, e3.prototype._postprocessMessageUpdateEvent = function(e4, t4) {\n  }, e3.prototype._postprocessMessageRemoveEvent = function(e4) {\n  }, Object.defineProperty(e3.prototype, \"channel\", { get: function() {\n    return this._channel;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"succeededMessages\", { get: function() {\n    return c([], a$1(this._messages), false);\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"failedMessages\", { get: function() {\n    return this._unsentMessages.filter(function(e4) {\n      return e4.sendingStatus === Z.FAILED;\n    });\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"pendingMessages\", { get: function() {\n    return this._unsentMessages.filter(function(e4) {\n      return e4.sendingStatus === Z.PENDING;\n    });\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"hasPrevious\", { get: function() {\n    return this._hasPrevious;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"hasNext\", { get: function() {\n    return this._hasNext;\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"viewTop\", { get: function() {\n    return Math.min.apply(Math, c(c([], a$1(this._messages.map(function(e4) {\n      return e4.createdAt;\n    })), false), [Number.MAX_SAFE_INTEGER], false));\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"viewBottom\", { get: function() {\n    return Math.max.apply(Math, c(c([], a$1(this._messages.map(function(e4) {\n      return e4.createdAt;\n    })), false), [0], false));\n  }, enumerable: false, configurable: true }), e3.prototype._activate = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return uo.of(this._iid).logger.debug(\"check huge gap\"), this._checkHugeGap(), [4, this._refreshChannel(no.SYNC_CHANNEL_CHANGELOGS)];\n          case 1:\n            return e4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype._replaceChannelOfCollection = function(e4) {\n    this._channel.isGroupChannel() ? this._channel = e4 : this._channel.isFeedChannel() && (this._channel._groupChannel = e4._groupChannel);\n  }, e3.prototype._shouldStartBackgroundSync = function() {\n    var e4 = uo.of(this._iid).cacheContext;\n    return this.channel.isGroupChannel() ? e4.localCacheEnabled && !this.channel.isSuper : e4.localCacheEnabled;\n  }, e3.prototype._setBaseMessageCollectionHandler = function(e4) {\n    this._handler = e4;\n  }, e3.prototype._filterUnderOffsetMessage = function(e4) {\n    return e4;\n  }, e3.prototype._updateChildMessagesInView = function(e4) {\n    var t4 = [];\n    return this._messages.forEach(function(n2) {\n      n2 instanceof yt && n2.parentMessageId === e4.messageId && n2.applyParentMessage(e4) && t4.push(n2);\n    }), t4;\n  }, e3.prototype._updatePollsToView = function(e4, t4) {\n    var n2, s4, r2 = this, a4 = [];\n    try {\n      for (var i3 = o(e4), o$1 = i3.next(); !o$1.done; o$1 = i3.next()) {\n        var u3 = o$1.value, c3 = bs(this._messages, u3.messageId);\n        if (c3 >= 0) {\n          var l2 = this._messages[c3];\n          l2.isUserMessage() && l2.applyPoll(u3), a4.push(l2);\n        }\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        o$1 && !o$1.done && (s4 = i3.return) && s4.call(i3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n    return a4.length > 0 && fo(t4) && kr$1(function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e5, n3, s5;\n        return s$1(this, function(r3) {\n          return e5 = { source: t4 }, a4.length > 0 && (null === (s5 = (n3 = this._handler).onMessagesUpdated) || void 0 === s5 || s5.call(n3, e5, this.channel, a4)), [2];\n        });\n      });\n    }), a4;\n  }, e3.prototype._applyPollUpdateEventToView = function(e4, t4) {\n    var n2 = this, s4 = bs(this._messages, e4.messageId);\n    if (s4 >= 0) {\n      var r2 = this._messages[s4];\n      r2 && r2.isUserMessage() && r2.poll && r2.poll.applyPollUpdateEvent(e4) && fo(t4) && kr$1(function() {\n        return r$1(n2, void 0, void 0, function() {\n          var e5, n3, s5;\n          return s$1(this, function(a4) {\n            return e5 = { source: t4 }, null === (s5 = null === (n3 = this._handler) || void 0 === n3 ? void 0 : n3.onMessagesUpdated) || void 0 === s5 || s5.call(n3, e5, this.channel, [r2]), [2];\n          });\n        });\n      });\n    }\n  }, e3.prototype._applyPollVoteEventToView = function(e4, t4) {\n    var n2 = this, s4 = bs(this._messages, e4.messageId);\n    if (s4 >= 0) {\n      var r2 = this._messages[s4];\n      r2 && r2.isUserMessage() && r2.poll && r2.poll.applyPollVoteEvent(e4) && fo(t4) && kr$1(function() {\n        return r$1(n2, void 0, void 0, function() {\n          var e5, n3, s5;\n          return s$1(this, function(a4) {\n            return e5 = { source: t4 }, null === (s5 = null === (n3 = this._handler) || void 0 === n3 ? void 0 : n3.onMessagesUpdated) || void 0 === s5 || s5.call(n3, e5, this.channel, [r2]), [2];\n          });\n        });\n      });\n    }\n  }, e3.prototype._applyReactionEventToView = function(e4, t4) {\n    var n2 = this, s4 = bs(this._messages, e4.messageId);\n    if (s4 >= 0) {\n      var r2 = this._messages[s4];\n      r2 && (r2.isUserMessage() || r2.isFileMessage() || r2.isMultipleFilesMessage()) && fo(t4) && (r2.applyReactionEvent(e4), kr$1(function() {\n        return r$1(n2, void 0, void 0, function() {\n          var e5, n3, s5;\n          return s$1(this, function(a4) {\n            return e5 = { source: t4 }, null === (s5 = null === (n3 = this._handler) || void 0 === n3 ? void 0 : n3.onMessagesUpdated) || void 0 === s5 || s5.call(n3, e5, this.channel, [r2]), [2];\n          });\n        });\n      }));\n    }\n  }, e3.prototype._applyThreadInfoEventToView = function(e4, t4) {\n    var n2 = this, s4 = bs(this._messages, e4.targetMessageId);\n    if (s4 >= 0) {\n      var r2 = this._messages[s4];\n      r2 && (r2.isUserMessage() || r2.isFileMessage() || r2.isMultipleFilesMessage()) && fo(t4) && (r2.applyThreadInfoUpdateEvent(e4), kr$1(function() {\n        return r$1(n2, void 0, void 0, function() {\n          var e5, n3, s5;\n          return s$1(this, function(a4) {\n            return e5 = { source: t4 }, null === (s5 = null === (n3 = this._handler) || void 0 === n3 ? void 0 : n3.onMessagesUpdated) || void 0 === s5 || s5.call(n3, e5, this.channel, [r2]), [2];\n          });\n        });\n      }));\n    }\n  }, e3.prototype._removeMessagesFromView = function(e4, t4) {\n    var n2, s4, r2 = this, a4 = [], i3 = [], o$1 = function(e5) {\n      var t5 = u3._messages.findIndex(function(t6) {\n        return r2.keyOf(t6) === e5;\n      });\n      if (t5 >= 0) {\n        var n3 = u3._messages[t5];\n        a4.push(u3.keyOf(n3)), i3.push(n3), u3._messages.splice(t5, 1);\n      }\n    }, u3 = this;\n    try {\n      for (var c3 = o(e4), l2 = c3.next(); !l2.done; l2 = c3.next()) {\n        o$1(l2.value);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        l2 && !l2.done && (s4 = c3.return) && s4.call(c3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n    return fo(t4) && i3.length > 0 && kr$1(function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e5, n3, s5;\n        return s$1(this, function(r3) {\n          return e5 = { source: t4 }, null === (s5 = null === (n3 = this._handler) || void 0 === n3 ? void 0 : n3.onMessagesDeleted) || void 0 === s5 || s5.call(n3, e5, this.channel, a4, i3), [2];\n        });\n      });\n    }), a4;\n  }, e3.prototype._messageRetention = function(e4, t4) {\n    var n2, s4, r2 = [];\n    try {\n      for (var a4 = o(this._messages), i3 = a4.next(); !i3.done; i3 = a4.next()) {\n        var o$1 = i3.value;\n        o$1.createdAt <= e4 && r2.push(this.keyOf(o$1));\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        i3 && !i3.done && (s4 = a4.return) && s4.call(a4);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n    r2.length > 0 && this._removeMessagesFromView(r2, t4);\n  }, e3.prototype._removeUnsentMessageFromView = function(e4, t4) {\n    var n2 = this._unsentMessages.findIndex(function(t5) {\n      return t5.reqId === e4;\n    });\n    n2 >= 0 && this._unsentMessages.splice(n2, 1);\n  }, e3.prototype._getLocalMessages = function(e4, t4) {\n    var n2 = t4.prevLimit, s4 = void 0 === n2 ? 0 : n2, r2 = t4.nextLimit, a4 = void 0 === r2 ? 0 : r2, i3 = t4.inclusive, o2 = void 0 === i3 || i3;\n    return r$1(this, void 0, void 0, function() {\n      var t5, n3, r3, i4, u3;\n      return s$1(this, function(c$1) {\n        switch (c$1.label) {\n          case 0:\n            return t5 = [], o2 ? [4, this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url, e4, this.filter)] : [3, 2];\n          case 1:\n            t5 = c$1.sent(), c$1.label = 2;\n          case 2:\n            return s4 > 0 ? [4, this._channelManager.getMessagesFromCache(this._channel.url, e4, \"prev\", this.filter, s4, false)] : [3, 4];\n          case 3:\n            return r3 = c$1.sent(), [3, 5];\n          case 4:\n            r3 = [], c$1.label = 5;\n          case 5:\n            return n3 = r3, a4 > 0 ? [4, this._channelManager.getMessagesFromCache(this._channel.url, e4, \"next\", this.filter, a4, false)] : [3, 7];\n          case 6:\n            return u3 = c$1.sent(), [3, 8];\n          case 7:\n            u3 = [], c$1.label = 8;\n          case 8:\n            return i4 = u3, [2, { messages: c(c(c([], a$1(t5), false), a$1(n3), false), a$1(i4), false).sort(function(e5, t6) {\n              return t6.createdAt - e5.createdAt;\n            }), prevMessagesCount: n3.length, nextMessagesCount: i4.length }];\n        }\n      });\n    });\n  }, e3.prototype._getRemoteMessages = function(e4, t4) {\n    var r2 = t4.prevLimit, a4 = void 0 === r2 ? 0 : r2, i3 = t4.nextLimit, o2 = void 0 === i3 ? 0 : i3, u3 = t4.source, c3 = void 0 === u3 ? no.REQUEST_MESSAGE : u3, l2 = t4.reverse, h4 = void 0 !== l2 && l2, d4 = t4.checkingHasNext, _2 = void 0 !== d4 && d4, v2 = t4.checkingContinuousMessages, m4 = void 0 !== v2 && v2, g2 = t4.sdkSource;\n    return r$1(this, void 0, void 0, function() {\n      var t5, r3;\n      return s$1(this, function(i4) {\n        switch (i4.label) {\n          case 0:\n            return t5 = la.of(this._iid), a4 > 0 || o2 > 0 ? [4, t5._getMessagesByTimestampForCollection(this._channel.url, this._channel.channelType, e4, oe(n$2(n$2(n$2({}, this.filter), xs), { isInclusive: true, reverse: h4, prevResultSize: a4, nextResultSize: o2 })), c3, _2, m4, g2)] : [3, 2];\n          case 1:\n            return r3 = i4.sent(), [3, 3];\n          case 2:\n            r3 = { messages: [], isContinuousMessages: false }, i4.label = 3;\n          case 3:\n            return [2, r3];\n        }\n      });\n    });\n  }, e3.prototype._checkHugeGap = function() {\n    var e4, t4, n2, r2, a4;\n    return r$1(this, void 0, void 0, function() {\n      var i3, o2, u3, c$1, l2, v2, m4, g2, E3, C2, M4, b3, N2, U2, S4, T3, A2, I3, w3, L3, D3, x3, R3, F2, P2, O3 = this;\n      return s$1(this, function(G3) {\n        switch (G3.label) {\n          case 0:\n            return i3 = uo.of(this._iid), o2 = i3.dispatcher, u3 = i3.requestQueue, c$1 = i3.cacheContext, l2 = i3.statManager, v2 = i3.logger, this._messages.length > 0 ? (m4 = this._syncRange.top, g2 = this.viewTop, E3 = this._syncRange.bottom, C2 = this.hasNext ? this.viewBottom : Number.MAX_SAFE_INTEGER, [4, this._channelManager.getCachedMessageCountBetween(this._channel.url, this.filter, g2, m4)]) : [3, 8];\n          case 1:\n            return M4 = G3.sent(), [4, this._channelManager.getCachedMessageCountBetween(this._channel.url, this.filter, E3, C2)];\n          case 2:\n            b3 = G3.sent(), G3.label = 3;\n          case 3:\n            return G3.trys.push([3, 5, 6, 7]), [4, ws$2(function() {\n              return r$1(O3, void 0, void 0, function() {\n                var e5, t5, n3, r3, a5, i4, l3, h4, v3, N3, U3, S5, T4, A3, I4, w4, L4, D4 = this;\n                return s$1(this, function(x4) {\n                  switch (x4.label) {\n                    case 0:\n                      return e5 = new Ls(n$2(n$2({ channelUrl: this._channel.url, channelType: this._channel.channelType, prevStart: g2, prevEnd: m4, prevCount: M4, nextStart: E3, nextEnd: C2, nextCount: b3, checkingContinuousMessages: c$1.localCacheEnabled }, this.filter), xs)), [4, u3.send(e5)];\n                    case 1:\n                      return t5 = x4.sent(), n3 = t5.as(Ds), r3 = n3.isHugeGap, a5 = n3.prevMessages, i4 = void 0 === a5 ? [] : a5, l3 = n3.prevHasMore, h4 = n3.isContinuousPrevMessages, v3 = n3.nextMessages, N3 = void 0 === v3 ? [] : v3, U3 = n3.nextHasmore, S5 = n3.isContinuousNextMessages, r3 ? kr$1(function() {\n                        return r$1(D4, void 0, void 0, function() {\n                          var e6;\n                          return s$1(this, function(t6) {\n                            return (null === (e6 = this._handler) || void 0 === e6 ? void 0 : e6.onHugeGapDetected) && this._handler.onHugeGapDetected(), [2];\n                          });\n                        });\n                      }) : (T4 = this.viewTop, A3 = this.viewBottom, I4 = Math.min.apply(Math, c([Number.MAX_SAFE_INTEGER, T4], a$1(i4.map(function(e6) {\n                        return e6.createdAt;\n                      })), false)), w4 = Math.max.apply(Math, c([0, A3], a$1(N3.map(function(e6) {\n                        return e6.createdAt;\n                      })), false)), o2.dispatch(new po({ messages: i4, source: no.SYNC_MESSAGE_FILL })), o2.dispatch(new po({ messages: N3, source: no.SYNC_MESSAGE_FILL })), this._syncRange.extends(I4, w4), (h4 || S5) && (null === (L4 = this._backgroundSync) || void 0 === L4 || L4.range.extends(I4, w4)), l3 && this._prevFill.start(I4), U3 && this._nextFill.start(w4)), [2];\n                  }\n                });\n              });\n            }, 1)];\n          case 4:\n            return G3.sent(), [3, 7];\n          case 5:\n            return N2 = G3.sent(), v2.debug(\"Failed HugeGap Check \", N2), [3, 7];\n          case 6:\n            return c$1.localCacheEnabled && l2.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: \"gap_check\", event: \"cache_fetch\", max_db_size: null !== (t4 = null === (e4 = c$1.localCacheConfig) || void 0 === e4 ? void 0 : e4.maxSize) && void 0 !== t4 ? t4 : 0, use_local_cache: c$1.localCacheEnabled, starting_point: 0, message_init_policy: \"\" } })), [7];\n          case 7:\n            return [3, 13];\n          case 8:\n            U2 = Date.now(), G3.label = 9;\n          case 9:\n            return G3.trys.push([9, 11, 12, 13]), [4, this._getRemoteMessages(U2, { prevLimit: this._prevResultLimit, nextLimit: this._nextResultLimit, source: no.SYNC_MESSAGE_FILL, checkingHasNext: true, checkingContinuousMessages: c$1.localCacheEnabled, sdkSource: qt$1.INTERNAL_FILL_GAP })];\n          case 10:\n            if (S4 = G3.sent(), T3 = S4.messages, A2 = S4.isContinuousMessages, I3 = S4.hasNext, T3.length > 0) {\n              for (w3 = T3.map(function(e5) {\n                return e5.createdAt;\n              }), L3 = 0, D3 = 0, x3 = 0; x3 < w3.length; x3++) (R3 = w3[x3]) <= U2 ? L3++ : R3 >= U2 && D3++;\n              this._hasPrevious = L3 >= this._prevResultLimit, this._hasNext = null != I3 ? I3 : D3 >= this._nextResultLimit, (P2 = this._syncRange).extends.apply(P2, c([], a$1(w3), false)), A2 && (null === (n2 = this._backgroundSync) || void 0 === n2 || n2.range.extends(this._syncRange.top, this._syncRange.bottom)), this._addMessagesToView(T3, no.SYNC_MESSAGE_FILL);\n            } else this._hasPrevious = false, this._hasNext = false;\n            return [3, 13];\n          case 11:\n            return (F2 = G3.sent()) instanceof b$2 && F2.code === u$1.NOT_FOUND_IN_DATABASE && (this._hasPrevious = false, this._hasNext = false), [3, 13];\n          case 12:\n            return c$1.localCacheEnabled && l2.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, measured_on: \"gap_check\", event: \"cache_fetch\", max_db_size: null !== (a4 = null === (r2 = c$1.localCacheConfig) || void 0 === r2 ? void 0 : r2.maxSize) && void 0 !== a4 ? a4 : 0, use_local_cache: c$1.localCacheEnabled, starting_point: 0, message_init_policy: \"\" } })), [7];\n          case 13:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._loadUnsentMessages = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e4 = this, [4, this._channelManager.getUnsentMessagesFromCache(this._channel.url, this.filter)];\n          case 1:\n            return e4._unsentMessages = t4.sent(), [2];\n        }\n      });\n    });\n  }, e3.prototype._hasPollMessage = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, this._channelManager.getPollMessagesFromCache(this._channel.url, Date.now() + 6e5, this.filter, 1)];\n          case 1:\n            return e4.sent().length > 0 ? [2, true] : [2, false];\n        }\n      });\n    });\n  }, e3.prototype._refreshChannel = function(e4, t4) {\n    return void 0 === t4 && (t4 = false), r$1(this, void 0, void 0, function() {\n      var n2, s4, r2 = this;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            n2 = uo.of(this._iid).logger, a4.label = 1;\n          case 1:\n            return a4.trys.push([1, 3, , 4]), [4, this._channelManager.refreshChannel(this.channel.url, true, e4, t4)];\n          case 2:\n            return a4.sent(), this.channel._runIfHandleableWithGroupChannel(function(e5) {\n              e5.myMutedState === z.MUTED && Dr$1(function() {\n                return r$1(r2, void 0, void 0, function() {\n                  var e6;\n                  return s$1(this, function(t5) {\n                    switch (t5.label) {\n                      case 0:\n                        return [4, this.channel.getMyMutedInfo()];\n                      case 1:\n                        return (e6 = t5.sent()).isMuted && -1 !== e6.remainingDuration && this._startCheckMyMutedTimer(e6.remainingDuration), [2];\n                    }\n                  });\n                });\n              });\n            }), [3, 4];\n          case 3:\n            return s4 = a4.sent(), n2.warn(\"Failed to refresh channel\", s4), [3, 4];\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype._startCheckMyMutedTimer = function(e4) {\n    var t4 = this;\n    this._clearCheckMyMutedTimer(), this._checkMyMutedStateTimer = setTimeout(function() {\n      return r$1(t4, void 0, void 0, function() {\n        var e5, t5, n2, s4 = this;\n        return s$1(this, function(r2) {\n          switch (r2.label) {\n            case 0:\n              this._checkMyMutedStateTimer = void 0, e5 = true, r2.label = 1;\n            case 1:\n              return r2.trys.push([1, 3, 4, 5]), [4, this._channel.getMyMutedInfo()];\n            case 2:\n              return t5 = r2.sent(), e5 = !t5.isMuted, [3, 5];\n            case 3:\n              return r2.sent(), e5 = true, [3, 5];\n            case 4:\n              return e5 && (n2 = uo.of(this._iid).sessionManager, this.channel._runIfHandleableWithGroupChannel(function(e6) {\n                var t6, r3;\n                e6.myMutedState = z.UNMUTED;\n                var a4 = { source: no.EVENT_CHANNEL_UNMUTED, user: n2.currentUser };\n                null === (r3 = null === (t6 = s4._handler) || void 0 === t6 ? void 0 : t6.onChannelUpdated) || void 0 === r3 || r3.call(t6, a4, s4.channel);\n              })), [7];\n            case 5:\n              return [2];\n          }\n        });\n      });\n    }, e4 + 1e3);\n  }, e3.prototype._clearCheckMyMutedTimer = function() {\n    this._checkMyMutedStateTimer && (clearTimeout(this._checkMyMutedStateTimer), this._checkMyMutedStateTimer = void 0);\n  }, e3.prototype._setHasNextAndHasPrevious = function(e4, t4) {\n    for (var n2 = e4.map(function(e5) {\n      return e5.createdAt;\n    }), s4 = 0, r2 = 0, a4 = 0; a4 < n2.length; a4++) {\n      var i3 = n2[a4];\n      i3 < this._startingPoint ? s4++ : i3 > this._startingPoint && r2++;\n    }\n    this._hasPrevious = s4 >= this._prevResultLimit, this._hasNext = null != t4 ? t4 : r2 >= this._nextResultLimit;\n  }, e3.prototype.initialize = function(e4) {\n    var t4 = this, n2 = new Ps();\n    this._messages = [], this._unsentMessages = [], this._syncRange = new Es({}), this._hasNext = true, this._hasPrevious = true;\n    var s4 = [], r2 = { messages: [], prevMessagesCount: 0, nextMessagesCount: 0 };\n    return kr$1(function() {\n      return r$1(t4, void 0, void 0, function() {\n        var t5, a4, i3, o2, u3, c$1 = this;\n        return s$1(this, function(l2) {\n          switch (l2.label) {\n            case 0:\n              return [4, null === (u3 = this._backgroundSync) || void 0 === u3 ? void 0 : u3.loadMetadata()];\n            case 1:\n              if (t5 = l2.sent(), a4 = uo.of(this._iid), i3 = a4.cacheContext, o2 = a4.statManager, e4 === ms.CACHE_AND_REPLACE_BY_API) this._getLocalMessages(this._startingPoint, { prevLimit: this._prevResultLimit, nextLimit: this._nextResultLimit }).then(function(e5) {\n                return r$1(c$1, void 0, void 0, function() {\n                  return s$1(this, function(t6) {\n                    switch (t6.label) {\n                      case 0:\n                        return r2 = e5, s4 = this._filterUnderOffsetMessage(r2.messages), this._addMessagesToView(s4, no.REQUEST_MESSAGE), [4, this._loadUnsentMessages()];\n                      case 1:\n                        return t6.sent(), n2._invokeResponse(\"local\", null, s4), [2];\n                    }\n                  });\n                });\n              }).catch(function(e5) {\n                if (v$2(e5)) throw e5;\n                n2._invokeResponse(\"local\", e5, null);\n              }).finally(function() {\n                return r$1(c$1, void 0, void 0, function() {\n                  var a5, i4, u4, c$12, l3, h4, p2, v2 = this;\n                  return s$1(this, function(f2) {\n                    switch (f2.label) {\n                      case 0:\n                        return a5 = uo.of(this._iid).cacheContext, i4 = true, u4 = true, c$12 = false, a5.localCacheEnabled && s4.length > 0 && (l3 = t5.range).includes.apply(l3, c([], a$1(s4.map(function(e5) {\n                          return e5.createdAt;\n                        })), false)) && (!t5.previousComplete && r2.prevMessagesCount < this._prevResultLimit ? u4 = true : this._startingPoint > t5.range.bottom || r2.nextMessagesCount < this._nextResultLimit ? c$12 = true : u4 = false), [4, this._refreshChannel(no.REFRESH_CHANNEL, c$12)];\n                      case 1:\n                        return f2.sent(), c$12 && this._channel._runIfHandleableWithGroupChannel(function(e5) {\n                          var t6 = Math.max.apply(Math, c([], a$1(s4.map(function(e6) {\n                            return e6.createdAt;\n                          })), false));\n                          e5._latestMessageInfo && t6 >= e5._latestMessageInfo.createdAt && (u4 = false);\n                        }), u4 ? (i4 = false, this._getRemoteMessages(this._startingPoint, { prevLimit: this._prevResultLimit, nextLimit: this._nextResultLimit, reverse: true, checkingHasNext: true, checkingContinuousMessages: a5.localCacheEnabled, sdkSource: qt$1.EXTERNAL_COLLECTION }).then(function(e5) {\n                          var t6, s5, r3, a6 = e5.messages, i5 = e5.isContinuousMessages, o3 = e5.hasNext, u5 = v2._filterUnderOffsetMessage(a6);\n                          v2._messages = [], u5.length > 0 ? (v2._setHasNextAndHasPrevious(u5, o3), (t6 = v2._syncRange).extends.apply(t6, c([], a$1(u5.map(function(e6) {\n                            return e6.createdAt;\n                          })), false)), i5 && (null === (s5 = v2._backgroundSync) || void 0 === s5 ? void 0 : s5.range.overlap(v2._syncRange)) && (null === (r3 = v2._backgroundSync) || void 0 === r3 || r3.range.extends(v2._syncRange.top, v2._syncRange.bottom)), v2._addMessagesToView(u5, no.REQUEST_MESSAGE)) : (v2._hasPrevious = false, v2._hasNext = false), n2._invokeResponse(\"remote\", null, u5);\n                        }).catch(function(e5) {\n                          if (v$2(e5)) throw e5;\n                          n2._invokeResponse(\"remote\", e5, null);\n                        })) : (this._setHasNextAndHasPrevious(s4), n2._invokeResponse(\"remote\", null, s4)), a5.localCacheEnabled && o2.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: \"initial_load\", event: i4 ? \"cache_hit\" : \"cache_miss\", max_db_size: null !== (p2 = null === (h4 = a5.localCacheConfig) || void 0 === h4 ? void 0 : h4.maxSize) && void 0 !== p2 ? p2 : 0, message_init_policy: e4, use_local_cache: a5.localCacheEnabled, collection_id: this._key } })), [2];\n                    }\n                  });\n                });\n              });\n              return o2.put(new Ws$2({ type: Me$1.FEATURE_LOCALCACHE, data: { use_local_cache: i3.localCacheEnabled, collection_interface: { message_init_policy: e4, message: true } } })), [2];\n          }\n        });\n      });\n    }), n2;\n  }, e3.prototype.loadPrevious = function() {\n    var e4, t4, n2;\n    return r$1(this, void 0, void 0, function() {\n      var s4, r2, a4, i3, o2, u3, c$1, l2, v2 = this;\n      return s$1(this, function(m4) {\n        switch (m4.label) {\n          case 0:\n            if (this._isDisposed) throw new b$2({ code: u$1.COLLECTION_DISPOSED, message: \"Collection has been disposed.\" });\n            return s4 = uo.of(this._iid), r2 = s4.cacheContext, a4 = s4.statManager, i3 = s4.logger, this._hasPrevious ? this._isLoadingPrevious ? (i3.warn(\"Messages are already fetching.\"), [2, []]) : (this._isLoadingPrevious = true, o2 = this.viewTop, u3 = [], [4, Dr$1(function() {\n              return r$1(v2, void 0, void 0, function() {\n                var e5;\n                return s$1(this, function(t5) {\n                  switch (t5.label) {\n                    case 0:\n                      return [4, this._getLocalMessages(o2, { prevLimit: this._prevResultLimit, inclusive: false })];\n                    case 1:\n                      return e5 = t5.sent(), u3 = this._filterUnderOffsetMessage(e5.messages), [2];\n                  }\n                });\n              });\n            })]) : [2, []];\n          case 1:\n            return m4.sent(), c$1 = u3.length >= this._prevResultLimit, r2.localCacheEnabled && a4.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: \"load_prev\", event: c$1 ? \"cache_hit\" : \"cache_miss\", max_db_size: null !== (t4 = null === (e4 = r2.localCacheConfig) || void 0 === e4 ? void 0 : e4.maxSize) && void 0 !== t4 ? t4 : 0, use_local_cache: r2.localCacheEnabled, collection_id: this._key, message_init_policy: \"\" } })), c$1 && (null === (n2 = this._backgroundSync) || void 0 === n2 ? void 0 : n2.isWrappingMessages(u3)) ? [3, 3] : (l2 = false, [4, Dr$1(function() {\n              return r$1(v2, void 0, void 0, function() {\n                var e5, t5, n3, s5, r3, i4, c$12, h4 = this;\n                return s$1(this, function(p2) {\n                  switch (p2.label) {\n                    case 0:\n                      return e5 = uo.of(this._iid).cacheContext, [4, this._getRemoteMessages(o2, { prevLimit: this._prevResultLimit, reverse: true, checkingContinuousMessages: e5.localCacheEnabled, sdkSource: qt$1.EXTERNAL_COLLECTION })];\n                    case 1:\n                      return t5 = p2.sent(), (u3 = this._filterUnderOffsetMessage(t5.messages)).length > 0 && ((n3 = this._syncRange).extends.apply(n3, c([], a$1(u3.map(function(e6) {\n                        return e6.createdAt;\n                      })), false)), (null === (s5 = this._backgroundSync) || void 0 === s5 ? void 0 : s5.range.overlap(this._syncRange)) && t5.isContinuousMessages && (l2 = true, null === (r3 = this._backgroundSync) || void 0 === r3 || r3.range.extends(this._syncRange.top))), u3 = u3.filter(function(e6) {\n                        return Ms(h4._messages, e6) < 0;\n                      }), this._hasPrevious = u3.length >= this._prevResultLimit, l2 && a4.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: \"load_prev\", event: \"cache_fetch\", max_db_size: null !== (c$12 = null === (i4 = e5.localCacheConfig) || void 0 === i4 ? void 0 : i4.maxSize) && void 0 !== c$12 ? c$12 : 0, use_local_cache: e5.localCacheEnabled, collection_id: this._key, message_init_policy: \"\" } })), [2];\n                  }\n                });\n              });\n            })]);\n          case 2:\n            return m4.sent(), this._addMessagesToView(u3, no.REQUEST_MESSAGE), [3, 4];\n          case 3:\n            this._hasPrevious = u3.length >= this._prevResultLimit, u3.length > 0 && this._addMessagesToView(u3, no.REQUEST_MESSAGE), m4.label = 4;\n          case 4:\n            return this._isLoadingPrevious = false, [2, u3];\n        }\n      });\n    });\n  }, e3.prototype.loadNext = function() {\n    var e4, t4, n2;\n    return r$1(this, void 0, void 0, function() {\n      var s4, r2, a4, i3, o2, u3, c$1, l2, v2 = this;\n      return s$1(this, function(m4) {\n        switch (m4.label) {\n          case 0:\n            if (this._isDisposed) throw new b$2({ code: u$1.COLLECTION_DISPOSED, message: \"Collection has been disposed.\" });\n            return s4 = uo.of(this._iid), r2 = s4.cacheContext, a4 = s4.statManager, i3 = s4.logger, this._hasNext ? this._isLoadingNext ? (i3.warn(\"Messages are already fetching.\"), [2, []]) : (this._isLoadingNext = true, o2 = this.viewBottom, u3 = [], [4, Dr$1(function() {\n              return r$1(v2, void 0, void 0, function() {\n                var e5;\n                return s$1(this, function(t5) {\n                  switch (t5.label) {\n                    case 0:\n                      return [4, this._getLocalMessages(o2, { nextLimit: this._nextResultLimit, inclusive: false })];\n                    case 1:\n                      return e5 = t5.sent(), u3 = this._filterUnderOffsetMessage(e5.messages), [2];\n                  }\n                });\n              });\n            })]) : [2, []];\n          case 1:\n            return m4.sent(), c$1 = u3.length >= this._nextResultLimit, r2.localCacheEnabled && a4.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: \"load_next\", event: c$1 ? \"cache_hit\" : \"cache_miss\", max_db_size: null !== (t4 = null === (e4 = r2.localCacheConfig) || void 0 === e4 ? void 0 : e4.maxSize) && void 0 !== t4 ? t4 : 0, use_local_cache: r2.localCacheEnabled, collection_id: this._key, message_init_policy: \"\" } })), c$1 && (null === (n2 = this._backgroundSync) || void 0 === n2 ? void 0 : n2.isWrappingMessages(u3)) ? [3, 3] : (l2 = false, [4, Dr$1(function() {\n              return r$1(v2, void 0, void 0, function() {\n                var e5, t5, n3, s5, r3, i4, c$12, h4, p2 = this;\n                return s$1(this, function(f2) {\n                  switch (f2.label) {\n                    case 0:\n                      return e5 = uo.of(this._iid).cacheContext, [4, this._getRemoteMessages(o2, { nextLimit: this._nextResultLimit, reverse: true, checkingHasNext: true, checkingContinuousMessages: e5.localCacheEnabled, sdkSource: qt$1.EXTERNAL_COLLECTION })];\n                    case 1:\n                      return t5 = f2.sent(), (u3 = this._filterUnderOffsetMessage(t5.messages)).length > 0 && ((n3 = this._syncRange).extends.apply(n3, c([], a$1(u3.map(function(e6) {\n                        return e6.createdAt;\n                      })), false)), (null === (s5 = this._backgroundSync) || void 0 === s5 ? void 0 : s5.range.overlap(this._syncRange)) && t5.isContinuousMessages && (l2 = true, null === (r3 = this._backgroundSync) || void 0 === r3 || r3.range.extends(this._syncRange.bottom))), u3 = u3.filter(function(e6) {\n                        return Ms(p2._messages, e6) < 0;\n                      }), this._hasNext = null !== (i4 = t5.hasNext) && void 0 !== i4 ? i4 : u3.length >= this._nextResultLimit, l2 && a4.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: this.channel.url, starting_point: this._startingPoint, measured_on: \"load_next\", event: \"cache_fetch\", max_db_size: null !== (h4 = null === (c$12 = e5.localCacheConfig) || void 0 === c$12 ? void 0 : c$12.maxSize) && void 0 !== h4 ? h4 : 0, use_local_cache: e5.localCacheEnabled, collection_id: this._key, message_init_policy: \"\" } })), [2];\n                  }\n                });\n              });\n            })]);\n          case 2:\n            return m4.sent(), this._addMessagesToView(u3, no.REQUEST_MESSAGE), [3, 4];\n          case 3:\n            this._hasNext = u3.length >= this._nextResultLimit, u3.length > 0 && this._addMessagesToView(u3, no.REQUEST_MESSAGE), m4.label = 4;\n          case 4:\n            return this._isLoadingNext = false, [2, u3];\n        }\n      });\n    });\n  }, e3.prototype.removeFailedMessage = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            if (this._isDisposed) throw new b$2({ code: u$1.COLLECTION_DISPOSED, message: \"Collection has been disposed.\" });\n            return [4, this._channelManager.removeFailedMessageFromCache(e4)];\n          case 1:\n            return n2.sent(), (t4 = this._unsentMessages.findIndex(function(t5) {\n              return t5.reqId === e4;\n            })) > -1 && this._unsentMessages.splice(t4, 1), [2];\n        }\n      });\n    });\n  }, e3.prototype.dispose = function() {\n    var e4, t4, n2, s4 = this;\n    if (!this._isDisposed) {\n      this._isDisposed = true;\n      var r2 = uo.of(this._iid), a4 = r2.cacheContext, i3 = r2.dispatcher;\n      this._messages = [], this._clearCheckMyMutedTimer(), this._channel._runIfHandleableWithGroupChannel(function(e5) {\n        e5.myMemberState !== Zt$1.NONE && (s4._channel._updateMessageCollectionLastAccessedAt(), i3.dispatch(new Un$1({ channels: [s4._channel], context: { source: no.CHANNEL_LASTACCESSEDAT_UPDATED } })));\n      }), a4.localCacheEnabled && (this._prevFill.stop(), this._nextFill.stop()), null === (e4 = this._backgroundSync) || void 0 === e4 || e4.close(), null === (t4 = this._changelogSync) || void 0 === t4 || t4.close(), null === (n2 = this._pollChangelogSync) || void 0 === n2 || n2.close(), this._channelManager.unsubscribeChannelEvent(this._key), this._channelManager.unsubscribeMessageEvent(this._key), this._connectionEventContext && this._connectionEventContext.close();\n    }\n  }, e3;\n}(), Hs = function(t4) {\n  function n2(e3, n3) {\n    return t4.call(this, e3, n$2(n$2({}, n3), { channelManager: ys.of(e3) })) || this;\n  }\n  return t$2(n2, t4), n2.prototype.keyOf = function(e3) {\n    return e3.messageId;\n  }, n2.prototype.initialize = function(e3) {\n    return t4.prototype.initialize.call(this, e3);\n  }, n2.prototype.setMessageCollectionHandler = function(e3) {\n    this._setBaseMessageCollectionHandler(e3);\n  }, n2.prototype._addMessagesToView = function(e3, t5) {\n    var n3, s4, r2 = this, a4 = this._filterUnderOffsetMessage(e3), i3 = [], o$1 = [];\n    try {\n      for (var u3 = o(a4), c$1 = u3.next(); !c$1.done; c$1 = u3.next()) {\n        var l2 = c$1.value;\n        if (t5 === no.SYNC_MESSAGE_FILL) {\n          if (l2.messageId > 0) {\n            if ((E3 = Ms(this._messages, l2)) < 0) {\n              Ms(this._unsentMessages, l2) < 0 && i3.push(l2);\n              var h4 = Ns(this._messages, l2);\n              this._messages.splice(h4, 0, l2);\n            }\n          } else if (l2 instanceof _t) {\n            (E3 = Ms(this._unsentMessages, l2)) < 0 && Ms(this._messages, l2) < 0 && (this._unsentMessages.push(l2), i3.push(l2));\n          }\n        } else if (l2.messageId > 0) {\n          if ((E3 = Ms(this._messages, l2)) < 0) {\n            var m4 = Ms(this._unsentMessages, l2);\n            m4 < 0 ? i3.push(l2) : (this._unsentMessages.splice(m4, 1), o$1.push(l2));\n            h4 = Ns(this._messages, l2);\n            this._messages.splice(h4, 0, l2);\n          } else o$1.push(l2), this._messages[E3] = l2;\n          if (l2.updatedAt > 0) {\n            var g2 = this._updateChildMessagesInView(l2);\n            o$1.push.apply(o$1, c([], a$1(g2), false));\n          }\n        } else if (l2 instanceof _t) {\n          var E3;\n          (E3 = Ms(this._unsentMessages, l2)) < 0 ? Ms(this._messages, l2) < 0 && (this._unsentMessages.push(l2), i3.push(l2)) : (o$1.push(l2), this._unsentMessages[E3] = l2);\n        }\n      }\n    } catch (e4) {\n      n3 = { error: e4 };\n    } finally {\n      try {\n        c$1 && !c$1.done && (s4 = u3.return) && s4.call(u3);\n      } finally {\n        if (n3) throw n3.error;\n      }\n    }\n    fo(t5) && kr$1(function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e4, n4, s5, r3, a5;\n        return s$1(this, function(u4) {\n          return e4 = { source: t5 }, i3.length > 0 && (null === (s5 = null === (n4 = this._handler) || void 0 === n4 ? void 0 : n4.onMessagesAdded) || void 0 === s5 || s5.call(n4, e4, this.channel, i3)), o$1.length > 0 && (null === (a5 = null === (r3 = this._handler) || void 0 === r3 ? void 0 : r3.onMessagesUpdated) || void 0 === a5 || a5.call(r3, e4, this.channel, o$1)), [2];\n        });\n      });\n    });\n  }, n2.prototype._updateMessagesToView = function(e3, t5) {\n    var n3, s4, r2 = this, a4 = [], i3 = [], o$1 = [];\n    try {\n      for (var u3 = o(e3), c$1 = u3.next(); !c$1.done; c$1 = u3.next()) {\n        var l2, h4 = c$1.value;\n        if (h4.messageId > 0) if ((l2 = Ms(this._messages, h4)) >= 0) i3.push(h4), this._messages[l2] = h4;\n        else {\n          var m4 = Ms(this._unsentMessages, h4);\n          if (m4 >= 0) {\n            var g2 = a$1(this._unsentMessages.splice(m4, 1), 1)[0];\n            if (this.hasNext && g2) o$1.push(g2);\n            else {\n              i3.push(h4);\n              var E3 = Ns(this._messages, h4);\n              this._messages.splice(E3, 0, h4);\n            }\n          } else {\n            var C2 = this._messages.map(function(e4) {\n              return e4.createdAt;\n            });\n            (h4.createdAt < Math.min.apply(Math, c([], a$1(C2), false)) && !this._hasPrevious || h4.createdAt > Math.max.apply(Math, c([], a$1(C2), false)) && !this._hasNext) && a4.push(h4);\n          }\n        }\n        else if (h4 instanceof _t) (l2 = Ms(this._unsentMessages, h4)) >= 0 && (i3.push(h4), this._unsentMessages[l2] = h4);\n      }\n    } catch (e4) {\n      n3 = { error: e4 };\n    } finally {\n      try {\n        c$1 && !c$1.done && (s4 = u3.return) && s4.call(u3);\n      } finally {\n        if (n3) throw n3.error;\n      }\n    }\n    return fo(t5) && kr$1(function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e4, n4, s5, r3, u4;\n        return s$1(this, function(c3) {\n          return e4 = { source: t5 }, i3.length > 0 ? null === (s5 = null === (n4 = this._handler) || void 0 === n4 ? void 0 : n4.onMessagesUpdated) || void 0 === s5 || s5.call(n4, e4, this.channel, i3) : o$1.length > 0 ? null === (u4 = null === (r3 = this._handler) || void 0 === r3 ? void 0 : r3.onMessagesDeleted) || void 0 === u4 || u4.call(r3, e4, this.channel, [], o$1) : a4.length > 0 && this._addMessagesToView(a4, t5), [2];\n        });\n      });\n    }), i3;\n  }, n2;\n}(Os), Gs = { coverUrl: void 0, coverImage: void 0, isDistinct: void 0, isPublic: void 0, isDiscoverable: void 0, accessCode: void 0, name: void 0, data: void 0, customType: void 0, operatorUserIds: void 0, messageSurvivalSeconds: void 0 }, Vs = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.token, a4 = e3.limit, i3 = e3.order, o2 = e3.mutedMemberFilter, u3 = e3.memberStateFilter, c3 = e3.nicknameStartsWithFilter, l2 = e3.operatorFilter;\n    return (n3 = t4.call(this) || this).method = ae.GET, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/members\"), n3.params = { token: r2, limit: a4, order: i3, muted_member_filter: o2, member_state_filter: u3, nickname_startswith: c3, operator_filter: l2, show_member_is_muted: true, show_read_receipt: true, show_delivery_receipt: true }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Bs = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    s4.members = [];\n    var r2 = n3.next, a4 = n3.members;\n    return s4.token = r2, a4 && a4.length > 0 && (s4.members = a4.map(function(t5) {\n      return new un$1(e3, t5);\n    })), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2);\n!function(e3) {\n  e3.ALL = \"all\", e3.MUTED = \"muted\", e3.UNMUTED = \"unmuted\";\n}(Rs || (Rs = {})), function(e3) {\n  e3.MEMBER_NICKNAME_ALPHABETICAL = \"member_nickname_alphabetical\", e3.OPERATOR_THEN_MEMBER_ALPHABETICAL = \"operator_then_member_alphabetical\";\n}(Fs || (Fs = {})), function(e3) {\n  e3.ALL = \"all\", e3.JOINED = \"joined_only\", e3.INVITED = \"invited_only\", e3.INVITED_BY_FRIEND = \"invited_by_friend\", e3.INVITED_BY_NON_FRIEND = \"invited_by_non_friend\";\n}(ks || (ks = {}));\nvar qs = function(t4) {\n  function a4(e3, n2, s4) {\n    var r2, a5, o2, u3, c3 = this;\n    return (c3 = t4.call(this, e3, n2, H$1.GROUP, s4) || this).mutedMemberFilter = Rs.ALL, c3.memberStateFilter = ks.ALL, c3.nicknameStartsWithFilter = null, c3.operatorFilter = rn$1.ALL, c3.order = Fs.MEMBER_NICKNAME_ALPHABETICAL, c3.mutedMemberFilter = null !== (r2 = s4.mutedMemberFilter) && void 0 !== r2 ? r2 : Rs.ALL, c3.memberStateFilter = null !== (a5 = s4.memberStateFilter) && void 0 !== a5 ? a5 : ks.ALL, c3.nicknameStartsWithFilter = null !== (o2 = s4.nicknameStartsWithFilter) && void 0 !== o2 ? o2 : null, c3.order = null !== (u3 = s4.order) && void 0 !== u3 ? u3 : Fs.MEMBER_NICKNAME_ALPHABETICAL, c3;\n  }\n  return t$2(a4, t4), a4.prototype._validate = function() {\n    return t4.prototype._validate.call(this) && T$2(Rs, this.mutedMemberFilter) && T$2(ks, this.memberStateFilter) && (S$1(\"string\", this.nicknameStartsWithFilter) || null === this.nicknameStartsWithFilter) && T$2(rn$1, this.operatorFilter) && T$2(Fs, this.order);\n  }, a4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, r2, a5, i3, o2;\n      return s$1(this, function(u3) {\n        switch (u3.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e3 = uo.of(this._iid).requestQueue, t5 = new Vs(oe(n$2(n$2({}, this), { token: this._token }))), [4, e3.send(t5)]) : [3, 2] : [3, 5];\n          case 1:\n            return r2 = u3.sent(), a5 = r2.as(Bs), i3 = a5.members, o2 = a5.token, this._token = o2, this._hasNext = !!o2, this._isLoading = false, [2, i3];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, a4;\n}(ko), zs = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.userId, a4 = e3.accessCode;\n    return (n3 = t4.call(this) || this).method = ae.PUT, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/accept\"), n3.params = { user_id: r2, access_code: a4 }, n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Ws = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.channel = new fr(e3, n3), s4.channel.myMemberState = Zt$1.JOINED, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), js = function(n2) {\n  function s4(e3) {\n    var s5 = this, r2 = e3.channelUrl, a4 = e3.isDistinct, i3 = e3.isPublic, o2 = e3.isDiscoverable, u3 = e3.coverUrl, c3 = e3.coverImage, l2 = e3.accessCode, h4 = e3.name, d4 = e3.data, _2 = e3.customType, p2 = e3.operatorUserIds, f2 = e3.messageSurvivalSeconds;\n    return (s5 = n2.call(this) || this).method = ae.PUT, s5.path = \"\".concat(de, \"/\").concat(encodeURIComponent(r2)), s5.params = se({ is_distinct: a4, is_public: i3, is_discoverable: o2, name: h4, data: d4, custom_type: _2, cover_url: u3, cover_file: c3, access_code: l2, operator_ids: p2, message_survival_seconds: f2 }), s5;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), Qs = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.channel = new fr(e3, n3), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Ys = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl;\n    return (n3 = t4.call(this) || this).method = ae.DELETE, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4)), n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(t4) {\n  function n2(e3, n3) {\n    return t4.call(this, e3, n3) || this;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar Ks = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl;\n    return (n3 = t4.call(this) || this).method = ae.DELETE, n3.path = \"\".concat(de, \"/\").concat(encodeURIComponent(s4), \"/hide\"), n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2);\n!function(t4) {\n  function n2() {\n    return null !== t4 && t4.apply(this, arguments) || this;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar Js = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = e3.channelUrl, r2 = e3.countPreference, a4 = t4.call(this) || this;\n    return a4.method = ae.PUT, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/count_preference/\").concat(encodeURIComponent(s4)), a4.params = { count_preference: r2 }, a4;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), Xs = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.countPreference = n3.count_preference, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), Zs = function(n2) {\n  function s4(e3) {\n    var s5 = this, r2 = e3.channelUrl, a4 = e3.locale;\n    return (s5 = n2.call(this) || this).method = ae.PUT, s5.path = \"\".concat(de, \"/\").concat(encodeURIComponent(r2), \"/reset_user_history\"), s5.params = se({ locale: a4 }), s5;\n  }\n  return t$2(s4, n2), s4;\n}(Fe$2), $s = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this, r2 = n3.ts_message_offset;\n    return s4.messageOffsetTimestamp = r2, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), er = n$2(n$2({}, bn$2), { scheduledAt: void 0, file: void 0, fileUrl: void 0, fileName: void 0, mimeType: void 0, fileSize: void 0, thumbnailSizes: void 0, requireAuth: false }), tr = n$2(n$2({}, En$2), { scheduledAt: void 0 }), nr = function(s4) {\n  function r2(e3) {\n    var r3, a4, i3 = this;\n    i3 = s4.call(this) || this;\n    var o2 = [];\n    e3.mentionType === B.USERS && (e3.mentionedUserIds ? o2 = e3.mentionedUserIds : e3.mentionedUsers && (o2 = e3.mentionedUsers.map(function(e4) {\n      return e4.userId;\n    })));\n    var u3 = e3.channelType, c3 = e3.channelUrl, l2 = e3.scheduledMessageId;\n    return i3.method = ae.PUT, i3.path = \"\".concat(Re$3(u3), \"/\").concat(encodeURIComponent(c3), \"/scheduled_messages/\").concat(encodeURIComponent(l2)), i3.params = se(oe({ req_id: e3.reqId, scheduled_at: e3.scheduledAt, message_type: K$1.FILE, url: e3.fileUrl, file_name: e3.fileName, file_size: e3.fileSize, file_type: e3.mimeType, thumbnails: null === (r3 = e3._thumbnails) || void 0 === r3 ? void 0 : r3.map(function(e4) {\n      return Pe$2.payloadify(e4);\n    }), custom_type: e3.customType, data: e3.data, require_auth: e3.requireAuth, mention_type: e3.mentionType, mentioned_user_ids: o2, sorted_metaarray: null === (a4 = e3.metaArrays) || void 0 === a4 ? void 0 : a4.map(function(e4) {\n      return Ve$1.payloadify(e4);\n    }), apple_critical_alert_options: e3.appleCriticalAlertOptions ? Ke$1.payloadify(e3.appleCriticalAlertOptions) : null, push_option: e3.pushNotificationDeliveryOption })), i3;\n  }\n  return t$2(r2, s4), r2;\n}(Fe$2), sr = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.message = new Nt$1(e3, n3), s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), rr = function(s4) {\n  function r2(e3) {\n    var r3, a4 = this;\n    a4 = s4.call(this) || this;\n    var i3 = [];\n    e3.mentionType === B.USERS && (e3.mentionedUserIds ? i3 = e3.mentionedUserIds : e3.mentionedUsers && (i3 = e3.mentionedUsers.map(function(e4) {\n      return e4.userId;\n    })));\n    var o2 = e3.channelType, u3 = e3.channelUrl, c3 = e3.scheduledMessageId;\n    return a4.method = ae.PUT, a4.path = \"\".concat(Re$3(o2), \"/\").concat(encodeURIComponent(u3), \"/scheduled_messages/\").concat(encodeURIComponent(c3)), a4.params = se(oe({ req_id: e3.reqId, scheduled_at: e3.scheduledAt, message_type: K$1.USER, message: e3.message, custom_type: e3.customType, data: e3.data, mention_type: e3.mentionType, mentioned_user_ids: i3, sorted_metaarray: null === (r3 = e3.metaArrays) || void 0 === r3 ? void 0 : r3.map(function(e4) {\n      return Ve$1.payloadify(e4);\n    }), apple_critical_alert_options: e3.appleCriticalAlertOptions ? Ke$1.payloadify(e3.appleCriticalAlertOptions) : null, target_langs: e3.translationTargetLanguages, push_option: e3.pushNotificationDeliveryOption })), a4;\n  }\n  return t$2(r2, s4), r2;\n}(Fe$2);\n!function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.message = new wt(e3, n3), s4;\n  }\n  t$2(n2, t4);\n}(qe$2);\nvar ar, ir, or = function(t4) {\n  function n2(e3) {\n    var n3 = t4.call(this) || this, s4 = e3.channelType, r2 = e3.channelUrl, a4 = e3.scheduledMessageId;\n    return n3.method = ae.DELETE, n3.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/scheduled_messages/\").concat(encodeURIComponent(a4)), n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), ur = function(t4) {\n  function n2(e3) {\n    var n3 = t4.call(this) || this, s4 = e3.channelType, r2 = e3.channelUrl, a4 = e3.scheduledMessageId;\n    return n3.method = ae.POST, n3.path = \"\".concat(Re$3(s4), \"/\").concat(encodeURIComponent(r2), \"/scheduled_messages/\").concat(encodeURIComponent(a4), \"/send_now\"), n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), cr = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = e3.channelUrl, r2 = e3.pushTriggerOption, a4 = t4.call(this) || this;\n    return a4.method = ae.PUT, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/push_preference/\").concat(encodeURIComponent(s4)), a4.params = { push_trigger_option: r2 }, a4;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), lr = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.pushTriggerOption = n3.push_trigger_option, s4.enabled = n3.enable, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), hr = function(t4) {\n  function n2(e3) {\n    var n3 = e3.userId, s4 = e3.channelUrl, r2 = t4.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n3), \"/push_preference/\").concat(encodeURIComponent(s4)), r2;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), dr = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this;\n    return s4.pushTriggerOption = n3.push_trigger_option, s4.enabled = n3.enable, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2), _r = function(t4) {\n  function n2(e3) {\n    var n3 = this, s4 = e3.channelUrl, r2 = e3.channelType;\n    return (n3 = t4.call(this) || this).method = ae.GET, n3.path = \"\".concat(Re$3(r2), \"/\").concat(encodeURIComponent(s4), \"/message_purge_offset\"), n3;\n  }\n  return t$2(n2, t4), n2;\n}(Fe$2), pr = function(t4) {\n  function n2(e3, n3) {\n    var s4 = t4.call(this, e3, n3) || this, r2 = n3.message_purge_offset;\n    return s4.messageDeletionTimestamp = r2, s4;\n  }\n  return t$2(n2, t4), n2;\n}(qe$2);\n!function(e3) {\n  e3.ALL = \"all\", e3.UNREAD_MESSAGE_COUNT_ONLY = \"unread_message_count_only\", e3.UNREAD_MENTION_COUNT_ONLY = \"unread_mention_count_only\", e3.OFF = \"off\";\n}(ar || (ar = {})), function(e3) {\n  e3.UNHIDDEN = \"unhidden\", e3.HIDDEN_ALLOW_AUTO_UNHIDE = \"hidden_allow_auto_unhide\", e3.HIDDEN_PREVENT_AUTO_UNHIDE = \"hidden_prevent_auto_unhide\";\n}(ir || (ir = {}));\nvar fr = function(u3) {\n  function c$1(e3, t4) {\n    var n2, c$12, l2, h4, p2, f2, v2, m4, E3, C2, y4, M4, b3, N2, U2, S4, T3, A2, I3, w3, L3, D3 = this;\n    return (D3 = u3.call(this, e3, t4) || this)._unreadMemberStateMap = /* @__PURE__ */ new Map(), D3._undeliveredMemberStateMap = /* @__PURE__ */ new Map(), D3._typingStatus = /* @__PURE__ */ new Map(), D3._lastMemberCountUpdated = 0, D3._typingStarted = 0, D3._typingEnded = 0, D3._hasBotInfo = { general: false, ai: false }, D3.isDistinct = false, D3.isSuper = false, D3.isBroadcast = false, D3.isExclusive = false, D3.isPublic = false, D3.isDiscoverable = true, D3.isChatNotification = false, D3.isAccessCodeRequired = false, D3.isPushEnabled = false, D3.unreadMessageCount = 0, D3.unreadMentionCount = 0, D3.totalUnreadReplyCount = 0, D3.members = [], D3.memberCount = 0, D3.joinedMemberCount = 0, D3.hiddenState = ir.UNHIDDEN, D3.lastMessage = null, D3.messageOffsetTimestamp = 0, D3.messageSurvivalSeconds = -1, D3.myMemberState = Zt$1.NONE, D3.myRole = V.NONE, D3.myMutedState = z.UNMUTED, D3.myLastRead = 0, D3.myCountPreference = ar.ALL, D3.myPushTriggerOption = _.DEFAULT, D3.inviter = null, D3.invitedAt = 0, D3.joinedAt = 0, D3.lastPinnedMessage = null, D3._latestMessageInfo = null, D3._pinnedMessagesUpdatedAt = 0, D3._myMutedRemainingTime = -1, D3._messageDeletionTimestamp = 0, D3.channelType = H$1.GROUP, D3.isDistinct = null !== (c$12 = t4.is_distinct) && void 0 !== c$12 && c$12, D3.isSuper = null !== (l2 = t4.is_super) && void 0 !== l2 && l2, D3.isBroadcast = null !== (h4 = t4.is_broadcast) && void 0 !== h4 && h4, D3.isExclusive = null !== (p2 = t4.is_exclusive) && void 0 !== p2 && p2, D3.isPublic = null !== (f2 = t4.is_public) && void 0 !== f2 && f2, D3.isDiscoverable = null !== (v2 = t4.is_discoverable) && void 0 !== v2 ? v2 : D3.isPublic, D3.isChatNotification = null !== (m4 = t4.is_chat_notification) && void 0 !== m4 && m4, D3.isAccessCodeRequired = null !== (E3 = t4.is_access_code_required) && void 0 !== E3 && E3, D3.isPushEnabled = null !== (C2 = t4.is_push_enabled) && void 0 !== C2 && C2, Array.isArray(t4.members) && (n2 = D3.members).push.apply(n2, c([], a$1(t4.members.map(function(e4) {\n      return new un$1(D3._iid, e4);\n    })), false)), D3.memberCount = null !== (y4 = t4.member_count) && void 0 !== y4 ? y4 : 0, D3.joinedMemberCount = null !== (M4 = t4.joined_member_count) && void 0 !== M4 ? M4 : 0, D3.hiddenState = T$2(ir, t4.hidden_state) ? t4.hidden_state : ir.UNHIDDEN, D3.messageOffsetTimestamp = null !== (b3 = t4.ts_message_offset) && void 0 !== b3 ? b3 : 0, D3.messageSurvivalSeconds = null !== (N2 = t4.message_survival_seconds) && void 0 !== N2 ? N2 : -1, D3.lastMessage = t4.last_message ? At$1(D3._iid, n$2({ channel_type: D3.channelType }, t4.last_message)) : null, t4.read_receipt && Object.keys(t4.read_receipt).forEach(function(e4) {\n      S$1(\"number\", t4.read_receipt[e4]) && D3._updateUnreadMemberState(e4, t4.read_receipt[e4]);\n    }), t4.delivery_receipt && Object.keys(t4.delivery_receipt).forEach(function(e4) {\n      S$1(\"number\", t4.delivery_receipt[e4]) && D3._updateUndeliveredMemberState(e4, t4.delivery_receipt[e4]);\n    }), D3.myMemberState = T$2(Zt$1, t4.member_state) ? t4.member_state : Zt$1.NONE, D3.myRole = T$2(V, t4.my_role) ? t4.my_role : V.NONE, T$2(z, t4.is_muted) ? D3.myMutedState = t4.is_muted : S$1(\"boolean\", t4.is_muted) ? D3.myMutedState = t4.is_muted ? z.MUTED : z.UNMUTED : D3.myMutedState = z.UNMUTED, D3.myCountPreference = T$2(ar, t4.count_preference) ? t4.count_preference : ar.ALL, D3.myPushTriggerOption = T$2(_, t4.push_trigger_option) ? t4.push_trigger_option : _.ALL, D3.myLastRead = null !== (U2 = t4.user_last_read) && void 0 !== U2 ? U2 : 0, D3.inviter = t4.inviter ? new ls$2(D3._iid, t4.inviter) : null, D3.invitedAt = null !== (S4 = t4.invited_at) && void 0 !== S4 ? S4 : 0, D3.joinedAt = null !== (T3 = t4.joined_ts) && void 0 !== T3 ? T3 : 0, D3._updateUnreadCount(null !== (A2 = t4.unread_message_count) && void 0 !== A2 ? A2 : 0, null !== (I3 = t4.unread_mention_count) && void 0 !== I3 ? I3 : 0), D3.totalUnreadReplyCount = null !== (w3 = t4.total_unread_thread_message_count) && void 0 !== w3 ? w3 : 0, D3.lastPinnedMessage = t4.latest_pinned_message ? At$1(D3._iid, n$2({ channel_type: D3.channelType }, t4.latest_pinned_message)) : null, t4.latest_message && (D3._latestMessageInfo = { messageId: t4.latest_message.message_id, createdAt: t4.latest_message.created_at }), D3._hasBotInfo = { general: !!t4.has_bot, ai: !!t4.has_ai_bot }, D3._messageDeletionTimestamp = null !== (L3 = t4.message_purge_offset) && void 0 !== L3 ? L3 : 0, D3;\n  }\n  return t$2(c$1, u3), Object.defineProperty(c$1.prototype, \"isHidden\", { get: function() {\n    return this.hiddenState !== ir.UNHIDDEN;\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"isTyping\", { get: function() {\n    return this._typingStatus.size > 0;\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"cachedUnreadMemberState\", { get: function() {\n    var e3, t4, n2 = {};\n    try {\n      for (var s4 = o(this._unreadMemberStateMap), r2 = s4.next(); !r2.done; r2 = s4.next()) {\n        var a4 = a$1(r2.value, 2), i3 = a4[0], o$1 = a4[1];\n        n2[i3] = o$1;\n      }\n    } catch (t5) {\n      e3 = { error: t5 };\n    } finally {\n      try {\n        r2 && !r2.done && (t4 = s4.return) && t4.call(s4);\n      } finally {\n        if (e3) throw e3.error;\n      }\n    }\n    return n2;\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"cachedUndeliveredMemberState\", { get: function() {\n    var e3, t4, n2 = {};\n    try {\n      for (var s4 = o(this._undeliveredMemberStateMap), r2 = s4.next(); !r2.done; r2 = s4.next()) {\n        var a4 = a$1(r2.value, 2), i3 = a4[0], o$1 = a4[1];\n        n2[i3] = o$1;\n      }\n    } catch (t5) {\n      e3 = { error: t5 };\n    } finally {\n      try {\n        r2 && !r2.done && (t4 = s4.return) && t4.call(s4);\n      } finally {\n        if (e3) throw e3.error;\n      }\n    }\n    return n2;\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"hasBot\", { get: function() {\n    return this._hasBotInfo.general;\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"hasAiBot\", { get: function() {\n    return this._hasBotInfo.ai;\n  }, enumerable: false, configurable: true }), Object.defineProperty(c$1.prototype, \"messageDeletionTimestamp\", { get: function() {\n    return this._messageDeletionTimestamp;\n  }, enumerable: false, configurable: true }), c$1.payloadify = function(e3) {\n    return se(oe(n$2(n$2({}, u3.payloadify.call(this, e3)), { is_access_code_required: e3.isAccessCodeRequired, is_distinct: e3.isDistinct, is_super: e3.isSuper, is_broadcast: e3.isBroadcast, is_exclusive: e3.isExclusive, is_public: e3.isPublic, is_discoverable: e3.isDiscoverable, is_muted: e3.myMutedState, is_push_enabled: e3.isPushEnabled, unread_message_count: e3.unreadMessageCount, unread_mention_count: e3.unreadMentionCount, total_unread_thread_message_count: e3.totalUnreadReplyCount, push_trigger_option: e3.myPushTriggerOption, count_preference: e3.myCountPreference, hidden_state: e3.hiddenState, member_count: e3.memberCount, joined_member_count: e3.joinedMemberCount, member_state: e3.myMemberState, my_role: e3.myRole, user_last_read: e3.myLastRead, ts_message_offset: e3.messageOffsetTimestamp, message_survival_seconds: e3.messageSurvivalSeconds, read_receipt: e3.cachedUnreadMemberState, delivery_receipt: e3.cachedUndeliveredMemberState, members: e3.members.map(function(e4) {\n      return un$1.payloadify(e4);\n    }), last_message: e3.lastMessage ? Ut$1(e3.lastMessage) : null, inviter: e3.inviter ? ls$2.payloadify(e3.inviter) : null, invited_at: e3.invitedAt, joined_ts: e3.joinedAt, latest_pinned_message: e3.lastPinnedMessage ? Ut$1(e3.lastPinnedMessage) : null, latest_message: e3._latestMessageInfo ? { message_id: e3._latestMessageInfo.messageId, created_at: e3._latestMessageInfo.createdAt } : null, has_bot: e3.hasBot, has_ai_bot: e3.hasAiBot, message_purge_offset: e3.messageDeletionTimestamp })));\n  }, c$1.prototype._shouldUpdateLastMessageWith = function(e3) {\n    if (e3.silent) return false;\n    var t4 = uo.of(this._iid).appInfo;\n    switch (null == t4 ? void 0 : t4.lastMessageThreadingPolicy) {\n      case Mr$1.NONE:\n      case Mr$1.INCLUDE_REPLY:\n        break;\n      case Mr$1.EXCLUDE_REPLY:\n        if (e3.parentMessageId > 0) return false;\n        break;\n      case Mr$1.INCLUDE_REPLY_TO_CHANNEL:\n        if (e3 instanceof _t && e3.parentMessageId > 0 && !e3.replyToChannel) return false;\n    }\n    return !this.lastMessage || this.lastMessage.createdAt < e3.createdAt || this.lastMessage.createdAt === e3.createdAt && this.lastMessage.messageId === e3.messageId && this.lastMessage.updatedAt < e3.updatedAt;\n  }, c$1.prototype._tryUpdateLastMessageAndCallEvents = function(e3, t4) {\n    var n2 = uo.of(this._iid).dispatcher, s4 = ys.of(this._iid);\n    this._updateLastMessage(t4), s4.handlers.map(function(t5) {\n      t5.onChannelChanged && t5.onChannelChanged(e3);\n    }), n2.dispatch(new Un$1({ channels: [e3], context: { source: no.EVENT_MESSAGE_SENT } }));\n  }, c$1.prototype._shouldUpdateUnreadCountWith = function(e3) {\n    var t4 = uo.of(this._iid).appInfo;\n    switch (null == t4 ? void 0 : t4.unreadCountThreadingPolicy) {\n      case Pr$1.NONE:\n      case Pr$1.INCLUDE_REPLY:\n        break;\n      case Pr$1.EXCLUDE_REPLY:\n        if (e3.parentMessageId > 0) return false;\n        break;\n      case Pr$1.INCLUDE_REPLY_TO_CHANNEL:\n        if (e3 instanceof _t && e3.parentMessageId > 0 && !e3.replyToChannel) return false;\n    }\n    return true;\n  }, c$1.prototype._updateLastMessage = function(e3) {\n    return !!this._shouldUpdateLastMessageWith(e3) && (this.lastMessage = e3, true);\n  }, c$1.prototype._updateUnreadCount = function(e3, t4) {\n    if (\"number\" == typeof e3 && e3 >= 0) if (this.myCountPreference === ar.ALL || this.myCountPreference === ar.UNREAD_MESSAGE_COUNT_ONLY) if (this.isExclusive || this.isSuper || this.isBroadcast) {\n      var n2 = uo.of(this._iid).maxSuperGroupChannelUnreadCount;\n      this.unreadMessageCount = n2 && e3 >= n2 ? n2 : e3;\n    } else this.unreadMessageCount = e3;\n    else this.unreadMessageCount = 0;\n    else this.unreadMessageCount = 0;\n    \"number\" == typeof t4 && t4 >= 0 && (this.myCountPreference === ar.ALL || this.myCountPreference === ar.UNREAD_MENTION_COUNT_ONLY) ? this.unreadMentionCount = t4 : this.unreadMentionCount = 0;\n  }, c$1.prototype._updateUnreadMemberState = function(e3, t4) {\n    var n2 = this._unreadMemberStateMap.get(e3);\n    return (!n2 || n2 < t4) && (this._unreadMemberStateMap.set(e3, t4), uo.of(this._iid).sdkState.userId === e3 && (this.myLastRead = t4), true);\n  }, c$1.prototype._updateUndeliveredMemberState = function(e3, t4) {\n    var n2 = this._undeliveredMemberStateMap.get(e3);\n    return (!n2 || n2 < t4) && (this._undeliveredMemberStateMap.set(e3, t4), true);\n  }, c$1.prototype._updateTypingStatus = function(e3, t4) {\n    void 0 === t4 && (t4 = (/* @__PURE__ */ new Date()).getTime()), t4 > 0 ? this._typingStatus.set(e3.userId, { user: e3, ts: t4 }) : this._typingStatus.delete(e3.userId);\n  }, c$1.prototype._clearTypingStatus = function() {\n    this._typingStatus.clear(), this._typingStarted = 0, this._typingEnded = 0;\n  }, c$1.prototype._setLatestMemberCount = function(e3, t4, n2) {\n    var s4 = false;\n    return n2 >= this._lastMemberCountUpdated && (this._lastMemberCountUpdated = n2, s4 = e3 !== this.memberCount || t4 !== this.joinedMemberCount, this.memberCount = e3, this.joinedMemberCount = t4), s4;\n  }, c$1.prototype.isReadMessage = function(e3) {\n    var t4 = uo.of(this._iid).sdkState, n2 = this._unreadMemberStateMap.get(t4.userId);\n    return !!n2 && n2 >= e3.createdAt;\n  }, c$1.prototype.serialize = function() {\n    var e3 = this;\n    return os$2(this, function(t4) {\n      t4.cachedUnreadMemberState = e3.cachedUnreadMemberState, t4.cachedUndeliveredMemberState = e3.cachedUndeliveredMemberState, Object.assign(t4, e3._serializeCachedMetaData());\n    });\n  }, c$1.prototype.createMessageCollection = function(e3) {\n    return void 0 === e3 && (e3 = {}), new Hs(this._iid, n$2(n$2({}, e3), { channel: this }));\n  }, c$1.prototype.createMemberListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new qs(this._iid, this.url, e3);\n  }, c$1.prototype.createThreadedParentMessageListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new _a$2(this._iid, this.url, this.channelType, e3);\n  }, c$1.prototype.addMember = function(e3, t4) {\n    if (void 0 === t4 && (t4 = 0), !this.isExclusive && !this.isSuper && !this.isBroadcast) {\n      var n2 = this.members.findIndex(function(t5) {\n        return t5.userId === e3.userId;\n      });\n      if (n2 > -1) {\n        var s4 = this.members[n2];\n        s4.state === Zt$1.JOINED && (e3.state = s4.state), this.members.splice(n2, 1), this.memberCount--;\n      }\n      this.members.push(e3), this.memberCount++, this._updateUnreadMemberState(e3.userId, t4), this._updateUndeliveredMemberState(e3.userId, t4);\n    }\n  }, c$1.prototype.removeMember = function(e3) {\n    if (!this.isExclusive && !this.isSuper && !this.isBroadcast) {\n      var t4 = e3 instanceof un$1 ? e3.userId : e3, n2 = this.members.findIndex(function(e4) {\n        return e4.userId === t4;\n      });\n      if (n2 > -1) return this.members.splice(n2, 1), this.memberCount--, true;\n    }\n    return false;\n  }, c$1.prototype.getUnreadMemberCount = function(e3) {\n    var t4, n2;\n    if (e3 instanceof _t && !this.isExclusive && !this.isSuper && !this.isBroadcast) {\n      var s4 = uo.of(this._iid).sdkState, r2 = e3.createdAt, a4 = 0;\n      try {\n        for (var i3 = o(this.members), o$1 = i3.next(); !o$1.done; o$1 = i3.next()) {\n          var u4 = o$1.value;\n          if (s4.userId !== u4.userId && u4.state === Zt$1.JOINED && e3.sender.userId !== u4.userId) (this.cachedUnreadMemberState[u4.userId] || 0) < r2 && a4++;\n        }\n      } catch (e4) {\n        t4 = { error: e4 };\n      } finally {\n        try {\n          o$1 && !o$1.done && (n2 = i3.return) && n2.call(i3);\n        } finally {\n          if (t4) throw t4.error;\n        }\n      }\n      return a4;\n    }\n    return 0;\n  }, c$1.prototype.getUndeliveredMemberCount = function(e3) {\n    var t4, n2;\n    if (e3 instanceof _t && !this.isExclusive && !this.isSuper && !this.isBroadcast) {\n      var s4 = uo.of(this._iid).sdkState, r2 = e3.createdAt, a4 = 0;\n      try {\n        for (var i3 = o(this.members), o$1 = i3.next(); !o$1.done; o$1 = i3.next()) {\n          var u4 = o$1.value;\n          if (s4.userId !== u4.userId && u4.state === Zt$1.JOINED && e3.sender.userId !== u4.userId) (this.cachedUndeliveredMemberState[u4.userId] || 0) < r2 && a4++;\n        }\n      } catch (e4) {\n        t4 = { error: e4 };\n      } finally {\n        try {\n          o$1 && !o$1.done && (n2 = i3.return) && n2.call(i3);\n        } finally {\n          if (t4) throw t4.error;\n        }\n      }\n      return a4;\n    }\n    return 0;\n  }, c$1.prototype.getReadMembers = function(e3, t4) {\n    var n2 = this;\n    void 0 === t4 && (t4 = false);\n    var s4 = uo.of(this._iid).sdkState;\n    if (!s4.userId || this.isExclusive || this.isSuper || this.isBroadcast) return [];\n    var r2 = e3 instanceof _t ? e3.sender : null, a4 = [];\n    return this.members.forEach(function(i3) {\n      if (t4 || i3.userId !== s4.userId && i3.userId !== (null == r2 ? void 0 : r2.userId)) {\n        var o2 = n2._unreadMemberStateMap.get(i3.userId);\n        o2 && o2 >= e3.createdAt && a4.push(i3);\n      }\n    }), a4;\n  }, c$1.prototype.getUnreadMembers = function(e3, t4) {\n    var n2 = this;\n    void 0 === t4 && (t4 = false);\n    var s4 = uo.of(this._iid).sdkState;\n    if (!s4.userId || this.isExclusive || this.isSuper || this.isBroadcast) return [];\n    var r2 = e3 instanceof _t ? e3.sender : null, a4 = [];\n    return this.members.forEach(function(i3) {\n      if (t4 || i3.userId !== s4.userId && i3.userId !== (null == r2 ? void 0 : r2.userId)) {\n        var o2 = n2._unreadMemberStateMap.get(i3.userId);\n        o2 && o2 < e3.createdAt && a4.push(i3);\n      }\n    }), a4;\n  }, c$1.prototype.getReadStatus = function(e3) {\n    var t4 = this;\n    void 0 === e3 && (e3 = false);\n    var n2 = uo.of(this._iid).sdkState;\n    if (!n2.userId || this.isExclusive || this.isSuper || this.isBroadcast) return null;\n    var s4 = {};\n    return this.members.forEach(function(r2) {\n      if (e3 || r2.userId !== n2.userId) {\n        var a4 = t4._unreadMemberStateMap.get(r2.userId);\n        s4[r2.userId] = new Ye$1(t4._iid, { channel_url: t4.url, channel_type: t4.channelType, user: un$1.payloadify(r2), ts: null != a4 ? a4 : 0 });\n      }\n    }), s4;\n  }, c$1.prototype.getDeliveryStatus = function(e3) {\n    var t4 = this;\n    void 0 === e3 && (e3 = true);\n    var n2 = uo.of(this._iid).sdkState;\n    if (!n2.userId || this.isExclusive || this.isSuper || this.isBroadcast) return null;\n    var s4 = {};\n    return this.members.forEach(function(r2) {\n      if (e3 || r2.userId !== n2.userId) {\n        var a4 = t4._undeliveredMemberStateMap.get(r2.userId);\n        s4[r2.userId] = new cn$1(t4._iid, { channel_url: t4.url, channel_type: t4.channelType, user: un$1.payloadify(r2), ts: null != a4 ? a4 : 0 });\n      }\n    }), s4;\n  }, c$1.prototype.getTypingUsers = function() {\n    var e3 = [];\n    return this._typingStatus.forEach(function(t4) {\n      var n2 = t4.user;\n      e3.push(n2);\n    }), e3;\n  }, c$1.prototype.invalidateTypingStatus = function() {\n    var e3 = this, t4 = uo.of(this._iid).typingIndicatorInvalidateTime, n2 = Date.now(), s4 = false;\n    return this._typingStatus.forEach(function(r2, a4) {\n      var i3 = r2.ts;\n      n2 - i3 >= t4 && (e3._typingStatus.delete(a4), s4 = true);\n    }), s4;\n  }, c$1.prototype.refresh = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        return [2, this._refresh()];\n      });\n    });\n  }, c$1.prototype._refresh = function(e3) {\n    return void 0 === e3 && (e3 = false), r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2, a4, i3;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return t4 = uo.of(this._iid), n2 = t4.requestQueue, s4 = t4.dispatcher, r2 = new Ln$1({ channelUrl: this.url }), [4, n2.send(r2)];\n          case 1:\n            return a4 = o2.sent(), i3 = a4.as(Dn$1).channel, this._update(i3), e3 || s4.dispatch(new Un$1({ channels: [i3], context: { source: no.REFRESH_CHANNEL } })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.freeze = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return [4, u3.prototype.freeze.call(this)];\n          case 1:\n            return e3.sent(), uo.of(this._iid).dispatcher.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_FROZEN }, isWebSocketEventComing: true })), [2];\n        }\n      });\n    });\n  }, c$1.prototype.unfreeze = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return [4, u3.prototype.unfreeze.call(this)];\n          case 1:\n            return e3.sent(), uo.of(this._iid).dispatcher.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_UNFROZEN }, isWebSocketEventComing: true })), [2];\n        }\n      });\n    });\n  }, c$1.prototype.updateChannel = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, a4, i3, o2, u4;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return t4 = n$2(n$2({}, Gs), e3), cs$2(function(e4) {\n              return S$1(\"string\", e4.coverUrl, true) && (k(e4.coverImage) || S$1(\"string\", e4.coverImage, true)) && S$1(\"boolean\", e4.isDistinct, true) && S$1(\"boolean\", e4.isPublic, true) && S$1(\"boolean\", e4.isDiscoverable, true) && S$1(\"string\", e4.accessCode, true) && S$1(\"string\", e4.name, true) && S$1(\"string\", e4.data, true) && S$1(\"string\", e4.customType, true) && C$1(\"string\", e4.operatorUserIds, true) && S$1(\"number\", e4.messageSurvivalSeconds, true);\n            }(t4)).throw(b$2.invalidParameters), n2 = uo.of(this._iid), r2 = n2.dispatcher, a4 = n2.requestQueue, i3 = new js(n$2({ channelUrl: this.url }, t4)), [4, a4.send(i3)];\n          case 1:\n            return o2 = c3.sent(), u4 = o2.as(Qs).channel, this._update(u4), r2.dispatch(new Un$1({ channels: [u4], context: { source: no.EVENT_CHANNEL_UPDATED }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.invite = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        return cs$2(e3.every(function(e4) {\n          return e4 instanceof ls$2;\n        })).throw(b$2.invalidParameters), [2, this.inviteWithUserIds(e3.map(function(e4) {\n          return e4.userId;\n        }))];\n      });\n    });\n  }, c$1.prototype.inviteWithUserIds = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2, a4, i3, o2;\n      return s$1(this, function(u4) {\n        switch (u4.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.dispatcher, s4 = t4.requestQueue, r2 = t4.sessionManager, a4 = new ts({ channelUrl: this.url, userIds: e3 }), [4, s4.send(a4)];\n          case 1:\n            return i3 = u4.sent(), o2 = i3.as(ns).channel, this._update(o2), n2.dispatch(new Un$1({ channels: [o2], context: { source: no.EVENT_CHANNEL_INVITED, inviter: r2.currentUser, invitees: [] }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.join = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2, a4, i3, o2;\n      return s$1(this, function(u4) {\n        switch (u4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3, true)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.dispatcher, s4 = t4.sdkState, r2 = t4.requestQueue, a4 = new Jn({ channelUrl: this.url, userId: s4.userId, accessCode: e3 }), [4, r2.send(a4)];\n          case 1:\n            return i3 = u4.sent(), (o2 = i3.as(Xn).channel).myMemberState = this.myMemberState = Zt$1.JOINED, this._update(o2), n2.dispatch(new Un$1({ channels: [o2], context: { source: no.EVENT_CHANNEL_JOINED, users: [] }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.leave = function(e3) {\n    return void 0 === e3 && (e3 = false), r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return t4 = uo.of(this._iid), n2 = t4.sdkState, s4 = t4.requestQueue, r2 = new $n({ channelUrl: this.url, userId: n2.userId, shouldRemoveOperatorStatus: e3 }), [4, s4.send(r2)];\n          case 1:\n            return a4.sent(), this.myMemberState = Zt$1.NONE, [2];\n        }\n      });\n    });\n  }, c$1.prototype.acceptInvitation = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2, a4, i3, o2;\n      return s$1(this, function(u4) {\n        switch (u4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3, true)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.dispatcher, s4 = t4.sdkState, r2 = t4.requestQueue, a4 = new zs({ channelUrl: this.url, userId: s4.userId, accessCode: e3 }), [4, r2.send(a4)];\n          case 1:\n            return i3 = u4.sent(), (o2 = i3.as(Ws).channel).myMemberState = this.myMemberState = Zt$1.JOINED, this._update(o2), n2.dispatch(new Un$1({ channels: [o2], context: { source: no.EVENT_CHANNEL_ACCEPTED_INVITE }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.declineInvitation = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.sdkState, n2 = e3.requestQueue, s4 = new rs({ channelUrl: this.url, userId: t4.userId }), [4, n2.send(s4)];\n          case 1:\n            return r2.sent(), this.myMemberState = Zt$1.NONE, [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.sendUserMessage = function(e3) {\n    var t4 = this, n2 = new nn$2(), s4 = uo.of(this._iid).dispatcher, r2 = N.of(this._iid);\n    return u3.prototype.sendUserMessage.call(this, e3).onPending(function(e4) {\n      r2.completeCurrentAndProcessNextAutoResend(e4), n2._trigger(e4);\n    }).onFailed(function(e4, t5) {\n      t5 && r2.completeCurrentAndProcessNextAutoResend(t5), n2._triggerFailed(e4, t5);\n    }).onSucceeded(function(e4) {\n      r2.completeCurrentAndProcessNextAutoResend(e4), t4._updateLastMessage(e4), ys.of(t4._iid).handlers.map(function(e5) {\n        e5.onChannelChanged && e5.onChannelChanged(t4);\n      }), s4.dispatch(new Un$1({ channels: [t4], context: { source: no.EVENT_MESSAGE_SENT } })), n2._trigger(e4);\n    }), n2;\n  }, c$1.prototype.updateUserMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, s4, r2, a4, i3 = this;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return n2 = uo.of(this._iid).dispatcher, [4, u3.prototype.updateUserMessage.call(this, e3, t4)];\n          case 1:\n            return s4 = o2.sent(), r2 = this._updateLastMessage(s4), a4 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === s4.messageId && (this.lastPinnedMessage = s4, r2 = true, a4 = true), r2 && (ys.of(this._iid).handlers.map(function(e4) {\n              e4.onChannelChanged && e4.onChannelChanged(i3);\n            }), n2.dispatch(new Un$1({ channels: [this], context: { source: a4 ? no.EVENT_PINNED_MESSAGE_UPDATED : no.EVENT_MESSAGE_UPDATED } }))), a4 && ys.of(this._iid).handlers.map(function(e4) {\n              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(i3);\n            }), n2.dispatch(new po({ messages: [s4], source: no.EVENT_MESSAGE_UPDATED })), [2, s4];\n        }\n      });\n    });\n  }, c$1.prototype._autoResendUserMessage = function(e3) {\n    var t4 = this, n2 = new nn$2(), s4 = uo.of(this._iid).dispatcher, r2 = N.of(this._iid);\n    return u3.prototype._autoResendUserMessage.call(this, e3).onPending(function(e4) {\n      r2.completeCurrentAndProcessNextAutoResend(e4), n2._trigger(e4);\n    }).onFailed(function(e4, t5) {\n      r2.completeCurrentAndProcessNextAutoResend(t5), n2._triggerFailed(e4, t5);\n    }).onSucceeded(function(e4) {\n      var a4 = ys.of(t4._iid);\n      r2.completeCurrentAndProcessNextAutoResend(e4), t4._updateLastMessage(e4), a4.handlers.map(function(e5) {\n        e5.onChannelChanged && e5.onChannelChanged(t4);\n      }), s4.dispatch(new Un$1({ channels: [t4], context: { source: no.EVENT_MESSAGE_SENT } })), n2._trigger(e4);\n    }), n2;\n  }, c$1.prototype.sendFileMessage = function(e3) {\n    var t4 = this, n2 = new nn$2(), s4 = uo.of(this._iid).dispatcher, r2 = N.of(this._iid);\n    return u3.prototype.sendFileMessage.call(this, e3).onPending(function(e4) {\n      r2.completeCurrentAndProcessNextAutoResend(e4), n2._trigger(e4);\n    }).onFailed(function(e4, t5) {\n      t5 && r2.completeCurrentAndProcessNextAutoResend(t5), n2._triggerFailed(e4, t5);\n    }).onSucceeded(function(e4) {\n      var a4 = ys.of(t4._iid);\n      r2.completeCurrentAndProcessNextAutoResend(e4), t4._updateLastMessage(e4), a4.handlers.map(function(e5) {\n        e5.onChannelChanged && e5.onChannelChanged(t4);\n      }), s4.dispatch(new Un$1({ channels: [t4], context: { source: no.EVENT_MESSAGE_SENT } })), n2._trigger(e4);\n    }), n2;\n  }, c$1.prototype.sendMultipleFilesMessage = function(e3) {\n    var t4 = this, n2 = new fi(), s4 = uo.of(this._iid).dispatcher;\n    return u3.prototype.sendMultipleFilesMessage.call(this, e3).onPending(function(e4) {\n      n2._trigger(e4);\n    }).onFailed(function(e4, t5) {\n      n2._triggerFailed(e4, t5);\n    }).onSucceeded(function(e4) {\n      var r2 = ys.of(t4._iid);\n      t4._updateLastMessage(e4), r2.handlers.map(function(e5) {\n        e5.onChannelChanged && e5.onChannelChanged(t4);\n      }), s4.dispatch(new Un$1({ channels: [t4], context: { source: no.EVENT_MESSAGE_SENT } })), n2._trigger(e4);\n    }).onFileUploaded(function(e4, t5, s5, r2) {\n      n2._triggerOnFileUploaded(e4, t5, s5, r2);\n    }), n2;\n  }, c$1.prototype.updateFileMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, s4, r2, a4, i3 = this;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return n2 = uo.of(this._iid).dispatcher, [4, u3.prototype.updateFileMessage.call(this, e3, t4)];\n          case 1:\n            return s4 = o2.sent(), r2 = this._updateLastMessage(s4), a4 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === s4.messageId && (this.lastPinnedMessage = s4, r2 = true, a4 = true), r2 && (ys.of(this._iid).handlers.map(function(e4) {\n              e4.onChannelChanged && e4.onChannelChanged(i3);\n            }), n2.dispatch(new Un$1({ channels: [this], context: { source: a4 ? no.EVENT_PINNED_MESSAGE_UPDATED : no.EVENT_MESSAGE_UPDATED } }))), a4 && ys.of(this._iid).handlers.map(function(e4) {\n              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(i3);\n            }), n2.dispatch(new po({ messages: [s4], source: no.EVENT_MESSAGE_UPDATED })), [2, s4];\n        }\n      });\n    });\n  }, c$1.prototype._autoResendFileMessage = function(e3) {\n    var t4 = this, n2 = new nn$2(), s4 = uo.of(this._iid).dispatcher, r2 = N.of(this._iid);\n    return u3.prototype._autoResendFileMessage.call(this, e3).onPending(function(e4) {\n      r2.completeCurrentAndProcessNextAutoResend(e4), n2._trigger(e4);\n    }).onFailed(function(e4, t5) {\n      r2.completeCurrentAndProcessNextAutoResend(t5), n2._triggerFailed(e4, t5);\n    }).onSucceeded(function(e4) {\n      var a4 = ys.of(t4._iid);\n      r2.completeCurrentAndProcessNextAutoResend(e4), t4._updateLastMessage(e4), a4.handlers.map(function(e5) {\n        e5.onChannelChanged && e5.onChannelChanged(t4);\n      }), s4.dispatch(new Un$1({ channels: [t4], context: { source: no.EVENT_MESSAGE_SENT } })), n2._trigger(e4);\n    }), n2;\n  }, c$1.prototype.deleteMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, u3.prototype.deleteMessage.call(this, e3)];\n          case 1:\n            return t4.sent(), 0 === e3.messageId && e3 instanceof _t && uo.of(this._iid).dispatcher.dispatch(new mo({ reqId: e3.reqId, source: no.EVENT_MESSAGE_DELETED })), [2];\n        }\n      });\n    });\n  }, c$1.prototype.hide = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, r2, a4, i3, o2, u4, c3;\n      return s$1(this, function(d4) {\n        switch (d4.label) {\n          case 0:\n            return t4 = n$2(n$2({}, is), e3), cs$2(function(e4) {\n              return S$1(\"boolean\", e4.hidePreviousMessages, true) && S$1(\"boolean\", e4.allowAutoUnhide, true);\n            }(t4)).throw(b$2.invalidParameters), n2 = uo.of(this._iid), r2 = n2.dispatcher, a4 = n2.sdkState, i3 = n2.requestQueue, o2 = new os(n$2({ channelUrl: this.url, userId: a4.userId }, t4)), [4, i3.send(o2)];\n          case 1:\n            return u4 = d4.sent(), c3 = u4.as(us).messageOffsetTimestamp, this.hiddenState = t4.allowAutoUnhide ? ir.HIDDEN_ALLOW_AUTO_UNHIDE : ir.HIDDEN_PREVENT_AUTO_UNHIDE, t4.hidePreviousMessages && this._updateUnreadCount(0, 0), c3 && (this.messageOffsetTimestamp = c3), r2.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_HIDDEN }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.unhide = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.dispatcher, n2 = e3.requestQueue, s4 = new Ks({ channelUrl: this.url }), [4, n2.send(s4)];\n          case 1:\n            return r2.sent(), this.hiddenState = ir.UNHIDDEN, t4.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_UNHIDDEN }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype.delete = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t4 = new Ys({ channelUrl: this.url }), [4, e3.send(t4)];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.markAsRead = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2, a4, i3, o2 = this;\n      return s$1(this, function(u4) {\n        switch (u4.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.sdkState, n2 = e3.dispatcher, s4 = e3.requestQueue, r2 = new Je$1({ channelUrl: this.url }), [4, s4.send(r2)];\n          case 1:\n            return a4 = u4.sent(), i3 = a4.as(Ze$1).readStatus, this._updateUnreadMemberState(t4.userId, i3.readAt), (this.unreadMessageCount > 0 || this.unreadMentionCount > 0) && (this._updateUnreadCount(0, 0), ys.of(this._iid).handlers.map(function(e4) {\n              e4.onChannelChanged && e4.onChannelChanged(o2);\n            })), n2.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_READ } })), [2];\n        }\n      });\n    });\n  }, c$1.prototype.markAsDelivered = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.sdkState, n2 = e3.requestQueue, s4 = new vs({ channelUrl: this.url, userId: t4.userId }), [4, n2.send(s4)];\n          case 1:\n            return r2.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.startTyping = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.requestQueue, n2 = e3.typingIndicatorThrottle, (s4 = (/* @__PURE__ */ new Date()).getTime()) - this._typingStarted >= n2 ? (this._typingStarted = s4, this._typingEnded = 0, r2 = new ls({ channelUrl: this.url, time: this._typingStarted }), [4, t4.send(r2)]) : [3, 2];\n          case 1:\n            a4.sent(), a4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype.endTyping = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.requestQueue, n2 = e3.typingIndicatorThrottle, (s4 = (/* @__PURE__ */ new Date()).getTime()) - this._typingEnded >= n2 ? (this._typingStarted = 0, this._typingEnded = s4, r2 = new ds({ channelUrl: this.url, time: this._typingStarted }), [4, t4.send(r2)]) : [3, 2];\n          case 1:\n            a4.sent(), a4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype.createScheduledUserMessage = function(e3) {\n    e3 = n$2(n$2({}, Ks$1), e3), cs$2(Qs$1(e3)).throw(b$2.invalidParameters);\n    var t4 = new nn$2();\n    return this._createScheduledUserMessage(e3, t4), t4;\n  }, c$1.prototype.updateScheduledUserMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, a4, i3;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return n2 = n$2(n$2({}, tr), t4), cs$2(function(e4) {\n              return Tn$2(e4) && S$1(\"number\", e4.scheduledAt, true);\n            }(n2)).throw(b$2.invalidParameters), r2 = uo.of(this._iid).requestQueue, a4 = new rr(n$2({ reqId: this._generateRequestId(), scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }, n2)), [4, r2.send(a4)];\n          case 1:\n            return i3 = o2.sent(), [2, i3.as(Pr).message];\n        }\n      });\n    });\n  }, c$1.prototype.createScheduledFileMessage = function(e3) {\n    var t4 = this;\n    e3 = n$2(n$2({}, Gs$1), e3), cs$2(Vs$1(e3)).throw(b$2.invalidParameters);\n    var n2 = Date.now(), r2 = this._generateRequestId(), a4 = new nn$2();\n    return ms$2(Ii).then(function() {\n      var s4 = t4._createPendingScheduledFileMessage(e3, r2, n2);\n      kr$1(function() {\n        return r$1(t4, void 0, void 0, function() {\n          return s$1(this, function(e4) {\n            return [2, a4._trigger(s4)];\n          });\n        });\n      });\n    }), k(e3.file) ? this._uploadFileAndUpdateParams(e3).then(function() {\n      return t4._createScheduledFileMessage(e3, a4, r2, n2);\n    }) : this._createScheduledFileMessage(e3, a4, r2, n2), a4;\n  }, c$1.prototype.updateScheduledFileMessage = function(e3, t4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return n2 = n$2(n$2({}, er), t4), cs$2(function(e4) {\n              return In$2(e4) && S$1(\"number\", e4.scheduledAt, true) && (k(e4.file) || S$1(\"string\", e4.fileUrl)) && S$1(\"string\", e4.fileName, true) && S$1(\"string\", e4.mimeType, true) && S$1(\"number\", e4.fileSize, true) && (null === e4.thumbnailSizes || void 0 === e4.thumbnailSizes || e4.thumbnailSizes.every(function(e5) {\n                return S$1(\"object\", e5) && e5.maxWidth > 0 && e5.maxHeight > 0;\n              }));\n            }(n2)).throw(b$2.invalidParameters), k(n2.file) ? [4, this._uploadFileAndUpdateParams(n2)] : [3, 2];\n          case 1:\n            i3.sent(), i3.label = 2;\n          case 2:\n            return r2 = new nr(n$2({ reqId: this._generateRequestId(), scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }, n2)), [4, uo.of(this._iid).requestQueue.send(r2)];\n          case 3:\n            return a4 = i3.sent(), [2, a4.as(sr).message];\n        }\n      });\n    });\n  }, c$1.prototype.cancelScheduledMessage = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = new or({ scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }), [4, uo.of(this._iid).requestQueue.send(t4)];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.sendScheduledMessageNow = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return t4 = new ur({ scheduledMessageId: e3, channelType: this.channelType, channelUrl: this.url }), [4, uo.of(this._iid).requestQueue.send(t4)];\n          case 1:\n            return n2.sent(), [2];\n        }\n      });\n    });\n  }, c$1.prototype.getMyPushTriggerOption = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.sdkState, n2 = e3.requestQueue, s4 = new hr({ userId: t4.userId, channelUrl: this.url }), [4, n2.send(s4)];\n          case 1:\n            return r2 = i3.sent(), a4 = r2.as(dr).pushTriggerOption, this.myPushTriggerOption = a4, [2, a4];\n        }\n      });\n    });\n  }, c$1.prototype.setMyPushTriggerOption = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, a4, i3, o2, u4;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return cs$2(T$2(_, e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.dispatcher, s4 = t4.sdkState, a4 = t4.requestQueue, i3 = new cr({ userId: s4.userId, channelUrl: this.url, pushTriggerOption: e3 }), [4, a4.send(i3)];\n          case 1:\n            return o2 = c3.sent(), u4 = o2.as(lr).pushTriggerOption, this.myPushTriggerOption = u4, n2.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_UPDATED }, isWebSocketEventComing: true })), [2, u4];\n        }\n      });\n    });\n  }, c$1.prototype.setMyCountPreference = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, a4, i3, o2, u4;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return cs$2(T$2(ar, e3)).throw(b$2.invalidParameters), t4 = uo.of(this._iid), n2 = t4.dispatcher, s4 = t4.sdkState, a4 = t4.requestQueue, i3 = new Js({ channelUrl: this.url, userId: s4.userId, countPreference: e3 }), [4, a4.send(i3)];\n          case 1:\n            return o2 = c3.sent(), u4 = o2.as(Xs).countPreference, this.myCountPreference = u4, this._updateUnreadCount(this.unreadMessageCount, this.unreadMentionCount), n2.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_UPDATED }, isWebSocketEventComing: true })), [2, u4];\n        }\n      });\n    });\n  }, c$1.prototype.resetMyHistory = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2, a4, i3;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.dispatcher, n2 = e3.requestQueue, s4 = e3.sdkState, r2 = new Zs({ channelUrl: this.url, locale: s4.localeForChatbot }), [4, n2.send(r2)];\n          case 1:\n            return a4 = o2.sent(), i3 = a4.as($s).messageOffsetTimestamp, this.messageOffsetTimestamp = i3, this.lastMessage && this.lastMessage.createdAt < i3 && (this.lastMessage = null), this._updateUnreadCount(0, 0), this.totalUnreadReplyCount = 0, t4.dispatch(new Un$1({ channels: [this], context: { source: no.EVENT_CHANNEL_RESET_HISTORY }, isWebSocketEventComing: true })), [2, this];\n        }\n      });\n    });\n  }, c$1.prototype._uploadFileAndUpdateParams = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, s4, r2, a4, i3, o2, u4, c3, l2;\n      return s$1(this, function(h4) {\n        switch (h4.label) {\n          case 0:\n            return k(e3.file) ? (t4 = uo.of(this._iid).requestQueue, n2 = new Re$2({ file: e3.file, channelUrl: this.url, thumbnailSizes: e3.thumbnailSizes, requestId: this._generateRequestId() }), [4, t4.send(n2)]) : [3, 2];\n          case 1:\n            s4 = h4.sent(), r2 = s4.as(xe$1), a4 = r2.url, i3 = r2.fileSize, o2 = void 0 === i3 ? e3.fileSize : i3, u4 = r2.thumbnails, c3 = r2.requireAuth, l2 = void 0 !== c3 && c3, e3.fileUrl = a4, e3.fileSize = o2, e3.requireAuth = l2, e3._thumbnails = u4, h4.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, c$1.prototype.resendMessage = function(e3, t4) {\n    var n2, s4 = this;\n    if (cs$2(e3 instanceof _t && !e3.scheduledInfo && e3.isResendable).throw(b$2.invalidParameters), e3.isUserMessage()) {\n      var r2 = null !== (n2 = e3.messageParams) && void 0 !== n2 ? n2 : ln$2(e3), a4 = new nn$2();\n      return this._sendUserMessage(r2, bi.RESEND, e3.reqId).onPending(function(e4) {\n        a4._trigger(e4);\n      }).onFailed(function(e4, t5) {\n        a4._triggerFailed(e4, t5);\n      }).onSucceeded(function(e4) {\n        s4._tryUpdateLastMessageAndCallEvents(s4, e4), a4._trigger(e4);\n      }), a4;\n    }\n    if (e3.isFileMessage()) {\n      var i3 = this._validateFailedFileMessageHasFile(e3, t4);\n      cs$2(i3).throw(b$2.invalidParameters);\n      r2 = _n$2(e3, t4);\n      var o2 = new nn$2();\n      return this._sendFileMessage(r2, bi.RESEND, e3.reqId).onPending(function(e4) {\n        o2._trigger(e4);\n      }).onFailed(function(e4, t5) {\n        o2._triggerFailed(e4, t5);\n      }).onSucceeded(function(e4) {\n        s4._tryUpdateLastMessageAndCallEvents(s4, e4), o2._trigger(e4);\n      }), o2;\n    }\n    if (e3.isMultipleFilesMessage()) {\n      r2 = e3.messageParams;\n      var u4 = new fi();\n      return this._sendMultipleFilesMessage(r2, bi.RESEND, e3.reqId).onPending(function(e4) {\n        u4._trigger(e4);\n      }).onFailed(function(e4, t5) {\n        u4._triggerFailed(e4, t5);\n      }).onSucceeded(function(e4) {\n        s4._tryUpdateLastMessageAndCallEvents(s4, e4), u4._trigger(e4);\n      }).onFileUploaded(function(e4, t5, n3, s5) {\n        u4._triggerOnFileUploaded(e4, t5, n3, s5);\n      }), u4;\n    }\n  }, c$1.prototype.copyMessage = function(e3, t4) {\n    var n2 = this;\n    if (cs$2(e3 instanceof Ti && t4 instanceof _t && t4.sendingStatus === Z.SUCCEEDED && this.url === t4.channelUrl && !t4.scheduledInfo).throw(b$2.invalidParameters), t4.isUserMessage()) {\n      cs$2(!t4.poll).throw(b$2.notSupportedError);\n      var s4 = un$2(t4), r2 = new nn$2();\n      return e3._sendUserMessage(s4).onPending(function(e4) {\n        r2._trigger(e4);\n      }).onFailed(function(e4, t5) {\n        r2._triggerFailed(e4, t5);\n      }).onSucceeded(function(t5) {\n        e3.isGroupChannel() && n2._tryUpdateLastMessageAndCallEvents(e3, t5), r2._trigger(t5);\n      }), r2;\n    }\n    if (t4.isFileMessage()) {\n      s4 = vn$2(t4);\n      var a4 = new nn$2();\n      return e3._sendFileMessage(s4).onPending(function(e4) {\n        a4._trigger(e4);\n      }).onFailed(function(e4, t5) {\n        a4._triggerFailed(e4, t5);\n      }).onSucceeded(function(t5) {\n        e3.isGroupChannel() && n2._tryUpdateLastMessageAndCallEvents(e3, t5), a4._trigger(t5);\n      }), a4;\n    }\n    if (t4.isMultipleFilesMessage()) {\n      if (e3.isGroupChannel()) {\n        s4 = li(t4);\n        var i3 = new fi();\n        return e3._sendMultipleFilesMessage(s4, bi.COPY).onPending(function(e4) {\n          i3._trigger(e4);\n        }).onFailed(function(e4, t5) {\n          i3._triggerFailed(e4, t5);\n        }).onSucceeded(function(t5) {\n          n2._tryUpdateLastMessageAndCallEvents(e3, t5), i3._trigger(t5);\n        }).onFileUploaded(function(e4, t5, n3, s5) {\n          i3._triggerOnFileUploaded(e4, t5, n3, s5);\n        }), i3;\n      }\n      throw b$2.channelTypeNotSupportedError;\n    }\n  }, c$1.prototype.getMessageDeletionTimestamp = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t4, n2, s4, r2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t4 = e3.requestQueue, n2 = e3.dispatcher, s4 = new _r({ channelUrl: this.url, channelType: this.channelType }), [4, t4.send(s4)];\n          case 1:\n            return r2 = i3.sent(), a4 = r2.as(pr).messageDeletionTimestamp, this._messageDeletionTimestamp = a4, n2.dispatch(new Tn$1({ channel: this })), [2, a4];\n        }\n      });\n    });\n  }, c$1;\n}(Ti);\nvar t$1 = function() {\n  this.onUserMuted = ut$1, this.onUserUnmuted = ut$1, this.onUserBanned = ut$1, this.onUserUnbanned = ut$1, this.onChannelChanged = ut$1, this.onChannelDeleted = ut$1, this.onChannelFrozen = ut$1, this.onChannelUnfrozen = ut$1, this.onOperatorUpdated = ut$1, this.onChannelMemberCountChanged = ut$1, this.onMetaDataCreated = ut$1, this.onMetaDataUpdated = ut$1, this.onMetaDataDeleted = ut$1, this.onMetaCounterCreated = ut$1, this.onMetaCounterUpdated = ut$1, this.onMetaCounterDeleted = ut$1, this.onMessageReceived = ut$1, this.onMessageUpdated = ut$1, this.onMessageDeleted = ut$1, this.onMentionReceived = ut$1, this.onReactionUpdated = ut$1, this.onThreadInfoUpdated = ut$1;\n};\nvar De$1, Pe$1 = {}, He$1 = function() {\n  function e3(e4) {\n    var t4 = e4._iid, n2 = e4.limit, a4 = void 0 === n2 ? 100 : n2, r2 = this;\n    this.ref = 0, this._iid = t4, this._limit = a4;\n    var i3, o2 = uo.of(this._iid), l2 = o2.sdkState, u3 = o2.dispatcher, c$1 = o2.logger, p2 = o2.cacheContext, _2 = o2.statManager;\n    this._metadataKey = (i3 = l2.userId, \"sendbird:\".concat(i3, \"@groupchannel/sync.meta\"));\n    var m4 = function(e5) {\n      return \"sendbird:\".concat(e5, \"@groupchannel/sync\");\n    }(l2.userId);\n    this._sync = new w(m4, function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e5, t5, n3, a5, r3, i4, s4, o3, u4, h4, f2, v2, m5, C2, b3, S4;\n        return s$1(this, function(d4) {\n          switch (d4.label) {\n            case 0:\n              return e5 = { hasNext: true, nextToken: \"\" }, [4, this.loadMetadata()];\n            case 1:\n              if (d4.sent(), c$1.debug(\"channel background sync from\", null === (u4 = this._metadata) || void 0 === u4 ? void 0 : u4.token), null === (h4 = this._metadata) || void 0 === h4 ? void 0 : h4.completed) return [3, 14];\n              t5 = { includeEmpty: true, includeMetaData: true, hiddenChannelFilter: sn$1.ALL, order: E.CHRONOLOGICAL }, d4.label = 2;\n            case 2:\n              if (d4.trys.push([2, 9, 12, 13]), t5.order !== E.LATEST_LAST_MESSAGE) return [3, 6];\n              d4.label = 3;\n            case 3:\n              return d4.trys.push([3, 5, , 6]), [4, p2.preference.get(Gr$1(l2.appId))];\n            case 4:\n              return n3 = d4.sent(), t5.includeChatNotification = Boolean(n3), [3, 6];\n            case 5:\n              return d4.sent(), t5.includeChatNotification = false, [3, 6];\n            case 6:\n              return [4, ys.of(this._iid).getMyGroupChannels(null !== (v2 = null === (f2 = this._metadata) || void 0 === f2 ? void 0 : f2.token) && void 0 !== v2 ? v2 : \"\", t5, this._limit, no.SYNC_CHANNEL_BACKGROUND)];\n            case 7:\n              return a5 = d4.sent(), r3 = a5.channels, i4 = a5.token, e5.hasNext = r3.length >= this._limit && !!i4, e5.nextToken = i4, this._metadata && (this._metadata.token = i4, (o3 = this._metadata.range).extends.apply(o3, c([], a$1(r3.map(function(e6) {\n                return e6.createdAt;\n              })), false)), this._metadata.completed = !e5.hasNext), c$1.debug(\"channel background sync progress\", e5), [4, this.saveMetadata()];\n            case 8:\n              return d4.sent(), [3, 13];\n            case 9:\n              return s4 = d4.sent(), c$1.debug(\"channel background sync error\", s4), s4 instanceof b$2 && s4.isInvalidTokenError ? [4, this.clearMetaData()] : [3, 11];\n            case 10:\n              d4.sent(), d4.label = 11;\n            case 11:\n              throw s4;\n            case 12:\n              return _2.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: \"\", measured_on: \"channel_back_sync\", event: \"cache_fetch\", max_db_size: null !== (C2 = null === (m5 = p2.localCacheConfig) || void 0 === m5 ? void 0 : m5.maxSize) && void 0 !== C2 ? C2 : 0, use_local_cache: p2.localCacheEnabled, starting_point: 0, message_init_policy: null !== (S4 = null === (b3 = t5.order) || void 0 === b3 ? void 0 : b3.toString()) && void 0 !== S4 ? S4 : \"\", collection_id: l2.userId } })), [7];\n            case 13:\n              return [3, 15];\n            case 14:\n              e5.hasNext = false, e5.nextToken = \"\", d4.label = 15;\n            case 15:\n              return [2, e5];\n          }\n        });\n      });\n    }), this._connectionEventContext = u3.on(function(e5) {\n      if (e5 instanceof Fr$1) if (e5.stateType === Rr$1.CONNECTED) r2.resume();\n      else r2.pause();\n    });\n  }\n  return e3.of = function(t4) {\n    return Pe$1[t4] || (Pe$1[t4] = new e3({ _iid: t4 })), Pe$1[t4].ref++, Pe$1[t4];\n  }, e3.clear = function(e4) {\n    Pe$1[e4] && (Pe$1[e4].close(), delete Pe$1[e4]);\n  }, Object.defineProperty(e3.prototype, \"range\", { get: function() {\n    var e4, t4;\n    return null !== (t4 = null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.range) && void 0 !== t4 ? t4 : new Es({});\n  }, enumerable: false, configurable: true }), Object.defineProperty(e3.prototype, \"completed\", { get: function() {\n    var e4;\n    return !!(null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.completed);\n  }, enumerable: false, configurable: true }), e3.prototype.loadMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._metadata ? [3, 2] : [4, uo.of(this._iid).cacheContext.preference.get(this._metadataKey)];\n          case 1:\n            e4 = t4.sent(), this._metadata = { token: e4 ? e4.token : \"\", range: new Es(e4 ? e4.range : { top: Number.MAX_SAFE_INTEGER, bottom: 0 }), completed: !!e4 && e4.completed }, t4.label = 2;\n          case 2:\n            return [2, this._metadata];\n        }\n      });\n    });\n  }, e3.prototype.saveMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this._metadata ? [4, uo.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];\n          case 1:\n            return e4.sent(), [2, true];\n          case 2:\n            return [2, false];\n        }\n      });\n    });\n  }, e3.prototype.clearMetaData = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, uo.of(this._iid).cacheContext.preference.remove(this._metadataKey)];\n          case 1:\n            return e4.sent(), this._metadata = void 0, [2];\n        }\n      });\n    });\n  }, e3.prototype.resume = function() {\n    var e4, t4, n2 = uo.of(this._iid), a4 = n2.logger;\n    n2.sessionManager.session.hasSession && (a4.debug(\"channel background sync resume()\"), this._sync.start(null !== (t4 = null === (e4 = this._metadata) || void 0 === e4 ? void 0 : e4.token) && void 0 !== t4 ? t4 : \"\"));\n  }, e3.prototype.pause = function() {\n    uo.of(this._iid).logger.debug(\"channel background sync stop()\"), this._sync.stop();\n  }, e3.prototype.close = function() {\n    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Pe$1[this._iid]);\n  }, e3;\n}(), Re$1 = {}, Ve = function() {\n  function e3(e4) {\n    var t4 = e4._iid, n2 = this;\n    this.ref = 0, this._iid = t4;\n    var a4, r2 = uo.of(this._iid), i3 = r2.logger, o2 = r2.sdkState, l2 = r2.dispatcher, u3 = r2.cacheContext, c3 = r2.statManager;\n    this._metadataKey = (a4 = o2.userId, \"sendbird:\".concat(a4, \"@groupchannel/changelogs.meta\")), this._subscribers = new ne();\n    var p2 = function(e5) {\n      return \"sendbird:\".concat(e5, \"@groupchannel/changelogs\");\n    }(o2.userId);\n    this._sync = new w(p2, function() {\n      return r$1(n2, void 0, void 0, function() {\n        var e5, t5, n3, a5, r3, s4, l3, h4, p3, f2, _2, v2;\n        return s$1(this, function(d4) {\n          switch (d4.label) {\n            case 0:\n              return e5 = { hasNext: true, nextToken: 0 }, [4, this.loadMetadata()];\n            case 1:\n              d4.sent(), i3.debug(\"channel changelog sync from\", null === (f2 = this._metadata) || void 0 === f2 ? void 0 : f2.token), d4.label = 2;\n            case 2:\n              d4.trys.push([2, 9, , 12]), t5 = { includeEmpty: true, includeMetaData: true }, d4.label = 3;\n            case 3:\n              return d4.trys.push([3, 5, , 6]), [4, u3.preference.get(Gr$1(o2.appId))];\n            case 4:\n              return n3 = d4.sent(), t5.includeChatNotification = Boolean(n3), [3, 6];\n            case 5:\n              return d4.sent(), t5.includeChatNotification = false, [3, 6];\n            case 6:\n              return [4, ys.of(this._iid).getMyGroupChannelChangeLogs(null !== (v2 = null === (_2 = this._metadata) || void 0 === _2 ? void 0 : _2.token) && void 0 !== v2 ? v2 : \"\", t5, no.SYNC_CHANNEL_CHANGELOGS)];\n            case 7:\n              return a5 = d4.sent(), r3 = a5.updatedChannels, s4 = a5.deletedChannelUrls, l3 = a5.hasMore, h4 = a5.token, this._subscribers.dispatch(\"progress\", { updatedChannels: r3, deletedChannelUrls: s4, hasMore: l3, token: h4 }), e5.hasNext = l3, e5.nextToken = h4, this._metadata && (this._metadata.token = h4), i3.debug(\"channel changelog sync progress\", e5), [4, this.saveMetadata()];\n            case 8:\n              return d4.sent(), u3.localCacheEnabled && c3.put(new $e$1({ type: Me$1.FEATURE_LOCALCACHE_EVENT, ts: Date.now(), data: { channel_url: \"\", measured_on: \"channel_change_log_sync\", event: r3.length > 0 || s4.length > 0 ? \"cache_miss\" : \"cache_hit\", max_db_size: r3.length, use_local_cache: u3.localCacheEnabled, starting_point: 0, message_init_policy: s4.length.toString(), collection_id: o2.userId } })), [3, 12];\n            case 9:\n              return p3 = d4.sent(), i3.debug(\"channel changelog sync error\", p3), p3 instanceof b$2 && p3.isInvalidTokenError ? [4, this.clearMetadata()] : [3, 11];\n            case 10:\n              d4.sent(), d4.label = 11;\n            case 11:\n              throw p3;\n            case 12:\n              return [2, e5];\n          }\n        });\n      });\n    }), this._sync.on(\"stop\", function() {\n      n2._subscribers.dispatch(\"pause\");\n    }), this._connectionEventContext = l2.on(function(e5) {\n      if (e5 instanceof Fr$1) if (e5.stateType === Rr$1.CONNECTED) n2.resume();\n      else n2.pause();\n    });\n  }\n  return e3.of = function(t4) {\n    return Re$1[t4] || (Re$1[t4] = new e3({ _iid: t4 })), Re$1[t4].ref++, Re$1[t4];\n  }, e3.clear = function(e4) {\n    Re$1[e4] && (Re$1[e4].close(), delete Re$1[e4]);\n  }, Object.defineProperty(e3.prototype, \"isRunning\", { get: function() {\n    return this._sync.isRunning;\n  }, enumerable: false, configurable: true }), e3.prototype.loadMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2, a4;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return this._metadata ? [3, 2] : (e4 = uo.of(this._iid), t4 = e4.cacheContext, n2 = e4.firstConnectedAt, [4, t4.preference.get(this._metadataKey)]);\n          case 1:\n            a4 = r2.sent(), this._metadata = { token: a4 ? a4.token : n2 }, r2.label = 2;\n          case 2:\n            return [2, this._metadata];\n        }\n      });\n    });\n  }, e3.prototype.saveMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return this._metadata ? [4, uo.of(this._iid).cacheContext.preference.set(this._metadataKey, this._metadata)] : [3, 2];\n          case 1:\n            return e4.sent(), [2, true];\n          case 2:\n            return [2, false];\n        }\n      });\n    });\n  }, e3.prototype.clearMetadata = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, uo.of(this._iid).cacheContext.preference.remove(this._metadataKey)];\n          case 1:\n            return e4.sent(), this._metadata = void 0, [2];\n        }\n      });\n    });\n  }, e3.prototype.on = function(e4, t4) {\n    return this._subscribers.on(e4, t4);\n  }, e3.prototype.resume = function() {\n    uo.of(this._iid).sessionManager.session.hasSession && this._sync.start(0);\n  }, e3.prototype.pause = function() {\n    this._sync.stop();\n  }, e3.prototype.close = function() {\n    this.ref--, this.ref <= 0 && (this.ref = 0, this.pause(), this._connectionEventContext.close(), delete Re$1[this._iid]);\n  }, e3;\n}(), je = function(e3, t4) {\n  return e3.findIndex(function(e4) {\n    return e4.isIdentical(t4);\n  });\n}, Ke = function(e3, t4, n2) {\n  if (e3.length > 0) {\n    for (var a4 = je(e3, t4), r2 = 0, i3 = e3.length - 1, s4 = Math.floor((r2 + i3) / 2); r2 < i3; ) {\n      var o2 = ze(e3[s4], t4, n2);\n      if (o2 > 0) i3 = s4, s4 = Math.floor((r2 + i3) / 2);\n      else {\n        if (!(o2 < 0)) return { place: s4, oldPosition: a4 };\n        r2 = s4 + 1, s4 = Math.floor((r2 + i3) / 2);\n      }\n    }\n    return { place: ze(e3[s4], t4, n2) >= 0 ? s4 : s4 + 1, oldPosition: a4 };\n  }\n  return { place: e3.length, oldPosition: -1 };\n}, ze = function(e3, t4, n2) {\n  switch (n2) {\n    case E.LATEST_LAST_MESSAGE:\n      return e3.lastMessage && t4.lastMessage ? 0 === (a4 = t4.lastMessage.createdAt - e3.lastMessage.createdAt) ? t4.createdAt - e3.createdAt : a4 : e3.lastMessage ? -1 : t4.lastMessage ? 1 : t4.createdAt - e3.createdAt;\n    case E.CHRONOLOGICAL:\n      return t4.createdAt - e3.createdAt;\n    case E.CHANNEL_NAME_ALPHABETICAL:\n      var a4;\n      return 0 === (a4 = e3.name.localeCompare(t4.name)) ? e3.createdAt - t4.createdAt : a4;\n    default:\n      return 0;\n  }\n}, Qe = function() {\n  function e3(e4, t4) {\n    var n2 = t4.filter, a4 = void 0 === n2 ? new hn$1() : n2, r2 = t4.order, i3 = void 0 === r2 ? E.LATEST_LAST_MESSAGE : r2, o2 = t4.limit, l2 = void 0 === o2 ? Wr : o2, u3 = t4.includeChangesOnInitialLoad, c3 = void 0 !== u3 && u3, p2 = this;\n    this.channels = [], this._isInitialized = false, this._iid = e4, this._key = \"gcc-\".concat(ee()), this._isDisposed = false, this._isGetRemoteChannelsSucceeded = true, this._includeChangesOnInitialLoad = c3, this.filter = a4, this.order = i3, this._hasMore = true, this._token = \"\", this._limit = l2;\n    var _2 = uo.of(this._iid), m4 = _2.sdkState, g2 = _2.cacheContext, y4 = _2.dispatcher;\n    g2.localCacheEnabled && (this._backgroundSync = He$1.of(e4), this._backgroundSync.resume()), this._changelogSync = Ve.of(e4), this._changelogSync.resume(), ys.of(this._iid).subscribeChannelEvent(this._key, { onUpdate: function(e5, t5) {\n      var n3 = t5.source;\n      if (Nn$1(n3)) {\n        var a5 = e5.filter(function(e6) {\n          return p2.filter.match(e6, m4.userId);\n        }), r3 = e5.filter(function(e6) {\n          return !p2.filter.match(e6, m4.userId);\n        }).map(function(e6) {\n          return e6.url;\n        });\n        a5.length > 0 && p2._addChannelsToView(a5, t5), r3.length > 0 && p2._removeChannelsFromView(r3, t5);\n      }\n    }, onRemove: function(e5, t5) {\n      p2._removeChannelsFromView(e5, t5);\n    } }), y4.on(function(e5) {\n      e5 instanceof Fr$1 && (e5.stateType === Rr$1.CONNECTED ? p2._isGetRemoteChannelsSucceeded || r$1(p2, void 0, void 0, function() {\n        return s$1(this, function(e6) {\n          switch (e6.label) {\n            case 0:\n              return [4, this._revokeLoadMore()];\n            case 1:\n              return e6.sent(), [2];\n          }\n        });\n      }) : e5.stateType === Rr$1.LOGOUT && p2.dispose());\n    });\n  }\n  return Object.defineProperty(e3.prototype, \"hasMore\", { get: function() {\n    return !this._isDisposed && this._hasMore;\n  }, enumerable: false, configurable: true }), e3.prototype.setGroupChannelCollectionHandler = function(e4) {\n    this._handler = e4;\n  }, e3.prototype._addChannelsToView = function(e4, t4, n2) {\n    var a4, r2, i3, o$1, l2 = this;\n    void 0 === n2 && (n2 = false);\n    var u3 = [], c3 = [], h4 = [];\n    try {\n      for (var p2 = o(e4), f2 = p2.next(); !f2.done; f2 = p2.next()) {\n        var _2 = f2.value, v2 = je(this.channels, _2);\n        v2 >= 0 && this.channels.splice(v2, 1);\n        var m4 = Ke(this.channels, _2, this.order).place;\n        if (v2 < 0) m4 === this.channels.length ? !n2 && this._hasMore || (u3.push(_2), this.channels.push(_2)) : (u3.push(_2), this.channels.splice(m4, 0, _2));\n        else switch (t4.source) {\n          case no.EVENT_CHANNEL_UPDATED:\n          case no.EVENT_MESSAGE_RECEIVED:\n          case no.SYNC_CHANNEL_CHANGELOGS:\n          case no.EVENT_MESSAGE_SENT:\n            this.order === E.CHANNEL_NAME_ALPHABETICAL && this._hasMore && m4 === this.channels.length ? h4.push(_2) : (this.channels.splice(m4, 0, _2), c3.push(_2));\n            break;\n          default:\n            this.channels.splice(m4, 0, _2), c3.push(_2);\n        }\n      }\n    } catch (e5) {\n      a4 = { error: e5 };\n    } finally {\n      try {\n        f2 && !f2.done && (r2 = p2.return) && r2.call(p2);\n      } finally {\n        if (a4) throw a4.error;\n      }\n    }\n    if (h4.length > 0) try {\n      for (var g2 = o(h4), y4 = g2.next(); !y4.done; y4 = g2.next()) {\n        _2 = y4.value;\n        var C2 = je(this.channels, _2);\n        -1 !== C2 && this.channels.splice(C2, 1);\n      }\n    } catch (e5) {\n      i3 = { error: e5 };\n    } finally {\n      try {\n        y4 && !y4.done && (o$1 = g2.return) && o$1.call(g2);\n      } finally {\n        if (i3) throw i3.error;\n      }\n    }\n    Nn$1(t4.source) && kr$1(function() {\n      return r$1(l2, void 0, void 0, function() {\n        var e5, n3, a5;\n        return s$1(this, function(r3) {\n          return u3.length > 0 && (null === (e5 = this._handler) || void 0 === e5 ? void 0 : e5.onChannelsAdded) && this._handler.onChannelsAdded(t4, u3), c3.length > 0 && (null === (n3 = this._handler) || void 0 === n3 ? void 0 : n3.onChannelsUpdated) && this._handler.onChannelsUpdated(t4, c3), h4.length > 0 && (null === (a5 = this._handler) || void 0 === a5 ? void 0 : a5.onChannelsDeleted) && this._handler.onChannelsDeleted(t4, h4.map(function(e6) {\n            return e6.url;\n          })), [2];\n        });\n      });\n    });\n  }, e3.prototype._removeChannelsFromView = function(e4, t4) {\n    var n2, a4, r2 = this, i3 = [], o$1 = function(e5) {\n      var t5 = l2.channels.findIndex(function(t6) {\n        return t6.url === e5;\n      });\n      t5 >= 0 && (i3.push(l2.channels[t5].url), l2.channels.splice(t5, 1));\n    }, l2 = this;\n    try {\n      for (var u3 = o(e4), c3 = u3.next(); !c3.done; c3 = u3.next()) {\n        o$1(c3.value);\n      }\n    } catch (e5) {\n      n2 = { error: e5 };\n    } finally {\n      try {\n        c3 && !c3.done && (a4 = u3.return) && a4.call(u3);\n      } finally {\n        if (n2) throw n2.error;\n      }\n    }\n    return Nn$1(t4.source) && i3.length > 0 && kr$1(function() {\n      return r$1(r2, void 0, void 0, function() {\n        var e5;\n        return s$1(this, function(n3) {\n          return (null === (e5 = this._handler) || void 0 === e5 ? void 0 : e5.onChannelsDeleted) && this._handler.onChannelsDeleted(t4, i3), [2];\n        });\n      });\n    }), i3;\n  }, e3.prototype._getLocalChannels = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return e4 = ys.of(this._iid), t4 = this.channels.length > 0 ? function(e5, t5) {\n              var n3, a4, r2, i3;\n              switch (t5) {\n                case E.LATEST_LAST_MESSAGE:\n                  return null !== (a4 = null === (n3 = e5.lastMessage) || void 0 === n3 ? void 0 : n3.createdAt) && void 0 !== a4 ? a4 : e5.createdAt;\n                case E.CHRONOLOGICAL:\n                  return e5.createdAt;\n                case E.CHANNEL_NAME_ALPHABETICAL:\n                  return e5.name;\n                default:\n                  return null !== (i3 = null === (r2 = e5.lastMessage) || void 0 === r2 ? void 0 : r2.createdAt) && void 0 !== i3 ? i3 : e5.createdAt;\n              }\n            }(this.channels[this.channels.length - 1], this.order) : null, [4, e4.getChannelsFromCache(t4, this.filter, this.order, this._limit, t4 ? this.channels[this.channels.length - 1].url : void 0)];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, e3.prototype._getRemoteChannels = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t4, n2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return [4, ys.of(this._iid).getMyGroupChannels(this._token, oe(n$2(n$2({}, this.filter), { userIdsFilter: this.filter.userIdsFilter, searchFilter: this.filter.searchFilter, order: this.order })), this._limit)];\n          case 1:\n            return e4 = a4.sent(), t4 = e4.channels, n2 = e4.token, this._token = n2, this._hasMore = !!n2, [2, t4];\n        }\n      });\n    });\n  }, e3.prototype._revokeLoadMore = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            if (this._isDisposed) return [2];\n            t4.label = 1;\n          case 1:\n            return t4.trys.push([1, 3, , 4]), [4, this._getRemoteChannels()];\n          case 2:\n            return e4 = t4.sent(), this._isGetRemoteChannelsSucceeded = true, this._addChannelsToView(e4, { source: no.REQUEST_CHANNEL }, true), [3, 4];\n          case 3:\n            return t4.sent(), this._isGetRemoteChannelsSucceeded = false, [3, 4];\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e3.prototype.loadMore = function() {\n    var e4;\n    return r$1(this, void 0, void 0, function() {\n      var t4, n2, a4, r2, i3, o$1, l2, u3, c3, p2, f2, _2, v2, m4, g2, C2, b3, S4, M4, A2 = this;\n      return s$1(this, function(L3) {\n        switch (L3.label) {\n          case 0:\n            if (this._isDisposed) throw new b$2({ code: u$1.COLLECTION_DISPOSED, message: \"Collection has been disposed.\" });\n            return t4 = null, this._includeChangesOnInitialLoad && 0 === this.channels.length && this._changelogSync.isRunning ? [4, new Promise(function(e5) {\n              A2._changelogSyncSubscriberContext = A2._changelogSync.on(\"progress\", function(t5) {\n                return e5(t5);\n              }).on(\"pause\", function() {\n                return e5(null);\n              });\n            })] : [3, 2];\n          case 1:\n            t4 = L3.sent(), null === (e4 = this._changelogSyncSubscriberContext) || void 0 === e4 || e4.close(), L3.label = 2;\n          case 2:\n            return n2 = uo.of(this._iid), a4 = n2.cacheContext, r2 = n2.connectionManager, i3 = n2.statManager, this._isInitialized ? [3, 5] : (this._isInitialized = true, a4.localCacheEnabled ? [4, this._backgroundSync.loadMetadata()] : [3, 4]);\n          case 3:\n            L3.sent(), L3.label = 4;\n          case 4:\n            i3.put(new Ws$2({ type: Me$1.FEATURE_LOCALCACHE, data: { use_local_cache: a4.localCacheEnabled, collection_interface: { group_channel: true } } })), L3.label = 5;\n          case 5:\n            return o$1 = [], this._hasMore ? !a4.localCacheEnabled || r2.isConnected && !this._backgroundSync.completed ? [3, 7] : [4, Dr$1(function() {\n              return r$1(A2, void 0, void 0, function() {\n                return s$1(this, function(e5) {\n                  switch (e5.label) {\n                    case 0:\n                      return [4, this._getLocalChannels()];\n                    case 1:\n                      return o$1 = e5.sent(), [2];\n                  }\n                });\n              });\n            })] : [3, 11];\n          case 6:\n            return L3.sent(), this._hasMore = o$1.length >= this._limit, [3, 10];\n          case 7:\n            return L3.trys.push([7, 9, , 10]), [4, this._getRemoteChannels()];\n          case 8:\n            return o$1 = L3.sent(), this._isGetRemoteChannelsSucceeded = true, [3, 10];\n          case 9:\n            return L3.sent(), this._isGetRemoteChannelsSucceeded = false, [3, 10];\n          case 10:\n            this._addChannelsToView(o$1, { source: no.REQUEST_CHANNEL }, true), L3.label = 11;\n          case 11:\n            if (t4) {\n              try {\n                for (l2 = o(t4.updatedChannels), u3 = l2.next(); !u3.done; u3 = l2.next()) c3 = u3.value, (g2 = je(o$1, c3)) >= 0 ? o$1[g2] = c3 : (p2 = Ke(o$1, c3, this.order).place, o$1.splice(p2, 0, c3));\n              } catch (e5) {\n                C2 = { error: e5 };\n              } finally {\n                try {\n                  u3 && !u3.done && (b3 = l2.return) && b3.call(l2);\n                } finally {\n                  if (C2) throw C2.error;\n                }\n              }\n              f2 = o$1.map(function(e5) {\n                return e5.url;\n              });\n              try {\n                for (_2 = o(t4.deletedChannelUrls), v2 = _2.next(); !v2.done; v2 = _2.next()) m4 = v2.value, (g2 = f2.indexOf(m4)) >= 0 && (o$1.splice(g2, 1), f2.splice(g2, 1));\n              } catch (e5) {\n                S4 = { error: e5 };\n              } finally {\n                try {\n                  v2 && !v2.done && (M4 = _2.return) && M4.call(_2);\n                } finally {\n                  if (S4) throw S4.error;\n                }\n              }\n            }\n            return [2, o$1];\n        }\n      });\n    });\n  }, e3.prototype.dispose = function() {\n    var e4, t4, n2;\n    this._isDisposed || (this._isDisposed = true, this.channels.length > 0 && this.channels.splice(0, this.channels.length), null === (e4 = this._backgroundSync) || void 0 === e4 || e4.close(), null === (t4 = this._changelogSync) || void 0 === t4 || t4.close(), null === (n2 = this._changelogSyncSubscriberContext) || void 0 === n2 || n2.close(), ys.of(this._iid).unsubscribeChannelEvent(this._key));\n  }, e3;\n}(), We = function(e3) {\n  function t4(t5) {\n    var n2 = this, a4 = t5.token, r2 = t5.limit, i3 = t5.order, s4 = t5.includeEmpty, o2 = t5.membershipFilter, l2 = t5.channelNameContainsFilter, u3 = t5.channelUrlsFilter, c3 = t5.customTypesFilter, h4 = t5.customTypeStartsWithFilter, d4 = t5.superChannelFilter, p2 = t5.metadataOrderKeyFilter, f2 = t5.metadataKey, _2 = t5.metadataValues, v2 = t5.metadataValueStartsWith, m4 = t5.includeFrozen, g2 = t5.includeMetaData;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = de, n2.params = se(oe({ token: a4, limit: r2, order: i3, show_member: true, show_read_receipt: true, show_delivery_receipt: true, show_empty: s4, public_mode: $t$1.PUBLIC, public_membership_mode: o2, name_contains: l2, channel_urls: u3, custom_types: c3, custom_type_startswith: h4, super_mode: d4, metadata_order_key: p2, metadata_key: f2, metadata_values: _2, metadata_value_startswith: v2, show_frozen: m4, show_metadata: g2 })), n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Be = function(e3) {\n  function t4(t5, n2) {\n    var a4 = e3.call(this, t5, n2) || this;\n    a4.channels = [];\n    var r2 = n2.next, i3 = n2.channels, s4 = n2.ts;\n    return a4.token = r2, i3 && i3.length > 0 && (a4.channels = i3.map(function(e4) {\n      return e4.ts = s4, new fr(t5, e4);\n    })), a4.ts = \"number\" == typeof s4 ? s4 : 0, a4;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2);\n!function(e3) {\n  e3.ALL = \"all\", e3.JOINED = \"joined\";\n}(De$1 || (De$1 = {}));\nvar qe = function(e3) {\n  function t4(t5, n2) {\n    var a4, r2, i3, s4, o2, l2, u3, c3, h4, d4, p2, f2, _2, v2, m4 = this;\n    return (m4 = e3.call(this, t5, n2) || this).includeEmpty = false, m4.includeFrozen = true, m4.includeMetaData = true, m4.channelUrlsFilter = null, m4.customTypesFilter = null, m4.customTypeStartsWithFilter = null, m4.channelNameContainsFilter = null, m4.membershipFilter = De$1.ALL, m4.superChannelFilter = tn$1.ALL, m4.metadataKey = null, m4.metadataValues = null, m4.metadataOrderKeyFilter = null, m4.metadataValueStartsWith = null, m4.order = C.CHRONOLOGICAL, m4.includeEmpty = null !== (a4 = n2.includeEmpty) && void 0 !== a4 && a4, m4.includeFrozen = null === (r2 = n2.includeFrozen) || void 0 === r2 || r2, m4.includeMetaData = null === (i3 = n2.includeMetaData) || void 0 === i3 || i3, m4.channelUrlsFilter = null !== (s4 = n2.channelUrlsFilter) && void 0 !== s4 ? s4 : null, m4.customTypesFilter = null !== (o2 = n2.customTypesFilter) && void 0 !== o2 ? o2 : null, m4.customTypeStartsWithFilter = null !== (l2 = n2.customTypeStartsWithFilter) && void 0 !== l2 ? l2 : null, m4.channelNameContainsFilter = null !== (u3 = n2.channelNameContainsFilter) && void 0 !== u3 ? u3 : null, m4.membershipFilter = null !== (c3 = n2.membershipFilter) && void 0 !== c3 ? c3 : De$1.ALL, m4.superChannelFilter = null !== (h4 = n2.superChannelFilter) && void 0 !== h4 ? h4 : tn$1.ALL, m4.metadataKey = null !== (d4 = n2.metadataKey) && void 0 !== d4 ? d4 : null, m4.metadataValues = null !== (p2 = n2.metadataValues) && void 0 !== p2 ? p2 : null, m4.metadataOrderKeyFilter = null !== (f2 = n2.metadataOrderKeyFilter) && void 0 !== f2 ? f2 : null, m4.metadataValueStartsWith = null !== (_2 = n2.metadataValueStartsWith) && void 0 !== _2 ? _2 : null, m4.order = null !== (v2 = n2.order) && void 0 !== v2 ? v2 : C.CHRONOLOGICAL, m4;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"boolean\", this.includeEmpty) && S$1(\"boolean\", this.includeFrozen) && S$1(\"boolean\", this.includeMetaData) && S$1(\"string\", this.channelNameContainsFilter, true) && C$1(\"string\", this.channelUrlsFilter, true) && C$1(\"string\", this.customTypesFilter, true) && S$1(\"string\", this.customTypeStartsWithFilter, true) && T$2(De$1, this.membershipFilter) && T$2(tn$1, this.superChannelFilter) && T$2(C, this.order) && S$1(\"string\", this.metadataOrderKeyFilter, true) && S$1(\"string\", this.metadataKey, true) && C$1(\"string\", this.metadataValues, true) && S$1(\"string\", this.metadataValueStartsWith, true);\n  }, t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, n2, a4, r2, i3, s4;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : (e4 = [], this._hasNext ? (this._isLoading = true, t5 = uo.of(this._iid).requestQueue, n2 = new We(oe(n$2(n$2({}, this), { token: this._token }))), [4, t5.send(n2)]) : [3, 2]) : [3, 5];\n          case 1:\n            return a4 = o2.sent(), r2 = a4.as(Be), i3 = r2.channels, s4 = r2.token, this._token = s4, this._hasNext = !!s4, this._isLoading = false, [2, i3];\n          case 2:\n            return [2, e4];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(Oo), Ye = function(e3) {\n  function t4(t5) {\n    void 0 === t5 && (t5 = {});\n    var n2 = e3.call(this) || this;\n    return Object.keys(t5).forEach(function(e4) {\n      n2.hasOwnProperty(e4) && (n2[e4] = t5[e4]);\n    }), n2;\n  }\n  return t$2(t4, e3), t4;\n}(function(e3) {\n  function t4() {\n    var t5 = null !== e3 && e3.apply(this, arguments) || this;\n    return t5.onUserJoined = ut$1, t5.onUserLeft = ut$1, t5.onUserReceivedInvitation = ut$1, t5.onUserDeclinedInvitation = ut$1, t5.onChannelHidden = ut$1, t5.onUnreadMemberStatusUpdated = ut$1, t5.onUndeliveredMemberStatusUpdated = ut$1, t5.onTypingStatusUpdated = ut$1, t5.onPollUpdated = ut$1, t5.onPollVoted = ut$1, t5.onPollDeleted = ut$1, t5.onPinnedMessageUpdated = ut$1, t5;\n  }\n  return t$2(t4, e3), t4;\n}(t$1)), Xe = function(e3) {\n  function t4(t5) {\n    var n2 = this, a4 = t5.token, r2 = t5.limit, i3 = t5.order, s4 = t5.reverse, o2 = t5.channelUrl, l2 = t5.messageTypeFilter, u3 = t5.scheduledStatus;\n    return (n2 = e3.call(this) || this).method = ae.GET, n2.path = \"\".concat(ye$1), n2.params = se(oe({ token: a4, limit: r2, reverse: s4, channel_url: o2, order: i3, message_type: l2, status: u3 })), n2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Je = function(e3) {\n  function t4(t5, n2) {\n    var a4 = e3.call(this, t5, n2) || this;\n    a4.scheduledMessages = [];\n    var r2 = n2.next, i3 = n2.scheduled_messages;\n    return a4.token = r2, a4.scheduledMessages = i3.map(function(e4) {\n      return At$1(t5, e4);\n    }), a4;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Ze = function(e3) {\n  function t4(t5, n2) {\n    var a4, r2, i3, s4, o2, l2 = this;\n    return (l2 = e3.call(this, t5, n2) || this).channelUrl = null, l2.order = null, l2.reverse = false, l2.scheduledStatus = null, l2.messageTypeFilter = j.ALL, l2.channelUrl = null !== (a4 = n2.channelUrl) && void 0 !== a4 ? a4 : null, l2.order = null !== (r2 = n2.order) && void 0 !== r2 ? r2 : null, l2.reverse = null !== (i3 = n2.reverse) && void 0 !== i3 && i3, l2.scheduledStatus = null !== (s4 = n2.scheduledStatus) && void 0 !== s4 ? s4 : null, l2.messageTypeFilter = null !== (o2 = n2.messageTypeFilter) && void 0 !== o2 ? o2 : j.ALL, l2;\n  }\n  return t$2(t4, e3), t4.prototype._validate = function() {\n    return e3.prototype._validate.call(this) && S$1(\"string\", this.channelUrl, true) && (T$2(R, this.order) || null === this.order) && S$1(\"boolean\", this.reverse) && (C$1(dt, this.scheduledStatus) || null === this.scheduledStatus) && T$2(j, this.messageTypeFilter);\n  }, t4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e4, t5, n2, a4, r2, i3;\n      return s$1(this, function(s4) {\n        switch (s4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e4 = uo.of(this._iid).requestQueue, t5 = new Xe(oe(n$2(n$2({}, this), { token: this._token }))), [4, e4.send(t5)]) : [3, 2] : [3, 5];\n          case 1:\n            return n2 = s4.sent(), a4 = n2.as(Je), r2 = a4.scheduledMessages, i3 = a4.token, this._token = i3, this._hasNext = !!i3, this._isLoading = false, [2, r2];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4;\n}(Oo), $e = function(e3) {\n  function t4() {\n    var t5 = null !== e3 && e3.apply(this, arguments) || this;\n    return t5.name = \"groupChannel\", t5;\n  }\n  return t$2(t4, e3), t4.prototype.init = function(t5, n2) {\n    var a4 = n2.sdkState, r2 = n2.dispatcher, i3 = n2.sessionManager, s4 = n2.requestQueue, o2 = n2.logger, l2 = n2.onlineDetector, u3 = n2.cacheContext;\n    e3.prototype.init.call(this, t5, { sdkState: a4, dispatcher: r2, sessionManager: i3, requestQueue: s4, logger: o2, onlineDetector: l2, cacheContext: u3 }), this._manager = new ys(t5, { sdkState: a4, cacheContext: u3, dispatcher: r2, sessionManager: i3, requestQueue: s4, logger: o2 });\n  }, t4.prototype.createGroupChannelCollection = function(e4) {\n    return void 0 === e4 && (e4 = {}), new Qe(this._iid, e4);\n  }, t4.prototype.createMyGroupChannelListQuery = function(e4) {\n    return void 0 === e4 && (e4 = {}), new fs(this._iid, e4);\n  }, t4.prototype.createPublicGroupChannelListQuery = function(e4) {\n    return void 0 === e4 && (e4 = {}), new qe(this._iid, e4);\n  }, t4.prototype.createScheduledMessageListQuery = function(e4) {\n    return void 0 === e4 && (e4 = {}), new Ze(this._iid, e4);\n  }, t4.prototype.addGroupChannelHandler = function(e4, t5) {\n    cs$2(S$1(\"string\", e4) && t5 instanceof Ye).throw(b$2.invalidParameters), this._manager.addHandler(e4, t5);\n  }, t4.prototype.removeGroupChannelHandler = function(e4) {\n    cs$2(S$1(\"string\", e4)).throw(b$2.invalidParameters), this._manager.removeHandler(e4);\n  }, t4.prototype.removeAllGroupChannelHandlers = function() {\n    this._manager.clearHandler();\n  }, t4.prototype.buildGroupChannelFromSerializedData = function(e4) {\n    return this._manager.buildGroupChannelFromSerializedData(e4);\n  }, t4.prototype.buildGroupChannelListQueryFromSerializedData = function(e4) {\n    return this._manager.buildGroupChannelListQueryFromSerializedData(e4);\n  }, t4.prototype.buildMemberFromSerializedData = function(e4) {\n    return this._manager.buildMemberFromSerializedData(e4);\n  }, t4.prototype.getChannel = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return cs$2(S$1(\"string\", e4)).throw(b$2.invalidParameters), [2, this._manager.getChannel(e4)];\n      });\n    });\n  }, t4.prototype.getChannelWithoutCache = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return cs$2(S$1(\"string\", e4)).throw(b$2.invalidParameters), [2, this._manager.getChannelWithoutCache(e4)];\n      });\n    });\n  }, t4.prototype.getMyGroupChannelChangeLogsByToken = function(e4, t5) {\n    return void 0 === t5 && (t5 = {}), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return n2 = n$2(n$2({}, fn$1), t5), cs$2(S$1(\"string\", e4) && vn$1(n2)).throw(b$2.invalidParameters), [4, this._manager.getMyGroupChannelChangeLogs(e4, n2)];\n          case 1:\n            return [2, a4.sent()];\n        }\n      });\n    });\n  }, t4.prototype.getMyGroupChannelChangeLogsByTimestamp = function(e4, t5) {\n    return void 0 === t5 && (t5 = {}), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(a4) {\n        switch (a4.label) {\n          case 0:\n            return n2 = n$2(n$2({}, fn$1), t5), cs$2(S$1(\"number\", e4) && vn$1(n2)).throw(b$2.invalidParameters), [4, this._manager.getMyGroupChannelChangeLogs(e4, n2)];\n          case 1:\n            return [2, a4.sent()];\n        }\n      });\n    });\n  }, t4.prototype.getGroupChannelCount = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        return t5 = n$2(n$2({}, mn$1), e4), cs$2(gn$1(t5)).throw(b$2.invalidParameters), [2, this._manager.getGroupChannelCount(t5)];\n      });\n    });\n  }, t4.prototype.getUnreadItemCount = function(e4) {\n    return void 0 === e4 && (e4 = {}), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return [4, this._manager.getUnreadItemCount(e4)];\n          case 1:\n            return [2, t5.sent()];\n        }\n      });\n    });\n  }, t4.prototype.getTotalUnreadChannelCount = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        switch (e4.label) {\n          case 0:\n            return [4, this._manager.getTotalUnreadChannelCount()];\n          case 1:\n            return [2, e4.sent()];\n        }\n      });\n    });\n  }, t4.prototype.getTotalUnreadMessageCount = function(e4) {\n    return void 0 === e4 && (e4 = {}), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return [4, this._manager.getTotalUnreadMessageCount(e4)];\n          case 1:\n            return [2, t5.sent()];\n        }\n      });\n    });\n  }, t4.prototype.getTotalScheduledMessageCount = function(e4) {\n    return void 0 === e4 && (e4 = {}), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return [4, this._manager.getTotalScheduledMessageCount(e4)];\n          case 1:\n            return [2, t5.sent()];\n        }\n      });\n    });\n  }, t4.prototype.getSubscribedTotalUnreadMessageCount = function() {\n    return this._manager.getSubscribedTotalUnreadMessageCount();\n  }, t4.prototype.getSubscribedCustomTypeTotalUnreadMessageCount = function() {\n    return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount();\n  }, t4.prototype.getSubscribedCustomTypeUnreadMessageCount = function(e4) {\n    return this._manager.getSubscribedCustomTypeUnreadMessageCount(e4);\n  }, t4.prototype.createChannel = function(e4) {\n    return void 0 === e4 && (e4 = {}), r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        return t5 = n$2(n$2({}, _n$1), e4), cs$2(pn$1(t5)).throw(b$2.invalidParameters), [2, this._manager.createChannel(t5)];\n      });\n    });\n  }, t4.prototype.createDistinctChannelIfNotExist = function(e4) {\n    return void 0 === e4 && (e4 = {}), r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        return t5 = n$2(n$2({}, _n$1), e4), cs$2(pn$1(t5)).throw(b$2.invalidParameters), t5 && (t5.isDistinct = true), [2, this.createChannel(t5)];\n      });\n    });\n  }, t4.prototype.createChannelWithUserIds = function(e4, t5, n2, a4, r2, i3) {\n    return void 0 === t5 && (t5 = false), void 0 === r2 && (r2 = \"\"), void 0 === i3 && (i3 = \"\"), r$1(this, void 0, void 0, function() {\n      var s4;\n      return s$1(this, function(o2) {\n        return s4 = n$2(n$2({}, _n$1), { invitedUserIds: e4, isDistinct: t5, name: n2, data: r2, customType: i3 }), \"string\" == typeof a4 ? s4.coverUrl = a4 : s4.coverImage = a4, [2, this.createChannel(s4)];\n      });\n    });\n  }, t4.prototype.markAsReadAll = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        return this._manager.markAsReadAll(), [2];\n      });\n    });\n  }, t4.prototype.markAsReadWithChannelUrls = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return cs$2(C$1(\"string\", e4)).throw(b$2.invalidParameters), this._manager.markAsReadWithChannelUrls(e4), [2];\n      });\n    });\n  }, t4.prototype.markAsDelivered = function(e4) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e4)).throw(b$2.invalidParameters), [4, this.getChannel(e4)];\n          case 1:\n            return [4, t5.sent().markAsDelivered()];\n          case 2:\n            return t5.sent(), [2];\n        }\n      });\n    });\n  }, t4;\n}(lo);\nconst applicationAttributes = {\n  reactions: \"reactions\",\n  message_search_v3: \"message_search_v3\",\n  enable_og_tag: \"enable_og_tag\"\n};\nconst premiumFeatures = {\n  delivery_receipt: \"delivery_receipt\"\n};\nconst sbuConstants = {\n  collection: {\n    groupChannel: {\n      defaultLimit: 20,\n      defaultOrder: E.LATEST_LAST_MESSAGE,\n      defaultIncludeEmpty: false\n    },\n    message: {\n      defaultLimit: { next: 25, prev: 25 },\n      searchLimit: { next: 10, prev: 10 }\n    }\n  }\n};\nvar __awaiter$4 = function(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst useAsyncEffect = (asyncEffect, deps) => {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(createAsyncEffectCallback(asyncEffect), deps);\n};\nconst useAsyncLayoutEffect = (asyncEffect, deps) => {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(createAsyncEffectCallback(asyncEffect), deps);\n};\nconst iife$1 = (callback) => typeof callback === \"function\" && callback();\nconst createAsyncEffectCallback = (asyncEffect) => () => {\n  const destructor = iife$1(asyncEffect);\n  return () => {\n    if (!destructor)\n      return;\n    if (destructor instanceof Promise) {\n      iife$1(() => __awaiter$4(void 0, void 0, void 0, function* () {\n        const awaitedDestructor = yield destructor;\n        if (typeof awaitedDestructor === \"function\")\n          awaitedDestructor();\n      }));\n    } else if (typeof destructor === \"function\") {\n      iife$1(destructor);\n    }\n  };\n};\nlet id = 0;\nfunction useUniqId() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(() => `${id++}`)[0];\n}\nconst useGroupChannelHandler = (sdk, hookHandler, handlerId) => {\n  const handlerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(hookHandler);\n  const id2 = useUniqId();\n  const internalHandlerId = id2;\n  handlerRef.current = hookHandler;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    var _a2;\n    const handlerMapper = (handler) => {\n      const handlerKeys = Object.keys(handler);\n      handlerKeys.forEach((key) => {\n        handler[key] = (...args) => {\n          var _a3, _b2;\n          return (_b2 = (_a3 = handlerRef.current) === null || _a3 === void 0 ? void 0 : _a3[key]) === null || _b2 === void 0 ? void 0 : _b2.call(_a3, ...args);\n        };\n      });\n      return handler;\n    };\n    (_a2 = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.addGroupChannelHandler(internalHandlerId, handlerMapper(new Ye()));\n    return () => {\n      var _a3;\n      (_a3 = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a3 === void 0 ? void 0 : _a3.removeGroupChannelHandler(internalHandlerId);\n    };\n  }, [sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel, internalHandlerId]);\n};\nfunction usePreservedCallback$1(callback) {\n  const callbackRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(callback);\n  callbackRef.current = callback;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])((...args) => callbackRef.current(...args), [callbackRef]);\n}\nvar __rest$7 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst defaultReducer$1 = (_a2, action) => {\n  var draft = __rest$7(_a2, []);\n  const compareByOrder = createCompareByOrder(draft.order);\n  switch (action.type) {\n    case \"update_refreshing\": {\n      draft.refreshing = action.value.status;\n      break;\n    }\n    case \"update_initialized\": {\n      draft.initialized = action.value.status;\n      break;\n    }\n    case \"update_channels\": {\n      getGroupChannels(action.value.channels).forEach((freshChannel) => {\n        const idx = draft.groupChannels.findIndex((staleChannel) => staleChannel.url === freshChannel.url);\n        if (idx > -1)\n          draft.groupChannels[idx] = freshChannel;\n      });\n      compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));\n      break;\n    }\n    case \"delete_channels\": {\n      action.value.channelUrls.forEach((url) => {\n        const idx = draft.groupChannels.findIndex((c3) => c3.url === url);\n        if (idx > -1)\n          draft.groupChannels.splice(idx, 1);\n      });\n      compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));\n      break;\n    }\n    case \"append_channels\": {\n      const groupChannels = getGroupChannels(action.value.channels);\n      if (action.value.clearBeforeAction) {\n        draft.groupChannels = groupChannels;\n      } else {\n        draft.groupChannels = mergeObjectArrays(draft.groupChannels, groupChannels, \"url\");\n      }\n      compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));\n      break;\n    }\n    case \"update_order\": {\n      draft.order = action.value.order;\n      const compareByOrder2 = createCompareByOrder(draft.order);\n      compareByOrder2 && (draft.groupChannels = draft.groupChannels.sort(compareByOrder2));\n      break;\n    }\n  }\n  return draft;\n};\nconst useGroupChannelListReducer = (order2) => {\n  const [{ initialized, refreshing, groupChannels }, dispatch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useReducer\"])(defaultReducer$1, {\n    initialized: false,\n    refreshing: false,\n    groupChannels: [],\n    order: order2\n  });\n  const updateChannels = (channels) => {\n    dispatch({ type: \"update_channels\", value: { channels } });\n  };\n  const deleteChannels = (channelUrls) => {\n    dispatch({ type: \"delete_channels\", value: { channelUrls } });\n  };\n  const appendChannels = (channels, clearBeforeAction) => {\n    dispatch({ type: \"append_channels\", value: { channels, clearBeforeAction } });\n  };\n  const updateInitialized = (status) => {\n    dispatch({ type: \"update_initialized\", value: { status } });\n  };\n  const updateRefreshing = (status) => {\n    dispatch({ type: \"update_refreshing\", value: { status } });\n  };\n  const updateOrder = (order3) => {\n    dispatch({ type: \"update_order\", value: { order: order3 } });\n  };\n  return {\n    updateInitialized,\n    updateRefreshing,\n    updateChannels,\n    deleteChannels,\n    appendChannels,\n    updateOrder,\n    initialized,\n    refreshing,\n    groupChannels\n  };\n};\nconst createCompareByOrder = (order2) => {\n  if (!order2)\n    return void 0;\n  return (channel1, channel2) => {\n    switch (order2) {\n      case \"latest_last_message\": {\n        if (channel1.lastMessage && channel2.lastMessage) {\n          return channel2.lastMessage.createdAt - channel1.lastMessage.createdAt;\n        } else if (channel1.lastMessage) {\n          return -1;\n        } else if (channel2.lastMessage) {\n          return 1;\n        } else {\n          return channel2.createdAt - channel1.createdAt;\n        }\n      }\n      case \"chronological\": {\n        return channel2.createdAt - channel1.createdAt;\n      }\n      case \"channel_name_alphabetical\": {\n        return channel1.name.localeCompare(channel2.name);\n      }\n      default: {\n        return 0;\n      }\n    }\n  };\n};\nfunction mergeObjectArrays(A2, B3, key) {\n  const uniqueValues = new Set(A2.map((obj) => obj[key]));\n  const newArr = [...A2];\n  for (let i3 = 0; i3 < B3.length; i3++) {\n    if (!uniqueValues.has(B3[i3][key])) {\n      newArr.push(B3[i3]);\n      uniqueValues.add(B3[i3][key]);\n    }\n  }\n  return newArr;\n}\nfunction getGroupChannels(channels) {\n  return channels.filter((it2) => it2.isGroupChannel());\n}\nvar __awaiter$3 = function(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst createGroupChannelListCollection = (sdk, collectionCreator) => {\n  const basicParams = {\n    includeEmpty: sbuConstants.collection.groupChannel.defaultIncludeEmpty,\n    limit: sbuConstants.collection.groupChannel.defaultLimit,\n    order: sbuConstants.collection.groupChannel.defaultOrder\n  };\n  const passedCollection = collectionCreator === null || collectionCreator === void 0 ? void 0 : collectionCreator(basicParams);\n  if (passedCollection)\n    return passedCollection;\n  return sdk.groupChannel.createGroupChannelCollection(Object.assign(Object.assign({}, basicParams), { filter: new hn$1(basicParams) }));\n};\nconst useGroupChannelList$1 = (sdk, options) => {\n  var _a2, _b2, _c;\n  const deliveryReceiptEnabled = Boolean((_b2 = (_a2 = sdk.appInfo) === null || _a2 === void 0 ? void 0 : _a2.premiumFeatureList) === null || _b2 === void 0 ? void 0 : _b2.includes(premiumFeatures.delivery_receipt));\n  const collectionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  const internalOptions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(options);\n  internalOptions.current = options;\n  const { initialized, groupChannels, refreshing, appendChannels, deleteChannels, updateRefreshing, updateInitialized } = useGroupChannelListReducer();\n  const updateChannelsAndMarkAsDelivered = (shouldMarkAsDelivered, source, updatedChannels) => {\n    var _a3, _b3, _c2, _d;\n    const channels = (_b3 = (_a3 = collectionRef.current) === null || _a3 === void 0 ? void 0 : _a3.channels) !== null && _b3 !== void 0 ? _b3 : [];\n    appendChannels(channels, true);\n    if (shouldMarkAsDelivered && deliveryReceiptEnabled) {\n      switch (source) {\n        case bn$1.EVENT_MESSAGE_RECEIVED:\n        case bn$1.EVENT_MESSAGE_SENT:\n        case bn$1.SYNC_CHANNEL_BACKGROUND:\n        case bn$1.SYNC_CHANNEL_CHANGELOGS:\n        case void 0:\n          (_d = (_c2 = internalOptions.current) === null || _c2 === void 0 ? void 0 : _c2.markAsDelivered) === null || _d === void 0 ? void 0 : _d.call(_c2, updatedChannels !== null && updatedChannels !== void 0 ? updatedChannels : channels);\n          break;\n      }\n    }\n  };\n  const init = usePreservedCallback$1((uid) => __awaiter$3(void 0, void 0, void 0, function* () {\n    var _d, _e2, _f, _g2;\n    if (collectionRef.current)\n      (_d = collectionRef.current) === null || _d === void 0 ? void 0 : _d.dispose();\n    if (uid) {\n      collectionRef.current = createGroupChannelListCollection(sdk, options === null || options === void 0 ? void 0 : options.collectionCreator);\n      (_e2 = collectionRef.current) === null || _e2 === void 0 ? void 0 : _e2.setGroupChannelCollectionHandler({\n        onChannelsAdded: (context, channels) => {\n          var _a3, _b3;\n          const groupChannels2 = channels.filter((channel) => channel.isGroupChannel());\n          updateChannelsAndMarkAsDelivered(true, context.source, groupChannels2);\n          (_b3 = (_a3 = internalOptions.current) === null || _a3 === void 0 ? void 0 : _a3.onChannelsAdded) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, groupChannels2);\n        },\n        onChannelsUpdated: (context, channels) => {\n          var _a3, _b3;\n          const groupChannels2 = channels.filter((channel) => channel.isGroupChannel());\n          updateChannelsAndMarkAsDelivered(true, context.source, groupChannels2);\n          (_b3 = (_a3 = internalOptions.current) === null || _a3 === void 0 ? void 0 : _a3.onChannelsUpdated) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, groupChannels2);\n        },\n        onChannelsDeleted: (_2, channelUrls) => {\n          var _a3, _b3;\n          updateChannelsAndMarkAsDelivered(false);\n          (_b3 = (_a3 = internalOptions.current) === null || _a3 === void 0 ? void 0 : _a3.onChannelsDeleted) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, channelUrls);\n        }\n      });\n      if ((_f = collectionRef.current) === null || _f === void 0 ? void 0 : _f.hasMore) {\n        yield (_g2 = collectionRef.current) === null || _g2 === void 0 ? void 0 : _g2.loadMore();\n        updateChannelsAndMarkAsDelivered(true);\n      }\n    }\n  }));\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    return () => {\n      var _a3;\n      if (collectionRef.current)\n        (_a3 = collectionRef.current) === null || _a3 === void 0 ? void 0 : _a3.dispose();\n    };\n  }, []);\n  useAsyncEffect(() => __awaiter$3(void 0, void 0, void 0, function* () {\n    updateInitialized(false);\n    if (sdk.currentUser) {\n      yield init(sdk.currentUser.userId);\n      updateInitialized(true);\n    }\n  }), [sdk, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId]);\n  useGroupChannelHandler(sdk, {\n    onUserBanned: (channel, user) => {\n      var _a3, _b3, _c2;\n      const isMe = user.userId === ((_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n      if (isMe) {\n        deleteChannels([channel.url]);\n        (_c2 = (_b3 = internalOptions.current) === null || _b3 === void 0 ? void 0 : _b3.onChannelsDeleted) === null || _c2 === void 0 ? void 0 : _c2.call(_b3, [channel.url]);\n      } else {\n        updateChannelsAndMarkAsDelivered(false);\n      }\n    }\n  });\n  const refresh = usePreservedCallback$1(() => __awaiter$3(void 0, void 0, void 0, function* () {\n    if (sdk.currentUser) {\n      updateRefreshing(true);\n      yield init(sdk.currentUser.userId);\n      updateRefreshing(false);\n    }\n  }));\n  const loadMore = usePreservedCallback$1(() => __awaiter$3(void 0, void 0, void 0, function* () {\n    var _h, _j;\n    if ((_h = collectionRef.current) === null || _h === void 0 ? void 0 : _h.hasMore) {\n      yield (_j = collectionRef.current) === null || _j === void 0 ? void 0 : _j.loadMore();\n      updateChannelsAndMarkAsDelivered(true);\n    }\n  }));\n  return {\n    /**\n     * Initializing state, only available on first render\n     * */\n    initialized,\n    /**\n     * Get group channels state\n     * */\n    groupChannels,\n    /**\n     * Refresh, clear and reload messages from latest\n     * @return {Promise<void>}\n     * */\n    refresh,\n    /**\n     * Refreshing state, status is changes when the refresh is called.\n     * */\n    refreshing,\n    /**\n     * Fetch more channels to state\n     * @return {Promise<void>}\n     * */\n    loadMore\n  };\n};\nvar b = function(r2) {\n  function b3() {\n    var t4 = null !== r2 && r2.apply(this, arguments) || this;\n    return t4.name = \"poll\", t4;\n  }\n  return t$2(b3, r2), b3.prototype.init = function(t4, a4) {\n    var n2 = a4.sdkState, o2 = a4.dispatcher, i3 = a4.sessionManager, s4 = a4.requestQueue, l2 = a4.logger, u3 = a4.onlineDetector, c3 = a4.cacheContext;\n    r2.prototype.init.call(this, t4, { sdkState: n2, dispatcher: o2, sessionManager: i3, requestQueue: s4, logger: l2, onlineDetector: u3, cacheContext: c3 }), this._manager = new Qo(t4, { sdkState: n2, dispatcher: o2, sessionManager: i3, requestQueue: s4, logger: l2, onlineDetector: u3, cacheContext: c3 });\n  }, b3.prototype.create = function(t4) {\n    return r$1(this, void 0, void 0, function() {\n      var e3;\n      return s$1(this, function(a4) {\n        return e3 = n$2(n$2({}, Ho), t4), cs$2(Vo(e3)).throw(b$2.invalidParameters), [2, this._manager.create(e3)];\n      });\n    });\n  }, b3.prototype.get = function(t4) {\n    return r$1(this, void 0, void 0, function() {\n      var e3;\n      return s$1(this, function(a4) {\n        return e3 = n$2(n$2({}, jo), t4), cs$2(Ko(e3)).throw(b$2.invalidParameters), [2, this._manager.get(e3)];\n      });\n    });\n  }, b3.prototype.getOption = function(t4) {\n    return r$1(this, void 0, void 0, function() {\n      var e3;\n      return s$1(this, function(a4) {\n        return e3 = n$2(n$2({}, zo), t4), cs$2(Go(e3)).throw(b$2.invalidParameters), [2, this._manager.getOption(e3)];\n      });\n    });\n  }, b3.prototype.buildPollFromSerializedData = function(t4) {\n    return this._manager.buildPollFromSerializedData(t4);\n  }, b3;\n}(lo);\nvar n$1 = function(t4) {\n  return [\"-lastMessageUpdatedAt\", \"-createdAt\", \"syncIndex\"];\n}, a = function(e3) {\n  function n2() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  return t$2(n2, e3), n2;\n}(re$1);\nvar St = function(e3) {\n  this.key = e3.key, this.url = e3.url;\n}, It = function(e3) {\n  this.id = e3.id, this.name = e3.name, this.url = e3.url, this.emojis = e3.emojis ? e3.emojis.map(function(e4) {\n    return new St(e4);\n  }) : [];\n}, Ct = function(e3) {\n  this.emojiHash = e3.emoji_hash || \"\", this.emojiCategories = e3.emoji_categories ? e3.emoji_categories.map(function(e4) {\n    return new It(e4);\n  }) : [];\n}, Et = { profileImage: void 0, profileUrl: void 0, nickname: void 0 }, Tt = function(e3) {\n  return { v2: function() {\n    return r$1(void 0, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, e3.commitSchema([{ collectionName: Yr, keyName: Jr, index: [b$1(E.LATEST_LAST_MESSAGE), b$1(E.CHRONOLOGICAL), b$1(E.CHANNEL_NAME_ALPHABETICAL)] }, { collectionName: Zr, keyName: $r, index: [Bs$1(Ls$1.CHANNEL_LATEST), Bs$1(Ls$1.NEWEST_CHILD_MESSAGE)] }, { collectionName: Hs$1, keyName: Ws$1, index: [Bs$1(Ls$1.CHANNEL_LATEST), Bs$1(Ls$1.NEWEST_CHILD_MESSAGE)] }, { collectionName: ri, keyName: ii }])];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, v3: function() {\n    return r$1(void 0, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, e3.commitSchema([{ collectionName: ai, keyName: oi, index: [n$1()] }])];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, v4: function() {\n    return r$1(void 0, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, e3.commitSchema([{ collectionName: ti, keyName: ni, index: [js$1()] }])];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, v5: function() {\n    return r$1(void 0, void 0, void 0, function() {\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, e3.commitSchema([{ collectionName: ui, keyName: ci, index: [[\"-userId\", \"-updatedAt\"]] }])];\n          case 1:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  } };\n}, Pt = function(e3) {\n  var t4 = new Fs$1();\n  return function(n2, s4) {\n    return r$1(void 0, void 0, void 0, function() {\n      var r2, a4, u3, c3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            switch (n2) {\n              case 1:\n              case 2:\n              case 3:\n              case 4:\n                return [3, 1];\n              case 5:\n                return [3, 2];\n              case 6:\n                return [3, 4];\n              case 7:\n                return [3, 11];\n            }\n            return [3, 15];\n          case 1:\n            return s4(), [3, 16];\n          case 2:\n            return [4, e3.reset()];\n          case 3:\n            return i3.sent(), s4(), [3, 16];\n          case 4:\n            return i3.trys.push([4, 9, , 10]), r2 = Tt(e3), a4 = r2.v2, u3 = r2.v3, c3 = r2.v4, [4, a4()];\n          case 5:\n            return i3.sent(), [4, u3()];\n          case 6:\n            return i3.sent(), [4, c3()];\n          case 7:\n            return i3.sent(), [4, e3.collection(Zr).removeIf({ where: { channelType: H$1.OPEN } })];\n          case 8:\n            return i3.sent(), [3, 10];\n          case 9:\n            return i3.sent(), t4.warn(\"Failed to migrate to v2, v3, v4\"), [3, 10];\n          case 10:\n            return s4(), [3, 16];\n          case 11:\n            return i3.trys.push([11, 13, , 14]), [4, (0, Tt(e3).v5)()];\n          case 12:\n            return i3.sent(), [3, 14];\n          case 13:\n            return i3.sent(), t4.warn(\"Failed to migrate to v5\"), [3, 14];\n          case 14:\n            return s4(), [3, 16];\n          case 15:\n            s4(), i3.label = 16;\n          case 16:\n            return [2];\n        }\n      });\n    });\n  };\n}, Dt = function() {\n  return \"undefined\" != typeof document ? document.visibilityState : \"visible\";\n}, Ut = function(e3) {\n  function t4(t5) {\n    var n2 = t5.getVisibilityState, r2 = void 0 === n2 ? Dt : n2, i3 = t5.initialState, s4 = void 0 === i3 ? \"visible\" : i3, o2 = t5.isEnabled, a4 = void 0 === o2 || o2, u3 = t5.pauseCheckDelay, c3 = void 0 === u3 ? 3e4 : u3, d4 = e3.call(this) || this;\n    return d4._pauseCheckDelay = 3e4, d4._currentState = \"visible\", d4._getVisibilityState = r2, d4._pauseCheckDelay = c3, d4._currentState = s4, d4._isEnabled = a4, d4._boundToggleState = d4._toggleState.bind(d4), d4;\n  }\n  return t$2(t4, e3), Object.defineProperty(t4.prototype, \"currentState\", { get: function() {\n    return this._currentState;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"isAvailable\", { get: function() {\n    return \"undefined\" != typeof window && !!window.addEventListener && !!window.removeEventListener;\n  }, enumerable: false, configurable: true }), t4.prototype._toggleState = function() {\n    var e4 = this, t5 = this._getVisibilityState();\n    \"hidden\" !== t5 ? \"hidden\" === this._currentState && (this._pauseDelayTimer && (clearTimeout(this._pauseDelayTimer), this._pauseDelayTimer = void 0), this.dispatch(\"resume\")) : \"hidden\" !== this._currentState && (this._pauseDelayTimer = setTimeout(function() {\n      e4._pauseDelayTimer = void 0, e4.dispatch(\"pause\");\n    }, this._pauseCheckDelay)), this._currentState = t5;\n  }, t4.prototype.start = function() {\n    this._isEnabled && this.isAvailable && (this._boundToggleState = this._toggleState.bind(this), window.addEventListener(\"visibilitychange\", this._boundToggleState, { capture: true }));\n  }, t4.prototype.stop = function() {\n    this._isEnabled && this.isAvailable && this._boundToggleState && window.removeEventListener(\"visibilitychange\", this._boundToggleState, { capture: true });\n  }, t4;\n}(ne), Ot = function() {\n  function e3(e4) {\n    var t4 = e4.logger, n2 = e4.connectionDelegate, r2 = void 0 === n2 ? null : n2, i3 = this;\n    this._onlineWorker = function() {\n      var e5;\n      return null === (e5 = i3.connectionDelegate) || void 0 === e5 ? void 0 : e5.reconnect();\n    }, this._offlineWorker = function() {\n      var e5;\n      return null === (e5 = i3.connectionDelegate) || void 0 === e5 ? void 0 : e5.disconnect();\n    }, this.unsubscribes = [], this._onlineListener = function(e5) {\n      if (i3.isAvailableOnWeb) return window.addEventListener(\"online\", e5), function() {\n        return window.removeEventListener(\"online\", e5, false);\n      };\n    }, this._offlineListener = function(e5) {\n      if (i3.isAvailableOnWeb) return window.addEventListener(\"offline\", e5), function() {\n        return window.removeEventListener(\"offline\", e5, false);\n      };\n    }, this.logger = t4, r2 && (this.connectionDelegate = r2);\n  }\n  return Object.defineProperty(e3.prototype, \"isAvailableOnWeb\", { get: function() {\n    return \"undefined\" != typeof window && !!window.addEventListener && \"ononline\" in window && \"onoffline\" in window && \"undefined\" != typeof navigator && void 0 !== navigator.onLine;\n  }, enumerable: false, configurable: true }), e3.prototype.setOnlineListener = function(e4) {\n    Boolean(e4) && \"function\" == typeof e4 && (this._onlineListener = e4);\n  }, e3.prototype.setOfflineListener = function(e4) {\n    Boolean(e4) && \"function\" == typeof e4 && (this._offlineListener = e4);\n  }, e3.prototype.start = function() {\n    this.unsubscribes = [this._onlineListener(this._onlineWorker), this._offlineListener(this._offlineWorker)];\n  }, e3.prototype.stop = function() {\n    var e4 = this;\n    this.unsubscribes.forEach(function(t4) {\n      try {\n        null == t4 || t4();\n      } catch (t5) {\n        e4.logger.warn(t5.message);\n      }\n    }), this.unsubscribes = [];\n  }, e3.prototype.isOnline = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e4) {\n        return this.isAvailableOnWeb ? [2, navigator.onLine] : [2, new Promise(function(e5) {\n          fetch(\"https://www.google.com\", { method: ae.GET, mode: \"no-cors\" }).then(function() {\n            return e5(true);\n          }).catch(function() {\n            return e5(false);\n          });\n        })];\n      });\n    });\n  }, e3;\n}(), At = function(e3) {\n  function t4(t5) {\n    var n2, r2 = this;\n    return (r2 = e3.call(this) || this).method = ae.GET, r2.path = De$3, r2.params = se(oe({ ts: \"number\" == typeof t5.token ? t5.token : void 0, token: \"string\" == typeof t5.token ? t5.token : void 0, limit: null !== (n2 = t5.limit) && void 0 !== n2 ? n2 : 100 })), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Nt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.configs = n2.configs, r2.hasMore = n2.has_more, r2.nextToken = n2.next, r2.ts = n2.ts, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Mt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.nickname, i3 = t5.profileUrl, s4 = t5.profileImage, o2 = t5.preferredLanguages, a4 = e3.call(this) || this;\n    return a4.method = ae.PUT, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2)), a4.params = se(oe({ nickname: r2, profile_url: i3, profile_file: s4, preferred_languages: o2 })), a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Lt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.user = new ls$2(t5, n$2({}, n2)), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Rt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.token, i3 = t5.deviceOS, s4 = t5.deviceManufacturer, o2 = t5.systemPushEnabled, a4 = e3.call(this) || this;\n    return a4.method = ae.POST, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/apns\"), a4.params = se({ apns_device_token: r2, always_push: true, device_os: i3, device_manufacturer: s4, system_push_enabled: o2 }), a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.token = n2.token, r2.type = n2.type ? f$1[n2.type.toLowerCase()] : f$1.UNKNOWN, r2.user = new ls$2(t5, n2.user), r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar zt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.token, i3 = t5.deviceOS, s4 = t5.deviceManufacturer, o2 = t5.systemPushEnabled, a4 = e3.call(this) || this;\n    return a4.method = ae.POST, a4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/gcm\"), a4.params = se({ gcm_reg_token: r2, always_push: true, device_os: i3, device_manufacturer: s4, system_push_enabled: o2 }), a4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.token = n2.token, r2.type = n2.type ? f$1[n2.type.toLowerCase()] : f$1.UNKNOWN, r2.user = new ls$2(t5, n2.user), r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar Qt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.token, i3 = e3.call(this) || this;\n    return i3.method = ae.DELETE, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/apns/\").concat(encodeURIComponent(r2)), i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.token = n2.token, r2.user = new ls$2(t5, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar Ft = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.token, i3 = e3.call(this) || this;\n    return i3.method = ae.DELETE, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/gcm/\").concat(encodeURIComponent(r2)), i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.token = n2.token, r2.user = new ls$2(t5, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar jt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.DELETE, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/apns\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.type = n2.type ? f$1[n2.type.toLowerCase()] : f$1.UNKNOWN, r2.user = new ls$2(t5, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar qt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.DELETE, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/gcm\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.type = n2.type ? f$1[n2.type.toLowerCase()] : f$1.UNKNOWN, r2.user = new ls$2(t5, n2.user), r2.lastDeletedAt = n2.device_token_last_deleted_at, r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar xt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.type, i3 = t5.token, s4 = t5.ts, o2 = e3.call(this) || this;\n    return o2.method = ae.GET, o2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/\").concat(encodeURIComponent(r2), \"/device_tokens\"), o2.params = { created_ts: s4, token: i3 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Ht = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.pushTokens = { type: n2.type ? f$1[n2.type.toLowerCase()] : f$1.UNKNOWN, deviceTokens: n2.device_tokens, hasMore: n2.has_more, token: n2.token }, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Kt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/channel_invitation_preference\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Gt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.autoAccept = n2.auto_accept, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Wt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.willAutoAccept, i3 = e3.call(this) || this;\n    return i3.method = ae.PUT, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/channel_invitation_preference\"), i3.params = { auto_accept: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Vt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.autoAccept = n2.auto_accept, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Bt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push_preference\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Jt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.preference = { doNotDisturbOn: n2.do_not_disturb, startHour: n2.start_hour, startMin: n2.start_min, endHour: n2.end_hour, endMin: n2.end_min, timezone: n2.timezone }, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Zt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.doNotDisturbOn, i3 = t5.startHour, s4 = t5.startMin, o2 = t5.endHour, a4 = t5.endMin, u3 = t5.timezone, d4 = e3.call(this) || this;\n    return d4.method = ae.PUT, d4.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push_preference\"), d4.params = { do_not_disturb: r2, start_hour: i3, start_min: s4, end_hour: o2, end_min: a4, timezone: u3 }, d4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), $t = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.preference = { doNotDisturbOn: n2.do_not_disturb, startHour: n2.start_hour, startMin: n2.start_min, endHour: n2.end_hour, endMin: n2.end_min, timezone: n2.timezone }, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Xt = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push_preference\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Yt = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.snoozePeriod = { isSnoozeOn: n2.snooze_enabled }, \"number\" == typeof n2.snooze_start_ts && (r2.snoozePeriod.startTs = n2.snooze_start_ts), \"number\" == typeof n2.snooze_end_ts && (r2.snoozePeriod.endTs = n2.snooze_end_ts), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), en = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.snoozeOn, i3 = t5.startTs, s4 = t5.endTs, o2 = e3.call(this) || this;\n    return o2.method = ae.PUT, o2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push_preference\"), o2.params = { snooze_enabled: r2, snooze_start_ts: i3, snooze_end_ts: s4 }, o2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), tn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.snoozePeriod = { isSnoozeOn: n2.snooze_enabled }, \"number\" == typeof n2.snooze_start_ts && (r2.snoozePeriod.startTs = n2.snooze_start_ts), \"number\" == typeof n2.snooze_end_ts && (r2.snoozePeriod.endTs = n2.snooze_end_ts), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), nn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.blockedUserId, i3 = e3.call(this) || this;\n    return i3.method = ae.POST, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/block\"), i3.params = { target_id: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.user = new ls$2(t5, n2), r2;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar rn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.unblockedUserId, i3 = e3.call(this) || this;\n    return i3.method = ae.DELETE, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/block/\").concat(encodeURIComponent(r2)), i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar sn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push_preference\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), on = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.pushTriggerOption = n2.push_trigger_option, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), an = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.pushTriggerOption, i3 = e3.call(this) || this;\n    return i3.method = ae.PUT, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push_preference\"), i3.params = { push_trigger_option: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), un = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.pushTriggerOption = n2.push_trigger_option, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), cn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/template\"), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), dn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.name = n2.name, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), ln = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.templateName, i3 = e3.call(this) || this;\n    return i3.method = ae.PUT, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/push/template\"), i3.params = { name: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), hn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.name = n2.name, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), fn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.token, i3 = e3.call(this) || this;\n    return i3.method = ae.GET, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/friends/changelogs\"), i3.params = { token: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), pn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.changelogs = { addedUsers: n2.added.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), updatedUsers: n2.updated.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), deletedUserIds: n2.deleted, hasMore: n2.has_more, token: n2.next }, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), vn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.discoveries, i3 = e3.call(this) || this;\n    return i3.method = ae.PUT, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/friend_discoveries\"), i3.params = { friend_discoveries: r2.map(function(e4) {\n      return { friend_discovery_key: e4.friendDiscoveryKey, friend_name: e4.friendName };\n    }) }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), gn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.friendDiscoveryRequestId = n2.friend_discovery_request_id, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), mn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.discoveryKeys, i3 = e3.call(this) || this;\n    return i3.method = ae.DELETE, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/friend_discoveries\"), i3.params = { friend_discovery_keys: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar bn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.userIds, i3 = e3.call(this) || this;\n    return i3.method = ae.POST, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/friends\"), i3.params = { user_ids: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), _n = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.users = n2.users.map(function(e4) {\n      return new ls$2(t5, e4);\n    }), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), yn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.userIds, i3 = e3.call(this) || this;\n    return i3.method = ae.DELETE, i3.path = \"\".concat(ue, \"/\").concat(encodeURIComponent(n2), \"/friends\"), i3.params = { user_ids: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar wn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ue, \"/\").concat(n2, \"/allow_friend_discovery\"), r2.params = {}, r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), kn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.allowFriendDiscovery = n2.allow_friend_discovery, r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Sn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.userId, r2 = t5.allowFriendDiscovery, i3 = e3.call(this) || this;\n    return i3.method = ae.PUT, i3.path = \"\".concat(ue, \"/\").concat(n2, \"/allow_friend_discovery\"), i3.params = { allow_friend_discovery: r2 }, i3;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\n!function(e3) {\n  function t4() {\n    return null !== e3 && e3.apply(this, arguments) || this;\n  }\n  t$2(t4, e3);\n}(qe$2);\nvar In, Cn = function(e3) {\n  function t4() {\n    var t5 = e3.call(this) || this;\n    return t5.method = ae.GET, t5.path = be$1, t5;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), En = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.emojiContainer = new Ct(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Tn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.categoryId, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(be$1, \"/\").concat(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Pn = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.emojiCategory = new It(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), Dn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.key, r2 = e3.call(this) || this;\n    return r2.method = ae.GET, r2.path = \"\".concat(ve$1, \"/\").concat(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), Un = function(e3) {\n  function t4(t5, n2) {\n    var r2 = e3.call(this, t5, n2) || this;\n    return r2.emoji = new St(n2), r2;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2), On = function(e3) {\n  function t4() {\n    var t5 = e3.call(this) || this;\n    return t5.method = ae.GET, t5.path = \"\".concat(we$1), t5;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2), An = function(e3) {\n  function t4(t5, n2) {\n    var r2, i3 = this, s4 = null != n2 ? n2 : {};\n    return (i3 = e3.call(this, t5, n2) || this).uikitConfiguration = { string: JSON.stringify(s4), json: s4 }, i3.updatedAt = null !== (r2 = null == n2 ? void 0 : n2.updated_at) && void 0 !== r2 ? r2 : 0, i3;\n  }\n  return t$2(t4, e3), t4;\n}(qe$2);\n!function(e3) {\n  e3.DELIVERED = \"DELIVERED\", e3.CLICKED = \"CLICKED\";\n}(In || (In = {}));\nvar Nn, Mn = function(e3) {\n  function t4(t5) {\n    var n2 = t5.deviceToken, r2 = t5.pushTrackingId, i3 = t5.messageId, s4 = t5.allowedPushNotification, o2 = t5.channelKey, a4 = t5.templateKey, u3 = t5.eventType, d4 = t5.notificationEventDeadline, h4 = e3.call(this) || this;\n    return h4.method = ae.POST, h4.path = Ie$1, h4.params = se({ device_token: n2, push_tracking_id: r2, message_id: i3, allowed_push_notification: s4, channel_key: o2, template_key: a4, event_type: u3, notification_event_deadline: d4 }), h4;\n  }\n  return t$2(t4, e3), t4;\n}(Fe$2);\nvar Ln = function() {\n  function t4(e3, t5, n2) {\n    var s4 = this;\n    this._storeInitialized = false, this._iid = e3, this.options = t5;\n    var o2 = uo.of(e3), a$12 = o2.sdkState, u3 = o2.cacheContext, c3 = o2.dispatcher, d4 = o2.sessionManager, l2 = o2.requestQueue, h4 = o2.logger, f2 = o2.userEventHandlers, p2 = o2.appStateToggleEnabled;\n    this._onlineDetector = new Ot({ logger: h4, connectionDelegate: { reconnect: function() {\n      return r$1(s4, void 0, void 0, function() {\n        var t6, n3, r2, s5, o3, a$13;\n        return s$1(this, function(i3) {\n          switch (i3.label) {\n            case 0:\n              if (t6 = uo.of(e3), n3 = t6.sdkState, r2 = t6.connectionManager, (s5 = t6.sessionManager).session.hasSession) return [3, 5];\n              i3.label = 1;\n            case 1:\n              return i3.trys.push([1, 3, , 4]), [4, r2.connect(s5.session.authToken)];\n            case 2:\n              return i3.sent(), [3, 4];\n            case 3:\n              if (o3 = i3.sent(), v$2(o3)) throw o3;\n              return h4.debug(\"connect failed by reconnect event = \", o3), [3, 4];\n            case 4:\n              return [3, 9];\n            case 5:\n              if (\"foreground\" !== n3.appState) return [3, 9];\n              i3.label = 6;\n            case 6:\n              return i3.trys.push([6, 8, , 9]), [4, r2.resetAndReconnect()];\n            case 7:\n              return i3.sent(), [3, 9];\n            case 8:\n              if (a$13 = i3.sent(), v$2(a$13)) throw a$13;\n              return h4.debug(\"resetAndReconnect failed by reconnect event = \", a$13), [3, 9];\n            case 9:\n              return c3.dispatch(new a()), [2];\n          }\n        });\n      });\n    }, disconnect: function() {\n      Dr$1(function() {\n        return r$1(s4, void 0, void 0, function() {\n          return s$1(this, function(t6) {\n            switch (t6.label) {\n              case 0:\n                return [4, uo.of(e3).connectionManager.disconnect()];\n              case 1:\n                return t6.sent(), [2];\n            }\n          });\n        });\n      });\n    } } });\n    var v2 = new N(e3, { localCacheEnabled: u3.localCacheEnabled, enableAutoResend: u3.localCacheConfig.enableAutoResend, dispatcher: c3, sdkState: a$12, logger: h4 });\n    n2.forEach(function(t6) {\n      t6.init(e3, { sdkState: a$12, cacheContext: u3, dispatcher: c3, sessionManager: d4, requestQueue: l2, logger: h4, onlineDetector: s4._onlineDetector }), s4[t6.name] = t6;\n    }), this._appStateChangeDetector = new Ut({ isEnabled: p2 }), this._appStateChangeDetector.on(\"resume\", function() {\n      h4.debug(\"the page resumes from freeze\"), s4.setForegroundState();\n    }).on(\"pause\", function() {\n      h4.debug(\"the page freezes\"), s4.setBackgroundState();\n    }), c3.on(function(t6) {\n      var n3;\n      if (t6 instanceof Fr$1) {\n        if (t6.stateType === Rr$1.CONNECTED) v2.processNonAutoResendRegisteredPendingMessages();\n      } else if (t6 instanceof ze$2) {\n        if (\"USEV\" === t6.code) {\n          var o3 = t6.as(O$1).event;\n          if (o3.category === L$1.FRIEND_DISCOVERED) {\n            var c4 = v$1.getDataAsFriendDiscoveredEvent(e3, o3).friendDiscoveries;\n            kr$1(function() {\n              return r$1(s4, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return [2, f2.forEach(function(e5) {\n                    e5.onFriendsDiscovered && e5.onFriendsDiscovered(c4);\n                  })];\n                });\n              });\n            });\n          }\n        }\n      } else if (t6 instanceof xr$1) {\n        var d5 = uo.of(s4._iid).subscribedUnreadMessageCount, l3 = false, p3 = t6.ts;\n        \"number\" == typeof p3 && p3 > d5.ts && (d5.all !== t6.all && (l3 = true), d5.all = t6.all >= 0 ? t6.all : 0, t6.customTypes && Object.keys(t6.customTypes).forEach(function(e4) {\n          d5.customTypes[e4] !== t6.customTypes[e4] && (l3 = true), d5.customTypes[e4] = t6.customTypes[e4];\n        }), l3 = l3 && d5.ts > 0, d5.ts = p3), l3 && kr$1(function() {\n          return r$1(s4, void 0, void 0, function() {\n            return s$1(this, function(e4) {\n              return [2, f2.forEach(function(e5) {\n                e5.onTotalUnreadMessageCountChanged && e5.onTotalUnreadMessageCountChanged({ groupChannelCount: d5.all, feedChannelCount: d5.feed, customTypeUnreadCount: d5.customTypes }), e5.onTotalUnreadMessageCountUpdated && e5.onTotalUnreadMessageCountUpdated(d5.all, d5.customTypes);\n              })];\n            });\n          });\n        });\n      } else t6 instanceof hs$2 ? (u3.preference.set(s4._getUserProfileCacheKey(a$12.userId), ds$2.payloadify(t6.userProfile)), (null === (n3 = t6.userProfile.appInfo.notificationInfo) || void 0 === n3 ? void 0 : n3.isEnabled) && u3.preference.set(Gr$1(s4.appId), { value: true })) : t6 instanceof fs$2 ? t6.configSyncNeeded && Dr$1(function() {\n        return r$1(s4, void 0, void 0, function() {\n          return s$1(this, function(e4) {\n            switch (e4.label) {\n              case 0:\n                return [4, this._getAppConfigsInfo()];\n              case 1:\n                return e4.sent(), [2];\n            }\n          });\n        });\n      }) : t6 instanceof m$1 ? u3.preference.set(Xr$1(s4.appId), { configTs: t6.configTs }) : t6 instanceof Ve$2 && t6.error && t6.error.isSessionInvalidatedError && (h4.debug(\"session revoked.\"), s4._internalDisconnect(t6.error));\n    });\n  }\n  return t4.init = function(e3) {\n    var n2 = e3.appId, r2 = e3.appVersion, i3 = e3.modules, s4 = void 0 === i3 ? [] : i3, o2 = e3.options, a4 = void 0 === o2 ? new L$2() : o2, u3 = e3.debugMode, c$1 = void 0 !== u3 && u3, d4 = e3.customApiHost, l2 = e3.customWebSocketHost, h4 = e3.newInstance, f2 = void 0 !== h4 && h4, p2 = e3.logLevel, v2 = e3.localCacheEnabled, g2 = void 0 !== v2 && v2, m4 = e3.localCacheConfig, b$12 = void 0 === m4 ? new q() : m4, _2 = e3.localCacheEncryption, y4 = e3.useAsyncStorageStore, w3 = void 0 === y4 ? null : y4, k3 = e3.useMMKVStorageStore, S4 = void 0 === k3 ? null : k3, I3 = e3.appStateToggleEnabled, C2 = void 0 === I3 || I3;\n    if (!Nn || f2) {\n      var E3 = \"su-\".concat(ee()), P2 = null != _2 ? _2 : { encrypt: function(e4) {\n        return e4;\n      }, decrypt: function(e4) {\n        return e4;\n      } }, D3 = new Fs$1();\n      D3.level = null != p2 ? p2 : xs$1.WARN;\n      var U2 = new Ns$1({ encryption: P2 });\n      c$1 || (et$1() ? S4 ? U2 = new Rs$1({ MMKV: S4, encryption: P2 }) : w3 && (U2 = new Ps$1({ AsyncStorage: w3, encryption: P2 }), D3.warn(\"AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.\")) : U2 = new ks$1({ encryption: P2 })), new uo(E3, { appId: n2, appVersion: r2, options: a4, apiHost: null != d4 ? d4 : \"https://api-\".concat(n2, \".sendbird.com\"), websocketHost: null != l2 ? l2 : \"wss://ws-\".concat(n2, \".sendbird.com\"), store: U2, encryption: P2, logger: D3, localCacheEnabled: g2, localCacheConfig: b$12, debugMode: c$1, appStateToggleEnabled: C2 });\n      var O3 = [new Ia(), new b()], L3 = new t4(E3, a4, c(c([], a$1(s4), false), a$1(O3), false));\n      return Nn || (Nn = L3), L3;\n    }\n    return Nn;\n  }, Object.defineProperty(t4, \"instance\", { get: function() {\n    return Nn;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4, \"version\", { get: function() {\n    return l;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"appId\", { get: function() {\n    return uo.of(this._iid).sdkState.appId;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"appInfo\", { get: function() {\n    var e3 = uo.of(this._iid).appInfo;\n    return null != e3 ? e3 : null;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"appVersion\", { get: function() {\n    var e3;\n    return null !== (e3 = uo.of(this._iid).sdkState.appVersion) && void 0 !== e3 ? e3 : \"\";\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"debugMode\", { get: function() {\n    return !!uo.of(this._iid).debugMode;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"logLevel\", { get: function() {\n    return uo.of(this._iid).logger.level;\n  }, set: function(e3) {\n    uo.of(this._iid).logger.level = e3;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"isCacheEnabled\", { get: function() {\n    return uo.of(this._iid).cacheContext.localCacheEnabled;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"localCacheConfig\", { get: function() {\n    var e3 = uo.of(this._iid).cacheContext;\n    return e3.localCacheEnabled ? e3.localCacheConfig : null;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"ekey\", { get: function() {\n    return uo.of(this._iid).sessionManager.ekey;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"currentUser\", { get: function() {\n    var e3;\n    return null !== (e3 = uo.of(this._iid).sessionManager.currentUser) && void 0 !== e3 ? e3 : null;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"connectionState\", { get: function() {\n    var e3 = uo.of(this._iid).connectionManager;\n    return e3.isConnected ? Ar$1.OPEN : e3.isConnecting ? Ar$1.CONNECTING : Ar$1.CLOSED;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"lastConnectedAt\", { get: function() {\n    var e3 = uo.of(this._iid), t5 = e3.connectedAt;\n    return e3.connectionManager.isConnected ? t5 : 0;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"fcmPushToken\", { get: function() {\n    var e3;\n    return null !== (e3 = this._fcmPushToken) && void 0 !== e3 ? e3 : null;\n  }, enumerable: false, configurable: true }), Object.defineProperty(t4.prototype, \"apnsPushToken\", { get: function() {\n    var e3;\n    return null !== (e3 = this._apnsPushToken) && void 0 !== e3 ? e3 : null;\n  }, enumerable: false, configurable: true }), t4.prototype._getNestDBVersion = function() {\n    return 8;\n  }, t4.prototype._getPreferenceVersion = function() {\n    return 9;\n  }, t4.prototype._getPreferenceCacheKey = function(e3) {\n    return \"sendbird@\".concat(this.appId, \"/\").concat(e3, \".pref\");\n  }, t4.prototype._getUserProfileCacheKey = function(e3) {\n    return \"sendbird@\".concat(this.appId, \"/\").concat(e3, \".profile\");\n  }, t4.prototype._internalDisconnect = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t5 = uo.of(this._iid), n2 = t5.connectionManager, r2 = t5.sdkState, s4 = t5.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), s4.cancelAll(), [4, n2.logout(e3)];\n          case 1:\n            return i3.sent(), [4, this.clearCachedData()];\n          case 2:\n            return i3.sent(), r2.appState = \"foreground\", [2];\n        }\n      });\n    });\n  }, t4.prototype._getAppConfigsInfo = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, s4, o2, a4, u3, c3, d4 = this;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.requestQueue, n2 = e3.dispatcher, s4 = e3.cacheContext, o2 = e3.sdkState, a4 = {}, [4, s4.preference.get(Xr$1(o2.appId))];\n          case 1:\n            return (c3 = l2.sent()) && (u3 = c3.configTs), new w(\"appConfigsInfo\", function(e4) {\n              return r$1(d4, void 0, void 0, function() {\n                var r2, s5, o3, u4, c4, d5, l3, h4;\n                return s$1(this, function(i3) {\n                  switch (i3.label) {\n                    case 0:\n                      return r2 = { hasNext: true, nextToken: e4 }, s5 = new At({ token: e4 }), [4, t5.send(s5)];\n                    case 1:\n                      return o3 = i3.sent(), u4 = o3.as(Nt), c4 = u4.configs, d5 = u4.hasMore, l3 = u4.nextToken, h4 = u4.ts, Object.keys(c4).forEach(function(e5) {\n                        a4[e5] = c4[e5];\n                      }), r2.hasNext = d5, r2.nextToken = l3, d5 || n2.dispatch(new P({ appConfigsInfo: a4, configTs: h4 })), [2, r2];\n                  }\n                });\n              });\n            }).start(u3), [2];\n        }\n      });\n    });\n  }, t4.prototype.getMemoryStoreForDebugging = function() {\n    var e3 = uo.of(this._iid), t5 = e3.debugMode, n2 = e3.cacheContext;\n    if (t5) return n2.store instanceof Ns$1 ? n2.store : null;\n    throw b$2.debugModeRequired;\n  }, t4.prototype.addExtension = function(e3, t5) {\n    var n2 = uo.of(this._iid).sdkState;\n    [\"sb_uikit\", \"sb_syncmanager\", \"device-os-platform\"].indexOf(e3) > -1 && n2.extensions && (n2.extensions[e3] = t5);\n  }, t4.prototype.addSendbirdExtensions = function(e3, t5, n2) {\n    var r2, i3, s4 = uo.of(this._iid), o$1 = s4.logger, a4 = s4.sdkState, u3 = new RegExp(nt$1);\n    if (0 === e3.length) return o$1.debug(\"sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty.\"), false;\n    if (e3.find(function(e4) {\n      return !u3.test(e4.version);\n    })) return o$1.debug(\"sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification.\"), false;\n    if (n2) try {\n      for (var c3 = o(Object.entries(n2)), d4 = c3.next(); !d4.done; d4 = c3.next()) {\n        var l2 = a$1(d4.value, 2), h4 = l2[0], f2 = l2[1];\n        if (/&|=/.test(h4) || /&|=/.test(f2)) return o$1.debug(\"sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &.\"), false;\n      }\n    } catch (e4) {\n      r2 = { error: e4 };\n    } finally {\n      try {\n        d4 && !d4.done && (i3 = c3.return) && i3.call(c3);\n      } finally {\n        if (r2) throw r2.error;\n      }\n    }\n    return a4.sendbirdRuntimeEnvironment = { sendbirdExtensions: e3, deviceOS: t5, customData: n2 }, true;\n  }, t4.prototype.setOnlineListener = function(e3) {\n    this._onlineDetector.setOnlineListener(e3);\n  }, t4.prototype.setOfflineListener = function(e3) {\n    this._onlineDetector.setOfflineListener(e3);\n  }, t4.prototype._safeInitializeStore = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5;\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            t5 = uo.of(this._iid).cacheContext, n2.label = 1;\n          case 1:\n            return n2.trys.push([1, 3, , 5]), [4, t5.store.init(e3)];\n          case 2:\n            return n2.sent(), this._storeInitialized = true, [3, 5];\n          case 3:\n            return n2.sent(), t5.replaceStore(new Ns$1()), [4, this._safeInitializeStore(e3)];\n          case 4:\n            return n2.sent(), [3, 5];\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.setLocaleForChatbot = function(e3) {\n    var t5 = uo.of(this._iid).sdkState, n2 = function(e4) {\n      return e4.replace(/[^a-zA-Z-_.]/g, \"\");\n    }(e3.trim());\n    n2 && (t5.localeForChatbot = n2);\n  }, t4.prototype.initializeCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4, o2, a4, u3, c3, d4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            if (t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.cacheContext, s4 = t5.dispatcher, o2 = t5.logger, n2.userId && n2.userId === e3) return [3, 13];\n            a4 = \"sendbird@\".concat(n2.appId, \"/\").concat(e3, \".db\"), i3.label = 1;\n          case 1:\n            return i3.trys.push([1, 9, 11, 13]), r2.localCacheEnabled ? r2.nestdb && r2.nestdb.state !== Os$1.CLOSED && r2.nestdb.name === a4 ? [3, 3] : (u3 = \"sendbird@\".concat(n2.appId, \"/\").concat(e3, \".db\"), (c3 = r2.nestdb = new Ds$1({ name: u3, version: this._getNestDBVersion(), store: r2.store, config: new Li({ dbname: u3, itemSizeLimit: 61440 }) })).on(\"upgrade\", Pt(c3)), c3.on(\"storeReplaced\", function(e4) {\n              r2.replaceStore(e4), r2.localCacheEnabled = false, c3.on(\"upgrade\", Pt(c3));\n            }), [4, c3.open()]) : [3, 6];\n          case 2:\n            return i3.sent(), this._storeInitialized = true, s4.dispatch(new T$1(this._iid, { userId: e3 })), [3, 5];\n          case 3:\n            return [4, this._safeInitializeStore(a4)];\n          case 4:\n            i3.sent(), i3.label = 5;\n          case 5:\n            return n2.userId = e3, [3, 8];\n          case 6:\n            return [4, this._safeInitializeStore(a4)];\n          case 7:\n            i3.sent(), n2.userId = e3, i3.label = 8;\n          case 8:\n            return [3, 13];\n          case 9:\n            return d4 = i3.sent(), o2.warn(\"Nest DB Open Failed. \", d4), r2.store instanceof Ns$1 || (r2.replaceStore(new Ns$1()), r2.localCacheEnabled = false), [4, this._safeInitializeStore(a4)];\n          case 10:\n            throw i3.sent(), n2.userId = e3, b$2.databaseError;\n          case 11:\n            return [4, this._setupPreference(e3)];\n          case 12:\n            return i3.sent(), [7];\n          case 13:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.getCacheDataSize = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3;\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return (e3 = uo.of(this._iid).cacheContext).localCacheEnabled && e3.nestdb ? [4, e3.nestdb.estimateUsage()] : [3, 2];\n          case 1:\n            return [2, t5.sent()];\n          case 2:\n            return [2, 0];\n        }\n      });\n    });\n  }, t4.prototype.clearCachedData = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3;\n      return s$1(this, function(t5) {\n        switch (t5.label) {\n          case 0:\n            return (e3 = uo.of(this._iid).cacheContext).localCacheEnabled && e3.nestdb ? [4, e3.nestdb.clear()] : [3, 2];\n          case 1:\n            t5.sent(), t5.label = 2;\n          case 2:\n            return this._storeInitialized ? [4, e3.preference.clear()] : [3, 4];\n          case 3:\n            t5.sent(), t5.label = 4;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.clearCachedMessages = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, s4 = this;\n      return s$1(this, function(o2) {\n        switch (o2.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = Zs$1.of(this._iid), n2 = Js$1.of(this._iid), t5 && n2 ? [4, Promise.all(e3.map(function(e4) {\n              return r$1(s4, void 0, void 0, function() {\n                return s$1(this, function(r2) {\n                  switch (r2.label) {\n                    case 0:\n                      return [4, t5.removeMessagesOfChannel(e4)];\n                    case 1:\n                      return r2.sent(), [4, n2.removeMessagesOfChannel(e4)];\n                    case 2:\n                      return r2.sent(), [2];\n                  }\n                });\n              });\n            }))] : [3, 2];\n          case 1:\n            o2.sent(), o2.label = 2;\n          case 2:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype._setupPreference = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4, o2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.cacheContext, s4 = t5.statManager, [4, r2.preference.init(this._getPreferenceCacheKey(e3), this._getPreferenceVersion())];\n          case 1:\n            return i3.sent(), [4, r2.preference.get(this._getUserProfileCacheKey(e3))];\n          case 2:\n            return (o2 = i3.sent()) && new ds$2(this._iid, o2).apply(), [4, s4.init(\"sendbird@\".concat(n2.appId, \"/\").concat(e3, \".statlog\"))];\n          case 3:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype._ready = function(e3, t5, s4) {\n    return void 0 === s4 && (s4 = {}), r$1(this, void 0, void 0, function() {\n      var r2, o2, a4, u3, c3, d4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3) && S$1(\"string\", t5, true)).throw(b$2.invalidParameters), r2 = uo.of(this._iid), o2 = r2.sdkState, a4 = r2.cacheContext, u3 = r2.connectionManager, c3 = s4.errorForOtherUser, o2.userId && o2.userId !== e3 ? c3 ? [3, 2] : [4, u3.logout()] : [3, 3];\n          case 1:\n            return i3.sent(), [3, 3];\n          case 2:\n            throw c3;\n          case 3:\n            return i3.trys.push([3, 5, , 6]), [4, this.initializeCache(e3)];\n          case 4:\n            return i3.sent(), uo.of(this._iid).dispatcher.dispatch(new S()), [3, 6];\n          case 5:\n            return i3.sent(), d4 = uo.of(this._iid).logger, a4.localCacheEnabled = false, d4.warn(\"Cache initialization failed - cache is not available.\"), [3, 6];\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.authenticateFeed = function(e3, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this.authenticate(e3, t5)];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, t4.prototype.authenticate = function(e3, t5, n2) {\n    var s4;\n    return void 0 === n2 && (n2 = p.SESSION_TOKEN), r$1(this, void 0, void 0, function() {\n      var r2, o2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return r2 = uo.of(this._iid), o2 = r2.sessionManager, a4 = r2.connectionManager, [4, this._ready(e3, t5, { errorForOtherUser: a4.isConnected ? b$2.alreadyConnectedAsAnotherUser : void 0 })];\n          case 1:\n            return i3.sent(), (null === (s4 = o2.session.services) || void 0 === s4 ? void 0 : s4.includes(M$1.CHAT)) ? [3, 3] : (o2.handler || t5 && n2 !== p.ACCESS_TOKEN || this.setSessionHandler(new Mi()), [4, o2.authenticate(e3, t5)]);\n          case 2:\n            i3.sent(), i3.label = 3;\n          case 3:\n            return [2, this.currentUser];\n        }\n      });\n    });\n  }, t4.prototype.connect = function(e3, t5) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._ready(e3, t5)];\n          case 1:\n            n2.sent(), n2.label = 2;\n          case 2:\n            return n2.trys.push([2, , 4, 5]), [4, uo.of(this._iid).connectionManager.connect(t5)];\n          case 3:\n            return n2.sent(), [3, 5];\n          case 4:\n            return this._onlineDetector.start(), this._appStateChangeDetector.start(), [7];\n          case 5:\n            return [2, this.currentUser];\n        }\n      });\n    });\n  }, t4.prototype.reconnect = function() {\n    var e3 = uo.of(this._iid), t5 = e3.connectionManager, n2 = e3.sdkState, r2 = e3.sessionManager.session.hasSession;\n    return r2 && (this._appStateChangeDetector.start(), this._onlineDetector.start(), t5.resetAndReconnect().then(function() {\n      n2.appState = \"foreground\";\n    }).catch(function() {\n    })), r2;\n  }, t4.prototype.disconnect = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return [4, this._internalDisconnect()];\n          case 1:\n            return e3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.disconnectWebSocket = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.connectionManager, n2 = e3.requestQueue, this._appStateChangeDetector.stop(), this._onlineDetector.stop(), n2.cancelAll(), [4, t5.disconnectWebSocket(true)];\n          case 1:\n            return r2.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.setBackgroundState = function() {\n    var e3 = uo.of(this._iid), t5 = e3.connectionManager, n2 = e3.sdkState, r2 = e3.logger;\n    \"foreground\" === n2.appState && (n2.appState = \"background\", r2.debug(\"going background state\"), t5.background().catch(function(e4) {\n      r2.debug(\"setBackgroundState error = \", e4);\n    }));\n  }, t4.prototype.setForegroundState = function() {\n    var e3 = uo.of(this._iid), t5 = e3.connectionManager, n2 = e3.sdkState, r2 = e3.dispatcher, i3 = e3.logger;\n    \"background\" === n2.appState && (n2.appState = \"foreground\", i3.debug(\"going foreground state\"), t5.resetAndReconnect().catch(function(e4) {\n      i3.debug(\"setForgroundState error = \", e4);\n    }), r2.dispatch(new a()));\n  }, t4.prototype.setSessionHandler = function(e3) {\n    cs$2(e3 instanceof Mi).throw(b$2.invalidParameters), uo.of(this._iid).sessionManager.handler = e3;\n  }, t4.prototype.addUserEventHandler = function(e3, t5) {\n    cs$2(S$1(\"string\", e3) && t5 instanceof Si).throw(b$2.invalidParameters), uo.of(this._iid).userEventHandlers.set(e3, t5);\n  }, t4.prototype.removeUserEventHandler = function(e3) {\n    uo.of(this._iid).userEventHandlers.delete(e3);\n  }, t4.prototype.removeAllUserEventHandler = function() {\n    uo.of(this._iid).userEventHandlers.clear();\n  }, t4.prototype.addConnectionHandler = function(e3, t5) {\n    cs$2(S$1(\"string\", e3) && t5 instanceof wi).throw(b$2.invalidParameters), uo.of(this._iid).connectionHandlers.set(e3, t5);\n  }, t4.prototype.removeConnectionHandler = function(e3) {\n    uo.of(this._iid).connectionHandlers.delete(e3);\n  }, t4.prototype.removeAllConnectionHandler = function() {\n    uo.of(this._iid).connectionHandlers.clear();\n  }, t4.prototype.createApplicationUserListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new Ni(this._iid, e3);\n  }, t4.prototype.createBlockedUserListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new ki(this._iid, e3);\n  }, t4.prototype.createFriendListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new xi(this._iid, e3);\n  }, t4.prototype.createMessageSearchQuery = function(e3) {\n    return new ma(this._iid, e3);\n  }, t4.prototype.createPollListQuery = function(e3) {\n    return new Yo(this._iid, n$2({}, e3));\n  }, t4.prototype.createPollVoterListQuery = function(e3) {\n    return new $o(this._iid, n$2({}, e3));\n  }, t4.prototype.buildUserFromSerializedData = function(e3) {\n    var t5 = as$2(e3);\n    return new ls$2(this._iid, ls$2.payloadify(t5));\n  }, t4.prototype.updateCurrentUserInfo = function(t5) {\n    return void 0 === t5 && (t5 = {}), r$1(this, void 0, void 0, function() {\n      var r2, s4, o2, a4, u3, c3, d4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return r2 = n$2(n$2({}, Et), t5), cs$2(function(t6) {\n              return k(t6.profileImage, true) && S$1(\"string\", t6.profileUrl, true) && S$1(\"string\", t6.nickname, true);\n            }(r2)).throw(b$2.invalidParameters), this.currentUser ? (s4 = uo.of(this._iid), o2 = s4.sdkState, a4 = s4.requestQueue, u3 = new Mt(n$2({ userId: o2.userId }, r2)), [4, a4.send(u3)]) : [3, 2];\n          case 1:\n            return c3 = i3.sent(), d4 = c3.as(Lt).user, this.currentUser && (r2.nickname && (this.currentUser.nickname = d4.nickname), (r2.profileUrl || r2.profileImage) && (this.currentUser.plainProfileUrl = d4.profileUrl)), [2, d4];\n          case 2:\n            throw b$2.connectionRequired;\n        }\n      });\n    });\n  }, t4.prototype.updateCurrentUserInfoWithPreferredLanguages = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4, o2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), this.currentUser ? (t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new Mt({ userId: n2.userId, preferredLanguages: e3 }), [4, r2.send(s4)]) : [3, 2];\n          case 1:\n            return o2 = i3.sent(), a4 = o2.as(Lt).user, this.currentUser && (this.currentUser.preferredLanguages = a4.preferredLanguages), [2, a4];\n          case 2:\n            throw b$2.connectionRequired;\n        }\n      });\n    });\n  }, t4.prototype.registerFCMPushTokenForCurrentUser = function(e3, t5) {\n    var s4, o2;\n    return r$1(this, void 0, void 0, function() {\n      var a4, u3, c3, d$1, l2, h4, f2 = this;\n      return s$1(this, function(p2) {\n        switch (p2.label) {\n          case 0:\n            if (cs$2(S$1(\"string\", e3) && S$1(\"string\", null == t5 ? void 0 : t5.deviceManufacturer, true)).throw(b$2.invalidParameters), (null == t5 ? void 0 : t5.deviceOS) && cs$2(T$2(Je$2, t5.deviceOS.platform, true) && S$1(\"string\", t5.deviceOS.version, true)).throw(b$2.invalidParameters), !this.currentUser) return [3, 6];\n            a4 = { deviceOS: \"\".concat((null === (s4 = null == t5 ? void 0 : t5.deviceOS) || void 0 === s4 ? void 0 : s4.platform) || Je$2.ANDROID, \"-\").concat((null === (o2 = null == t5 ? void 0 : t5.deviceOS) || void 0 === o2 ? void 0 : o2.version) || \"unknown\"), deviceManufacturer: null == t5 ? void 0 : t5.deviceManufacturer, systemPushEnabled: null == t5 ? void 0 : t5.systemPushEnabled }, p2.label = 1;\n          case 1:\n            return p2.trys.push([1, 4, , 5]), u3 = uo.of(this._iid), c3 = u3.sessionManager, d$1 = u3.sdkState, l2 = u3.requestQueue, c3.hasDeviceToken(f$1.FCM, e3) ? [2, d.SUCCESS] : (h4 = new zt({ userId: d$1.userId, token: e3, deviceOS: a4.deviceOS, deviceManufacturer: a4.deviceManufacturer, systemPushEnabled: a4.systemPushEnabled }), [4, l2.send(h4)]);\n          case 2:\n            return p2.sent(), [4, Dr$1(function() {\n              return r$1(f2, void 0, void 0, function() {\n                return s$1(this, function(t6) {\n                  switch (t6.label) {\n                    case 0:\n                      return c3.setDeviceToken(f$1.FCM, e3, a4), [4, c3.saveDeviceToken()];\n                    case 1:\n                      return t6.sent(), [2];\n                  }\n                });\n              });\n            })];\n          case 3:\n            return p2.sent(), this._fcmPushToken = \"\", [2, d.SUCCESS];\n          case 4:\n            return p2.sent(), [2, d.ERROR];\n          case 5:\n            return [3, 7];\n          case 6:\n            return this._fcmPushToken = e3, [2, d.PENDING];\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.unregisterFCMPushTokenForCurrentUser = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, s4, o2, a4, u3, c3, d$1 = this;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            if (cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), !this.currentUser) return [3, 6];\n            l2.label = 1;\n          case 1:\n            return l2.trys.push([1, 4, , 5]), t5 = uo.of(this._iid), s4 = t5.sessionManager, o2 = t5.sdkState, a4 = t5.requestQueue, u3 = new Ft({ userId: o2.userId, token: e3 }), [4, a4.send(u3)];\n          case 2:\n            return c3 = l2.sent().lastDeletedAt, [4, Dr$1(function() {\n              return r$1(d$1, void 0, void 0, function() {\n                return s$1(this, function(t6) {\n                  switch (t6.label) {\n                    case 0:\n                      return s4.unsetDeviceToken(f$1.FCM, e3), s4.setDeviceTokenDeletedAt(c3), [4, s4.saveDeviceToken()];\n                    case 1:\n                      return t6.sent(), [2];\n                  }\n                });\n              });\n            })];\n          case 3:\n            return l2.sent(), this._fcmPushToken = \"\", [2, d.SUCCESS];\n          case 4:\n            return l2.sent(), [2, d.ERROR];\n          case 5:\n            return [3, 7];\n          case 6:\n            return this._fcmPushToken = e3, [2, d.PENDING];\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.unregisterFCMPushTokenAllForCurrentUser = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, s4, o2, a4, u3 = this;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this.currentUser ? (e3 = uo.of(this._iid), t5 = e3.sessionManager, n2 = e3.sdkState, s4 = e3.requestQueue, o2 = new qt({ userId: n2.userId }), [4, s4.send(o2)]) : [3, 3];\n          case 1:\n            return a4 = c3.sent().lastDeletedAt, [4, Dr$1(function() {\n              return r$1(u3, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  switch (e4.label) {\n                    case 0:\n                      return t5.unsetDeviceTokens(f$1.FCM), t5.setDeviceTokenDeletedAt(a4), [4, t5.saveDeviceToken()];\n                    case 1:\n                      return e4.sent(), [2];\n                  }\n                });\n              });\n            })];\n          case 2:\n            c3.sent(), c3.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.registerAPNSPushTokenForCurrentUser = function(e3, t5) {\n    var s4, o2;\n    return r$1(this, void 0, void 0, function() {\n      var a4, u3, c3, d$1, l2, h4, f2 = this;\n      return s$1(this, function(p2) {\n        switch (p2.label) {\n          case 0:\n            if (cs$2(S$1(\"string\", e3) && S$1(\"string\", null == t5 ? void 0 : t5.deviceManufacturer, true)).throw(b$2.invalidParameters), (null == t5 ? void 0 : t5.deviceOS) && cs$2(T$2(Je$2, t5.deviceOS.platform, true) && S$1(\"string\", t5.deviceOS.version, true)).throw(b$2.invalidParameters), !this.currentUser) return [3, 6];\n            a4 = { deviceOS: \"\".concat((null === (s4 = null == t5 ? void 0 : t5.deviceOS) || void 0 === s4 ? void 0 : s4.platform) || Je$2.IOS, \"-\").concat((null === (o2 = null == t5 ? void 0 : t5.deviceOS) || void 0 === o2 ? void 0 : o2.version) || \"unknown\"), deviceManufacturer: null == t5 ? void 0 : t5.deviceManufacturer, systemPushEnabled: null == t5 ? void 0 : t5.systemPushEnabled }, p2.label = 1;\n          case 1:\n            return p2.trys.push([1, 4, , 5]), u3 = uo.of(this._iid), c3 = u3.sessionManager, d$1 = u3.sdkState, l2 = u3.requestQueue, c3.hasDeviceToken(f$1.APNS, e3) ? [2, d.SUCCESS] : (h4 = new Rt({ userId: d$1.userId, token: e3, deviceOS: a4.deviceOS, deviceManufacturer: a4.deviceManufacturer, systemPushEnabled: a4.systemPushEnabled }), [4, l2.send(h4)]);\n          case 2:\n            return p2.sent(), [4, Dr$1(function() {\n              return r$1(f2, void 0, void 0, function() {\n                return s$1(this, function(t6) {\n                  switch (t6.label) {\n                    case 0:\n                      return c3.setDeviceToken(f$1.APNS, e3, a4), [4, c3.saveDeviceToken()];\n                    case 1:\n                      return t6.sent(), [2];\n                  }\n                });\n              });\n            })];\n          case 3:\n            return p2.sent(), this._apnsPushToken = \"\", [2, d.SUCCESS];\n          case 4:\n            return p2.sent(), [2, d.ERROR];\n          case 5:\n            return [3, 7];\n          case 6:\n            return this._apnsPushToken = e3, [2, d.PENDING];\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.unregisterAPNSPushTokenForCurrentUser = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, s4, o2, a4, u3, c3, d$1 = this;\n      return s$1(this, function(l2) {\n        switch (l2.label) {\n          case 0:\n            if (cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), !this.currentUser) return [3, 6];\n            l2.label = 1;\n          case 1:\n            return l2.trys.push([1, 4, , 5]), t5 = uo.of(this._iid), s4 = t5.sessionManager, o2 = t5.sdkState, a4 = t5.requestQueue, u3 = new Qt({ userId: o2.userId, token: e3 }), [4, a4.send(u3)];\n          case 2:\n            return c3 = l2.sent().lastDeletedAt, [4, Dr$1(function() {\n              return r$1(d$1, void 0, void 0, function() {\n                return s$1(this, function(t6) {\n                  switch (t6.label) {\n                    case 0:\n                      return s4.unsetDeviceToken(f$1.APNS, e3), s4.setDeviceTokenDeletedAt(c3), [4, s4.saveDeviceToken()];\n                    case 1:\n                      return t6.sent(), [2];\n                  }\n                });\n              });\n            })];\n          case 3:\n            return l2.sent(), this._apnsPushToken = \"\", [2, d.SUCCESS];\n          case 4:\n            return l2.sent(), [2, d.ERROR];\n          case 5:\n            return [3, 7];\n          case 6:\n            return this._apnsPushToken = e3, [2, d.PENDING];\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.unregisterAPNSPushTokenAllForCurrentUser = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, s4, o2, a4, u3 = this;\n      return s$1(this, function(c3) {\n        switch (c3.label) {\n          case 0:\n            return this.currentUser ? (e3 = uo.of(this._iid), t5 = e3.sessionManager, n2 = e3.sdkState, s4 = e3.requestQueue, o2 = new jt({ userId: n2.userId }), [4, s4.send(o2)]) : [3, 3];\n          case 1:\n            return a4 = c3.sent().lastDeletedAt, [4, Dr$1(function() {\n              return r$1(u3, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  switch (e4.label) {\n                    case 0:\n                      return t5.unsetDeviceTokens(f$1.APNS), t5.setDeviceTokenDeletedAt(a4), [4, t5.saveDeviceToken()];\n                    case 1:\n                      return e4.sent(), [2];\n                  }\n                });\n              });\n            })];\n          case 2:\n            c3.sent(), c3.label = 3;\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.markPushNotificationAsDelivered = function(e3, t5) {\n    var n2;\n    return void 0 === t5 && (t5 = true), r$1(this, void 0, void 0, function() {\n      var r2, s4, o2, a4, u3, c3, d4, l2, h4, f2, p2, v2, g2, m4, b3, _2, y4, w3, k3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            if (r2 = uo.of(this._iid), s4 = r2.logger, o2 = r2.sessionManager, a4 = r2.requestQueue, u3 = r2.pushNotificationAckManager, s4.debug(\"markPushNotificationAsDelivered:\", e3), c3 = In.DELIVERED, d4 = u3.parseData(e3), l2 = d4.pushTrackingId, h4 = d4.sessionTopics, f2 = d4.sessionKey, p2 = d4.messageId, v2 = d4.channelKey, g2 = d4.templateKey, m4 = d4.notificationEventDeadline, !f2) throw s4.info(\"Can't use markPushNotificationAsDelivered() feature.\"), b$2.malformedDataError;\n            if (!h4.includes(Ks$2.PUSH_ACKNOWLEDGEMENT)) throw s4.info(\"Can't use markPushNotificationAsDelivered() feature.\"), b$2.malformedDataError;\n            if (u3.isAcked(l2, c3)) return s4.info(\"already delivered push notification:\", l2), [2];\n            b3 = Boolean(v2), _2 = t5 && b3, y4 = null === (n2 = o2.deviceTokens[0]) || void 0 === n2 ? void 0 : n2.token, w3 = new Mn({ deviceToken: null != y4 ? y4 : \"\", pushTrackingId: l2, eventType: c3, messageId: p2, channelKey: v2, templateKey: g2, notificationEventDeadline: m4, allowedPushNotification: _2 }), f2 && (w3.headers[\"Session-Key\"] = f2), i3.label = 1;\n          case 1:\n            return i3.trys.push([1, 3, , 4]), [4, a4.send(w3)];\n          case 2:\n            return i3.sent(), u3.markAsAcked(l2, c3), [3, 4];\n          case 3:\n            throw k3 = i3.sent(), s4.debug(\"failed to mark push notification as delivered. push tracking id: \".concat(l2, \". error: \").concat(k3)), k3;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.markPushNotificationAsClicked = function(e3) {\n    var t5;\n    return r$1(this, void 0, void 0, function() {\n      var n2, r2, s4, o2, a4, u3, c3, d4, l2, h4, f2, p2, v2, g2, m4, b3, _2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            if (n2 = uo.of(this._iid), r2 = n2.logger, s4 = n2.sessionManager, o2 = n2.requestQueue, a4 = n2.pushNotificationAckManager, r2.debug(\"markPushNotificationAsClicked:\", e3), u3 = In.CLICKED, c3 = a4.parseData(e3), d4 = c3.pushTrackingId, l2 = c3.sessionTopics, h4 = c3.sessionKey, f2 = c3.messageId, p2 = c3.channelKey, v2 = c3.templateKey, g2 = c3.notificationEventDeadline, !h4) throw r2.info(\"Can't use markPushNotificationAsClicked() feature.\"), b$2.malformedDataError;\n            if (!l2.includes(Ks$2.PUSH_ACKNOWLEDGEMENT)) throw r2.info(\"Can't use markPushNotificationAsClicked() feature.\"), b$2.malformedDataError;\n            if (a4.isAcked(d4, u3)) return r2.info(\"already clicked push notification:\", d4), [2];\n            m4 = null === (t5 = s4.deviceTokens[0]) || void 0 === t5 ? void 0 : t5.token, b3 = new Mn({ deviceToken: null != m4 ? m4 : \"\", pushTrackingId: d4, eventType: u3, messageId: f2, channelKey: p2, templateKey: v2, notificationEventDeadline: g2 }), h4 && (b3.headers[\"Session-Key\"] = h4), i3.label = 1;\n          case 1:\n            return i3.trys.push([1, 3, , 4]), [4, o2.send(b3)];\n          case 2:\n            return i3.sent(), a4.markAsAcked(d4, u3), [3, 4];\n          case 3:\n            throw _2 = i3.sent(), r2.debug(\"failed to mark push notification as clicked. push tracking id: \".concat(d4, \". error: \").concat(_2)), _2;\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, t4.prototype.getChannelInvitationPreference = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.sdkState, n2 = e3.requestQueue, r2 = new Kt({ userId: t5.userId }), [4, n2.send(r2)];\n          case 1:\n            return s4 = i3.sent(), [2, { autoAccept: s4.as(Gt).autoAccept }];\n        }\n      });\n    });\n  }, t4.prototype.setChannelInvitationPreference = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, r2, s4, o2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"boolean\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), r2 = t5.sdkState, s4 = t5.requestQueue, o2 = new Wt({ userId: r2.userId, willAutoAccept: e3 }), [4, s4.send(o2)];\n          case 1:\n            return a4 = i3.sent(), [2, { autoAccept: a4.as(Vt).autoAccept }];\n        }\n      });\n    });\n  }, t4.prototype.getDoNotDisturb = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.sdkState, n2 = e3.requestQueue, r2 = new Bt({ userId: t5.userId }), [4, n2.send(r2)];\n          case 1:\n            return s4 = i3.sent(), [2, s4.as(Jt).preference];\n        }\n      });\n    });\n  }, t4.prototype.setDoNotDisturb = function(e3, t5, s4, o2, a4, u3) {\n    return void 0 === t5 && (t5 = 0), void 0 === s4 && (s4 = 0), void 0 === o2 && (o2 = 0), void 0 === a4 && (a4 = 0), void 0 === u3 && (u3 = \"\"), r$1(this, void 0, void 0, function() {\n      var r2, c3, d4, l2, h4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"boolean\", e3) && S$1(\"number\", t5) && S$1(\"number\", s4) && S$1(\"number\", o2) && S$1(\"number\", a4) && S$1(\"string\", u3)).throw(b$2.invalidParameters), r2 = uo.of(this._iid), c3 = r2.sdkState, d4 = r2.requestQueue, l2 = new Zt({ userId: c3.userId, doNotDisturbOn: e3, startHour: t5, startMin: s4, endHour: o2, endMin: a4, timezone: u3 }), [4, d4.send(l2)];\n          case 1:\n            return h4 = i3.sent(), [2, h4.as($t).preference];\n        }\n      });\n    });\n  }, t4.prototype.getSnoozePeriod = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.sdkState, n2 = e3.requestQueue, r2 = new Xt({ userId: t5.userId }), [4, n2.send(r2)];\n          case 1:\n            return s4 = i3.sent(), [2, s4.as(Yt).snoozePeriod];\n        }\n      });\n    });\n  }, t4.prototype.setSnoozePeriod = function(e3, t5, s4) {\n    return void 0 === t5 && (t5 = 0), void 0 === s4 && (s4 = 0), r$1(this, void 0, void 0, function() {\n      var r2, o2, a4, u3, c3;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"boolean\", e3) && S$1(\"number\", t5) && S$1(\"number\", s4)).throw(b$2.invalidParameters), r2 = uo.of(this._iid), o2 = r2.sdkState, a4 = r2.requestQueue, u3 = new en({ userId: o2.userId, snoozeOn: e3, startTs: t5, endTs: s4 }), [4, a4.send(u3)];\n          case 1:\n            return c3 = i3.sent(), [2, c3.as(tn).snoozePeriod];\n        }\n      });\n    });\n  }, t4.prototype.getMyPushTokensByToken = function(e3, t5) {\n    return r$1(this, void 0, void 0, function() {\n      var r2, s4, o$1, a4, u3, c3, d4, l2, h4, f2, p2, v2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3) && T$2(f$1, t5)).throw(b$2.invalidParameters), r2 = uo.of(this._iid), s4 = r2.sdkState, o$1 = r2.requestQueue, a4 = r2.sessionManager, u3 = new xt({ userId: s4.userId, type: t5, token: e3 }), [4, o$1.send(u3)];\n          case 1:\n            c3 = i3.sent(), d4 = c3.as(Ht).pushTokens;\n            try {\n              for (l2 = o(d4.deviceTokens), h4 = l2.next(); !h4.done; h4 = l2.next()) f2 = h4.value, a4.setDeviceToken(d4.type, f2);\n            } catch (e4) {\n              p2 = { error: e4 };\n            } finally {\n              try {\n                h4 && !h4.done && (v2 = l2.return) && v2.call(l2);\n              } finally {\n                if (p2) throw p2.error;\n              }\n            }\n            return [4, a4.saveDeviceToken()];\n          case 2:\n            return i3.sent(), [2, d4];\n        }\n      });\n    });\n  }, t4.prototype.getPushTriggerOption = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.sdkState, n2 = e3.requestQueue, r2 = new sn({ userId: t5.userId }), [4, n2.send(r2)];\n          case 1:\n            return [2, i3.sent().as(on).pushTriggerOption];\n        }\n      });\n    });\n  }, t4.prototype.setPushTriggerOption = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(T$2(_, e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new an({ userId: n2.userId, pushTriggerOption: e3 }), [4, r2.send(s4)];\n          case 1:\n            return [2, i3.sent().as(un).pushTriggerOption];\n        }\n      });\n    });\n  }, t4.prototype.getPushTemplate = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.sdkState, n2 = e3.requestQueue, r2 = new cn({ userId: t5.userId }), [4, n2.send(r2)];\n          case 1:\n            return [2, i3.sent().as(dn).name];\n        }\n      });\n    });\n  }, t4.prototype.setPushTemplate = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(T$2(E$1, e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new ln({ userId: n2.userId, templateName: e3 }), [4, r2.send(s4)];\n          case 1:\n            return [2, i3.sent().as(hn).name];\n        }\n      });\n    });\n  }, t4.prototype.blockUser = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, r2, s4, o2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(e3 instanceof ls$2 || S$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), r2 = t5.sdkState, s4 = t5.requestQueue, o2 = new nn({ userId: r2.userId, blockedUserId: e3 instanceof ls$2 ? e3.userId : e3 }), [4, s4.send(o2)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.blockUserWithUserId = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return [2, this.blockUser(e3)];\n      });\n    });\n  }, t4.prototype.unblockUser = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, r2, s4, o2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(e3 instanceof ls$2 || S$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), r2 = t5.sdkState, s4 = t5.requestQueue, o2 = new rn({ userId: r2.userId, unblockedUserId: e3 instanceof ls$2 ? e3.userId : e3 }), [4, s4.send(o2)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.unblockUserWithUserId = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return [2, this.unblockUser(e3)];\n      });\n    });\n  }, t4.prototype.getFriendChangeLogsByToken = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, r2, s4, o2, a4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), r2 = t5.sdkState, s4 = t5.requestQueue, o2 = new fn({ userId: r2.userId, token: e3 }), [4, s4.send(o2)];\n          case 1:\n            return a4 = i3.sent(), [2, a4.as(pn).changelogs];\n        }\n      });\n    });\n  }, t4.prototype.getAllowFriendDiscovery = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), t5 = e3.sdkState, n2 = e3.requestQueue, r2 = new wn({ userId: t5.userId }), [4, n2.send(r2)];\n          case 1:\n            return s4 = i3.sent(), [2, s4.as(kn).allowFriendDiscovery];\n        }\n      });\n    });\n  }, t4.prototype.setAllowFriendDiscovery = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, r2, s4, o2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(S$1(\"boolean\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), r2 = t5.sdkState, s4 = t5.requestQueue, o2 = new Sn({ userId: r2.userId, allowFriendDiscovery: e3 }), [4, s4.send(o2)];\n          case 1:\n            return i3.sent(), [2, e3];\n        }\n      });\n    });\n  }, t4.prototype.uploadFriendDiscoveries = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4, o2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new vn({ userId: n2.userId, discoveries: e3 }), [4, r2.send(s4)];\n          case 1:\n            return o2 = i3.sent(), [2, o2.as(gn).friendDiscoveryRequestId];\n        }\n      });\n    });\n  }, t4.prototype.deleteFriendDiscovery = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return [2, this.deleteFriendDiscoveries([e3])];\n      });\n    });\n  }, t4.prototype.deleteFriendDiscoveries = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new mn({ userId: n2.userId, discoveryKeys: e3 }), [4, r2.send(s4)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.addFriends = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4, o2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new bn({ userId: n2.userId, userIds: e3 }), [4, r2.send(s4)];\n          case 1:\n            return o2 = i3.sent(), [2, o2.as(_n).users];\n        }\n      });\n    });\n  }, t4.prototype.deleteFriend = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(t5) {\n        return [2, this.deleteFriends([e3])];\n      });\n    });\n  }, t4.prototype.deleteFriends = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2, s4;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return cs$2(C$1(\"string\", e3)).throw(b$2.invalidParameters), t5 = uo.of(this._iid), n2 = t5.sdkState, r2 = t5.requestQueue, s4 = new yn({ userId: n2.userId, userIds: e3 }), [4, r2.send(s4)];\n          case 1:\n            return i3.sent(), [2];\n        }\n      });\n    });\n  }, t4.prototype.getAllEmoji = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2;\n      return s$1(this, function(r2) {\n        switch (r2.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, t5 = new Cn(), [4, e3.send(t5)];\n          case 1:\n            return n2 = r2.sent(), [2, n2.as(En).emojiContainer];\n        }\n      });\n    });\n  }, t4.prototype.getEmojiCategory = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t5 = uo.of(this._iid).requestQueue, n2 = new Tn({ categoryId: e3 }), [4, t5.send(n2)];\n          case 1:\n            return r2 = i3.sent(), [2, r2.as(Pn).emojiCategory];\n        }\n      });\n    });\n  }, t4.prototype.getEmoji = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var t5, n2, r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return t5 = uo.of(this._iid).requestQueue, n2 = new Dn({ key: e3 }), [4, t5.send(n2)];\n          case 1:\n            return r2 = i3.sent(), [2, r2.as(Un).emoji];\n        }\n      });\n    });\n  }, t4.prototype.getUIKitConfiguration = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, t5, n2, r2;\n      return s$1(this, function(i3) {\n        switch (i3.label) {\n          case 0:\n            return e3 = uo.of(this._iid), cs$2(e3.hasExtension(\"sb_uikit\")).throw(b$2.notSupportedError), t5 = e3.requestQueue, n2 = new On(), [4, t5.send(n2)];\n          case 1:\n            return r2 = i3.sent(), [2, r2.as(An).uikitConfiguration];\n        }\n      });\n    });\n  }, t4.prototype.getReportCategoryInfoList = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return [4, uo.of(this._iid).reportCategoryManager.categories()];\n          case 1:\n            return [2, e3.sent()];\n        }\n      });\n    });\n  }, t4;\n}();\nfunction isDifferentChannel(a4, b3) {\n  if (!a4 || !b3)\n    return true;\n  return a4.url !== b3.url;\n}\nfunction isSendableMessage$1(msg) {\n  return msg !== void 0 && msg !== null && \"sendingStatus\" in msg;\n}\nfunction isMyMessage(msg, currentUserId = \"##__USER_ID_IS_NOT_PROVIDED__##\") {\n  var _a2;\n  if (!isSendableMessage$1(msg))\n    return false;\n  return ((_a2 = msg.sender) === null || _a2 === void 0 ? void 0 : _a2.userId) === currentUserId;\n}\nfunction isNewMessage(msg, currentUserId) {\n  const myMessage = isMyMessage(msg, currentUserId);\n  if (myMessage)\n    return false;\n  if (msg.isAdminMessage())\n    return false;\n  return msg.updatedAt === 0;\n}\nfunction getMessageUniqId(msg) {\n  if (\"sendingStatus\" in msg) {\n    if (msg.sendingStatus === \"succeeded\")\n      return String(msg.messageId);\n    return msg.reqId;\n  }\n  return String(msg.messageId);\n}\nfunction isBoolean(val) {\n  return typeof val === \"boolean\";\n}\nfunction isOneOf(val, values) {\n  return values.includes(val);\n}\nfunction isSet(val) {\n  return val instanceof Set;\n}\nfunction isNotEmptyArray(arr) {\n  if (!arr || !Array.isArray(arr))\n    return false;\n  return arr.length !== 0;\n}\nfunction isSameType(a4, b3) {\n  return Object.prototype.toString.call(a4) === Object.prototype.toString.call(b3);\n}\nconst useForceUpdate = () => {\n  const [, updater] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0);\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(() => updater((prev) => prev + 1), []);\n};\nfunction snakeToCamel(obj) {\n  if (typeof obj !== \"object\" || obj === null) {\n    return obj;\n  }\n  if (Array.isArray(obj)) {\n    return obj.map((item) => snakeToCamel(item));\n  }\n  const result = {};\n  Object.keys(obj).forEach((key) => {\n    const camelKey = key.replace(/_\\w/g, (m4) => m4[1].toUpperCase());\n    result[camelKey] = snakeToCamel(obj[key]);\n  });\n  return result;\n}\nfunction arrayToMapWithGetter(arr, getSelector) {\n  return arr.reduce((accum, curr) => {\n    const _key = getSelector(curr);\n    accum[_key] = curr;\n    return accum;\n  }, {});\n}\nvar __rest$6 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst defaultReducer = (_a2, action) => {\n  var draft = __rest$6(_a2, []);\n  switch (action.type) {\n    case \"update_initialized\": {\n      draft[\"initialized\"] = action.value.status;\n      return draft;\n    }\n    case \"update_refreshing\": {\n      draft[\"refreshing\"] = action.value.status;\n      return draft;\n    }\n    case \"update_loading\": {\n      draft[\"loading\"] = action.value.status;\n      return draft;\n    }\n    case \"update_messages\": {\n      if (action.value.clearBeforeAction) {\n        draft[\"messageMap\"] = messagesToObject(action.value.messages);\n      } else {\n        const draftMessageMap = Object.assign({}, draft[\"messageMap\"]);\n        const messagesToDelete = [];\n        const messagesToAdd = [];\n        action.value.messages.forEach((next) => {\n          const requestId = isSendableMessage$1(next) ? next.reqId : void 0;\n          const messageId = next.messageId || void 0;\n          [requestId, messageId].forEach((id2) => {\n            if (!id2)\n              return;\n            const prev = draftMessageMap[id2];\n            if (shouldUpdateMessage(prev, next)) {\n              prev && messagesToDelete.push(prev);\n              messagesToAdd.push(next);\n            }\n          });\n        });\n        messagesToDelete.forEach((it2) => {\n          if (isSendableMessage$1(it2))\n            delete draftMessageMap[it2.reqId];\n          delete draftMessageMap[it2.messageId];\n        });\n        messagesToAdd.forEach((it2) => {\n          if (isSendableMessage$1(it2))\n            draftMessageMap[it2.reqId] = it2;\n          draftMessageMap[it2.messageId] = it2;\n        });\n        draft[\"messageMap\"] = draftMessageMap;\n      }\n      return draft;\n    }\n    case \"update_new_messages\": {\n      const userId = action.value.currentUserId;\n      const newMessages = action.value.messages.filter((it2) => isNewMessage(it2, userId));\n      if (action.value.clearBeforeAction) {\n        draft[\"newMessageMap\"] = arrayToMapWithGetter(newMessages, getMessageUniqId);\n      } else {\n        const messageKeys = newMessages.map((it2) => it2.messageId);\n        messageKeys.forEach((key) => delete draft[\"newMessageMap\"][key]);\n        draft[\"newMessageMap\"] = Object.assign(Object.assign({}, draft[\"newMessageMap\"]), arrayToMapWithGetter(newMessages, getMessageUniqId));\n      }\n      return draft;\n    }\n    case \"delete_messages\":\n    case \"delete_new_messages\": {\n      const key = action.type === \"delete_messages\" ? \"messageMap\" : \"newMessageMap\";\n      draft[key] = Object.assign({}, draft[key]);\n      action.value.messageIds.forEach((msgId) => {\n        const message = draft[key][msgId];\n        if (message) {\n          if (isSendableMessage$1(message))\n            delete draft[key][message.reqId];\n          delete draft[key][message.messageId];\n        }\n      });\n      action.value.reqIds.forEach((reqId) => {\n        const message = draft[key][reqId];\n        if (message) {\n          if (isSendableMessage$1(message))\n            delete draft[key][message.reqId];\n          delete draft[key][message.messageId];\n        }\n      });\n      return draft;\n    }\n  }\n};\nconst messagesToObject = (messages) => {\n  return messages.reduce((accum, curr) => {\n    if (isSendableMessage$1(curr)) {\n      accum[curr.reqId] = curr;\n      if (curr.sendingStatus === Z.SUCCEEDED) {\n        accum[curr.messageId] = curr;\n      }\n    } else {\n      accum[curr.messageId] = curr;\n    }\n    return accum;\n  }, {});\n};\nconst shouldUpdateMessage = (prev, next) => {\n  if (!isSendableMessage$1(prev) || !isSendableMessage$1(next))\n    return true;\n  if (prev.sendingStatus === Z.SUCCEEDED)\n    return next.sendingStatus === Z.SUCCEEDED;\n  return prev.sendingStatus !== next.sendingStatus;\n};\nconst useChannelMessagesReducer = (sortComparator = defaultMessageComparator) => {\n  const [{ initialized, loading, refreshing, messageMap, newMessageMap }, dispatch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useReducer\"])(defaultReducer, {\n    initialized: false,\n    loading: true,\n    refreshing: false,\n    messageMap: {},\n    newMessageMap: {}\n  });\n  const updateMessages = (messages2, clearBeforeAction, currentUserId) => {\n    dispatch({ type: \"update_messages\", value: { messages: messages2, clearBeforeAction, currentUserId } });\n  };\n  const deleteMessages = (messageIds, reqIds) => {\n    dispatch({ type: \"delete_messages\", value: { messageIds, reqIds } });\n  };\n  const updateNewMessages = (messages2, clearBeforeAction, currentUserId) => {\n    dispatch({ type: \"update_new_messages\", value: { messages: messages2, clearBeforeAction, currentUserId } });\n  };\n  const deleteNewMessages = (messageIds, reqIds) => {\n    dispatch({ type: \"delete_new_messages\", value: { messageIds, reqIds } });\n  };\n  const updateInitialized = (status) => {\n    dispatch({ type: \"update_initialized\", value: { status } });\n  };\n  const updateLoading = (status) => {\n    dispatch({ type: \"update_loading\", value: { status } });\n  };\n  const updateRefreshing = (status) => {\n    dispatch({ type: \"update_refreshing\", value: { status } });\n  };\n  const newMessages = Object.values(newMessageMap);\n  const messages = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => Array.from(new Set(Object.values(messageMap))).sort(sortComparator), [messageMap]);\n  return {\n    updateInitialized,\n    updateLoading,\n    updateRefreshing,\n    updateMessages,\n    deleteMessages,\n    initialized,\n    loading,\n    refreshing,\n    messages,\n    newMessages,\n    updateNewMessages,\n    deleteNewMessages\n  };\n};\nconst LARGE_OFFSET = Math.floor(Number.MAX_SAFE_INTEGER / 10);\nfunction defaultMessageComparator(a4, b3) {\n  let aStatusOffset = 0;\n  let bStatusOffset = 0;\n  if (isSendableMessage$1(a4) && a4.sendingStatus !== \"succeeded\")\n    aStatusOffset = LARGE_OFFSET;\n  if (isSendableMessage$1(b3) && b3.sendingStatus !== \"succeeded\")\n    bStatusOffset = LARGE_OFFSET;\n  return a4.createdAt + aStatusOffset - (b3.createdAt + bStatusOffset);\n}\nvar __awaiter$2 = function(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst createMessageCollection = (channel, limit, options) => {\n  var _a2;\n  const basicParams = {\n    prevResultLimit: limit.prev,\n    nextResultLimit: limit.next,\n    startingPoint: options === null || options === void 0 ? void 0 : options.startingPoint,\n    replyType: options === null || options === void 0 ? void 0 : options.replyType\n  };\n  const passedCollection = (_a2 = options === null || options === void 0 ? void 0 : options.collectionCreator) === null || _a2 === void 0 ? void 0 : _a2.call(options, basicParams);\n  if (passedCollection)\n    return passedCollection;\n  return channel.createMessageCollection(Object.assign(Object.assign({}, basicParams), { filter: new qs$1(basicParams) }));\n};\nfunction getCollectionLimitBy(startingPoint) {\n  return startingPoint < Date.now() ? sbuConstants.collection.message.searchLimit : sbuConstants.collection.message.defaultLimit;\n}\nconst useGroupChannelMessages = (sdk, channel, options = {}) => {\n  var _a2, _b2, _c;\n  const internalOptions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(options);\n  internalOptions.current = options;\n  const channelRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(channel);\n  channelRef.current = channel;\n  const logger = internalOptions.current.logger;\n  const initialStartingPoint = (_a2 = internalOptions.current.startingPoint) !== null && _a2 !== void 0 ? _a2 : Number.MAX_SAFE_INTEGER;\n  const initialLimit = getCollectionLimitBy(initialStartingPoint);\n  const isFetching = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])({ prev: false, next: false });\n  const forceUpdate = useForceUpdate();\n  const collectionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])({\n    initialized: false,\n    apiInitialized: false,\n    instance: null\n  });\n  const { initialized, loading, refreshing, messages, newMessages, updateMessages, updateNewMessages, deleteNewMessages, deleteMessages, updateInitialized, updateLoading, updateRefreshing } = useChannelMessagesReducer(options === null || options === void 0 ? void 0 : options.sortComparator);\n  const markAsReadBySource = usePreservedCallback$1((source) => {\n    var _a3, _b3, _c2, _d;\n    if (!channelRef.current || !channelRef.current.url)\n      return (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"[useGroupChannelMessages] channel is required\");\n    try {\n      switch (source) {\n        case no.EVENT_MESSAGE_RECEIVED:\n        case no.EVENT_MESSAGE_SENT_SUCCESS:\n        case no.SYNC_MESSAGE_FILL:\n        case void 0:\n          (_c2 = (_b3 = internalOptions.current).markAsRead) === null || _c2 === void 0 ? void 0 : _c2.call(_b3, [channelRef.current]);\n          break;\n      }\n    } catch (e3) {\n      (_d = logger === null || logger === void 0 ? void 0 : logger.warn) === null || _d === void 0 ? void 0 : _d.call(logger, \"[useGroupChannelMessages/markAsReadBySource]\", e3);\n    }\n  });\n  const updateNewMessagesReceived = usePreservedCallback$1((source, messages2) => {\n    var _a3, _b3, _c2, _d, _e2;\n    const incomingMessages = messages2.filter((it2) => {\n      var _a4;\n      return !isMyMessage(it2, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n    });\n    if (incomingMessages.length > 0) {\n      switch (source) {\n        case no.EVENT_MESSAGE_RECEIVED:\n        case no.SYNC_MESSAGE_FILL: {\n          if ((_b3 = (_a3 = internalOptions.current).shouldCountNewMessages) === null || _b3 === void 0 ? void 0 : _b3.call(_a3)) {\n            updateNewMessages(incomingMessages, false, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);\n          }\n          (_e2 = (_d = internalOptions.current).onMessagesReceived) === null || _e2 === void 0 ? void 0 : _e2.call(_d, incomingMessages);\n          break;\n        }\n      }\n    }\n  });\n  const init = usePreservedCallback$1((startingPoint, limit) => __awaiter$2(void 0, void 0, void 0, function* () {\n    return new Promise((resolve) => {\n      var _a3, _b3;\n      if (!channelRef.current || !channelRef.current.url)\n        return (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"[useGroupChannelMessages] channel is required\");\n      if (collectionRef.current.instance)\n        collectionRef.current.instance.dispose();\n      markAsReadBySource();\n      updateNewMessages([], true, (_b3 = sdk.currentUser) === null || _b3 === void 0 ? void 0 : _b3.userId);\n      const updateUnsentMessages = () => {\n        var _a4, _b4, _c2;\n        const { pendingMessages, failedMessages } = (_a4 = collectionRef.current.instance) !== null && _a4 !== void 0 ? _a4 : {};\n        if (isNotEmptyArray(pendingMessages))\n          updateMessages(pendingMessages, false, (_b4 = sdk.currentUser) === null || _b4 === void 0 ? void 0 : _b4.userId);\n        if (isNotEmptyArray(failedMessages))\n          updateMessages(failedMessages, false, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);\n      };\n      const collectionInstance = createMessageCollection(channelRef.current, limit, Object.assign(Object.assign({}, internalOptions.current), { startingPoint }));\n      collectionRef.current = { apiInitialized: false, initialized: false, instance: collectionInstance };\n      collectionInstance.setMessageCollectionHandler({\n        onMessagesAdded: (ctx, __, messages2) => {\n          var _a4;\n          markAsReadBySource(ctx.source);\n          updateNewMessagesReceived(ctx.source, messages2);\n          updateMessages(messages2, false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        },\n        onMessagesUpdated: (ctx, __, messages2) => {\n          var _a4, _b4, _c2;\n          markAsReadBySource(ctx.source);\n          updateNewMessagesReceived(ctx.source, messages2);\n          updateMessages(messages2, false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n          if (ctx.source === no.EVENT_MESSAGE_UPDATED) {\n            (_c2 = (_b4 = internalOptions.current).onMessagesUpdated) === null || _c2 === void 0 ? void 0 : _c2.call(_b4, messages2);\n          }\n        },\n        onMessagesDeleted: (_2, __, ___, messages2) => {\n          const msgIds = messages2.map((it2) => it2.messageId);\n          const reqIds = messages2.filter(isSendableMessage$1).map((it2) => it2.reqId);\n          deleteMessages(msgIds, reqIds);\n          deleteNewMessages(msgIds, reqIds);\n        },\n        onChannelDeleted: (_2, channelUrl) => {\n          var _a4, _b4;\n          (_b4 = (_a4 = internalOptions.current).onChannelDeleted) === null || _b4 === void 0 ? void 0 : _b4.call(_a4, channelUrl);\n        },\n        onChannelUpdated: (_2, channel2) => {\n          var _a4, _b4;\n          forceUpdate();\n          (_b4 = (_a4 = internalOptions.current).onChannelUpdated) === null || _b4 === void 0 ? void 0 : _b4.call(_a4, channel2);\n        },\n        onHugeGapDetected: () => {\n          init(Number.MAX_SAFE_INTEGER, sbuConstants.collection.message.defaultLimit);\n        }\n      });\n      collectionInstance.initialize(ms.CACHE_AND_REPLACE_BY_API).onCacheResult((err, messages2) => {\n        var _a4, _b4, _c2;\n        if (err)\n          sdk.isCacheEnabled && ((_a4 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a4 === void 0 ? void 0 : _a4.call(logger, \"[useGroupChannelMessages/onCacheResult]\", err));\n        else if (messages2) {\n          (_b4 = logger === null || logger === void 0 ? void 0 : logger.debug) === null || _b4 === void 0 ? void 0 : _b4.call(logger, \"[useGroupChannelMessages/onCacheResult]\", \"message length:\", messages2.length);\n          updateMessages(messages2, true, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);\n          updateUnsentMessages();\n          if (messages2.length > 0) {\n            collectionRef.current.initialized = true;\n            resolve();\n          }\n        }\n      }).onApiResult((err, messages2) => {\n        var _a4, _b4, _c2, _d, _e2;\n        if (err)\n          (_a4 = logger === null || logger === void 0 ? void 0 : logger.warn) === null || _a4 === void 0 ? void 0 : _a4.call(logger, \"[useGroupChannelMessages/onApiResult]\", err);\n        else if (messages2) {\n          (_b4 = logger === null || logger === void 0 ? void 0 : logger.debug) === null || _b4 === void 0 ? void 0 : _b4.call(logger, \"[useGroupChannelMessages/onApiResult]\", \"message length:\", messages2.length);\n          updateMessages(messages2, true, (_c2 = sdk.currentUser) === null || _c2 === void 0 ? void 0 : _c2.userId);\n          if (!internalOptions.current.startingPoint)\n            (_e2 = (_d = internalOptions.current).onMessagesReceived) === null || _e2 === void 0 ? void 0 : _e2.call(_d, messages2);\n          if (sdk.isCacheEnabled)\n            updateUnsentMessages();\n        }\n        collectionRef.current.initialized = true;\n        collectionRef.current.apiInitialized = true;\n        resolve();\n      });\n    });\n  }));\n  useGroupChannelHandler(sdk, {\n    onUserBanned(eventChannel, bannedUser) {\n      var _a3, _b3, _c2;\n      if (eventChannel.isGroupChannel() && !isDifferentChannel(eventChannel, channelRef.current)) {\n        if (bannedUser.userId === ((_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId)) {\n          (_c2 = (_b3 = internalOptions.current).onCurrentUserBanned) === null || _c2 === void 0 ? void 0 : _c2.call(_b3);\n        } else {\n          forceUpdate();\n        }\n      }\n    }\n  });\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(() => {\n    const timeout = setTimeout(() => __awaiter$2(void 0, void 0, void 0, function* () {\n      if (sdk.currentUser && channelRef.current) {\n        updateInitialized(false);\n        updateLoading(true);\n        yield init(initialStartingPoint, initialLimit);\n        updateLoading(false);\n        updateInitialized(true);\n      }\n    }));\n    return () => clearTimeout(timeout);\n  }, [sdk, (_b2 = sdk.currentUser) === null || _b2 === void 0 ? void 0 : _b2.userId, (_c = channelRef.current) === null || _c === void 0 ? void 0 : _c.url, internalOptions.current.replyType]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    return () => {\n      if (collectionRef.current.instance)\n        collectionRef.current.instance.dispose();\n    };\n  }, []);\n  const refresh = usePreservedCallback$1(() => __awaiter$2(void 0, void 0, void 0, function* () {\n    if (sdk.currentUser && channelRef.current) {\n      updateRefreshing(true);\n      yield init(Number.MAX_SAFE_INTEGER, sbuConstants.collection.message.defaultLimit);\n      updateRefreshing(false);\n    }\n  }));\n  const loadPrevious = usePreservedCallback$1(() => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _d;\n    const collection = collectionRef.current.instance;\n    if ((collection === null || collection === void 0 ? void 0 : collection.hasPrevious) && !isFetching.current.prev) {\n      try {\n        isFetching.current.prev = true;\n        const list2 = yield collection.loadPrevious();\n        updateMessages(list2, false, (_d = sdk.currentUser) === null || _d === void 0 ? void 0 : _d.userId);\n      } catch (_e2) {\n      } finally {\n        isFetching.current.prev = false;\n      }\n    }\n  }));\n  const hasPrevious = usePreservedCallback$1(() => {\n    const { initialized: initialized2, instance } = collectionRef.current;\n    if (initialized2 && instance) {\n      return instance.hasPrevious;\n    } else {\n      return false;\n    }\n  });\n  const loadNext = usePreservedCallback$1(() => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _f;\n    const collection = collectionRef.current.instance;\n    if ((collection === null || collection === void 0 ? void 0 : collection.hasNext) && !isFetching.current.next) {\n      try {\n        isFetching.current.next = true;\n        const list2 = yield collection.loadNext();\n        updateMessages(list2, false, (_f = sdk.currentUser) === null || _f === void 0 ? void 0 : _f.userId);\n      } catch (_g2) {\n      } finally {\n        isFetching.current.next = false;\n      }\n    }\n  }));\n  const hasNext = usePreservedCallback$1(() => {\n    const { initialized: initialized2, apiInitialized, instance } = collectionRef.current;\n    if (apiInitialized && initialized2 && instance) {\n      return instance.hasNext;\n    } else {\n      return false;\n    }\n  });\n  const sendUserMessage = usePreservedCallback$1((params, onPending) => {\n    var _a3;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    return new Promise((resolve, reject) => {\n      channelRef.current.sendUserMessage(params).onPending((pendingMessage) => {\n        var _a4;\n        if (pendingMessage.channelUrl === channelRef.current.url) {\n          updateMessages([pendingMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);\n      }).onSucceeded((sentMessage) => {\n        var _a4;\n        if (sentMessage.channelUrl === channelRef.current.url) {\n          updateMessages([sentMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        resolve(sentMessage);\n      }).onFailed((err, failedMessage) => {\n        var _a4;\n        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {\n          updateMessages([failedMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        reject(err);\n      });\n    });\n  });\n  const sendFileMessage = usePreservedCallback$1((params, onPending) => {\n    var _a3;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    return new Promise((resolve, reject) => {\n      channelRef.current.sendFileMessage(params).onPending((pendingMessage) => {\n        var _a4;\n        if (pendingMessage.channelUrl === channelRef.current.url) {\n          updateMessages([pendingMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);\n      }).onSucceeded((sentMessage) => {\n        var _a4;\n        if (sentMessage.channelUrl === channelRef.current.url) {\n          updateMessages([sentMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        resolve(sentMessage);\n      }).onFailed((err, failedMessage) => {\n        var _a4;\n        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {\n          updateMessages([failedMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        reject(err);\n      });\n    });\n  });\n  const sendFileMessages = usePreservedCallback$1((paramsList, onPending) => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _h;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_h = logger === null || logger === void 0 ? void 0 : logger.error) === null || _h === void 0 ? void 0 : _h.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    return new Promise((resolve) => {\n      const messages2 = [];\n      channelRef.current.sendFileMessages(paramsList).onPending((pendingMessage) => {\n        var _a3;\n        if (pendingMessage.channelUrl === channelRef.current.url) {\n          updateMessages([pendingMessage], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n        }\n        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);\n      }).onSucceeded((sentMessage) => {\n        var _a3;\n        if (sentMessage.isFileMessage() && sentMessage.channelUrl === channelRef.current.url) {\n          updateMessages([sentMessage], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n          messages2.push(sentMessage);\n        }\n        if (messages2.length === paramsList.length)\n          resolve(messages2);\n      }).onFailed((_2, failedMessage) => {\n        var _a3;\n        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {\n          updateMessages([failedMessage], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n          messages2.push(failedMessage);\n        } else {\n          messages2.push(null);\n        }\n        if (messages2.length === paramsList.length)\n          resolve(messages2);\n      });\n    });\n  }));\n  const sendMultipleFilesMessage = usePreservedCallback$1((params, onPending) => {\n    var _a3;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    return new Promise((resolve, reject) => {\n      channelRef.current.sendMultipleFilesMessage(params).onPending((pendingMessage) => {\n        var _a4;\n        if (pendingMessage.channelUrl === channelRef.current.url) {\n          updateMessages([pendingMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);\n      }).onFileUploaded(() => {\n        forceUpdate();\n      }).onSucceeded((sentMessage) => {\n        var _a4;\n        if (sentMessage.channelUrl === channelRef.current.url) {\n          updateMessages([sentMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        resolve(sentMessage);\n      }).onFailed((err, failedMessage) => {\n        var _a4;\n        if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {\n          updateMessages([failedMessage], false, (_a4 = sdk.currentUser) === null || _a4 === void 0 ? void 0 : _a4.userId);\n        }\n        reject(err);\n      });\n    });\n  });\n  const updateUserMessage = usePreservedCallback$1((messageId, params) => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _j, _k;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_j = logger === null || logger === void 0 ? void 0 : logger.error) === null || _j === void 0 ? void 0 : _j.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    const updatedMessage = yield channelRef.current.updateUserMessage(messageId, params);\n    if (updatedMessage.channelUrl === channelRef.current.url) {\n      updateMessages([updatedMessage], false, (_k = sdk.currentUser) === null || _k === void 0 ? void 0 : _k.userId);\n    }\n    return updatedMessage;\n  }));\n  const updateFileMessage = usePreservedCallback$1((messageId, params) => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _l, _m;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_l = logger === null || logger === void 0 ? void 0 : logger.error) === null || _l === void 0 ? void 0 : _l.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    const updatedMessage = yield channelRef.current.updateFileMessage(messageId, params);\n    if (updatedMessage.channelUrl === channelRef.current.url) {\n      updateMessages([updatedMessage], false, (_m = sdk.currentUser) === null || _m === void 0 ? void 0 : _m.userId);\n    }\n    return updatedMessage;\n  }));\n  const resendMessage = usePreservedCallback$1((failedMessage) => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _o;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_o = logger === null || logger === void 0 ? void 0 : logger.error) === null || _o === void 0 ? void 0 : _o.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    return new Promise((resolve, reject) => {\n      let handler = void 0;\n      if (failedMessage.isUserMessage())\n        handler = channelRef.current.resendMessage(failedMessage);\n      if (failedMessage.isFileMessage())\n        handler = channelRef.current.resendMessage(failedMessage);\n      if (failedMessage.isMultipleFilesMessage())\n        handler = channelRef.current.resendMessage(failedMessage);\n      if (handler) {\n        if (\"onPending\" in handler) {\n          handler.onPending((message) => {\n            var _a3;\n            if (message.channelUrl === channelRef.current.url) {\n              updateMessages([message], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n            }\n          });\n        }\n        if (\"onFileUploaded\" in handler) {\n          handler.onFileUploaded(() => {\n            forceUpdate();\n          });\n        }\n        if (\"onSucceeded\" in handler) {\n          handler.onSucceeded((message) => {\n            var _a3;\n            if (message.channelUrl === channelRef.current.url) {\n              updateMessages([message], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n            }\n            resolve(message);\n          });\n        }\n        if (\"onFailed\" in handler) {\n          handler.onFailed((err, message) => {\n            var _a3;\n            if (message && message.channelUrl === channelRef.current.url) {\n              updateMessages([message], false, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n            }\n            reject(err);\n          });\n        }\n      }\n    });\n  }));\n  const deleteMessage = usePreservedCallback$1((message) => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _p, _q;\n    if (!channelRef.current || !channelRef.current.url) {\n      (_p = logger === null || logger === void 0 ? void 0 : logger.error) === null || _p === void 0 ? void 0 : _p.call(logger, \"[useGroupChannelMessages] channel is required\");\n      throw new Error(\"Channel is required\");\n    }\n    if (message.sendingStatus === \"succeeded\") {\n      if (message.isUserMessage())\n        yield channelRef.current.deleteMessage(message);\n      if (message.isFileMessage())\n        yield channelRef.current.deleteMessage(message);\n      if (message.isMultipleFilesMessage())\n        yield channelRef.current.deleteMessage(message);\n    } else {\n      try {\n        yield (_q = collectionRef.current.instance) === null || _q === void 0 ? void 0 : _q.removeFailedMessage(message.reqId);\n      } finally {\n        deleteMessages([message.messageId], [message.reqId]);\n      }\n    }\n  }));\n  const resetNewMessages = usePreservedCallback$1(() => {\n    var _a3;\n    updateNewMessages([], true, (_a3 = sdk.currentUser) === null || _a3 === void 0 ? void 0 : _a3.userId);\n  });\n  const resetWithStartingPoint = usePreservedCallback$1((startingPoint) => __awaiter$2(void 0, void 0, void 0, function* () {\n    var _r2;\n    if (sdk.currentUser && channelRef.current) {\n      const limit = getCollectionLimitBy(startingPoint);\n      updateLoading(true);\n      updateMessages([], true, (_r2 = sdk.currentUser) === null || _r2 === void 0 ? void 0 : _r2.userId);\n      yield init(startingPoint, limit);\n      updateLoading(false);\n    }\n  }));\n  return {\n    /**\n     * Initialized state, only available on first render\n     * */\n    initialized,\n    /**\n     * Loading state, status is changes on first mount or when the resetWithStartingPoint is called.\n     * */\n    loading,\n    /**\n     * Refreshing state, status is changes when the refresh is called.\n     * */\n    refreshing,\n    /**\n     * Get messages, this state is for render\n     * For example, if a user receives a new messages while searching for an old message\n     * for this case, new messages will be included here.\n     * */\n    messages,\n    /**\n     * If the `shouldCountNewMessages()` is true, only then push in the newMessages state.\n     * (Return false for the `shouldCountNewMessages()` if the message scroll is the most recent; otherwise, return true.)\n     *\n     * A new message means a message that meets the below conditions\n     * - Not admin message\n     * - Not updated message\n     * - Not current user's message\n     * */\n    newMessages,\n    /**\n     * Reset new message list\n     * @return {void}\n     * */\n    resetNewMessages,\n    /**\n     * Reset message list and create a new collection for latest messages\n     * @return {Promise<void>}\n     * */\n    refresh,\n    /**\n     * Load previous messages to state\n     * @return {Promise<void>}\n     * */\n    loadPrevious,\n    /**\n     * Check if there are more previous messages to fetch\n     * @return {boolean}\n     * */\n    hasPrevious,\n    /**\n     * Load next messages to state\n     * @return {Promise<void>}\n     * */\n    loadNext,\n    /**\n     * Check if there are more next messages to fetch\n     * @return {boolean}\n     * */\n    hasNext,\n    /**\n     * Send user message\n     * @param {UserMessageCreateParams} params user message create params\n     * @param {function} [onPending] pending message callback\n     * @return {Promise<UserMessage>} succeeded message\n     * */\n    sendUserMessage,\n    /**\n     * Send file message\n     * @param {FileMessageCreateParams} params file message create params\n     * @param {function} [onPending] pending message callback\n     * @return {Promise<FileMessage>} succeeded message\n     * */\n    sendFileMessage,\n    /**\n     * Send file messages\n     * @param {FileMessageCreateParams[]} paramList file message create params\n     * @param {function} [onPending] pending message callback for each message request\n     * @return {Promise<FileMessage[]>} succeeded or failed message\n     * */\n    sendFileMessages,\n    /**\n     * Send multiple files message\n     * @param {MultipleFilesMessageCreateParams} params multiple files message create params\n     * @param {function} [onPending] pending message callback\n     * @return {Promise<MultipleFilesMessage>} succeeded message\n     * */\n    sendMultipleFilesMessage,\n    /**\n     * Update user message\n     * @param {number} messageId\n     * @param {UserMessageUpdateParams} params user message update params\n     * @return {Promise<UserMessage>}\n     * */\n    updateUserMessage,\n    /**\n     * Update file message\n     * @param {number} messageId\n     * @param {FileMessageUpdateParams} params file message update params\n     * @return {Promise<FileMessage>}\n     * */\n    updateFileMessage,\n    /**\n     * Resend failed message\n     * @template {UserMessage | FileMessage | MultipleFilesMessage} T\n     * @param {T} failedMessage message to resend\n     * @return {Promise<T>}\n     * */\n    resendMessage,\n    /**\n     * Delete a message\n     * @template {UserMessage | FileMessage | MultipleFilesMessage} T\n     * @param {T} message succeeded or failed message\n     * @return {Promise<void>}\n     * */\n    deleteMessage,\n    /**\n     * Reset message list and create a new collection with starting point\n     * @param {number} startingPoint\n     * @param {function} callback\n     * @return {void}\n     * */\n    resetWithStartingPoint,\n    /**\n     * Do not use this api\n     * */\n    _dangerous_reducer_updateMessages: updateMessages,\n    /**\n     * Do not use this api\n     * */\n    _dangerous_reducer_deleteMessages: deleteMessages\n  };\n};\n(function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n});\n(function(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n});\nconst useIIFE = (callback) => {\n  return iife(callback);\n};\nconst iife = (callback) => typeof callback === \"function\" && callback();\nfunction mergeObject(target, subset) {\n  const object = Object.assign({}, target);\n  Object.keys(subset).forEach((key) => {\n    if (Object.prototype.hasOwnProperty.call(object, key) && isSameType(object[key], subset[key])) {\n      if (typeof subset[key] === \"object\" && !Array.isArray(subset[key])) {\n        object[key] = mergeObject(object[key], subset[key]);\n      } else {\n        object[key] = subset[key];\n      }\n    }\n  });\n  return object;\n}\nconst createInitialConfig = () => ({\n  common: {\n    enableUsingDefaultUserProfile: false\n  },\n  groupChannel: {\n    channel: {\n      enableMention: false,\n      enableOgtag: true,\n      enableReactions: true,\n      enableReactionsSupergroup: false,\n      enableTypingIndicator: true,\n      enableVoiceMessage: false,\n      input: {\n        camera: {\n          enablePhoto: true,\n          enableVideo: true\n        },\n        enableDocument: true,\n        gallery: {\n          enablePhoto: true,\n          enableVideo: true\n        }\n      },\n      replyType: \"quote_reply\",\n      threadReplySelectType: \"thread\",\n      typingIndicatorTypes: /* @__PURE__ */ new Set([\"text\"]),\n      enableFeedback: false,\n      enableSuggestedReplies: false,\n      showSuggestedRepliesFor: \"last_message_only\",\n      suggestedRepliesDirection: \"vertical\",\n      enableMarkdownForUserMessage: false,\n      enableFormTypeMessage: false\n    },\n    channelList: {\n      enableMessageReceiptStatus: false,\n      enableTypingIndicator: false\n    },\n    setting: {\n      enableMessageSearch: false\n    }\n  },\n  openChannel: {\n    channel: {\n      enableOgtag: true,\n      input: {\n        camera: {\n          enablePhoto: true,\n          enableVideo: true\n        },\n        enableDocument: true,\n        gallery: {\n          enablePhoto: true,\n          enableVideo: true\n        }\n      }\n    }\n  }\n});\nfunction deleteLocalConfigs(config2) {\n  delete config2.groupChannel.channel.typingIndicatorTypes;\n  delete config2.groupChannel.channel.enableFeedback;\n  delete config2.groupChannel.channel.enableSuggestedReplies;\n  delete config2.groupChannel.channel.showSuggestedRepliesFor;\n  delete config2.groupChannel.channel.suggestedRepliesDirection;\n  delete config2.groupChannel.channel.enableMarkdownForUserMessage;\n  delete config2.groupChannel.channel.enableFormTypeMessage;\n  return config2;\n}\nconst createInitialRemoteConfig = () => {\n  const config2 = createInitialConfig();\n  return deleteLocalConfigs(config2);\n};\nconst initialConfig = createInitialConfig();\nconst initialRemoteConfig = createInitialRemoteConfig();\nvar __awaiter$1 = function(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nconst MemoryStorage = {\n  items: {},\n  getItem(key) {\n    var _a2;\n    return __awaiter$1(this, void 0, void 0, function* () {\n      return (_a2 = MemoryStorage.items[key]) !== null && _a2 !== void 0 ? _a2 : null;\n    });\n  },\n  setItem(key, value) {\n    return __awaiter$1(this, void 0, void 0, function* () {\n      MemoryStorage.items[key] = value;\n    });\n  }\n};\nclass UIKitConfigManager {\n  constructor(storage) {\n    this.storage = storage !== null && storage !== void 0 ? storage : MemoryStorage;\n  }\n  init(appId) {\n    this.key = `sbu@${appId}.uikitConfiguration`;\n    return this.get();\n  }\n  get safeKey() {\n    if (!this.key)\n      throw new Error(\"Please UIKitConfigManager.init() first\");\n    return this.key;\n  }\n  update(remoteConfigPayload) {\n    return __awaiter$1(this, void 0, void 0, function* () {\n      const storedConfigPayload = yield this.get();\n      const mergedConfigPayload = {\n        updatedAt: remoteConfigPayload.updatedAt,\n        configuration: mergeObject(storedConfigPayload.configuration, remoteConfigPayload.configuration)\n      };\n      yield this.storage.setItem(this.safeKey, JSON.stringify(mergedConfigPayload));\n      return mergedConfigPayload;\n    });\n  }\n  get() {\n    return __awaiter$1(this, void 0, void 0, function* () {\n      const initialPayload = {\n        updatedAt: 0,\n        configuration: initialRemoteConfig\n      };\n      try {\n        const storedConfig = yield this.storage.getItem(this.safeKey);\n        if (storedConfig) {\n          return JSON.parse(storedConfig);\n        } else {\n          return initialPayload;\n        }\n      } catch (_a2) {\n        return initialPayload;\n      }\n    });\n  }\n}\nfunction updateCommonConfigs(target, local, remote) {\n  var _a2, _b2;\n  if (remote.common && isBoolean((_a2 = remote.common) === null || _a2 === void 0 ? void 0 : _a2.enableUsingDefaultUserProfile)) {\n    target.enableUsingDefaultUserProfile = remote.common.enableUsingDefaultUserProfile;\n  }\n  if (local.common && isBoolean((_b2 = local.common) === null || _b2 === void 0 ? void 0 : _b2.enableUsingDefaultUserProfile)) {\n    target.enableUsingDefaultUserProfile = local.common.enableUsingDefaultUserProfile;\n  }\n}\nfunction updateGroupChannelConfigs(target, local, remote) {\n  updateChannelConfig$1(target, local, remote);\n  updateChannelInputConfig$1(target, local, remote);\n  updateChannelListConfig(target, local, remote);\n  updateChannelSettingConfig(target, local, remote);\n}\nfunction updateChannelConfig$1(target, local, remote) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j, _k, _l, _m, _o, _p, _q, _r2, _s2, _t2, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79, _80, _81, _82, _83, _84, _85, _86;\n  if (((_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) && isBoolean((_c = (_b2 = remote.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.channel) === null || _c === void 0 ? void 0 : _c.enableOgtag)) {\n    target.channel.enableOgtag = remote.groupChannel.channel.enableOgtag;\n  }\n  if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.channel) && isBoolean((_f = (_e2 = local.groupChannel) === null || _e2 === void 0 ? void 0 : _e2.channel) === null || _f === void 0 ? void 0 : _f.enableOgtag)) {\n    target.channel.enableOgtag = (_h = (_g2 = local.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.channel) === null || _h === void 0 ? void 0 : _h.enableOgtag;\n  }\n  if (((_j = remote.groupChannel) === null || _j === void 0 ? void 0 : _j.channel) && isBoolean((_l = (_k = remote.groupChannel) === null || _k === void 0 ? void 0 : _k.channel) === null || _l === void 0 ? void 0 : _l.enableTypingIndicator)) {\n    target.channel.enableTypingIndicator = (_o = (_m = remote.groupChannel) === null || _m === void 0 ? void 0 : _m.channel) === null || _o === void 0 ? void 0 : _o.enableTypingIndicator;\n  }\n  if (((_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channel) && isBoolean((_r2 = (_q = local.groupChannel) === null || _q === void 0 ? void 0 : _q.channel) === null || _r2 === void 0 ? void 0 : _r2.enableTypingIndicator)) {\n    target.channel.enableTypingIndicator = (_t2 = (_s2 = local.groupChannel) === null || _s2 === void 0 ? void 0 : _s2.channel) === null || _t2 === void 0 ? void 0 : _t2.enableTypingIndicator;\n  }\n  if (((_u = remote.groupChannel) === null || _u === void 0 ? void 0 : _u.channel) && isBoolean((_w = (_v = remote.groupChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.enableReactions)) {\n    target.channel.enableReactions = (_y = (_x = remote.groupChannel) === null || _x === void 0 ? void 0 : _x.channel) === null || _y === void 0 ? void 0 : _y.enableReactions;\n  }\n  if (((_z = local.groupChannel) === null || _z === void 0 ? void 0 : _z.channel) && isBoolean((_1 = (_0 = local.groupChannel) === null || _0 === void 0 ? void 0 : _0.channel) === null || _1 === void 0 ? void 0 : _1.enableReactions)) {\n    target.channel.enableReactions = (_3 = (_2 = local.groupChannel) === null || _2 === void 0 ? void 0 : _2.channel) === null || _3 === void 0 ? void 0 : _3.enableReactions;\n  }\n  if (((_4 = remote.groupChannel) === null || _4 === void 0 ? void 0 : _4.channel) && isBoolean((_6 = (_5 = remote.groupChannel) === null || _5 === void 0 ? void 0 : _5.channel) === null || _6 === void 0 ? void 0 : _6.enableReactionsSupergroup)) {\n    target.channel.enableReactionsSupergroup = (_8 = (_7 = remote.groupChannel) === null || _7 === void 0 ? void 0 : _7.channel) === null || _8 === void 0 ? void 0 : _8.enableReactionsSupergroup;\n  }\n  if (((_9 = local.groupChannel) === null || _9 === void 0 ? void 0 : _9.channel) && isBoolean((_11 = (_10 = local.groupChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.enableReactionsSupergroup)) {\n    console.warn(\"Currently, EnableReactionsSupergroup feature is turned off by default. If you wish to use this feature, contact us: https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit\");\n  }\n  if (((_12 = remote.groupChannel) === null || _12 === void 0 ? void 0 : _12.channel) && isBoolean((_14 = (_13 = remote.groupChannel) === null || _13 === void 0 ? void 0 : _13.channel) === null || _14 === void 0 ? void 0 : _14.enableMention)) {\n    target.channel.enableMention = (_16 = (_15 = remote.groupChannel) === null || _15 === void 0 ? void 0 : _15.channel) === null || _16 === void 0 ? void 0 : _16.enableMention;\n  }\n  if (((_17 = local.groupChannel) === null || _17 === void 0 ? void 0 : _17.channel) && isBoolean((_19 = (_18 = local.groupChannel) === null || _18 === void 0 ? void 0 : _18.channel) === null || _19 === void 0 ? void 0 : _19.enableMention)) {\n    target.channel.enableMention = (_21 = (_20 = local.groupChannel) === null || _20 === void 0 ? void 0 : _20.channel) === null || _21 === void 0 ? void 0 : _21.enableMention;\n  }\n  if (((_22 = remote.groupChannel) === null || _22 === void 0 ? void 0 : _22.channel) && isOneOf((_24 = (_23 = remote.groupChannel) === null || _23 === void 0 ? void 0 : _23.channel) === null || _24 === void 0 ? void 0 : _24.replyType, [\"none\", \"quote_reply\", \"thread\"])) {\n    target.channel.replyType = (_26 = (_25 = remote.groupChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.replyType;\n  }\n  if (((_27 = local.groupChannel) === null || _27 === void 0 ? void 0 : _27.channel) && isOneOf((_29 = (_28 = local.groupChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.replyType, [\"none\", \"quote_reply\", \"thread\"])) {\n    target.channel.replyType = (_31 = (_30 = local.groupChannel) === null || _30 === void 0 ? void 0 : _30.channel) === null || _31 === void 0 ? void 0 : _31.replyType;\n  }\n  if (((_32 = remote.groupChannel) === null || _32 === void 0 ? void 0 : _32.channel) && isOneOf((_34 = (_33 = remote.groupChannel) === null || _33 === void 0 ? void 0 : _33.channel) === null || _34 === void 0 ? void 0 : _34.threadReplySelectType, [\"thread\", \"parent\"])) {\n    target.channel.threadReplySelectType = (_36 = (_35 = remote.groupChannel) === null || _35 === void 0 ? void 0 : _35.channel) === null || _36 === void 0 ? void 0 : _36.threadReplySelectType;\n  }\n  if (((_37 = local.groupChannel) === null || _37 === void 0 ? void 0 : _37.channel) && isOneOf((_39 = (_38 = local.groupChannel) === null || _38 === void 0 ? void 0 : _38.channel) === null || _39 === void 0 ? void 0 : _39.threadReplySelectType, [\"thread\", \"parent\"])) {\n    target.channel.threadReplySelectType = (_41 = (_40 = local.groupChannel) === null || _40 === void 0 ? void 0 : _40.channel) === null || _41 === void 0 ? void 0 : _41.threadReplySelectType;\n  }\n  if (((_42 = remote.groupChannel) === null || _42 === void 0 ? void 0 : _42.channel) && isBoolean((_44 = (_43 = remote.groupChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.enableVoiceMessage)) {\n    target.channel.enableVoiceMessage = (_46 = (_45 = remote.groupChannel) === null || _45 === void 0 ? void 0 : _45.channel) === null || _46 === void 0 ? void 0 : _46.enableVoiceMessage;\n  }\n  if (((_47 = local.groupChannel) === null || _47 === void 0 ? void 0 : _47.channel) && isBoolean((_49 = (_48 = local.groupChannel) === null || _48 === void 0 ? void 0 : _48.channel) === null || _49 === void 0 ? void 0 : _49.enableVoiceMessage)) {\n    target.channel.enableVoiceMessage = (_51 = (_50 = local.groupChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.enableVoiceMessage;\n  }\n  if (((_52 = local.groupChannel) === null || _52 === void 0 ? void 0 : _52.channel) && isSet((_54 = (_53 = local.groupChannel) === null || _53 === void 0 ? void 0 : _53.channel) === null || _54 === void 0 ? void 0 : _54.typingIndicatorTypes)) {\n    target.channel.typingIndicatorTypes = (_56 = (_55 = local.groupChannel) === null || _55 === void 0 ? void 0 : _55.channel) === null || _56 === void 0 ? void 0 : _56.typingIndicatorTypes;\n  }\n  if (((_57 = local.groupChannel) === null || _57 === void 0 ? void 0 : _57.channel) && isBoolean((_59 = (_58 = local.groupChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.enableFeedback)) {\n    target.channel.enableFeedback = (_61 = (_60 = local.groupChannel) === null || _60 === void 0 ? void 0 : _60.channel) === null || _61 === void 0 ? void 0 : _61.enableFeedback;\n  }\n  if (((_62 = local.groupChannel) === null || _62 === void 0 ? void 0 : _62.channel) && isBoolean((_64 = (_63 = local.groupChannel) === null || _63 === void 0 ? void 0 : _63.channel) === null || _64 === void 0 ? void 0 : _64.enableSuggestedReplies)) {\n    target.channel.enableSuggestedReplies = (_66 = (_65 = local.groupChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.enableSuggestedReplies;\n  }\n  if (((_67 = local.groupChannel) === null || _67 === void 0 ? void 0 : _67.channel) && isOneOf((_69 = (_68 = local.groupChannel) === null || _68 === void 0 ? void 0 : _68.channel) === null || _69 === void 0 ? void 0 : _69.showSuggestedRepliesFor, [\"all_messages\", \"last_message_only\"])) {\n    target.channel.showSuggestedRepliesFor = (_71 = (_70 = local.groupChannel) === null || _70 === void 0 ? void 0 : _70.channel) === null || _71 === void 0 ? void 0 : _71.showSuggestedRepliesFor;\n  }\n  if (((_72 = local.groupChannel) === null || _72 === void 0 ? void 0 : _72.channel) && isOneOf((_74 = (_73 = local.groupChannel) === null || _73 === void 0 ? void 0 : _73.channel) === null || _74 === void 0 ? void 0 : _74.suggestedRepliesDirection, [\"vertical\", \"horizontal\"])) {\n    target.channel.suggestedRepliesDirection = (_76 = (_75 = local.groupChannel) === null || _75 === void 0 ? void 0 : _75.channel) === null || _76 === void 0 ? void 0 : _76.suggestedRepliesDirection;\n  }\n  if (((_77 = local.groupChannel) === null || _77 === void 0 ? void 0 : _77.channel) && isBoolean((_79 = (_78 = local.groupChannel) === null || _78 === void 0 ? void 0 : _78.channel) === null || _79 === void 0 ? void 0 : _79.enableMarkdownForUserMessage)) {\n    target.channel.enableMarkdownForUserMessage = (_81 = (_80 = local.groupChannel) === null || _80 === void 0 ? void 0 : _80.channel) === null || _81 === void 0 ? void 0 : _81.enableMarkdownForUserMessage;\n  }\n  if (((_82 = local.groupChannel) === null || _82 === void 0 ? void 0 : _82.channel) && isBoolean((_84 = (_83 = local.groupChannel) === null || _83 === void 0 ? void 0 : _83.channel) === null || _84 === void 0 ? void 0 : _84.enableFormTypeMessage)) {\n    target.channel.enableFormTypeMessage = (_86 = (_85 = local.groupChannel) === null || _85 === void 0 ? void 0 : _85.channel) === null || _86 === void 0 ? void 0 : _86.enableFormTypeMessage;\n  }\n}\nfunction updateChannelInputConfig$1(target, local, remote) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j, _k, _l, _m, _o, _p, _q, _r2, _s2, _t2, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79;\n  if (((_b2 = (_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) === null || _b2 === void 0 ? void 0 : _b2.input) && isBoolean((_e2 = (_d = (_c = remote.groupChannel) === null || _c === void 0 ? void 0 : _c.channel) === null || _d === void 0 ? void 0 : _d.input) === null || _e2 === void 0 ? void 0 : _e2.enableDocument)) {\n    target.channel.input.enableDocument = (_h = (_g2 = (_f = remote.groupChannel) === null || _f === void 0 ? void 0 : _f.channel) === null || _g2 === void 0 ? void 0 : _g2.input) === null || _h === void 0 ? void 0 : _h.enableDocument;\n  }\n  if (((_k = (_j = local.groupChannel) === null || _j === void 0 ? void 0 : _j.channel) === null || _k === void 0 ? void 0 : _k.input) && isBoolean((_o = (_m = (_l = local.groupChannel) === null || _l === void 0 ? void 0 : _l.channel) === null || _m === void 0 ? void 0 : _m.input) === null || _o === void 0 ? void 0 : _o.enableDocument)) {\n    target.channel.input.enableDocument = (_r2 = (_q = (_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channel) === null || _q === void 0 ? void 0 : _q.input) === null || _r2 === void 0 ? void 0 : _r2.enableDocument;\n  }\n  if (((_u = (_t2 = (_s2 = remote.groupChannel) === null || _s2 === void 0 ? void 0 : _s2.channel) === null || _t2 === void 0 ? void 0 : _t2.input) === null || _u === void 0 ? void 0 : _u.camera) && isBoolean((_y = (_x = (_w = (_v = remote.groupChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.input) === null || _x === void 0 ? void 0 : _x.camera) === null || _y === void 0 ? void 0 : _y.enablePhoto)) {\n    target.channel.input.camera.enablePhoto = (_2 = (_1 = (_0 = (_z = remote.groupChannel) === null || _z === void 0 ? void 0 : _z.channel) === null || _0 === void 0 ? void 0 : _0.input) === null || _1 === void 0 ? void 0 : _1.camera) === null || _2 === void 0 ? void 0 : _2.enablePhoto;\n  }\n  if (((_5 = (_4 = (_3 = local.groupChannel) === null || _3 === void 0 ? void 0 : _3.channel) === null || _4 === void 0 ? void 0 : _4.input) === null || _5 === void 0 ? void 0 : _5.camera) && isBoolean((_9 = (_8 = (_7 = (_6 = local.groupChannel) === null || _6 === void 0 ? void 0 : _6.channel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.camera) === null || _9 === void 0 ? void 0 : _9.enablePhoto)) {\n    target.channel.input.camera.enablePhoto = (_13 = (_12 = (_11 = (_10 = local.groupChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.input) === null || _12 === void 0 ? void 0 : _12.camera) === null || _13 === void 0 ? void 0 : _13.enablePhoto;\n  }\n  if (((_16 = (_15 = (_14 = remote.groupChannel) === null || _14 === void 0 ? void 0 : _14.channel) === null || _15 === void 0 ? void 0 : _15.input) === null || _16 === void 0 ? void 0 : _16.camera) && isBoolean((_20 = (_19 = (_18 = (_17 = remote.groupChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.input) === null || _19 === void 0 ? void 0 : _19.camera) === null || _20 === void 0 ? void 0 : _20.enableVideo)) {\n    target.channel.input.camera.enableVideo = (_24 = (_23 = (_22 = (_21 = remote.groupChannel) === null || _21 === void 0 ? void 0 : _21.channel) === null || _22 === void 0 ? void 0 : _22.input) === null || _23 === void 0 ? void 0 : _23.camera) === null || _24 === void 0 ? void 0 : _24.enableVideo;\n  }\n  if (((_27 = (_26 = (_25 = local.groupChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.input) === null || _27 === void 0 ? void 0 : _27.camera) && isBoolean((_31 = (_30 = (_29 = (_28 = local.groupChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.input) === null || _30 === void 0 ? void 0 : _30.camera) === null || _31 === void 0 ? void 0 : _31.enableVideo)) {\n    target.channel.input.camera.enableVideo = (_35 = (_34 = (_33 = (_32 = local.groupChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.input) === null || _34 === void 0 ? void 0 : _34.camera) === null || _35 === void 0 ? void 0 : _35.enableVideo;\n  }\n  if (((_38 = (_37 = (_36 = remote.groupChannel) === null || _36 === void 0 ? void 0 : _36.channel) === null || _37 === void 0 ? void 0 : _37.input) === null || _38 === void 0 ? void 0 : _38.gallery) && isBoolean((_42 = (_41 = (_40 = (_39 = remote.groupChannel) === null || _39 === void 0 ? void 0 : _39.channel) === null || _40 === void 0 ? void 0 : _40.input) === null || _41 === void 0 ? void 0 : _41.gallery) === null || _42 === void 0 ? void 0 : _42.enablePhoto)) {\n    target.channel.input.gallery.enablePhoto = (_46 = (_45 = (_44 = (_43 = remote.groupChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.input) === null || _45 === void 0 ? void 0 : _45.gallery) === null || _46 === void 0 ? void 0 : _46.enablePhoto;\n  }\n  if (((_49 = (_48 = (_47 = local.groupChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.input) === null || _49 === void 0 ? void 0 : _49.gallery) && isBoolean((_53 = (_52 = (_51 = (_50 = local.groupChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.input) === null || _52 === void 0 ? void 0 : _52.gallery) === null || _53 === void 0 ? void 0 : _53.enablePhoto)) {\n    target.channel.input.gallery.enablePhoto = (_57 = (_56 = (_55 = (_54 = local.groupChannel) === null || _54 === void 0 ? void 0 : _54.channel) === null || _55 === void 0 ? void 0 : _55.input) === null || _56 === void 0 ? void 0 : _56.gallery) === null || _57 === void 0 ? void 0 : _57.enablePhoto;\n  }\n  if (((_60 = (_59 = (_58 = remote.groupChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.input) === null || _60 === void 0 ? void 0 : _60.gallery) && isBoolean((_64 = (_63 = (_62 = (_61 = remote.groupChannel) === null || _61 === void 0 ? void 0 : _61.channel) === null || _62 === void 0 ? void 0 : _62.input) === null || _63 === void 0 ? void 0 : _63.gallery) === null || _64 === void 0 ? void 0 : _64.enableVideo)) {\n    target.channel.input.gallery.enableVideo = (_68 = (_67 = (_66 = (_65 = remote.groupChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.input) === null || _67 === void 0 ? void 0 : _67.gallery) === null || _68 === void 0 ? void 0 : _68.enableVideo;\n  }\n  if (((_71 = (_70 = (_69 = local.groupChannel) === null || _69 === void 0 ? void 0 : _69.channel) === null || _70 === void 0 ? void 0 : _70.input) === null || _71 === void 0 ? void 0 : _71.gallery) && isBoolean((_75 = (_74 = (_73 = (_72 = local.groupChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.input) === null || _74 === void 0 ? void 0 : _74.gallery) === null || _75 === void 0 ? void 0 : _75.enableVideo)) {\n    target.channel.input.gallery.enableVideo = (_79 = (_78 = (_77 = (_76 = local.groupChannel) === null || _76 === void 0 ? void 0 : _76.channel) === null || _77 === void 0 ? void 0 : _77.input) === null || _78 === void 0 ? void 0 : _78.gallery) === null || _79 === void 0 ? void 0 : _79.enableVideo;\n  }\n}\nfunction updateChannelListConfig(target, local, remote) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j, _k, _l, _m, _o, _p, _q, _r2, _s2, _t2;\n  if (((_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.channelList) && isBoolean((_c = (_b2 = remote.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.channelList) === null || _c === void 0 ? void 0 : _c.enableTypingIndicator)) {\n    target.channelList.enableTypingIndicator = remote.groupChannel.channelList.enableTypingIndicator;\n  }\n  if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.channelList) && isBoolean((_f = (_e2 = local.groupChannel) === null || _e2 === void 0 ? void 0 : _e2.channelList) === null || _f === void 0 ? void 0 : _f.enableTypingIndicator)) {\n    target.channelList.enableTypingIndicator = (_h = (_g2 = local.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.channelList) === null || _h === void 0 ? void 0 : _h.enableTypingIndicator;\n  }\n  if (((_j = remote.groupChannel) === null || _j === void 0 ? void 0 : _j.channelList) && isBoolean((_l = (_k = remote.groupChannel) === null || _k === void 0 ? void 0 : _k.channelList) === null || _l === void 0 ? void 0 : _l.enableMessageReceiptStatus)) {\n    target.channelList.enableMessageReceiptStatus = (_o = (_m = remote.groupChannel) === null || _m === void 0 ? void 0 : _m.channelList) === null || _o === void 0 ? void 0 : _o.enableMessageReceiptStatus;\n  }\n  if (((_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channelList) && isBoolean((_r2 = (_q = local.groupChannel) === null || _q === void 0 ? void 0 : _q.channelList) === null || _r2 === void 0 ? void 0 : _r2.enableMessageReceiptStatus)) {\n    target.channelList.enableMessageReceiptStatus = (_t2 = (_s2 = local.groupChannel) === null || _s2 === void 0 ? void 0 : _s2.channelList) === null || _t2 === void 0 ? void 0 : _t2.enableMessageReceiptStatus;\n  }\n}\nfunction updateChannelSettingConfig(target, local, remote) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h;\n  if (((_a2 = remote.groupChannel) === null || _a2 === void 0 ? void 0 : _a2.setting) && isBoolean((_c = (_b2 = remote.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.setting) === null || _c === void 0 ? void 0 : _c.enableMessageSearch)) {\n    target.setting.enableMessageSearch = remote.groupChannel.setting.enableMessageSearch;\n  }\n  if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.setting) && isBoolean((_f = (_e2 = local.groupChannel) === null || _e2 === void 0 ? void 0 : _e2.setting) === null || _f === void 0 ? void 0 : _f.enableMessageSearch)) {\n    target.setting.enableMessageSearch = (_h = (_g2 = local.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.setting) === null || _h === void 0 ? void 0 : _h.enableMessageSearch;\n  }\n}\nfunction updateOpenChannelConfigs(target, local, remote) {\n  updateChannelConfig(target, local, remote);\n  updateChannelInputConfig(target, local, remote);\n}\nfunction updateChannelConfig(target, local, remote) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h;\n  if (((_a2 = remote.openChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) && isBoolean((_c = (_b2 = remote.openChannel) === null || _b2 === void 0 ? void 0 : _b2.channel) === null || _c === void 0 ? void 0 : _c.enableOgtag)) {\n    target.channel.enableOgtag = remote.openChannel.channel.enableOgtag;\n  }\n  if (((_d = local.openChannel) === null || _d === void 0 ? void 0 : _d.channel) && isBoolean((_f = (_e2 = local.openChannel) === null || _e2 === void 0 ? void 0 : _e2.channel) === null || _f === void 0 ? void 0 : _f.enableOgtag)) {\n    target.channel.enableOgtag = (_h = (_g2 = local.openChannel) === null || _g2 === void 0 ? void 0 : _g2.channel) === null || _h === void 0 ? void 0 : _h.enableOgtag;\n  }\n}\nfunction updateChannelInputConfig(target, local, remote) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j, _k, _l, _m, _o, _p, _q, _r2, _s2, _t2, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79;\n  if (((_b2 = (_a2 = remote.openChannel) === null || _a2 === void 0 ? void 0 : _a2.channel) === null || _b2 === void 0 ? void 0 : _b2.input) && isBoolean((_e2 = (_d = (_c = remote.openChannel) === null || _c === void 0 ? void 0 : _c.channel) === null || _d === void 0 ? void 0 : _d.input) === null || _e2 === void 0 ? void 0 : _e2.enableDocument)) {\n    target.channel.input.enableDocument = (_h = (_g2 = (_f = remote.openChannel) === null || _f === void 0 ? void 0 : _f.channel) === null || _g2 === void 0 ? void 0 : _g2.input) === null || _h === void 0 ? void 0 : _h.enableDocument;\n  }\n  if (((_k = (_j = local.openChannel) === null || _j === void 0 ? void 0 : _j.channel) === null || _k === void 0 ? void 0 : _k.input) && isBoolean((_o = (_m = (_l = local.openChannel) === null || _l === void 0 ? void 0 : _l.channel) === null || _m === void 0 ? void 0 : _m.input) === null || _o === void 0 ? void 0 : _o.enableDocument)) {\n    target.channel.input.enableDocument = (_r2 = (_q = (_p = local.openChannel) === null || _p === void 0 ? void 0 : _p.channel) === null || _q === void 0 ? void 0 : _q.input) === null || _r2 === void 0 ? void 0 : _r2.enableDocument;\n  }\n  if (((_u = (_t2 = (_s2 = remote.openChannel) === null || _s2 === void 0 ? void 0 : _s2.channel) === null || _t2 === void 0 ? void 0 : _t2.input) === null || _u === void 0 ? void 0 : _u.camera) && isBoolean((_y = (_x = (_w = (_v = remote.openChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.input) === null || _x === void 0 ? void 0 : _x.camera) === null || _y === void 0 ? void 0 : _y.enablePhoto)) {\n    target.channel.input.camera.enablePhoto = (_2 = (_1 = (_0 = (_z = remote.openChannel) === null || _z === void 0 ? void 0 : _z.channel) === null || _0 === void 0 ? void 0 : _0.input) === null || _1 === void 0 ? void 0 : _1.camera) === null || _2 === void 0 ? void 0 : _2.enablePhoto;\n  }\n  if (((_5 = (_4 = (_3 = local.openChannel) === null || _3 === void 0 ? void 0 : _3.channel) === null || _4 === void 0 ? void 0 : _4.input) === null || _5 === void 0 ? void 0 : _5.camera) && isBoolean((_9 = (_8 = (_7 = (_6 = local.openChannel) === null || _6 === void 0 ? void 0 : _6.channel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.camera) === null || _9 === void 0 ? void 0 : _9.enablePhoto)) {\n    target.channel.input.camera.enablePhoto = (_13 = (_12 = (_11 = (_10 = local.openChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.input) === null || _12 === void 0 ? void 0 : _12.camera) === null || _13 === void 0 ? void 0 : _13.enablePhoto;\n  }\n  if (((_16 = (_15 = (_14 = remote.openChannel) === null || _14 === void 0 ? void 0 : _14.channel) === null || _15 === void 0 ? void 0 : _15.input) === null || _16 === void 0 ? void 0 : _16.camera) && isBoolean((_20 = (_19 = (_18 = (_17 = remote.openChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.input) === null || _19 === void 0 ? void 0 : _19.camera) === null || _20 === void 0 ? void 0 : _20.enableVideo)) {\n    target.channel.input.camera.enableVideo = (_24 = (_23 = (_22 = (_21 = remote.openChannel) === null || _21 === void 0 ? void 0 : _21.channel) === null || _22 === void 0 ? void 0 : _22.input) === null || _23 === void 0 ? void 0 : _23.camera) === null || _24 === void 0 ? void 0 : _24.enableVideo;\n  }\n  if (((_27 = (_26 = (_25 = local.openChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.input) === null || _27 === void 0 ? void 0 : _27.camera) && isBoolean((_31 = (_30 = (_29 = (_28 = local.openChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.input) === null || _30 === void 0 ? void 0 : _30.camera) === null || _31 === void 0 ? void 0 : _31.enableVideo)) {\n    target.channel.input.camera.enableVideo = (_35 = (_34 = (_33 = (_32 = local.openChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.input) === null || _34 === void 0 ? void 0 : _34.camera) === null || _35 === void 0 ? void 0 : _35.enableVideo;\n  }\n  if (((_38 = (_37 = (_36 = remote.openChannel) === null || _36 === void 0 ? void 0 : _36.channel) === null || _37 === void 0 ? void 0 : _37.input) === null || _38 === void 0 ? void 0 : _38.gallery) && isBoolean((_42 = (_41 = (_40 = (_39 = remote.openChannel) === null || _39 === void 0 ? void 0 : _39.channel) === null || _40 === void 0 ? void 0 : _40.input) === null || _41 === void 0 ? void 0 : _41.gallery) === null || _42 === void 0 ? void 0 : _42.enablePhoto)) {\n    target.channel.input.gallery.enablePhoto = (_46 = (_45 = (_44 = (_43 = remote.openChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.input) === null || _45 === void 0 ? void 0 : _45.gallery) === null || _46 === void 0 ? void 0 : _46.enablePhoto;\n  }\n  if (((_49 = (_48 = (_47 = local.openChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.input) === null || _49 === void 0 ? void 0 : _49.gallery) && isBoolean((_53 = (_52 = (_51 = (_50 = local.openChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.input) === null || _52 === void 0 ? void 0 : _52.gallery) === null || _53 === void 0 ? void 0 : _53.enablePhoto)) {\n    target.channel.input.gallery.enablePhoto = (_57 = (_56 = (_55 = (_54 = local.openChannel) === null || _54 === void 0 ? void 0 : _54.channel) === null || _55 === void 0 ? void 0 : _55.input) === null || _56 === void 0 ? void 0 : _56.gallery) === null || _57 === void 0 ? void 0 : _57.enablePhoto;\n  }\n  if (((_60 = (_59 = (_58 = remote.openChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.input) === null || _60 === void 0 ? void 0 : _60.gallery) && isBoolean((_64 = (_63 = (_62 = (_61 = remote.openChannel) === null || _61 === void 0 ? void 0 : _61.channel) === null || _62 === void 0 ? void 0 : _62.input) === null || _63 === void 0 ? void 0 : _63.gallery) === null || _64 === void 0 ? void 0 : _64.enableVideo)) {\n    target.channel.input.gallery.enableVideo = (_68 = (_67 = (_66 = (_65 = remote.openChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.input) === null || _67 === void 0 ? void 0 : _67.gallery) === null || _68 === void 0 ? void 0 : _68.enableVideo;\n  }\n  if (((_71 = (_70 = (_69 = local.openChannel) === null || _69 === void 0 ? void 0 : _69.channel) === null || _70 === void 0 ? void 0 : _70.input) === null || _71 === void 0 ? void 0 : _71.gallery) && isBoolean((_75 = (_74 = (_73 = (_72 = local.openChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.input) === null || _74 === void 0 ? void 0 : _74.gallery) === null || _75 === void 0 ? void 0 : _75.enableVideo)) {\n    target.channel.input.gallery.enableVideo = (_79 = (_78 = (_77 = (_76 = local.openChannel) === null || _76 === void 0 ? void 0 : _76.channel) === null || _77 === void 0 ? void 0 : _77.input) === null || _78 === void 0 ? void 0 : _78.gallery) === null || _79 === void 0 ? void 0 : _79.enableVideo;\n  }\n}\nfunction getConfigsByPriority(localConfigs, remoteConfigs) {\n  const prioritizedConfigs = createInitialConfig();\n  updateCommonConfigs(prioritizedConfigs.common, localConfigs, remoteConfigs);\n  updateGroupChannelConfigs(prioritizedConfigs.groupChannel, localConfigs, remoteConfigs);\n  updateOpenChannelConfigs(prioritizedConfigs.openChannel, localConfigs, remoteConfigs);\n  return prioritizedConfigs;\n}\nfunction isRawSBUConfigPayload(json) {\n  return typeof json === \"object\" && \"configuration\" in json && \"updated_at\" in json;\n}\nvar __awaiter = function(thisArg, _arguments, P2, generator) {\n  function adopt(value) {\n    return value instanceof P2 ? value : new P2(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P2 || (P2 = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e3) {\n        reject(e3);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nfunction getApplicationAttributes(sdk) {\n  var _a2, _b2;\n  return (_b2 = (_a2 = sdk.appInfo) === null || _a2 === void 0 ? void 0 : _a2.applicationAttributes) !== null && _b2 !== void 0 ? _b2 : [];\n}\nconst UIKitConfigContext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])({\n  initDashboardConfigs: () => Promise.resolve(),\n  configs: initialConfig,\n  configsWithAppAttr: () => initialConfig\n});\nconst UIKitConfigProvider = ({ storage, children, localConfigs = {} }) => {\n  const [remoteConfigs, setRemoteConfigs] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(createInitialRemoteConfig);\n  const [manager] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(() => new UIKitConfigManager(storage));\n  const initDashboardConfigs = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])((sdk) => __awaiter(void 0, void 0, void 0, function* () {\n    const storedConfigPayload = yield manager.init(sdk.appId);\n    if (sdk.appInfo && sdk.appInfo.uikitConfigInfo.lastUpdatedAt === storedConfigPayload.updatedAt) {\n      setRemoteConfigs(storedConfigPayload.configuration);\n    } else {\n      try {\n        const response = yield sdk.getUIKitConfiguration();\n        if (isRawSBUConfigPayload(response.json)) {\n          const remoteConfigPayload = snakeToCamel(response.json);\n          const updatedConfigPayload = yield manager.update(remoteConfigPayload);\n          setRemoteConfigs(updatedConfigPayload.configuration);\n        }\n      } catch (_a2) {\n        setRemoteConfigs(storedConfigPayload.configuration);\n      }\n    }\n  }), [manager]);\n  const configs = getConfigsByPriority(localConfigs, remoteConfigs);\n  const configsWithAppAttr = usePreservedCallback$1((sdk) => ({\n    groupChannel: {\n      channel: {\n        get enableReactions() {\n          return configs.groupChannel.channel.enableReactions && getApplicationAttributes(sdk).includes(applicationAttributes.reactions);\n        },\n        get enableReactionsSupergroup() {\n          return configs.groupChannel.channel.enableReactionsSupergroup && getApplicationAttributes(sdk).includes(applicationAttributes.reactions);\n        },\n        get enableOgtag() {\n          return configs.groupChannel.channel.enableOgtag && getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag);\n        }\n      },\n      setting: {\n        get enableMessageSearch() {\n          return configs.groupChannel.setting.enableMessageSearch && getApplicationAttributes(sdk).includes(applicationAttributes.message_search_v3);\n        }\n      }\n    },\n    openChannel: {\n      channel: {\n        get enableOgtag() {\n          return configs.openChannel.channel.enableOgtag && getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag);\n        }\n      }\n    }\n  }));\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UIKitConfigContext.Provider, { value: { initDashboardConfigs, configs, configsWithAppAttr } }, children);\n};\nconst useUIKitConfig = () => Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(UIKitConfigContext);\nvar ONE_MiB = 1024 * 1024;\nvar SCROLL_BUFFER = 10;\nvar SCROLL_BOTTOM_DELAY_FOR_SEND = 100;\nvar VOICE_RECORDER_CLICK_BUFFER_TIME = 250;\nvar VOICE_RECORDER_DEFAULT_MIN = 1e3;\nvar VOICE_RECORDER_DEFAULT_MAX = 6e5;\nvar VOICE_RECORDER_AUDIO_BIT_RATE = 12e3;\nvar VOICE_RECORDER_AUDIO_SAMPLE_RATE = 11025;\nvar BROWSER_SUPPORT_MIME_TYPE_LIST = [\"audio/webm\", \"audio/mp4\", \"audio/mpeg\", \"audio/ogg\"];\nvar VOICE_PLAYER_ROOT_ID = \"sendbird-voice-player-provider-root\";\nvar VOICE_PLAYER_AUDIO_ID = \"sendbird-global-audio-player-id\";\nvar VOICE_MESSAGE_FILE_NAME = \"Voice_message.mp3\";\nvar VOICE_MESSAGE_FILE_NAME__XM4A = \"Voice_message.m4a\";\nvar VOICE_MESSAGE_MIME_TYPE = \"audio/mp3;sbu_type=voice\";\nvar VOICE_MESSAGE_MIME_TYPE__XM4A = \"audio/x-m4a;sbu_type=voice\";\nvar META_ARRAY_VOICE_DURATION_KEY = \"KEY_VOICE_MESSAGE_DURATION\";\nvar META_ARRAY_MESSAGE_TYPE_KEY = \"KEY_INTERNAL_MESSAGE_TYPE\";\nvar META_ARRAY_MESSAGE_TYPE_VALUE__VOICE = \"voice/mp3\";\nvar SLIDER_BUTTON_ICON_SIDE_LENGTH = \"32px\";\nvar DEFAULT_MULTIPLE_FILES_MESSAGE_LIMIT = 10;\nvar DEFAULT_UPLOAD_SIZE_LIMIT = 25 * 1024 * 1024;\nvar CACHED_MESSAGE_TEMPLATES_TOKEN_KEY = \"sendbird_message_templates_token_key\";\nvar CACHED_MESSAGE_TEMPLATES_KEY = \"sendbird_message_templates_key\";\nvar MESSAGE_TEMPLATE_KEY = \"message_template\";\nvar commonjsGlobal = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nfunction getDefaultExportFromCjs(x3) {\n  return x3 && x3.__esModule && Object.prototype.hasOwnProperty.call(x3, \"default\") ? x3[\"default\"] : x3;\n}\nvar shim = { exports: {} };\nvar useSyncExternalStoreShim_production_min = {};\n/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar hasRequiredUseSyncExternalStoreShim_production_min;\nfunction requireUseSyncExternalStoreShim_production_min() {\n  if (hasRequiredUseSyncExternalStoreShim_production_min) return useSyncExternalStoreShim_production_min;\n  hasRequiredUseSyncExternalStoreShim_production_min = 1;\n  var e3 = react__WEBPACK_IMPORTED_MODULE_0___default.a;\n  function h4(a4, b3) {\n    return a4 === b3 && (0 !== a4 || 1 / a4 === 1 / b3) || a4 !== a4 && b3 !== b3;\n  }\n  var k3 = \"function\" === typeof Object.is ? Object.is : h4, l2 = e3.useState, m4 = e3.useEffect, n2 = e3.useLayoutEffect, p2 = e3.useDebugValue;\n  function q3(a4, b3) {\n    var d4 = b3(), f2 = l2({ inst: { value: d4, getSnapshot: b3 } }), c3 = f2[0].inst, g2 = f2[1];\n    n2(function() {\n      c3.value = d4;\n      c3.getSnapshot = b3;\n      r2(c3) && g2({ inst: c3 });\n    }, [a4, d4, b3]);\n    m4(function() {\n      r2(c3) && g2({ inst: c3 });\n      return a4(function() {\n        r2(c3) && g2({ inst: c3 });\n      });\n    }, [a4]);\n    p2(d4);\n    return d4;\n  }\n  function r2(a4) {\n    var b3 = a4.getSnapshot;\n    a4 = a4.value;\n    try {\n      var d4 = b3();\n      return !k3(a4, d4);\n    } catch (f2) {\n      return true;\n    }\n  }\n  function t4(a4, b3) {\n    return b3();\n  }\n  var u3 = \"undefined\" === typeof window || \"undefined\" === typeof window.document || \"undefined\" === typeof window.document.createElement ? t4 : q3;\n  useSyncExternalStoreShim_production_min.useSyncExternalStore = void 0 !== e3.useSyncExternalStore ? e3.useSyncExternalStore : u3;\n  return useSyncExternalStoreShim_production_min;\n}\nvar useSyncExternalStoreShim_development = {};\n/**\n * @license React\n * use-sync-external-store-shim.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar hasRequiredUseSyncExternalStoreShim_development;\nfunction requireUseSyncExternalStoreShim_development() {\n  if (hasRequiredUseSyncExternalStoreShim_development) return useSyncExternalStoreShim_development;\n  hasRequiredUseSyncExternalStoreShim_development = 1;\n  if (true) {\n    (function() {\n      if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== \"undefined\" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart === \"function\") {\n        __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error());\n      }\n      var React = react__WEBPACK_IMPORTED_MODULE_0___default.a;\n      var ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n      function error(format2) {\n        {\n          {\n            for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n            printWarning(\"error\", format2, args);\n          }\n        }\n      }\n      function printWarning(level, format2, args) {\n        {\n          var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n          var stack = ReactDebugCurrentFrame.getStackAddendum();\n          if (stack !== \"\") {\n            format2 += \"%s\";\n            args = args.concat([stack]);\n          }\n          var argsWithFormat = args.map(function(item) {\n            return String(item);\n          });\n          argsWithFormat.unshift(\"Warning: \" + format2);\n          Function.prototype.apply.call(console[level], console, argsWithFormat);\n        }\n      }\n      function is2(x3, y4) {\n        return x3 === y4 && (x3 !== 0 || 1 / x3 === 1 / y4) || x3 !== x3 && y4 !== y4;\n      }\n      var objectIs = typeof Object.is === \"function\" ? Object.is : is2;\n      var useState2 = React.useState, useEffect2 = React.useEffect, useLayoutEffect2 = React.useLayoutEffect, useDebugValue = React.useDebugValue;\n      var didWarnOld18Alpha = false;\n      var didWarnUncachedGetSnapshot = false;\n      function useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n        {\n          if (!didWarnOld18Alpha) {\n            if (React.startTransition !== void 0) {\n              didWarnOld18Alpha = true;\n              error(\"You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release.\");\n            }\n          }\n        }\n        var value = getSnapshot();\n        {\n          if (!didWarnUncachedGetSnapshot) {\n            var cachedValue = getSnapshot();\n            if (!objectIs(value, cachedValue)) {\n              error(\"The result of getSnapshot should be cached to avoid an infinite loop\");\n              didWarnUncachedGetSnapshot = true;\n            }\n          }\n        }\n        var _useState = useState2({\n          inst: {\n            value,\n            getSnapshot\n          }\n        }), inst = _useState[0].inst, forceUpdate = _useState[1];\n        useLayoutEffect2(function() {\n          inst.value = value;\n          inst.getSnapshot = getSnapshot;\n          if (checkIfSnapshotChanged(inst)) {\n            forceUpdate({\n              inst\n            });\n          }\n        }, [subscribe, value, getSnapshot]);\n        useEffect2(function() {\n          if (checkIfSnapshotChanged(inst)) {\n            forceUpdate({\n              inst\n            });\n          }\n          var handleStoreChange = function() {\n            if (checkIfSnapshotChanged(inst)) {\n              forceUpdate({\n                inst\n              });\n            }\n          };\n          return subscribe(handleStoreChange);\n        }, [subscribe]);\n        useDebugValue(value);\n        return value;\n      }\n      function checkIfSnapshotChanged(inst) {\n        var latestGetSnapshot = inst.getSnapshot;\n        var prevValue = inst.value;\n        try {\n          var nextValue = latestGetSnapshot();\n          return !objectIs(prevValue, nextValue);\n        } catch (error2) {\n          return true;\n        }\n      }\n      function useSyncExternalStore$1(subscribe, getSnapshot, getServerSnapshot) {\n        return getSnapshot();\n      }\n      var canUseDOM = !!(typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\");\n      var isServerEnvironment = !canUseDOM;\n      var shim2 = isServerEnvironment ? useSyncExternalStore$1 : useSyncExternalStore;\n      var useSyncExternalStore$2 = React.useSyncExternalStore !== void 0 ? React.useSyncExternalStore : shim2;\n      useSyncExternalStoreShim_development.useSyncExternalStore = useSyncExternalStore$2;\n      if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ !== \"undefined\" && typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop === \"function\") {\n        __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error());\n      }\n    })();\n  }\n  return useSyncExternalStoreShim_development;\n}\nif (false) {} else {\n  shim.exports = requireUseSyncExternalStoreShim_development();\n}\nvar shimExports = shim.exports;\nfunction listCacheClear$1() {\n  this.__data__ = [];\n  this.size = 0;\n}\nvar _listCacheClear = listCacheClear$1;\nfunction eq$2(value, other) {\n  return value === other || value !== value && other !== other;\n}\nvar eq_1 = eq$2;\nvar eq$1 = eq_1;\nfunction assocIndexOf$4(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq$1(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\nvar _assocIndexOf = assocIndexOf$4;\nvar assocIndexOf$3 = _assocIndexOf;\nvar arrayProto = Array.prototype;\nvar splice$1 = arrayProto.splice;\nfunction listCacheDelete$1(key) {\n  var data = this.__data__, index2 = assocIndexOf$3(data, key);\n  if (index2 < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index2 == lastIndex) {\n    data.pop();\n  } else {\n    splice$1.call(data, index2, 1);\n  }\n  --this.size;\n  return true;\n}\nvar _listCacheDelete = listCacheDelete$1;\nvar assocIndexOf$2 = _assocIndexOf;\nfunction listCacheGet$1(key) {\n  var data = this.__data__, index2 = assocIndexOf$2(data, key);\n  return index2 < 0 ? void 0 : data[index2][1];\n}\nvar _listCacheGet = listCacheGet$1;\nvar assocIndexOf$1 = _assocIndexOf;\nfunction listCacheHas$1(key) {\n  return assocIndexOf$1(this.__data__, key) > -1;\n}\nvar _listCacheHas = listCacheHas$1;\nvar assocIndexOf = _assocIndexOf;\nfunction listCacheSet$1(key, value) {\n  var data = this.__data__, index2 = assocIndexOf(data, key);\n  if (index2 < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index2][1] = value;\n  }\n  return this;\n}\nvar _listCacheSet = listCacheSet$1;\nvar listCacheClear = _listCacheClear, listCacheDelete = _listCacheDelete, listCacheGet = _listCacheGet, listCacheHas = _listCacheHas, listCacheSet = _listCacheSet;\nfunction ListCache$4(entries2) {\n  var index2 = -1, length = entries2 == null ? 0 : entries2.length;\n  this.clear();\n  while (++index2 < length) {\n    var entry = entries2[index2];\n    this.set(entry[0], entry[1]);\n  }\n}\nListCache$4.prototype.clear = listCacheClear;\nListCache$4.prototype[\"delete\"] = listCacheDelete;\nListCache$4.prototype.get = listCacheGet;\nListCache$4.prototype.has = listCacheHas;\nListCache$4.prototype.set = listCacheSet;\nvar _ListCache = ListCache$4;\nvar ListCache$3 = _ListCache;\nfunction stackClear$1() {\n  this.__data__ = new ListCache$3();\n  this.size = 0;\n}\nvar _stackClear = stackClear$1;\nfunction stackDelete$1(key) {\n  var data = this.__data__, result = data[\"delete\"](key);\n  this.size = data.size;\n  return result;\n}\nvar _stackDelete = stackDelete$1;\nfunction stackGet$1(key) {\n  return this.__data__.get(key);\n}\nvar _stackGet = stackGet$1;\nfunction stackHas$1(key) {\n  return this.__data__.has(key);\n}\nvar _stackHas = stackHas$1;\nvar freeGlobal$1 = typeof commonjsGlobal == \"object\" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\nvar _freeGlobal = freeGlobal$1;\nvar freeGlobal = _freeGlobal;\nvar freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\nvar root$8 = freeGlobal || freeSelf || Function(\"return this\")();\nvar _root = root$8;\nvar root$7 = _root;\nvar Symbol$3 = root$7.Symbol;\nvar _Symbol = Symbol$3;\nvar Symbol$2 = _Symbol;\nvar objectProto$b = Object.prototype;\nvar hasOwnProperty$8 = objectProto$b.hasOwnProperty;\nvar nativeObjectToString$1 = objectProto$b.toString;\nvar symToStringTag$1 = Symbol$2 ? Symbol$2.toStringTag : void 0;\nfunction getRawTag$1(value) {\n  var isOwn = hasOwnProperty$8.call(value, symToStringTag$1), tag = value[symToStringTag$1];\n  try {\n    value[symToStringTag$1] = void 0;\n    var unmasked = true;\n  } catch (e3) {\n  }\n  var result = nativeObjectToString$1.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag$1] = tag;\n    } else {\n      delete value[symToStringTag$1];\n    }\n  }\n  return result;\n}\nvar _getRawTag = getRawTag$1;\nvar objectProto$a = Object.prototype;\nvar nativeObjectToString = objectProto$a.toString;\nfunction objectToString$1(value) {\n  return nativeObjectToString.call(value);\n}\nvar _objectToString = objectToString$1;\nvar Symbol$1 = _Symbol, getRawTag = _getRawTag, objectToString = _objectToString;\nvar nullTag = \"[object Null]\", undefinedTag = \"[object Undefined]\";\nvar symToStringTag = Symbol$1 ? Symbol$1.toStringTag : void 0;\nfunction baseGetTag$4(value) {\n  if (value == null) {\n    return value === void 0 ? undefinedTag : nullTag;\n  }\n  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\n}\nvar _baseGetTag = baseGetTag$4;\nfunction isObject$2(value) {\n  var type = typeof value;\n  return value != null && (type == \"object\" || type == \"function\");\n}\nvar isObject_1 = isObject$2;\nvar baseGetTag$3 = _baseGetTag, isObject$1 = isObject_1;\nvar asyncTag = \"[object AsyncFunction]\", funcTag$1 = \"[object Function]\", genTag = \"[object GeneratorFunction]\", proxyTag = \"[object Proxy]\";\nfunction isFunction$2(value) {\n  if (!isObject$1(value)) {\n    return false;\n  }\n  var tag = baseGetTag$3(value);\n  return tag == funcTag$1 || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\nvar isFunction_1 = isFunction$2;\nvar root$6 = _root;\nvar coreJsData$1 = root$6[\"__core-js_shared__\"];\nvar _coreJsData = coreJsData$1;\nvar coreJsData = _coreJsData;\nvar maskSrcKey = function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || \"\");\n  return uid ? \"Symbol(src)_1.\" + uid : \"\";\n}();\nfunction isMasked$1(func) {\n  return !!maskSrcKey && maskSrcKey in func;\n}\nvar _isMasked = isMasked$1;\nvar funcProto$1 = Function.prototype;\nvar funcToString$1 = funcProto$1.toString;\nfunction toSource$2(func) {\n  if (func != null) {\n    try {\n      return funcToString$1.call(func);\n    } catch (e3) {\n    }\n    try {\n      return func + \"\";\n    } catch (e3) {\n    }\n  }\n  return \"\";\n}\nvar _toSource = toSource$2;\nvar isFunction$1 = isFunction_1, isMasked = _isMasked, isObject = isObject_1, toSource$1 = _toSource;\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\nvar funcProto = Function.prototype, objectProto$9 = Object.prototype;\nvar funcToString = funcProto.toString;\nvar hasOwnProperty$7 = objectProto$9.hasOwnProperty;\nvar reIsNative = RegExp(\n  \"^\" + funcToString.call(hasOwnProperty$7).replace(reRegExpChar, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\"\n);\nfunction baseIsNative$1(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction$1(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource$1(value));\n}\nvar _baseIsNative = baseIsNative$1;\nfunction getValue$1(object, key) {\n  return object == null ? void 0 : object[key];\n}\nvar _getValue = getValue$1;\nvar baseIsNative = _baseIsNative, getValue = _getValue;\nfunction getNative$6(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : void 0;\n}\nvar _getNative = getNative$6;\nvar getNative$5 = _getNative, root$5 = _root;\nvar Map$3 = getNative$5(root$5, \"Map\");\nvar _Map = Map$3;\nvar getNative$4 = _getNative;\nvar nativeCreate$4 = getNative$4(Object, \"create\");\nvar _nativeCreate = nativeCreate$4;\nvar nativeCreate$3 = _nativeCreate;\nfunction hashClear$1() {\n  this.__data__ = nativeCreate$3 ? nativeCreate$3(null) : {};\n  this.size = 0;\n}\nvar _hashClear = hashClear$1;\nfunction hashDelete$1(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\nvar _hashDelete = hashDelete$1;\nvar nativeCreate$2 = _nativeCreate;\nvar HASH_UNDEFINED$2 = \"__lodash_hash_undefined__\";\nvar objectProto$8 = Object.prototype;\nvar hasOwnProperty$6 = objectProto$8.hasOwnProperty;\nfunction hashGet$1(key) {\n  var data = this.__data__;\n  if (nativeCreate$2) {\n    var result = data[key];\n    return result === HASH_UNDEFINED$2 ? void 0 : result;\n  }\n  return hasOwnProperty$6.call(data, key) ? data[key] : void 0;\n}\nvar _hashGet = hashGet$1;\nvar nativeCreate$1 = _nativeCreate;\nvar objectProto$7 = Object.prototype;\nvar hasOwnProperty$5 = objectProto$7.hasOwnProperty;\nfunction hashHas$1(key) {\n  var data = this.__data__;\n  return nativeCreate$1 ? data[key] !== void 0 : hasOwnProperty$5.call(data, key);\n}\nvar _hashHas = hashHas$1;\nvar nativeCreate = _nativeCreate;\nvar HASH_UNDEFINED$1 = \"__lodash_hash_undefined__\";\nfunction hashSet$1(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED$1 : value;\n  return this;\n}\nvar _hashSet = hashSet$1;\nvar hashClear = _hashClear, hashDelete = _hashDelete, hashGet = _hashGet, hashHas = _hashHas, hashSet = _hashSet;\nfunction Hash$1(entries2) {\n  var index2 = -1, length = entries2 == null ? 0 : entries2.length;\n  this.clear();\n  while (++index2 < length) {\n    var entry = entries2[index2];\n    this.set(entry[0], entry[1]);\n  }\n}\nHash$1.prototype.clear = hashClear;\nHash$1.prototype[\"delete\"] = hashDelete;\nHash$1.prototype.get = hashGet;\nHash$1.prototype.has = hashHas;\nHash$1.prototype.set = hashSet;\nvar _Hash = Hash$1;\nvar Hash = _Hash, ListCache$2 = _ListCache, Map$2 = _Map;\nfunction mapCacheClear$1() {\n  this.size = 0;\n  this.__data__ = {\n    \"hash\": new Hash(),\n    \"map\": new (Map$2 || ListCache$2)(),\n    \"string\": new Hash()\n  };\n}\nvar _mapCacheClear = mapCacheClear$1;\nfunction isKeyable$1(value) {\n  var type = typeof value;\n  return type == \"string\" || type == \"number\" || type == \"symbol\" || type == \"boolean\" ? value !== \"__proto__\" : value === null;\n}\nvar _isKeyable = isKeyable$1;\nvar isKeyable = _isKeyable;\nfunction getMapData$4(map, key) {\n  var data = map.__data__;\n  return isKeyable(key) ? data[typeof key == \"string\" ? \"string\" : \"hash\"] : data.map;\n}\nvar _getMapData = getMapData$4;\nvar getMapData$3 = _getMapData;\nfunction mapCacheDelete$1(key) {\n  var result = getMapData$3(this, key)[\"delete\"](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\nvar _mapCacheDelete = mapCacheDelete$1;\nvar getMapData$2 = _getMapData;\nfunction mapCacheGet$1(key) {\n  return getMapData$2(this, key).get(key);\n}\nvar _mapCacheGet = mapCacheGet$1;\nvar getMapData$1 = _getMapData;\nfunction mapCacheHas$1(key) {\n  return getMapData$1(this, key).has(key);\n}\nvar _mapCacheHas = mapCacheHas$1;\nvar getMapData = _getMapData;\nfunction mapCacheSet$1(key, value) {\n  var data = getMapData(this, key), size = data.size;\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\nvar _mapCacheSet = mapCacheSet$1;\nvar mapCacheClear = _mapCacheClear, mapCacheDelete = _mapCacheDelete, mapCacheGet = _mapCacheGet, mapCacheHas = _mapCacheHas, mapCacheSet = _mapCacheSet;\nfunction MapCache$2(entries2) {\n  var index2 = -1, length = entries2 == null ? 0 : entries2.length;\n  this.clear();\n  while (++index2 < length) {\n    var entry = entries2[index2];\n    this.set(entry[0], entry[1]);\n  }\n}\nMapCache$2.prototype.clear = mapCacheClear;\nMapCache$2.prototype[\"delete\"] = mapCacheDelete;\nMapCache$2.prototype.get = mapCacheGet;\nMapCache$2.prototype.has = mapCacheHas;\nMapCache$2.prototype.set = mapCacheSet;\nvar _MapCache = MapCache$2;\nvar ListCache$1 = _ListCache, Map$1 = _Map, MapCache$1 = _MapCache;\nvar LARGE_ARRAY_SIZE = 200;\nfunction stackSet$1(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache$1) {\n    var pairs = data.__data__;\n    if (!Map$1 || pairs.length < LARGE_ARRAY_SIZE - 1) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache$1(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\nvar _stackSet = stackSet$1;\nvar ListCache = _ListCache, stackClear = _stackClear, stackDelete = _stackDelete, stackGet = _stackGet, stackHas = _stackHas, stackSet = _stackSet;\nfunction Stack$1(entries2) {\n  var data = this.__data__ = new ListCache(entries2);\n  this.size = data.size;\n}\nStack$1.prototype.clear = stackClear;\nStack$1.prototype[\"delete\"] = stackDelete;\nStack$1.prototype.get = stackGet;\nStack$1.prototype.has = stackHas;\nStack$1.prototype.set = stackSet;\nvar _Stack = Stack$1;\nvar HASH_UNDEFINED = \"__lodash_hash_undefined__\";\nfunction setCacheAdd$1(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\nvar _setCacheAdd = setCacheAdd$1;\nfunction setCacheHas$1(value) {\n  return this.__data__.has(value);\n}\nvar _setCacheHas = setCacheHas$1;\nvar MapCache = _MapCache, setCacheAdd = _setCacheAdd, setCacheHas = _setCacheHas;\nfunction SetCache$1(values) {\n  var index2 = -1, length = values == null ? 0 : values.length;\n  this.__data__ = new MapCache();\n  while (++index2 < length) {\n    this.add(values[index2]);\n  }\n}\nSetCache$1.prototype.add = SetCache$1.prototype.push = setCacheAdd;\nSetCache$1.prototype.has = setCacheHas;\nvar _SetCache = SetCache$1;\nfunction arraySome$1(array, predicate) {\n  var index2 = -1, length = array == null ? 0 : array.length;\n  while (++index2 < length) {\n    if (predicate(array[index2], index2, array)) {\n      return true;\n    }\n  }\n  return false;\n}\nvar _arraySome = arraySome$1;\nfunction cacheHas$1(cache, key) {\n  return cache.has(key);\n}\nvar _cacheHas = cacheHas$1;\nvar SetCache = _SetCache, arraySome = _arraySome, cacheHas = _cacheHas;\nvar COMPARE_PARTIAL_FLAG$3 = 1, COMPARE_UNORDERED_FLAG$1 = 2;\nfunction equalArrays$2(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$3, arrLength = array.length, othLength = other.length;\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index2 = -1, result = true, seen = bitmask & COMPARE_UNORDERED_FLAG$1 ? new SetCache() : void 0;\n  stack.set(array, other);\n  stack.set(other, array);\n  while (++index2 < arrLength) {\n    var arrValue = array[index2], othValue = other[index2];\n    if (customizer) {\n      var compared = isPartial ? customizer(othValue, arrValue, index2, other, array, stack) : customizer(arrValue, othValue, index2, array, other, stack);\n    }\n    if (compared !== void 0) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    if (seen) {\n      if (!arraySome(other, function(othValue2, othIndex) {\n        if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {\n          return seen.push(othIndex);\n        }\n      })) {\n        result = false;\n        break;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n      result = false;\n      break;\n    }\n  }\n  stack[\"delete\"](array);\n  stack[\"delete\"](other);\n  return result;\n}\nvar _equalArrays = equalArrays$2;\nvar root$4 = _root;\nvar Uint8Array$1 = root$4.Uint8Array;\nvar _Uint8Array = Uint8Array$1;\nfunction mapToArray$1(map) {\n  var index2 = -1, result = Array(map.size);\n  map.forEach(function(value, key) {\n    result[++index2] = [key, value];\n  });\n  return result;\n}\nvar _mapToArray = mapToArray$1;\nfunction setToArray$1(set) {\n  var index2 = -1, result = Array(set.size);\n  set.forEach(function(value) {\n    result[++index2] = value;\n  });\n  return result;\n}\nvar _setToArray = setToArray$1;\nvar Symbol$4 = _Symbol, Uint8Array$2 = _Uint8Array, eq = eq_1, equalArrays$1 = _equalArrays, mapToArray = _mapToArray, setToArray = _setToArray;\nvar COMPARE_PARTIAL_FLAG$2 = 1, COMPARE_UNORDERED_FLAG = 2;\nvar boolTag$1 = \"[object Boolean]\", dateTag$1 = \"[object Date]\", errorTag$1 = \"[object Error]\", mapTag$2 = \"[object Map]\", numberTag$1 = \"[object Number]\", regexpTag$1 = \"[object RegExp]\", setTag$2 = \"[object Set]\", stringTag$1 = \"[object String]\", symbolTag = \"[object Symbol]\";\nvar arrayBufferTag$1 = \"[object ArrayBuffer]\", dataViewTag$2 = \"[object DataView]\";\nvar symbolProto = Symbol$4 ? Symbol$4.prototype : void 0, symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;\nfunction equalByTag$1(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag$2:\n      if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n    case arrayBufferTag$1:\n      if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array$2(object), new Uint8Array$2(other))) {\n        return false;\n      }\n      return true;\n    case boolTag$1:\n    case dateTag$1:\n    case numberTag$1:\n      return eq(+object, +other);\n    case errorTag$1:\n      return object.name == other.name && object.message == other.message;\n    case regexpTag$1:\n    case stringTag$1:\n      return object == other + \"\";\n    case mapTag$2:\n      var convert2 = mapToArray;\n    case setTag$2:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG$2;\n      convert2 || (convert2 = setToArray);\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n      stack.set(object, other);\n      var result = equalArrays$1(convert2(object), convert2(other), bitmask, customizer, equalFunc, stack);\n      stack[\"delete\"](object);\n      return result;\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\nvar _equalByTag = equalByTag$1;\nfunction arrayPush$1(array, values) {\n  var index2 = -1, length = values.length, offset = array.length;\n  while (++index2 < length) {\n    array[offset + index2] = values[index2];\n  }\n  return array;\n}\nvar _arrayPush = arrayPush$1;\nvar isArray$3 = Array.isArray;\nvar isArray_1 = isArray$3;\nvar arrayPush$2 = _arrayPush, isArray$2 = isArray_1;\nfunction baseGetAllKeys$1(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray$2(object) ? result : arrayPush$2(result, symbolsFunc(object));\n}\nvar _baseGetAllKeys = baseGetAllKeys$1;\nfunction arrayFilter$1(array, predicate) {\n  var index2 = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];\n  while (++index2 < length) {\n    var value = array[index2];\n    if (predicate(value, index2, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\nvar _arrayFilter = arrayFilter$1;\nfunction stubArray$1() {\n  return [];\n}\nvar stubArray_1 = stubArray$1;\nvar arrayFilter = _arrayFilter, stubArray = stubArray_1;\nvar objectProto$6 = Object.prototype;\nvar propertyIsEnumerable$1 = objectProto$6.propertyIsEnumerable;\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\nvar getSymbols$1 = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable$1.call(object, symbol);\n  });\n};\nvar _getSymbols = getSymbols$1;\nfunction baseTimes$1(n2, iteratee) {\n  var index2 = -1, result = Array(n2);\n  while (++index2 < n2) {\n    result[index2] = iteratee(index2);\n  }\n  return result;\n}\nvar _baseTimes = baseTimes$1;\nfunction isObjectLike$4(value) {\n  return value != null && typeof value == \"object\";\n}\nvar isObjectLike_1 = isObjectLike$4;\nvar baseGetTag$2 = _baseGetTag, isObjectLike$3 = isObjectLike_1;\nvar argsTag$2 = \"[object Arguments]\";\nfunction baseIsArguments$1(value) {\n  return isObjectLike$3(value) && baseGetTag$2(value) == argsTag$2;\n}\nvar _baseIsArguments = baseIsArguments$1;\nvar baseIsArguments = _baseIsArguments, isObjectLike$2 = isObjectLike_1;\nvar objectProto$5 = Object.prototype;\nvar hasOwnProperty$4 = objectProto$5.hasOwnProperty;\nvar propertyIsEnumerable = objectProto$5.propertyIsEnumerable;\nvar isArguments$1 = baseIsArguments(/* @__PURE__ */ function() {\n  return arguments;\n}()) ? baseIsArguments : function(value) {\n  return isObjectLike$2(value) && hasOwnProperty$4.call(value, \"callee\") && !propertyIsEnumerable.call(value, \"callee\");\n};\nvar isArguments_1 = isArguments$1;\nvar isBuffer$2 = { exports: {} };\nfunction stubFalse() {\n  return false;\n}\nvar stubFalse_1 = stubFalse;\nisBuffer$2.exports;\n(function(module, exports) {\n  var root2 = _root, stubFalse2 = stubFalse_1;\n  var freeExports = exports && !exports.nodeType && exports;\n  var freeModule = freeExports && true && module && !module.nodeType && module;\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n  var Buffer2 = moduleExports ? root2.Buffer : void 0;\n  var nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : void 0;\n  var isBuffer2 = nativeIsBuffer || stubFalse2;\n  module.exports = isBuffer2;\n})(isBuffer$2, isBuffer$2.exports);\nvar isBufferExports = isBuffer$2.exports;\nvar MAX_SAFE_INTEGER$1 = 9007199254740991;\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\nfunction isIndex$1(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER$1 : length;\n  return !!length && (type == \"number\" || type != \"symbol\" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);\n}\nvar _isIndex = isIndex$1;\nvar MAX_SAFE_INTEGER = 9007199254740991;\nfunction isLength$2(value) {\n  return typeof value == \"number\" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\nvar isLength_1 = isLength$2;\nvar baseGetTag$1 = _baseGetTag, isLength$1 = isLength_1, isObjectLike$1 = isObjectLike_1;\nvar argsTag$1 = \"[object Arguments]\", arrayTag$1 = \"[object Array]\", boolTag = \"[object Boolean]\", dateTag = \"[object Date]\", errorTag = \"[object Error]\", funcTag = \"[object Function]\", mapTag$1 = \"[object Map]\", numberTag = \"[object Number]\", objectTag$2 = \"[object Object]\", regexpTag = \"[object RegExp]\", setTag$1 = \"[object Set]\", stringTag = \"[object String]\", weakMapTag$1 = \"[object WeakMap]\";\nvar arrayBufferTag = \"[object ArrayBuffer]\", dataViewTag$1 = \"[object DataView]\", float32Tag = \"[object Float32Array]\", float64Tag = \"[object Float64Array]\", int8Tag = \"[object Int8Array]\", int16Tag = \"[object Int16Array]\", int32Tag = \"[object Int32Array]\", uint8Tag = \"[object Uint8Array]\", uint8ClampedTag = \"[object Uint8ClampedArray]\", uint16Tag = \"[object Uint16Array]\", uint32Tag = \"[object Uint32Array]\";\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag$1] = typedArrayTags[arrayTag$1] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag$1] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag$1] = typedArrayTags[numberTag] = typedArrayTags[objectTag$2] = typedArrayTags[regexpTag] = typedArrayTags[setTag$1] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag$1] = false;\nfunction baseIsTypedArray$1(value) {\n  return isObjectLike$1(value) && isLength$1(value.length) && !!typedArrayTags[baseGetTag$1(value)];\n}\nvar _baseIsTypedArray = baseIsTypedArray$1;\nfunction baseUnary$1(func) {\n  return function(value) {\n    return func(value);\n  };\n}\nvar _baseUnary = baseUnary$1;\nvar _nodeUtil = { exports: {} };\n_nodeUtil.exports;\n(function(module, exports) {\n  var freeGlobal2 = _freeGlobal;\n  var freeExports = exports && !exports.nodeType && exports;\n  var freeModule = freeExports && true && module && !module.nodeType && module;\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n  var freeProcess = moduleExports && freeGlobal2.process;\n  var nodeUtil2 = function() {\n    try {\n      var types2 = freeModule && freeModule.require && freeModule.require(\"util\").types;\n      if (types2) {\n        return types2;\n      }\n      return freeProcess && freeProcess.binding && freeProcess.binding(\"util\");\n    } catch (e3) {\n    }\n  }();\n  module.exports = nodeUtil2;\n})(_nodeUtil, _nodeUtil.exports);\nvar _nodeUtilExports = _nodeUtil.exports;\nvar baseIsTypedArray = _baseIsTypedArray, baseUnary = _baseUnary, nodeUtil = _nodeUtilExports;\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\nvar isTypedArray$2 = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\nvar isTypedArray_1 = isTypedArray$2;\nvar baseTimes = _baseTimes, isArguments = isArguments_1, isArray$1 = isArray_1, isBuffer$1 = isBufferExports, isIndex = _isIndex, isTypedArray$1 = isTypedArray_1;\nvar objectProto$4 = Object.prototype;\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\nfunction arrayLikeKeys$1(value, inherited) {\n  var isArr = isArray$1(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer$1(value), isType = !isArr && !isArg && !isBuff && isTypedArray$1(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes(value.length, String) : [], length = result.length;\n  for (var key in value) {\n    if ((inherited || hasOwnProperty$3.call(value, key)) && !(skipIndexes && // Safari 9 has enumerable `arguments.length` in strict mode.\n    (key == \"length\" || // Node.js 0.10 has enumerable non-index properties on buffers.\n    isBuff && (key == \"offset\" || key == \"parent\") || // PhantomJS 2 has enumerable non-index properties on typed arrays.\n    isType && (key == \"buffer\" || key == \"byteLength\" || key == \"byteOffset\") || // Skip index properties.\n    isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\nvar _arrayLikeKeys = arrayLikeKeys$1;\nvar objectProto$3 = Object.prototype;\nfunction isPrototype$1(value) {\n  var Ctor = value && value.constructor, proto = typeof Ctor == \"function\" && Ctor.prototype || objectProto$3;\n  return value === proto;\n}\nvar _isPrototype = isPrototype$1;\nfunction overArg$1(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\nvar _overArg = overArg$1;\nvar overArg = _overArg;\nvar nativeKeys$1 = overArg(Object.keys, Object);\nvar _nativeKeys = nativeKeys$1;\nvar isPrototype = _isPrototype, nativeKeys = _nativeKeys;\nvar objectProto$2 = Object.prototype;\nvar hasOwnProperty$2 = objectProto$2.hasOwnProperty;\nfunction baseKeys$1(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty$2.call(object, key) && key != \"constructor\") {\n      result.push(key);\n    }\n  }\n  return result;\n}\nvar _baseKeys = baseKeys$1;\nvar isFunction = isFunction_1, isLength = isLength_1;\nfunction isArrayLike$1(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\nvar isArrayLike_1 = isArrayLike$1;\nvar arrayLikeKeys = _arrayLikeKeys, baseKeys = _baseKeys, isArrayLike = isArrayLike_1;\nfunction keys$1(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\nvar keys_1 = keys$1;\nvar baseGetAllKeys = _baseGetAllKeys, getSymbols = _getSymbols, keys$2 = keys_1;\nfunction getAllKeys$1(object) {\n  return baseGetAllKeys(object, keys$2, getSymbols);\n}\nvar _getAllKeys = getAllKeys$1;\nvar getAllKeys = _getAllKeys;\nvar COMPARE_PARTIAL_FLAG$1 = 1;\nvar objectProto$1 = Object.prototype;\nvar hasOwnProperty$1 = objectProto$1.hasOwnProperty;\nfunction equalObjects$1(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$1, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index2 = objLength;\n  while (index2--) {\n    var key = objProps[index2];\n    if (!(isPartial ? key in other : hasOwnProperty$1.call(other, key))) {\n      return false;\n    }\n  }\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n  var skipCtor = isPartial;\n  while (++index2 < objLength) {\n    key = objProps[index2];\n    var objValue = object[key], othValue = other[key];\n    if (customizer) {\n      var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);\n    }\n    if (!(compared === void 0 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == \"constructor\");\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor, othCtor = other.constructor;\n    if (objCtor != othCtor && (\"constructor\" in object && \"constructor\" in other) && !(typeof objCtor == \"function\" && objCtor instanceof objCtor && typeof othCtor == \"function\" && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack[\"delete\"](object);\n  stack[\"delete\"](other);\n  return result;\n}\nvar _equalObjects = equalObjects$1;\nvar getNative$3 = _getNative, root$3 = _root;\nvar DataView$1 = getNative$3(root$3, \"DataView\");\nvar _DataView = DataView$1;\nvar getNative$2 = _getNative, root$2 = _root;\nvar Promise$2 = getNative$2(root$2, \"Promise\");\nvar _Promise = Promise$2;\nvar getNative$1 = _getNative, root$1$1 = _root;\nvar Set$2 = getNative$1(root$1$1, \"Set\");\nvar _Set = Set$2;\nvar getNative = _getNative, root$9 = _root;\nvar WeakMap$1 = getNative(root$9, \"WeakMap\");\nvar _WeakMap = WeakMap$1;\nvar DataView$2 = _DataView, Map$4 = _Map, Promise$1 = _Promise, Set$1 = _Set, WeakMap$2 = _WeakMap, baseGetTag = _baseGetTag, toSource = _toSource;\nvar mapTag = \"[object Map]\", objectTag$1 = \"[object Object]\", promiseTag = \"[object Promise]\", setTag = \"[object Set]\", weakMapTag = \"[object WeakMap]\";\nvar dataViewTag = \"[object DataView]\";\nvar dataViewCtorString = toSource(DataView$2), mapCtorString = toSource(Map$4), promiseCtorString = toSource(Promise$1), setCtorString = toSource(Set$1), weakMapCtorString = toSource(WeakMap$2);\nvar getTag$1 = baseGetTag;\nif (DataView$2 && getTag$1(new DataView$2(new ArrayBuffer(1))) != dataViewTag || Map$4 && getTag$1(new Map$4()) != mapTag || Promise$1 && getTag$1(Promise$1.resolve()) != promiseTag || Set$1 && getTag$1(new Set$1()) != setTag || WeakMap$2 && getTag$1(new WeakMap$2()) != weakMapTag) {\n  getTag$1 = function(value) {\n    var result = baseGetTag(value), Ctor = result == objectTag$1 ? value.constructor : void 0, ctorString = Ctor ? toSource(Ctor) : \"\";\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString:\n          return dataViewTag;\n        case mapCtorString:\n          return mapTag;\n        case promiseCtorString:\n          return promiseTag;\n        case setCtorString:\n          return setTag;\n        case weakMapCtorString:\n          return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\nvar _getTag = getTag$1;\nvar Stack = _Stack, equalArrays = _equalArrays, equalByTag = _equalByTag, equalObjects = _equalObjects, getTag = _getTag, isArray$4 = isArray_1, isBuffer = isBufferExports, isTypedArray = isTypedArray_1;\nvar COMPARE_PARTIAL_FLAG = 1;\nvar argsTag = \"[object Arguments]\", arrayTag = \"[object Array]\", objectTag = \"[object Object]\";\nvar objectProto = Object.prototype;\nvar hasOwnProperty$9 = objectProto.hasOwnProperty;\nfunction baseIsEqualDeep$1(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray$4(object), othIsArr = isArray$4(other), objTag = objIsArr ? arrayTag : getTag(object), othTag = othIsArr ? arrayTag : getTag(other);\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n  var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack());\n    return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty$9.call(object, \"__wrapped__\"), othIsWrapped = othIsObj && hasOwnProperty$9.call(other, \"__wrapped__\");\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;\n      stack || (stack = new Stack());\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack());\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\nvar _baseIsEqualDeep = baseIsEqualDeep$1;\nvar baseIsEqualDeep = _baseIsEqualDeep, isObjectLike = isObjectLike_1;\nfunction baseIsEqual$1(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual$1, stack);\n}\nvar _baseIsEqual = baseIsEqual$1;\nvar baseIsEqual = _baseIsEqual;\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\nvar isEqual_1 = isEqual;\nvar isEqual$1 = /* @__PURE__ */ getDefaultExportFromCjs(isEqual_1);\nfunction hasStateChanged(prevState, updates) {\n  return Object.entries(updates).some(function(_a2) {\n    var key = _a2[0], value = _a2[1];\n    if (typeof prevState[key] === \"function\" && typeof value === \"function\") {\n      return false;\n    }\n    return !isEqual$1(prevState[key], value);\n  });\n}\nfunction createStore(initialState2) {\n  var state = __assign({}, initialState2);\n  var listeners = /* @__PURE__ */ new Set();\n  var isUpdating = false;\n  var setState = function(partial, force) {\n    if (isUpdating)\n      return;\n    try {\n      isUpdating = true;\n      var nextState = typeof partial === \"function\" ? partial(state) : partial;\n      var hasChanged = hasStateChanged(state, nextState);\n      if (force || hasChanged) {\n        state = __assign(__assign({}, state), nextState);\n        listeners.forEach(function(listener) {\n          return listener();\n        });\n      }\n    } finally {\n      isUpdating = false;\n    }\n  };\n  return {\n    getState: function() {\n      return state;\n    },\n    setState,\n    subscribe: function(listener) {\n      listeners.add(listener);\n      return function() {\n        return listeners.delete(listener);\n      };\n    }\n  };\n}\nvar deprecatedConfig = {\n  onUserProfileMessage: void 0,\n  disableUserProfile: false,\n  isReactionEnabled: true,\n  isMentionEnabled: false,\n  isVoiceMessageEnabled: true,\n  replyType: \"NONE\",\n  showSearchIcon: true,\n  isTypingIndicatorEnabledOnChannelList: false,\n  isMessageReceiptStatusEnabledOnChannelList: false,\n  setCurrenttheme: function() {\n  }\n};\nvar config = __assign(__assign({}, deprecatedConfig), {\n  // Connection\n  appId: \"\",\n  userId: \"\",\n  accessToken: void 0,\n  theme: \"light\",\n  isOnline: false,\n  // High level options\n  allowProfileEdit: true,\n  forceLeftToRightMessageLayout: false,\n  disableMarkAsDelivered: false,\n  isMultipleFilesMessageEnabled: false,\n  htmlTextDirection: \"ltr\",\n  uikitUploadSizeLimit: DEFAULT_UPLOAD_SIZE_LIMIT,\n  uikitMultipleFilesMessageLimit: DEFAULT_MULTIPLE_FILES_MESSAGE_LIMIT,\n  imageCompression: void 0,\n  voiceRecord: void 0,\n  userMention: void 0,\n  // Functions\n  renderUserProfile: void 0,\n  onStartDirectMessage: void 0,\n  setCurrentTheme: void 0,\n  userListQuery: void 0,\n  // Utils\n  pubSub: void 0,\n  logger: void 0,\n  markAsReadScheduler: void 0,\n  markAsDeliveredScheduler: void 0,\n  // UIKit Configs\n  common: {\n    enableUsingDefaultUserProfile: false\n  },\n  groupChannel: {\n    enableOgtag: true,\n    enableTypingIndicator: true,\n    enableReactions: true,\n    enableMention: false,\n    replyType: \"none\",\n    threadReplySelectType: \"thread\",\n    enableVoiceMessage: true,\n    typingIndicatorTypes: void 0,\n    enableDocument: false,\n    enableFeedback: false,\n    enableSuggestedReplies: false,\n    showSuggestedRepliesFor: \"all_messages\",\n    suggestedRepliesDirection: \"vertical\",\n    enableMarkdownForUserMessage: false,\n    enableFormTypeMessage: false,\n    enableReactionsSupergroup: void 0\n    // @deprecated\n  },\n  groupChannelList: {\n    enableTypingIndicator: false,\n    enableMessageReceiptStatus: false\n  },\n  groupChannelSettings: {\n    enableMessageSearch: false\n  },\n  openChannel: {\n    enableOgtag: true,\n    enableDocument: false\n  }\n});\nvar stores = {\n  sdkStore: {\n    sdk: {},\n    initialized: false,\n    loading: false,\n    error: void 0\n  },\n  userStore: {\n    user: {},\n    initialized: false,\n    loading: false\n  },\n  appInfoStore: {\n    messageTemplatesInfo: void 0,\n    waitingTemplateKeysMap: {}\n  }\n};\nvar initialState$3 = {\n  config,\n  stores,\n  emojiManager: void 0,\n  eventHandlers: {\n    reaction: {\n      onPressUserProfile: function() {\n      }\n    },\n    connection: {\n      onConnected: function() {\n      },\n      onFailed: function() {\n      }\n    },\n    modal: {\n      onMounted: function() {\n      }\n    },\n    message: {\n      onSendMessageFailed: function() {\n      },\n      onUpdateMessageFailed: function() {\n      },\n      onFileUploadFailed: function() {\n      }\n    }\n  },\n  utils: {\n    updateMessageTemplatesInfo: function() {\n      return new Promise(function() {\n      });\n    },\n    getCachedTemplate: function() {\n      return null;\n    }\n  }\n};\nfunction useStore(StoreContext, selector, initialState2) {\n  var store = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(StoreContext);\n  if (!store) {\n    throw new Error(\"useStore must be used within a StoreProvider\");\n  }\n  var selectorRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(selector);\n  selectorRef.current = selector;\n  var state = shimExports.useSyncExternalStore(store.subscribe, function() {\n    return selectorRef.current(store.getState());\n  }, function() {\n    return selectorRef.current(initialState2);\n  });\n  var updateState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(updates) {\n    var currentState = store.getState();\n    if (hasStateChanged(currentState, updates)) {\n      store.setState(function(prevState) {\n        return __assign(__assign({}, prevState), updates);\n      });\n    }\n  }, [store]);\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      state,\n      updateState\n    };\n  }, [state, updateState]);\n}\nvar SendbirdContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nvar createSendbirdContextStore = function(props) {\n  return createStore({\n    config: __assign(__assign({}, initialState$3.config), props === null || props === void 0 ? void 0 : props.config),\n    stores: __assign(__assign({}, initialState$3.stores), props === null || props === void 0 ? void 0 : props.stores),\n    eventHandlers: __assign(__assign({}, initialState$3.eventHandlers), props === null || props === void 0 ? void 0 : props.eventHandlers),\n    emojiManager: initialState$3.emojiManager,\n    utils: __assign(__assign({}, initialState$3.utils), props === null || props === void 0 ? void 0 : props.utils)\n  });\n};\nvar useSendbirdStore = function() {\n  return useStore(SendbirdContext, function(state) {\n    return state;\n  }, initialState$3);\n};\nvar Ce = function(r2) {\n  function a4() {\n    var e3 = null !== r2 && r2.apply(this, arguments) || this;\n    return e3._channels = /* @__PURE__ */ new Map(), e3._enteredChannelUrls = [], e3;\n  }\n  return t$2(a4, r2), Object.defineProperty(a4.prototype, \"enteredChannels\", { get: function() {\n    var e3 = this;\n    return this._enteredChannelUrls.map(function(n2) {\n      return e3._channels.get(n2);\n    }).filter(function(e4) {\n      return !!e4;\n    });\n  }, enumerable: false, configurable: true }), a4.prototype.isEnteredChannel = function(e3) {\n    return this._enteredChannelUrls.includes(e3);\n  }, a4.prototype.enter = function(e3) {\n    this._enteredChannelUrls.indexOf(e3) < 0 && this._enteredChannelUrls.push(e3);\n  }, a4.prototype.exit = function(e3) {\n    var n2 = this._enteredChannelUrls.indexOf(e3);\n    n2 >= 0 && this._enteredChannelUrls.splice(n2, 1);\n  }, a4.prototype.exitAll = function() {\n    this._enteredChannelUrls = [];\n  }, a4.prototype.get = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, this._channels.get(e3)];\n      });\n    });\n  }, a4.prototype.upsert = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r3 = this;\n      return s$1(this, function(t4) {\n        return n2 = [], e3.forEach(function(e4) {\n          if (r3._channels.has(e4.url)) {\n            var t5 = r3._channels.get(e4.url);\n            Object.assign(t5, e4), n2.push(t5);\n          } else r3._channels.set(e4.url, e4), n2.push(e4);\n        }), [2, n2];\n      });\n    });\n  }, a4.prototype.remove = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return this._channels.delete(e3), this.exit(e3), [2];\n      });\n    });\n  }, a4.prototype.clear = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        return this._channels.clear(), this._enteredChannelUrls = [], [2];\n      });\n    });\n  }, a4;\n}(Jr$1), ve = { channelUrl: void 0, name: void 0, coverUrlOrImage: void 0, data: void 0, customType: void 0, operatorUserIds: void 0, isEphemeral: void 0 }, _e = function(n2) {\n  function t4(e3) {\n    var t5 = e3.channelUrl, r2 = e3.isInternalCall, a4 = n2.call(this) || this;\n    return a4.method = ae.GET, a4.path = \"\".concat(r2 ? pe : fe, \"/\").concat(encodeURIComponent(t5)), a4.params = { show_pinned_messages: true }, a4;\n  }\n  return t$2(t4, n2), t4;\n}(Fe$2), ge = function(n2) {\n  function t4(e3, t5) {\n    var r2 = n2.call(this, e3, t5) || this;\n    return r2.channel = new xe(e3, t5), r2;\n  }\n  return t$2(t4, n2), t4;\n}(qe$2), ye = function(n2) {\n  function t4(e3) {\n    var t5 = this, r2 = e3.channelUrl, a4 = e3.coverUrlOrImage, u3 = e3.name, c3 = e3.data, h4 = e3.customType, f2 = e3.operatorUserIds, C2 = e3.isEphemeral;\n    return (t5 = n2.call(this) || this).method = ae.POST, t5.path = fe, t5.params = se(oe({ channel_url: r2, cover_url: S$1(\"string\", a4) ? a4 : null, cover_file: k(a4) ? a4 : null, name: u3, data: c3, custom_type: h4, operators: f2, is_ephemeral: C2 })), t5;\n  }\n  return t$2(t4, n2), t4;\n}(Fe$2);\n!function(n2) {\n  function t4(e3, t5) {\n    var r2 = n2.call(this, e3, t5) || this;\n    return r2.channel = new xe(e3, t5), r2;\n  }\n  t$2(t4, n2);\n}(qe$2);\nvar me = function(n2) {\n  function t4(e3) {\n    var t5 = e3.channelUrl;\n    return n2.call(this, { code: \"ENTR\", payload: { channel_url: t5 }, ackRequired: true }) || this;\n  }\n  return t$2(t4, n2), t4;\n}(Ge$1), Ue = function(n2) {\n  function t4(e3, t5, r2) {\n    var a4, s4, i3 = this;\n    return i3 = n2.call(this, e3, \"SYEV\", r2) || this, r2.data && (i3.participantCount = null !== (a4 = r2.data.participant_count) && void 0 !== a4 ? a4 : 0, i3.user = new ls$2(e3, r2.data), i3.ts = null !== (s4 = r2.data.edge_ts) && void 0 !== s4 ? s4 : 0), i3;\n  }\n  return t$2(t4, n2), t4;\n}(v), Ee = function(n2) {\n  function t4(e3) {\n    var t5 = e3.channelUrl;\n    return n2.call(this, { code: \"EXIT\", payload: { channel_url: t5 }, ackRequired: true }) || this;\n  }\n  return t$2(t4, n2), t4;\n}(Ge$1), Me = function(n2) {\n  function t4(e3, t5, r2) {\n    var a4, s4, i3 = this;\n    return i3 = n2.call(this, e3, \"EXIT\", r2) || this, r2.data && (i3.participantCount = null !== (a4 = r2.data.participant_count) && void 0 !== a4 ? a4 : 0, i3.user = new ls$2(e3, r2.data), i3.ts = null !== (s4 = r2.data.edge_ts) && void 0 !== s4 ? s4 : 0), i3;\n  }\n  return t$2(t4, n2), t4;\n}(v), we = {}, Pe = function(r2) {\n  function o$1(e3, a4) {\n    var s4 = r2.call(this, e3, n$2(n$2({}, a4), { channelType: H$1.OPEN })) || this;\n    return s4.subscribeChannelEvent = ut$1, s4.unsubscribeChannelEvent = ut$1, s4.refreshChannel = function() {\n      return r$1(s4, void 0, void 0, function() {\n        return s$1(this, function(e4) {\n          return [2, ut$1()];\n        });\n      });\n    }, s4._openChannelCache = new Ce(e3), s4._openChannelHandlers = /* @__PURE__ */ new Map(), s4._dispatcher.on(function(e4) {\n      var n2, t4;\n      if (e4 instanceof ze$2) s4._handleEvent(e4).catch(function(e5) {\n        if (v$2(e5) && \"foreground\" === s4._sdkState.appState) throw e5;\n      });\n      else if (e4 instanceof Fr$1 && e4.stateType === Rr$1.CONNECTED) {\n        var r3 = s4._openChannelCache.enteredChannels;\n        try {\n          for (var a5 = o(r3), i3 = a5.next(); !i3.done; i3 = a5.next()) {\n            i3.value.enter();\n          }\n        } catch (e5) {\n          n2 = { error: e5 };\n        } finally {\n          try {\n            i3 && !i3.done && (t4 = a5.return) && t4.call(a5);\n          } finally {\n            if (n2) throw n2.error;\n          }\n        }\n      }\n    }), we[e3] || (we[e3] = s4), s4;\n  }\n  return t$2(o$1, r2), o$1.of = function(e3) {\n    return we[e3];\n  }, o$1.prototype.buildOpenChannelFromSerializedData = function(e3) {\n    var n2 = as$2(e3);\n    return new xe(this._iid, xe.payloadify(n2));\n  }, o$1.prototype.getChannelFromCache = function(e3) {\n    var r3;\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._openChannelCache.get(e3)];\n          case 1:\n            return [2, null !== (r3 = n2.sent()) && void 0 !== r3 ? r3 : null];\n        }\n      });\n    });\n  }, o$1.prototype.upsertChannelsToCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        switch (n2.label) {\n          case 0:\n            return [4, this._openChannelCache.upsert(e3)];\n          case 1:\n            return [2, n2.sent()];\n        }\n      });\n    });\n  }, o$1.prototype.removeChannelsFromCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r3, a4, s4, i3, o$12;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            t4.trys.push([0, 5, 6, 7]), n2 = o(e3), r3 = n2.next(), t4.label = 1;\n          case 1:\n            return r3.done ? [3, 4] : (a4 = r3.value, [4, this._openChannelCache.remove(a4)]);\n          case 2:\n            t4.sent(), t4.label = 3;\n          case 3:\n            return r3 = n2.next(), [3, 1];\n          case 4:\n            return [3, 7];\n          case 5:\n            return s4 = t4.sent(), i3 = { error: s4 }, [3, 7];\n          case 6:\n            try {\n              r3 && !r3.done && (o$12 = n2.return) && o$12.call(n2);\n            } finally {\n              if (i3) throw i3.error;\n            }\n            return [7];\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, o$1.prototype.setEnteredToCache = function(e3) {\n    this._openChannelCache.enter(e3.url);\n  }, o$1.prototype.setExitedToCache = function(e3) {\n    this._openChannelCache.exit(e3.url);\n  }, Object.defineProperty(o$1.prototype, \"handlers\", { get: function() {\n    return c([], a$1(this._openChannelHandlers.values()), false);\n  }, enumerable: false, configurable: true }), o$1.prototype._handleEvent = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var r3, a4, s4, i3, o$12, u3, l2, c3, h4, d4, p2, f$12, C2, v$12, _2, g2, y$12, U$12, E3, w3, P2, O3, x3, R3, L$12, F2, k3, S4, $2, J2, ee2, ne2, te2, ae2, fe2, Ce2, ve2, _e2, ge2, ye2, me2, Ee2, we2, Pe2, be2, Te2, Ne2, De2, He2, Ie2, Oe2, xe2, Ae2, Re2, Le2, Fe2, ke2, Se2, qe2, ze2, Qe2, Ge2, je2, Ke2, Ve2, We2, Be2, Xe2, Ye2, Ze2, $e2, Je2, en2, nn2, tn2 = this;\n      return s$1(this, function(rn2) {\n        switch (rn2.label) {\n          case 0:\n            switch (rn2.trys.push([0, 59, , 60]), e3.code) {\n              case \"MESG\":\n              case \"FILE\":\n              case \"ADMM\":\n              case \"BRDM\":\n                return [3, 1];\n              case \"MEDI\":\n              case \"FEDI\":\n              case \"AEDI\":\n                return [3, 4];\n              case \"DELM\":\n                return [3, 7];\n              case \"MRCT\":\n                return [3, 10];\n              case \"MTHD\":\n                return [3, 13];\n              case \"MCNT\":\n                return [3, 16];\n              case \"PEDI\":\n                return [3, 27];\n              case \"VOTE\":\n                return [3, 30];\n              case \"SYEV\":\n                return [3, 33];\n            }\n            return [3, 58];\n          case 1:\n            return i3 = null, \"MESG\" === e3.code ? i3 = e3.as(Ir) : \"FILE\" === e3.code ? i3 = e3.as(Pt$1) : \"ADMM\" !== e3.code && \"BRDM\" != e3.code || (i3 = e3.as(L)), i3 ? (r3 = i3.message, a4 = i3.isMentioned, r3.channelType !== H$1.OPEN ? [3, 3] : [4, this.getChannel(r3.channelUrl, true)]) : [3, 3];\n          case 2:\n            s4 = rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, i4, o$13, u4;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) i4 = n2.value, this._openChannelCache.isEnteredChannel(s4.url) && (i4.onMessageReceived && i4.onMessageReceived(s4, r3), a4 && i4.onMentionReceived && i4.onMentionReceived(s4, r3));\n                  } catch (e5) {\n                    o$13 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (u4 = e4.return) && u4.call(e4);\n                    } finally {\n                      if (o$13) throw o$13.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 3;\n          case 3:\n            return [3, 58];\n          case 4:\n            return i3 = null, \"MEDI\" === e3.code ? i3 = e3.as(Tr) : \"FEDI\" === e3.code ? i3 = e3.as(Mr) : \"AEDI\" === e3.code && (i3 = e3.as(I)), i3 ? (o$12 = i3.message, u3 = i3.mentionCountChange, o$12.channelType !== H$1.OPEN ? [3, 6] : [4, this.getChannel(o$12.channelUrl, true)]) : [3, 6];\n          case 5:\n            l2 = rn2.sent(), c3 = false, l2.lastPinnedMessage && l2.lastPinnedMessage.messageId === o$12.messageId && l2.lastPinnedMessage.updatedAt < o$12.updatedAt && (l2.lastPinnedMessage = o$12, c3 = true), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5, i4, h5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) r4 = n2.value, this._openChannelCache.isEnteredChannel(l2.url) && (c3 && (null === (i4 = r4.onPinnedMessageUpdated) || void 0 === i4 || i4.call(r4, l2), null === (h5 = r4.onChannelChanged) || void 0 === h5 || h5.call(r4, l2)), r4.onMessageUpdated && r4.onMessageUpdated(l2, o$12), u3 > 0 && r4.onMentionReceived && r4.onMentionReceived(l2, o$12));\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 6;\n          case 6:\n            return [3, 58];\n          case 7:\n            return h4 = e3.as(at$1), ne2 = h4.channelUrl, te2 = h4.channelType, d4 = h4.messageId, te2 !== H$1.OPEN ? [3, 9] : [4, this.getChannel(ne2, true)];\n          case 8:\n            p2 = rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) r4 = n2.value, this._openChannelCache.isEnteredChannel(p2.url) && r4.onMessageDeleted && r4.onMessageDeleted(p2, d4);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 9;\n          case 9:\n            return [3, 58];\n          case 10:\n            return f$12 = e3.as(U), ne2 = f$12.channelUrl, te2 = f$12.channelType, C2 = f$12.event, te2 !== H$1.OPEN ? [3, 12] : [4, this.getChannel(ne2, true)];\n          case 11:\n            v$12 = rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) r4 = n2.value, this._openChannelCache.isEnteredChannel(v$12.url) && r4.onReactionUpdated && r4.onReactionUpdated(v$12, C2);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 12;\n          case 12:\n            return [3, 58];\n          case 13:\n            return (_2 = e3.as(M).event).channelType !== H$1.OPEN ? [3, 15] : [4, this.getChannel(_2.channelUrl, true)];\n          case 14:\n            g2 = rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) r4 = n2.value, this._openChannelCache.isEnteredChannel(g2.url) && r4.onThreadInfoUpdated && r4.onThreadInfoUpdated(g2, _2);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 15;\n          case 15:\n            return [3, 58];\n          case 16:\n            y$12 = e3.as(y).openChannelMemberCounts, U$12 = [], rn2.label = 17;\n          case 17:\n            rn2.trys.push([17, 22, 23, 24]), E3 = o(y$12), w3 = E3.next(), rn2.label = 18;\n          case 18:\n            return w3.done ? [3, 21] : (P2 = w3.value, ne2 = P2.channelUrl, Ee2 = P2.participantCount, O3 = P2.updatedAt, [4, this.getChannelFromCache(ne2)]);\n          case 19:\n            (x3 = rn2.sent()) && x3._updateParticipantCount(Ee2, O3) && U$12.push(x3), rn2.label = 20;\n          case 20:\n            return w3 = E3.next(), [3, 18];\n          case 21:\n            return [3, 24];\n          case 22:\n            return R3 = rn2.sent(), en2 = { error: R3 }, [3, 24];\n          case 23:\n            try {\n              w3 && !w3.done && (nn2 = E3.return) && nn2.call(E3);\n            } finally {\n              if (en2) throw en2.error;\n            }\n            return [7];\n          case 24:\n            return U$12.length > 0 ? [4, this.upsertChannelsToCache(U$12)] : [3, 26];\n          case 25:\n            L$12 = rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) (r4 = n2.value).onChannelMemberCountChanged && r4.onChannelMemberCountChanged(L$12);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 26;\n          case 26:\n            return [3, 58];\n          case 27:\n            return F2 = e3.as(D), k3 = F2.event, S4 = F2.status, ne2 = F2.channelUrl, te2 = F2.channelType, ne2 && te2 === H$1.OPEN ? [4, this.getChannel(ne2, true)] : [3, 29];\n          case 28:\n            $2 = rn2.sent(), this._dispatcher.dispatch(new wo({ event: k3, source: no.EVENT_POLL_UPDATED })), kr$1(S4 === To ? function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) (r4 = n2.value).onPollDeleted && r4.onPollDeleted($2, k3.pollId);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            } : function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) (r4 = n2.value).onPollUpdated && r4.onPollUpdated($2, k3);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 29;\n          case 29:\n            return [3, 58];\n          case 30:\n            return J2 = e3.as(Hr), ee2 = J2.event, ne2 = J2.channelUrl, te2 = J2.channelType, ne2 && te2 === H$1.OPEN ? [4, this.getChannel(ne2, true)] : [3, 32];\n          case 31:\n            ae2 = rn2.sent(), this._dispatcher.dispatch(new So({ event: ee2, source: no.EVENT_POLL_VOTED })), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) (r4 = n2.value).onPollVoted && r4.onPollVoted(ae2, ee2);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), rn2.label = 32;\n          case 32:\n            return [3, 58];\n          case 33:\n            if (!(fe2 = e3.as(v).event).isOpenChannelEvent) return [3, 57];\n            switch (fe2.category) {\n              case f.CHANNEL_ENTER:\n                return [3, 34];\n              case f.CHANNEL_EXIT:\n                return [3, 36];\n              case f.CHANNEL_OPERATOR_UPDATE:\n                return [3, 38];\n              case f.USER_CHANNEL_MUTE:\n              case f.USER_CHANNEL_UNMUTE:\n                return [3, 40];\n              case f.USER_CHANNEL_BAN:\n              case f.USER_CHANNEL_UNBAN:\n                return [3, 42];\n              case f.CHANNEL_FREEZE:\n              case f.CHANNEL_UNFREEZE:\n                return [3, 44];\n              case f.CHANNEL_DELETED:\n                return [3, 46];\n              case f.CHANNEL_PROP_CHANGED:\n                return [3, 49];\n              case f.CHANNEL_META_DATA_CHANGED:\n                return [3, 51];\n              case f.CHANNEL_META_COUNTERS_CHANGED:\n                return [3, 53];\n              case f.PINNED_MESSAGE_CHANGED:\n                return [3, 55];\n            }\n            return [3, 57];\n          case 34:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 35:\n            return Ce2 = rn2.sent(), ve2 = e3.as(Ue), Ee2 = ve2.participantCount, _e2 = ve2.user, ge2 = Ce2._updateParticipantCount(Ee2, fe2.ts), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    e5.onUserEntered && e5.onUserEntered(Ce2, _e2), ge2 && e5.onChannelParticipantCountChanged && e5.onChannelParticipantCountChanged(Ce2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 36:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 37:\n            return ye2 = rn2.sent(), me2 = e3.as(Me), Ee2 = me2.participantCount, we2 = me2.user, Pe2 = ye2._updateParticipantCount(Ee2, fe2.ts), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    e5.onUserExited && e5.onUserExited(ye2, we2), Pe2 && e5.onChannelParticipantCountChanged && e5.onChannelParticipantCountChanged(ye2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 38:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 39:\n            return be2 = rn2.sent(), Te2 = e3.as(T).operators, be2.operators = Te2, this.upsertChannelsToCache([be2]), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    e5.onOperatorUpdated && e5.onOperatorUpdated(be2, Te2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 40:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 41:\n            return Ne2 = rn2.sent(), De2 = fe2.category === f.USER_CHANNEL_MUTE, He2 = e3.as(De2 ? ar$1 : ur$1).user, kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    De2 ? e5.onUserMuted && e5.onUserMuted(Ne2, He2) : e5.onUserUnmuted && e5.onUserUnmuted(Ne2, He2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 42:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 43:\n            return Ie2 = rn2.sent(), Oe2 = fe2.category === f.USER_CHANNEL_BAN, xe2 = e3.as(Oe2 ? lr$1 : hr$1).user, kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    Oe2 ? e5.onUserBanned && e5.onUserBanned(Ie2, xe2) : e5.onUserUnbanned && e5.onUserUnbanned(Ie2, xe2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 44:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 45:\n            return Ae2 = rn2.sent(), Re2 = e3.as(pr$1).freeze, Ae2.isFrozen = Re2, this.upsertChannelsToCache([Ae2]), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    Re2 ? e5.onChannelFrozen && e5.onChannelFrozen(Ae2) : e5.onChannelUnfrozen && e5.onChannelUnfrozen(Ae2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 46:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 47:\n            return Le2 = rn2.sent(), [4, this.removeChannelsFromCache([Le2.url])];\n          case 48:\n            return rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    e5.onChannelDeleted && e5.onChannelDeleted(Le2.url, Le2.channelType);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 49:\n            return [4, this.getChannelWithoutCache(fe2.channelUrl, true)];\n          case 50:\n            return Fe2 = rn2.sent(), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    e5.onChannelChanged && e5.onChannelChanged(Fe2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 51:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 52:\n            return ke2 = rn2.sent(), Se2 = e3.as(Gn$1), qe2 = Se2.created, ze2 = Se2.updated, Qe2 = Se2.deleted, qe2 && ke2._upsertCachedMetaData(qe2, fe2.ts), ze2 && ke2._upsertCachedMetaData(ze2, fe2.ts), Qe2 && ke2._removeFromCachedMetaData(Qe2, fe2.ts), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    qe2 && e5.onMetaDataCreated && e5.onMetaDataCreated(ke2, qe2), ze2 && e5.onMetaDataUpdated && e5.onMetaDataUpdated(ke2, ze2), Qe2 && e5.onMetaDataDeleted && e5.onMetaDataDeleted(ke2, Qe2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 53:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 54:\n            return Ge2 = rn2.sent(), je2 = e3.as(nr$1), Ke2 = je2.created, Ve2 = je2.updated, We2 = je2.deleted, kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    Ke2 && e5.onMetaCounterCreated && e5.onMetaCounterCreated(Ge2, Ke2), Ve2 && e5.onMetaCounterUpdated && e5.onMetaCounterUpdated(Ge2, Ve2), We2 && e5.onMetaCounterDeleted && e5.onMetaCounterDeleted(Ge2, We2);\n                  }), [2];\n                });\n              });\n            }), [3, 57];\n          case 55:\n            return [4, this.getChannel(fe2.channelUrl, true)];\n          case 56:\n            return Be2 = rn2.sent(), Xe2 = e3.as(H), Ye2 = Xe2.pinnedMessageIds, Ze2 = Xe2.latestPinnedMessage, ($e2 = Xe2.ts) > Be2._pinnedMessagesUpdatedAt && (Be2.pinnedMessageIds = Ye2, Be2.lastPinnedMessage = Ze2, Be2._pinnedMessagesUpdatedAt = $e2, this.upsertChannelsToCache([Be2]), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                var e4, n2, r4, a5, s5;\n                return s$1(this, function(t4) {\n                  try {\n                    for (e4 = o(this._openChannelHandlers.values()), n2 = e4.next(); !n2.done; n2 = e4.next()) (r4 = n2.value).onChannelChanged && r4.onChannelChanged(Be2);\n                  } catch (e5) {\n                    a5 = { error: e5 };\n                  } finally {\n                    try {\n                      n2 && !n2.done && (s5 = e4.return) && s5.call(e4);\n                    } finally {\n                      if (a5) throw a5.error;\n                    }\n                  }\n                  return [2];\n                });\n              });\n            }), kr$1(function() {\n              return r$1(tn2, void 0, void 0, function() {\n                return s$1(this, function(e4) {\n                  return this._openChannelHandlers.forEach(function(e5) {\n                    e5.onPinnedMessageUpdated && e5.onPinnedMessageUpdated(Be2);\n                  }), [2];\n                });\n              });\n            })), [3, 57];\n          case 57:\n            return [3, 58];\n          case 58:\n            return [3, 60];\n          case 59:\n            if (Je2 = rn2.sent(), v$2(Je2)) throw Je2;\n            return [3, 60];\n          case 60:\n            return [2];\n        }\n      });\n    });\n  }, o$1.prototype.addHandler = function(e3, n2) {\n    this._openChannelHandlers.set(e3, n2);\n  }, o$1.prototype.removeHandler = function(e3) {\n    this._openChannelHandlers.delete(e3);\n  }, o$1.prototype.clearHandler = function() {\n    this._openChannelHandlers.clear();\n  }, o$1.prototype.getChannel = function(e3, r3) {\n    return void 0 === r3 && (r3 = false), r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), t4.label = 1;\n          case 1:\n            return t4.trys.push([1, 3, , 4]), [4, this.getChannelFromCache(e3)];\n          case 2:\n            return (n2 = t4.sent()) ? [2, n2] : [3, 4];\n          case 3:\n            return t4.sent(), [3, 4];\n          case 4:\n            return [4, this.getChannelWithoutCache(e3, r3)];\n          case 5:\n            return [2, t4.sent()];\n        }\n      });\n    });\n  }, o$1.prototype.getChannelWithoutCache = function(e3, r3) {\n    return void 0 === r3 && (r3 = false), r$1(this, void 0, void 0, function() {\n      var n2, a4, i3;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return cs$2(S$1(\"string\", e3)).throw(b$2.invalidParameters), n2 = new _e({ channelUrl: e3, isInternalCall: r3 }), [4, this._requestQueue.send(n2)];\n          case 1:\n            return a4 = t4.sent(), i3 = a4.as(ge).channel, [4, this.upsertChannelsToCache([i3])];\n          case 2:\n            return [2, t4.sent()[0]];\n        }\n      });\n    });\n  }, o$1.prototype.createChannel = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r3, o2, u3;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return n2 = n$2(n$2({}, ve), e3), cs$2(function(e4) {\n              return C$1(\"string\", e4.operatorUserIds, true) && (S$1(\"string\", e4.coverUrlOrImage, true) || k(e4.coverUrlOrImage, true)) && S$1(\"string\", e4.name, true) && S$1(\"string\", e4.data, true) && S$1(\"string\", e4.customType, true) && (S$1(\"string\", e4.channelUrl) && /^\\w+$/.test(e4.channelUrl) || null === e4.channelUrl || void 0 === e4.channelUrl) && S$1(\"boolean\", e4.isEphemeral, true);\n            }(n2)).throw(b$2.invalidParameters), r3 = new ye(n2), [4, this._requestQueue.send(r3)];\n          case 1:\n            return o2 = t4.sent(), u3 = o2.as(ge).channel, this.upsertChannelsToCache([u3]), [2, u3];\n        }\n      });\n    });\n  }, o$1;\n}(g), be = { name: void 0, coverUrlOrImage: void 0, data: void 0, customType: void 0, operatorUserIds: void 0 }, Te = function(n2) {\n  function t4(e3) {\n    var t5 = this, r2 = e3.channelUrl, a4 = e3.token, s4 = e3.limit;\n    return (t5 = n2.call(this) || this).method = ae.GET, t5.path = \"\".concat(fe, \"/\").concat(encodeURIComponent(r2), \"/participants\"), t5.params = { token: a4, limit: s4 }, t5;\n  }\n  return t$2(t4, n2), t4;\n}(Fe$2), Ne = function(n2) {\n  function t4(e3, t5) {\n    var r2 = n2.call(this, e3, t5) || this;\n    r2.participants = [];\n    var a4 = t5.next, s4 = t5.participants;\n    return r2.token = a4, r2.participants = s4.map(function(n3) {\n      return new tn$2(e3, n3);\n    }), r2;\n  }\n  return t$2(t4, n2), t4;\n}(qe$2), De = function(r2) {\n  function a4(e3, n2, t4) {\n    return r2.call(this, e3, n2, H$1.OPEN, t4) || this;\n  }\n  return t$2(a4, r2), a4.prototype._validate = function() {\n    return r2.prototype._validate.call(this);\n  }, a4.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, n2, r3, a5, s4, i3;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 3] : this._hasNext ? (this._isLoading = true, e3 = uo.of(this._iid).requestQueue, n2 = new Te(n$2(n$2({}, this), { token: this._token })), [4, e3.send(n2)]) : [3, 2] : [3, 5];\n          case 1:\n            return r3 = t4.sent(), a5 = r3.as(Ne), s4 = a5.participants, i3 = a5.token, this._token = i3, this._hasNext = !!i3, this._isLoading = false, [2, s4];\n          case 2:\n            return [2, []];\n          case 3:\n            throw b$2.queryInProgress;\n          case 4:\n            return [3, 6];\n          case 5:\n            throw b$2.invalidParameters;\n          case 6:\n            return [2];\n        }\n      });\n    });\n  }, a4;\n}(ko), He = function(n2) {\n  function t4(e3) {\n    var t5 = this, r2 = e3.channelUrl, a4 = e3.coverUrlOrImage, u3 = e3.name, c3 = e3.data, h4 = e3.customType, f2 = e3.operatorUserIds;\n    return (t5 = n2.call(this) || this).method = ae.PUT, t5.path = \"\".concat(fe, \"/\").concat(encodeURIComponent(r2)), t5.params = se(oe({ cover_url: S$1(\"string\", a4) ? a4 : null, cover_file: k(a4) ? a4 : null, name: u3, data: c3, custom_type: h4, operators: f2 })), t5;\n  }\n  return t$2(t4, n2), t4;\n}(Fe$2), Ie = function(n2) {\n  function t4(e3, t5) {\n    var r2 = n2.call(this, e3, t5) || this;\n    return r2.channel = new xe(e3, t5), r2;\n  }\n  return t$2(t4, n2), t4;\n}(qe$2), Oe = function(n2) {\n  function t4(e3) {\n    var t5 = this, r2 = e3.channelUrl;\n    return (t5 = n2.call(this) || this).method = ae.DELETE, t5.path = \"\".concat(fe, \"/\").concat(encodeURIComponent(r2)), t5;\n  }\n  return t$2(t4, n2), t4;\n}(Fe$2);\n!function(n2) {\n  function t4(e3, t5) {\n    return n2.call(this, e3, t5) || this;\n  }\n  t$2(t4, n2);\n}(qe$2);\nvar xe = function(r2) {\n  function o2(e3, n2) {\n    var t4, a4 = this;\n    return (a4 = r2.call(this, e3, n2) || this)._lastParticipantCountUpdated = 0, a4.participantCount = 0, a4.operators = [], a4.lastPinnedMessage = null, a4._pinnedMessagesUpdatedAt = 0, a4.channelType = H$1.OPEN, a4.participantCount = null !== (t4 = n2.participant_count) && void 0 !== t4 ? t4 : 0, a4.operators = Array.isArray(n2.operators) ? n2.operators.map(function(n3) {\n      return new ls$2(e3, n3);\n    }) : [], a4.lastPinnedMessage = n2.latest_pinned_message ? At$1(a4._iid, n$2({ channel_type: a4.channelType }, n2.latest_pinned_message)) : null, a4;\n  }\n  return t$2(o2, r2), o2.payloadify = function(e3) {\n    return se(oe(n$2(n$2({}, Ti.payloadify(e3)), { participant_count: e3.participantCount, operators: e3.operators.map(function(e4) {\n      return ls$2.payloadify(e4);\n    }), latest_pinned_message: e3.lastPinnedMessage ? Ut$1(e3.lastPinnedMessage) : null })));\n  }, o2.prototype.serialize = function() {\n    return os$2(this);\n  }, o2.prototype.isOperator = function(e3) {\n    return e3 instanceof ls$2 ? this.isOperator(e3.userId) : this.operators.some(function(n2) {\n      return n2.userId === e3;\n    });\n  }, o2.prototype._updateParticipantCount = function(e3, n2) {\n    return n2 > this._lastParticipantCountUpdated && (this.participantCount = e3, this._lastParticipantCountUpdated = n2, true);\n  }, o2.prototype.createParticipantListQuery = function(e3) {\n    return new De(this._iid, this.url, e3);\n  }, o2.prototype.refresh = function() {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(e3) {\n        switch (e3.label) {\n          case 0:\n            return [4, Pe.of(this._iid).getChannelWithoutCache(this.url)];\n          case 1:\n            return [2, e3.sent()];\n        }\n      });\n    });\n  }, o2.prototype.enter = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, n2, r3, a4, s4, i3;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, n2 = new me({ channelUrl: this.url }), [4, e3.send(n2)];\n          case 1:\n            return r3 = t4.sent(), a4 = r3.as(Ue), s4 = a4.participantCount, i3 = a4.ts, this._updateParticipantCount(s4, i3), Pe.of(this._iid).setEnteredToCache(this), [2];\n        }\n      });\n    });\n  }, o2.prototype.exit = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, n2, r3, a4, s4, i3;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, n2 = new Ee({ channelUrl: this.url }), [4, e3.send(n2)];\n          case 1:\n            return r3 = t4.sent(), a4 = r3.as(Me), s4 = a4.participantCount, i3 = a4.ts, this._updateParticipantCount(s4, i3), Pe.of(this._iid).setExitedToCache(this), la.of(this._iid).fileMessageQueue.cancel(this), [2];\n        }\n      });\n    });\n  }, o2.prototype.updateChannel = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, r3, o3, u3, l2;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return n2 = n$2(n$2({}, be), e3), cs$2(function(e4) {\n              return C$1(\"string\", e4.operatorUserIds, true) && (S$1(\"string\", e4.coverUrlOrImage, true) || k(e4.coverUrlOrImage, true)) && S$1(\"string\", e4.name, true) && S$1(\"string\", e4.data, true) && S$1(\"string\", e4.customType, true);\n            }(n2)).throw(b$2.invalidParameters), r3 = uo.of(this._iid).requestQueue, o3 = new He(n$2({ channelUrl: this.url }, n2)), [4, r3.send(o3)];\n          case 1:\n            return u3 = t4.sent(), l2 = u3.as(Ie).channel, this._update(l2), [4, Pe.of(this._iid).upsertChannelsToCache([l2])];\n          case 2:\n            return t4.sent(), [2, this];\n        }\n      });\n    });\n  }, o2.prototype.updateChannelWithOperatorUserIds = function(e3, r3, a4, s4, i3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(t4) {\n        return n2 = n$2(n$2({}, be), { name: e3, coverUrlOrImage: r3, data: a4, operatorUserIds: s4, customType: i3 }), [2, this.updateChannel(n2)];\n      });\n    });\n  }, o2.prototype.delete = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, n2;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return e3 = uo.of(this._iid).requestQueue, n2 = new Oe({ channelUrl: this.url }), [4, e3.send(n2)];\n          case 1:\n            return t4.sent(), [4, Pe.of(this._iid).removeChannelsFromCache([this.url])];\n          case 2:\n            return t4.sent(), [2];\n        }\n      });\n    });\n  }, o2.prototype.updateUserMessage = function(e3, a4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, s4, i3, o3 = this;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, r2.prototype.updateUserMessage.call(this, e3, a4)];\n          case 1:\n            return n2 = t4.sent(), s4 = false, i3 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === n2.messageId && (this.lastPinnedMessage = n2, s4 = true, i3 = true), s4 && Pe.of(this._iid).handlers.map(function(e4) {\n              e4.onChannelChanged && e4.onChannelChanged(o3);\n            }), i3 && Pe.of(this._iid).handlers.map(function(e4) {\n              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(o3);\n            }), [2, n2];\n        }\n      });\n    });\n  }, o2.prototype.updateFileMessage = function(e3, a4) {\n    return r$1(this, void 0, void 0, function() {\n      var n2, s4, i3, o3 = this;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return [4, r2.prototype.updateFileMessage.call(this, e3, a4)];\n          case 1:\n            return n2 = t4.sent(), s4 = false, i3 = false, this.lastPinnedMessage && this.lastPinnedMessage.messageId === n2.messageId && (this.lastPinnedMessage = n2, s4 = true, i3 = true), s4 && Pe.of(this._iid).handlers.map(function(e4) {\n              e4.onChannelChanged && e4.onChannelChanged(o3);\n            }), i3 && Pe.of(this._iid).handlers.map(function(e4) {\n              e4.onPinnedMessageUpdated && e4.onPinnedMessageUpdated(o3);\n            }), [2, n2];\n        }\n      });\n    });\n  }, o2;\n}(Ti);\n(function(n2) {\n  function t4(e3) {\n    void 0 === e3 && (e3 = {});\n    var t5 = n2.call(this) || this;\n    return Object.keys(e3).forEach(function(n3) {\n      t5.hasOwnProperty(n3) && (t5[n3] = e3[n3]);\n    }), t5;\n  }\n  return t$2(t4, n2), t4;\n})(function(n2) {\n  function t4() {\n    var e3 = null !== n2 && n2.apply(this, arguments) || this;\n    return e3.onUserEntered = ut$1, e3.onUserExited = ut$1, e3.onChannelParticipantCountChanged = ut$1, e3.onPollUpdated = ut$1, e3.onPollVoted = ut$1, e3.onPollDeleted = ut$1, e3.onPinnedMessageUpdated = ut$1, e3;\n  }\n  return t$2(t4, n2), t4;\n}(t$1));\nvar Re = function(n2) {\n  function t4(e3) {\n    var t5 = this, r2 = e3.token, a4 = e3.limit, s4 = e3.nameKeyword, i3 = e3.urlKeyword, u3 = e3.customTypes, c3 = e3.includeFrozen, h4 = e3.includeMetaData;\n    return (t5 = n2.call(this) || this).method = ae.GET, t5.path = fe, t5.params = se({ token: r2, limit: a4, name_contains: s4, url_contains: i3, custom_types: u3, show_frozen: c3, show_metadata: h4, show_pinned_messages: true }), t5;\n  }\n  return t$2(t4, n2), t4;\n}(Fe$2), Le = function(n2) {\n  function t4(e3, t5) {\n    var r2 = n2.call(this, e3, t5) || this;\n    r2.channels = [];\n    var a4 = t5.next, s4 = t5.channels, i3 = t5.ts;\n    return r2.token = a4, s4 && s4.length > 0 && (r2.channels = s4.map(function(n3) {\n      return new xe(e3, n3);\n    })), r2.ts = \"number\" == typeof i3 ? i3 : null, r2;\n  }\n  return t$2(t4, n2), t4;\n}(qe$2), Fe = function(r2) {\n  function i3(e3, n2) {\n    var t4, a4, s4, i4, o2, u3 = this;\n    return (u3 = r2.call(this, e3, n2) || this).includeFrozen = true, u3.includeMetaData = true, u3.nameKeyword = null, u3.urlKeyword = null, u3.customTypes = null, u3.includeFrozen = null === (t4 = n2.includeFrozen) || void 0 === t4 || t4, u3.includeMetaData = null === (a4 = n2.includeMetaData) || void 0 === a4 || a4, u3.nameKeyword = null !== (s4 = n2.nameKeyword) && void 0 !== s4 ? s4 : null, u3.urlKeyword = null !== (i4 = n2.urlKeyword) && void 0 !== i4 ? i4 : null, u3.customTypes = null !== (o2 = n2.customTypes) && void 0 !== o2 ? o2 : null, u3;\n  }\n  return t$2(i3, r2), i3.prototype._validate = function() {\n    return r2.prototype._validate.call(this) && S$1(\"boolean\", this.includeFrozen) && S$1(\"boolean\", this.includeMetaData) && S$1(\"string\", this.nameKeyword, true) && S$1(\"string\", this.urlKeyword, true) && C$1(\"string\", this.customTypes, true);\n  }, i3.prototype.next = function() {\n    return r$1(this, void 0, void 0, function() {\n      var e3, n2, r3, a4, s4, i4;\n      return s$1(this, function(t4) {\n        switch (t4.label) {\n          case 0:\n            return this._validate() ? this._isLoading ? [3, 4] : this._hasNext ? (this._isLoading = true, e3 = uo.of(this._iid).requestQueue, n2 = new Re(oe(n$2(n$2({}, this), { token: this._token }))), [4, e3.send(n2)]) : [3, 3] : [3, 6];\n          case 1:\n            return r3 = t4.sent(), a4 = r3.as(Le), s4 = a4.channels, i4 = a4.token, this._token = i4, this._hasNext = !!i4, [4, Pe.of(this._iid).upsertChannelsToCache(s4)];\n          case 2:\n            return t4.sent(), this._isLoading = false, [2, s4];\n          case 3:\n            return [2, []];\n          case 4:\n            throw b$2.queryInProgress;\n          case 5:\n            return [3, 7];\n          case 6:\n            throw b$2.invalidParameters;\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, i3;\n}(Oo), ke = function(r2) {\n  function a4() {\n    var e3 = null !== r2 && r2.apply(this, arguments) || this;\n    return e3.name = \"openChannel\", e3;\n  }\n  return t$2(a4, r2), a4.prototype.init = function(e3, n2) {\n    var t4 = n2.sdkState, a5 = n2.dispatcher, s4 = n2.sessionManager, i3 = n2.requestQueue, o2 = n2.logger, u3 = n2.onlineDetector, l2 = n2.cacheContext;\n    r2.prototype.init.call(this, e3, { sdkState: t4, dispatcher: a5, sessionManager: s4, requestQueue: i3, logger: o2, onlineDetector: u3, cacheContext: l2 }), this._manager = new Pe(e3, { sdkState: t4, dispatcher: a5, requestQueue: i3, logger: o2, cacheContext: l2, sessionManager: s4 });\n  }, a4.prototype.createOpenChannelListQuery = function(e3) {\n    return void 0 === e3 && (e3 = {}), new Fe(this._iid, e3);\n  }, a4.prototype.addOpenChannelHandler = function(e3, n2) {\n    this._manager.addHandler(e3, n2);\n  }, a4.prototype.removeOpenChannelHandler = function(e3) {\n    this._manager.removeHandler(e3);\n  }, a4.prototype.removeAllOpenChannelHandlers = function() {\n    this._manager.clearHandler();\n  }, a4.prototype.buildOpenChannelFromSerializedData = function(e3) {\n    return this._manager.buildOpenChannelFromSerializedData(e3);\n  }, a4.prototype.getChannel = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, this._manager.getChannel(e3)];\n      });\n    });\n  }, a4.prototype.getChannelWithoutCache = function(e3) {\n    return r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, this._manager.getChannelWithoutCache(e3)];\n      });\n    });\n  }, a4.prototype.createChannel = function(e3) {\n    return void 0 === e3 && (e3 = {}), r$1(this, void 0, void 0, function() {\n      return s$1(this, function(n2) {\n        return [2, this._manager.createChannel(e3)];\n      });\n    });\n  }, a4.prototype.createChannelWithOperatorUserIds = function(e3, r3, a5, s4, i3) {\n    return r$1(this, void 0, void 0, function() {\n      var n2;\n      return s$1(this, function(t4) {\n        return (n2 = n$2({}, ve)).name = e3, n2.coverUrlOrImage = r3, n2.data = a5, n2.operatorUserIds = s4, n2.customType = i3, [2, this._manager.createChannel(n2)];\n      });\n    });\n  }, a4;\n}(lo);\nvar updateAppInfoStore = function(state, payload) {\n  return __assign(__assign({}, state), { stores: __assign(__assign({}, state.stores), { appInfoStore: __assign(__assign({}, state.stores.appInfoStore), payload) }) });\n};\nvar updateSdkStore = function(state, payload) {\n  return __assign(__assign({}, state), { stores: __assign(__assign({}, state.stores), { sdkStore: __assign(__assign({}, state.stores.sdkStore), payload) }) });\n};\nvar updateUserStore = function(state, payload) {\n  return __assign(__assign({}, state), { stores: __assign(__assign({}, state.stores), { userStore: __assign(__assign({}, state.stores.userStore), payload) }) });\n};\nfunction initSDK(_a2) {\n  var appId = _a2.appId, customApiHost = _a2.customApiHost, customWebSocketHost = _a2.customWebSocketHost, _b2 = _a2.sdkInitParams, sdkInitParams = _b2 === void 0 ? {} : _b2;\n  var params = Object.assign(sdkInitParams, {\n    appId,\n    modules: [new $e(), new ke()],\n    // newInstance: isNewApp,\n    localCacheEnabled: true\n  });\n  if (customApiHost)\n    params.customApiHost = customApiHost;\n  if (customWebSocketHost)\n    params.customWebSocketHost = customWebSocketHost;\n  return Ln.init(params);\n}\nvar APP_VERSION_STRING = \"3.16.2\";\nfunction setupSDK(sdk, params) {\n  var _a2, _b2;\n  var logger = params.logger, sessionHandler = params.sessionHandler, isMobile = params.isMobile, customExtensionParams = params.customExtensionParams;\n  (_a2 = logger.info) === null || _a2 === void 0 ? void 0 : _a2.call(logger, \"SendbirdProvider | useConnect/setupConnection/setVersion\", { version: APP_VERSION_STRING });\n  sdk.addExtension(\"sb_uikit\", APP_VERSION_STRING);\n  sdk.addSendbirdExtensions([{ product: Ye$2.UIKIT_CHAT, version: APP_VERSION_STRING, platform: Xe$1 === null || Xe$1 === void 0 ? void 0 : Xe$1.JS }], { platform: isMobile ? Je$2.MOBILE_WEB : Je$2.WEB }, customExtensionParams);\n  if (sessionHandler) {\n    (_b2 = logger.info) === null || _b2 === void 0 ? void 0 : _b2.call(logger, \"SendbirdProvider | useConnect/setupConnection/configureSession\", sessionHandler);\n    sdk.setSessionHandler(sessionHandler);\n  }\n}\nvar NO_CONTEXT_ERROR = \"No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.\";\nvar useSendbird = function() {\n  var store = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(SendbirdContext);\n  if (!store)\n    throw new Error(NO_CONTEXT_ERROR);\n  var state = shimExports.useSyncExternalStore(store.subscribe, store.getState);\n  var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      /* Example: How to set the state basically */\n      // exampleAction: () => {\n      //   store.setState((state): SendbirdState => ({\n      //     ...state,\n      //     example: true,\n      //   })),\n      // },\n      /* AppInfo */\n      initMessageTemplateInfo: function(_a2) {\n        var payload = _a2.payload;\n        store.setState(function(state2) {\n          return updateAppInfoStore(state2, {\n            messageTemplatesInfo: payload,\n            waitingTemplateKeysMap: {}\n          });\n        });\n      },\n      upsertMessageTemplates: function(_a2) {\n        var payload = _a2.payload;\n        var appInfoStore = state.stores.appInfoStore;\n        var templatesInfo = appInfoStore.messageTemplatesInfo;\n        if (!templatesInfo)\n          return state;\n        var waitingTemplateKeysMap = __assign({}, appInfoStore.waitingTemplateKeysMap);\n        payload.forEach(function(templatesMapData) {\n          var key = templatesMapData.key, template = templatesMapData.template;\n          templatesInfo.templatesMap[key] = template;\n          delete waitingTemplateKeysMap[key];\n        });\n        store.setState(function(state2) {\n          return updateAppInfoStore(state2, {\n            waitingTemplateKeysMap,\n            messageTemplatesInfo: templatesInfo\n          });\n        });\n      },\n      upsertWaitingTemplateKeys: function(_a2) {\n        var payload = _a2.payload;\n        var appInfoStore = state.stores.appInfoStore;\n        var keys2 = payload.keys, requestedAt = payload.requestedAt;\n        var waitingTemplateKeysMap = __assign({}, appInfoStore.waitingTemplateKeysMap);\n        keys2.forEach(function(key) {\n          var _a3, _b2;\n          waitingTemplateKeysMap[key] = {\n            erroredMessageIds: (_b2 = (_a3 = waitingTemplateKeysMap[key]) === null || _a3 === void 0 ? void 0 : _a3.erroredMessageIds) !== null && _b2 !== void 0 ? _b2 : [],\n            requestedAt\n          };\n        });\n        store.setState(function(state2) {\n          return updateAppInfoStore(state2, {\n            waitingTemplateKeysMap\n          });\n        });\n      },\n      markErrorWaitingTemplateKeys: function(_a2) {\n        var payload = _a2.payload;\n        var appInfoStore = state.stores.appInfoStore;\n        var keys2 = payload.keys, messageId = payload.messageId;\n        var waitingTemplateKeysMap = __assign({}, appInfoStore.waitingTemplateKeysMap);\n        keys2.forEach(function(key) {\n          var waitingTemplateKeyData = waitingTemplateKeysMap[key];\n          if (waitingTemplateKeyData && waitingTemplateKeyData.erroredMessageIds.indexOf(messageId) === -1) {\n            waitingTemplateKeyData.erroredMessageIds.push(messageId);\n          }\n        });\n        store.setState(function(state2) {\n          return updateAppInfoStore(state2, {\n            waitingTemplateKeysMap\n          });\n        });\n      },\n      /* SDK */\n      setSdkLoading: function(payload) {\n        store.setState(function(state2) {\n          return updateSdkStore(state2, {\n            initialized: false,\n            loading: payload\n          });\n        });\n      },\n      sdkError: function() {\n        store.setState(function(state2) {\n          return updateSdkStore(state2, {\n            initialized: false,\n            loading: false,\n            error: true\n          });\n        });\n      },\n      initSdk: function(payload) {\n        store.setState(function(state2) {\n          return updateSdkStore(state2, {\n            sdk: payload,\n            initialized: true,\n            loading: false,\n            error: false\n          });\n        });\n      },\n      resetSdk: function() {\n        store.setState(function(state2) {\n          return updateSdkStore(state2, {\n            sdk: {},\n            initialized: false,\n            loading: false,\n            error: false\n          });\n        });\n      },\n      /* User */\n      initUser: function(payload) {\n        store.setState(function(state2) {\n          return updateUserStore(state2, {\n            initialized: true,\n            loading: false,\n            user: payload\n          });\n        });\n      },\n      resetUser: function() {\n        store.setState(function(state2) {\n          return updateUserStore(state2, {\n            initialized: false,\n            loading: false,\n            user: {}\n          });\n        });\n      },\n      updateUserInfo: function(payload) {\n        store.setState(function(state2) {\n          return updateUserStore(state2, {\n            user: payload\n          });\n        });\n      },\n      /* Connection */\n      connect: function(params) {\n        return __awaiter$5(void 0, void 0, void 0, function() {\n          var logger, userId, appId, accessToken, nickname, profileUrl, isMobile, sdkInitParams, customApiHost, customWebSocketHost, customExtensionParams, eventHandlers, initializeMessageTemplatesInfo, configureSession, initDashboardConfigs, sdk, user, error_1, sendbirdError;\n          var _a2, _b2, _c, _d, _e2;\n          return __generator(this, function(_f) {\n            switch (_f.label) {\n              case 0:\n                logger = params.logger, userId = params.userId, appId = params.appId, accessToken = params.accessToken, nickname = params.nickname, profileUrl = params.profileUrl, isMobile = params.isMobile, sdkInitParams = params.sdkInitParams, customApiHost = params.customApiHost, customWebSocketHost = params.customWebSocketHost, customExtensionParams = params.customExtensionParams, eventHandlers = params.eventHandlers, initializeMessageTemplatesInfo = params.initializeMessageTemplatesInfo, configureSession = params.configureSession, initDashboardConfigs = params.initDashboardConfigs;\n                return [4, actions.disconnect({ logger })];\n              case 1:\n                _f.sent();\n                sdk = initSDK({\n                  appId,\n                  customApiHost,\n                  customWebSocketHost,\n                  sdkInitParams\n                });\n                setupSDK(sdk, {\n                  logger,\n                  isMobile,\n                  customExtensionParams,\n                  sessionHandler: configureSession ? configureSession(sdk) : void 0\n                });\n                actions.setSdkLoading(true);\n                _f.label = 2;\n              case 2:\n                _f.trys.push([2, 8, , 9]);\n                return [4, sdk.connect(userId, accessToken)];\n              case 3:\n                user = _f.sent();\n                actions.initUser(user);\n                if (!(nickname || profileUrl)) return [3, 5];\n                return [4, sdk.updateCurrentUserInfo({\n                  nickname: nickname || user.nickname || \"\",\n                  profileUrl: profileUrl || user.profileUrl\n                })];\n              case 4:\n                _f.sent();\n                _f.label = 5;\n              case 5:\n                return [4, initializeMessageTemplatesInfo === null || initializeMessageTemplatesInfo === void 0 ? void 0 : initializeMessageTemplatesInfo(sdk)];\n              case 6:\n                _f.sent();\n                return [4, initDashboardConfigs === null || initDashboardConfigs === void 0 ? void 0 : initDashboardConfigs(sdk)];\n              case 7:\n                _f.sent();\n                actions.initSdk(sdk);\n                (_b2 = (_a2 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.connection) === null || _a2 === void 0 ? void 0 : _a2.onConnected) === null || _b2 === void 0 ? void 0 : _b2.call(_a2, user);\n                return [3, 9];\n              case 8:\n                error_1 = _f.sent();\n                sendbirdError = error_1;\n                actions.resetSdk();\n                actions.resetUser();\n                (_c = logger.error) === null || _c === void 0 ? void 0 : _c.call(logger, \"SendbirdProvider | useSendbird/connect failed\", sendbirdError);\n                (_e2 = (_d = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.connection) === null || _d === void 0 ? void 0 : _d.onFailed) === null || _e2 === void 0 ? void 0 : _e2.call(_d, sendbirdError);\n                return [3, 9];\n              case 9:\n                return [\n                  2\n                  /*return*/\n                ];\n            }\n          });\n        });\n      },\n      disconnect: function(_a2) {\n        return __awaiter$5(void 0, [_a2], void 0, function(_b2) {\n          var sdk;\n          var _c;\n          var logger = _b2.logger;\n          return __generator(this, function(_d) {\n            switch (_d.label) {\n              case 0:\n                actions.setSdkLoading(true);\n                sdk = state.stores.sdkStore.sdk;\n                if (!(sdk === null || sdk === void 0 ? void 0 : sdk.disconnectWebSocket)) return [3, 2];\n                return [4, sdk.disconnectWebSocket()];\n              case 1:\n                _d.sent();\n                _d.label = 2;\n              case 2:\n                actions.resetSdk();\n                actions.resetUser();\n                (_c = logger.info) === null || _c === void 0 ? void 0 : _c.call(logger, \"SendbirdProvider | useSendbird/disconnect completed\");\n                return [\n                  2\n                  /*return*/\n                ];\n            }\n          });\n        });\n      }\n    };\n  }, [store, state.stores.appInfoStore]);\n  return { state, actions };\n};\nvar UserProfileContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({\n  disableUserProfile: true,\n  isOpenChannel: false\n});\nvar useUserProfileContext = function() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(UserProfileContext);\n};\nvar UserProfileProvider = function(_a2) {\n  var _b2;\n  var _c = _a2.isOpenChannel, isOpenChannel = _c === void 0 ? false : _c, _d = _a2.disableUserProfile, _disableUserProfile = _d === void 0 ? false : _d, _renderUserProfile = _a2.renderUserProfile, _onUserProfileMessage = _a2.onUserProfileMessage, _onStartDirectMessage = _a2.onStartDirectMessage, children = _a2.children;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var onStartDirectMessage = (_b2 = _onStartDirectMessage !== null && _onStartDirectMessage !== void 0 ? _onStartDirectMessage : _onUserProfileMessage) !== null && _b2 !== void 0 ? _b2 : config2.onStartDirectMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfileContext.Provider, { value: {\n    isOpenChannel,\n    disableUserProfile: _disableUserProfile !== null && _disableUserProfile !== void 0 ? _disableUserProfile : !config2.common.enableUsingDefaultUserProfile,\n    renderUserProfile: _renderUserProfile !== null && _renderUserProfile !== void 0 ? _renderUserProfile : config2.renderUserProfile,\n    onStartDirectMessage,\n    /** legacy of onStartDirectMessage */\n    onUserProfileMessage: onStartDirectMessage\n  } }, children);\n};\nvar pubSubFactory = function(opts) {\n  var topics = {};\n  return {\n    __getTopics: function() {\n      return topics;\n    },\n    subscribe: function(topic, listener) {\n      var _a2;\n      (_a2 = topics[topic]) !== null && _a2 !== void 0 ? _a2 : topics[topic] = /* @__PURE__ */ new Set();\n      topics[topic].add(listener);\n      return {\n        remove: function() {\n          topics[topic].delete(listener);\n        }\n      };\n    },\n    publish: function(topic, info) {\n      if (topics[topic]) {\n        topics[topic].forEach(function(fn2) {\n          if (opts === null || opts === void 0 ? void 0 : opts.publishSynchronous) {\n            fn2(info !== void 0 ? info : {});\n          } else {\n            setTimeout(function() {\n              return fn2(info !== void 0 ? info : {});\n            }, 0);\n          }\n        });\n      }\n    }\n  };\n};\nvar MAX_USER_MENTION_COUNT = 10;\nvar MAX_USER_SUGGESTION_COUNT = 15;\nvar USER_MENTION_TEMP_CHAR = \"@\";\nvar UIKIT_COMPATIBLE_FORM_VERSION = 1;\nvar ThreadReplySelectType;\n(function(ThreadReplySelectType2) {\n  ThreadReplySelectType2[\"PARENT\"] = \"PARENT\";\n  ThreadReplySelectType2[\"THREAD\"] = \"THREAD\";\n})(ThreadReplySelectType || (ThreadReplySelectType = {}));\nfunction getComponentKeyFromMessage(message) {\n  if (\"sendingStatus\" in message) {\n    if (message.sendingStatus === \"succeeded\")\n      return String(message.messageId);\n    return message.reqId;\n  }\n  return String(message.messageId);\n}\nfunction isContextMenuClosed() {\n  var _a2, _b2;\n  return ((_a2 = document.getElementById(\"sendbird-dropdown-portal\")) === null || _a2 === void 0 ? void 0 : _a2.childElementCount) === 0 && ((_b2 = document.getElementById(\"sendbird-emoji-list-portal\")) === null || _b2 === void 0 ? void 0 : _b2.childElementCount) === 0;\n}\nfunction getMessageTopOffset(messageCreatedAt) {\n  var _a2;\n  var element2 = (_a2 = document.querySelectorAll('[data-sb-created-at=\"'.concat(messageCreatedAt, '\"]'))) === null || _a2 === void 0 ? void 0 : _a2[0];\n  if (element2 instanceof HTMLElement) {\n    return element2.offsetTop;\n  }\n  return null;\n}\nvar isDisabledBecauseFrozen$1 = function(groupChannel) {\n  if (!groupChannel)\n    return false;\n  return groupChannel.isFrozen && groupChannel.myRole !== \"operator\";\n};\nvar isDisabledBecauseMuted$1 = function(groupChannel) {\n  if (!groupChannel)\n    return false;\n  return groupChannel.myMutedState === \"muted\";\n};\nvar isDisabledBecauseSuggestedReplies = function(channel, enableSuggestedReplies) {\n  var _a2, _b2, _c, _d;\n  return enableSuggestedReplies && Array.isArray((_b2 = (_a2 = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _a2 === void 0 ? void 0 : _a2.extendedMessagePayload) === null || _b2 === void 0 ? void 0 : _b2.suggested_replies) && !!((_d = (_c = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _c === void 0 ? void 0 : _c.extendedMessagePayload) === null || _d === void 0 ? void 0 : _d.disable_chat_input);\n};\nvar isFormVersionCompatible = function(version) {\n  return version <= UIKIT_COMPATIBLE_FORM_VERSION;\n};\nvar isDisabledBecauseMessageForm = function(allMessages, enableFormTypeMessage) {\n  return enableFormTypeMessage && allMessages.some(function(message) {\n    var _a2;\n    return !!message.messageForm && !message.messageForm.isSubmitted && !!((_a2 = message.extendedMessagePayload) === null || _a2 === void 0 ? void 0 : _a2.disable_chat_input) && isFormVersionCompatible(message.messageForm.version);\n  });\n};\nfunction getIsReactionEnabled(_a2) {\n  var channel = _a2.channel, config2 = _a2.config, moduleLevel = _a2.moduleLevel;\n  if (!channel || channel.isBroadcast || channel.isEphemeral) {\n    return false;\n  }\n  if (channel.isSuper)\n    return moduleLevel !== null && moduleLevel !== void 0 ? moduleLevel : config2.groupChannel.enableReactionsSupergroup;\n  return moduleLevel !== null && moduleLevel !== void 0 ? moduleLevel : config2.groupChannel.enableReactions;\n}\nfunction getCaseResolvedReplyType(replyType) {\n  return {\n    lowerCase: replyType.toLowerCase(),\n    upperCase: replyType.toUpperCase()\n  };\n}\nfunction getCaseResolvedThreadReplySelectType(threadReplySelectType) {\n  return {\n    lowerCase: threadReplySelectType.toLowerCase(),\n    upperCase: threadReplySelectType.toUpperCase()\n  };\n}\nvar PublishingModuleType;\n(function(PublishingModuleType2) {\n  PublishingModuleType2[\"CHANNEL\"] = \"CHANNEL\";\n  PublishingModuleType2[\"THREAD\"] = \"THREAD\";\n})(PublishingModuleType || (PublishingModuleType = {}));\nvar isTargetIncludedInModules = function(target, modules) {\n  if (!modules || modules.length === 0)\n    return true;\n  else\n    return modules.includes(target);\n};\nfunction shouldPubSubPublishToChannel(modules) {\n  return isTargetIncludedInModules(PublishingModuleType.CHANNEL, modules);\n}\nfunction shouldPubSubPublishToThread(modules) {\n  return isTargetIncludedInModules(PublishingModuleType.THREAD, modules);\n}\nvar PUBSUB_TOPICS;\n(function(PUBSUB_TOPICS2) {\n  PUBSUB_TOPICS2[\"USER_UPDATED\"] = \"USER_UPDATED\";\n  PUBSUB_TOPICS2[\"SEND_MESSAGE_START\"] = \"SEND_MESSAGE_START\";\n  PUBSUB_TOPICS2[\"SEND_MESSAGE_FAILED\"] = \"SEND_MESSAGE_FAILED\";\n  PUBSUB_TOPICS2[\"SEND_USER_MESSAGE\"] = \"SEND_USER_MESSAGE\";\n  PUBSUB_TOPICS2[\"SEND_FILE_MESSAGE\"] = \"SEND_FILE_MESSAGE\";\n  PUBSUB_TOPICS2[\"ON_FILE_INFO_UPLOADED\"] = \"ON_FILE_INFO_UPLOADED\";\n  PUBSUB_TOPICS2[\"UPDATE_USER_MESSAGE\"] = \"UPDATE_USER_MESSAGE\";\n  PUBSUB_TOPICS2[\"DELETE_MESSAGE\"] = \"DELETE_MESSAGE\";\n  PUBSUB_TOPICS2[\"LEAVE_CHANNEL\"] = \"LEAVE_CHANNEL\";\n  PUBSUB_TOPICS2[\"CREATE_CHANNEL\"] = \"CREATE_CHANNEL\";\n  PUBSUB_TOPICS2[\"UPDATE_OPEN_CHANNEL\"] = \"UPDATE_OPEN_CHANNEL\";\n})(PUBSUB_TOPICS || (PUBSUB_TOPICS = {}));\nvar pubSubTopics = PUBSUB_TOPICS;\nfunction useDeepCompareMemoize(value) {\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(value);\n  if (!isEqual$1(value, ref.current)) {\n    ref.current = value;\n  }\n  return ref.current;\n}\nfunction useDeepCompareEffect(callback, dependencies) {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(callback, dependencies.map(useDeepCompareMemoize));\n}\nvar delay = function(ms2) {\n  return new Promise(function(resolve) {\n    setTimeout(resolve, ms2);\n  });\n};\nvar noop$4 = function() {\n};\nvar deleteNullish = function(obj) {\n  var cleaned = {};\n  Object.entries(obj).forEach(function(_a2) {\n    var key = _a2[0], value = _a2[1];\n    if (value !== void 0 && value !== null) {\n      cleaned[key] = value;\n    }\n  });\n  return cleaned;\n};\nfunction openURL(url) {\n  var safeURL = url;\n  if (safeURL) {\n    if (!safeURL.startsWith(\"http://\") && !safeURL.startsWith(\"https://\")) {\n      safeURL = \"https://\" + safeURL;\n    }\n    window.open(safeURL, \"_blank\", \"noopener,noreferrer\");\n  }\n}\nfunction classnames() {\n  var args = [];\n  for (var _i2 = 0; _i2 < arguments.length; _i2++) {\n    args[_i2] = arguments[_i2];\n  }\n  return args.filter(Boolean).join(\" \");\n}\nvar n = Symbol(\"@ts-pattern/matcher\"), t = \"@ts-pattern/anonymous-select-key\", e = function(n2) {\n  return Boolean(n2 && \"object\" == typeof n2);\n}, r = function(t4) {\n  return t4 && !!t4[n];\n}, u = function t2(u3, i3, c3) {\n  if (e(u3)) {\n    if (r(u3)) {\n      var o2 = u3[n]().match(i3), a4 = o2.matched, f2 = o2.selections;\n      return a4 && f2 && Object.keys(f2).forEach(function(n2) {\n        return c3(n2, f2[n2]);\n      }), a4;\n    }\n    if (!e(i3)) return false;\n    if (Array.isArray(u3)) return !!Array.isArray(i3) && u3.length === i3.length && u3.every(function(n2, e3) {\n      return t2(n2, i3[e3], c3);\n    });\n    if (u3 instanceof Map) return i3 instanceof Map && Array.from(u3.keys()).every(function(n2) {\n      return t2(u3.get(n2), i3.get(n2), c3);\n    });\n    if (u3 instanceof Set) {\n      if (!(i3 instanceof Set)) return false;\n      if (0 === u3.size) return 0 === i3.size;\n      if (1 === u3.size) {\n        var s4 = Array.from(u3.values())[0];\n        return r(s4) ? Array.from(i3.values()).every(function(n2) {\n          return t2(s4, n2, c3);\n        }) : i3.has(s4);\n      }\n      return Array.from(u3.values()).every(function(n2) {\n        return i3.has(n2);\n      });\n    }\n    return Object.keys(u3).every(function(e3) {\n      var o3, a5 = u3[e3];\n      return (e3 in i3 || r(o3 = a5) && \"optional\" === o3[n]().matcherType) && t2(a5, i3[e3], c3);\n    });\n  }\n  return Object.is(i3, u3);\n};\nfunction h(t4) {\n  var e3;\n  return (e3 = {})[n] = function() {\n    return { match: function(n2) {\n      return { matched: Boolean(t4(n2)) };\n    } };\n  }, e3;\n}\nh(function(n2) {\n  return true;\n});\nh(function(n2) {\n  return \"string\" == typeof n2;\n});\nh(function(n2) {\n  return \"number\" == typeof n2;\n});\nh(function(n2) {\n  return \"boolean\" == typeof n2;\n});\nh(function(n2) {\n  return \"bigint\" == typeof n2;\n});\nh(function(n2) {\n  return \"symbol\" == typeof n2;\n});\nh(function(n2) {\n  return null == n2;\n});\nfunction K(n2) {\n  return new O(n2, []);\n}\nvar O = /* @__PURE__ */ function() {\n  function n2(n3, t4) {\n    this.value = void 0, this.cases = void 0, this.value = n3, this.cases = t4;\n  }\n  var e3 = n2.prototype;\n  return e3.with = function() {\n    var e4 = [].slice.call(arguments), r2 = e4[e4.length - 1], i3 = [e4[0]], c3 = [];\n    return 3 === e4.length && \"function\" == typeof e4[1] ? (i3.push(e4[0]), c3.push(e4[1])) : e4.length > 2 && i3.push.apply(i3, e4.slice(1, e4.length - 1)), new n2(this.value, this.cases.concat([{ match: function(n3) {\n      var e5 = {}, r3 = Boolean(i3.some(function(t4) {\n        return u(t4, n3, function(n4, t5) {\n          e5[n4] = t5;\n        });\n      }) && c3.every(function(t4) {\n        return t4(n3);\n      }));\n      return { matched: r3, value: r3 && Object.keys(e5).length ? t in e5 ? e5[t] : e5 : n3 };\n    }, handler: r2 }]));\n  }, e3.when = function(t4, e4) {\n    return new n2(this.value, this.cases.concat([{ match: function(n3) {\n      return { matched: Boolean(t4(n3)), value: n3 };\n    }, handler: e4 }]));\n  }, e3.otherwise = function(t4) {\n    return new n2(this.value, this.cases.concat([{ match: function(n3) {\n      return { matched: true, value: n3 };\n    }, handler: t4 }])).run();\n  }, e3.exhaustive = function() {\n    return this.run();\n  }, e3.run = function() {\n    for (var n3 = this.value, t4 = void 0, e4 = 0; e4 < this.cases.length; e4++) {\n      var r2 = this.cases[e4], u3 = r2.match(this.value);\n      if (u3.matched) {\n        n3 = u3.value, t4 = r2.handler;\n        break;\n      }\n    }\n    if (!t4) {\n      var i3;\n      try {\n        i3 = JSON.stringify(this.value);\n      } catch (n4) {\n        i3 = this.value;\n      }\n      throw new Error(\"Pattern matching error: no pattern matches value \" + i3);\n    }\n    return t4(n3, this.value);\n  }, n2;\n}();\nvar pass = function(value) {\n  return value;\n};\nfunction useMessageActions(params) {\n  var _this = this;\n  var _a2 = params.onBeforeSendUserMessage, onBeforeSendUserMessage = _a2 === void 0 ? pass : _a2, _b2 = params.onBeforeSendFileMessage, onBeforeSendFileMessage = _b2 === void 0 ? pass : _b2, _c = params.onBeforeUpdateUserMessage, onBeforeUpdateUserMessage = _c === void 0 ? pass : _c, _d = params.onBeforeSendVoiceMessage, onBeforeSendVoiceMessage = _d === void 0 ? pass : _d, _e2 = params.onBeforeSendMultipleFilesMessage, onBeforeSendMultipleFilesMessage = _e2 === void 0 ? pass : _e2, sendFileMessage = params.sendFileMessage, sendMultipleFilesMessage = params.sendMultipleFilesMessage, sendUserMessage = params.sendUserMessage, updateUserMessage = params.updateUserMessage, updateFileMessage = params.updateFileMessage, resendMessage = params.resendMessage, deleteMessage = params.deleteMessage, resetNewMessages = params.resetNewMessages, scrollToBottom = params.scrollToBottom, quoteMessage = params.quoteMessage, replyType = params.replyType, currentChannel = params.currentChannel;\n  var _f = useSendbird().state, eventHandlers = _f.eventHandlers, pubSub = _f.config.pubSub;\n  var buildInternalMessageParams = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(basicParams) {\n    var messageParams = __assign({}, basicParams);\n    if (params.quoteMessage && replyType !== \"NONE\") {\n      messageParams.isReplyToChannel = true;\n      messageParams.parentMessageId = quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId;\n    }\n    return messageParams;\n  }, [replyType, quoteMessage]);\n  var asyncScrollToBottom = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    setTimeout(scrollToBottom, 0);\n  }, []);\n  var processParams = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(handler, params2, type) {\n    return __awaiter$5(_this, void 0, void 0, function() {\n      var result, error_1;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            _a3.trys.push([0, 2, , 3]);\n            return [4, handler(params2)];\n          case 1:\n            result = _a3.sent();\n            return [2, result === void 0 ? params2 : result];\n          case 2:\n            error_1 = _a3.sent();\n            if (typeof (eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.message) === \"object\") {\n              K(type).with(\"file\", \"voice\", function() {\n                var _a4, _b3, _c2, _d2;\n                if (params2.file) {\n                  (_b3 = (_a4 = eventHandlers.message).onFileUploadFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a4, error_1);\n                }\n                (_d2 = (_c2 = eventHandlers.message).onSendMessageFailed) === null || _d2 === void 0 ? void 0 : _d2.call(_c2, params2, error_1);\n              }).with(\"multipleFiles\", function() {\n                var _a4, _b3, _c2, _d2;\n                if (params2.fileInfoList) {\n                  (_b3 = (_a4 = eventHandlers.message).onFileUploadFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a4, error_1);\n                }\n                (_d2 = (_c2 = eventHandlers.message).onSendMessageFailed) === null || _d2 === void 0 ? void 0 : _d2.call(_c2, params2, error_1);\n              }).with(\"user\", function() {\n                var _a4, _b3;\n                (_b3 = (_a4 = eventHandlers.message).onSendMessageFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a4, params2, error_1);\n              }).with(\"update\", function() {\n                var _a4, _b3;\n                (_b3 = (_a4 = eventHandlers.message).onUpdateMessageFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a4, params2, error_1);\n              }).exhaustive();\n            }\n            throw error_1;\n          case 3:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [eventHandlers]);\n  return {\n    sendUserMessage: Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(params2) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var internalParams, processedParams;\n        return __generator(this, function(_a3) {\n          switch (_a3.label) {\n            case 0:\n              internalParams = buildInternalMessageParams(params2);\n              return [4, processParams(onBeforeSendUserMessage, internalParams, \"user\")];\n            case 1:\n              processedParams = _a3.sent();\n              return [2, sendUserMessage(processedParams, asyncScrollToBottom)];\n          }\n        });\n      });\n    }, [buildInternalMessageParams, sendUserMessage, scrollToBottom, processParams]),\n    sendFileMessage: Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(params2) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var internalParams, processedParams;\n        return __generator(this, function(_a3) {\n          switch (_a3.label) {\n            case 0:\n              internalParams = buildInternalMessageParams(params2);\n              return [4, processParams(onBeforeSendFileMessage, internalParams, \"file\")];\n            case 1:\n              processedParams = _a3.sent();\n              return [2, sendFileMessage(processedParams, asyncScrollToBottom)];\n          }\n        });\n      });\n    }, [buildInternalMessageParams, sendFileMessage, scrollToBottom, processParams]),\n    sendMultipleFilesMessage: Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(params2) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var internalParams, processedParams;\n        return __generator(this, function(_a3) {\n          switch (_a3.label) {\n            case 0:\n              internalParams = buildInternalMessageParams(params2);\n              return [4, processParams(onBeforeSendMultipleFilesMessage, internalParams, \"multipleFiles\")];\n            case 1:\n              processedParams = _a3.sent();\n              return [2, sendMultipleFilesMessage(processedParams, asyncScrollToBottom)];\n          }\n        });\n      });\n    }, [buildInternalMessageParams, sendMultipleFilesMessage, scrollToBottom, processParams]),\n    sendVoiceMessage: Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(params2, duration) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var internalParams, processedParams;\n        return __generator(this, function(_a3) {\n          switch (_a3.label) {\n            case 0:\n              internalParams = buildInternalMessageParams(__assign(__assign({}, params2), { fileName: VOICE_MESSAGE_FILE_NAME, mimeType: VOICE_MESSAGE_MIME_TYPE, metaArrays: [\n                new Ve$1({\n                  key: META_ARRAY_VOICE_DURATION_KEY,\n                  value: [\"\".concat(duration)]\n                }),\n                new Ve$1({\n                  key: META_ARRAY_MESSAGE_TYPE_KEY,\n                  value: [META_ARRAY_MESSAGE_TYPE_VALUE__VOICE]\n                })\n              ] }));\n              return [4, processParams(onBeforeSendVoiceMessage, internalParams, \"voice\")];\n            case 1:\n              processedParams = _a3.sent();\n              return [2, sendFileMessage(processedParams, asyncScrollToBottom)];\n          }\n        });\n      });\n    }, [buildInternalMessageParams, sendFileMessage, scrollToBottom, processParams]),\n    updateUserMessage: Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(messageId, params2) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var internalParams, processedParams;\n        return __generator(this, function(_a3) {\n          switch (_a3.label) {\n            case 0:\n              internalParams = buildInternalMessageParams(params2);\n              return [4, processParams(onBeforeUpdateUserMessage, internalParams, \"update\")];\n            case 1:\n              processedParams = _a3.sent();\n              return [2, updateUserMessage(messageId, processedParams).then(function(message) {\n                pubSub.publish(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, {\n                  channel: currentChannel,\n                  message,\n                  publishingModules: [PublishingModuleType.CHANNEL]\n                });\n                return message;\n              })];\n          }\n        });\n      });\n    }, [buildInternalMessageParams, updateUserMessage, processParams, currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]),\n    updateFileMessage,\n    resendMessage,\n    deleteMessage,\n    resetNewMessages\n  };\n}\nvar useGroupChannel = function() {\n  var _a2, _b2, _c;\n  var store = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(GroupChannelContext);\n  if (!store)\n    throw new Error(\"useGroupChannel must be used within a GroupChannelProvider\");\n  var config2 = useSendbird().state.config;\n  var markAsReadScheduler = config2.markAsReadScheduler;\n  var state = shimExports.useSyncExternalStore(store.subscribe, store.getState);\n  var setAnimatedMessageId = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(messageId) {\n    store.setState(function(state2) {\n      return __assign(__assign({}, state2), { animatedMessageId: messageId });\n    });\n  }, []);\n  var setIsScrollBottomReached = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(isReached) {\n    store.setState(function(state2) {\n      return __assign(__assign({}, state2), { isScrollBottomReached: isReached });\n    });\n  }, []);\n  var scrollToBottom = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(animated) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            if (!state.scrollRef.current)\n              return [\n                2\n                /*return*/\n              ];\n            setAnimatedMessageId(null);\n            setIsScrollBottomReached(true);\n            return [4, delay()];\n          case 1:\n            _a3.sent();\n            if (!(config2.isOnline && state.hasNext())) return [3, 3];\n            return [4, state.resetWithStartingPoint(Number.MAX_SAFE_INTEGER)];\n          case 2:\n            _a3.sent();\n            _a3.label = 3;\n          case 3:\n            state.scrollPubSub.publish(\"scrollToBottom\", { animated });\n            if (state.currentChannel && !state.hasNext()) {\n              state.resetNewMessages();\n              if (!state.disableMarkAsRead) {\n                markAsReadScheduler.push(state.currentChannel);\n              }\n            }\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [state.scrollRef.current, config2.isOnline, markAsReadScheduler]);\n  var scrollToMessage = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(createdAt, messageId, messageFocusAnimated, scrollAnimated) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var element2, parentNode, clickHandler, message, topOffset;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            element2 = state.scrollRef.current;\n            parentNode = element2 === null || element2 === void 0 ? void 0 : element2.parentNode;\n            clickHandler = {\n              activate: function() {\n                if (!element2 || !parentNode)\n                  return;\n                element2.style.pointerEvents = \"auto\";\n                parentNode.style.cursor = \"auto\";\n              },\n              deactivate: function() {\n                if (!element2 || !parentNode)\n                  return;\n                element2.style.pointerEvents = \"none\";\n                parentNode.style.cursor = \"wait\";\n              }\n            };\n            clickHandler.deactivate();\n            setAnimatedMessageId(null);\n            message = state.messages.find(function(it2) {\n              return it2.messageId === messageId || it2.createdAt === createdAt;\n            });\n            if (!message) return [3, 1];\n            topOffset = getMessageTopOffset(message.createdAt);\n            if (topOffset)\n              state.scrollPubSub.publish(\"scroll\", { top: topOffset, animated: scrollAnimated });\n            if (messageFocusAnimated !== null && messageFocusAnimated !== void 0 ? messageFocusAnimated : true)\n              setAnimatedMessageId(messageId);\n            return [3, 3];\n          case 1:\n            return [4, state.resetWithStartingPoint(createdAt)];\n          case 2:\n            _a3.sent();\n            setTimeout(function() {\n              var topOffset2 = getMessageTopOffset(createdAt);\n              if (topOffset2) {\n                state.scrollPubSub.publish(\"scroll\", {\n                  top: topOffset2,\n                  lazy: false,\n                  animated: scrollAnimated\n                });\n              }\n              if (messageFocusAnimated !== null && messageFocusAnimated !== void 0 ? messageFocusAnimated : true)\n                setAnimatedMessageId(messageId);\n            });\n            _a3.label = 3;\n          case 3:\n            clickHandler.activate();\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [setAnimatedMessageId, state.scrollRef.current, (_a2 = state.messages) === null || _a2 === void 0 ? void 0 : _a2.map(function(it2) {\n    return it2 === null || it2 === void 0 ? void 0 : it2.messageId;\n  })]);\n  var toggleReaction = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(message, emojiKey, isReacted) {\n    if (!state.currentChannel)\n      return;\n    if (isReacted) {\n      state.currentChannel.deleteReaction(message, emojiKey).catch(function(error) {\n        var _a3;\n        (_a3 = config2.logger) === null || _a3 === void 0 ? void 0 : _a3.warning(\"Failed to delete reaction:\", error);\n      });\n    } else {\n      state.currentChannel.addReaction(message, emojiKey).catch(function(error) {\n        var _a3;\n        (_a3 = config2.logger) === null || _a3 === void 0 ? void 0 : _a3.warning(\"Failed to add reaction:\", error);\n      });\n    }\n  }, [(_b2 = state.currentChannel) === null || _b2 === void 0 ? void 0 : _b2.deleteReaction, (_c = state.currentChannel) === null || _c === void 0 ? void 0 : _c.addReaction]);\n  var messageActions = useMessageActions(__assign(__assign({}, state), { scrollToBottom }));\n  var setCurrentChannel = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(channel) {\n    store.setState(function(state2) {\n      return __assign(__assign({}, state2), { currentChannel: channel, fetchChannelError: null, quoteMessage: null, animatedMessageId: null, nicknamesMap: new Map(channel.members.map(function(_a3) {\n        var userId = _a3.userId, nickname = _a3.nickname;\n        return [userId, nickname];\n      })) });\n    }, true);\n  }, []);\n  var handleChannelError = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(error) {\n    store.setState(function(state2) {\n      return __assign(__assign({}, state2), { currentChannel: null, fetchChannelError: error, quoteMessage: null, animatedMessageId: null });\n    });\n  }, []);\n  var setQuoteMessage = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(message) {\n    store.setState(function(state2) {\n      return __assign(__assign({}, state2), { quoteMessage: message });\n    });\n  }, []);\n  var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return __assign({ setCurrentChannel, handleChannelError, setQuoteMessage, scrollToBottom, scrollToMessage, toggleReaction, setAnimatedMessageId, setIsScrollBottomReached }, messageActions);\n  }, [\n    setCurrentChannel,\n    handleChannelError,\n    setQuoteMessage,\n    scrollToBottom,\n    scrollToMessage,\n    toggleReaction,\n    setAnimatedMessageId,\n    setIsScrollBottomReached,\n    messageActions\n  ]);\n  return { state, actions };\n};\nfunction useMessageListScroll(behavior, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n  var scrollRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var scrollPositionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(0);\n  var scrollDistanceFromBottomRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(0);\n  var scrollPubSub = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(function() {\n    return pubSubFactory({ publishSynchronous: true });\n  })[0];\n  var setIsScrollBottomReached = useGroupChannel().actions.setIsScrollBottomReached;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    scrollPositionRef.current = 0;\n    scrollDistanceFromBottomRef.current = 0;\n    setIsScrollBottomReached(true);\n    if (scrollRef.current)\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n  }, deps);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    var unsubscribes = [];\n    unsubscribes.push(scrollPubSub.subscribe(\"scrollToBottom\", function(_a2) {\n      var resolve = _a2.resolve, animated = _a2.animated;\n      runCallback(function() {\n        if (!scrollRef.current) {\n          if (resolve)\n            resolve();\n          return;\n        }\n        if (scrollRef.current.scroll) {\n          scrollRef.current.scroll({ top: scrollRef.current.scrollHeight, behavior: getScrollBehavior(behavior, animated) });\n        } else {\n          scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n        }\n        scrollDistanceFromBottomRef.current = 0;\n        setIsScrollBottomReached(true);\n        if (resolve)\n          resolve();\n      });\n    }));\n    unsubscribes.push(scrollPubSub.subscribe(\"scroll\", function(_a2) {\n      var top = _a2.top, animated = _a2.animated, lazy = _a2.lazy, resolve = _a2.resolve;\n      runCallback(function() {\n        if (!scrollRef.current)\n          return;\n        var _a3 = scrollRef.current, scrollTop = _a3.scrollTop, scrollHeight = _a3.scrollHeight, clientHeight = _a3.clientHeight;\n        if (scrollRef.current.scroll) {\n          scrollRef.current.scroll({ top, behavior: getScrollBehavior(behavior, animated) });\n        } else if (typeof top === \"number\") {\n          scrollRef.current.scrollTop = top;\n        }\n        scrollDistanceFromBottomRef.current = Math.max(0, scrollHeight - scrollTop - clientHeight);\n        setIsScrollBottomReached(scrollDistanceFromBottomRef.current === 0);\n        if (resolve)\n          resolve();\n      }, lazy);\n    }));\n    return function() {\n      unsubscribes.forEach(function(_a2) {\n        var remove2 = _a2.remove;\n        return remove2();\n      });\n    };\n  }, [behavior]);\n  return {\n    scrollRef,\n    scrollPubSub,\n    scrollDistanceFromBottomRef,\n    scrollPositionRef\n  };\n}\nfunction runCallback(callback, lazy) {\n  if (lazy === void 0) {\n    lazy = true;\n  }\n  if (lazy) {\n    setTimeout(function() {\n      callback();\n    });\n  } else {\n    callback();\n  }\n}\nfunction getScrollBehavior(behavior, animated) {\n  if (typeof animated === \"boolean\")\n    return animated ? \"smooth\" : \"auto\";\n  return behavior;\n}\nvar initialState$2 = {\n  currentChannel: null,\n  channelUrl: \"\",\n  fetchChannelError: null,\n  nicknamesMap: /* @__PURE__ */ new Map(),\n  messages: [],\n  quoteMessage: null,\n  animatedMessageId: null,\n  isScrollBottomReached: true,\n  scrollRef: { current: null },\n  scrollDistanceFromBottomRef: { current: 0 },\n  scrollPositionRef: { current: 0 },\n  messageInputRef: { current: null },\n  isReactionEnabled: false,\n  isMessageGroupingEnabled: true,\n  isMultipleFilesMessageEnabled: false,\n  showSearchIcon: true,\n  replyType: \"NONE\",\n  threadReplySelectType: ThreadReplySelectType.PARENT,\n  disableMarkAsRead: false,\n  scrollBehavior: \"auto\",\n  scrollPubSub: null\n};\nvar GroupChannelContext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])(null);\nvar createGroupChannelStore = function(props) {\n  return createStore(__assign(__assign({}, initialState$2), props));\n};\nvar InternalGroupChannelProvider = function(props) {\n  var children = props.children;\n  var defaultProps = deleteNullish({\n    channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl,\n    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,\n    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,\n    onUserProfileMessage: props === null || props === void 0 ? void 0 : props.onUserProfileMessage,\n    onStartDirectMessage: props === null || props === void 0 ? void 0 : props.onStartDirectMessage,\n    isReactionEnabled: props === null || props === void 0 ? void 0 : props.isReactionEnabled,\n    isMessageGroupingEnabled: props === null || props === void 0 ? void 0 : props.isMessageGroupingEnabled,\n    isMultipleFilesMessageEnabled: props === null || props === void 0 ? void 0 : props.isMultipleFilesMessageEnabled,\n    showSearchIcon: props === null || props === void 0 ? void 0 : props.showSearchIcon,\n    threadReplySelectType: props === null || props === void 0 ? void 0 : props.threadReplySelectType,\n    disableMarkAsRead: props === null || props === void 0 ? void 0 : props.disableMarkAsRead,\n    scrollBehavior: props === null || props === void 0 ? void 0 : props.scrollBehavior,\n    forceLeftToRightMessageLayout: props === null || props === void 0 ? void 0 : props.forceLeftToRightMessageLayout,\n    startingPoint: props === null || props === void 0 ? void 0 : props.startingPoint,\n    animatedMessageId: props === null || props === void 0 ? void 0 : props.animatedMessageId,\n    onMessageAnimated: props === null || props === void 0 ? void 0 : props.onMessageAnimated,\n    messageListQueryParams: props === null || props === void 0 ? void 0 : props.messageListQueryParams,\n    filterEmojiCategoryIds: props === null || props === void 0 ? void 0 : props.filterEmojiCategoryIds,\n    onBeforeSendUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendUserMessage,\n    onBeforeSendFileMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendFileMessage,\n    onBeforeSendVoiceMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendVoiceMessage,\n    onBeforeSendMultipleFilesMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendMultipleFilesMessage,\n    onBeforeUpdateUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeUpdateUserMessage,\n    onBeforeDownloadFileMessage: props === null || props === void 0 ? void 0 : props.onBeforeDownloadFileMessage,\n    onBackClick: props === null || props === void 0 ? void 0 : props.onBackClick,\n    onChatHeaderActionClick: props === null || props === void 0 ? void 0 : props.onChatHeaderActionClick,\n    onReplyInThreadClick: props === null || props === void 0 ? void 0 : props.onReplyInThreadClick,\n    onSearchClick: props === null || props === void 0 ? void 0 : props.onSearchClick,\n    onQuoteMessageClick: props === null || props === void 0 ? void 0 : props.onQuoteMessageClick,\n    renderUserMentionItem: props === null || props === void 0 ? void 0 : props.renderUserMentionItem\n  });\n  var storeRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(createGroupChannelStore(defaultProps));\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelContext.Provider, { value: storeRef.current }, children);\n};\nvar GroupChannelManager = function(props) {\n  var _a2, _b2, _c;\n  var channelUrl = props.channelUrl, children = props.children, moduleReactionEnabled = props.isReactionEnabled, moduleReplyType = props.replyType, moduleThreadReplySelectType = props.threadReplySelectType, _d = props.isMessageGroupingEnabled, isMessageGroupingEnabled = _d === void 0 ? true : _d, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, showSearchIcon = props.showSearchIcon, _e2 = props.disableMarkAsRead, disableMarkAsRead = _e2 === void 0 ? false : _e2, _f = props.scrollBehavior, scrollBehavior = _f === void 0 ? \"auto\" : _f, startingPoint = props.startingPoint, _animatedMessageId = props.animatedMessageId, messageListQueryParams = props.messageListQueryParams, onBeforeSendUserMessage = props.onBeforeSendUserMessage, onBeforeSendFileMessage = props.onBeforeSendFileMessage, onBeforeSendVoiceMessage = props.onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage = props.onBeforeSendMultipleFilesMessage, onBeforeUpdateUserMessage = props.onBeforeUpdateUserMessage, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, onMessageAnimated = props.onMessageAnimated, onBackClick = props.onBackClick, onChatHeaderActionClick = props.onChatHeaderActionClick, onReplyInThreadClick = props.onReplyInThreadClick, onSearchClick = props.onSearchClick, onQuoteMessageClick = props.onQuoteMessageClick, renderUserMentionItem = props.renderUserMentionItem, filterEmojiCategoryIds = props.filterEmojiCategoryIds;\n  var _g2 = useGroupChannel(), state = _g2.state, actions = _g2.actions;\n  var updateState = useGroupChannelStore().updateState;\n  var _h = useSendbird().state, config2 = _h.config, stores2 = _h.stores;\n  var sdkStore = stores2.sdkStore;\n  var markAsReadScheduler = config2.markAsReadScheduler, logger = config2.logger, pubSub = config2.pubSub;\n  var _j = useMessageListScroll(scrollBehavior, [(_a2 = state.currentChannel) === null || _a2 === void 0 ? void 0 : _a2.url]), scrollRef = _j.scrollRef, scrollPubSub = _j.scrollPubSub, scrollDistanceFromBottomRef = _j.scrollDistanceFromBottomRef, scrollPositionRef = _j.scrollPositionRef;\n  var isScrollBottomReached = state.isScrollBottomReached;\n  var resolvedReplyType = getCaseResolvedReplyType(moduleReplyType !== null && moduleReplyType !== void 0 ? moduleReplyType : config2.groupChannel.replyType).upperCase;\n  var resolvedThreadReplySelectType = getCaseResolvedThreadReplySelectType(moduleThreadReplySelectType !== null && moduleThreadReplySelectType !== void 0 ? moduleThreadReplySelectType : config2.groupChannel.threadReplySelectType).upperCase;\n  var replyType = getCaseResolvedReplyType(moduleReplyType !== null && moduleReplyType !== void 0 ? moduleReplyType : config2.groupChannel.replyType).upperCase;\n  var resolvedIsReactionEnabled = getIsReactionEnabled({\n    channel: state.currentChannel,\n    config: config2,\n    moduleLevel: moduleReactionEnabled\n  });\n  var chatReplyType = useIIFE(function() {\n    if (replyType === \"NONE\")\n      return Q.NONE;\n    return Q.ONLY_REPLY_TO_CHANNEL;\n  });\n  var messageDataSource = useGroupChannelMessages(sdkStore.sdk, state.currentChannel, {\n    startingPoint,\n    replyType: chatReplyType,\n    collectionCreator: getCollectionCreator$1(state.currentChannel, messageListQueryParams),\n    shouldCountNewMessages: function() {\n      return !isScrollBottomReached;\n    },\n    markAsRead: function(channels) {\n      if (isScrollBottomReached && !disableMarkAsRead) {\n        channels.forEach(function(it2) {\n          return markAsReadScheduler.push(it2);\n        });\n      }\n    },\n    onMessagesReceived: function(messages) {\n      if (isScrollBottomReached && isContextMenuClosed() && messages.length !== state.messages.length) {\n        setTimeout(function() {\n          return actions.scrollToBottom(true);\n        }, 10);\n      }\n    },\n    onChannelDeleted: function() {\n      actions.setCurrentChannel(null);\n      onBackClick === null || onBackClick === void 0 ? void 0 : onBackClick();\n    },\n    onCurrentUserBanned: function() {\n      actions.setCurrentChannel(null);\n      onBackClick === null || onBackClick === void 0 ? void 0 : onBackClick();\n    },\n    onChannelUpdated: function(channel) {\n      actions.setCurrentChannel(channel);\n    },\n    logger\n  });\n  useAsyncEffect(function() {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var channel, error_1;\n      var _a3;\n      return __generator(this, function(_b3) {\n        switch (_b3.label) {\n          case 0:\n            if (!(sdkStore.initialized && channelUrl)) return [3, 4];\n            _b3.label = 1;\n          case 1:\n            _b3.trys.push([1, 3, , 4]);\n            return [4, sdkStore.sdk.groupChannel.getChannel(channelUrl)];\n          case 2:\n            channel = _b3.sent();\n            actions.setCurrentChannel(channel);\n            return [3, 4];\n          case 3:\n            error_1 = _b3.sent();\n            actions.handleChannelError(error_1);\n            (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"GroupChannelProvider: error when fetching channel\", error_1);\n            return [3, 4];\n          case 4:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [sdkStore.initialized, sdkStore.sdk, channelUrl]);\n  useAsyncLayoutEffect(function() {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var handleExternalMessage, subscriptions;\n      return __generator(this, function(_a3) {\n        if (messageDataSource.initialized) {\n          actions.scrollToBottom();\n        }\n        handleExternalMessage = function(data) {\n          var _a4;\n          if (data.channel.url === ((_a4 = state.currentChannel) === null || _a4 === void 0 ? void 0 : _a4.url)) {\n            actions.scrollToBottom(true);\n          }\n        };\n        if ((pubSub === null || pubSub === void 0 ? void 0 : pubSub.subscribe) === void 0)\n          return [\n            2\n            /*return*/\n          ];\n        subscriptions = [\n          config2.pubSub.subscribe(pubSubTopics.SEND_USER_MESSAGE, handleExternalMessage),\n          config2.pubSub.subscribe(pubSubTopics.SEND_FILE_MESSAGE, handleExternalMessage)\n        ];\n        return [2, function() {\n          subscriptions.forEach(function(subscription) {\n            return subscription.remove();\n          });\n        }];\n      });\n    });\n  }, [messageDataSource.initialized, (_b2 = state.currentChannel) === null || _b2 === void 0 ? void 0 : _b2.url]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (typeof startingPoint === \"number\") {\n      actions.scrollToMessage(startingPoint, 0, false, false);\n    }\n  }, [startingPoint]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (_animatedMessageId) {\n      actions.setAnimatedMessageId(_animatedMessageId);\n    }\n  }, [_animatedMessageId]);\n  var eventHandlers = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      onBeforeSendUserMessage,\n      onBeforeSendFileMessage,\n      onBeforeSendVoiceMessage,\n      onBeforeSendMultipleFilesMessage,\n      onBeforeUpdateUserMessage,\n      onBeforeDownloadFileMessage,\n      onBackClick,\n      onChatHeaderActionClick,\n      onReplyInThreadClick,\n      onSearchClick,\n      onQuoteMessageClick,\n      onMessageAnimated\n    };\n  }, [\n    onBeforeSendUserMessage,\n    onBeforeSendFileMessage,\n    onBeforeSendVoiceMessage,\n    onBeforeSendMultipleFilesMessage,\n    onBeforeUpdateUserMessage,\n    onBeforeDownloadFileMessage,\n    onBackClick,\n    onChatHeaderActionClick,\n    onReplyInThreadClick,\n    onSearchClick,\n    onQuoteMessageClick,\n    onMessageAnimated\n  ]);\n  var renderProps = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      renderUserMentionItem,\n      filterEmojiCategoryIds\n    };\n  }, [renderUserMentionItem, filterEmojiCategoryIds]);\n  var configurations = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      isReactionEnabled: resolvedIsReactionEnabled,\n      isMessageGroupingEnabled,\n      isMultipleFilesMessageEnabled,\n      replyType: resolvedReplyType,\n      threadReplySelectType: resolvedThreadReplySelectType,\n      showSearchIcon: showSearchIcon !== null && showSearchIcon !== void 0 ? showSearchIcon : config2.groupChannelSettings.enableMessageSearch,\n      disableMarkAsRead,\n      scrollBehavior\n    };\n  }, [\n    resolvedIsReactionEnabled,\n    isMessageGroupingEnabled,\n    isMultipleFilesMessageEnabled,\n    resolvedReplyType,\n    resolvedThreadReplySelectType,\n    showSearchIcon,\n    disableMarkAsRead,\n    scrollBehavior,\n    config2.groupChannelSettings.enableMessageSearch\n  ]);\n  var scrollState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      scrollRef,\n      scrollPubSub,\n      scrollDistanceFromBottomRef,\n      scrollPositionRef,\n      isScrollBottomReached\n    };\n  }, [\n    scrollRef,\n    scrollPubSub,\n    scrollDistanceFromBottomRef,\n    scrollPositionRef,\n    isScrollBottomReached\n  ]);\n  useDeepCompareEffect(function() {\n    updateState(__assign(__assign(__assign(__assign(__assign({\n      // Channel state\n      channelUrl,\n      currentChannel: state.currentChannel\n    }, configurations), scrollState), eventHandlers), renderProps), messageDataSource));\n  }, [\n    channelUrl,\n    (_c = state.currentChannel) === null || _c === void 0 ? void 0 : _c.serialize(),\n    configurations,\n    scrollState,\n    eventHandlers,\n    renderProps,\n    messageDataSource.initialized,\n    messageDataSource.loading,\n    messageDataSource.messages.map(function(it2) {\n      return it2.serialize();\n    })\n  ]);\n  return children;\n};\nvar GroupChannelProvider = function(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    InternalGroupChannelProvider,\n    __assign({}, props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      GroupChannelManager,\n      __assign({}, props),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfileProvider, __assign({}, props), props.children)\n    )\n  );\n};\nvar useGroupChannelStore = function() {\n  return useStore(GroupChannelContext, function(state) {\n    return state;\n  }, initialState$2);\n};\nvar useGroupChannelContext = function() {\n  var _a2 = useGroupChannel(), state = _a2.state, actions = _a2.actions;\n  return __assign(__assign({}, state), actions);\n};\nfunction getCollectionCreator$1(groupChannel, messageListQueryParams) {\n  return function(defaultParams) {\n    var params = __assign(__assign(__assign({}, defaultParams), { prevResultLimit: 30, nextResultLimit: 30 }), messageListQueryParams);\n    return groupChannel.createMessageCollection(__assign(__assign({}, params), { filter: new qs$1(params) }));\n  };\n}\nvar stringSet = {\n  en: {\n    // Group Channel - Conversation\n    MESSAGE_STATUS__YESTERDAY: \"Yesterday\",\n    CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE: \"new message(s) since\",\n    /** @deprecated Please use `DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE` instead * */\n    CHANNEL__MESSAGE_LIST__NOTIFICATION__ON: \"on\",\n    // Channel List\n    CHANNEL_PREVIEW_MOBILE_LEAVE: \"Leave channel\",\n    // Group Channel - Settings\n    CHANNEL_SETTING__HEADER__TITLE: \"Channel information\",\n    CHANNEL_SETTING__PROFILE__EDIT: \"Edit\",\n    CHANNEL_SETTING__MEMBERS__TITLE: \"Members\",\n    CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS: \"All members\",\n    CHANNEL_SETTING__MEMBERS__INVITE_MEMBER: \"Invite users\",\n    CHANNEL_SETTING__MEMBERS__YOU: \" (You)\",\n    CHANNEL_SETTING__MEMBERS__SELECT_TITLE: \"Select members\",\n    CHANNEL_SETTING__MEMBERS__OPERATOR: \"Operator\",\n    CHANNEL_SETTING__LEAVE_CHANNEL__TITLE: \"Leave channel\",\n    CHANNEL_SETTING__OPERATORS__TITLE: \"Operators\",\n    CHANNEL_SETTING__OPERATORS__TITLE_ALL: \"All operators\",\n    CHANNEL_SETTING__OPERATORS__TITLE_ADD: \"Add operator\",\n    CHANNEL_SETTING__OPERATORS__ADD_BUTTON: \"Add\",\n    CHANNEL_SETTING__MUTED_MEMBERS__TITLE: \"Muted members\",\n    CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL: \"All muted members\",\n    CHANNEL_SETTING__NO_UNMUTED: \"No muted members yet\",\n    CHANNEL_SETTING__BANNED_MEMBERS__TITLE: \"Banned users\",\n    CHANNEL_SETTING__FREEZE_CHANNEL: \"Freeze Channel\",\n    CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: \"Register as operator\",\n    CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: \"Unregister operator\",\n    CHANNEL_SETTING__MODERATION__MUTE: \"Mute\",\n    CHANNEL_SETTING__MODERATION__UNMUTE: \"Unmute\",\n    CHANNEL_SETTING__MODERATION__BAN: \"Ban\",\n    CHANNEL_SETTING__MODERATION__UNBAN: \"Unban\",\n    CHANNEL_SETTING__MODERATION__EMPTY_BAN: \"No banned members yet\",\n    CHANNEL_SETTING__MODERATION__ALL_BAN: \"All banned members\",\n    // OpenChannel - Conversation\n    OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS: \"participants\",\n    OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS: \"Select participants\",\n    // OpenChannelList\n    OPEN_CHANNEL_LIST__TITLE: \"Channels\",\n    CREATE_OPEN_CHANNEL_LIST__TITLE: \"New channel profile\",\n    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION: \"Channel image\",\n    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD: \"Upload\",\n    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION: \"Channel name\",\n    CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER: \"Enter channel name\",\n    CREATE_OPEN_CHANNEL_LIST__SUBMIT: \"Create\",\n    // OpenChannel - Settings\n    OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE: \"Channel Information\",\n    OPEN_CHANNEL_SETTINGS__OPERATOR_URL: \"URL\",\n    OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE: \"Participants\",\n    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL: \"Delete channel\",\n    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE: \"Delete channel?\",\n    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT: \"Once deleted, this channel can't be restored.\",\n    OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT: \"Delete\",\n    OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE: \"Operators\",\n    OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD: \"Add operator\",\n    OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL: \"All operators\",\n    OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE: \"Muted participants\",\n    OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL: \"All muted participants\",\n    OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE: \"No muted participants yet\",\n    OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE: \"Banned users\",\n    OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL: \"All banned users\",\n    OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE: \"No banned users yet\",\n    OPEN_CHANNEL_SETTINGS__MEMBERS__YOU: \" (You)\",\n    OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR: \"Operator\",\n    OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE: \"Participants\",\n    OPEN_CHANNEL_SETTINGS__EMPTY_LIST: \"No participants yet\",\n    OPEN_CHANNEL_SETTINGS__SEE_ALL: \"See all participants\",\n    OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE: \"All participants\",\n    OPEN_CHANNEL_SETTINGS__NO_TITLE: \"(No title)\",\n    OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: \"Register as operator\",\n    OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: \"Unregister operator\",\n    OPEN_CHANNEL_SETTING__MODERATION__MUTE: \"Mute\",\n    OPEN_CHANNEL_SETTING__MODERATION__UNMUTE: \"Unmute\",\n    OPEN_CHANNEL_SETTING__MODERATION__BAN: \"Ban\",\n    OPEN_CHANNEL_SETTING__MODERATION__UNBAN: \"Unban\",\n    // Channel - Common\n    TRYING_TO_CONNECT: \"Trying to connect\",\n    TYPING_INDICATOR__IS_TYPING: \"is typing...\",\n    TYPING_INDICATOR__AND: \"and\",\n    TYPING_INDICATOR__ARE_TYPING: \"are typing...\",\n    TYPING_INDICATOR__MULTIPLE_TYPING: \"Several people are typing...\",\n    CHANNEL_FROZEN: \"Channel frozen\",\n    PLACE_HOLDER__NO_CHANNEL: \"No channels\",\n    PLACE_HOLDER__WRONG: \"Something went wrong\",\n    PLACE_HOLDER__RETRY_TO_CONNECT: \"Retry\",\n    PLACE_HOLDER__NO_MESSAGES: \"No messages\",\n    TOOLTIP__AND_YOU: \", and you\",\n    TOOLTIP__YOU: \"you\",\n    TOOLTIP__UNKNOWN_USER: \"(no name)\",\n    UNKNOWN__UNKNOWN_MESSAGE_TYPE: \"(Unknown message type)\",\n    UNKNOWN__CANNOT_READ_MESSAGE: \"Cannot read this message.\",\n    UNKNOWN__TEMPLATE_ERROR: \"(Template error)\",\n    FORM_VERSION_ERROR: \"Form type messages are not available in this version.\",\n    UNKNOWN__CANNOT_READ_TEMPLATE: \"Cannot read this template.\",\n    MESSAGE_EDITED: \"(edited)\",\n    // Channel - Modal\n    MODAL__DELETE_MESSAGE__TITLE: \"Delete this message?\",\n    MODAL__CHANNEL_INFORMATION__TITLE: \"Edit channel information\",\n    MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE: \"Channel image\",\n    MODAL__CHANNEL_INFORMATION__UPLOAD: \"Upload\",\n    MODAL__CHANNEL_INFORMATION__CHANNEL_NAME: \"Channel name\",\n    MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER: \"Enter name\",\n    MODAL__INVITE_MEMBER__TITLE: \"Invite member\",\n    MODAL__INVITE_MEMBER__SELECTED: \"selected\",\n    MODAL__CHOOSE_CHANNEL_TYPE__TITLE: \"New channel\",\n    MODAL__CHOOSE_CHANNEL_TYPE__GROUP: \"Group\",\n    MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP: \"Super group\",\n    MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST: \"Broadcast\",\n    MODAL__CREATE_CHANNEL__TITLE: \"New channel\",\n    MODAL__CREATE_CHANNEL__GROUP: \"Group\",\n    MODAL__CREATE_CHANNEL__SUPER: \"Super group\",\n    MODAL__CREATE_CHANNEL__BROADCAST: \"Broadcast\",\n    MODAL__CREATE_CHANNEL__SELECTED: \"selected\",\n    MODAL__LEAVE_CHANNEL__TITLE: \"Leave this channel?\",\n    MODAL__LEAVE_CHANNEL__FOOTER: \"Leave\",\n    MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED: \"You're muted by the operator.\",\n    MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN: \"Channel is frozen.\",\n    // User Profile\n    USER_PROFILE__MESSAGE: \"Message\",\n    USER_PROFILE__USER_ID: \"User ID\",\n    EDIT_PROFILE__TITLE: \"My profile\",\n    EDIT_PROFILE__IMAGE_LABEL: \"Profile image\",\n    EDIT_PROFILE__IMAGE_UPLOAD: \"Upload\",\n    EDIT_PROFILE__NICKNAME_LABEL: \"Nickname\",\n    EDIT_PROFILE__NICKNAME_PLACEHOLDER: \"Enter your nickname\",\n    EDIT_PROFILE__USERID_LABEL: \"User ID\",\n    EDIT_PROFILE__THEME_LABEL: \"Dark theme\",\n    // Message Input\n    MESSAGE_INPUT__PLACE_HOLDER: \"Enter message\",\n    MESSAGE_INPUT__PLACE_HOLDER__DISABLED: \"Chat is unavailable in this channel\",\n    MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES: \"Please choose one from above\",\n    MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM: \"Please fill out the message form.\",\n    MESSAGE_INPUT__PLACE_HOLDER__FROZEN: \"Chat is unavailable in this channel\",\n    MESSAGE_INPUT__PLACE_HOLDER__MUTED: \"Chat is unavailable because you're muted\",\n    MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT: \"You're muted\",\n    MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER: \"Reply to message\",\n    // Common UI\n    BUTTON__SUBMIT: \"Submit\",\n    BUTTON__CANCEL: \"Cancel\",\n    BUTTON__DELETE: \"Delete\",\n    BUTTON__SAVE: \"Save\",\n    BUTTON__CREATE: \"Create\",\n    BUTTON__INVITE: \"Invite\",\n    BUTTON__OK: \"OK\",\n    BADGE__OVER: \"+\",\n    NO_TITLE: \"No title\",\n    NO_NAME: \"(No name)\",\n    NO_MEMBERS: \"(No members)\",\n    LABEL__OPERATOR: \"Operator\",\n    // Context Menu\n    MESSAGE_MENU__COPY: \"Copy\",\n    MESSAGE_MENU__REPLY: \"Reply\",\n    MESSAGE_MENU__THREAD: \"Reply in thread\",\n    MESSAGE_MENU__OPEN_IN_CHANNEL: \"Open in channel\",\n    MESSAGE_MENU__EDIT: \"Edit\",\n    MESSAGE_MENU__RESEND: \"Resend\",\n    MESSAGE_MENU__DELETE: \"Delete\",\n    MESSAGE_MENU__SAVE: \"Save\",\n    //  * FIXME: get back legacy, remove after refactoring open channel messages *\n    CONTEXT_MENU_DROPDOWN__COPY: \"Copy\",\n    CONTEXT_MENU_DROPDOWN__EDIT: \"Edit\",\n    CONTEXT_MENU_DROPDOWN__RESEND: \"Resend\",\n    CONTEXT_MENU_DROPDOWN__DELETE: \"Delete\",\n    CONTEXT_MENU_DROPDOWN__SAVE: \"Save\",\n    // Feature - Message Search\n    SEARCH: \"Search\",\n    SEARCH_IN_CHANNEL: \"Search in channel\",\n    SEARCH_IN: \"Search in\",\n    SEARCHING: \"Searching for messages...\",\n    NO_SEARCHED_MESSAGE: \"No results found.\",\n    // Feature - Message Reply\n    QUOTE_MESSAGE_INPUT__REPLY_TO: \"Reply to\",\n    QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE: \"Photo\",\n    QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF: \"GIF\",\n    QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO: \"Video\",\n    QUOTED_MESSAGE__REPLIED_TO: \"replied to\",\n    QUOTED_MESSAGE__CURRENT_USER: \"You\",\n    QUOTED_MESSAGE__UNAVAILABLE: \"Message unavailable\",\n    // Feature - Thread\n    THREAD__HEADER_TITLE: \"Thread\",\n    CHANNEL__THREAD_REPLY: \"reply\",\n    CHANNEL__THREAD_REPLIES: \"replies\",\n    CHANNEL__THREAD_OVER_MAX: \"99+\",\n    THREAD__THREAD_REPLY: \"reply\",\n    THREAD__THREAD_REPLIES: \"replies\",\n    THREAD__INPUT__REPLY_TO_THREAD: \"Reply to thread\",\n    THREAD__INPUT__REPLY_IN_THREAD: \"Reply in thread\",\n    // Feature - Mention\n    MENTION_NAME__NO_NAME: \"(No name)\",\n    MENTION_COUNT__OVER_LIMIT: \"You can mention up to %d times at a time.\",\n    UI__FILE_VIEWER__UNSUPPORT: \"Unsupported message\",\n    // Feature - Voice Message\n    VOICE_RECORDING_PERMISSION_DENIED: \"You cannot record the voice since\\n        voice recording is not permitted in your device system setting\",\n    VOICE_MESSAGE: \"Voice Message\",\n    // Channel preview last message file type display strings\n    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF: \"GIF\",\n    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO: \"Photo\",\n    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO: \"Video\",\n    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO: \"Audio\",\n    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE: \"Voice message\",\n    CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL: \"File\",\n    CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE: \"Message\",\n    // Date format\n    DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE: \"p 'on' MMM dd\",\n    DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR: \"MMMM dd, yyyy\",\n    DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR: \"MMM dd, yyyy\",\n    DATE_FORMAT__MESSAGE_CREATED_AT: \"p\",\n    DATE_FORMAT__UNREAD_SINCE: \"p MMM dd\",\n    DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY: \"p\",\n    DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR: \"MMM d\",\n    DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR: \"yyyy/M/d\",\n    // File upload\n    FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT: \"Up to %d files can be attached.\",\n    FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT: \"The maximum size per file is %d MB.\",\n    // Feedback button text\n    FEEDBACK_LIKE: \"Like\",\n    FEEDBACK_DISLIKE: \"Dislike\",\n    // Mobile feedback options menu items\n    EDIT_COMMENT: \"Edit comment\",\n    REMOVE_FEEDBACK: \"Remove Feedback\",\n    // Feedback modal title\n    FEEDBACK_MODAL_TITLE: \"Provide additional feedback (optional)\",\n    FEEDBACK_CONTENT_PLACEHOLDER: \"Leave a comment\",\n    BUTTON__REMOVE_FEEDBACK: \"Remove feedback\",\n    // Feedback failed modal title\n    FEEDBACK_FAILED_SUBMIT: \"Couldnt submit. Try again.\",\n    FEEDBACK_FAILED_SAVE: \"Couldnt save. Try again.\",\n    FEEDBACK_FAILED_DELETE: \"Couldnt delete. Try again.\",\n    // Form submit failed error messages\n    FORM_ITEM_REQUIRED: \"This field is required\",\n    FORM_ITEM_INVALID: \"Please check the value\",\n    FORM_ITEM_OPTIONAL_EMPTY: \"No Response\"\n  }\n};\nvar getStringSet = function(lang) {\n  return stringSet[lang];\n};\nvar Typography = {\n  H_1: \"H_1\",\n  H_2: \"H_2\",\n  SUBTITLE_1: \"SUBTITLE_1\",\n  SUBTITLE_2: \"SUBTITLE_2\",\n  BODY_1: \"BODY_1\",\n  BODY_2: \"BODY_2\",\n  BUTTON_1: \"BUTTON_1\",\n  BUTTON_2: \"BUTTON_2\",\n  BUTTON_3: \"BUTTON_3\",\n  CAPTION_1: \"CAPTION_1\",\n  CAPTION_2: \"CAPTION_2\",\n  CAPTION_3: \"CAPTION_3\"\n};\nvar Colors$2 = {\n  ONBACKGROUND_1: \"ONBACKGROUND_1\",\n  ONBACKGROUND_2: \"ONBACKGROUND_2\",\n  ONBACKGROUND_3: \"ONBACKGROUND_3\",\n  ONBACKGROUND_4: \"ONBACKGROUND_4\",\n  ONCONTENT_1: \"ONCONTENT_1\",\n  ONCONTENT_2: \"ONCONTENT_2\",\n  ONCONTENT_3: \"ONCONTENT_3\",\n  ONCONTENT_INVERSE_1: \"ONCONTENT_INVERSE_1\",\n  ONCONTENT_INVERSE_3: \"ONCONTENT_INVERSE_3\",\n  PRIMARY: \"PRIMARY\",\n  ERROR: \"ERROR\",\n  SECONDARY_3: \"SECONDARY_3\"\n};\nfunction changeTypographyToClassName(type) {\n  switch (type) {\n    case Typography.H_1:\n      return \"sendbird-label--h-1\";\n    case Typography.H_2:\n      return \"sendbird-label--h-2\";\n    case Typography.SUBTITLE_1:\n      return \"sendbird-label--subtitle-1\";\n    case Typography.SUBTITLE_2:\n      return \"sendbird-label--subtitle-2\";\n    case Typography.BODY_1:\n      return \"sendbird-label--body-1\";\n    case Typography.BODY_2:\n      return \"sendbird-label--body-2\";\n    case Typography.BUTTON_1:\n      return \"sendbird-label--button-1\";\n    case Typography.BUTTON_2:\n      return \"sendbird-label--button-2\";\n    case Typography.BUTTON_3:\n      return \"sendbird-label--button-3\";\n    case Typography.CAPTION_1:\n      return \"sendbird-label--caption-1\";\n    case Typography.CAPTION_2:\n      return \"sendbird-label--caption-2\";\n    case Typography.CAPTION_3:\n      return \"sendbird-label--caption-3\";\n    default:\n      return \"\";\n  }\n}\nfunction changeColorToClassName$2(color2) {\n  switch (color2) {\n    case Colors$2.ONBACKGROUND_1:\n      return \"sendbird-label--color-onbackground-1\";\n    case Colors$2.ONBACKGROUND_2:\n      return \"sendbird-label--color-onbackground-2\";\n    case Colors$2.ONBACKGROUND_3:\n      return \"sendbird-label--color-onbackground-3\";\n    case Colors$2.ONBACKGROUND_4:\n      return \"sendbird-label--color-onbackground-4\";\n    case Colors$2.ONCONTENT_1:\n      return \"sendbird-label--color-oncontent-1\";\n    case Colors$2.ONCONTENT_2:\n      return \"sendbird-label--color-oncontent-2\";\n    case Colors$2.ONCONTENT_3:\n      return \"sendbird-label--color-oncontent-3\";\n    case Colors$2.ONCONTENT_INVERSE_1:\n      return \"sendbird-label--color-oncontent-inverse-1\";\n    case Colors$2.ONCONTENT_INVERSE_3:\n      return \"sendbird-label--color-oncontent-inverse-3\";\n    case Colors$2.PRIMARY:\n      return \"sendbird-label--color-primary\";\n    case Colors$2.ERROR:\n      return \"sendbird-label--color-error\";\n    case Colors$2.SECONDARY_3:\n      return \"sendbird-label--color-secondary-3\";\n    default:\n      return \"\";\n  }\n}\nvar Label = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"forwardRef\"])(function(_a2, ref) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? [] : _b2, type = _a2.type, color2 = _a2.color, _c = _a2.children, children = _c === void 0 ? null : _c, testID = _a2.testID;\n  return (\n    // Donot make this into div\n    // Mention uses Label. If we use div, it would break the mention detection on Paste\n    // https://github.com/sendbird/sendbird-uikit-react/pull/479\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-label\",\n      changeTypographyToClassName(type),\n      changeColorToClassName$2(color2)\n    ], false).join(\" \"), ref, \"data-testid\": testID }, children)\n  );\n});\nvar LabelTypography = Typography;\nvar LabelColors = Colors$2;\nvar LabelStringSet = getStringSet(\"en\");\nvar formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\"\n  },\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\"\n  },\n  halfAMinute: \"half a minute\",\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\"\n  },\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\"\n  },\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\"\n  },\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\"\n  },\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\"\n  },\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\"\n  },\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\"\n  },\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\"\n  },\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\"\n  },\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\"\n  },\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\"\n  },\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\"\n  },\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\"\n  }\n};\nvar formatDistance = function formatDistance2(token, count, options) {\n  var result;\n  var tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n  if (options !== null && options !== void 0 && options.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n  return result;\n};\nfunction buildFormatLongFn(args) {\n  return function() {\n    var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    var width = options.width ? String(options.width) : args.defaultWidth;\n    var format2 = args.formats[width] || args.formats[args.defaultWidth];\n    return format2;\n  };\n}\nvar dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\"\n};\nvar timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\"\n};\nvar dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\"\n};\nvar formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\"\n  }),\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\"\n  }),\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\"\n  })\n};\nvar formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\"\n};\nvar formatRelative = function formatRelative2(token, _date, _baseDate, _options) {\n  return formatRelativeLocale[token];\n};\nfunction buildLocalizeFn(args) {\n  return function(dirtyIndex, options) {\n    var context = options !== null && options !== void 0 && options.context ? String(options.context) : \"standalone\";\n    var valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;\n      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      var _defaultWidth = args.defaultWidth;\n      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;\n      valuesArray = args.values[_width] || args.values[_defaultWidth];\n    }\n    var index2 = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;\n    return valuesArray[index2];\n  };\n}\nvar eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"]\n};\nvar quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"]\n};\nvar monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n  wide: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n};\nvar dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n};\nvar dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  }\n};\nvar formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  }\n};\nvar ordinalNumber = function ordinalNumber2(dirtyNumber, _options) {\n  var number2 = Number(dirtyNumber);\n  var rem100 = number2 % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number2 + \"st\";\n      case 2:\n        return number2 + \"nd\";\n      case 3:\n        return number2 + \"rd\";\n    }\n  }\n  return number2 + \"th\";\n};\nvar localize = {\n  ordinalNumber,\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\"\n  }),\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: function argumentCallback(quarter) {\n      return quarter - 1;\n    }\n  }),\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\"\n  }),\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\"\n  }),\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\"\n  })\n};\nfunction buildMatchFn(args) {\n  return function(string2) {\n    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    var width = options.width;\n    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n    var matchResult = string2.match(matchPattern);\n    if (!matchResult) {\n      return null;\n    }\n    var matchedString = matchResult[0];\n    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function(pattern) {\n      return pattern.test(matchedString);\n    }) : findKey(parsePatterns, function(pattern) {\n      return pattern.test(matchedString);\n    });\n    var value;\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    var rest = string2.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}\nfunction findKey(object, predicate) {\n  for (var key in object) {\n    if (object.hasOwnProperty(key) && predicate(object[key])) {\n      return key;\n    }\n  }\n  return void 0;\n}\nfunction findIndex(array, predicate) {\n  for (var key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return void 0;\n}\nfunction buildMatchPatternFn(args) {\n  return function(string2) {\n    var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    var matchResult = string2.match(args.matchPattern);\n    if (!matchResult) return null;\n    var matchedString = matchResult[0];\n    var parseResult = string2.match(args.parsePattern);\n    if (!parseResult) return null;\n    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    var rest = string2.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}\nvar matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nvar parseOrdinalNumberPattern = /\\d+/i;\nvar matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nvar parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\nvar matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nvar parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\nvar matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nvar parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\nvar matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nvar parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\nvar matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nvar parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\nvar match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: function valueCallback(value) {\n      return parseInt(value, 10);\n    }\n  }),\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: function valueCallback2(index2) {\n      return index2 + 1;\n    }\n  }),\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\"\n  })\n};\nvar locale = {\n  code: \"en-US\",\n  formatDistance,\n  formatLong,\n  formatRelative,\n  localize,\n  match,\n  options: {\n    weekStartsOn: 0,\n    firstWeekContainsDate: 1\n  }\n};\nvar LocalizationContextDefault = {\n  stringSet: getStringSet(\"en\"),\n  dateLocale: locale\n};\nvar LocalizationContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(LocalizationContextDefault);\nvar LocalizationProvider = function(props) {\n  var children = props.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LocalizationContext.Provider, { value: __assign(__assign({}, LocalizationContextDefault), props) }, children);\n};\nvar useLocalization = function() {\n  var context = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(LocalizationContext);\n  if (!context) {\n    throw new Error(\"`useLocalization` hook must be used within `SendbirdProvider` that includes `LocalizationProvider`.\");\n  }\n  return context;\n};\nvar uuidv4 = function() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c3) {\n    var r2 = Math.random() * 16 | 0;\n    var v2 = c3 === \"x\" ? r2 : r2 & 3 | 8;\n    return v2.toString(16);\n  });\n};\nvar TypingIndicatorText = function(_a2) {\n  var members = _a2.members;\n  function getText() {\n    var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n    if (!members || members.length === 0) {\n      return \"\";\n    }\n    if (members && members.length === 1) {\n      return \"\".concat(members[0].nickname, \" \").concat(stringSet2.TYPING_INDICATOR__IS_TYPING);\n    }\n    if (members && members.length === 2) {\n      return \"\".concat(members[0].nickname, \" \").concat(stringSet2.TYPING_INDICATOR__AND, \" \").concat(members[1].nickname, \" \").concat(stringSet2.TYPING_INDICATOR__ARE_TYPING);\n    }\n    return stringSet2.TYPING_INDICATOR__MULTIPLE_TYPING;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, getText());\n};\nvar TypingIndicator = function(_a2) {\n  var _b2, _c, _d;\n  var channelUrl = _a2.channelUrl;\n  var state = useSendbird().state;\n  var sb = (_c = (_b2 = state === null || state === void 0 ? void 0 : state.stores) === null || _b2 === void 0 ? void 0 : _b2.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;\n  var logger = (_d = state === null || state === void 0 ? void 0 : state.config) === null || _d === void 0 ? void 0 : _d.logger;\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(uuidv4()), handlerId = _e2[0], setHandlerId = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), typingMembers = _f[0], setTypingMembers = _f[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3;\n    if ((_a3 = sb === null || sb === void 0 ? void 0 : sb.groupChannel) === null || _a3 === void 0 ? void 0 : _a3.addGroupChannelHandler) {\n      sb.groupChannel.removeGroupChannelHandler(handlerId);\n      var newHandlerId = uuidv4();\n      var handler = new Ye({\n        onTypingStatusUpdated: function(groupChannel) {\n          logger.info(\"Channel > Typing Indicator: onTypingStatusUpdated\", groupChannel);\n          if (groupChannel.url === channelUrl) {\n            var members = groupChannel.getTypingUsers();\n            setTypingMembers(members);\n          }\n        }\n      });\n      sb.groupChannel.addGroupChannelHandler(newHandlerId, handler);\n      setHandlerId(newHandlerId);\n    }\n    return function() {\n      var _a4;\n      setTypingMembers([]);\n      if ((_a4 = sb === null || sb === void 0 ? void 0 : sb.groupChannel) === null || _a4 === void 0 ? void 0 : _a4.removeGroupChannelHandler) {\n        sb.groupChannel.removeGroupChannelHandler(handlerId);\n      }\n    };\n  }, [channelUrl]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Label,\n    { className: \"sendbird-conversation__footer__typing-indicator__text\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingIndicatorText, { members: typingMembers })\n  );\n};\nvar TypingIndicatorType;\n(function(TypingIndicatorType2) {\n  TypingIndicatorType2[\"Text\"] = \"text\";\n  TypingIndicatorType2[\"Bubble\"] = \"bubble\";\n})(TypingIndicatorType || (TypingIndicatorType = {}));\nvar Types = {\n  ADD: \"ADD\",\n  ARROW_LEFT: \"ARROW_LEFT\",\n  ATTACH: \"ATTACH\",\n  AUDIO_ON_LINED: \"AUDIO_ON_LINED\",\n  BAN: \"BAN\",\n  BROADCAST: \"BROADCAST\",\n  CAMERA: \"CAMERA\",\n  CHANNELS: \"CHANNELS\",\n  CHAT: \"CHAT\",\n  CHAT_FILLED: \"CHAT_FILLED\",\n  CHEVRON_DOWN: \"CHEVRON_DOWN\",\n  CHEVRON_RIGHT: \"CHEVRON_RIGHT\",\n  CLOSE: \"CLOSE\",\n  COLLAPSE: \"COLLAPSE\",\n  COPY: \"COPY\",\n  CREATE: \"CREATE\",\n  DELETE: \"DELETE\",\n  DISCONNECTED: \"DISCONNECTED\",\n  DOCUMENT: \"DOCUMENT\",\n  DONE: \"DONE\",\n  DONE_ALL: \"DONE_ALL\",\n  DOWNLOAD: \"DOWNLOAD\",\n  EDIT: \"EDIT\",\n  EMOJI_MORE: \"EMOJI_MORE\",\n  ERROR: \"ERROR\",\n  EXPAND: \"EXPAND\",\n  FILE_AUDIO: \"FILE_AUDIO\",\n  FILE_DOCUMENT: \"FILE_DOCUMENT\",\n  FREEZE: \"FREEZE\",\n  GIF: \"GIF\",\n  INFO: \"INFO\",\n  LEAVE: \"LEAVE\",\n  MEMBERS: \"MEMBERS\",\n  MESSAGE: \"MESSAGE\",\n  MODERATIONS: \"MODERATIONS\",\n  MORE: \"MORE\",\n  MUTE: \"MUTE\",\n  NOTIFICATIONS: \"NOTIFICATIONS\",\n  NOTIFICATIONS_OFF_FILLED: \"NOTIFICATIONS_OFF_FILLED\",\n  OPERATOR: \"OPERATOR\",\n  PHOTO: \"PHOTO\",\n  PLAY: \"PLAY\",\n  PLUS: \"PLUS\",\n  QUESTION: \"QUESTION\",\n  REFRESH: \"REFRESH\",\n  REPLY: \"REPLY\",\n  REMOVE: \"REMOVE\",\n  SEARCH: \"SEARCH\",\n  SEND: \"SEND\",\n  SETTINGS_FILLED: \"SETTINGS_FILLED\",\n  SLIDE_LEFT: \"SLIDE_LEFT\",\n  SPINNER: \"SPINNER\",\n  SUPERGROUP: \"SUPERGROUP\",\n  THREAD: \"THREAD\",\n  THUMBNAIL_NONE: \"THUMBNAIL_NONE\",\n  TOGGLE_OFF: \"TOGGLE_OFF\",\n  TOGGLE_ON: \"TOGGLE_ON\",\n  USER: \"USER\",\n  FEEDBACK_LIKE: \"FEEDBACK_LIKE\",\n  FEEDBACK_DISLIKE: \"FEEDBACK_DISLIKE\"\n};\nvar Colors$1 = {\n  DEFAULT: \"DEFAULT\",\n  PRIMARY: \"PRIMARY\",\n  PRIMARY_2: \"PRIMARY_2\",\n  SECONDARY: \"SECONDARY\",\n  SECONDARY_2: \"SECONDARY_2\",\n  CONTENT: \"CONTENT\",\n  CONTENT_INVERSE: \"CONTENT_INVERSE\",\n  CONTENT_INVERSE_3: \"CONTENT_INVERSE_3\",\n  WHITE: \"WHITE\",\n  GRAY: \"GRAY\",\n  THUMBNAIL_ICON: \"THUMBNAIL_ICON\",\n  SENT: \"SENT\",\n  READ: \"READ\",\n  ON_BACKGROUND_1: \"ON_BACKGROUND_1\",\n  ON_BACKGROUND_2: \"ON_BACKGROUND_2\",\n  ON_BACKGROUND_3: \"ON_BACKGROUND_3\",\n  ON_BACKGROUND_4: \"ON_BACKGROUND_4\",\n  BACKGROUND_3: \"BACKGROUND_3\",\n  ERROR: \"ERROR\"\n};\nfunction changeColorToClassName$1(color2) {\n  switch (color2) {\n    case Colors$1.PRIMARY:\n      return \"sendbird-icon-color--primary\";\n    case Colors$1.PRIMARY_2:\n      return \"sendbird-icon-color--primary-2\";\n    case Colors$1.SECONDARY:\n      return \"sendbird-icon-color--secondary\";\n    case Colors$1.SECONDARY_2:\n      return \"sendbird-icon-color--secondary-2\";\n    case Colors$1.CONTENT:\n      return \"sendbird-icon-color--content\";\n    case Colors$1.CONTENT_INVERSE:\n      return \"sendbird-icon-color--content-inverse\";\n    case Colors$1.CONTENT_INVERSE_3:\n      return \"sendbird-icon-color--content-inverse-3\";\n    case Colors$1.WHITE:\n      return \"sendbird-icon-color--white\";\n    case Colors$1.GRAY:\n      return \"sendbird-icon-color--gray\";\n    case Colors$1.THUMBNAIL_ICON:\n      return \"sendbird-icon-color--thumbnail-icon\";\n    case Colors$1.SENT:\n      return \"sendbird-icon-color--sent\";\n    case Colors$1.READ:\n      return \"sendbird-icon-color--read\";\n    case Colors$1.ON_BACKGROUND_1:\n      return \"sendbird-icon-color--on-background-1\";\n    case Colors$1.ON_BACKGROUND_2:\n      return \"sendbird-icon-color--on-background-2\";\n    case Colors$1.ON_BACKGROUND_3:\n      return \"sendbird-icon-color--on-background-3\";\n    case Colors$1.ON_BACKGROUND_4:\n      return \"sendbird-icon-color--on-background-4\";\n    case Colors$1.BACKGROUND_3:\n      return \"sendbird-icon-color--background-3\";\n    case Colors$1.ERROR:\n      return \"sendbird-icon-color--error\";\n    default:\n      return \"\";\n  }\n}\nfunction changeTypeToIconClassName(type) {\n  switch (type) {\n    case Types.ADD:\n      return \"sendbird-icon-add\";\n    case Types.ARROW_LEFT:\n      return \"sendbird-icon-arrow-left\";\n    case Types.ATTACH:\n      return \"sendbird-icon-attach\";\n    case Types.AUDIO_ON_LINED:\n      return \"sendbird-icon-audio-on-lined\";\n    case Types.BAN:\n      return \"sendbird-icon-ban\";\n    case Types.BROADCAST:\n      return \"sendbird-icon-broadcast\";\n    case Types.CAMERA:\n      return \"sendbird-icon-camera\";\n    case Types.CHANNELS:\n      return \"sendbird-icon-channels\";\n    case Types.CHAT:\n      return \"sendbird-icon-chat\";\n    case Types.CHAT_FILLED:\n      return \"sendbird-icon-chat-filled\";\n    case Types.CHEVRON_DOWN:\n      return \"sendbird-icon-chevron-down\";\n    case Types.CHEVRON_RIGHT:\n      return \"sendbird-icon-chevron-right\";\n    case Types.CLOSE:\n      return \"sendbird-icon-close\";\n    case Types.COLLAPSE:\n      return \"sendbird-icon-collapse\";\n    case Types.COPY:\n      return \"sendbird-icon-copy\";\n    case Types.CREATE:\n      return \"sendbird-icon-create\";\n    case Types.DELETE:\n      return \"sendbird-icon-delete\";\n    case Types.DISCONNECTED:\n      return \"sendbird-icon-disconnected\";\n    case Types.DOCUMENT:\n      return \"sendbird-icon-document\";\n    case Types.DONE:\n      return \"sendbird-icon-done\";\n    case Types.DONE_ALL:\n      return \"sendbird-icon-done-all\";\n    case Types.DOWNLOAD:\n      return \"sendbird-icon-down-load\";\n    case Types.EDIT:\n      return \"sendbird-icon-edit\";\n    case Types.EMOJI_MORE:\n      return \"sendbird-icon-emoji-more\";\n    case Types.ERROR:\n      return \"sendbird-icon-error\";\n    case Types.EXPAND:\n      return \"sendbird-icon-expand\";\n    case Types.FILE_AUDIO:\n      return \"sendbird-icon-file-audio\";\n    case Types.FILE_DOCUMENT:\n      return \"sendbird-icon-file-document\";\n    case Types.FREEZE:\n      return \"sendbird-icon-freeze\";\n    case Types.GIF:\n      return \"sendbird-icon-gif\";\n    case Types.INFO:\n      return \"sendbird-icon-info\";\n    case Types.LEAVE:\n      return \"sendbird-icon-leave\";\n    case Types.MEMBERS:\n      return \"sendbird-icon-members\";\n    case Types.MESSAGE:\n      return \"sendbird-icon-message\";\n    case Types.MODERATIONS:\n      return \"sendbird-icon-moderations\";\n    case Types.MORE:\n      return \"sendbird-icon-more\";\n    case Types.MUTE:\n      return \"sendbird-icon-mute\";\n    case Types.NOTIFICATIONS:\n      return \"sendbird-icon-notifications\";\n    case Types.NOTIFICATIONS_OFF_FILLED:\n      return \"sendbird-icon-notifications-off-filled\";\n    case Types.OPERATOR:\n      return \"sendbird-icon-operator\";\n    case Types.PHOTO:\n      return \"sendbird-icon-photo\";\n    case Types.PLAY:\n      return \"sendbird-icon-play\";\n    case Types.PLUS:\n      return \"sendbird-iconn-plus\";\n    case Types.QUESTION:\n      return \"sendbird-icon-question\";\n    case Types.REFRESH:\n      return \"sendbird-icon-refresh\";\n    case Types.REMOVE:\n      return \"sendbird-icon-remove\";\n    case Types.REPLY:\n      return \"sendbird-icon-reply\";\n    case Types.SEARCH:\n      return \"sendbird-icon-search\";\n    case Types.SEND:\n      return \"sendbird-icon-send\";\n    case Types.SETTINGS_FILLED:\n      return \"sendbird-icon-settings-filled\";\n    case Types.SPINNER:\n      return \"sendbird-icon-spinner\";\n    case Types.SUPERGROUP:\n      return \"sendbird-icon-supergroup\";\n    case Types.THREAD:\n      return \"sendbird-icon-thread\";\n    case Types.THUMBNAIL_NONE:\n      return \"sendbird-icon-thumbnail-none\";\n    case Types.TOGGLE_OFF:\n      return \"sendbird-icon-toggle-off\";\n    case Types.TOGGLE_ON:\n      return \"sendbird-icon-toggle-on\";\n    case Types.USER:\n      return \"sendbird-icon-user\";\n    case Types.FEEDBACK_LIKE:\n      return \"sendbird-icon-feedback-like\";\n    case Types.FEEDBACK_DISLIKE:\n      return \"sendbird-icon-feedback-dislike\";\n    default:\n      return \"sendbird-icon-unknown\";\n  }\n}\nvar _path$U;\nfunction _extends$X() {\n  return _extends$X = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$X.apply(null, arguments);\n}\nconst SvgIconAdd = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$X({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$U || (_path$U = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667\",\n  className: \"icon-add_svg__fill\"\n})));\nvar _path$T;\nfunction _extends$W() {\n  return _extends$W = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$W.apply(null, arguments);\n}\nconst SvgIconArrowLeft = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$W({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$T || (_path$T = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0\",\n  className: \"icon-arrow-left_svg__fill\"\n})));\nvar _path$S;\nfunction _extends$V() {\n  return _extends$V = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$V.apply(null, arguments);\n}\nconst SvgIconAttach = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$V({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$S || (_path$S = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z\",\n  className: \"icon-attach_svg__fill\"\n})));\nvar _g$2, _defs;\nfunction _extends$U() {\n  return _extends$U = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$U.apply(null, arguments);\n}\nconst SvgIconAudioOnLined = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$U({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"none\",\n  viewBox: \"0 0 64 64\"\n}, props), _g$2 || (_g$2 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"g\", {\n  clipPath: \"url(#icon-audio-on-lined_svg__a)\"\n}, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  d: \"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z\",\n  className: \"icon-audio-on-lined_svg__fill\",\n  clipRule: \"evenodd\"\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  d: \"M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z\",\n  className: \"icon-audio-on-lined_svg__fill\"\n}))), _defs || (_defs = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"defs\", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"clipPath\", {\n  id: \"icon-audio-on-lined_svg__a\"\n}, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#fff\",\n  d: \"M0 0h64v64H0z\"\n})))));\nvar _path$R;\nfunction _extends$T() {\n  return _extends$T = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$T.apply(null, arguments);\n}\nconst SvgIconBan = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$T({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$R || (_path$R = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z\",\n  className: \"icon-ban_svg__fill\"\n})));\nvar _path$Q;\nfunction _extends$S() {\n  return _extends$S = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$S.apply(null, arguments);\n}\nconst SvgIconBroadcast = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$S({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$Q || (_path$Q = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z\",\n  className: \"icon-broadcast_svg__fill\"\n})));\nvar _path$P;\nfunction _extends$R() {\n  return _extends$R = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$R.apply(null, arguments);\n}\nconst SvgIconCamera = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$R({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$P || (_path$P = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16\",\n  className: \"icon-camera_svg__fill\"\n})));\nvar _path$O;\nfunction _extends$Q() {\n  return _extends$Q = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$Q.apply(null, arguments);\n}\nconst SvgIconChannels = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$Q({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$O || (_path$O = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z\",\n  className: \"icon-channels_svg__fill\"\n})));\nvar _path$N;\nfunction _extends$P() {\n  return _extends$P = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$P.apply(null, arguments);\n}\nconst SvgIconChat = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$P({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$N || (_path$N = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8\",\n  className: \"icon-chat_svg__fill\"\n})));\nvar _path$M;\nfunction _extends$O() {\n  return _extends$O = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$O.apply(null, arguments);\n}\nconst SvgIconChatFilled = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$O({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$M || (_path$M = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667\",\n  className: \"icon-chat-filled_svg__fill\"\n})));\nvar _path$L;\nfunction _extends$N() {\n  return _extends$N = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$N.apply(null, arguments);\n}\nconst SvgIconChevronDown = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$N({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$L || (_path$L = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z\",\n  className: \"icon-chevron-down_svg__fill\"\n})));\nvar _path$K;\nfunction _extends$M() {\n  return _extends$M = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$M.apply(null, arguments);\n}\nconst SvgIconChevronRight = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$M({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$K || (_path$K = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z\",\n  className: \"icon-chevron-right_svg__fill\"\n})));\nvar _path$J;\nfunction _extends$L() {\n  return _extends$L = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$L.apply(null, arguments);\n}\nconst SvgIconClose = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$L({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$J || (_path$J = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0\",\n  className: \"icon-close_svg__fill\"\n})));\nvar _path$I;\nfunction _extends$K() {\n  return _extends$K = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$K.apply(null, arguments);\n}\nconst SvgIconCollapse = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$K({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$I || (_path$I = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8\",\n  className: \"icon-collapse_svg__fill\"\n})));\nvar _path$H;\nfunction _extends$J() {\n  return _extends$J = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$J.apply(null, arguments);\n}\nconst SvgIconCopy = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$J({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$H || (_path$H = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z\",\n  className: \"icon-copy_svg__fill\"\n})));\nvar _path$G;\nfunction _extends$I() {\n  return _extends$I = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$I.apply(null, arguments);\n}\nconst SvgIconCreate = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$I({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$G || (_path$G = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0\",\n  className: \"icon-create_svg__fill\"\n})));\nvar _path$F;\nfunction _extends$H() {\n  return _extends$H = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$H.apply(null, arguments);\n}\nconst SvgIconDelete = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$H({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$F || (_path$F = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z\",\n  className: \"icon-delete_svg__fill\"\n})));\nvar _path$E;\nfunction _extends$G() {\n  return _extends$G = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$G.apply(null, arguments);\n}\nconst SvgIconDisconnected = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$G({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$E || (_path$E = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909\",\n  className: \"icon-disconnected_svg__fill\"\n})));\nvar _path$D;\nfunction _extends$F() {\n  return _extends$F = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$F.apply(null, arguments);\n}\nconst SvgIconDocument = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$F({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$D || (_path$D = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z\",\n  className: \"icon-document_svg__fill\"\n})));\nvar _path$C;\nfunction _extends$E() {\n  return _extends$E = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$E.apply(null, arguments);\n}\nconst SvgIconDone = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$E({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$C || (_path$C = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z\",\n  className: \"icon-done_svg__fill\"\n})));\nvar _path$B;\nfunction _extends$D() {\n  return _extends$D = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$D.apply(null, arguments);\n}\nconst SvgIconDoneAll = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$D({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$B || (_path$B = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z\",\n  className: \"icon-done-all_svg__fill\"\n})));\nvar _path$A;\nfunction _extends$C() {\n  return _extends$C = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$C.apply(null, arguments);\n}\nconst SvgIconDownload = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$C({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$A || (_path$A = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z\",\n  className: \"icon-download_svg__fill\"\n})));\nvar _path$z;\nfunction _extends$B() {\n  return _extends$B = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$B.apply(null, arguments);\n}\nconst SvgIconEdit = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$B({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 65 65\"\n}, props), _path$z || (_path$z = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z\",\n  className: \"icon-edit_svg__fill\"\n})));\nvar _path$y;\nfunction _extends$A() {\n  return _extends$A = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$A.apply(null, arguments);\n}\nconst SvgIconEmojiMore = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$A({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$y || (_path$y = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z\",\n  className: \"icon-emoji-more_svg__fill\"\n})));\nvar _path$x;\nfunction _extends$z() {\n  return _extends$z = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$z.apply(null, arguments);\n}\nconst SvgIconError = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$z({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$x || (_path$x = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333\",\n  className: \"icon-error_svg__fill\"\n})));\nvar _path$w;\nfunction _extends$y() {\n  return _extends$y = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$y.apply(null, arguments);\n}\nconst SvgIconExpand = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$y({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$w || (_path$w = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8\",\n  className: \"icon-expand_svg__fill\"\n})));\nvar _path$v;\nfunction _extends$x() {\n  return _extends$x = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$x.apply(null, arguments);\n}\nconst SvgIconFileAudio = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$x({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$v || (_path$v = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047\",\n  className: \"icon-file-audio_svg__fill\"\n})));\nvar _path$u;\nfunction _extends$w() {\n  return _extends$w = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$w.apply(null, arguments);\n}\nconst SvgIconFileDocument = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$w({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$u || (_path$u = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16\",\n  className: \"icon-file-document_svg__fill\"\n})));\nvar _path$t;\nfunction _extends$v() {\n  return _extends$v = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$v.apply(null, arguments);\n}\nconst SvgIconFreeze = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$v({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$t || (_path$t = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z\",\n  className: \"icon-freeze_svg__fill\"\n})));\nvar _path$s;\nfunction _extends$u() {\n  return _extends$u = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$u.apply(null, arguments);\n}\nconst SvgIconGif = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$u({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$s || (_path$s = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z\",\n  className: \"icon-gif_svg__fill\"\n})));\nvar _path$r;\nfunction _extends$t() {\n  return _extends$t = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$t.apply(null, arguments);\n}\nconst SvgIconInfo = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$t({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$r || (_path$r = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334\",\n  className: \"icon-info_svg__fill\"\n})));\nvar _path$q;\nfunction _extends$s() {\n  return _extends$s = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$s.apply(null, arguments);\n}\nconst SvgIconLeave = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$s({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$q || (_path$q = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222\",\n  className: \"icon-leave_svg__fill\"\n})));\nvar _path$p;\nfunction _extends$r() {\n  return _extends$r = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$r.apply(null, arguments);\n}\nconst SvgIconMembers = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$r({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$p || (_path$p = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16\",\n  className: \"icon-members_svg__fill\"\n})));\nvar _path$o;\nfunction _extends$q() {\n  return _extends$q = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$q.apply(null, arguments);\n}\nconst SvgIconMessage = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$q({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$o || (_path$o = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334\",\n  className: \"icon-message_svg__fill\"\n})));\nvar _path$n;\nfunction _extends$p() {\n  return _extends$p = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$p.apply(null, arguments);\n}\nconst SvgIconModerations = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$p({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$n || (_path$n = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333\",\n  className: \"icon-moderations_svg__fill\"\n})));\nvar _path$m;\nfunction _extends$o() {\n  return _extends$o = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$o.apply(null, arguments);\n}\nconst SvgIconMore = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$o({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$m || (_path$m = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333\",\n  className: \"icon-more_svg__fill\"\n})));\nvar _path$l;\nfunction _extends$n() {\n  return _extends$n = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$n.apply(null, arguments);\n}\nconst SvgIconMute = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$n({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$l || (_path$l = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z\",\n  className: \"icon-mute_svg__fill\"\n})));\nvar _path$k;\nfunction _extends$m() {\n  return _extends$m = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$m.apply(null, arguments);\n}\nconst SvgIconNotifications = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$m({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$k || (_path$k = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16\",\n  className: \"icon-notifications_svg__fill\"\n})));\nvar _path$j;\nfunction _extends$l() {\n  return _extends$l = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$l.apply(null, arguments);\n}\nconst SvgIconNotificationsOffFilled = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$l({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$j || (_path$j = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z\",\n  className: \"icon-notifications-off-filled_svg__fill\"\n})));\nvar _path$i;\nfunction _extends$k() {\n  return _extends$k = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$k.apply(null, arguments);\n}\nconst SvgIconOperator = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$k({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$i || (_path$i = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32\",\n  className: \"icon-operator_svg__fill\"\n})));\nvar _path$h;\nfunction _extends$j() {\n  return _extends$j = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$j.apply(null, arguments);\n}\nconst SvgIconPhoto = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$j({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$h || (_path$h = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667\",\n  className: \"icon-photo_svg__fill\"\n})));\nvar _path$g;\nfunction _extends$i() {\n  return _extends$i = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$i.apply(null, arguments);\n}\nconst SvgIconPlay = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$i({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$g || (_path$g = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z\",\n  className: \"icon-play_svg__fill\"\n})));\nvar _path$f;\nfunction _extends$h() {\n  return _extends$h = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$h.apply(null, arguments);\n}\nconst SvgIconPlus = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$h({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$f || (_path$f = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z\",\n  className: \"icon-plus_svg__fill\"\n})));\nvar _path$e;\nfunction _extends$g() {\n  return _extends$g = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$g.apply(null, arguments);\n}\nconst SvgIconQuestion = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$g({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$e || (_path$e = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44\",\n  className: \"icon-question_svg__fill\"\n})));\nvar _path$d;\nfunction _extends$f() {\n  return _extends$f = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$f.apply(null, arguments);\n}\nconst SvgIconRefresh = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$f({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$d || (_path$d = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z\",\n  className: \"icon-refresh_svg__fill\"\n})));\nvar _path$c;\nfunction _extends$e() {\n  return _extends$e = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$e.apply(null, arguments);\n}\nconst SvgIconRemove = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$e({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$c || (_path$c = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z\",\n  className: \"icon-remove_svg__fill\"\n})));\nvar _path$b;\nfunction _extends$d() {\n  return _extends$d = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$d.apply(null, arguments);\n}\nconst SvgIconReplyFilled = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$d({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 12 12\"\n}, props), _path$b || (_path$b = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128\",\n  className: \"icon-reply-filled_svg__fill\"\n})));\nvar _path$a;\nfunction _extends$c() {\n  return _extends$c = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$c.apply(null, arguments);\n}\nconst SvgIconSearch = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$c({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$a || (_path$a = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16\",\n  className: \"icon-search_svg__fill\"\n})));\nvar _path$9;\nfunction _extends$b() {\n  return _extends$b = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$b.apply(null, arguments);\n}\nconst SvgIconSend = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$b({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$9 || (_path$9 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z\",\n  className: \"icon-send_svg__fill\"\n})));\nvar _path$8;\nfunction _extends$a() {\n  return _extends$a = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$a.apply(null, arguments);\n}\nconst SvgIconSettingsFilled = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$a({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$8 || (_path$8 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16\",\n  className: \"icon-settings-filled_svg__fill\"\n})));\nvar _path$7;\nfunction _extends$9() {\n  return _extends$9 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$9.apply(null, arguments);\n}\nconst SvgIconSlideLeft = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$9({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"none\",\n  viewBox: \"0 0 32 32\"\n}, props), _path$7 || (_path$7 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  d: \"M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z\",\n  className: \"icon-slide-left_svg__fill\",\n  clipRule: \"evenodd\"\n})));\nvar _path$6;\nfunction _extends$8() {\n  return _extends$8 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$8.apply(null, arguments);\n}\nconst SvgIconSpinner = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$8({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$6 || (_path$6 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677\",\n  className: \"icon-spinner_svg__fill\"\n})));\nvar _path$5;\nfunction _extends$7() {\n  return _extends$7 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$7.apply(null, arguments);\n}\nconst SvgIconSupergroup = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$7({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$5 || (_path$5 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8\",\n  className: \"icon-supergroup_svg__fill\"\n})));\nvar _path$4, _path2;\nfunction _extends$6() {\n  return _extends$6 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$6.apply(null, arguments);\n}\nconst SvgIconThread = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$6({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"none\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$4 || (_path$4 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  d: \"M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14\",\n  className: \"icon-thread_svg__fill\",\n  clipRule: \"evenodd\"\n})), _path2 || (_path2 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  d: \"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6\",\n  className: \"icon-thread_svg__fill\",\n  clipRule: \"evenodd\"\n})));\nvar _path$3;\nfunction _extends$5() {\n  return _extends$5 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$5.apply(null, arguments);\n}\nconst SvgIconThumbnailNone = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$5({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$3 || (_path$3 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z\",\n  className: \"icon-thumbnail-none_svg__fill\"\n})));\nvar _g$1;\nfunction _extends$4() {\n  return _extends$4 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$4.apply(null, arguments);\n}\nconst SvgIconToggleoff = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$4({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 88 48\"\n}, props), _g$1 || (_g$1 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", {\n  width: 80,\n  height: 40,\n  x: 4,\n  y: 4,\n  fill: \"#000\",\n  className: \"icon-toggleoff_svg__fill\",\n  rx: 20\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"circle\", {\n  cx: 24,\n  cy: 24,\n  r: 12,\n  fill: \"#FFF\"\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#FFF\",\n  d: \"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z\"\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  d: \"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z\",\n  className: \"icon-toggleoff_svg__fill\"\n}))));\nvar _g;\nfunction _extends$3() {\n  return _extends$3 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$3.apply(null, arguments);\n}\nconst SvgIconToggleon = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$3({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 88 48\"\n}, props), _g || (_g = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"rect\", {\n  width: 80,\n  height: 40,\n  x: 4,\n  y: 4,\n  fill: \"#000\",\n  className: \"icon-toggleon_svg__fill\",\n  rx: 20\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"circle\", {\n  cx: 64,\n  cy: 24,\n  r: 12,\n  fill: \"#FFF\"\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#FFF\",\n  d: \"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z\"\n}), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  d: \"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z\",\n  className: \"icon-toggleon_svg__fill\"\n}))));\nvar _path$2;\nfunction _extends$2() {\n  return _extends$2 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$2.apply(null, arguments);\n}\nconst SvgIconUser = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$2({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 64 64\"\n}, props), _path$2 || (_path$2 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16\",\n  className: \"icon-user_svg__fill\"\n})));\nvar _path$1;\nfunction _extends$1() {\n  return _extends$1 = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$1.apply(null, arguments);\n}\nconst SvgIconFeedbackLike = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$1({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  fill: \"none\"\n}, props), _path$1 || (_path$1 = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z\",\n  clipRule: \"evenodd\"\n})));\nvar _path;\nfunction _extends$Y() {\n  return _extends$Y = Object.assign ? Object.assign.bind() : function(n2) {\n    for (var e3 = 1; e3 < arguments.length; e3++) {\n      var t4 = arguments[e3];\n      for (var r2 in t4) ({}).hasOwnProperty.call(t4, r2) && (n2[r2] = t4[r2]);\n    }\n    return n2;\n  }, _extends$Y.apply(null, arguments);\n}\nconst SvgIconFeedbackDislike = (props) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"svg\", _extends$Y({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  fill: \"none\"\n}, props), _path || (_path = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"path\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\",\n  d: \"M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z\",\n  clipRule: \"evenodd\"\n})));\nfunction changeTypeToIconComponent(type) {\n  switch (type) {\n    case Types.ADD:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconAdd, null);\n    case Types.ARROW_LEFT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconArrowLeft, null);\n    case Types.ATTACH:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconAttach, null);\n    case Types.AUDIO_ON_LINED:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconAudioOnLined, null);\n    case Types.BAN:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconBan, null);\n    case Types.BROADCAST:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconBroadcast, null);\n    case Types.CAMERA:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconCamera, null);\n    case Types.CHANNELS:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconChannels, null);\n    case Types.CHAT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconChat, null);\n    case Types.CHAT_FILLED:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconChatFilled, null);\n    case Types.CHEVRON_DOWN:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconChevronDown, null);\n    case Types.CHEVRON_RIGHT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconChevronRight, null);\n    case Types.CLOSE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconClose, null);\n    case Types.COLLAPSE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconCollapse, null);\n    case Types.COPY:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconCopy, null);\n    case Types.CREATE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconCreate, null);\n    case Types.DELETE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconDelete, null);\n    case Types.DISCONNECTED:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconDisconnected, null);\n    case Types.DOCUMENT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconDocument, null);\n    case Types.DONE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconDone, null);\n    case Types.DONE_ALL:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconDoneAll, null);\n    case Types.DOWNLOAD:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconDownload, null);\n    case Types.EDIT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconEdit, null);\n    case Types.EMOJI_MORE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconEmojiMore, null);\n    case Types.ERROR:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconError, null);\n    case Types.EXPAND:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconExpand, null);\n    case Types.FILE_AUDIO:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconFileAudio, null);\n    case Types.FILE_DOCUMENT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconFileDocument, null);\n    case Types.FREEZE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconFreeze, null);\n    case Types.GIF:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconGif, null);\n    case Types.INFO:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconInfo, null);\n    case Types.LEAVE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconLeave, null);\n    case Types.MEMBERS:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconMembers, null);\n    case Types.MESSAGE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconMessage, null);\n    case Types.MODERATIONS:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconModerations, null);\n    case Types.MORE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconMore, null);\n    case Types.MUTE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconMute, null);\n    case Types.NOTIFICATIONS:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconNotifications, null);\n    case Types.NOTIFICATIONS_OFF_FILLED:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconNotificationsOffFilled, null);\n    case Types.OPERATOR:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconOperator, null);\n    case Types.PHOTO:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconPhoto, null);\n    case Types.PLAY:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconPlay, null);\n    case Types.PLUS:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconPlus, null);\n    case Types.QUESTION:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconQuestion, null);\n    case Types.REFRESH:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconRefresh, null);\n    case Types.REMOVE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconRemove, null);\n    case Types.REPLY:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconReplyFilled, null);\n    case Types.SEARCH:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconSearch, null);\n    case Types.SEND:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconSend, null);\n    case Types.SETTINGS_FILLED:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconSettingsFilled, null);\n    case Types.SLIDE_LEFT:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconSlideLeft, null);\n    case Types.SPINNER:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconSpinner, null);\n    case Types.SUPERGROUP:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconSupergroup, null);\n    case Types.THREAD:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconThread, null);\n    case Types.THUMBNAIL_NONE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconThumbnailNone, null);\n    case Types.TOGGLE_OFF:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconToggleoff, null);\n    case Types.TOGGLE_ON:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconToggleon, null);\n    case Types.USER:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconUser, null);\n    case Types.FEEDBACK_LIKE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconFeedbackLike, null);\n    case Types.FEEDBACK_DISLIKE:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SvgIconFeedbackDislike, null);\n    default:\n      return \"icon\";\n  }\n}\nfunction Icon$1(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, type = _a2.type, _c = _a2.fillColor, fillColor = _c === void 0 ? Colors$1.DEFAULT : _c, _d = _a2.width, width = _d === void 0 ? 26 : _d, _e2 = _a2.height, height = _e2 === void 0 ? 26 : _e2, _f = _a2.onClick, onClick = _f === void 0 ? noop$4 : _f, _g2 = _a2.children, children = _g2 === void 0 ? null : _g2, testID = _a2.testID;\n  var iconStyle = {\n    width: typeof width === \"string\" ? width : \"\".concat(width, \"px\"),\n    minWidth: typeof width === \"string\" ? width : \"\".concat(width, \"px\"),\n    height: typeof height === \"string\" ? height : \"\".concat(height, \"px\"),\n    minHeight: typeof height === \"string\" ? height : \"\".concat(height, \"px\")\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n    \"sendbird-icon\",\n    changeTypeToIconClassName(type),\n    changeColorToClassName$1(fillColor)\n  ], false).join(\" \"), \"data-testid\": testID, role: \"button\", onClick, onKeyDown: onClick, tabIndex: 0, style: iconStyle }, children || changeTypeToIconComponent(type));\n}\nvar IconTypes = Types;\nvar IconColors = Colors$1;\nfunction ConnectionStatus() {\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-connection-status\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.TRYING_TO_CONNECT),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DISCONNECTED, fillColor: IconColors.SENT, width: \"14px\", height: \"14px\" })\n  );\n}\nfunction Loader(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, _c = _a2.width, width = _c === void 0 ? \"26px\" : _c, _d = _a2.height, height = _d === void 0 ? \"26px\" : _d, children = _a2.children, testID = _a2.testID;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n    \"sendbird-loader\"\n  ], false).join(\" \"), \"data-testid\": testID, style: {\n    width: typeof width === \"string\" ? width : \"\".concat(width, \"px\"),\n    height: typeof height === \"string\" ? height : \"\".concat(height, \"px\")\n  } }, children || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SPINNER, width: \"26px\", height: \"26px\" }));\n}\nvar PlaceHolderTypes = {\n  LOADING: \"LOADING\",\n  NO_CHANNELS: \"NO_CHANNELS\",\n  NO_MESSAGES: \"NO_MESSAGES\",\n  WRONG: \"WRONG\",\n  SEARCH_IN: \"SEARCH_IN\",\n  SEARCHING: \"SEARCHING\",\n  NO_RESULTS: \"NO_RESULTS\"\n};\nfunction PlaceHolder(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, type = _a2.type, iconSize = _a2.iconSize, _c = _a2.searchInString, searchInString = _c === void 0 ? \"\" : _c, retryToConnect = _a2.retryToConnect;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-place-holder\"\n    ], false).join(\" \") },\n    type === PlaceHolderTypes.LOADING && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Loader,\n      { width: iconSize || \"48px\", height: iconSize || \"48px\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: iconSize || \"48px\", height: iconSize || \"48px\" })\n    ),\n    (type === PlaceHolderTypes.NO_CHANNELS || type === PlaceHolderTypes.NO_MESSAGES || type === PlaceHolderTypes.WRONG) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-place-holder__body\" },\n      type === PlaceHolderTypes.NO_CHANNELS && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-place-holder__body__icon\", type: IconTypes.CHAT, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || \"64px\", height: iconSize || \"64px\" }),\n      type === PlaceHolderTypes.WRONG && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-place-holder__body__icon\", type: IconTypes.ERROR, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || \"64px\", height: iconSize || \"64px\" }),\n      type === PlaceHolderTypes.NO_MESSAGES && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-place-holder__body__icon\", type: IconTypes.MESSAGE, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || \"64px\", height: iconSize || \"64px\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        Label,\n        { className: \"sendbird-place-holder__body__text\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 },\n        type === PlaceHolderTypes.NO_CHANNELS && stringSet2.PLACE_HOLDER__NO_CHANNEL,\n        type === PlaceHolderTypes.WRONG && stringSet2.PLACE_HOLDER__WRONG,\n        type === PlaceHolderTypes.NO_MESSAGES && stringSet2.PLACE_HOLDER__NO_MESSAGES\n      ),\n      retryToConnect && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-place-holder__body__reconnect\", role: \"button\", onClick: retryToConnect, onKeyPress: retryToConnect, tabIndex: 0 },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-place-holder__body__reconnect__icon\", type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: \"20px\", height: \"20px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-place-holder__body__reconnect__text\", type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet2.PLACE_HOLDER__RETRY_TO_CONNECT)\n      )\n    ),\n    (type === PlaceHolderTypes.NO_RESULTS || type === PlaceHolderTypes.SEARCH_IN || type === PlaceHolderTypes.SEARCHING) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-place-holder__body--align-top\" },\n      type === PlaceHolderTypes.SEARCH_IN && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-place-holder__body--align-top__text\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-place-holder__body--align-top__text__search-in\", type: LabelTypography.BUTTON_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.SEARCH_IN),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-place-holder__body--align-top__text__channel-name\", type: LabelTypography.BUTTON_2, color: LabelColors.PRIMARY }, \"'\".concat(searchInString)),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-place-holder__body--align-top__text__quote\", type: LabelTypography.BUTTON_2, color: LabelColors.PRIMARY }, \"'\")\n      ),\n      type === PlaceHolderTypes.SEARCHING && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-place-hlder__body--align-top__searching\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet2.SEARCHING),\n      type === PlaceHolderTypes.NO_RESULTS && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-place-hlder__body--align-top__no-result\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet2.NO_SEARCHED_MESSAGE)\n    )\n  );\n}\nvar GroupChannelUIView = function(props) {\n  var _a2, _b2, _c, _d;\n  var isLoading = props.isLoading, isInvalid = props.isInvalid, channelUrl = props.channelUrl;\n  var _e2 = deleteNullish(props), renderChannelHeader = _e2.renderChannelHeader, renderMessageList = _e2.renderMessageList, renderMessageInput = _e2.renderMessageInput, renderTypingIndicator = _e2.renderTypingIndicator, renderPlaceholderLoader = _e2.renderPlaceholderLoader, renderPlaceholderInvalid = _e2.renderPlaceholderInvalid;\n  var state = useSendbird().state;\n  var stores2 = state.stores, config2 = state.config;\n  var sdkError = (_a2 = stores2 === null || stores2 === void 0 ? void 0 : stores2.sdkStore) === null || _a2 === void 0 ? void 0 : _a2.error;\n  var logger = config2.logger, isOnline = config2.isOnline;\n  if (isLoading) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-conversation\" }, (renderPlaceholderLoader === null || renderPlaceholderLoader === void 0 ? void 0 : renderPlaceholderLoader()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING }));\n  }\n  if (!channelUrl) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-conversation\" }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.NO_CHANNELS }));\n  }\n  if (isInvalid) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-conversation\" }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG }));\n  }\n  if (sdkError) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-conversation\" }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG, retryToConnect: function() {\n      logger.info(\"Channel: reconnecting\");\n    } }));\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-conversation\" },\n    renderChannelHeader === null || renderChannelHeader === void 0 ? void 0 : renderChannelHeader({ className: \"sendbird-conversation__channel-header\" }),\n    renderMessageList === null || renderMessageList === void 0 ? void 0 : renderMessageList(props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-conversation__footer\" },\n      renderMessageInput === null || renderMessageInput === void 0 ? void 0 : renderMessageInput(),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-conversation__footer__typing-indicator\" },\n        (renderTypingIndicator === null || renderTypingIndicator === void 0 ? void 0 : renderTypingIndicator()) || ((_b2 = config2 === null || config2 === void 0 ? void 0 : config2.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.enableTypingIndicator) && ((_d = (_c = config2 === null || config2 === void 0 ? void 0 : config2.groupChannel) === null || _c === void 0 ? void 0 : _c.typingIndicatorTypes) === null || _d === void 0 ? void 0 : _d.has(TypingIndicatorType.Text)) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingIndicator, { channelUrl }),\n        !isOnline && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConnectionStatus, null)\n      )\n    )\n  );\n};\nvar numberToPx = function(value) {\n  if (value === null)\n    return void 0;\n  return typeof value === \"number\" ? \"\".concat(value, \"px\") : value;\n};\nfunction getDynamicMinLengthInPx(sideLength, maxSideLength, defaultMinLength) {\n  var _a2;\n  return \"min(\".concat(maxSideLength !== null && maxSideLength !== void 0 ? maxSideLength : defaultMinLength, \", \").concat((_a2 = numberToPx(sideLength)) !== null && _a2 !== void 0 ? _a2 : defaultMinLength, \")\");\n}\nfunction useDynamicSideLength(_a2) {\n  var width = _a2.width, height = _a2.height, maxSideLength = _a2.maxSideLength, defaultMinLength = _a2.defaultMinLength;\n  var dynamicMinWidth = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return getDynamicMinLengthInPx(width, maxSideLength, defaultMinLength);\n  }, [width]);\n  var dynamicMinHeight = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return getDynamicMinLengthInPx(height, maxSideLength, defaultMinLength);\n  }, [height]);\n  return [dynamicMinWidth, dynamicMinHeight];\n}\nvar useIsElementInViewport = function() {\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isVisible = _a2[0], setIsVisible = _a2[1];\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), element2 = _b2[0], setElement = _b2[1];\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(node2) {\n    if (node2 !== null)\n      setElement(node2);\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (!element2)\n      return;\n    var observer = new IntersectionObserver(function(entries2) {\n      var entry = entries2[0];\n      setIsVisible(entry.isIntersecting);\n    });\n    observer.observe(element2);\n    return function() {\n      observer.disconnect();\n    };\n  }, [element2]);\n  return [ref, isVisible];\n};\nvar useLazyImageLoader = function() {\n  var isLoaded = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(false);\n  var _a2 = useIsElementInViewport(), ref = _a2[0], isVisible = _a2[1];\n  if (isVisible)\n    isLoaded.current = true;\n  return [ref, isLoaded.current];\n};\nfunction getBorderRadiusForImageRenderer(circle, borderRadius) {\n  if (circle === void 0) {\n    circle = false;\n  }\n  if (borderRadius === void 0) {\n    borderRadius = null;\n  }\n  return circle ? \"50%\" : numberToPx(borderRadius);\n}\nfunction getBorderRadiusForMultipleImageRenderer(borderRadius, index2, totalCount) {\n  var value = typeof borderRadius === \"string\" ? parseInt(borderRadius, 10) : borderRadius;\n  var lastIndex = totalCount - 1;\n  var topLeft = index2 === 0 ? value * 2 : value;\n  var topRight = index2 === 1 ? value * 2 : value;\n  var bottomRight = index2 === lastIndex ? value * 2 : value;\n  var bottomLeft = index2 === lastIndex - 1 ? value * 2 : value;\n  return \"\".concat(topLeft, \"px \").concat(topRight, \"px \").concat(bottomRight, \"px \").concat(bottomLeft, \"px\");\n}\nvar ImageRenderer = function(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, url = _a2.url, _c = _a2.alt, alt = _c === void 0 ? \"\" : _c, _d = _a2.width, width = _d === void 0 ? null : _d, _e2 = _a2.maxSideLength, maxSideLength = _e2 === void 0 ? null : _e2, _f = _a2.height, height = _f === void 0 ? null : _f, _g2 = _a2.circle, circle = _g2 === void 0 ? false : _g2, _h = _a2.fixedSize, fixedSize = _h === void 0 ? false : _h, _j = _a2.placeHolder, placeHolder = _j === void 0 ? null : _j, _k = _a2.defaultComponent, defaultComponent = _k === void 0 ? null : _k, _l = _a2.borderRadius, borderRadius = _l === void 0 ? null : _l, _m = _a2.onLoad, onLoad = _m === void 0 ? noop$4 : _m, _o = _a2.onError, onError2 = _o === void 0 ? noop$4 : _o, shadeOnHover = _a2.shadeOnHover, _p = _a2.isUploaded, isUploaded = _p === void 0 ? true : _p;\n  var _q = useLazyImageLoader(), ref = _q[0], isVisible = _q[1];\n  var internalUrl = isVisible ? url : null;\n  var _r2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), defaultComponentVisible = _r2[0], setDefaultComponentVisible = _r2[1];\n  var _s2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true), placeholderVisible = _s2[0], setPlaceholderVisible = _s2[1];\n  var _t2 = useDynamicSideLength({\n    width,\n    height,\n    maxSideLength,\n    defaultMinLength: \"400px\"\n  }), dynamicMinWidth = _t2[0], dynamicMinHeight = _t2[1];\n  var renderPlaceholder = function() {\n    if (typeof placeHolder === \"function\") {\n      return placeHolder({\n        style: {\n          width: \"100%\",\n          minWidth: dynamicMinWidth,\n          maxWidth: fixedSize ? dynamicMinWidth : \"400px\",\n          height: dynamicMinHeight,\n          position: \"absolute\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }\n      });\n    }\n    return placeHolder;\n  };\n  var renderDefault = function() {\n    if (typeof defaultComponent === \"function\")\n      return defaultComponent();\n    return defaultComponent;\n  };\n  var renderImage = function() {\n    var backgroundStyle = internalUrl ? {\n      backgroundRepeat: \"no-repeat\",\n      backgroundPosition: \"center\",\n      backgroundSize: \"cover\",\n      backgroundImage: \"url(\".concat(internalUrl, \")\")\n    } : {};\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-image-renderer__image\", style: __assign({ width: \"100%\", minWidth: dynamicMinWidth, maxWidth: fixedSize ? dynamicMinWidth : \"400px\", height: dynamicMinHeight, position: \"absolute\", borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) }, backgroundStyle) });\n  };\n  return dynamicMinWidth && dynamicMinHeight && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { ref, className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\"sendbird-image-renderer\"], false).join(\" \"), style: {\n      width: \"100%\",\n      minWidth: dynamicMinWidth,\n      maxWidth: fixedSize ? dynamicMinWidth : \"400px\",\n      height: dynamicMinHeight\n    } },\n    placeholderVisible && renderPlaceholder(),\n    !internalUrl || defaultComponentVisible ? renderDefault() : renderImage(),\n    shadeOnHover && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-multiple-files-image-renderer__image-cover\", style: __assign({ borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) }, isUploaded ? {} : { display: \"inline-flex\" }) }),\n    internalUrl && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(HiddenImageLoader, { src: internalUrl, alt, onLoadStart: function() {\n      setPlaceholderVisible(true);\n      setDefaultComponentVisible(false);\n    }, onLoad: function() {\n      setPlaceholderVisible(false);\n      setDefaultComponentVisible(false);\n      onLoad();\n    }, onError: function() {\n      setPlaceholderVisible(false);\n      setDefaultComponentVisible(true);\n      onError2();\n    } })\n  );\n};\nvar HiddenImageLoader = function(props) {\n  var src = props.src, alt = props.alt, _a2 = props.onLoadStart, onLoadStart = _a2 === void 0 ? noop$4 : _a2, _b2 = props.onLoad, onLoad = _b2 === void 0 ? noop$4 : _b2, _c = props.onError, onError2 = _c === void 0 ? noop$4 : _c;\n  var reloadCtx = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])({\n    currSrc: src,\n    prevSrc: src,\n    loadFailure: false\n  });\n  if (reloadCtx.current.currSrc !== src) {\n    reloadCtx.current.prevSrc = reloadCtx.current.currSrc;\n    reloadCtx.current.currSrc = src;\n  }\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    if (src) {\n      var sourceChanged = reloadCtx.current.prevSrc !== reloadCtx.current.currSrc;\n      var loadFailure = reloadCtx.current.loadFailure;\n      if (sourceChanged || loadFailure) {\n        onLoadStart();\n      }\n    }\n  }, [src, navigator.onLine]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", { className: \"sendbird-image-renderer__hidden-image-loader\", src, alt, onLoad: function() {\n    reloadCtx.current.loadFailure = false;\n    onLoad();\n  }, onError: function() {\n    reloadCtx.current.loadFailure = true;\n    onError2();\n  } });\n};\nvar pxToNumber = function(px) {\n  if (typeof px === \"number\") {\n    return px;\n  }\n  if (typeof px === \"string\") {\n    var parsed = Number.parseFloat(px);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return NaN;\n};\nvar AvatarDefault = function(props) {\n  var width = props.width, height = props.height, text2 = props.text;\n  var iconWidth = pxToNumber(width);\n  var iconHeight = pxToNumber(height);\n  if (typeof iconWidth === \"number\" && !Number.isNaN(iconWidth)) {\n    iconWidth *= 0.575;\n  }\n  if (typeof iconHeight === \"number\" && !Number.isNaN(iconHeight)) {\n    iconHeight *= 0.575;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames(\"sendbird-avatar-img--default\", text2 && \"text\"), style: { width, height } }, text2 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-avatar-text\" }, text2) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.USER, fillColor: IconColors.CONTENT, width: iconWidth, height: iconHeight }));\n};\nvar imageRendererClassName = \"sendbird-avatar-img\";\nvar AvatarInner = function(_a2) {\n  var _b2 = _a2.src, src = _b2 === void 0 ? \"\" : _b2, _c = _a2.alt, alt = _c === void 0 ? \"\" : _c, height = _a2.height, width = _a2.width, customDefaultComponent = _a2.customDefaultComponent;\n  var defaultComponent = function() {\n    return customDefaultComponent ? customDefaultComponent({ width, height }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AvatarDefault, { width, height });\n  };\n  if (typeof src === \"string\") {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src, height, width, alt, defaultComponent });\n  }\n  if (src && src.length) {\n    if (src.length === 1) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height, width, alt, defaultComponent });\n    }\n    if (src.length === 2) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-avatar--inner__two-child\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height, width, alt, defaultComponent }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[1], height, width, alt, defaultComponent })\n      );\n    }\n    if (src.length === 3) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n        null,\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-avatar--inner__three-child--upper\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height, width, alt, defaultComponent })\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-avatar--inner__three-child--lower\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[1], height, width, alt, defaultComponent }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[2], height, width, alt, defaultComponent })\n        )\n      );\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-avatar--inner__four-child\" }, src.slice(0, 4).map(function(url, index2) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url, height, width, alt, key: \"\".concat(url, \"-\").concat(index2), defaultComponent });\n    }));\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: \"\", height, width, alt, defaultComponent });\n};\nfunction Avatar(_a2, ref) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, _c = _a2.src, src = _c === void 0 ? \"\" : _c, _d = _a2.alt, alt = _d === void 0 ? \"\" : _d, _e2 = _a2.width, width = _e2 === void 0 ? \"56px\" : _e2, _f = _a2.height, height = _f === void 0 ? \"56px\" : _f, _g2 = _a2.zIndex, zIndex = _g2 === void 0 ? 0 : _g2, _h = _a2.left, left = _h === void 0 ? \"\" : _h, _j = _a2.bottom, bottom = _j === void 0 ? \"\" : _j, onClick = _a2.onClick, customDefaultComponent = _a2.customDefaultComponent;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-avatar\"\n    ], false).join(\" \"), role: \"button\", ref, style: {\n      height,\n      width,\n      zIndex,\n      left,\n      bottom\n    }, onClick, onKeyDown: onClick, tabIndex: 0 },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AvatarInner, { src, width, height, alt, customDefaultComponent })\n  );\n}\nvar Avatar$1 = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(Avatar);\nvar DEFAULT_URL_PREFIX = \"https://static.sendbird.com/sample/cover/cover_\";\nvar getChannelAvatarSource = function(channel, currentUserId) {\n  if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {\n    if (!new RegExp(\"^\".concat(DEFAULT_URL_PREFIX)).test(channel.coverUrl)) {\n      return channel.coverUrl;\n    }\n  }\n  return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).filter(function(member) {\n    return member.userId !== currentUserId;\n  }).map(function(_a2) {\n    var profileUrl = _a2.profileUrl;\n    return profileUrl;\n  });\n};\nvar generateDefaultAvatar = function(channel) {\n  if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {\n    if (new RegExp(\"^\".concat(DEFAULT_URL_PREFIX)).test(channel.coverUrl)) {\n      return true;\n    }\n    return false;\n  }\n  return true;\n};\nfunction ChannelAvatar(_a2) {\n  var channel = _a2.channel, userId = _a2.userId, theme = _a2.theme, _b2 = _a2.width, width = _b2 === void 0 ? 56 : _b2, _c = _a2.height, height = _c === void 0 ? 56 : _c;\n  var isBroadcast = channel === null || channel === void 0 ? void 0 : channel.isBroadcast;\n  var memoizedAvatar = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return isBroadcast ? generateDefaultAvatar(channel) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-chat-header--default-avatar\", style: {\n        width,\n        height,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.BROADCAST, fillColor: IconColors.CONTENT, width: width * 0.575, height: height * 0.575 })\n    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-chat-header--avatar--broadcast-channel\", src: getChannelAvatarSource(channel, userId), width, height, alt: channel === null || channel === void 0 ? void 0 : channel.name }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-chat-header--avatar--group-channel\", src: getChannelAvatarSource(channel, userId), width: \"\".concat(width, \"px\"), height: \"\".concat(height, \"px\"), alt: channel === null || channel === void 0 ? void 0 : channel.name });\n  }, [getChannelAvatarSource(channel, userId), theme]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, memoizedAvatar);\n}\nvar OutgoingMessageStates;\n(function(OutgoingMessageStates2) {\n  OutgoingMessageStates2[\"NONE\"] = \"NONE\";\n  OutgoingMessageStates2[\"PENDING\"] = \"PENDING\";\n  OutgoingMessageStates2[\"SENT\"] = \"SENT\";\n  OutgoingMessageStates2[\"FAILED\"] = \"FAILED\";\n  OutgoingMessageStates2[\"DELIVERED\"] = \"DELIVERED\";\n  OutgoingMessageStates2[\"READ\"] = \"READ\";\n})(OutgoingMessageStates || (OutgoingMessageStates = {}));\nvar getOutgoingMessageState = function(channel, message) {\n  var _a2, _b2, _c, _d, _e2;\n  if (!message || !(\"sendingStatus\" in message))\n    return OutgoingMessageStates.NONE;\n  if (message.sendingStatus === \"pending\") {\n    return OutgoingMessageStates.PENDING;\n  }\n  if (message.sendingStatus === \"failed\") {\n    return OutgoingMessageStates.FAILED;\n  }\n  if ((_a2 = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _a2 === void 0 ? void 0 : _a2.call(channel)) {\n    if (((_c = (_b2 = channel).getUnreadMemberCount) === null || _c === void 0 ? void 0 : _c.call(_b2, message)) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if (((_e2 = (_d = channel).getUndeliveredMemberCount) === null || _e2 === void 0 ? void 0 : _e2.call(_d, message)) === 0) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n  if (message.sendingStatus === \"succeeded\") {\n    return OutgoingMessageStates.SENT;\n  }\n  return OutgoingMessageStates.NONE;\n};\nvar isIOS = function(userAgent) {\n  return /iPhone|iPad|iPod/i.test(userAgent);\n};\nvar isWebkit = function(userAgent) {\n  return /WebKit/i.test(userAgent);\n};\nvar isChrome = function(userAgent) {\n  return /Chrome/i.test(userAgent);\n};\nvar isSafari = function(userAgent) {\n  return !isChrome(userAgent) && /Safari/i.test(userAgent);\n};\nvar isMobileIOS = function(userAgent) {\n  return isIOS(userAgent) && (isWebkit(userAgent) || isSafari(userAgent));\n};\nfunction _typeof(o2) {\n  \"@babel/helpers - typeof\";\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o3) {\n    return typeof o3;\n  } : function(o3) {\n    return o3 && \"function\" == typeof Symbol && o3.constructor === Symbol && o3 !== Symbol.prototype ? \"symbol\" : typeof o3;\n  }, _typeof(o2);\n}\nfunction requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + \" argument\" + (required > 1 ? \"s\" : \"\") + \" required, but only \" + args.length + \" present\");\n  }\n}\nfunction toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument);\n  if (argument instanceof Date || _typeof(argument) === \"object\" && argStr === \"[object Date]\") {\n    return new Date(argument.getTime());\n  } else if (typeof argument === \"number\" || argStr === \"[object Number]\") {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === \"string\" || argStr === \"[object String]\") && typeof console !== \"undefined\") {\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments\");\n      console.warn(new Error().stack);\n    }\n    return /* @__PURE__ */ new Date(NaN);\n  }\n}\nvar _a$1;\nvar SUPPORTED_MIMES$1 = {\n  IMAGE: [\n    \"image/jpeg\",\n    \"image/jpg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/svg+xml\",\n    \"image/webp\",\n    // not supported in IE\n    \"image/bmp\"\n  ],\n  VIDEO: [\n    \"video/mpeg\",\n    \"video/ogg\",\n    \"video/webm\",\n    \"video/mp4\"\n    // 'video/quicktime', // NOTE: Do not support ThumbnailMessage for the .mov video\n  ],\n  AUDIO: [\n    \"audio/aac\",\n    \"audio/midi\",\n    \"audio/x-midi\",\n    \"audio/mpeg\",\n    \"audio/ogg\",\n    \"audio/opus\",\n    \"audio/wav\",\n    \"audio/webm\",\n    \"audio/3gpp\",\n    \"audio/3gpp2\",\n    \"audio/mp3\"\n  ],\n  DOCUMENT: [\n    \"text/plain\",\n    \"text/css\",\n    \"text/csv\",\n    \"text/html\",\n    \"text/calendar\",\n    \"text/javascript\",\n    \"text/xml\",\n    \"text/x-log\",\n    \"video/quicktime\"\n    // NOTE: Assume this video is a normal file, not video\n  ],\n  APPLICATION: [\n    \"application/x-abiword\",\n    \"application/x-freearc\",\n    \"application/vnd.amazon.ebook\",\n    \"application/octet-stream\",\n    \"application/x-bzip\",\n    \"application/x-bzip2\",\n    \"application/x-cdf\",\n    \"application/x-csh\",\n    \"application/msword\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"application/vnd.ms-fontobject\",\n    \"application/epub+zip\",\n    \"application/gzip\",\n    \"application/java-archive\",\n    \"application/json\",\n    \"application/ld+json\",\n    \"application/vnd.apple.installer+xml\",\n    \"application/vnd.oasis.opendocument.presentation\",\n    \"application/vnd.oasis.opendocument.spreadsheet\",\n    \"application/vnd.oasis.opendocument.text\",\n    \"application/ogg\",\n    \"application/pdf\",\n    \"application/x-httpd-php\",\n    \"application/vnd.ms-powerpoint\",\n    \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n    \"application/vnd.rar\",\n    \"application/rtf\",\n    \"application/x-sh\",\n    \"application/x-tar\",\n    \"application/vnd.visio\",\n    \"application/xhtml+xml\",\n    \"application/vnd.ms-excel\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"application/xml\",\n    \"application/vnd.mozilla.xul+xml\",\n    \"application/zip\",\n    \"application/x-7z-compressed\"\n  ],\n  ARCHIVE: [\n    \"application/zip\",\n    \"application/x-rar-compressed\",\n    \"application/x-7z-compressed\",\n    \"application/x-tar\",\n    \"application/gzip\",\n    \"application/x-bzip\",\n    \"application/x-bzip2\",\n    \"application/x-xz\",\n    \"application/x-iso9660-image\"\n  ]\n};\nvar SUPPORTED_FILE_EXTENSIONS = {\n  IMAGE: [\".apng\", \".avif\", \".gif\", \".jpg\", \".jpeg\", \".jfif\", \".pjpeg\", \".pjp\", \".png\", \".svg\", \".webp\", \".bmp\", \".ico\", \".cur\", \".tif\", \".tiff\", \".heic\", \".heif\"],\n  VIDEO: [\".mp4\", \".webm\", \".ogv\", \".3gp\", \".3g2\", \".avi\", \".mov\", \".wmv\", \".mpg\", \".mpeg\", \".m4v\", \".mkv\"],\n  AUDIO: [\".aac\", \".midi\", \".mp3\", \".oga\", \".opus\", \".wav\", \".weba\", \".3gp\", \".3g2\"],\n  DOCUMENT: [\".txt\", \".log\", \".csv\", \".rtf\", \".pdf\", \".doc\", \".docx\", \".xls\", \".xlsx\", \".ppt\", \".pptx\"],\n  ARCHIVE: [\".zip\", \".rar\", \".7z\", \".tar\", \".gz\", \".bz2\", \".xz\", \".iso\"]\n};\nvar getMimeTypesUIKitAccepts = function(acceptableTypes) {\n  if (Array.isArray(acceptableTypes) && acceptableTypes.length > 0) {\n    var uniqueTypes = acceptableTypes.reduce(function(prev, curr) {\n      var lowerCurr = curr.toLowerCase();\n      switch (lowerCurr) {\n        case \"image\": {\n          prev.push.apply(prev, __spreadArray(__spreadArray([], SUPPORTED_MIMES$1.IMAGE, false), SUPPORTED_FILE_EXTENSIONS.IMAGE, false));\n          break;\n        }\n        case \"video\": {\n          prev.push.apply(prev, __spreadArray(__spreadArray([], SUPPORTED_MIMES$1.VIDEO, false), SUPPORTED_FILE_EXTENSIONS.VIDEO, false));\n          break;\n        }\n        case \"audio\": {\n          prev.push.apply(prev, __spreadArray(__spreadArray([], SUPPORTED_MIMES$1.AUDIO, false), SUPPORTED_FILE_EXTENSIONS.AUDIO, false));\n          break;\n        }\n        case \"archive\": {\n          prev.push.apply(prev, __spreadArray(__spreadArray([], SUPPORTED_MIMES$1.ARCHIVE, false), SUPPORTED_FILE_EXTENSIONS.ARCHIVE, false));\n          break;\n        }\n        default: {\n          prev.push(curr);\n          break;\n        }\n      }\n      return prev;\n    }, []);\n    return Array.from(new Set(uniqueTypes)).join(\",\");\n  }\n  return __spreadArray(__spreadArray([], Object.values(SUPPORTED_MIMES$1).flat(), true), Object.values(SUPPORTED_FILE_EXTENSIONS).flat(), true).join(\",\");\n};\nvar UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  MULTIPLE_FILES: \"MULTIPLE_FILES\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\"\n};\nvar UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  VOICE: \"VOICE\",\n  OTHERS: \"OTHERS\"\n};\nvar isMOVType = function(type) {\n  return type === \"video/quicktime\";\n};\nvar isSupportedVideoFileTypeInSafari = function(type) {\n  return isSafari(navigator.userAgent) && isMOVType(type);\n};\nvar isImage = function(type) {\n  return SUPPORTED_MIMES$1.IMAGE.indexOf(type) >= 0;\n};\nvar isVideo = function(type) {\n  return SUPPORTED_MIMES$1.VIDEO.indexOf(type) >= 0 || isSupportedVideoFileTypeInSafari(type);\n};\nvar isGif$1 = function(type) {\n  return type === \"image/gif\";\n};\nvar isSupportedFileView = function(type) {\n  return isImage(type) || isVideo(type);\n};\nvar isAudio = function(type) {\n  return SUPPORTED_MIMES$1.AUDIO.indexOf(type) >= 0;\n};\nvar getUIKitFileTypes = function() {\n  return __assign({}, UIKitFileTypes);\n};\nvar getUIKitFileType = function(type) {\n  if (isGif$1(type))\n    return UIKitFileTypes.GIF;\n  if (isImage(type))\n    return UIKitFileTypes.IMAGE;\n  if (isVideo(type))\n    return UIKitFileTypes.VIDEO;\n  if (isAudio(type))\n    return UIKitFileTypes.AUDIO;\n  return UIKitFileTypes.OTHERS;\n};\nvar isSentMessage = function(message) {\n  return message.sendingStatus === \"succeeded\";\n};\nvar isReadMessage = function(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;\n};\nvar isFailedMessage = function(message) {\n  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === \"failed\";\n};\nvar isPendingMessage = function(message) {\n  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === \"pending\";\n};\nvar isSentStatus = function(state) {\n  return state === OutgoingMessageStates.SENT || state === OutgoingMessageStates.DELIVERED || state === OutgoingMessageStates.READ;\n};\nvar isAdminMessage = function(message) {\n  return message && (message[\"isAdminMessage\"] && typeof message.isAdminMessage === \"function\" ? message.isAdminMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === \"admin\");\n};\nvar isUserMessage = function(message) {\n  return message && (message[\"isUserMessage\"] && typeof message.isUserMessage === \"function\" ? message.isUserMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === \"user\");\n};\nvar isFileMessage = function(message) {\n  return !!message && (message[\"isFileMessage\"] && typeof message.isFileMessage === \"function\" ? message.isFileMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === \"file\");\n};\nvar isMultipleFilesMessage = function(message) {\n  return message && (message[\"isMultipleFilesMessage\"] && typeof message.isMultipleFilesMessage === \"function\" ? message.isMultipleFilesMessage() : message.messageType === \"file\" && Object.prototype.hasOwnProperty.call(message, \"fileInfoList\"));\n};\nvar isThreadMessage = function(message) {\n  return !!message.parentMessageId && !!message.parentMessage;\n};\nvar isFormMessage = function(message) {\n  return !!message.messageForm;\n};\nvar isTemplateMessage = function(message) {\n  var _a2;\n  return !!(message && ((_a2 = message.extendedMessagePayload) === null || _a2 === void 0 ? void 0 : _a2[MESSAGE_TEMPLATE_KEY]));\n};\nvar isValidTemplateMessageType = function(templatePayload) {\n  var type = templatePayload[\"type\"];\n  return !(type && !MessageTemplateTypes[type]);\n};\nvar MessageTemplateTypes = {\n  default: \"default\"\n};\nvar uiContainerType = (_a$1 = {}, _a$1[MessageTemplateTypes.default] = \"ui_container_type__default\", _a$1);\nvar isOGMessage = function(message) {\n  if (!message || !isUserMessage(message))\n    return false;\n  return !!message.ogMetaData && !!(message.ogMetaData.url || message.ogMetaData.title || message.ogMetaData.description || message.ogMetaData.defaultImage);\n};\nvar isTextMessage = function(message) {\n  return isUserMessage(message);\n};\nvar isThumbnailMessage = function(message) {\n  if (!message || !isFileMessage(message))\n    return false;\n  return isSupportedFileView(message.type);\n};\nvar isImageMessage = function(message) {\n  if (!message || !isFileMessage(message))\n    return false;\n  return isThumbnailMessage(message) && isImage(message.type);\n};\nvar isVideoMessage = function(message) {\n  if (!message || !isFileMessage(message))\n    return false;\n  return isThumbnailMessage(message) && isVideo(message.type);\n};\nvar isGifMessage = function(message) {\n  if (!message || !isFileMessage(message))\n    return false;\n  return isThumbnailMessage(message) && isGif$1(message.type);\n};\nvar isAudioMessage = function(message) {\n  if (!message || !isFileMessage(message))\n    return false;\n  return isAudio(message.type);\n};\nvar isImageFileInfo = function(fileInfo) {\n  if (!fileInfo)\n    return false;\n  return !!fileInfo.mimeType && (isImage(fileInfo.mimeType) || isGif$1(fileInfo.mimeType));\n};\nvar isAudioMessageMimeType = function(type) {\n  return /^audio\\//.test(type);\n};\nvar isVoiceMessageMimeType = function(type) {\n  return /^voice\\//.test(type);\n};\nvar isVoiceMessage = function(message) {\n  var _a2, _b2, _c, _d;\n  if (!message || !isFileMessage(message) || !message.type)\n    return false;\n  var _e2 = message.type.split(\";\"), mimeType = _e2[0], typeParameter = _e2[1];\n  if (!isAudioMessageMimeType(mimeType)) {\n    return false;\n  }\n  if (typeParameter) {\n    var _f = typeParameter.split(\"=\"), key = _f[0], value = _f[1];\n    return key === \"sbu_type\" && value === \"voice\";\n  }\n  return isVoiceMessageMimeType((_d = (_c = (_b2 = (_a2 = message === null || message === void 0 ? void 0 : message.metaArrays) === null || _a2 === void 0 ? void 0 : _a2.find(function(metaArray) {\n    return metaArray.key === \"KEY_INTERNAL_MESSAGE_TYPE\";\n  })) === null || _b2 === void 0 ? void 0 : _b2.value) === null || _c === void 0 ? void 0 : _c[0]) !== null && _d !== void 0 ? _d : \"\");\n};\nvar isEditedMessage = function(message) {\n  return isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.updatedAt) > 0;\n};\nvar getUIKitMessageTypes = function() {\n  return __assign({}, UIKitMessageTypes);\n};\nvar getUIKitMessageType = function(message) {\n  if (isAdminMessage(message))\n    return UIKitMessageTypes.ADMIN;\n  if (isUserMessage(message)) {\n    return isOGMessage(message) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;\n  }\n  if (isMultipleFilesMessage(message)) {\n    return UIKitMessageTypes.MULTIPLE_FILES;\n  }\n  if (isFileMessage(message)) {\n    if (isThumbnailMessage(message)) {\n      return UIKitMessageTypes.THUMBNAIL;\n    }\n    if (isVoiceMessage(message)) {\n      return UIKitFileTypes.VOICE;\n    }\n    return UIKitMessageTypes.FILE;\n  }\n  return UIKitMessageTypes.UNKNOWN;\n};\nvar reducer = function(accumulator, currentValue) {\n  if (Array.isArray(currentValue)) {\n    return __spreadArray(__spreadArray([], accumulator, true), currentValue, true);\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\nvar getClassName = function(classNames) {\n  return Array.isArray(classNames) ? classNames.reduce(reducer, []).join(\" \") : classNames;\n};\nvar isReactedBy = function(userId, reaction) {\n  return reaction.userIds.some(function(reactorUserId) {\n    return reactorUserId === userId;\n  });\n};\nvar getEmojiTooltipString = function(reaction, userId, memberNicknamesMap, stringSet2) {\n  var you = \"\";\n  if (isReactedBy(userId, reaction)) {\n    you = reaction.userIds.length === 1 ? stringSet2.TOOLTIP__YOU : stringSet2.TOOLTIP__AND_YOU;\n  }\n  return \"\".concat(reaction.userIds.filter(function(reactorUserId) {\n    return reactorUserId !== userId;\n  }).map(function(reactorUserId) {\n    return memberNicknamesMap.get(reactorUserId) || stringSet2.TOOLTIP__UNKNOWN_USER;\n  }).join(\", \")).concat(you);\n};\nfunction getSuggestedReplies(message) {\n  var _a2;\n  if ((message === null || message === void 0 ? void 0 : message.extendedMessagePayload) && Array.isArray((_a2 = message === null || message === void 0 ? void 0 : message.extendedMessagePayload) === null || _a2 === void 0 ? void 0 : _a2.suggested_replies)) {\n    return message.extendedMessagePayload.suggested_replies;\n  } else {\n    return [];\n  }\n}\nvar truncateString = function(fullStr, strLen) {\n  if (!strLen)\n    strLen = 40;\n  if (fullStr === null || fullStr === void 0)\n    return \"\";\n  if (fullStr.length <= strLen)\n    return fullStr;\n  var separator = \"...\";\n  var sepLen = separator.length;\n  var charsToShow = strLen - sepLen;\n  var frontChars = Math.ceil(charsToShow / 2);\n  var backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\nvar copyToClipboard$1 = function(text2) {\n  if (window.clipboardData && window.clipboardData.setData) {\n    return window.clipboardData.setData(\"Text\", text2);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\n    var textarea = document.createElement(\"textarea\");\n    textarea.textContent = text2;\n    textarea.style.position = \"fixed\";\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\");\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\nvar getEmojiListAll = function(emojiContainer) {\n  var _a2;\n  return (_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a2 === void 0 ? void 0 : _a2.map(function(emojiCategory) {\n    return emojiCategory.emojis;\n  }).reduce(function(prevArr, currArr) {\n    return prevArr.concat(currArr);\n  }, []);\n};\nvar getEmojiMapAll = function(emojiContainer) {\n  var _a2;\n  var emojiMap = /* @__PURE__ */ new Map();\n  (_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a2 === void 0 ? void 0 : _a2.forEach(function(category) {\n    var _a3;\n    (_a3 = category === null || category === void 0 ? void 0 : category.emojis) === null || _a3 === void 0 ? void 0 : _a3.forEach(function(emoji) {\n      if (emoji && emoji.key) {\n        emojiMap.set(emoji.key, emoji);\n      }\n    });\n  });\n  return emojiMap;\n};\nvar getEmojiListByCategoryIds = function(emojiContainer, categoryIds) {\n  var _a2;\n  if (!categoryIds)\n    return getEmojiListAll(emojiContainer);\n  return ((_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a2 === void 0 ? void 0 : _a2.filter(function(emojiCategory) {\n    return categoryIds.includes(emojiCategory.id);\n  }).flatMap(function(emojiCategory) {\n    return emojiCategory.emojis;\n  })) || [];\n};\nvar findEmojiUrl = function(targetKey) {\n  return function(_a2) {\n    var key = _a2.key;\n    return key === targetKey;\n  };\n};\nvar getEmojiUrl = function(emojiContainer, emojiKey) {\n  var _a2, _b2;\n  var isFindingKey = findEmojiUrl(emojiKey !== null && emojiKey !== void 0 ? emojiKey : \"\");\n  return ((_b2 = (_a2 = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories.find(function(category) {\n    return category.emojis.some(isFindingKey);\n  })) === null || _a2 === void 0 ? void 0 : _a2.emojis.find(isFindingKey)) === null || _b2 === void 0 ? void 0 : _b2.url) || \"\";\n};\nvar getUserName = function(user) {\n  return (user === null || user === void 0 ? void 0 : user.friendName) || (user === null || user === void 0 ? void 0 : user.nickname) || (user === null || user === void 0 ? void 0 : user.userId);\n};\nvar getSenderName = function(message) {\n  return (message === null || message === void 0 ? void 0 : message.sender) && getUserName(message === null || message === void 0 ? void 0 : message.sender);\n};\nvar StringObjType;\n(function(StringObjType2) {\n  StringObjType2[\"normal\"] = \"normal\";\n  StringObjType2[\"mention\"] = \"mention\";\n  StringObjType2[\"url\"] = \"url\";\n})(StringObjType || (StringObjType = {}));\nvar arrayEqual = function(array1, array2) {\n  if (Array.isArray(array1) && Array.isArray(array2) && array1.length === array2.length) {\n    for (var i3 = 0; i3 < array1.length; i3++) {\n      if (array1[i3] !== array2[i3]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n};\nvar isSendableMessage = function(message) {\n  return Boolean(message) && \"sender\" in message;\n};\nvar getHTMLTextDirection = function(direction, forceLeftToRightMessageLayout) {\n  return forceLeftToRightMessageLayout ? \"ltr\" : direction;\n};\nvar DEFAULT_GROUP_CHANNEL_NAME = \"Group Channel\";\nvar DEFAULT_AI_CHATBOT_CHANNEL_NAME = \"AI Chatbot Widget Channel\";\nvar isDefaultChannelName = function(channel) {\n  return !(channel === null || channel === void 0 ? void 0 : channel.name) || channel.name === DEFAULT_GROUP_CHANNEL_NAME || channel.name === DEFAULT_AI_CHATBOT_CHANNEL_NAME;\n};\nvar getChannelTitle$1 = function(channel, currentUserId, stringSet2) {\n  var _a2;\n  var LABEL_STRING_SET = stringSet2 || LabelStringSet;\n  if (!(channel === null || channel === void 0 ? void 0 : channel.name) && !(channel === null || channel === void 0 ? void 0 : channel.members)) {\n    return LABEL_STRING_SET.NO_TITLE;\n  }\n  if (!isDefaultChannelName(channel)) {\n    return channel.name;\n  }\n  if (((_a2 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a2 === void 0 ? void 0 : _a2.length) === 1) {\n    return LABEL_STRING_SET.NO_MEMBERS;\n  }\n  return channel === null || channel === void 0 ? void 0 : channel.members.filter(function(_a3) {\n    var userId = _a3.userId;\n    return userId !== currentUserId;\n  }).map(function(_a3) {\n    var nickname = _a3.nickname;\n    return nickname || LABEL_STRING_SET.NO_NAME;\n  }).join(\", \");\n};\nvar DEFAULT_MOBILE = false;\nvar MOBILE_CLASSNAME = \"sendbird--mobile-mode\";\nvar MediaQueryContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({\n  breakpoint: DEFAULT_MOBILE,\n  isMobile: false\n});\nvar addClassNameToBody = function() {\n  try {\n    var body = document.querySelector(\"body\");\n    body === null || body === void 0 ? void 0 : body.classList.add(MOBILE_CLASSNAME);\n  } catch (_a2) {\n  }\n};\nvar removeClassNameFromBody = function() {\n  try {\n    var body = document.querySelector(\"body\");\n    body === null || body === void 0 ? void 0 : body.classList.remove(MOBILE_CLASSNAME);\n  } catch (_a2) {\n  }\n};\nvar MediaQueryProvider = function(props) {\n  var children = props.children, logger = props.logger;\n  var breakpoint = (props === null || props === void 0 ? void 0 : props.breakpoint) || false;\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isMobile = _a2[0], setIsMobile = _a2[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3;\n    var updateSize = function() {\n      var _a4;\n      if (typeof breakpoint === \"boolean\") {\n        setIsMobile(breakpoint);\n        if (breakpoint) {\n          addClassNameToBody();\n        } else {\n          removeClassNameFromBody();\n        }\n      } else {\n        var mq = window.matchMedia(\"(max-width: \".concat(breakpoint, \")\"));\n        (_a4 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a4 === void 0 ? void 0 : _a4.call(logger, \"MediaQueryProvider: Screensize updated to \".concat(breakpoint));\n        if (mq.matches) {\n          setIsMobile(true);\n          addClassNameToBody();\n        } else {\n          setIsMobile(false);\n          removeClassNameFromBody();\n        }\n      }\n    };\n    updateSize();\n    window.addEventListener(\"resize\", updateSize);\n    (_a3 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"MediaQueryProvider: addEventListener\", { updateSize });\n    return function() {\n      var _a4;\n      window.removeEventListener(\"resize\", updateSize);\n      (_a4 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a4 === void 0 ? void 0 : _a4.call(logger, \"MediaQueryProvider: removeEventListener\", { updateSize });\n    };\n  }, [breakpoint]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MediaQueryContext.Provider, { value: { breakpoint, isMobile } }, children);\n};\nvar useMediaQueryContext = function() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(MediaQueryContext);\n};\nvar Colors;\n(function(Colors2) {\n  Colors2[\"ONBACKGROUND_1\"] = \"ONBACKGROUND_1\";\n  Colors2[\"ONBACKGROUND_2\"] = \"ONBACKGROUND_2\";\n  Colors2[\"ONBACKGROUND_3\"] = \"ONBACKGROUND_3\";\n  Colors2[\"ONBACKGROUND_4\"] = \"ONBACKGROUND_4\";\n  Colors2[\"ONCONTENT_1\"] = \"ONCONTENT_1\";\n  Colors2[\"PRIMARY\"] = \"PRIMARY\";\n  Colors2[\"ERROR\"] = \"ERROR\";\n})(Colors || (Colors = {}));\nvar changeColorToClassName = function(color2) {\n  switch (color2) {\n    case Colors.ONBACKGROUND_1:\n      return \"sendbird-color--onbackground-1\";\n    case Colors.ONBACKGROUND_2:\n      return \"sendbird-color--onbackground-2\";\n    case Colors.ONBACKGROUND_3:\n      return \"sendbird-color--onbackground-3\";\n    case Colors.ONBACKGROUND_4:\n      return \"sendbird-color--onbackground-4\";\n    case Colors.ONCONTENT_1:\n      return \"sendbird-color--oncontent-1\";\n    case Colors.PRIMARY:\n      return \"sendbird-color--primary\";\n    case Colors.ERROR:\n      return \"sendbird-color--error\";\n    default:\n      return \"\";\n  }\n};\nvar TextButton = function(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, _c = _a2.color, color2 = _c === void 0 ? Colors.ONBACKGROUND_1 : _c, _d = _a2.disabled, disabled = _d === void 0 ? false : _d, _e2 = _a2.disableUnderline, disableUnderline = _e2 === void 0 ? false : _e2, _f = _a2.onClick, onClick = _f === void 0 ? function() {\n  } : _f, children = _a2.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n    changeColorToClassName(color2),\n    disableUnderline ? \"sendbird-textbutton--not-underline\" : \"sendbird-textbutton\",\n    disabled ? \"sendbird-textbutton--disabled\" : \"\"\n  ], false).join(\" \"), role: \"button\", tabIndex: 0, onClick: function(e3) {\n    return onClick(e3);\n  }, onKeyPress: function(e3) {\n    return onClick(e3);\n  } }, children);\n};\nvar IconButton$1 = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var _a2 = props.className, className = _a2 === void 0 ? \"\" : _a2, children = props.children, _b2 = props.disabled, disabled = _b2 === void 0 ? false : _b2, _c = props.width, width = _c === void 0 ? \"56px\" : _c, _d = props.height, height = _d === void 0 ? \"56px\" : _d, _e2 = props.type, type = _e2 === void 0 ? \"button\" : _e2, _f = props.style, style = _f === void 0 ? {} : _f, _g2 = props.onBlur, onBlur = _g2 === void 0 ? function() {\n  } : _g2, _h = props.onClick, onClick = _h === void 0 ? function() {\n  } : _h, testID = props.testID;\n  var _j = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isPressed = _j[0], setIsPressed = _j[1];\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"button\",\n    { \"data-testid\": testID, className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-iconbutton\",\n      isPressed ? \"sendbird-iconbutton--pressed\" : \"\"\n    ], false).join(\" \"), disabled, ref, type, style: __assign(__assign({}, style), { height, width }), onClick: function(e3) {\n      if (disabled) {\n        return;\n      }\n      setIsPressed(true);\n      onClick === null || onClick === void 0 ? void 0 : onClick(e3);\n    }, onBlur: function(e3) {\n      setIsPressed(false);\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e3);\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sendbird-iconbutton__inner\" }, children)\n  );\n});\nvar Header = function(_a2) {\n  var _b2;\n  var className = _a2.className, renderLeft = _a2.renderLeft, renderRight = _a2.renderRight, renderMiddle = _a2.renderMiddle;\n  var isMobile = false;\n  try {\n    isMobile = (_b2 = useMediaQueryContext === null || useMediaQueryContext === void 0 ? void 0 : useMediaQueryContext()) === null || _b2 === void 0 ? void 0 : _b2.isMobile;\n  } catch (err) {\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-ui-header\", className), \"data-testid\": \"sendbird-ui-header\" },\n    renderLeft ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames(\"sendbird-ui-header__left\", isMobile ? \"sendbird-ui-header--is-mobile\" : \"sendbird-ui-header--is-desktop\") }, renderLeft === null || renderLeft === void 0 ? void 0 : renderLeft()) : null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-ui-header__middle\" }, renderMiddle === null || renderMiddle === void 0 ? void 0 : renderMiddle()),\n    renderRight ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames(\"sendbird-ui-header__right\", isMobile ? \"sendbird-ui-header--is-mobile\" : \"sendbird-ui-header--is-desktop\") }, renderRight === null || renderRight === void 0 ? void 0 : renderRight()) : null\n  );\n};\nvar Title = function(_a2) {\n  var title = _a2.title, subtitle = _a2.subtitle, onClickSubtitle = _a2.onClickSubtitle;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-ui-header__middle\" },\n    title && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-ui-header__middle__title\", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, title),\n    subtitle && (onClickSubtitle ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      TextButton,\n      { className: \"sendbird-ui-header__middle__subtitle__container\", onClick: onClickSubtitle, disableUnderline: true },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-ui-header__middle__subtitle\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, subtitle)\n    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-ui-header__middle__subtitle\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, subtitle))\n  );\n};\nvar IconButton = function(_a2) {\n  var className = _a2.className, onClick = _a2.onClick, type = _a2.type, color2 = _a2.color, _b2 = _a2.width, width = _b2 === void 0 ? \"32px\" : _b2, _c = _a2.height, height = _c === void 0 ? \"32px\" : _c, _d = _a2.renderIcon, renderIcon = _d === void 0 ? function(props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon, __assign({}, props));\n  } : _d;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconButton$1, { className, width, height, onClick }, renderIcon({ type, color: color2 }));\n};\nvar Icon = function(_a2) {\n  var className = _a2.className, type = _a2.type, color2 = _a2.color, _b2 = _a2.width, width = _b2 === void 0 ? \"22px\" : _b2, _c = _a2.height, height = _c === void 0 ? \"22px\" : _c, _d = _a2.onClick, onClick = _d === void 0 ? noop$4 : _d;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className, type, fillColor: color2, width, height, onClick: function(e3) {\n    return onClick === null || onClick === void 0 ? void 0 : onClick(e3);\n  } });\n};\nvar Header$1 = Object.assign(Header, { Title, IconButton, Icon });\nvar GroupChannelHeaderView = function(_a2) {\n  var className = _a2.className, currentChannel = _a2.currentChannel, showSearchIcon = _a2.showSearchIcon, onBackClick = _a2.onBackClick, onSearchClick = _a2.onSearchClick, onChatHeaderActionClick = _a2.onChatHeaderActionClick, renderLeft = _a2.renderLeft, renderMiddle = _a2.renderMiddle, renderRight = _a2.renderRight;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var userId = config2.userId, theme = config2.theme;\n  var isMobile = useMediaQueryContext().isMobile;\n  var stringSet2 = useLocalization().stringSet;\n  var isMuted = (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myMutedState) === \"muted\";\n  var channelTitle = getChannelTitle$1(currentChannel, userId, stringSet2);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1, { className: classnames(\"sendbird-chat-header\", className), renderLeft: renderLeft !== null && renderLeft !== void 0 ? renderLeft : function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n      null,\n      isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.Icon, { className: \"sendbird-chat-header__icon_back\", onClick: onBackClick, type: IconTypes.ARROW_LEFT, color: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ChannelAvatar, { theme, channel: currentChannel, userId, height: 32, width: 32 })\n    );\n  }, renderMiddle: renderMiddle !== null && renderMiddle !== void 0 ? renderMiddle : function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.Title, { title: channelTitle });\n  }, renderRight: renderRight !== null && renderRight !== void 0 ? renderRight : function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n      null,\n      isMuted && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.Icon, { className: \"sendbird-chat-header__right__mute\", type: IconTypes.NOTIFICATIONS_OFF_FILLED, color: IconColors.ON_BACKGROUND_2, width: \"24px\", height: \"24px\" }),\n      showSearchIcon && !(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isEphemeral) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.IconButton, { className: \"sendbird-chat-header__right__search\", onClick: onSearchClick, type: IconTypes.SEARCH, color: IconColors.PRIMARY, renderIcon: function(props) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.Icon, __assign({}, props, { width: \"24px\", height: \"24px\" }));\n      } }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.IconButton, { className: \"sendbird-chat-header__right__info\", onClick: onChatHeaderActionClick, type: IconTypes.INFO, color: IconColors.PRIMARY, renderIcon: function(props) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1.Icon, __assign({}, props, { width: \"24px\", height: \"24px\" }));\n      } })\n    );\n  } });\n};\nvar GroupChannelHeader = function(props) {\n  var context = useGroupChannelContext();\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelHeaderView, __assign({}, props, context, { currentChannel: context.currentChannel }));\n};\nfunction isDate(value) {\n  requiredArgs(1, arguments);\n  return value instanceof Date || _typeof(value) === \"object\" && Object.prototype.toString.call(value) === \"[object Date]\";\n}\nfunction isValid(dirtyDate) {\n  requiredArgs(1, arguments);\n  if (!isDate(dirtyDate) && typeof dirtyDate !== \"number\") {\n    return false;\n  }\n  var date = toDate(dirtyDate);\n  return !isNaN(Number(date));\n}\nfunction toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n  var number2 = Number(dirtyNumber);\n  if (isNaN(number2)) {\n    return number2;\n  }\n  return number2 < 0 ? Math.ceil(number2) : Math.floor(number2);\n}\nfunction addMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var timestamp = toDate(dirtyDate).getTime();\n  var amount = toInteger(dirtyAmount);\n  return new Date(timestamp + amount);\n}\nfunction subMilliseconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, -amount);\n}\nvar MILLISECONDS_IN_DAY = 864e5;\nfunction getUTCDayOfYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var timestamp = date.getTime();\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n  var startOfYearTimestamp = date.getTime();\n  var difference = timestamp - startOfYearTimestamp;\n  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;\n}\nfunction startOfUTCISOWeek(dirtyDate) {\n  requiredArgs(1, arguments);\n  var weekStartsOn = 1;\n  var date = toDate(dirtyDate);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date;\n}\nfunction getUTCISOWeekYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var year = date.getUTCFullYear();\n  var fourthOfJanuaryOfNextYear = /* @__PURE__ */ new Date(0);\n  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);\n  var fourthOfJanuaryOfThisYear = /* @__PURE__ */ new Date(0);\n  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\nfunction startOfUTCISOWeekYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  var year = getUTCISOWeekYear(dirtyDate);\n  var fourthOfJanuary = /* @__PURE__ */ new Date(0);\n  fourthOfJanuary.setUTCFullYear(year, 0, 4);\n  fourthOfJanuary.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCISOWeek(fourthOfJanuary);\n  return date;\n}\nvar MILLISECONDS_IN_WEEK$1 = 6048e5;\nfunction getUTCISOWeek(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime();\n  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;\n}\nvar defaultOptions = {};\nfunction getDefaultOptions() {\n  return defaultOptions;\n}\nfunction startOfUTCWeek(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n  requiredArgs(1, arguments);\n  var defaultOptions2 = getDefaultOptions();\n  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError(\"weekStartsOn must be between 0 and 6 inclusively\");\n  }\n  var date = toDate(dirtyDate);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date;\n}\nfunction getUTCWeekYear(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var year = date.getUTCFullYear();\n  var defaultOptions2 = getDefaultOptions();\n  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError(\"firstWeekContainsDate must be between 1 and 7 inclusively\");\n  }\n  var firstWeekOfNextYear = /* @__PURE__ */ new Date(0);\n  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);\n  var firstWeekOfThisYear = /* @__PURE__ */ new Date(0);\n  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\nfunction startOfUTCWeekYear(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n  requiredArgs(1, arguments);\n  var defaultOptions2 = getDefaultOptions();\n  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);\n  var year = getUTCWeekYear(dirtyDate, options);\n  var firstWeek = /* @__PURE__ */ new Date(0);\n  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCWeek(firstWeek, options);\n  return date;\n}\nvar MILLISECONDS_IN_WEEK = 6048e5;\nfunction getUTCWeek(dirtyDate, options) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime();\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;\n}\nfunction addLeadingZeros(number2, targetLength) {\n  var sign = number2 < 0 ? \"-\" : \"\";\n  var output = Math.abs(number2).toString();\n  while (output.length < targetLength) {\n    output = \"0\" + output;\n  }\n  return sign + output;\n}\nvar formatters$1 = {\n  // Year\n  y: function y2(date, token) {\n    var signedYear = date.getUTCFullYear();\n    var year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n  // Month\n  M: function M2(date, token) {\n    var month = date.getUTCMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n  // Day of the month\n  d: function d2(date, token) {\n    return addLeadingZeros(date.getUTCDate(), token.length);\n  },\n  // AM or PM\n  a: function a2(date, token) {\n    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n  // Hour [1-12]\n  h: function h2(date, token) {\n    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);\n  },\n  // Hour [0-23]\n  H: function H2(date, token) {\n    return addLeadingZeros(date.getUTCHours(), token.length);\n  },\n  // Minute\n  m: function m2(date, token) {\n    return addLeadingZeros(date.getUTCMinutes(), token.length);\n  },\n  // Second\n  s: function s2(date, token) {\n    return addLeadingZeros(date.getUTCSeconds(), token.length);\n  },\n  // Fraction of second\n  S: function S2(date, token) {\n    var numberOfDigits = token.length;\n    var milliseconds = date.getUTCMilliseconds();\n    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, token.length);\n  }\n};\nvar dayPeriodEnum = {\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\"\n};\nvar formatters = {\n  // Era\n  G: function G2(date, token, localize2) {\n    var era = date.getUTCFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize2.era(era, {\n          width: \"abbreviated\"\n        });\n      case \"GGGGG\":\n        return localize2.era(era, {\n          width: \"narrow\"\n        });\n      case \"GGGG\":\n      default:\n        return localize2.era(era, {\n          width: \"wide\"\n        });\n    }\n  },\n  // Year\n  y: function y3(date, token, localize2) {\n    if (token === \"yo\") {\n      var signedYear = date.getUTCFullYear();\n      var year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize2.ordinalNumber(year, {\n        unit: \"year\"\n      });\n    }\n    return formatters$1.y(date, token);\n  },\n  // Local week-numbering year\n  Y: function Y2(date, token, localize2, options) {\n    var signedWeekYear = getUTCWeekYear(date, options);\n    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n    if (token === \"YY\") {\n      var twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n    if (token === \"Yo\") {\n      return localize2.ordinalNumber(weekYear, {\n        unit: \"year\"\n      });\n    }\n    return addLeadingZeros(weekYear, token.length);\n  },\n  // ISO week-numbering year\n  R: function R2(date, token) {\n    var isoWeekYear = getUTCISOWeekYear(date);\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function u2(date, token) {\n    var year = date.getUTCFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n  // Quarter\n  Q: function Q2(date, token, localize2) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n    switch (token) {\n      case \"Q\":\n        return String(quarter);\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      case \"Qo\":\n        return localize2.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      case \"QQQ\":\n        return localize2.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"QQQQQ\":\n        return localize2.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"QQQQ\":\n      default:\n        return localize2.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone quarter\n  q: function q2(date, token, localize2) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n    switch (token) {\n      case \"q\":\n        return String(quarter);\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      case \"qo\":\n        return localize2.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      case \"qqq\":\n        return localize2.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      case \"qqqqq\":\n        return localize2.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      case \"qqqq\":\n      default:\n        return localize2.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Month\n  M: function M3(date, token, localize2) {\n    var month = date.getUTCMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return formatters$1.M(date, token);\n      case \"Mo\":\n        return localize2.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      case \"MMM\":\n        return localize2.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"MMMMM\":\n        return localize2.month(month, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"MMMM\":\n      default:\n        return localize2.month(month, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone month\n  L: function L2(date, token, localize2) {\n    var month = date.getUTCMonth();\n    switch (token) {\n      case \"L\":\n        return String(month + 1);\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      case \"Lo\":\n        return localize2.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      case \"LLL\":\n        return localize2.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      case \"LLLLL\":\n        return localize2.month(month, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      case \"LLLL\":\n      default:\n        return localize2.month(month, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Local week of year\n  w: function w2(date, token, localize2, options) {\n    var week = getUTCWeek(date, options);\n    if (token === \"wo\") {\n      return localize2.ordinalNumber(week, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(week, token.length);\n  },\n  // ISO week of year\n  I: function I2(date, token, localize2) {\n    var isoWeek = getUTCISOWeek(date);\n    if (token === \"Io\") {\n      return localize2.ordinalNumber(isoWeek, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(isoWeek, token.length);\n  },\n  // Day of the month\n  d: function d3(date, token, localize2) {\n    if (token === \"do\") {\n      return localize2.ordinalNumber(date.getUTCDate(), {\n        unit: \"date\"\n      });\n    }\n    return formatters$1.d(date, token);\n  },\n  // Day of year\n  D: function D2(date, token, localize2) {\n    var dayOfYear = getUTCDayOfYear(date);\n    if (token === \"Do\") {\n      return localize2.ordinalNumber(dayOfYear, {\n        unit: \"dayOfYear\"\n      });\n    }\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n  // Day of week\n  E: function E2(date, token, localize2) {\n    var dayOfWeek = date.getUTCDay();\n    switch (token) {\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize2.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"EEEEE\":\n        return localize2.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"EEEEEE\":\n        return localize2.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      case \"EEEE\":\n      default:\n        return localize2.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Local day of week\n  e: function e2(date, token, localize2, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      case \"e\":\n        return String(localDayOfWeek);\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      case \"eo\":\n        return localize2.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"eee\":\n        return localize2.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"eeeee\":\n        return localize2.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"eeeeee\":\n        return localize2.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      case \"eeee\":\n      default:\n        return localize2.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone local day of week\n  c: function c2(date, token, localize2, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      case \"c\":\n        return String(localDayOfWeek);\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      case \"co\":\n        return localize2.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"ccc\":\n        return localize2.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      case \"ccccc\":\n        return localize2.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      case \"cccccc\":\n        return localize2.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\"\n        });\n      case \"cccc\":\n      default:\n        return localize2.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // ISO day of week\n  i: function i2(date, token, localize2) {\n    var dayOfWeek = date.getUTCDay();\n    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      case \"i\":\n        return String(isoDayOfWeek);\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      case \"io\":\n        return localize2.ordinalNumber(isoDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"iii\":\n        return localize2.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"iiiii\":\n        return localize2.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"iiiiii\":\n        return localize2.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      case \"iiii\":\n      default:\n        return localize2.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM or PM\n  a: function a3(date, token, localize2) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"aaa\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"aaaaa\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"aaaa\":\n      default:\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM, PM, midnight, noon\n  b: function b2(date, token, localize2) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"bbb\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"bbbbb\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"bbbb\":\n      default:\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // in the morning, in the afternoon, in the evening, at night\n  B: function B2(date, token, localize2) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"BBBBB\":\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"BBBB\":\n      default:\n        return localize2.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Hour [1-12]\n  h: function h3(date, token, localize2) {\n    if (token === \"ho\") {\n      var hours = date.getUTCHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize2.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return formatters$1.h(date, token);\n  },\n  // Hour [0-23]\n  H: function H3(date, token, localize2) {\n    if (token === \"Ho\") {\n      return localize2.ordinalNumber(date.getUTCHours(), {\n        unit: \"hour\"\n      });\n    }\n    return formatters$1.H(date, token);\n  },\n  // Hour [0-11]\n  K: function K2(date, token, localize2) {\n    var hours = date.getUTCHours() % 12;\n    if (token === \"Ko\") {\n      return localize2.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Hour [1-24]\n  k: function k2(date, token, localize2) {\n    var hours = date.getUTCHours();\n    if (hours === 0) hours = 24;\n    if (token === \"ko\") {\n      return localize2.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Minute\n  m: function m3(date, token, localize2) {\n    if (token === \"mo\") {\n      return localize2.ordinalNumber(date.getUTCMinutes(), {\n        unit: \"minute\"\n      });\n    }\n    return formatters$1.m(date, token);\n  },\n  // Second\n  s: function s3(date, token, localize2) {\n    if (token === \"so\") {\n      return localize2.ordinalNumber(date.getUTCSeconds(), {\n        unit: \"second\"\n      });\n    }\n    return formatters$1.s(date, token);\n  },\n  // Fraction of second\n  S: function S3(date, token) {\n    return formatters$1.S(date, token);\n  },\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function X2(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n    switch (token) {\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n      case \"XXXX\":\n      case \"XX\":\n        return formatTimezone(timezoneOffset);\n      case \"XXXXX\":\n      case \"XXX\":\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function x2(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n    switch (token) {\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n      case \"xxxx\":\n      case \"xx\":\n        return formatTimezone(timezoneOffset);\n      case \"xxxxx\":\n      case \"xxx\":\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (GMT)\n  O: function O2(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n    switch (token) {\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (specific non-location)\n  z: function z2(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n    switch (token) {\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Seconds timestamp\n  t: function t3(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = Math.floor(originalDate.getTime() / 1e3);\n    return addLeadingZeros(timestamp, token.length);\n  },\n  // Milliseconds timestamp\n  T: function T2(date, token, _localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = originalDate.getTime();\n    return addLeadingZeros(timestamp, token.length);\n  }\n};\nfunction formatTimezoneShort(offset, dirtyDelimiter) {\n  var sign = offset > 0 ? \"-\" : \"+\";\n  var absOffset = Math.abs(offset);\n  var hours = Math.floor(absOffset / 60);\n  var minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  var delimiter = dirtyDelimiter;\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\nfunction formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {\n  if (offset % 60 === 0) {\n    var sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, dirtyDelimiter);\n}\nfunction formatTimezone(offset, dirtyDelimiter) {\n  var delimiter = dirtyDelimiter || \"\";\n  var sign = offset > 0 ? \"-\" : \"+\";\n  var absOffset = Math.abs(offset);\n  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);\n  var minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\nvar dateLongFormatter = function dateLongFormatter2(pattern, formatLong2) {\n  switch (pattern) {\n    case \"P\":\n      return formatLong2.date({\n        width: \"short\"\n      });\n    case \"PP\":\n      return formatLong2.date({\n        width: \"medium\"\n      });\n    case \"PPP\":\n      return formatLong2.date({\n        width: \"long\"\n      });\n    case \"PPPP\":\n    default:\n      return formatLong2.date({\n        width: \"full\"\n      });\n  }\n};\nvar timeLongFormatter = function timeLongFormatter2(pattern, formatLong2) {\n  switch (pattern) {\n    case \"p\":\n      return formatLong2.time({\n        width: \"short\"\n      });\n    case \"pp\":\n      return formatLong2.time({\n        width: \"medium\"\n      });\n    case \"ppp\":\n      return formatLong2.time({\n        width: \"long\"\n      });\n    case \"pppp\":\n    default:\n      return formatLong2.time({\n        width: \"full\"\n      });\n  }\n};\nvar dateTimeLongFormatter = function dateTimeLongFormatter2(pattern, formatLong2) {\n  var matchResult = pattern.match(/(P+)(p+)?/) || [];\n  var datePattern = matchResult[1];\n  var timePattern = matchResult[2];\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong2);\n  }\n  var dateTimeFormat;\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong2.dateTime({\n        width: \"short\"\n      });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong2.dateTime({\n        width: \"medium\"\n      });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong2.dateTime({\n        width: \"long\"\n      });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong2.dateTime({\n        width: \"full\"\n      });\n      break;\n  }\n  return dateTimeFormat.replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong2)).replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong2));\n};\nvar longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};\nfunction getTimezoneOffsetInMilliseconds(date) {\n  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n  utcDate.setUTCFullYear(date.getFullYear());\n  return date.getTime() - utcDate.getTime();\n}\nvar protectedDayOfYearTokens = [\"D\", \"DD\"];\nvar protectedWeekYearTokens = [\"YY\", \"YYYY\"];\nfunction isProtectedDayOfYearToken(token) {\n  return protectedDayOfYearTokens.indexOf(token) !== -1;\n}\nfunction isProtectedWeekYearToken(token) {\n  return protectedWeekYearTokens.indexOf(token) !== -1;\n}\nfunction throwProtectedError(token, format2, input) {\n  if (token === \"YYYY\") {\n    throw new RangeError(\"Use `yyyy` instead of `YYYY` (in `\".concat(format2, \"`) for formatting years to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  } else if (token === \"YY\") {\n    throw new RangeError(\"Use `yy` instead of `YY` (in `\".concat(format2, \"`) for formatting years to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  } else if (token === \"D\") {\n    throw new RangeError(\"Use `d` instead of `D` (in `\".concat(format2, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  } else if (token === \"DD\") {\n    throw new RangeError(\"Use `dd` instead of `DD` (in `\".concat(format2, \"`) for formatting days of the month to the input `\").concat(input, \"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\"));\n  }\n}\nvar formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\nvar longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\nvar escapedStringRegExp = /^'([^]*?)'?$/;\nvar doubleQuoteRegExp = /''/g;\nvar unescapedLatinCharacterRegExp = /[a-zA-Z]/;\nfunction format(dirtyDate, dirtyFormatStr, options) {\n  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;\n  requiredArgs(2, arguments);\n  var formatStr = String(dirtyFormatStr);\n  var defaultOptions2 = getDefaultOptions();\n  var locale$1 = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions2.locale) !== null && _ref !== void 0 ? _ref : locale;\n  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions2.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions2.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError(\"firstWeekContainsDate must be between 1 and 7 inclusively\");\n  }\n  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions2.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions2.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError(\"weekStartsOn must be between 0 and 6 inclusively\");\n  }\n  if (!locale$1.localize) {\n    throw new RangeError(\"locale must contain localize property\");\n  }\n  if (!locale$1.formatLong) {\n    throw new RangeError(\"locale must contain formatLong property\");\n  }\n  var originalDate = toDate(dirtyDate);\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);\n  var utcDate = subMilliseconds(originalDate, timezoneOffset);\n  var formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale: locale$1,\n    _originalDate: originalDate\n  };\n  var result = formatStr.match(longFormattingTokensRegExp).map(function(substring) {\n    var firstCharacter = substring[0];\n    if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n      var longFormatter = longFormatters[firstCharacter];\n      return longFormatter(substring, locale$1.formatLong);\n    }\n    return substring;\n  }).join(\"\").match(formattingTokensRegExp).map(function(substring) {\n    if (substring === \"''\") {\n      return \"'\";\n    }\n    var firstCharacter = substring[0];\n    if (firstCharacter === \"'\") {\n      return cleanEscapedString(substring);\n    }\n    var formatter = formatters[firstCharacter];\n    if (formatter) {\n      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {\n        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));\n      }\n      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {\n        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));\n      }\n      return formatter(utcDate, substring, locale$1.localize, formatterOptions);\n    }\n    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n      throw new RangeError(\"Format string contains an unescaped latin alphabet character `\" + firstCharacter + \"`\");\n    }\n    return substring;\n  }).join(\"\");\n  return result;\n}\nfunction cleanEscapedString(input) {\n  var matched = input.match(escapedStringRegExp);\n  if (!matched) {\n    return input;\n  }\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\nfunction getMentionNodes(root2) {\n  if (root2) {\n    var mentions = root2.querySelectorAll(\"[data-sb-mention='true']\");\n    var mentionsArray = Array.from(mentions);\n    return mentionsArray;\n  }\n  return [];\n}\nfunction useDirtyGetMentions(_a2, _b2) {\n  var ref = _a2.ref;\n  var logger = _b2.logger;\n  var targetNode = ref.current;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionNodes = _c[0], setMentionNodes = _c[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    if (targetNode) {\n      var mentions = getMentionNodes(targetNode);\n      setMentionNodes(mentions);\n    }\n  }, [targetNode]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var config2 = { childList: true, subtree: true };\n    var callback = function(mutationList) {\n      var hasMutation = mutationList.length > 0;\n      if (hasMutation) {\n        setMentionNodes(getMentionNodes(targetNode));\n      }\n    };\n    var observer = new MutationObserver(callback);\n    if (targetNode) {\n      observer.observe(targetNode, config2);\n    }\n    return function() {\n      try {\n        observer.disconnect();\n      } catch (error) {\n        logger.error(\"useDirtyGetMentions: observer disconnect failed\", { observer });\n      }\n    };\n  }, [targetNode]);\n  return mentionNodes;\n}\nvar DateSeparator = function(_a2) {\n  var _b2 = _a2.children, children = _b2 === void 0 ? void 0 : _b2, _c = _a2.className, className = _c === void 0 ? \"\" : _c, _d = _a2.separatorColor, separatorColor = _d === void 0 ? Colors.ONBACKGROUND_4 : _d;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-separator\"\n    ], false).join(\" \") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: [\"sendbird-separator__left\", \"\".concat(changeColorToClassName(separatorColor), \"--background-color\")].join(\" \") }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-separator__text\" }, children || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, \"Date Separator\")),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: [\"sendbird-separator__right\", \"\".concat(changeColorToClassName(separatorColor), \"--background-color\")].join(\" \") })\n  );\n};\nvar MessageInputKeys = {\n  Enter: \"Enter\",\n  ArrowUp: \"ArrowUp\",\n  ArrowDown: \"ArrowDown\",\n  Backspace: \"Backspace\"\n};\nvar NodeTypes = {\n  ElementNode: 1,\n  TextNode: 3\n};\nvar NodeNames = {\n  Span: \"SPAN\",\n  Br: \"BR\",\n  Div: \"DIV\"\n};\nvar ButtonTypes;\n(function(ButtonTypes2) {\n  ButtonTypes2[\"PRIMARY\"] = \"PRIMARY\";\n  ButtonTypes2[\"SECONDARY\"] = \"SECONDARY\";\n  ButtonTypes2[\"DANGER\"] = \"DANGER\";\n  ButtonTypes2[\"DISABLED\"] = \"DISABLED\";\n  ButtonTypes2[\"WARNING\"] = \"WARNING\";\n})(ButtonTypes || (ButtonTypes = {}));\nvar ButtonSizes;\n(function(ButtonSizes2) {\n  ButtonSizes2[\"BIG\"] = \"BIG\";\n  ButtonSizes2[\"SMALL\"] = \"SMALL\";\n})(ButtonSizes || (ButtonSizes = {}));\nfunction changeTypeToClassName(type) {\n  switch (type) {\n    case ButtonTypes.PRIMARY:\n      return \"sendbird-button--primary\";\n    case ButtonTypes.SECONDARY:\n      return \"sendbird-button--secondary\";\n    case ButtonTypes.DANGER:\n      return \"sendbird-button--danger\";\n    case ButtonTypes.DISABLED:\n      return \"sendbird-button--disabled\";\n    case ButtonTypes.WARNING:\n      return \"sendbird-button--warning\";\n    default:\n      return \"\";\n  }\n}\nfunction changeSizeToClassName(size) {\n  switch (size) {\n    case ButtonSizes.BIG:\n      return \"sendbird-button--big\";\n    case ButtonSizes.SMALL:\n      return \"sendbird-button--small\";\n    default:\n      return \"\";\n  }\n}\nfunction Button(_a2) {\n  var className = _a2.className, _b2 = _a2.type, type = _b2 === void 0 ? ButtonTypes.PRIMARY : _b2, _c = _a2.size, size = _c === void 0 ? ButtonSizes.BIG : _c, _d = _a2.children, children = _d === void 0 ? \"Button\" : _d, _e2 = _a2.disabled, disabled = _e2 === void 0 ? false : _e2, _f = _a2.onClick, onClick = _f === void 0 ? function() {\n  } : _f, _g2 = _a2.labelType, labelType = _g2 === void 0 ? LabelTypography.BUTTON_1 : _g2, _h = _a2.labelColor, labelColor = _h === void 0 ? LabelColors.ONCONTENT_1 : _h;\n  var injectingClassNames = __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n    \"sendbird-button\",\n    disabled ? \"sendbird-button__disabled\" : \"\",\n    changeTypeToClassName(type),\n    changeSizeToClassName(size)\n  ], false).join(\" \");\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"button\",\n    { className: injectingClassNames, type: \"button\", onClick, disabled },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-button__text\", type: labelType, color: labelColor }, children)\n  );\n}\n/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create: create$1\n} = Object;\nlet {\n  apply,\n  construct\n} = typeof Reflect !== \"undefined\" && Reflect;\nif (!freeze) {\n  freeze = function freeze2(x3) {\n    return x3;\n  };\n}\nif (!seal) {\n  seal = function seal2(x3) {\n    return x3;\n  };\n}\nif (!apply) {\n  apply = function apply2(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct2(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\nfunction unapply(func) {\n  return function(thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\nfunction unconstruct(func) {\n  return function() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    setPrototypeOf(set, null);\n  }\n  let l2 = array.length;\n  while (l2--) {\n    let element2 = array[l2];\n    if (typeof element2 === \"string\") {\n      const lcElement = transformCaseFunc(element2);\n      if (lcElement !== element2) {\n        if (!isFrozen(array)) {\n          array[l2] = lcElement;\n        }\n        element2 = lcElement;\n      }\n    }\n    set[element2] = true;\n  }\n  return set;\n}\nfunction cleanArray(array) {\n  for (let index2 = 0; index2 < array.length; index2++) {\n    const isPropertyExist = objectHasOwnProperty(array, index2);\n    if (!isPropertyExist) {\n      array[index2] = null;\n    }\n  }\n  return array;\n}\nfunction clone(object) {\n  const newObject = create$1(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === \"object\" && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === \"function\") {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\nconst html$1$1 = freeze([\"a\", \"abbr\", \"acronym\", \"address\", \"area\", \"article\", \"aside\", \"audio\", \"b\", \"bdi\", \"bdo\", \"big\", \"blink\", \"blockquote\", \"body\", \"br\", \"button\", \"canvas\", \"caption\", \"center\", \"cite\", \"code\", \"col\", \"colgroup\", \"content\", \"data\", \"datalist\", \"dd\", \"decorator\", \"del\", \"details\", \"dfn\", \"dialog\", \"dir\", \"div\", \"dl\", \"dt\", \"element\", \"em\", \"fieldset\", \"figcaption\", \"figure\", \"font\", \"footer\", \"form\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"head\", \"header\", \"hgroup\", \"hr\", \"html\", \"i\", \"img\", \"input\", \"ins\", \"kbd\", \"label\", \"legend\", \"li\", \"main\", \"map\", \"mark\", \"marquee\", \"menu\", \"menuitem\", \"meter\", \"nav\", \"nobr\", \"ol\", \"optgroup\", \"option\", \"output\", \"p\", \"picture\", \"pre\", \"progress\", \"q\", \"rp\", \"rt\", \"ruby\", \"s\", \"samp\", \"section\", \"select\", \"shadow\", \"small\", \"source\", \"spacer\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"summary\", \"sup\", \"table\", \"tbody\", \"td\", \"template\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"time\", \"tr\", \"track\", \"tt\", \"u\", \"ul\", \"var\", \"video\", \"wbr\"]);\nconst svg$1$1 = freeze([\"svg\", \"a\", \"altglyph\", \"altglyphdef\", \"altglyphitem\", \"animatecolor\", \"animatemotion\", \"animatetransform\", \"circle\", \"clippath\", \"defs\", \"desc\", \"ellipse\", \"filter\", \"font\", \"g\", \"glyph\", \"glyphref\", \"hkern\", \"image\", \"line\", \"lineargradient\", \"marker\", \"mask\", \"metadata\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialgradient\", \"rect\", \"stop\", \"style\", \"switch\", \"symbol\", \"text\", \"textpath\", \"title\", \"tref\", \"tspan\", \"view\", \"vkern\"]);\nconst svgFilters = freeze([\"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feDropShadow\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\"]);\nconst svgDisallowed = freeze([\"animate\", \"color-profile\", \"cursor\", \"discard\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignobject\", \"hatch\", \"hatchpath\", \"mesh\", \"meshgradient\", \"meshpatch\", \"meshrow\", \"missing-glyph\", \"script\", \"set\", \"solidcolor\", \"unknown\", \"use\"]);\nconst mathMl$1 = freeze([\"math\", \"menclose\", \"merror\", \"mfenced\", \"mfrac\", \"mglyph\", \"mi\", \"mlabeledtr\", \"mmultiscripts\", \"mn\", \"mo\", \"mover\", \"mpadded\", \"mphantom\", \"mroot\", \"mrow\", \"ms\", \"mspace\", \"msqrt\", \"mstyle\", \"msub\", \"msup\", \"msubsup\", \"mtable\", \"mtd\", \"mtext\", \"mtr\", \"munder\", \"munderover\", \"mprescripts\"]);\nconst mathMlDisallowed = freeze([\"maction\", \"maligngroup\", \"malignmark\", \"mlongdiv\", \"mscarries\", \"mscarry\", \"msgroup\", \"mstack\", \"msline\", \"msrow\", \"semantics\", \"annotation\", \"annotation-xml\", \"mprescripts\", \"none\"]);\nconst text$4 = freeze([\"#text\"]);\nconst html$3 = freeze([\"accept\", \"action\", \"align\", \"alt\", \"autocapitalize\", \"autocomplete\", \"autopictureinpicture\", \"autoplay\", \"background\", \"bgcolor\", \"border\", \"capture\", \"cellpadding\", \"cellspacing\", \"checked\", \"cite\", \"class\", \"clear\", \"color\", \"cols\", \"colspan\", \"controls\", \"controlslist\", \"coords\", \"crossorigin\", \"datetime\", \"decoding\", \"default\", \"dir\", \"disabled\", \"disablepictureinpicture\", \"disableremoteplayback\", \"download\", \"draggable\", \"enctype\", \"enterkeyhint\", \"face\", \"for\", \"headers\", \"height\", \"hidden\", \"high\", \"href\", \"hreflang\", \"id\", \"inputmode\", \"integrity\", \"ismap\", \"kind\", \"label\", \"lang\", \"list\", \"loading\", \"loop\", \"low\", \"max\", \"maxlength\", \"media\", \"method\", \"min\", \"minlength\", \"multiple\", \"muted\", \"name\", \"nonce\", \"noshade\", \"novalidate\", \"nowrap\", \"open\", \"optimum\", \"pattern\", \"placeholder\", \"playsinline\", \"popover\", \"popovertarget\", \"popovertargetaction\", \"poster\", \"preload\", \"pubdate\", \"radiogroup\", \"readonly\", \"rel\", \"required\", \"rev\", \"reversed\", \"role\", \"rows\", \"rowspan\", \"spellcheck\", \"scope\", \"selected\", \"shape\", \"size\", \"sizes\", \"span\", \"srclang\", \"start\", \"src\", \"srcset\", \"step\", \"style\", \"summary\", \"tabindex\", \"title\", \"translate\", \"type\", \"usemap\", \"valign\", \"value\", \"width\", \"wrap\", \"xmlns\", \"slot\"]);\nconst svg$2 = freeze([\"accent-height\", \"accumulate\", \"additive\", \"alignment-baseline\", \"amplitude\", \"ascent\", \"attributename\", \"attributetype\", \"azimuth\", \"basefrequency\", \"baseline-shift\", \"begin\", \"bias\", \"by\", \"class\", \"clip\", \"clippathunits\", \"clip-path\", \"clip-rule\", \"color\", \"color-interpolation\", \"color-interpolation-filters\", \"color-profile\", \"color-rendering\", \"cx\", \"cy\", \"d\", \"dx\", \"dy\", \"diffuseconstant\", \"direction\", \"display\", \"divisor\", \"dur\", \"edgemode\", \"elevation\", \"end\", \"exponent\", \"fill\", \"fill-opacity\", \"fill-rule\", \"filter\", \"filterunits\", \"flood-color\", \"flood-opacity\", \"font-family\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-variant\", \"font-weight\", \"fx\", \"fy\", \"g1\", \"g2\", \"glyph-name\", \"glyphref\", \"gradientunits\", \"gradienttransform\", \"height\", \"href\", \"id\", \"image-rendering\", \"in\", \"in2\", \"intercept\", \"k\", \"k1\", \"k2\", \"k3\", \"k4\", \"kerning\", \"keypoints\", \"keysplines\", \"keytimes\", \"lang\", \"lengthadjust\", \"letter-spacing\", \"kernelmatrix\", \"kernelunitlength\", \"lighting-color\", \"local\", \"marker-end\", \"marker-mid\", \"marker-start\", \"markerheight\", \"markerunits\", \"markerwidth\", \"maskcontentunits\", \"maskunits\", \"max\", \"mask\", \"media\", \"method\", \"mode\", \"min\", \"name\", \"numoctaves\", \"offset\", \"operator\", \"opacity\", \"order\", \"orient\", \"orientation\", \"origin\", \"overflow\", \"paint-order\", \"path\", \"pathlength\", \"patterncontentunits\", \"patterntransform\", \"patternunits\", \"points\", \"preservealpha\", \"preserveaspectratio\", \"primitiveunits\", \"r\", \"rx\", \"ry\", \"radius\", \"refx\", \"refy\", \"repeatcount\", \"repeatdur\", \"restart\", \"result\", \"rotate\", \"scale\", \"seed\", \"shape-rendering\", \"slope\", \"specularconstant\", \"specularexponent\", \"spreadmethod\", \"startoffset\", \"stddeviation\", \"stitchtiles\", \"stop-color\", \"stop-opacity\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke\", \"stroke-width\", \"style\", \"surfacescale\", \"systemlanguage\", \"tabindex\", \"tablevalues\", \"targetx\", \"targety\", \"transform\", \"transform-origin\", \"text-anchor\", \"text-decoration\", \"text-rendering\", \"textlength\", \"type\", \"u1\", \"u2\", \"unicode\", \"values\", \"viewbox\", \"visibility\", \"version\", \"vert-adv-y\", \"vert-origin-x\", \"vert-origin-y\", \"width\", \"word-spacing\", \"wrap\", \"writing-mode\", \"xchannelselector\", \"ychannelselector\", \"x\", \"x1\", \"x2\", \"xmlns\", \"y\", \"y1\", \"y2\", \"z\", \"zoomandpan\"]);\nconst mathMl = freeze([\"accent\", \"accentunder\", \"align\", \"bevelled\", \"close\", \"columnsalign\", \"columnlines\", \"columnspan\", \"denomalign\", \"depth\", \"dir\", \"display\", \"displaystyle\", \"encoding\", \"fence\", \"frame\", \"height\", \"href\", \"id\", \"largeop\", \"length\", \"linethickness\", \"lspace\", \"lquote\", \"mathbackground\", \"mathcolor\", \"mathsize\", \"mathvariant\", \"maxsize\", \"minsize\", \"movablelimits\", \"notation\", \"numalign\", \"open\", \"rowalign\", \"rowlines\", \"rowspacing\", \"rowspan\", \"rspace\", \"rquote\", \"scriptlevel\", \"scriptminsize\", \"scriptsizemultiplier\", \"selection\", \"separator\", \"separators\", \"stretchy\", \"subscriptshift\", \"supscriptshift\", \"symmetric\", \"voffset\", \"width\", \"xmlns\"]);\nconst xml$1 = freeze([\"xlink:href\", \"xml:id\", \"xlink:title\", \"xml:space\", \"xmlns:xlink\"]);\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm);\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/);\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\nconst IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i\n  // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g\n  // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\nvar EXPRESSIONS = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  ARIA_ATTR,\n  ATTR_WHITESPACE,\n  CUSTOM_ELEMENT,\n  DATA_ATTR,\n  DOCTYPE_NAME,\n  ERB_EXPR,\n  IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR,\n  TMPLIT_EXPR\n});\nconst NODE_TYPE = {\n  element: 1,\n  text: 3,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9\n};\nconst getGlobal = function getGlobal2() {\n  return typeof window === \"undefined\" ? null : window;\n};\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy2(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== \"object\" || typeof trustedTypes.createPolicy !== \"function\") {\n    return null;\n  }\n  let suffix = null;\n  const ATTR_NAME = \"data-tt-policy-suffix\";\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = \"dompurify\" + (suffix ? \"#\" + suffix : \"\");\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html2) {\n        return html2;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_2) {\n    console.warn(\"TrustedTypes policy \" + policyName + \" could not be created.\");\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap2() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : getGlobal();\n  const DOMPurify = (root2) => createDOMPurify(root2);\n  DOMPurify.version = \"3.2.4\";\n  DOMPurify.removed = [];\n  if (!window2 || !window2.document || window2.document.nodeType !== NODE_TYPE.document || !window2.Element) {\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document: document2\n  } = window2;\n  const originalDocument = document2;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node: Node2,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window2.NamedNodeMap || window2.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window2;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, \"cloneNode\");\n  const remove2 = lookupGetter(ElementPrototype, \"remove\");\n  const getNextSibling = lookupGetter(ElementPrototype, \"nextSibling\");\n  const getChildNodes = lookupGetter(ElementPrototype, \"childNodes\");\n  const getParentNode = lookupGetter(ElementPrototype, \"parentNode\");\n  if (typeof HTMLTemplateElement === \"function\") {\n    const template = document2.createElement(\"template\");\n    if (template.content && template.content.ownerDocument) {\n      document2 = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = \"\";\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document2;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  DOMPurify.isSupported = typeof entries === \"function\" && typeof getParentNode === \"function\" && implementation && implementation.createHTMLDocument !== void 0;\n  const {\n    MUSTACHE_EXPR: MUSTACHE_EXPR2,\n    ERB_EXPR: ERB_EXPR2,\n    TMPLIT_EXPR: TMPLIT_EXPR2,\n    DATA_ATTR: DATA_ATTR2,\n    ARIA_ATTR: ARIA_ATTR2,\n    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA2,\n    ATTR_WHITESPACE: ATTR_WHITESPACE2,\n    CUSTOM_ELEMENT: CUSTOM_ELEMENT2\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1$1, ...svg$1$1, ...svgFilters, ...mathMl$1, ...text$4]);\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html$3, ...svg$2, ...mathMl, ...xml$1]);\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create$1(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  let FORBID_TAGS = null;\n  let FORBID_ATTR = null;\n  let ALLOW_ARIA_ATTR = true;\n  let ALLOW_DATA_ATTR = true;\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  let SAFE_FOR_TEMPLATES = false;\n  let SAFE_FOR_XML = true;\n  let WHOLE_DOCUMENT = false;\n  let SET_CONFIG = false;\n  let FORCE_BODY = false;\n  let RETURN_DOM = false;\n  let RETURN_DOM_FRAGMENT = false;\n  let RETURN_TRUSTED_TYPE = false;\n  let SANITIZE_DOM = true;\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = \"user-content-\";\n  let KEEP_CONTENT = true;\n  let IN_PLACE = false;\n  let USE_PROFILES = {};\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\"annotation-xml\", \"audio\", \"colgroup\", \"desc\", \"foreignobject\", \"head\", \"iframe\", \"math\", \"mi\", \"mn\", \"mo\", \"ms\", \"mtext\", \"noembed\", \"noframes\", \"noscript\", \"plaintext\", \"script\", \"style\", \"svg\", \"template\", \"thead\", \"title\", \"video\", \"xmp\"]);\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\"audio\", \"video\", \"img\", \"source\", \"image\", \"track\"]);\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\"alt\", \"class\", \"for\", \"id\", \"label\", \"name\", \"pattern\", \"placeholder\", \"role\", \"summary\", \"title\", \"value\", \"style\", \"xmlns\"]);\n  const MATHML_NAMESPACE = \"http://www.w3.org/1998/Math/MathML\";\n  const SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\n  const HTML_NAMESPACE = \"http://www.w3.org/1999/xhtml\";\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\"mi\", \"mo\", \"mn\", \"ms\", \"mtext\"]);\n  let HTML_INTEGRATION_POINTS = addToSet({}, [\"annotation-xml\"]);\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\"title\", \"style\", \"font\", \"a\", \"script\"]);\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = [\"application/xhtml+xml\", \"text/html\"];\n  const DEFAULT_PARSER_MEDIA_TYPE = \"text/html\";\n  let transformCaseFunc = null;\n  let CONFIG = null;\n  const formElement = document2.createElement(\"form\");\n  const isRegexOrFunction = function isRegexOrFunction2(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  const _parseConfig = function _parseConfig2() {\n    let cfg = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    if (!cfg || typeof cfg !== \"object\") {\n      cfg = {};\n    }\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE = // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    transformCaseFunc = PARSER_MEDIA_TYPE === \"application/xhtml+xml\" ? stringToString : stringToLowerCase;\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, \"ALLOWED_TAGS\") ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, \"ALLOWED_ATTR\") ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, \"ALLOWED_NAMESPACES\") ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, \"ADD_URI_SAFE_ATTR\") ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, \"ADD_DATA_URI_TAGS\") ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, \"FORBID_CONTENTS\") ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, \"FORBID_TAGS\") ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n    FORBID_ATTR = objectHasOwnProperty(cfg, \"FORBID_ATTR\") ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n    USE_PROFILES = objectHasOwnProperty(cfg, \"USE_PROFILES\") ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false;\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false;\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n    RETURN_DOM = cfg.RETURN_DOM || false;\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n    FORCE_BODY = cfg.FORCE_BODY || false;\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false;\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n    IN_PLACE = cfg.IN_PLACE || false;\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === \"boolean\") {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text$4);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1$1);\n        addToSet(ALLOWED_ATTR, html$3);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1$1);\n        addToSet(ALLOWED_ATTR, svg$2);\n        addToSet(ALLOWED_ATTR, xml$1);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg$2);\n        addToSet(ALLOWED_ATTR, xml$1);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml$1);\n      }\n    }\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS[\"#text\"] = true;\n    }\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, [\"html\", \"head\", \"body\"]);\n    }\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, [\"tbody\"]);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== \"function\") {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== \"function\") {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      emptyHTML = trustedTypesPolicy.createHTML(\"\");\n    } else {\n      if (trustedTypesPolicy === void 0) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      if (trustedTypesPolicy !== null && typeof emptyHTML === \"string\") {\n        emptyHTML = trustedTypesPolicy.createHTML(\"\");\n      }\n    }\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  const _checkValidNamespace = function _checkValidNamespace2(element2) {\n    let parent = getParentNode(element2);\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: \"template\"\n      };\n    }\n    const tagName = stringToLowerCase(element2.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element2.namespaceURI]) {\n      return false;\n    }\n    if (element2.namespaceURI === SVG_NAMESPACE) {\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === \"svg\";\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === \"svg\" && (parentTagName === \"annotation-xml\" || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element2.namespaceURI === MATHML_NAMESPACE) {\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === \"math\";\n      }\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === \"math\" && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element2.namespaceURI === HTML_NAMESPACE) {\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    if (PARSER_MEDIA_TYPE === \"application/xhtml+xml\" && ALLOWED_NAMESPACES[element2.namespaceURI]) {\n      return true;\n    }\n    return false;\n  };\n  const _forceRemove = function _forceRemove2(node2) {\n    arrayPush(DOMPurify.removed, {\n      element: node2\n    });\n    try {\n      getParentNode(node2).removeChild(node2);\n    } catch (_2) {\n      remove2(node2);\n    }\n  };\n  const _removeAttribute = function _removeAttribute2(name2, element2) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element2.getAttributeNode(name2),\n        from: element2\n      });\n    } catch (_2) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element2\n      });\n    }\n    element2.removeAttribute(name2);\n    if (name2 === \"is\") {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element2);\n        } catch (_2) {\n        }\n      } else {\n        try {\n          element2.setAttribute(name2, \"\");\n        } catch (_2) {\n        }\n      }\n    }\n  };\n  const _initDocument = function _initDocument2(dirty) {\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = \"<remove></remove>\" + dirty;\n    } else {\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === \"application/xhtml+xml\" && NAMESPACE === HTML_NAMESPACE) {\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + \"</body></html>\";\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_2) {\n      }\n    }\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, \"template\", null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_2) {\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document2.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? \"html\" : \"body\")[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  const _createNodeIterator = function _createNodeIterator2(root2) {\n    return createNodeIterator.call(\n      root2.ownerDocument || root2,\n      root2,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION,\n      null\n    );\n  };\n  const _isClobbered = function _isClobbered2(element2) {\n    return element2 instanceof HTMLFormElement && (typeof element2.nodeName !== \"string\" || typeof element2.textContent !== \"string\" || typeof element2.removeChild !== \"function\" || !(element2.attributes instanceof NamedNodeMap) || typeof element2.removeAttribute !== \"function\" || typeof element2.setAttribute !== \"function\" || typeof element2.namespaceURI !== \"string\" || typeof element2.insertBefore !== \"function\" || typeof element2.hasChildNodes !== \"function\");\n  };\n  const _isNode = function _isNode2(value) {\n    return typeof Node2 === \"function\" && value instanceof Node2;\n  };\n  function _executeHooks(hooks2, currentNode, data) {\n    arrayForEach(hooks2, (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  const _sanitizeElements = function _sanitizeElements2(currentNode) {\n    let content2 = null;\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i3 = childCount - 1; i3 >= 0; --i3) {\n            const childClone = cloneNode(childNodes[i3], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    if ((tagName === \"noscript\" || tagName === \"noembed\" || tagName === \"noframes\") && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      content2 = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR2, ERB_EXPR2, TMPLIT_EXPR2], (expr) => {\n        content2 = stringReplace(content2, expr, \" \");\n      });\n      if (currentNode.textContent !== content2) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content2;\n      }\n    }\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  const _isValidAttribute = function _isValidAttribute2(lcTag, lcName, value) {\n    if (SANITIZE_DOM && (lcName === \"id\" || lcName === \"name\") && (value in document2 || value in formElement)) {\n      return false;\n    }\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR2, lcName)) ;\n    else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR2, lcName)) ;\n    else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === \"is\" && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))\n      ) ;\n      else {\n        return false;\n      }\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ;\n    else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE2, \"\"))) ;\n    else if ((lcName === \"src\" || lcName === \"xlink:href\" || lcName === \"href\") && lcTag !== \"script\" && stringIndexOf(value, \"data:\") === 0 && DATA_URI_TAGS[lcTag]) ;\n    else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA2, stringReplace(value, ATTR_WHITESPACE2, \"\"))) ;\n    else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  const _isBasicCustomElement = function _isBasicCustomElement2(tagName) {\n    return tagName !== \"annotation-xml\" && stringMatch(tagName, CUSTOM_ELEMENT2);\n  };\n  const _sanitizeAttributes = function _sanitizeAttributes2(currentNode) {\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: \"\",\n      attrValue: \"\",\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: void 0\n    };\n    let l2 = attributes.length;\n    while (l2--) {\n      const attr = attributes[l2];\n      const {\n        name: name2,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name2);\n      let value = name2 === \"value\" ? attrValue : stringTrim(attrValue);\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = void 0;\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      if (SANITIZE_NAMED_PROPS && (lcName === \"id\" || lcName === \"name\")) {\n        _removeAttribute(name2, currentNode);\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name2, currentNode);\n        continue;\n      }\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      _removeAttribute(name2, currentNode);\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name2, currentNode);\n        continue;\n      }\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR2, ERB_EXPR2, TMPLIT_EXPR2], (expr) => {\n          value = stringReplace(value, expr, \" \");\n        });\n      }\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n      if (trustedTypesPolicy && typeof trustedTypes === \"object\" && typeof trustedTypes.getAttributeType === \"function\") {\n        if (namespaceURI) ;\n        else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case \"TrustedHTML\": {\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n            }\n            case \"TrustedScriptURL\": {\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n            }\n          }\n        }\n      }\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name2, value);\n        } else {\n          currentNode.setAttribute(name2, value);\n        }\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n        } else {\n          arrayPop(DOMPurify.removed);\n        }\n      } catch (_2) {\n      }\n    }\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM2(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      _sanitizeElements(shadowNode);\n      _sanitizeAttributes(shadowNode);\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM2(shadowNode.content);\n      }\n    }\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  DOMPurify.sanitize = function(dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = \"<!-->\";\n    }\n    if (typeof dirty !== \"string\" && !_isNode(dirty)) {\n      if (typeof dirty.toString === \"function\") {\n        dirty = dirty.toString();\n        if (typeof dirty !== \"string\") {\n          throw typeErrorCreate(\"dirty is not a string, aborting\");\n        }\n      } else {\n        throw typeErrorCreate(\"toString is not a function\");\n      }\n    }\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    DOMPurify.removed = [];\n    if (typeof dirty === \"string\") {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate(\"root node is forbidden and cannot be sanitized in-place\");\n        }\n      }\n    } else if (dirty instanceof Node2) {\n      body = _initDocument(\"<!---->\");\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === \"BODY\") {\n        body = importedNode;\n      } else if (importedNode.nodeName === \"HTML\") {\n        body = importedNode;\n      } else {\n        body.appendChild(importedNode);\n      }\n    } else {\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf(\"<\") === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      body = _initDocument(dirty);\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : \"\";\n      }\n    }\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    while (currentNode = nodeIterator.nextNode()) {\n      _sanitizeElements(currentNode);\n      _sanitizeAttributes(currentNode);\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    if (IN_PLACE) {\n      return dirty;\n    }\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS[\"!doctype\"] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = \"<!DOCTYPE \" + body.ownerDocument.doctype.name + \">\\n\" + serializedHTML;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR2, ERB_EXPR2, TMPLIT_EXPR2], (expr) => {\n        serializedHTML = stringReplace(serializedHTML, expr, \" \");\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function() {\n    let cfg = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function() {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function(tag, attr, value) {\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function(entryPoint, hookFunction) {\n    if (typeof hookFunction !== \"function\") {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function(entryPoint, hookFunction) {\n    if (hookFunction !== void 0) {\n      const index2 = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index2 === -1 ? void 0 : arraySplice(hooks[entryPoint], index2, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function(entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function() {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\nvar MENTION_USER_LABEL_CLASSNAME = \"sendbird-mention-user-label\";\nvar TEXT_MESSAGE_BODY_CLASSNAME = \"sendbird-text-message-item-body\";\nvar OG_MESSAGE_BODY_CLASSNAME = \"sendbird-og-message-item-body__text-bubble\";\nfunction renderToString(_a2) {\n  var userId = _a2.userId, nickname = _a2.nickname;\n  var el = '<span data-userid=\"'.concat(userId, '\" data-sb-mention=\"true\" class=\"').concat(MENTION_USER_LABEL_CLASSNAME, '\">').concat(nickname, \"</span>\");\n  var purifier = purify(window);\n  var sanitized_ = purifier.sanitize(el);\n  var token = sanitized_.split(\" \");\n  var spanTag = token[0], rest = token.slice(1);\n  var sanitized = __spreadArray([spanTag, 'contenteditable=\"false\"'], rest, true).join(\" \");\n  return sanitized;\n}\nvar sanitizeString = function(str) {\n  if (str === void 0) {\n    str = \"\";\n  }\n  if (!str)\n    return \"\";\n  return str.replace(/[<>]/g, function(char) {\n    return char === \"<\" ? \"&#60;\" : \"&#62;\";\n  });\n};\nvar nodeListToArray = function(childNodes) {\n  return childNodes ? Array.from(childNodes) : [];\n};\nfunction isChannelTypeSupportsMultipleFilesMessage(channel) {\n  var _a2;\n  return channel && ((_a2 = channel.isGroupChannel) === null || _a2 === void 0 ? void 0 : _a2.call(channel)) && !channel.isBroadcast && !channel.isSuper;\n}\nfunction isHTMLElement(node2) {\n  return node2.nodeType === NodeTypes.ElementNode;\n}\nfunction extractTextAndMentions(childNodes) {\n  var messageText2 = \"\";\n  var mentionTemplate = \"\";\n  childNodes.forEach(function(node2) {\n    if (isHTMLElement(node2) && node2.nodeName === NodeNames.Span) {\n      var innerText = node2.innerText, _a2 = node2.dataset, dataset = _a2 === void 0 ? {} : _a2;\n      var _b2 = dataset.userid, userid = _b2 === void 0 ? \"\" : _b2;\n      messageText2 += innerText;\n      mentionTemplate += \"\".concat(USER_MENTION_TEMP_CHAR, \"{\").concat(userid, \"}\");\n    } else if (isHTMLElement(node2) && node2.nodeName === NodeNames.Br) {\n      messageText2 += \"\\n\";\n      mentionTemplate += \"\\n\";\n    } else if (isHTMLElement(node2) && node2.nodeName === NodeNames.Div) {\n      var _c = node2.textContent, textContent = _c === void 0 ? \"\" : _c;\n      messageText2 += \"\\n\".concat(textContent);\n      mentionTemplate += \"\\n\".concat(textContent);\n    } else {\n      var _d = node2.textContent, textContent = _d === void 0 ? \"\" : _d;\n      messageText2 += textContent;\n      mentionTemplate += textContent;\n    }\n  });\n  return { messageText: messageText2, mentionTemplate };\n}\nfunction insertTemplateToDOM(templateList) {\n  var nodes = templateList.map(function(template) {\n    var text2 = template.text, userId = template.userId;\n    if (userId) {\n      return renderToString({ userId, nickname: text2 });\n    }\n    return sanitizeString(text2);\n  }).join(\" \").concat(\" \");\n  document.execCommand(\"insertHTML\", false, nodes);\n}\nvar MENTION_CLASS = \"sendbird-word__mention\";\nvar MENTION_CLASS_IN_INPUT = \"sendbird-mention-user-label\";\nvar MENTION_CLASS_COMBINED_QUERY = \".\".concat(MENTION_CLASS, \", .\").concat(MENTION_CLASS_IN_INPUT);\nfunction querySelectorIncludingSelf(master, selector) {\n  var result = __spreadArray([\n    master\n  ], Array.from(master.querySelectorAll(selector)), true).find(function(el) {\n    return el.matches(selector);\n  });\n  return result;\n}\nfunction getLeafNodes(master) {\n  var ogMessage = querySelectorIncludingSelf(master, \".\".concat(OG_MESSAGE_BODY_CLASSNAME));\n  if (ogMessage) {\n    return nodeListToArray(ogMessage.childNodes);\n  }\n  var textMessageBody = querySelectorIncludingSelf(master, \".\".concat(TEXT_MESSAGE_BODY_CLASSNAME));\n  if (textMessageBody) {\n    return nodeListToArray(textMessageBody.childNodes);\n  }\n  return nodeListToArray(master.childNodes);\n}\nfunction hasMention(parent) {\n  return (parent === null || parent === void 0 ? void 0 : parent.querySelector(MENTION_CLASS_COMBINED_QUERY)) ? true : false;\n}\nfunction domToMessageTemplate(nodeArray) {\n  var templates = nodeArray === null || nodeArray === void 0 ? void 0 : nodeArray.reduce(function(accumulator, currentValue) {\n    var _a2, _b2;\n    var mentionNode;\n    var text2 = currentValue === null || currentValue === void 0 ? void 0 : currentValue.innerText;\n    if (currentValue instanceof Text) {\n      mentionNode = false;\n      text2 = (_a2 = currentValue.textContent) !== null && _a2 !== void 0 ? _a2 : \"\";\n    }\n    if (currentValue instanceof HTMLElement) {\n      mentionNode = currentValue.classList.contains(MENTION_CLASS) || currentValue.classList.contains(MENTION_CLASS_IN_INPUT) ? currentValue : currentValue.querySelector(MENTION_CLASS_COMBINED_QUERY);\n    }\n    if (mentionNode) {\n      var text_1 = currentValue === null || currentValue === void 0 ? void 0 : currentValue.innerText;\n      var userId = (_b2 = mentionNode.dataset) === null || _b2 === void 0 ? void 0 : _b2.userid;\n      return __spreadArray(__spreadArray([], accumulator, true), [\n        {\n          text: text_1,\n          userId\n        }\n      ], false);\n    }\n    return __spreadArray(__spreadArray([], accumulator, true), [\n      {\n        text: text2\n      }\n    ], false);\n  }, []);\n  return templates;\n}\nfunction getUsersFromWords(templates, channel) {\n  var userMap = {};\n  var users = channel.members;\n  templates.forEach(function(template) {\n    if (template.userId) {\n      var mentionedMember = users.find(function(user) {\n        return user.userId === template.userId;\n      });\n      if (mentionedMember) {\n        userMap[template.userId] = mentionedMember;\n      }\n    }\n  });\n  return Object.values(userMap);\n}\nfunction pasteContentAtCaret(content2) {\n  var selection = window.getSelection();\n  if (selection && selection.rangeCount > 0) {\n    var range2 = selection.getRangeAt(selection.rangeCount - 1);\n    range2.deleteContents();\n    var textNode = document.createTextNode(content2 + \"\");\n    range2.insertNode(textNode);\n    range2.setStart(textNode, textNode.length);\n    range2.collapse(true);\n    selection.removeAllRanges();\n    selection.addRange(range2);\n  }\n}\nfunction createPasteNodeWithContent(html2) {\n  var pasteNode = document.createElement(\"div\");\n  pasteNode.innerHTML = html2;\n  return pasteNode;\n}\nfunction usePaste(_a2) {\n  var ref = _a2.ref, setIsInput = _a2.setIsInput, channel = _a2.channel, setMentionedUsers = _a2.setMentionedUsers;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(e3) {\n    e3.preventDefault();\n    var html2 = e3.clipboardData.getData(\"text/html\");\n    var text2 = e3.clipboardData.getData(\"text\") || getURIListText(e3);\n    if (!html2) {\n      pasteContentAtCaret(sanitizeString(text2));\n      setIsInput(true);\n      return;\n    }\n    var purifier = purify(window);\n    var cleanHtml = purifier.sanitize(html2);\n    var pasteNode = createPasteNodeWithContent(cleanHtml);\n    if (!hasMention(pasteNode)) {\n      pasteContentAtCaret(sanitizeString(text2));\n      pasteNode.remove();\n      setIsInput(true);\n      return;\n    }\n    var leafNodes = getLeafNodes(pasteNode);\n    var words = domToMessageTemplate(leafNodes);\n    var mentionedUsers = channel.isGroupChannel() ? getUsersFromWords(words, channel) : [];\n    setMentionedUsers(mentionedUsers);\n    insertTemplateToDOM(words);\n    pasteNode.remove();\n    setIsInput(true);\n  }, [ref, setIsInput, channel, setMentionedUsers]);\n}\nfunction getURIListText(e3) {\n  var pasteData = e3.clipboardData.getData(\"text/uri-list\");\n  if (pasteData.length === 0)\n    return \"\";\n  return pasteData.split(\"\\n\").reduce(function(accumulator, line) {\n    var txt = line.trim();\n    if (txt !== \"\" && !txt.startsWith(\"#\")) {\n      accumulator += txt + \"\\n\";\n    }\n    return accumulator;\n  }, \"\");\n}\nvar USER_MENTION_PREFIX = \"@\";\nvar TOKEN_TYPES = {\n  string: \"string\",\n  mention: \"mention\",\n  url: \"url\",\n  undetermined: \"undetermined\",\n  markdown: \"markdown\"\n};\nvar MarkdownRegex = /\\[(.*?)\\]\\((.*?)\\)|\\*\\*(.*?)\\*\\*/g;\nfunction getUserMentionRegex(mentionedUsers, templatePrefix_) {\n  var templatePrefix = templatePrefix_ || USER_MENTION_PREFIX;\n  return RegExp(\"(\".concat(mentionedUsers.map(function(u3) {\n    var userId = u3.userId.replace(\n      // If user.id includes these patterns, need to convert it into an escaped one\n      /([.*+?^${}()|[\\]\\\\])/g,\n      \"\\\\$1\"\n    );\n    return \"\".concat(templatePrefix, \"\\\\{\").concat(userId, \"\\\\}\");\n  }).join(\"|\"), \")\"), \"g\");\n}\nfunction identifyMentions(_a2) {\n  var tokens = _a2.tokens, _b2 = _a2.mentionedUsers, mentionedUsers = _b2 === void 0 ? [] : _b2, _c = _a2.templatePrefix, templatePrefix = _c === void 0 ? USER_MENTION_PREFIX : _c;\n  if (!(mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length)) {\n    return tokens;\n  }\n  var userMentionRegex = getUserMentionRegex(mentionedUsers, templatePrefix);\n  var results = tokens.map(function(token) {\n    if (token.type !== TOKEN_TYPES.undetermined) {\n      return token;\n    }\n    var value = token.value;\n    var parts = value.split(userMentionRegex);\n    var tokens2 = parts.map(function(part) {\n      if (part.match(userMentionRegex)) {\n        var matchedUser = mentionedUsers.find(function(user) {\n          return \"@{\".concat(user === null || user === void 0 ? void 0 : user.userId, \"}\") === part;\n        });\n        var nickname = (matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.nickname) || \"(No name)\";\n        return { value: nickname, type: TOKEN_TYPES.mention, userId: matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.userId };\n      } else {\n        return { value: part, type: TOKEN_TYPES.undetermined };\n      }\n    });\n    return tokens2;\n  }).flat();\n  return results;\n}\nfunction identifyUrlsAndStrings(token) {\n  var URL_REG = /(?:https?:\\/\\/|www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.(xn--)?[a-z]{2,20}\\b([-a-zA-Z0-9@:%_+[\\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g;\n  var results = token.map(function(token2) {\n    if (token2.type !== TOKEN_TYPES.undetermined) {\n      return token2;\n    }\n    var _a2 = token2.value, value = _a2 === void 0 ? \"\" : _a2;\n    var matches = Array.from(value.matchAll(URL_REG));\n    var founds = matches.map(function(value2) {\n      var _a3;\n      var text2 = value2[0];\n      var start = (_a3 = value2.index) !== null && _a3 !== void 0 ? _a3 : 0;\n      var end = start + text2.length;\n      return { text: text2, start, end };\n    });\n    var items = [{ value, type: TOKEN_TYPES.string }];\n    var cursor = 0;\n    founds.forEach(function(_a3) {\n      var text2 = _a3.text, start = _a3.start, end = _a3.end;\n      var restText = items.pop().value;\n      var head = restText.slice(0, start - cursor);\n      var mid = text2;\n      var tail = restText.slice(end - cursor);\n      if (head.length > 0)\n        items.push({ value: head, type: TOKEN_TYPES.string });\n      items.push({ value: mid, type: TOKEN_TYPES.url });\n      if (tail.length > 0)\n        items.push({ value: tail, type: TOKEN_TYPES.string });\n      cursor = end;\n    });\n    return items;\n  }).flat();\n  return results;\n}\nfunction splitTokensWithMarkdowns(tokens) {\n  var prevTokens = tokens;\n  var newTokens = [];\n  prevTokens.forEach(function(token) {\n    if (token.type === TOKEN_TYPES.mention || token.type === TOKEN_TYPES.markdown) {\n      newTokens.push(token);\n      return;\n    }\n    var rawStr = token.value;\n    var matches = Array.from(rawStr.matchAll(MarkdownRegex));\n    var allMatches = matches.map(function(value) {\n      var _a2;\n      var text2 = value[0];\n      var start = (_a2 = value.index) !== null && _a2 !== void 0 ? _a2 : 0;\n      var end = start + text2.length;\n      return { text: text2, start, end, groups: value.filter(function(val) {\n        return typeof val === \"string\";\n      }) };\n    });\n    var restText = rawStr;\n    var cursor = 0;\n    allMatches.forEach(function(_a2) {\n      var text2 = _a2.text, start = _a2.start, end = _a2.end, groups = _a2.groups;\n      var left = {\n        type: TOKEN_TYPES.undetermined,\n        value: restText.slice(0, start - cursor)\n      };\n      newTokens.push(left);\n      var markdownType;\n      if (text2.startsWith(\"[\")) {\n        markdownType = \"url\";\n      } else if (text2.startsWith(\"**\")) {\n        markdownType = \"bold\";\n      }\n      var mid = {\n        type: TOKEN_TYPES.markdown,\n        markdownType,\n        value: text2,\n        groups\n      };\n      newTokens.push(mid);\n      restText = rawStr.slice(end);\n      cursor = end;\n    });\n    if (restText) {\n      var right = {\n        type: TOKEN_TYPES.undetermined,\n        value: restText\n      };\n      newTokens.push(right);\n    }\n  });\n  return newTokens;\n}\nfunction combineNearbyStrings(tokens) {\n  var results = tokens.reduce(function(acc, token) {\n    var lastToken = acc[acc.length - 1];\n    if ((lastToken === null || lastToken === void 0 ? void 0 : lastToken.type) === TOKEN_TYPES.string && token.type === TOKEN_TYPES.string) {\n      lastToken.value = \"\".concat(lastToken.value).concat(token.value);\n      return acc;\n    }\n    return __spreadArray(__spreadArray([], acc, true), [token], false);\n  }, []);\n  return results;\n}\nfunction tokenizeMessage(_a2) {\n  var messageText2 = _a2.messageText, _b2 = _a2.mentionedUsers, mentionedUsers = _b2 === void 0 ? [] : _b2, _c = _a2.templatePrefix, templatePrefix = _c === void 0 ? USER_MENTION_PREFIX : _c, _d = _a2.includeMarkdown, includeMarkdown = _d === void 0 ? false : _d;\n  var partialResult = [{\n    type: TOKEN_TYPES.undetermined,\n    value: messageText2\n  }];\n  var partialWithMentions = identifyMentions({\n    tokens: partialResult,\n    mentionedUsers,\n    templatePrefix\n  });\n  var partialsWithUrlsAndMentions = identifyUrlsAndStrings(includeMarkdown ? splitTokensWithMarkdowns(partialWithMentions) : partialWithMentions);\n  var result = combineNearbyStrings(partialsWithUrlsAndMentions);\n  return result;\n}\nfunction getChannelPreviewMessage(messageText2) {\n  var partialResult = [{\n    type: TOKEN_TYPES.undetermined,\n    value: messageText2\n  }];\n  var tokens = splitTokensWithMarkdowns(partialResult);\n  return markDownTokenResolver(tokens);\n}\nfunction markDownTokenResolver(tokens) {\n  var result = tokens.map(function(token) {\n    if (token.type === TOKEN_TYPES.markdown) {\n      return markDownTokenResolver(tokenizeMarkdown({ messageText: token.groups[1] }));\n    }\n    return token.value;\n  });\n  return result.join(\"\");\n}\nfunction tokenizeMarkdown(_a2) {\n  var messageText2 = _a2.messageText;\n  var partialResult = [{\n    type: TOKEN_TYPES.undetermined,\n    value: messageText2\n  }];\n  var result = combineNearbyStrings(splitTokensWithMarkdowns(partialResult));\n  return result;\n}\nfunction getWhiteSpacePreservedText(text2) {\n  var NON_BREAKING_SPACE = \"\";\n  var lines = text2.split(\"\\n\");\n  var processedLines = lines.map(function(line) {\n    var _a2, _b2;\n    var leadingWhitespace = ((_a2 = line.match(/^\\s*/)) === null || _a2 === void 0 ? void 0 : _a2[0]) || \"\";\n    var trailingWhitespace = ((_b2 = line.match(/\\s*$/)) === null || _b2 === void 0 ? void 0 : _b2[0]) || \"\";\n    var convertedLeadingWhitespace = leadingWhitespace.replace(/ /g, NON_BREAKING_SPACE);\n    var convertedTrailingWhitespace = trailingWhitespace.replace(/ /g, NON_BREAKING_SPACE);\n    return convertedLeadingWhitespace + line.trim() + convertedTrailingWhitespace;\n  });\n  var result = processedLines.join(\"\\n\");\n  return result;\n}\nvar ChannelType;\n(function(ChannelType2) {\n  ChannelType2[\"BASE\"] = \"base\";\n  ChannelType2[\"GROUP\"] = \"group\";\n  ChannelType2[\"OPEN\"] = \"open\";\n})(ChannelType || (ChannelType = {}));\nvar checkIfFileUploadEnabled = function(_a2) {\n  var channel = _a2.channel, config2 = _a2.config;\n  var isEnabled = K(channel === null || channel === void 0 ? void 0 : channel.channelType).with(ChannelType.GROUP, function() {\n    var _a3;\n    return (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.groupChannel) === null || _a3 === void 0 ? void 0 : _a3.enableDocument;\n  }).with(ChannelType.OPEN, function() {\n    var _a3;\n    return (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.openChannel) === null || _a3 === void 0 ? void 0 : _a3.enableDocument;\n  }).otherwise(function() {\n    return true;\n  });\n  return isEnabled;\n};\nvar TEXT_FIELD_ID = \"sendbird-message-input-text-field\";\nvar noop$3 = function() {\n  return null;\n};\nvar resetInput = function(ref) {\n  if (ref && ref.current) {\n    ref.current.innerHTML = \"\";\n  }\n};\nvar initialTargetStringInfo = {\n  targetString: \"\",\n  startNodeIndex: null,\n  startOffsetIndex: null,\n  endNodeIndex: null,\n  endOffsetIndex: null\n};\nvar MessageInput = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, externalRef) {\n  var _a2, _b2, _c, _d, _e2;\n  var channel = props.channel, _f = props.className, className = _f === void 0 ? \"\" : _f, _g2 = props.messageFieldId, messageFieldId = _g2 === void 0 ? \"\" : _g2, _h = props.isEdit, isEdit = _h === void 0 ? false : _h, _j = props.isMobile, isMobile = _j === void 0 ? false : _j, _k = props.isMentionEnabled, isMentionEnabled = _k === void 0 ? false : _k, _l = props.isVoiceMessageEnabled, isVoiceMessageEnabled = _l === void 0 ? true : _l, _m = props.isSelectingMultipleFilesEnabled, isSelectingMultipleFilesEnabled = _m === void 0 ? false : _m, _o = props.disabled, disabled = _o === void 0 ? false : _o, _p = props.message, message = _p === void 0 ? null : _p, _q = props.placeholder, placeholder = _q === void 0 ? \"\" : _q, _r2 = props.maxLength, maxLength = _r2 === void 0 ? 5e3 : _r2, _s2 = props.onFileUpload, onFileUpload = _s2 === void 0 ? noop$3 : _s2, _t2 = props.onSendMessage, onSendMessage = _t2 === void 0 ? noop$3 : _t2, _u = props.onUpdateMessage, onUpdateMessage = _u === void 0 ? noop$3 : _u, _v = props.onCancelEdit, onCancelEdit = _v === void 0 ? noop$3 : _v, _w = props.onStartTyping, onStartTyping = _w === void 0 ? noop$3 : _w, _x = props.channelUrl, channelUrl = _x === void 0 ? \"\" : _x, _y = props.mentionSelectedUser, mentionSelectedUser = _y === void 0 ? null : _y, _z = props.onUserMentioned, onUserMentioned = _z === void 0 ? noop$3 : _z, _0 = props.onMentionStringChange, onMentionStringChange = _0 === void 0 ? noop$3 : _0, _1 = props.onMentionedUserIdsUpdated, onMentionedUserIdsUpdated = _1 === void 0 ? noop$3 : _1, _2 = props.onVoiceMessageIconClick, onVoiceMessageIconClick = _2 === void 0 ? noop$3 : _2, _3 = props.onKeyUp, onKeyUp = _3 === void 0 ? noop$3 : _3, _4 = props.onKeyDown, onKeyDown = _4 === void 0 ? noop$3 : _4, _5 = props.renderFileUploadIcon, renderFileUploadIcon = _5 === void 0 ? noop$3 : _5, _6 = props.renderVoiceMessageIcon, renderVoiceMessageIcon = _6 === void 0 ? noop$3 : _6, _7 = props.renderSendMessageIcon, renderSendMessageIcon = _7 === void 0 ? noop$3 : _7, _8 = props.setMentionedUsers, setMentionedUsers = _8 === void 0 ? noop$3 : _8, acceptableMimeTypes = props.acceptableMimeTypes;\n  var internalRef = externalRef && \"current\" in externalRef ? externalRef : Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var ghostInputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var textFieldId = messageFieldId || TEXT_FIELD_ID;\n  var stringSet2 = useLocalization().stringSet;\n  var _9 = useSendbird().state, config2 = _9.config, eventHandlers = _9.eventHandlers;\n  var isFileUploadEnabled = checkIfFileUploadEnabled({\n    channel,\n    config: config2\n  });\n  var fileInputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var _10 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isInput = _10[0], setIsInput = _10[1];\n  var _11 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUserIds = _11[0], setMentionedUserIds = _11[1];\n  var _12 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(__assign({}, initialTargetStringInfo)), targetStringInfo = _12[0], setTargetStringInfo = _12[1];\n  var initialValue = props === null || props === void 0 ? void 0 : props.value;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n    setMentionedUserIds([]);\n    setIsInput((textField === null || textField === void 0 ? void 0 : textField.textContent) ? textField.textContent.trim().length > 0 : false);\n  }, [initialValue]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (!isEdit) {\n      setIsInput(false);\n      resetInput(internalRef);\n    }\n  }, [channelUrl]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3, _b3;\n    if (isEdit && (message === null || message === void 0 ? void 0 : message.messageId)) {\n      var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n      if (isMentionEnabled && (message === null || message === void 0 ? void 0 : message.mentionedUsers) && message.mentionedUsers.length > 0 && (message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate) && message.mentionedMessageTemplate.length > 0) {\n        var _c2 = message.mentionedUsers, mentionedUsers_1 = _c2 === void 0 ? [] : _c2;\n        var tokens = tokenizeMessage({\n          messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,\n          mentionedUsers: mentionedUsers_1,\n          includeMarkdown: channel.isGroupChannel() && config2.groupChannel.enableMarkdownForUserMessage\n        });\n        if (textField) {\n          textField.innerHTML = tokens.map(function(token) {\n            if (token.type === TOKEN_TYPES.mention) {\n              var mentionedUser = mentionedUsers_1.find(function(user) {\n                return user.userId === token.userId;\n              });\n              var nickname = \"\".concat(USER_MENTION_PREFIX).concat((mentionedUser === null || mentionedUser === void 0 ? void 0 : mentionedUser.nickname) || token.value || stringSet2.MENTION_NAME__NO_NAME);\n              return renderToString({\n                userId: token.userId,\n                nickname\n              });\n            }\n            return sanitizeString(token.value);\n          }).join(\"\");\n        }\n      } else {\n        try {\n          if (textField) {\n            textField.innerHTML = (_a3 = sanitizeString(message === null || message === void 0 ? void 0 : message.message)) !== null && _a3 !== void 0 ? _a3 : \"\";\n          }\n        } catch (_d2) {\n        }\n        setMentionedUserIds([]);\n      }\n      setIsInput((textField === null || textField === void 0 ? void 0 : textField.textContent) ? ((_b3 = textField === null || textField === void 0 ? void 0 : textField.textContent) === null || _b3 === void 0 ? void 0 : _b3.trim().length) > 0 : false);\n    }\n  }, [isEdit, message]);\n  var useMentionedLabelDetection = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    var _a3;\n    var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n    if (isMentionEnabled && textField) {\n      var newMentionedUserIds = Array.from(textField.getElementsByClassName(\"sendbird-mention-user-label\")).map(\n        // @ts-ignore\n        function(node2) {\n          var _a4;\n          return (_a4 = node2 === null || node2 === void 0 ? void 0 : node2.dataset) === null || _a4 === void 0 ? void 0 : _a4.userid;\n        }\n      );\n      if (!arrayEqual(mentionedUserIds, newMentionedUserIds) || newMentionedUserIds.length === 0) {\n        onMentionedUserIdsUpdated(newMentionedUserIds);\n        setMentionedUserIds(newMentionedUserIds);\n      }\n    }\n    setIsInput((textField === null || textField === void 0 ? void 0 : textField.textContent) ? ((_a3 = textField.textContent) === null || _a3 === void 0 ? void 0 : _a3.trim().length) > 0 : false);\n  }, [targetStringInfo, isMentionEnabled]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3, _b3, _c2, _d2;\n    if (isMentionEnabled && mentionSelectedUser) {\n      var targetString = targetStringInfo.targetString, startNodeIndex = targetStringInfo.startNodeIndex, startOffsetIndex = targetStringInfo.startOffsetIndex, endNodeIndex = targetStringInfo.endNodeIndex, endOffsetIndex = targetStringInfo.endOffsetIndex;\n      var textField_1 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n      if (targetString && startNodeIndex !== null && startOffsetIndex !== null && endOffsetIndex !== null && endNodeIndex !== null && textField_1) {\n        var childNodes = nodeListToArray(textField_1 === null || textField_1 === void 0 ? void 0 : textField_1.childNodes);\n        var startNodeTextContent = (_b3 = (_a3 = childNodes[startNodeIndex]) === null || _a3 === void 0 ? void 0 : _a3.textContent) !== null && _b3 !== void 0 ? _b3 : \"\";\n        var frontTextNode = document.createTextNode(startNodeTextContent.slice(0, startOffsetIndex));\n        var endNodeTextContent = (_d2 = (_c2 = childNodes[endNodeIndex]) === null || _c2 === void 0 ? void 0 : _c2.textContent) !== null && _d2 !== void 0 ? _d2 : \"\";\n        var backTextNode = endOffsetIndex && document.createTextNode(\"\".concat(endNodeTextContent.slice(endOffsetIndex)));\n        var mentionLabel = renderToString({\n          userId: mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.userId,\n          nickname: \"\".concat(USER_MENTION_TEMP_CHAR).concat((mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.nickname) || stringSet2.MENTION_NAME__NO_NAME)\n        });\n        var div = document.createElement(\"div\");\n        div.innerHTML = mentionLabel;\n        var newNodes = __spreadArray(__spreadArray(__spreadArray([], childNodes.slice(0, startNodeIndex), true), [\n          frontTextNode,\n          div.childNodes[0],\n          backTextNode\n        ], false), childNodes.slice(endNodeIndex + 1), true);\n        if (textField_1) {\n          textField_1.innerHTML = \"\";\n          newNodes.forEach(function(newNode) {\n            if (newNode) {\n              textField_1.appendChild(newNode);\n            }\n          });\n        }\n        onUserMentioned(mentionSelectedUser);\n        if (window.getSelection || document.getSelection) {\n          var selection = window.getSelection() || document.getSelection();\n          selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();\n          var range2 = new Range();\n          range2.selectNodeContents(textField_1);\n          range2.setStart(textField_1.childNodes[startNodeIndex + 2], 1);\n          range2.setEnd(textField_1.childNodes[startNodeIndex + 2], 1);\n          range2.collapse(false);\n          selection === null || selection === void 0 ? void 0 : selection.addRange(range2);\n          textField_1.focus();\n        }\n        setTargetStringInfo(__assign({}, initialTargetStringInfo));\n        useMentionedLabelDetection();\n      }\n    }\n  }, [mentionSelectedUser, isMentionEnabled]);\n  var useMentionInputDetection = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    var _a3, _b3;\n    var selection = ((_a3 = window === null || window === void 0 ? void 0 : window.getSelection) === null || _a3 === void 0 ? void 0 : _a3.call(window)) || ((_b3 = document === null || document === void 0 ? void 0 : document.getSelection) === null || _b3 === void 0 ? void 0 : _b3.call(document));\n    var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n    if ((selection === null || selection === void 0 ? void 0 : selection.anchorNode) === textField) {\n      onMentionStringChange(\"\");\n    }\n    if (isMentionEnabled && textField && selection && selection.anchorNode === selection.focusNode && selection.anchorOffset === selection.focusOffset) {\n      var textStack = \"\";\n      var startNodeIndex = null;\n      var startOffsetIndex = null;\n      var _loop_1 = function(index3) {\n        var currentNode = textField.childNodes[index3];\n        if (currentNode.nodeType === NodeTypes.TextNode) {\n          var textContent = function() {\n            var _a4;\n            if (currentNode === selection.anchorNode) {\n              return (currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent) ? currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent.slice(0, selection.anchorOffset) : \"\";\n            }\n            return (_a4 = currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent) !== null && _a4 !== void 0 ? _a4 : \"\";\n          }();\n          if (textStack.length > 0) {\n            textStack += textContent;\n          } else {\n            var charLastIndex = textContent.lastIndexOf(USER_MENTION_TEMP_CHAR);\n            for (var i3 = charLastIndex - 1; i3 > -1; i3 -= 1) {\n              if (textContent[i3] === USER_MENTION_TEMP_CHAR) {\n                charLastIndex = i3;\n              } else {\n                break;\n              }\n            }\n            if (charLastIndex > -1) {\n              textStack = textContent;\n              startNodeIndex = index3;\n              startOffsetIndex = charLastIndex;\n            }\n          }\n        } else {\n          textStack = \"\";\n          startNodeIndex = null;\n          startOffsetIndex = null;\n        }\n        if (currentNode === selection.anchorNode) {\n          var targetString = textStack && startOffsetIndex !== null ? textStack.slice(startOffsetIndex) : \"\";\n          setTargetStringInfo({\n            targetString,\n            startNodeIndex,\n            startOffsetIndex,\n            endNodeIndex: index3,\n            endOffsetIndex: selection.anchorOffset\n          });\n          onMentionStringChange(targetString);\n          return { value: void 0 };\n        }\n      };\n      for (var index2 = 0; index2 < textField.childNodes.length; index2 += 1) {\n        var state_1 = _loop_1(index2);\n        if (typeof state_1 === \"object\")\n          return state_1.value;\n      }\n    }\n  }, [isMentionEnabled]);\n  var sendMessage = function() {\n    var _a3, _b3;\n    try {\n      var textField_2 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n      if (!isEdit && (textField_2 === null || textField_2 === void 0 ? void 0 : textField_2.textContent)) {\n        var _c2 = extractTextAndMentions(textField_2.childNodes), messageText2 = _c2.messageText, mentionTemplate = _c2.mentionTemplate;\n        var params = { message: messageText2, mentionTemplate };\n        onSendMessage(params);\n        resetInput(internalRef);\n        if (isMobileIOS(navigator.userAgent)) {\n          if (ghostInputRef.current)\n            ghostInputRef.current.focus();\n          requestAnimationFrame(function() {\n            return textField_2.focus();\n          });\n        } else {\n          textField_2.focus();\n        }\n        setIsInput(false);\n      }\n    } catch (error) {\n      (_b3 = (_a3 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.message) === null || _a3 === void 0 ? void 0 : _a3.onSendMessageFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, message, error);\n    }\n  };\n  var isEditDisabled = !((_b2 = (_a2 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _a2 === void 0 ? void 0 : _a2.textContent) === null || _b2 === void 0 ? void 0 : _b2.trim());\n  var editMessage = function() {\n    var _a3, _b3;\n    try {\n      var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;\n      var messageId = message === null || message === void 0 ? void 0 : message.messageId;\n      if (isEdit && messageId && textField) {\n        var _c2 = extractTextAndMentions(textField.childNodes), messageText2 = _c2.messageText, mentionTemplate = _c2.mentionTemplate;\n        var params = { messageId, message: messageText2, mentionTemplate };\n        onUpdateMessage(params);\n        resetInput(internalRef);\n      }\n    } catch (error) {\n      (_b3 = (_a3 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.message) === null || _a3 === void 0 ? void 0 : _a3.onUpdateMessageFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, message, error);\n    }\n  };\n  var onPaste = usePaste({\n    ref: internalRef,\n    setMentionedUsers,\n    channel,\n    setIsInput\n  });\n  var uploadFile = function(event) {\n    var _a3, _b3;\n    var files = event.currentTarget.files;\n    try {\n      if (files) {\n        onFileUpload(Array.from(files));\n      }\n    } catch (error) {\n      (_b3 = (_a3 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.message) === null || _a3 === void 0 ? void 0 : _a3.onFileUploadFailed) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, error);\n    } finally {\n      event.target.value = \"\";\n    }\n  };\n  var adjustScrollToCaret = function() {\n    var _a3;\n    var inputRef = internalRef;\n    var selection = window.getSelection();\n    if (!selection || selection.rangeCount === 0)\n      return;\n    var range2 = selection.getRangeAt(selection.rangeCount - 1);\n    var rect = range2.getBoundingClientRect();\n    var container = (_a3 = inputRef.current) === null || _a3 === void 0 ? void 0 : _a3.getBoundingClientRect();\n    if (!container || !inputRef.current)\n      return;\n    if (rect.bottom > container.bottom) {\n      var scrollAmount = Math.min(\n        rect.bottom - container.bottom,\n        // Calculate how much we need to scroll\n        inputRef.current.scrollHeight - inputRef.current.clientHeight\n      );\n      inputRef.current.scrollTop += scrollAmount;\n    } else if (rect.top < container.top) {\n      var scrollAmount = Math.min(\n        container.top - rect.top,\n        // Calculate how much we need to scroll\n        inputRef.current.scrollTop\n      );\n      inputRef.current.scrollTop -= scrollAmount;\n    }\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"form\",\n    { className: classnames.apply(void 0, __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], false), [\n      isEdit && \"sendbird-message-input__edit\",\n      disabled && \"sendbird-message-input-form__disabled\"\n    ], false)) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: classnames(\"sendbird-message-input\", disabled && \"sendbird-message-input__disabled\"), \"data-testid\": \"sendbird-message-input\" },\n      isMobileIOS(navigator.userAgent) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { id: \"ghost-input-reset-ime-cjk\", ref: ghostInputRef, style: { opacity: 0, padding: 0, margin: 0, height: 0, border: \"none\", position: \"absolute\", top: -9999 }, defaultValue: \"_\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        id: \"\".concat(textFieldId).concat(isEdit ? message === null || message === void 0 ? void 0 : message.messageId : \"\"),\n        className: \"sendbird-message-input--textarea \".concat(textFieldId),\n        contentEditable: !disabled,\n        role: \"textbox\",\n        \"aria-label\": \"Text Input\",\n        ref: internalRef,\n        // @ts-ignore\n        disabled,\n        maxLength,\n        onKeyDown: function(e3) {\n          var _a3, _b3, _c2, _d2;\n          var preventEvent = onKeyDown(e3);\n          if (preventEvent) {\n            e3.preventDefault();\n          } else {\n            if (!e3.shiftKey && e3.key === MessageInputKeys.Enter && !isMobile && ((_a3 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _a3 === void 0 ? void 0 : _a3.textContent) && internalRef.current.textContent.trim().length > 0 && ((_b3 = e3 === null || e3 === void 0 ? void 0 : e3.nativeEvent) === null || _b3 === void 0 ? void 0 : _b3.isComposing) !== true) {\n              e3.preventDefault();\n              sendMessage();\n            }\n            if (e3.key === MessageInputKeys.Backspace && ((_d2 = (_c2 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _c2 === void 0 ? void 0 : _c2.childNodes) === null || _d2 === void 0 ? void 0 : _d2.length) === 2 && !internalRef.current.childNodes[0].textContent && internalRef.current.childNodes[1].nodeType === NodeTypes.ElementNode) {\n              internalRef.current.removeChild(internalRef.current.childNodes[1]);\n            }\n          }\n        },\n        onKeyUp: function(e3) {\n          var preventEvent = onKeyUp(e3);\n          if (preventEvent) {\n            e3.preventDefault();\n          } else {\n            useMentionInputDetection();\n          }\n        },\n        onClick: function() {\n          useMentionInputDetection();\n        },\n        onInput: function() {\n          var _a3;\n          onStartTyping();\n          setIsInput(((_a3 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _a3 === void 0 ? void 0 : _a3.textContent) ? internalRef.current.textContent.trim().length > 0 : false);\n          useMentionedLabelDetection();\n        },\n        onPaste: function(e3) {\n          onPaste(e3);\n          setTimeout(adjustScrollToCaret);\n        }\n      }),\n      ((_e2 = (_d = (_c = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _c === void 0 ? void 0 : _c.textContent) === null || _d === void 0 ? void 0 : _d.length) !== null && _e2 !== void 0 ? _e2 : 0) === 0 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-message-input--placeholder\", type: LabelTypography.BODY_1, color: disabled ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_3 }, placeholder || stringSet2.MESSAGE_INPUT__PLACE_HOLDER),\n      !isEdit && isInput && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconButton$1, { className: \"sendbird-message-input--send\", height: \"32px\", width: \"32px\", onClick: function() {\n        return sendMessage();\n      }, testID: \"sendbird-message-input-send-button\" }, (renderSendMessageIcon === null || renderSendMessageIcon === void 0 ? void 0 : renderSendMessageIcon()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SEND, fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY, width: \"20px\", height: \"20px\" })),\n      !isEdit && !isInput && ((renderFileUploadIcon === null || renderFileUploadIcon === void 0 ? void 0 : renderFileUploadIcon()) || isFileUploadEnabled && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        IconButton$1,\n        { className: classnames(\"sendbird-message-input--attach\", isVoiceMessageEnabled && \"is-voice-message-enabled\"), height: \"32px\", width: \"32px\", onClick: function() {\n          var _a3, _b3;\n          (_b3 = (_a3 = fileInputRef === null || fileInputRef === void 0 ? void 0 : fileInputRef.current) === null || _a3 === void 0 ? void 0 : _a3.click) === null || _b3 === void 0 ? void 0 : _b3.call(_a3);\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.ATTACH, fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT_INVERSE, width: \"20px\", height: \"20px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n          className: \"sendbird-message-input--attach-input\",\n          type: \"file\",\n          ref: fileInputRef,\n          // It will affect to <Channel /> and <Thread />\n          onChange: function(event) {\n            return uploadFile(event);\n          },\n          accept: getMimeTypesUIKitAccepts(acceptableMimeTypes),\n          multiple: isSelectingMultipleFilesEnabled && isChannelTypeSupportsMultipleFilesMessage(channel)\n        })\n      )),\n      isVoiceMessageEnabled && !isEdit && !isInput && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconButton$1, { className: \"sendbird-message-input--voice-message\", width: \"32px\", height: \"32px\", onClick: onVoiceMessageIconClick }, (renderVoiceMessageIcon === null || renderVoiceMessageIcon === void 0 ? void 0 : renderVoiceMessageIcon()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.AUDIO_ON_LINED, fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT_INVERSE, width: \"20px\", height: \"20px\" }))\n    ),\n    isEdit && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message-input--edit-action\", \"data-testid\": \"sendbird-message-input--edit-action\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { className: \"sendbird-message-input--edit-action__cancel\", type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: onCancelEdit }, stringSet2.BUTTON__CANCEL),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { className: \"sendbird-message-input--edit-action__save\", type: ButtonTypes.PRIMARY, size: ButtonSizes.SMALL, disabled: isEditDisabled, onClick: function() {\n        return editMessage();\n      } }, stringSet2.BUTTON__SAVE)\n    )\n  );\n});\nfunction startOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\nfunction isSameDay(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);\n  var dateRightStartOfDay = startOfDay(dirtyDateRight);\n  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();\n}\nfunction isToday(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameDay(dirtyDate, Date.now());\n}\nfunction isSameYear(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeft = toDate(dirtyDateLeft);\n  var dateRight = toDate(dirtyDateRight);\n  return dateLeft.getFullYear() === dateRight.getFullYear();\n}\nfunction isThisYear(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameYear(dirtyDate, Date.now());\n}\nfunction addDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n  if (isNaN(amount)) {\n    return /* @__PURE__ */ new Date(NaN);\n  }\n  if (!amount) {\n    return date;\n  }\n  date.setDate(date.getDate() + amount);\n  return date;\n}\nfunction subDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addDays(dirtyDate, -amount);\n}\nfunction isYesterday(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameDay(dirtyDate, subDays(Date.now(), 1));\n}\nvar getChannelTitle = function(channel, currentUserId, stringSet2) {\n  var _a2;\n  if (stringSet2 === void 0) {\n    stringSet2 = LabelStringSet;\n  }\n  if (!(channel === null || channel === void 0 ? void 0 : channel.name) && !(channel === null || channel === void 0 ? void 0 : channel.members)) {\n    return stringSet2.NO_TITLE;\n  }\n  if (!isDefaultChannelName(channel)) {\n    return channel.name;\n  }\n  if (((_a2 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a2 === void 0 ? void 0 : _a2.length) === 1) {\n    return stringSet2.NO_MEMBERS;\n  }\n  return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).filter(function(_a3) {\n    var userId = _a3.userId;\n    return userId !== currentUserId;\n  }).map(function(_a3) {\n    var nickname = _a3.nickname;\n    return nickname || stringSet2.NO_NAME;\n  }).join(\", \");\n};\nvar getLastMessageCreatedAt = function(_a2) {\n  var _b2;\n  var channel = _a2.channel, locale2 = _a2.locale, _c = _a2.stringSet, stringSet2 = _c === void 0 ? LabelStringSet : _c;\n  var createdAt = (_b2 = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _b2 === void 0 ? void 0 : _b2.createdAt;\n  var optionalParam = locale2 ? { locale: locale2 } : null;\n  if (!createdAt) {\n    return \"\";\n  }\n  if (isToday(createdAt)) {\n    return format(createdAt, stringSet2.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY, optionalParam);\n  }\n  if (isYesterday(createdAt)) {\n    return stringSet2.MESSAGE_STATUS__YESTERDAY || \"Yesterday\";\n  }\n  if (isThisYear(createdAt)) {\n    return format(createdAt, stringSet2.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR, optionalParam);\n  }\n  return format(createdAt, stringSet2.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR, optionalParam);\n};\nvar getTotalMembers = function(channel) {\n  return (channel === null || channel === void 0 ? void 0 : channel.memberCount) ? channel.memberCount : 0;\n};\nvar getChannelPreviewFileDisplayString = function(mimeType, stringSet2) {\n  var _a2, _b2, _c, _d, _e2, _f;\n  if (stringSet2 === void 0) {\n    stringSet2 = LabelStringSet;\n  }\n  if (isGif$1(mimeType)) {\n    return (_a2 = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF) !== null && _a2 !== void 0 ? _a2 : \"\";\n  }\n  if (isImage(mimeType)) {\n    return (_b2 = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO) !== null && _b2 !== void 0 ? _b2 : \"\";\n  }\n  if (isVideo(mimeType)) {\n    return (_c = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO) !== null && _c !== void 0 ? _c : \"\";\n  }\n  if (isAudio(mimeType)) {\n    return (_d = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO) !== null && _d !== void 0 ? _d : \"\";\n  }\n  if (isVoiceMessageMimeType(mimeType)) {\n    return (_e2 = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE) !== null && _e2 !== void 0 ? _e2 : \"\";\n  }\n  return (_f = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL) !== null && _f !== void 0 ? _f : \"\";\n};\nvar getPrettyLastMessage = function(message, stringSet2) {\n  var _a2, _b2, _c, _d;\n  if (message === void 0) {\n    message = null;\n  }\n  if (stringSet2 === void 0) {\n    stringSet2 = LabelStringSet;\n  }\n  if (!message)\n    return \"\";\n  if (isTemplateMessage(message)) {\n    return stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE;\n  }\n  if (message.isFileMessage()) {\n    return getChannelPreviewFileDisplayString(message.type, stringSet2);\n  }\n  if (message.isMultipleFilesMessage()) {\n    var mimeType = (_b2 = (_a2 = message.fileInfoList) === null || _a2 === void 0 ? void 0 : _a2[0]) === null || _b2 === void 0 ? void 0 : _b2.mimeType;\n    if (isImage(mimeType) || isGif$1(mimeType)) {\n      return (_c = stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO) !== null && _c !== void 0 ? _c : \"\";\n    }\n    return getChannelPreviewFileDisplayString(mimeType, stringSet2);\n  }\n  return (_d = message.message) !== null && _d !== void 0 ? _d : \"\";\n};\nvar getLastMessageText = function(channel, stringSet2) {\n  if (stringSet2 === void 0) {\n    stringSet2 = LabelStringSet;\n  }\n  return (channel === null || channel === void 0 ? void 0 : channel.lastMessage) ? getPrettyLastMessage(channel === null || channel === void 0 ? void 0 : channel.lastMessage, stringSet2) : \"\";\n};\nvar getChannelUnreadMessageCount = function(channel) {\n  return (channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) ? channel.unreadMessageCount : 0;\n};\nvar _a, _b;\nvar iconType = (_a = {}, _a[OutgoingMessageStates.SENT] = IconTypes.DONE, _a[OutgoingMessageStates.DELIVERED] = IconTypes.DONE_ALL, _a[OutgoingMessageStates.READ] = IconTypes.DONE_ALL, _a[OutgoingMessageStates.FAILED] = IconTypes.ERROR, _a[OutgoingMessageStates.PENDING] = void 0, _a[OutgoingMessageStates.NONE] = void 0, _a);\nvar iconColor = (_b = {}, _b[OutgoingMessageStates.SENT] = IconColors.SENT, _b[OutgoingMessageStates.DELIVERED] = IconColors.SENT, _b[OutgoingMessageStates.READ] = IconColors.READ, _b[OutgoingMessageStates.FAILED] = IconColors.ERROR, _b[OutgoingMessageStates.PENDING] = void 0, _b[OutgoingMessageStates.NONE] = void 0, _b);\nfunction MessageStatus(_a2) {\n  var _b2;\n  var className = _a2.className, message = _a2.message, channel = _a2.channel, _c = _a2.isDateSeparatorConsidered, isDateSeparatorConsidered = _c === void 0 ? true : _c;\n  var _d = useLocalization(), stringSet2 = _d.stringSet, dateLocale = _d.dateLocale;\n  var status = getOutgoingMessageState(channel, message);\n  var hideMessageStatusIcon = ((_b2 = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _b2 === void 0 ? void 0 : _b2.call(channel)) && ((channel.isSuper || channel.isPublic || channel.isBroadcast) && !(status === OutgoingMessageStates.PENDING || status === OutgoingMessageStates.FAILED));\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-message-status\"\n    ], false).join(\" \") },\n    status === OutgoingMessageStates.PENDING ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Loader,\n      { className: \"sendbird-message-status__icon\", testID: \"sendbird-message-status-icon\", width: \"16px\", height: \"16px\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: \"16px\", height: \"16px\" })\n    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: classnames(\"sendbird-message-status__icon\", hideMessageStatusIcon && \"hide-icon\", status !== OutgoingMessageStates.FAILED && \"sendbird-message-status--sent\"), testID: \"sendbird-message-status-icon\", type: iconType[status] || IconTypes.ERROR, fillColor: iconColor[status], width: \"16px\", height: \"16px\" }),\n    isSentStatus(status) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-message-status__text\", testID: \"sendbird-message-status-text\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, isDateSeparatorConsidered ? format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT, { locale: dateLocale }) : getLastMessageCreatedAt({ channel, locale: dateLocale, stringSet: stringSet2 }))\n  );\n}\nvar componentClassName = \"sendbird-sort-by-row\";\nfunction SortByRow(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, maxItemCount = _a2.maxItemCount, itemWidth = _a2.itemWidth, itemHeight = _a2.itemHeight, children = _a2.children;\n  if (Array.isArray(children) && children.length > maxItemCount) {\n    var result = [];\n    for (var i3 = 0; i3 < children.length; i3 += maxItemCount) {\n      result.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n        componentClassName\n      ], false).join(\" \"), key: uuidv4(), style: {\n        width: itemWidth * maxItemCount,\n        height: itemHeight\n      } }, children.slice(i3, i3 + maxItemCount)));\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, result);\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n    componentClassName\n  ], false).join(\" \"), style: {\n    width: itemWidth * (Array.isArray(children) ? children.length : 1),\n    height: itemHeight\n  } }, children);\n}\nvar APP_LAYOUT_ROOT = \"sendbird-app__layout\";\nvar HEIGHT_PADDING = 60;\nvar MenuItems$1 = (\n  /** @class */\n  function(_super) {\n    __extends(MenuItems2, _super);\n    function MenuItems2(props) {\n      var _this = _super.call(this, props) || this;\n      _this.menuRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();\n      _this.setupEvents = function() {\n        var closeDropdown = _this.props.closeDropdown;\n        var menuRef = _this.menuRef;\n        var handleClickOutside = function(event) {\n          var _a2, _b2;\n          if ((menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) && !((_b2 = (_a2 = menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) === null || _a2 === void 0 ? void 0 : _a2.contains) === null || _b2 === void 0 ? void 0 : _b2.call(_a2, event.target))) {\n            closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();\n          }\n        };\n        _this.setState({\n          handleClickOutside\n        });\n        document.addEventListener(\"mousedown\", handleClickOutside);\n      };\n      _this.cleanUpEvents = function() {\n        var handleClickOutside = _this.state.handleClickOutside;\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n      _this.getMenuPosition = function() {\n        var _a2, _b2, _c;\n        var _d = _this.props, parentRef = _d.parentRef, openLeft = _d.openLeft;\n        var portalElement = document.getElementById(APP_LAYOUT_ROOT);\n        var portalRect = ((_a2 = portalElement === null || portalElement === void 0 ? void 0 : portalElement.getBoundingClientRect) === null || _a2 === void 0 ? void 0 : _a2.call(portalElement)) || {\n          top: 0,\n          left: 0,\n          width: window.innerWidth,\n          height: window.innerHeight\n        };\n        var parentRect = (_c = (_b2 = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _b2 === void 0 ? void 0 : _b2.getBoundingClientRect) === null || _c === void 0 ? void 0 : _c.call(_b2);\n        var x3 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0) - portalRect.left;\n        var y4 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0) - portalRect.top;\n        var menuStyle = {\n          top: y4,\n          left: x3\n        };\n        if (!_this.menuRef.current)\n          return menuStyle;\n        var rect = _this.menuRef.current.getBoundingClientRect();\n        if (y4 + rect.height + HEIGHT_PADDING > portalRect.height) {\n          menuStyle.top -= rect.height;\n        }\n        if (x3 + rect.width > portalRect.width && !openLeft) {\n          menuStyle.left -= rect.width;\n        }\n        if (menuStyle.top < 0) {\n          menuStyle.top = rect.height < portalRect.height ? (portalRect.height - rect.height) / 2 : 0;\n        }\n        menuStyle.top += 32;\n        if (openLeft) {\n          var padding = Number.isNaN(rect.width - 30) ? 108 : rect.width - 30;\n          menuStyle.left -= padding;\n        }\n        if (menuStyle.left < 0) {\n          menuStyle.left = rect.width < portalRect.width ? (portalRect.width - rect.width) / 2 : 0;\n        }\n        _this.setState({ menuStyle });\n        return menuStyle;\n      };\n      _this.state = {\n        menuStyle: { top: 0, left: 0 },\n        handleClickOutside: function() {\n        }\n      };\n      return _this;\n    }\n    MenuItems2.prototype.componentDidMount = function() {\n      this.setupEvents();\n      this.getMenuPosition();\n    };\n    MenuItems2.prototype.componentWillUnmount = function() {\n      this.cleanUpEvents();\n    };\n    MenuItems2.prototype.render = function() {\n      var portalElement = document.getElementById(MENU_ROOT_ID);\n      if (!portalElement)\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n      var menuStyle = this.state.menuStyle;\n      var _a2 = this.props, children = _a2.children, style = _a2.style, _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, testID = _a2.testID, id2 = _a2.id;\n      return Object(react_dom__WEBPACK_IMPORTED_MODULE_1__[\"createPortal\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: classnames(MENU_OBSERVING_CLASS_NAME, className), \"data-testid\": testID, id: id2 },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-dropdown__menu-backdrop\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"ul\", { className: \"\".concat(className, \" sendbird-dropdown__menu\"), ref: this.menuRef, style: __assign({ display: \"inline-block\", position: \"fixed\", left: \"\".concat(Math.round(menuStyle.left), \"px\"), top: \"\".concat(Math.round(menuStyle.top), \"px\") }, style), \"data-testid\": \"sendbird-dropdown-menu\" }, children)\n      ), portalElement);\n    };\n    return MenuItems2;\n  }(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component)\n);\nvar defaultParentRect = { x: 0, y: 0, left: 0, top: 0, height: 0 };\nvar EmojiListItems$1 = function(_a2) {\n  var id2 = _a2.id, children = _a2.children, parentRef = _a2.parentRef, parentContainRef = _a2.parentContainRef, _b2 = _a2.spaceFromTrigger, spaceFromTrigger = _b2 === void 0 ? { x: 0, y: 0 } : _b2, closeDropdown = _a2.closeDropdown;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({ left: 0, top: 0 }), reactionStyle = _c[0], setReactionStyle = _c[1];\n  var reactionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (parentContainRef && (parentContainRef === null || parentContainRef === void 0 ? void 0 : parentContainRef.current)) {\n      parentContainRef.current.classList.add(\"sendbird-reactions--pressed\");\n    }\n    return function() {\n      if (parentContainRef && (parentContainRef === null || parentContainRef === void 0 ? void 0 : parentContainRef.current)) {\n        parentContainRef.current.classList.remove(\"sendbird-reactions--pressed\");\n      }\n    };\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var handleClickOutSide = function(event) {\n      var _a3, _b3;\n      if ((reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) && !((_b3 = (_a3 = reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) === null || _a3 === void 0 ? void 0 : _a3.contains) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, event.target))) {\n        closeDropdown();\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutSide);\n    return function() {\n      document.removeEventListener(\"mousedown\", handleClickOutSide);\n    };\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3, _b3, _c2, _d;\n    var spaceFromTriggerX = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.x) || 0;\n    var spaceFromTriggerY = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.y) || 0;\n    var portalElement = document.getElementById(APP_LAYOUT_ROOT);\n    var portalRect = ((_a3 = portalElement === null || portalElement === void 0 ? void 0 : portalElement.getBoundingClientRect) === null || _a3 === void 0 ? void 0 : _a3.call(portalElement)) || {\n      top: 0,\n      left: 0,\n      width: window.innerWidth\n    };\n    var parentRect = (_c2 = (_b3 = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _b3 === void 0 ? void 0 : _b3.getBoundingClientRect()) !== null && _c2 !== void 0 ? _c2 : defaultParentRect;\n    var x3 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0) - portalRect.left;\n    var y4 = ((parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0) - portalRect.top;\n    var reactionStyle2 = {\n      top: y4,\n      left: x3\n    };\n    if (!(reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current)) {\n      setReactionStyle(reactionStyle2);\n    } else {\n      var rect = (_d = reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) === null || _d === void 0 ? void 0 : _d.getBoundingClientRect();\n      if (reactionStyle2.top < rect.height) {\n        reactionStyle2.top += parentRect.height;\n        reactionStyle2.top += spaceFromTriggerY;\n      } else {\n        reactionStyle2.top -= rect.height;\n        reactionStyle2.top -= spaceFromTriggerY;\n      }\n      reactionStyle2.left -= rect.width / 2;\n      reactionStyle2.left += parentRect.height / 2 - 2;\n      reactionStyle2.left += spaceFromTriggerX;\n      var maximumLeft = portalRect.width - rect.width;\n      if (maximumLeft < reactionStyle2.left) {\n        reactionStyle2.left = maximumLeft;\n      }\n      if (reactionStyle2.left < 0) {\n        reactionStyle2.left = 0;\n      }\n      setReactionStyle(reactionStyle2);\n    }\n  }, []);\n  var rootElement = document.getElementById(EMOJI_MENU_ROOT_ID);\n  if (rootElement) {\n    return Object(react_dom__WEBPACK_IMPORTED_MODULE_1__[\"createPortal\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: MENU_OBSERVING_CLASS_NAME, id: id2 },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-dropdown__menu-backdrop\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"ul\",\n        { className: \"sendbird-dropdown__reaction-bar\", \"data-testid\": \"sendbird-dropdown__reaction-bar\", ref: reactionRef, style: {\n          display: \"inline-block\",\n          position: \"fixed\",\n          left: \"\".concat(Math.round(reactionStyle.left), \"px\"),\n          top: \"\".concat(Math.round(reactionStyle.top), \"px\")\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SortByRow, { className: \"sendbird-dropdown__reaction-bar__row\", maxItemCount: 8, itemWidth: 44, itemHeight: 40 }, children)\n      )\n    ), rootElement);\n  }\n  return null;\n};\nvar MessageMenuContext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])(void 0);\nvar MessageMenuProvider = function(_a2) {\n  var children = _a2.children, value = _a2.value;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageMenuContext.Provider, { value }, children);\n};\nvar useMessageMenuContext = function() {\n  var context = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(MessageMenuContext);\n  if (!context) {\n    throw new Error(\"useMessageMenuContext must be used within a MessageMenuProvider.\");\n  }\n  return context;\n};\nvar MenuItem$1 = function(_a2) {\n  var className = _a2.className, disabled = _a2.disabled, _b2 = _a2.tabIndex, tabIndex = _b2 === void 0 ? 0 : _b2, testID = _a2.testID, onClick = _a2.onClick, children = _a2.children;\n  var handleClickEvent = function(e3) {\n    if (!disabled && onClick) {\n      onClick(e3);\n    }\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"li\",\n    { className: classnames(\"sendbird-menu-item\", className), role: \"menuitem\", \"aria-disabled\": disabled, \"data-testid\": testID, tabIndex, onClick: handleClickEvent, onKeyDown: function(e3) {\n      if (e3.code === \"Enter\")\n        handleClickEvent(e3);\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-menu-item__text\", type: LabelTypography.SUBTITLE_2, color: disabled ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, children)\n  );\n};\nvar BottomSheetMenuItem = function(_a2) {\n  var className = _a2.className, _b2 = _a2.disabled, disabled = _b2 === void 0 ? false : _b2, _c = _a2.tabIndex, tabIndex = _c === void 0 ? 0 : _c, testID = _a2.testID, onClick = _a2.onClick, children = _a2.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames(\"sendbird-message__bottomsheet--action\", className), role: \"menuitem\", tabIndex, \"aria-disabled\": disabled, onClick, \"data-testid\": testID }, children);\n};\nvar MENU_OBSERVING_CLASS_NAME = \"sendbird-observing-message-menu\";\nvar getObservingId = function(txt) {\n  return \"m_\".concat(txt);\n};\nvar MenuItems = MenuItems$1;\nvar EmojiListItems = EmojiListItems$1;\nvar MenuItem = function(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, children = _a2.children, onClick = _a2.onClick, _c = _a2.disable, disable2 = _c === void 0 ? false : _c, _d = _a2.dataSbId, dataSbId = _d === void 0 ? \"\" : _d, testID = _a2.testID;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, { className: classnames.apply(void 0, __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], false), [\n    \"sendbird-dropdown__menu-item\",\n    disable2 ? \"disable\" : \"\"\n  ], false)), disabled: disable2, testID: testID !== null && testID !== void 0 ? testID : dataSbId, onClick }, children);\n};\nvar MENU_ROOT_ID = \"sendbird-dropdown-portal\";\nvar MenuRoot = function() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { id: MENU_ROOT_ID, className: MENU_ROOT_ID });\n};\nvar EMOJI_MENU_ROOT_ID = \"sendbird-emoji-list-portal\";\nvar EmojiReactionListRoot = function() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { id: EMOJI_MENU_ROOT_ID });\n};\nfunction ContextMenu(_a2) {\n  var menuTrigger = _a2.menuTrigger, menuItems = _a2.menuItems, isOpen = _a2.isOpen, onClick = _a2.onClick;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showMenu = _b2[0], setShowMenu = _b2[1];\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-context-menu\", onClick },\n    menuTrigger === null || menuTrigger === void 0 ? void 0 : menuTrigger(function() {\n      return setShowMenu(!showMenu);\n    }),\n    (showMenu || isOpen) && menuItems(function() {\n      return setShowMenu(false);\n    })\n  );\n}\nvar TriggerIcon = function(_a2) {\n  var ref = _a2.ref, _b2 = _a2.onClick, onClick = _b2 === void 0 ? noop$4 : _b2, _c = _a2.onBlur, onBlur = _c === void 0 ? noop$4 : _c, _d = _a2.renderIcon, renderIcon = _d === void 0 ? function(props) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, __assign({}, props));\n  } : _d;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconButton$1, { ref, width: \"32px\", height: \"32px\", onClick, onBlur }, renderIcon({\n    type: IconTypes.MORE,\n    fillColor: IconColors.CONTENT_INVERSE,\n    width: \"24px\",\n    height: \"24px\"\n  }));\n};\nvar CopyMenuItem$2 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isUserMessage(message))\n      copyToClipboard$1(message.message);\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : stringSet2.MESSAGE_MENU__COPY);\n};\nvar ReplyMenuItem$2 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, setQuoteMessage = _b2.setQuoteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { disabled: message.parentMessageId > 0, onClick: function(e3) {\n    var _a3;\n    setQuoteMessage(message);\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : stringSet2.MESSAGE_MENU__REPLY);\n};\nvar ThreadMenuItem$2 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, onReplyInThread = _b2.onReplyInThread;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    onReplyInThread({ message });\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : stringSet2.MESSAGE_MENU__THREAD);\n};\nvar OpenInChannelMenuItem = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), hideMenu = _b2.hideMenu, onMoveToParentMessage = _b2.onMoveToParentMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    onMoveToParentMessage();\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : stringSet2.MESSAGE_MENU__OPEN_IN_CHANNEL);\n};\nvar EditMenuItem$2 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), hideMenu = _b2.hideMenu, showEdit = _b2.showEdit, isOnline = _b2.isOnline;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isOnline) {\n      showEdit(true);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : stringSet2.MESSAGE_MENU__EDIT);\n};\nvar ResendMenuItem$2 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, resendMessage = _b2.resendMessage, isOnline = _b2.isOnline;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isOnline) {\n      resendMessage(message);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : stringSet2.MESSAGE_MENU__RESEND);\n};\nvar DeleteMenuItem$2 = function(props) {\n  var _a2, _b2, _c;\n  var stringSet2 = useLocalization().stringSet;\n  var _d = useMessageMenuContext(), message = _d.message, hideMenu = _d.hideMenu, deleteMessage = _d.deleteMessage, showRemove = _d.showRemove, isOnline = _d.isOnline, disableDeleteMessage = _d.disableDeleteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { disabled: typeof disableDeleteMessage === \"boolean\" ? disableDeleteMessage : ((_b2 = (_a2 = message.threadInfo) === null || _a2 === void 0 ? void 0 : _a2.replyCount) !== null && _b2 !== void 0 ? _b2 : 0) > 0, onClick: function(e3) {\n    var _a3;\n    if (isFailedMessage(message)) {\n      deleteMessage(message);\n    } else if (isOnline) {\n      showRemove(true);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_c = props.children) !== null && _c !== void 0 ? _c : stringSet2.MESSAGE_MENU__DELETE);\n};\nvar isReplyTypeMessageEnabled = function(_a2) {\n  var _b2;\n  var channel = _a2.channel, message = _a2.message;\n  if (isFailedMessage(message) || isPendingMessage(message)) {\n    return false;\n  }\n  if (!((_b2 = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _b2 === void 0 ? void 0 : _b2.call(channel)) || (channel === null || channel === void 0 ? void 0 : channel.isEphemeral)) {\n    return false;\n  }\n  var isBroadcast = channel === null || channel === void 0 ? void 0 : channel.isBroadcast;\n  var isOperator2 = (channel === null || channel === void 0 ? void 0 : channel.myRole) === V.OPERATOR;\n  if (isBroadcast)\n    return isOperator2;\n  return true;\n};\nvar showMenuItemCopy = function(_a2) {\n  var message = _a2.message;\n  return isUserMessage(message);\n};\nvar showMenuItemEdit = function(_a2) {\n  var message = _a2.message, channel = _a2.channel, isByMe = _a2.isByMe;\n  return !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral) && isUserMessage(message) && isSentMessage(message) && isByMe;\n};\nvar showMenuItemResend = function(_a2) {\n  var message = _a2.message, isByMe = _a2.isByMe;\n  return isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe;\n};\nvar showMenuItemDelete = function(_a2) {\n  var message = _a2.message, channel = _a2.channel, isByMe = _a2.isByMe;\n  return !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral) && !isPendingMessage(message) && isByMe;\n};\nvar showMenuItemOpenInChannel = function(_a2) {\n  var _b2 = _a2.onMoveToParentMessage, onMoveToParentMessage = _b2 === void 0 ? void 0 : _b2;\n  return !!onMoveToParentMessage;\n};\nvar showMenuItemReply = function(_a2) {\n  var channel = _a2.channel, message = _a2.message, replyType = _a2.replyType;\n  return isReplyTypeMessageEnabled({ channel, message }) && replyType === \"QUOTE_REPLY\";\n};\nvar showMenuItemThread = function(_a2) {\n  var channel = _a2.channel, message = _a2.message, replyType = _a2.replyType, onReplyInThread = _a2.onReplyInThread;\n  return isReplyTypeMessageEnabled({ channel, message }) && replyType === \"THREAD\" && !(message === null || message === void 0 ? void 0 : message.parentMessageId) && typeof onReplyInThread === \"function\";\n};\nvar MessageMenu = function(_a2) {\n  var _b2;\n  var className = _a2.className, message = _a2.message, channel = _a2.channel, isByMe = _a2.isByMe, replyType = _a2.replyType, _c = _a2.renderTrigger, renderTrigger = _c === void 0 ? TriggerIcon : _c, renderMenuItems = _a2.renderMenuItems, _d = _a2.disableDeleteMessage, disableDeleteMessage = _d === void 0 ? null : _d, _e2 = _a2.showEdit, showEdit = _e2 === void 0 ? noop$4 : _e2, _f = _a2.showRemove, showRemove = _f === void 0 ? noop$4 : _f, deleteMessage = _a2.deleteMessage, resendMessage = _a2.resendMessage, setQuoteMessage = _a2.setQuoteMessage, onReplyInThread = _a2.onReplyInThread, onMoveToParentMessage = _a2.onMoveToParentMessage;\n  var isOnline = useSendbird().state.config.isOnline;\n  var triggerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var containerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isMenuVisible = _g2[0], setMenuVisibility = _g2[1];\n  var hideMenu = function() {\n    return setMenuVisibility(false);\n  };\n  var showMenu = function() {\n    return setMenuVisibility(true);\n  };\n  var toggleMenu = function() {\n    return setMenuVisibility(function(visible) {\n      return !visible;\n    });\n  };\n  var params = {\n    message,\n    channel,\n    isByMe,\n    replyType,\n    onReplyInThread,\n    onMoveToParentMessage\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-message-menu\", className), ref: containerRef },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      MessageMenuProvider,\n      { value: {\n        message,\n        hideMenu,\n        showMenu,\n        toggleMenu,\n        setQuoteMessage,\n        onReplyInThread,\n        onMoveToParentMessage,\n        showEdit,\n        showRemove,\n        deleteMessage,\n        resendMessage,\n        isOnline,\n        disableDeleteMessage,\n        triggerRef,\n        containerRef\n      } },\n      renderTrigger({ ref: triggerRef, onClick: toggleMenu }),\n      isMenuVisible && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItems, { id: getObservingId(message.messageId), parentRef: triggerRef, parentContainRef: containerRef, closeDropdown: hideMenu, openLeft: isByMe }, (_b2 = renderMenuItems === null || renderMenuItems === void 0 ? void 0 : renderMenuItems({\n        items: {\n          CopyMenuItem: CopyMenuItem$2,\n          ReplyMenuItem: ReplyMenuItem$2,\n          ThreadMenuItem: ThreadMenuItem$2,\n          OpenInChannelMenuItem,\n          EditMenuItem: EditMenuItem$2,\n          ResendMenuItem: ResendMenuItem$2,\n          DeleteMenuItem: DeleteMenuItem$2\n        }\n      })) !== null && _b2 !== void 0 ? _b2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n        null,\n        showMenuItemCopy(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CopyMenuItem$2, null),\n        showMenuItemReply(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReplyMenuItem$2, null),\n        showMenuItemThread(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ThreadMenuItem$2, null),\n        showMenuItemOpenInChannel(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenInChannelMenuItem, null),\n        showMenuItemEdit(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditMenuItem$2, null),\n        showMenuItemResend(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ResendMenuItem$2, null),\n        showMenuItemDelete(params) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DeleteMenuItem$2, null)\n      ))\n    )\n  );\n};\nvar DEFAULT_DURATION = 300;\nfunction preventDefault(e3) {\n  if (!isTouchEvent(e3)) {\n    return;\n  }\n  if (e3.touches.length < 2 && e3.preventDefault) {\n    e3.preventDefault();\n  }\n}\nfunction isTouchEvent(e3) {\n  return e3 && \"touches\" in e3;\n}\nfunction useLongPress(_a2, _b2) {\n  var onLongPress = _a2.onLongPress, onClick = _a2.onClick;\n  var _c = _b2 === void 0 ? {} : _b2, _d = _c.delay, delay2 = _d === void 0 ? DEFAULT_DURATION : _d, _e2 = _c.shouldPreventDefault, shouldPreventDefault = _e2 === void 0 ? true : _e2, _f = _c.shouldStopPropagation, shouldStopPropagation = _f === void 0 ? false : _f;\n  var isMobile = useMediaQueryContext().isMobile;\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), longPressTriggered = _g2[0], setLongPressTriggered = _g2[1];\n  var _h = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), dragTriggered = _h[0], setDragTriggered = _h[1];\n  var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var target = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var start = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(e3) {\n    e3.persist();\n    var clonedEvent = __assign({}, e3);\n    setDragTriggered(false);\n    if (shouldStopPropagation) {\n      e3.stopPropagation();\n    }\n    if (shouldPreventDefault && e3.target) {\n      e3.target.addEventListener(\"touchend\", preventDefault, {\n        passive: false\n      });\n      target.current = e3.target;\n    }\n    timeout.current = setTimeout(function() {\n      onLongPress(clonedEvent);\n      setLongPressTriggered(true);\n    }, delay2);\n  }, [onLongPress, delay2, shouldPreventDefault, shouldStopPropagation, isMobile]);\n  var clear = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(e3, shouldTriggerClick, onDrag) {\n    if (shouldTriggerClick === void 0) {\n      shouldTriggerClick = true;\n    }\n    if (onDrag === void 0) {\n      onDrag = false;\n    }\n    if (onDrag) {\n      setDragTriggered(true);\n    } else {\n      setDragTriggered(false);\n    }\n    if (timeout === null || timeout === void 0 ? void 0 : timeout.current) {\n      clearTimeout(timeout.current);\n    }\n    if (shouldTriggerClick && !longPressTriggered && !dragTriggered) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(e3);\n    }\n    setLongPressTriggered(false);\n    if (shouldPreventDefault && target.current) {\n      target.current.removeEventListener(\"touchend\", preventDefault);\n    }\n  }, [shouldPreventDefault, onClick, longPressTriggered, dragTriggered]);\n  return {\n    onMouseDown: function(e3) {\n      return start(e3);\n    },\n    onMouseUp: function(e3) {\n      return clear(e3);\n    },\n    onMouseLeave: function(e3) {\n      return clear(e3, false);\n    },\n    onTouchStart: function(e3) {\n      return start(e3);\n    },\n    // setDragTriggered as true on touchmove, so that next onTouchEnd is ignored\n    // if we dont do it, onClick?.(e) will be triggred, see inside clear()\n    onTouchMove: function(e3) {\n      return clear(e3, false, true);\n    },\n    onTouchEnd: function(e3) {\n      return clear(e3);\n    }\n  };\n}\nvar ReactionButton = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var className = props.className, width = props.width, height = props.height, selected = props.selected, _a2 = props.dataSbId, dataSbId = _a2 === void 0 ? \"\" : _a2, testID = props.testID, onClick = props.onClick, children = props.children;\n  var onClickHandler = useLongPress({\n    onLongPress: noop$4,\n    onClick\n  }, {\n    shouldPreventDefault: true,\n    shouldStopPropagation: true\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    __assign({ className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-reaction-button\".concat(selected ? \"--selected\" : \"\")\n    ], false).join(\" \"), ref, role: \"button\", style: { width, height } }, onClickHandler, { tabIndex: 0, \"data-sb-id\": testID !== null && testID !== void 0 ? testID : dataSbId, \"data-testid\": testID !== null && testID !== void 0 ? testID : dataSbId }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-reaction-button__inner\" }, children)\n  );\n});\nfunction MessageEmojiMenu(_a2) {\n  var className = _a2.className, message = _a2.message, userId = _a2.userId, _b2 = _a2.spaceFromTrigger, spaceFromTrigger = _b2 === void 0 ? { x: 0, y: 0 } : _b2, emojiContainer = _a2.emojiContainer, filterEmojiCategoryIds = _a2.filterEmojiCategoryIds, toggleReaction = _a2.toggleReaction;\n  var triggerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var containerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var filteredEmojis = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return getEmojiListByCategoryIds(emojiContainer, filterEmojiCategoryIds === null || filterEmojiCategoryIds === void 0 ? void 0 : filterEmojiCategoryIds(message));\n  }, [emojiContainer, filterEmojiCategoryIds]);\n  if (isPendingMessage(message) || isFailedMessage(message)) {\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([className !== null && className !== void 0 ? className : \"\", \"sendbird-message-item-reaction-menu\"]), ref: containerRef },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        IconButton$1,\n        { className: \"sendbird-message-item-reaction-menu__trigger\", ref: triggerRef, width: \"32px\", height: \"32px\", onClick: function() {\n          toggleDropdown();\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-message-item-reaction-menu__trigger__icon\", testID: \"sendbird-message-item-reaction-menu__trigger__icon\", type: IconTypes.EMOJI_MORE, fillColor: IconColors.CONTENT_INVERSE, width: \"24px\", height: \"24px\" })\n      );\n    }, menuItems: function(closeDropdown) {\n      if (filteredEmojis.length === 0)\n        return null;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmojiListItems, { id: getObservingId(message.messageId), parentRef: triggerRef, parentContainRef: containerRef, closeDropdown, spaceFromTrigger }, filteredEmojis.map(function(emoji) {\n        var _a3, _b3, _c;\n        var isReacted = ((_c = (_b3 = (_a3 = message === null || message === void 0 ? void 0 : message.reactions) === null || _a3 === void 0 ? void 0 : _a3.find(function(reaction) {\n          return reaction.key === emoji.key;\n        })) === null || _b3 === void 0 ? void 0 : _b3.userIds) === null || _c === void 0 ? void 0 : _c.some(function(reactorId) {\n          return reactorId === userId;\n        })) || false;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          ReactionButton,\n          { key: emoji.key, width: \"36px\", height: \"36px\", selected: isReacted, onClick: function() {\n            closeDropdown();\n            toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);\n          }, testID: \"ui_emoji_reactions_menu_\".concat(emoji.key) },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: emoji.url, width: \"28px\", height: \"28px\", placeHolder: function(_a4) {\n            var style = _a4.style;\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { style },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: \"28px\", height: \"28px\" })\n            );\n          } })\n        );\n      }));\n    } })\n  );\n}\nvar ReactionBadge = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var _a2 = props.className, className = _a2 === void 0 ? \"\" : _a2, testID = props.testID, children = props.children, _b2 = props.count, count = _b2 === void 0 ? \"\" : _b2, _c = props.isAdd, isAdd = _c === void 0 ? false : _c, _d = props.selected, selected = _d === void 0 ? false : _d, _e2 = props.onClick, onClick = _e2 === void 0 ? function() {\n  } : _e2;\n  var getClassNameTail = function() {\n    if (selected && !isAdd) {\n      return \"--selected\";\n    }\n    if (isAdd) {\n      return \"--is-add\";\n    }\n    return \"\";\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-reaction-badge\".concat(getClassNameTail())\n    ], false).join(\" \"), \"data-testid\": testID, role: \"button\", ref, onClick, onKeyDown: onClick, onTouchEnd: onClick, tabIndex: 0 },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-reaction-badge__inner\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-reaction-badge__inner__icon\" }, children),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: children && count ? \"sendbird-reaction-badge__inner__count\" : \"\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_1 }, count)\n    )\n  );\n});\nvar MODAL_ROOT = \"sendbird-modal-root\";\nvar ModalRoot = function() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { id: MODAL_ROOT, className: MODAL_ROOT });\n};\nvar ModalHeader = function(_a2) {\n  var titleText = _a2.titleText, onCloseClick = _a2.onCloseClick;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-modal__header\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, titleText),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-modal__close\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        IconButton$1,\n        { width: \"32px\", height: \"32px\", onClick: onCloseClick },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.CLOSE, fillColor: IconColors.DEFAULT, width: \"24px\", height: \"24px\" })\n      )\n    )\n  );\n};\nvar ModalBody = function(_a2) {\n  var children = _a2.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-modal__body\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_2 }, children)\n  );\n};\nvar ModalFooter = function(_a2) {\n  var submitText = _a2.submitText, _b2 = _a2.disabled, disabled = _b2 === void 0 ? false : _b2, _c = _a2.hideCancelButton, hideCancelButton = _c === void 0 ? false : _c, _d = _a2.type, type = _d === void 0 ? ButtonTypes.DANGER : _d, onSubmit = _a2.onSubmit, onCancel = _a2.onCancel;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-modal__footer\" },\n    !hideCancelButton && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Button,\n      { type: ButtonTypes.SECONDARY, onClick: onCancel },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.BUTTON__CANCEL)\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { type, disabled, onClick: onSubmit }, submitText)\n  );\n};\nfunction Modal(props) {\n  var _a2;\n  var _b2 = props.children, children = _b2 === void 0 ? null : _b2, _c = props.className, className = _c === void 0 ? \"\" : _c, _d = props.contentClassName, contentClassName = _d === void 0 ? \"\" : _d, _e2 = props.isCloseOnClickOutside, isCloseOnClickOutside = _e2 === void 0 ? false : _e2, _f = props.isFullScreenOnMobile, isFullScreenOnMobile = _f === void 0 ? false : _f, titleText = props.titleText, submitText = props.submitText, _g2 = props.disabled, disabled = _g2 === void 0 ? false : _g2, _h = props.hideFooter, hideFooter = _h === void 0 ? false : _h, _j = props.type, type = _j === void 0 ? ButtonTypes.DANGER : _j, renderHeader = props.renderHeader, _k = props.onSubmit, onSubmit = _k === void 0 ? noop$4 : _k, onClose = props.onClose, onCancel = props.onCancel, customFooter = props.customFooter;\n  var handleClose = (_a2 = onClose !== null && onClose !== void 0 ? onClose : onCancel) !== null && _a2 !== void 0 ? _a2 : noop$4;\n  var eventHandlers = useSendbird().state.eventHandlers;\n  var id2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(function() {\n    return \"sbu-modal-\".concat(uuidv4());\n  })[0];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3, _b3;\n    return (_b3 = (_a3 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.modal) === null || _a3 === void 0 ? void 0 : _a3.onMounted) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, { close: handleClose, id: id2 });\n  }, []);\n  var isMobile = useMediaQueryContext().isMobile;\n  return Object(react_dom__WEBPACK_IMPORTED_MODULE_1__[\"createPortal\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-modal\", className, isFullScreenOnMobile && isMobile && \"sendbird-modal--full-mobile\") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: classnames.apply(void 0, __spreadArray([\"sendbird-modal__content\"], Array.isArray(contentClassName) ? contentClassName : [contentClassName], false)) },\n      (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalHeader, { titleText: titleText !== null && titleText !== void 0 ? titleText : \"\", onCloseClick: handleClose }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalBody, null, children),\n      !hideFooter && (customFooter !== null && customFooter !== void 0 ? customFooter : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalFooter, { disabled, onCancel: handleClose, onSubmit, submitText: submitText !== null && submitText !== void 0 ? submitText : \"\", type }))\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames(\"sendbird-modal__backdrop\", isCloseOnClickOutside && \"sendbird-modal__backdrop--clickoutside\"), onClick: function(e3) {\n      e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();\n      if (isCloseOnClickOutside) {\n        handleClose();\n      }\n    } })\n  ), document.getElementById(MODAL_ROOT));\n}\nvar GlobalModalContext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])({\n  openModal: noop$4\n});\nvar GlobalModalProvider = function(_a2) {\n  var children = _a2.children;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), globalModalQueue = _b2[0], setGlobalModalQueue = _b2[1];\n  var openModal = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(props) {\n    setGlobalModalQueue(function(currentQue) {\n      return __spreadArray(__spreadArray([], currentQue, true), [props], false);\n    });\n  }, []);\n  var closeModal = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    setGlobalModalQueue(function(currentQue) {\n      return currentQue.slice(1);\n    });\n  }, []);\n  var ModalComponent = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return function() {\n      return K(globalModalQueue).when(function(q3) {\n        return q3.length === 0;\n      }, function() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n      }).otherwise(function() {\n        var _a3 = globalModalQueue[0], modalProps = _a3.modalProps, childElement = _a3.childElement;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Modal, __assign({}, modalProps, { className: classnames(\"sendbird-global-modal\", modalProps === null || modalProps === void 0 ? void 0 : modalProps.className), onClose: function() {\n          var _a4;\n          (_a4 = modalProps === null || modalProps === void 0 ? void 0 : modalProps.onClose) === null || _a4 === void 0 ? void 0 : _a4.call(modalProps);\n          closeModal();\n        } }), childElement({\n          closeModal\n        }));\n      });\n    };\n  }, [globalModalQueue]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    GlobalModalContext.Provider,\n    { value: {\n      openModal\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalComponent, null),\n    children\n  );\n};\nvar useGlobalModalContext = function() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(GlobalModalContext);\n};\nvar BottomSheet = function(props) {\n  var _a2;\n  var _b2 = props.className, className = _b2 === void 0 ? \"\" : _b2, children = props.children, onBackdropClick = props.onBackdropClick;\n  var logger = useSendbird().state.config.logger;\n  var portalRoot = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  portalRoot.current = document.getElementById(MODAL_ROOT);\n  if (!portalRoot.current) {\n    portalRoot.current = document.createElement(\"div\");\n    portalRoot.current.setAttribute(\"id\", MODAL_ROOT);\n    document.body.appendChild(portalRoot.current);\n    (_a2 = logger === null || logger === void 0 ? void 0 : logger.warning) === null || _a2 === void 0 ? void 0 : _a2.call(logger, \"@sendbird/uikit-react/ui/BottomSheet | Should put a ModalRoot to use the BottomSheet.\");\n  }\n  return Object(react_dom__WEBPACK_IMPORTED_MODULE_1__[\"createPortal\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"\".concat(className, \" sendbird-bottomsheet\") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-bottomsheet__content\", role: \"dialog\", \"aria-modal\": \"true\", \"aria-expanded\": \"true\" }, children),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-bottomsheet__backdrop\", onClick: function(e3) {\n      e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();\n      onBackdropClick === null || onBackdropClick === void 0 ? void 0 : onBackdropClick();\n    } })\n  ), portalRoot.current);\n};\nfunction MutedAvatarOverlay(props) {\n  var _a2 = props.height, height = _a2 === void 0 ? 24 : _a2, _b2 = props.width, width = _b2 === void 0 ? 24 : _b2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-muted-avatar\", style: {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-muted-avatar__icon\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-muted-avatar__bg\", style: {\n        height: \"\".concat(height, \"px\"),\n        width: \"\".concat(width, \"px\")\n      } }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.MUTE, fillColor: IconColors.WHITE, width: \"\".concat(height - 8, \"px\"), height: \"\".concat(width - 8, \"px\") })\n    )\n  );\n}\nfunction Checkbox(_a2) {\n  var id2 = _a2.id, _b2 = _a2.checked, checked = _b2 === void 0 ? false : _b2, disabled = _a2.disabled, onChange = _a2.onChange;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(checked), isChecked = _c[0], setIsCheck = _c[1];\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"label\",\n    { className: [\n      \"sendbird-checkbox\",\n      disabled ? \"disabled\" : \"\"\n    ].join(\" \"), htmlFor: id2 },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { disabled, id: id2, type: \"checkbox\", checked: isChecked, onClick: function() {\n      if (!disabled)\n        setIsCheck(!isChecked);\n    }, onChange }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: [\n      \"sendbird-checkbox--checkmark\",\n      disabled ? \"disabled\" : \"\"\n    ].join(\" \") })\n  );\n}\nvar getSdk = function(state) {\n  var _a2 = state.stores, stores2 = _a2 === void 0 ? {} : _a2;\n  var _b2 = stores2.sdkStore, sdkStore = _b2 === void 0 ? {} : _b2;\n  var sdk = sdkStore.sdk;\n  return sdk;\n};\nvar getPubSub = function(state) {\n  var _a2 = state.config, config2 = _a2 === void 0 ? {} : _a2;\n  var pubSub = config2.pubSub;\n  return pubSub;\n};\nvar getCreateGroupChannel = function(state) {\n  return function(params) {\n    return new Promise(function(resolve, reject) {\n      var sdk = getSdk(state);\n      var pubSub = getPubSub(state);\n      if (!sdk) {\n        reject(new Error(\"Sdk not found\"));\n      }\n      if (!sdk.groupChannel) {\n        reject(new Error(\"Not found GroupChannelModule\"));\n      }\n      if (!(sdk.groupChannel.createChannel && typeof sdk.groupChannel.createChannel === \"function\")) {\n        reject(new Error('Not found the function \"createChannel\"'));\n      }\n      sdk.groupChannel.createChannel(params).then(function(channel) {\n        resolve(channel);\n        pubSub.publish(pubSubTopics.CREATE_CHANNEL, { channel });\n      }).catch(reject);\n    });\n  };\n};\nfunction UserProfile(_a2) {\n  var _b2, _c;\n  var user = _a2.user, currentUserId = _a2.currentUserId, _d = _a2.disableMessaging, disableMessaging = _d === void 0 ? false : _d, onSuccess2 = _a2.onSuccess;\n  var state = useSendbird().state;\n  var createChannel = getCreateGroupChannel(state);\n  var logger = (_b2 = state === null || state === void 0 ? void 0 : state.config) === null || _b2 === void 0 ? void 0 : _b2.logger;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var currentUserId_ = currentUserId || ((_c = state === null || state === void 0 ? void 0 : state.config) === null || _c === void 0 ? void 0 : _c.userId);\n  var onStartDirectMessage = useUserProfileContext().onStartDirectMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird__user-profile\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird__user-profile-avatar\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { height: \"80px\", width: \"80px\", src: user === null || user === void 0 ? void 0 : user.profileUrl })\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird__user-profile-name\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, (user === null || user === void 0 ? void 0 : user.nickname) || stringSet2.NO_NAME)\n    ),\n    (user === null || user === void 0 ? void 0 : user.userId) !== currentUserId_ && !disableMessaging && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird__user-profile-message\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { type: ButtonTypes.SECONDARY, onClick: function() {\n        var params = {\n          isDistinct: false,\n          invitedUserIds: (user === null || user === void 0 ? void 0 : user.userId) ? [user === null || user === void 0 ? void 0 : user.userId] : [],\n          operatorUserIds: [currentUserId_]\n        };\n        onSuccess2 === null || onSuccess2 === void 0 ? void 0 : onSuccess2();\n        createChannel(params).then(function(groupChannel) {\n          logger.info(\"UserProfile, channel create\", groupChannel);\n          onStartDirectMessage === null || onStartDirectMessage === void 0 ? void 0 : onStartDirectMessage(groupChannel);\n        });\n      } }, stringSet2.USER_PROFILE__MESSAGE)\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird__user-profile-separator\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird__user-profile-userId\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird__user-profile-userId--label\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.USER_PROFILE__USER_ID),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird__user-profile-userId--value\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, user === null || user === void 0 ? void 0 : user.userId)\n    )\n  );\n}\nfunction UserListItem(_a2) {\n  var user = _a2.user, channel = _a2.channel, _b2 = _a2.className, className = _b2 === void 0 ? void 0 : _b2, checked = _a2.checked, checkBox = _a2.checkBox, isOperator2 = _a2.isOperator, disabled = _a2.disabled, disableMessaging = _a2.disableMessaging, action = _a2.action, onChange = _a2.onChange, _c = _a2.avatarSize, avatarSize = _c === void 0 ? \"40px\" : _c, onClick = _a2.onClick, onUserAvatarClick = _a2.onUserAvatarClick, renderListItemMenu = _a2.renderListItemMenu, _d = _a2.size, size = _d === void 0 ? \"normal\" : _d;\n  var operator = isOperator2 !== null && isOperator2 !== void 0 ? isOperator2 : (user === null || user === void 0 ? void 0 : user.role) === \"operator\";\n  var uniqueKey = user.userId;\n  var actionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var parentRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var avatarRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _e2 = useUserProfileContext(), disableUserProfile = _e2.disableUserProfile, renderUserProfile = _e2.renderUserProfile;\n  var stringSet2 = useLocalization().stringSet;\n  var config2 = useSendbird().state.config;\n  var currentUser = config2.userId;\n  var itemClassName = size === \"small\" ? \"sendbird-user-list-item--small\" : \"sendbird-user-list-item\";\n  var avatarClassName = size === \"small\" ? \"sendbird-user-list-item--small__avatar\" : \"sendbird-user-list-item__avatar\";\n  var titleClassName = size === \"small\" ? \"sendbird-user-list-item--small__title\" : \"sendbird-user-list-item__title\";\n  var subtitleClassName = size === \"small\" ? \"sendbird-user-list-item--small__subtitle\" : \"sendbird-user-list-item__subtitle\";\n  var checkboxClassName = size === \"small\" ? \"sendbird-user-list-item--small__checkbox\" : \"sendbird-user-list-item__checkbox\";\n  var actionClassName = size === \"small\" ? \"sendbird-user-list-item--small__action\" : \"sendbird-user-list-item__action\";\n  var operatorClassName = size === \"small\" ? \"sendbird-user-list-item--small__operator\" : \"sendbird-user-list-item__operator\";\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames.apply(void 0, __spreadArray([itemClassName], Array.isArray(className) ? className : [className], false)), ref: parentRef },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n        null,\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: avatarClassName, ref: avatarRef, src: (user === null || user === void 0 ? void 0 : user.profileUrl) || (user === null || user === void 0 ? void 0 : user.plainProfileUrl) || \"\", width: avatarSize, height: avatarSize, onClick: function() {\n          var _a3;\n          if (!disableUserProfile) {\n            toggleDropdown();\n            (_a3 = onUserAvatarClick !== null && onUserAvatarClick !== void 0 ? onUserAvatarClick : onClick) === null || _a3 === void 0 ? void 0 : _a3();\n          }\n        } }),\n        (user === null || user === void 0 ? void 0 : user.isMuted) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MutedAvatarOverlay, { height: pxToNumber(avatarSize), width: pxToNumber(avatarSize) })\n      );\n    }, menuItems: function(closeDropdown) {\n      return renderUserProfile ? renderUserProfile({\n        user,\n        currentUserId: currentUser !== null && currentUser !== void 0 ? currentUser : \"\",\n        close: closeDropdown,\n        avatarRef\n      }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItems,\n        { openLeft: true, parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown, style: { paddingTop: \"0px\", paddingBottom: \"0px\" } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { disableMessaging, user, currentUserId: currentUser, onSuccess: closeDropdown })\n      );\n    } }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Label,\n      { className: titleClassName, type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 },\n      user.nickname || stringSet2.NO_NAME,\n      currentUser === user.userId && stringSet2.CHANNEL_SETTING__MEMBERS__YOU\n    ),\n    !user.nickname && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: subtitleClassName, type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, user.userId),\n    checkBox && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"label\",\n      { className: checkboxClassName, htmlFor: uniqueKey },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Checkbox, { id: uniqueKey, checked, disabled, onChange: function(event) {\n        return onChange === null || onChange === void 0 ? void 0 : onChange(event);\n      } })\n    ),\n    operator && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: classnames(operatorClassName, checkBox && \"checkbox\"), type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.LABEL__OPERATOR),\n    !checkBox && !renderListItemMenu && action && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: actionClassName, ref: actionRef }, action({ actionRef, parentRef })),\n    !checkBox && renderListItemMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: actionClassName, ref: actionRef }, renderListItemMenu({ channel, user }))\n  );\n}\nfunction Tooltip(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, _c = _a2.children, children = _c === void 0 ? \"\" : _c;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-tooltip\"\n    ], false).join(\" \") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-tooltip__text\", type: LabelTypography.CAPTION_2, color: LabelColors.ONCONTENT_1 }, children)\n  );\n}\nvar SPACE_FROM_TRIGGER = 8;\nfunction TooltipWrapper(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, children = _a2.children, hoverTooltip = _a2.hoverTooltip;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showHoverTooltip = _c[0], setShowHoverTooltip = _c[1];\n  var childrenRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-tooltip-wrapper\"\n    ], false).join(\" \"), onMouseOver: function() {\n      setShowHoverTooltip(true);\n    }, onFocus: function() {\n      setShowHoverTooltip(true);\n    }, onMouseOut: function() {\n      setShowHoverTooltip(false);\n    }, onBlur: function() {\n      setShowHoverTooltip(false);\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-tooltip-wrapper__children\", ref: childrenRef }, children),\n    showHoverTooltip && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-tooltip-wrapper__hover-tooltip\", style: { bottom: \"calc(100% + \".concat(SPACE_FROM_TRIGGER, \"px)\") } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-tooltip-wrapper__hover-tooltip__inner\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container\", style: { left: childrenRef.current ? \"calc(\".concat(childrenRef.current.offsetWidth / 2, \"px - 50%)\") : void 0 } }, hoverTooltip)\n      )\n    )\n  );\n}\nvar defaultValue = {\n  message: {},\n  isByMe: false\n};\nvar MessageContext$1 = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(defaultValue);\nvar MessageProvider$1 = function(props) {\n  var children = props.children, message = props.message, _a2 = props.isByMe, isByMe = _a2 === void 0 ? false : _a2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageContext$1.Provider, { value: {\n    message,\n    isByMe\n  } }, children);\n};\nvar useMessageContext$1 = function() {\n  var value = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(MessageContext$1);\n  if (value === void 0) {\n    throw new Error(\"useMessageContext must be used within a MessageProvider\");\n  }\n  return value;\n};\nvar ReactedMembersBottomSheet = function(_a2) {\n  var _b2, _c, _d;\n  var message = _a2.message, channel = _a2.channel, _e2 = _a2.emojiKey, emojiKey = _e2 === void 0 ? \"\" : _e2, hideMenu = _a2.hideMenu, emojiContainer = _a2.emojiContainer, onPressUserProfileHandler = _a2.onPressUserProfileHandler;\n  var _f = channel.members, members = _f === void 0 ? [] : _f;\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(emojiKey), selectedEmoji = _g2[0], setSelectedEmoji = _g2[1];\n  function onPressUserProfileCallBack() {\n    if (onPressUserProfileHandler && message) {\n      var sender = message === null || message === void 0 ? void 0 : message.sender;\n      onPressUserProfileHandler(sender);\n    }\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    BottomSheet,\n    { onBackdropClick: hideMenu },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message__bottomsheet\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-message__bottomsheet__reacted-members\" }, (_b2 = message.reactions) === null || _b2 === void 0 ? void 0 : _b2.map(function(reaction) {\n        var emojiUrl = getEmojiUrl(emojiContainer, reaction.key);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { key: reaction.key, className: classnames(\"sendbird-message__bottomsheet__reacted-members__item\", selectedEmoji === reaction.key && \"sendbird-message__bottomsheet__reacted-members__item__selected\"), onClick: function() {\n            setSelectedEmoji(reaction.key);\n          } },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: emojiUrl, width: \"28px\", height: \"28px\", placeHolder: function(_a3) {\n            var style = _a3.style;\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { style },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: \"28px\", height: \"28px\" })\n            );\n          } }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_2, color: selectedEmoji === reaction.key ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3 }, reaction.userIds.length)\n        );\n      })),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message__bottomsheet__reactor-list\" },\n        // making a member list who reacted to the message with the `selectedEmoji`\n        ((_d = (_c = message.reactions) === null || _c === void 0 ? void 0 : _c.find(function(reaction) {\n          return reaction.key === selectedEmoji;\n        })) === null || _d === void 0 ? void 0 : _d.userIds.map(function(userId) {\n          return members.find(function(member) {\n            return member.userId === userId;\n          });\n        }).filter(function(member) {\n          return member !== void 0;\n        })).map(function(member) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserListItem, { key: member.userId, className: \"sendbird-message__bottomsheet__reactor-list__item\", user: member, avatarSize: \"36px\", onUserAvatarClick: onPressUserProfileCallBack });\n        })\n      )\n    )\n  );\n};\nfunction ReactionItem(_a2) {\n  var _b2;\n  var reaction = _a2.reaction, memberNicknamesMap = _a2.memberNicknamesMap, setEmojiKey = _a2.setEmojiKey, toggleReaction = _a2.toggleReaction, emojisMap = _a2.emojisMap, channel = _a2.channel, message = _a2.message, isFiltered = _a2.isFiltered;\n  var openModal = useGlobalModalContext().openModal;\n  var userId = useSendbird().state.config.userId;\n  var isMobile = useMediaQueryContext().isMobile;\n  var messageStore = useMessageContext$1();\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var reactedByMe = isReactedBy(userId, reaction);\n  var showHoverTooltip = reaction.userIds.length > 0 && ((channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !channel.isSuper);\n  var handleOnClick = function() {\n    if (isFiltered && !reactedByMe) {\n      openModal({\n        modalProps: {\n          titleText: \"Add reaction failed\",\n          hideFooter: true,\n          isCloseOnClickOutside: true\n        },\n        childElement: function(_a3) {\n          var closeModal = _a3.closeModal;\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet2.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal });\n        }\n      });\n      return;\n    }\n    setEmojiKey(\"\");\n    toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message !== null && message !== void 0 ? message : messageStore === null || messageStore === void 0 ? void 0 : messageStore.message, reaction.key, reactedByMe);\n  };\n  var longPress = useLongPress({\n    onLongPress: function() {\n      setEmojiKey(reaction.key);\n    },\n    onClick: handleOnClick\n  }, {\n    shouldPreventDefault: true,\n    shouldStopPropagation: true\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    TooltipWrapper,\n    { className: \"sendbird-emoji-reactions__reaction-badge\", hoverTooltip: showHoverTooltip ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Tooltip, null, getEmojiTooltipString(reaction, userId, memberNicknamesMap, stringSet2)) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      __assign({}, isMobile ? longPress : { onClick: handleOnClick }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        ReactionBadge,\n        { count: reaction.userIds.length, selected: reactedByMe },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { circle: true, url: ((_b2 = emojisMap.get(reaction === null || reaction === void 0 ? void 0 : reaction.key)) === null || _b2 === void 0 ? void 0 : _b2.url) || \"\", width: \"20px\", height: \"20px\", defaultComponent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"20px\", height: \"20px\", type: IconTypes.QUESTION }) })\n      )\n    )\n  );\n}\nvar AddReactionBadgeItem = function(_a2) {\n  var onClick = _a2.onClick;\n  var onlyClick = useLongPress({\n    onLongPress: function() {\n    },\n    onClick\n  }, {\n    shouldPreventDefault: true,\n    shouldStopPropagation: true\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    __assign({ className: \"sendbird-emoji-reactions__add-reaction-badge\", \"data-testid\": \"sendbird-emoji-reactions__add-reaction-badge\" }, onlyClick),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      ReactionBadge,\n      { isAdd: true },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.EMOJI_MORE, fillColor: IconColors.ON_BACKGROUND_3, width: \"20px\", height: \"20px\" })\n    )\n  );\n};\nvar MobileEmojisBottomSheet = function(_a2) {\n  var userId = _a2.userId, message = _a2.message, emojiContainer = _a2.emojiContainer, hideMenu = _a2.hideMenu, toggleReaction = _a2.toggleReaction;\n  var emojiAllList = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return getEmojiListAll(emojiContainer);\n  }, [emojiContainer]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    BottomSheet,\n    { onBackdropClick: hideMenu },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet\" }, emojiAllList.map(function(emoji) {\n      var _a3, _b2, _c, _d;\n      var isReacted = (_d = (_c = (_b2 = (_a3 = message === null || message === void 0 ? void 0 : message.reactions) === null || _a3 === void 0 ? void 0 : _a3.find(function(reaction) {\n        return reaction.key === emoji.key;\n      })) === null || _b2 === void 0 ? void 0 : _b2.userIds) === null || _c === void 0 ? void 0 : _c.some(function(reactorId) {\n        return reactorId === userId;\n      })) !== null && _d !== void 0 ? _d : false;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        ReactionButton,\n        { key: emoji.key, width: \"44px\", height: \"44px\", selected: isReacted, onClick: function(e3) {\n          e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();\n          toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);\n          hideMenu();\n        }, testID: \"ui_mobile_emoji_reactions_menu_\".concat(emoji.key) },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: emoji.url, width: \"38px\", height: \"38px\", placeHolder: function(_a4) {\n          var style = _a4.style;\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { style },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: \"28px\", height: \"28px\" })\n          );\n        } })\n      );\n    }))\n  );\n};\nvar EmojiReactions = function(_a2) {\n  var _b2, _c, _d, _e2, _f;\n  var _g2 = _a2.className, className = _g2 === void 0 ? \"\" : _g2, userId = _a2.userId, message = _a2.message, channel = _a2.channel, emojiContainer = _a2.emojiContainer, memberNicknamesMap = _a2.memberNicknamesMap, _h = _a2.spaceFromTrigger, spaceFromTrigger = _h === void 0 ? { x: 0, y: 0 } : _h, _j = _a2.isByMe, isByMe = _j === void 0 ? false : _j, toggleReaction = _a2.toggleReaction, onPressUserProfile = _a2.onPressUserProfile, filterEmojiCategoryIds = _a2.filterEmojiCategoryIds;\n  var showTheReactedMembers = false;\n  try {\n    var config2 = useSendbird().state.config;\n    showTheReactedMembers = channel ? getIsReactionEnabled({\n      channel,\n      config: config2\n    }) : false;\n  } catch (err) {\n  }\n  var isMobile = useMediaQueryContext().isMobile;\n  var addReactionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _k = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showEmojiList = _k[0], setShowEmojiList = _k[1];\n  var _l = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), selectedEmojiKey = _l[0], setSelectedEmojiKey = _l[1];\n  var emojisMap = getEmojiMapAll(emojiContainer);\n  var filteredEmojis = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return getEmojiListByCategoryIds(emojiContainer, filterEmojiCategoryIds === null || filterEmojiCategoryIds === void 0 ? void 0 : filterEmojiCategoryIds(message));\n  }, [emojiContainer, filterEmojiCategoryIds]);\n  var showAddReactionBadge = ((_c = (_b2 = message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length) !== null && _c !== void 0 ? _c : 0) < emojisMap.size;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      className,\n      \"sendbird-emoji-reactions\",\n      isByMe ? \"outgoing\" : \"incoming\"\n    ]) },\n    ((_e2 = (_d = message.reactions) === null || _d === void 0 ? void 0 : _d.length) !== null && _e2 !== void 0 ? _e2 : 0) > 0 && ((_f = message.reactions) === null || _f === void 0 ? void 0 : _f.map(function(reaction) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReactionItem, { key: reaction === null || reaction === void 0 ? void 0 : reaction.key, reaction, memberNicknamesMap, setEmojiKey: setSelectedEmojiKey, toggleReaction, emojisMap, channel, message, isFiltered: getEmojiListByCategoryIds(emojiContainer, filterEmojiCategoryIds === null || filterEmojiCategoryIds === void 0 ? void 0 : filterEmojiCategoryIds(message)).every(function(elem) {\n        return elem.key !== (reaction === null || reaction === void 0 ? void 0 : reaction.key);\n      }) });\n    })),\n    !isMobile && showAddReactionBadge && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        ReactionBadge,\n        { className: \"sendbird-emoji-reactions__add-reaction-badge\", testID: \"sendbird-emoji-reactions__add-reaction-badge\", ref: addReactionRef, isAdd: true, onClick: function(e3) {\n          var _a3;\n          toggleDropdown();\n          (_a3 = e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation) === null || _a3 === void 0 ? void 0 : _a3.call(e3);\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.EMOJI_MORE, fillColor: IconColors.ON_BACKGROUND_3, width: \"20px\", height: \"20px\" })\n      );\n    }, menuItems: function(closeDropdown) {\n      if (filteredEmojis.length === 0)\n        return null;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmojiListItems, { parentRef: addReactionRef, parentContainRef: addReactionRef, closeDropdown, spaceFromTrigger }, getEmojiListByCategoryIds(emojiContainer, filterEmojiCategoryIds === null || filterEmojiCategoryIds === void 0 ? void 0 : filterEmojiCategoryIds(message)).map(function(emoji) {\n        var _a3, _b3, _c2;\n        var isReacted = ((_c2 = (_b3 = (_a3 = message === null || message === void 0 ? void 0 : message.reactions) === null || _a3 === void 0 ? void 0 : _a3.find(function(reaction) {\n          return reaction.key === emoji.key;\n        })) === null || _b3 === void 0 ? void 0 : _b3.userIds) === null || _c2 === void 0 ? void 0 : _c2.some(function(reactorId) {\n          return reactorId === userId;\n        })) || false;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          ReactionButton,\n          { key: emoji.key, width: \"36px\", height: \"36px\", selected: isReacted, onClick: function(e3) {\n            closeDropdown();\n            toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);\n            e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();\n          }, testID: \"ui_emoji_reactions_menu_\".concat(emoji.key) },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: (emoji === null || emoji === void 0 ? void 0 : emoji.url) || \"\", width: \"28px\", height: \"28px\", placeHolder: function(_a4) {\n            var style = _a4.style;\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { style },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: \"28px\", height: \"28px\" })\n            );\n          } })\n        );\n      }));\n    } }),\n    isMobile && showAddReactionBadge && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AddReactionBadgeItem, { onClick: function() {\n      setShowEmojiList(true);\n    } }),\n    isMobile && showEmojiList && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MobileEmojisBottomSheet, { userId, message, emojiContainer, hideMenu: function() {\n      setShowEmojiList(false);\n    }, toggleReaction }),\n    isMobile && selectedEmojiKey && channel !== null && showTheReactedMembers && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReactedMembersBottomSheet, { message, channel, emojiKey: selectedEmojiKey, hideMenu: function() {\n      setSelectedEmojiKey(\"\");\n    }, emojiContainer, onPressUserProfileHandler: onPressUserProfile })\n  );\n};\nfunction AdminMessage(_a2) {\n  var _b2;\n  var _c = _a2.className, className = _c === void 0 ? \"\" : _c, message = _a2.message;\n  if (!((message === null || message === void 0 ? void 0 : message.isAdminMessage) || (message === null || message === void 0 ? void 0 : message.messageType)) || !((_b2 = message === null || message === void 0 ? void 0 : message.isAdminMessage) === null || _b2 === void 0 ? void 0 : _b2.call(message)) || (message === null || message === void 0 ? void 0 : message.messageType) !== \"admin\") {\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-admin-message\"\n    ], false).join(\" \") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-admin-message__text\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, message === null || message === void 0 ? void 0 : message.message)\n  );\n}\nfunction getMessageFirstFileType(message) {\n  return K(message).when(isFileMessage, function() {\n    var _a2;\n    return (_a2 = message === null || message === void 0 ? void 0 : message.type) !== null && _a2 !== void 0 ? _a2 : \"\";\n  }).when(isMultipleFilesMessage, function() {\n    var _a2, _b2;\n    return (_b2 = (_a2 = getFirstFileInfo(message)) === null || _a2 === void 0 ? void 0 : _a2.mimeType) !== null && _b2 !== void 0 ? _b2 : \"\";\n  }).otherwise(function() {\n    return \"\";\n  });\n}\nfunction getFirstFileInfo(message) {\n  var fileInfoList = message.fileInfoList;\n  return fileInfoList.length > 0 ? fileInfoList[0] : null;\n}\nfunction getMessageFirstFileName(message) {\n  return K(message).when(isFileMessage, function() {\n    var _a2;\n    return (_a2 = message === null || message === void 0 ? void 0 : message.name) !== null && _a2 !== void 0 ? _a2 : \"\";\n  }).when(isMultipleFilesMessage, function() {\n    var _a2, _b2;\n    return (_b2 = (_a2 = getFirstFileInfo(message)) === null || _a2 === void 0 ? void 0 : _a2.fileName) !== null && _b2 !== void 0 ? _b2 : \"\";\n  }).otherwise(function() {\n    return \"\";\n  });\n}\nfunction getMessageFirstFileUrl(message) {\n  return K(message).when(isFileMessage, function() {\n    var _a2;\n    return (_a2 = message === null || message === void 0 ? void 0 : message.url) !== null && _a2 !== void 0 ? _a2 : \"\";\n  }).when(isMultipleFilesMessage, function() {\n    var _a2, _b2;\n    return (_b2 = (_a2 = getFirstFileInfo(message)) === null || _a2 === void 0 ? void 0 : _a2.url) !== null && _b2 !== void 0 ? _b2 : \"\";\n  }).otherwise(function() {\n    return \"\";\n  });\n}\nfunction getMessageFirstFileThumbnails(message) {\n  return K(message).when(isFileMessage, function() {\n    return message.thumbnails;\n  }).when(isMultipleFilesMessage, function() {\n    var _a2, _b2;\n    return (_b2 = (_a2 = getFirstFileInfo(message)) === null || _a2 === void 0 ? void 0 : _a2.thumbnails) !== null && _b2 !== void 0 ? _b2 : [];\n  }).otherwise(function() {\n    return [];\n  });\n}\nfunction getMessageFirstFileThumbnailUrl(message) {\n  var thumbnails = getMessageFirstFileThumbnails(message);\n  return thumbnails && thumbnails.length > 0 ? thumbnails[0].url : \"\";\n}\nfunction QuoteMessage(_a2) {\n  var _b2;\n  var _c, _d, _e2, _f, _g2, _h;\n  var message = _a2.message, _j = _a2.userId, userId = _j === void 0 ? \"\" : _j, _k = _a2.isByMe, isByMe = _k === void 0 ? false : _k, _l = _a2.className, className = _l === void 0 ? \"\" : _l, _m = _a2.isUnavailable, isUnavailable = _m === void 0 ? false : _m, onClick = _a2.onClick;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var parentMessage = message.parentMessage;\n  var parentMessageSender = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender;\n  var parentMessageSenderNickname = userId === (parentMessageSender === null || parentMessageSender === void 0 ? void 0 : parentMessageSender.userId) ? stringSet2.QUOTED_MESSAGE__CURRENT_USER : parentMessageSender === null || parentMessageSender === void 0 ? void 0 : parentMessageSender.nickname;\n  var parentMessageUrl = getMessageFirstFileUrl(parentMessage);\n  var parentMessageType = getMessageFirstFileType(parentMessage);\n  var currentMessageSenderNickname = userId === ((_c = message === null || message === void 0 ? void 0 : message.sender) === null || _c === void 0 ? void 0 : _c.userId) ? stringSet2.QUOTED_MESSAGE__CURRENT_USER : (_d = message === null || message === void 0 ? void 0 : message.sender) === null || _d === void 0 ? void 0 : _d.nickname;\n  var _o = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isThumbnailLoaded = _o[0], setThumbnailLoaded = _o[1];\n  var uikitFileTypes = getUIKitFileTypes();\n  var splitFileName = (_f = (_e2 = getMessageFirstFileName(parentMessage)) === null || _e2 === void 0 ? void 0 : _e2.split(\"/\")) !== null && _f !== void 0 ? _f : parentMessageUrl.split(\"/\");\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([className, \"sendbird-quote-message\", isByMe ? \"outgoing\" : \"incoming\", isUnavailable ? \"unavailable\" : \"\"]), key: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId, onClick: function() {\n      if (!isUnavailable && onClick) {\n        onClick();\n      }\n    }, onTouchEnd: function() {\n      if (!isUnavailable && onClick) {\n        onClick();\n      }\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-quote-message__replied-to\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-quote-message__replied-to__icon\", type: IconTypes.REPLY, fillColor: IconColors.ON_BACKGROUND_3, width: \"12px\", height: \"12px\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        Label,\n        { className: \"sendbird-quote-message__replied-to__text\", testID: \"sendbird-quote-message__replied-to__text\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_3 },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sendbird-quote-message__replied-to__text__nickname\" }, currentMessageSenderNickname),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sendbird-quote-message__replied-to__text__text\" }, stringSet2.QUOTED_MESSAGE__REPLIED_TO),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sendbird-quote-message__replied-to__text__nickname\" }, parentMessageSenderNickname)\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-quote-message__replied-message\" },\n      isUnavailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-quote-message__replied-message__text-message\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-quote-message__replied-message__text-message__word\", testID: \"sendbird-quote-message__replied-message__text-message__word\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, stringSet2.QUOTED_MESSAGE__UNAVAILABLE)\n      ),\n      isUserMessage(parentMessage) && ((_g2 = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.message) === null || _g2 === void 0 ? void 0 : _g2.length) > 0 && !isUnavailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-quote-message__replied-message__text-message\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-quote-message__replied-message__text-message__word\", testID: \"sendbird-quote-message__replied-message__text-message__word\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.message)\n      ),\n      isVoiceMessage(parentMessage) && parentMessageUrl && !isUnavailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-quote-message__replied-message__text-message\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-quote-message__replied-message__text-message__word\", testID: \"sendbird-quote-message__replied-message__text-message__word\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, stringSet2.VOICE_MESSAGE)\n      ),\n      (isThumbnailMessage(parentMessage) || isMultipleFilesMessage(parentMessage)) && parentMessageUrl && !isUnavailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-quote-message__replied-message__thumbnail-message\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: \"sendbird-quote-message__replied-message__thumbnail-message__image\", url: parentMessageUrl, alt: parentMessageType, width: \"144px\", height: \"108px\", onLoad: function() {\n          return setThumbnailLoaded(true);\n        }, defaultComponent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-quote-message__replied-message__thumbnail-message__placeholder\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: isVideo(parentMessageType) ? IconTypes.PLAY : IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: \"22px\", height: \"22px\" })\n          )\n        ) }),\n        isVideo(parentMessageType) && !(((_h = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.thumbnails) === null || _h === void 0 ? void 0 : _h.length) > 0) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"video\",\n            { className: \"sendbird-quote-message__replied-message__thumbnail-message__video\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"source\", { src: parentMessageUrl, type: parentMessageType })\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-quote-message__replied-message__thumbnail-message__cover\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: \"sendbird-quote-message__replied-message__thumbnail-message__cover__icon\" },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.PLAY, fillColor: IconColors.ON_BACKGROUND_2, width: \"14px\", height: \"14px\" })\n            )\n          )\n        ),\n        isThumbnailLoaded && isGif$1(parentMessageType) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-quote-message__replied-message__thumbnail-message__cover\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-quote-message__replied-message__thumbnail-message__cover__icon\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.GIF, fillColor: IconColors.THUMBNAIL_ICON, width: \"14px\", height: \"14px\" })\n          )\n        )\n      ),\n      getUIKitMessageType(parentMessage) === UIKitMessageTypes.FILE && parentMessageUrl && !isUnavailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-quote-message__replied-message__file-message\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-quote-message__replied-message__file-message__type-icon\", type: (_b2 = {}, _b2[uikitFileTypes.IMAGE] = IconTypes.PHOTO, _b2[uikitFileTypes.VIDEO] = IconTypes.PLAY, _b2[uikitFileTypes.AUDIO] = IconTypes.FILE_AUDIO, _b2[uikitFileTypes.GIF] = IconTypes.GIF, _b2[uikitFileTypes.OTHERS] = IconTypes.FILE_DOCUMENT, _b2)[getUIKitFileType(parentMessageType)], fillColor: IconColors.ON_BACKGROUND_3, width: \"16px\", height: \"16px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-quote-message__replied-message__file-message__file-name\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 }, truncateString(splitFileName[splitFileName.length - 1]))\n      )\n    )\n  );\n}\nvar CopyMenuItem$1 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isUserMessage(message))\n      copyToClipboard$1(message.message);\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__COPY),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.COPY, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar ReplyMenuItem$1 = function(props) {\n  var _a2, _b2, _c;\n  var stringSet2 = useLocalization().stringSet;\n  var _d = useMessageMenuContext(), message = _d.message, hideMenu = _d.hideMenu, setQuoteMessage = _d.setQuoteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { disabled: message.parentMessageId > 0, onClick: function(e3) {\n    var _a3;\n    setQuoteMessage(message);\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: ((_b2 = message.parentMessageId) !== null && _b2 !== void 0 ? _b2 : 0) > 0 ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__REPLY),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.REPLY, fillColor: ((_c = message.parentMessageId) !== null && _c !== void 0 ? _c : 0) > 0 ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar ThreadMenuItem$1 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, onReplyInThread = _b2.onReplyInThread;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    onReplyInThread({ message });\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__THREAD),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.THREAD, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar EditMenuItem$1 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), hideMenu = _b2.hideMenu, showEdit = _b2.showEdit, isOnline = _b2.isOnline;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isOnline) {\n      showEdit(true);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__EDIT),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.EDIT, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar ResendMenuItem$1 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, resendMessage = _b2.resendMessage, isOnline = _b2.isOnline;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isOnline) {\n      resendMessage(message);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__RESEND),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar DeleteMenuItem$1 = function(props) {\n  var _a2, _b2, _c;\n  var stringSet2 = useLocalization().stringSet;\n  var _d = useMessageMenuContext(), message = _d.message, hideMenu = _d.hideMenu, deleteMessage = _d.deleteMessage, showRemove = _d.showRemove, isOnline = _d.isOnline, disableDeleteMessage = _d.disableDeleteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { disabled: typeof disableDeleteMessage === \"boolean\" ? disableDeleteMessage : ((_b2 = (_a2 = message.threadInfo) === null || _a2 === void 0 ? void 0 : _a2.replyCount) !== null && _b2 !== void 0 ? _b2 : 0) > 0, onClick: function(e3) {\n    var _a3;\n    if (isFailedMessage(message)) {\n      deleteMessage(message);\n    } else if (isOnline) {\n      showRemove(true);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_c = props.children) !== null && _c !== void 0 ? _c : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: disableDeleteMessage ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__DELETE),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DELETE, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar DownloadMenuItem$1 = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), hideMenu = _b2.hideMenu, message = _b2.message, onDownloadClick = _b2.onDownloadClick;\n  var url = message.url;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem$1, __assign({}, props, { onClick: function() {\n    hideMenu();\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"a\",\n    { className: \"sendbird-message__contextmenu--hyperlink\", rel: \"noopener noreferrer\", href: url, target: \"_blank\", onClick: onDownloadClick },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__SAVE),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DOWNLOAD, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n  ));\n};\nvar MobileContextMenu = function(props) {\n  var _a2, _b2, _c, _d;\n  var channel = props.channel, message = props.message, replyType = props.replyType, userId = props.userId, resendMessage = props.resendMessage, showEdit = props.showEdit, showRemove = props.showRemove, deleteMenuState = props.deleteMenuState, deleteMessage = props.deleteMessage, setQuoteMessage = props.setQuoteMessage, parentRef = props.parentRef, onReplyInThread = props.onReplyInThread, _e2 = props.isOpenedFromThread, isOpenedFromThread = _e2 === void 0 ? false : _e2, _f = props.onDownloadClick, onDownloadClick = _f === void 0 ? null : _f, renderMenuItems = props.renderMenuItems, hideMobileMenu = props.hideMenu;\n  var isByMe = ((_a2 = message === null || message === void 0 ? void 0 : message.sender) === null || _a2 === void 0 ? void 0 : _a2.userId) === userId;\n  var isOnline = useSendbird().state.config.isOnline;\n  var showMenuItemCopy2 = isUserMessage(message);\n  var showMenuItemEdit2 = isUserMessage(message) && isSentMessage(message) && isByMe;\n  var showMenuItemResend2 = isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe;\n  var showMenuItemDelete2 = !isPendingMessage(message) && isByMe;\n  var showMenuItemDeleteByState = isByMe && (deleteMenuState === void 0 || deleteMenuState !== \"HIDE\");\n  var showMenuItemDeleteFinal = showMenuItemDeleteByState && showMenuItemDelete2;\n  var showMenuItemDownload = !isPendingMessage(message) && isFileMessage(message) && !(isVoiceMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isSuper) || (channel === null || channel === void 0 ? void 0 : channel.isBroadcast));\n  var showMenuItemReply2 = replyType === \"QUOTE_REPLY\" && !isFailedMessage(message) && !isPendingMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel());\n  var showMenuItemThread2 = replyType === \"THREAD\" && !isOpenedFromThread && !isFailedMessage(message) && !isPendingMessage(message) && !isThreadMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel());\n  var disableDeleteMessage = deleteMenuState !== void 0 && deleteMenuState === \"DISABLE\" || ((_c = (_b2 = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _b2 === void 0 ? void 0 : _b2.replyCount) !== null && _c !== void 0 ? _c : 0) > 0;\n  var contextValue = {\n    message,\n    hideMenu: hideMobileMenu,\n    setQuoteMessage,\n    onReplyInThread,\n    onMoveToParentMessage: noop$4,\n    showEdit,\n    showRemove,\n    deleteMessage,\n    resendMessage,\n    isOnline,\n    disableDeleteMessage,\n    triggerRef: parentRef,\n    containerRef: parentRef,\n    onDownloadClick\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    MessageMenuProvider,\n    { value: contextValue },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItems, { className: \"sendbird-message__mobile-context-menu\", parentRef, parentContainRef: parentRef, closeDropdown: hideMobileMenu }, (_d = renderMenuItems === null || renderMenuItems === void 0 ? void 0 : renderMenuItems({\n      items: {\n        CopyMenuItem: CopyMenuItem$1,\n        ReplyMenuItem: ReplyMenuItem$1,\n        ThreadMenuItem: ThreadMenuItem$1,\n        EditMenuItem: EditMenuItem$1,\n        ResendMenuItem: ResendMenuItem$1,\n        DeleteMenuItem: DeleteMenuItem$1\n      }\n    })) !== null && _d !== void 0 ? _d : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n      null,\n      showMenuItemCopy2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CopyMenuItem$1, null),\n      showMenuItemReply2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReplyMenuItem$1, null),\n      showMenuItemThread2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ThreadMenuItem$1, null),\n      showMenuItemEdit2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditMenuItem$1, null),\n      showMenuItemResend2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ResendMenuItem$1, null),\n      showMenuItemDeleteFinal && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DeleteMenuItem$1, null),\n      showMenuItemDownload && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DownloadMenuItem$1, null)\n    ))\n  );\n};\nvar CopyMenuItem = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isUserMessage(message))\n      copyToClipboard$1(message.message);\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.COPY, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__COPY)\n  ));\n};\nvar EditMenuItem = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), hideMenu = _b2.hideMenu, showEdit = _b2.showEdit, isOnline = _b2.isOnline;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isOnline) {\n      showEdit(true);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.EDIT, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__EDIT)\n  ));\n};\nvar ResendMenuItem = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, resendMessage = _b2.resendMessage, isOnline = _b2.isOnline;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    if (isOnline) {\n      resendMessage(message);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__RESEND)\n  ));\n};\nvar ReplyMenuItem = function(props) {\n  var _a2, _b2, _c;\n  var stringSet2 = useLocalization().stringSet;\n  var _d = useMessageMenuContext(), message = _d.message, hideMenu = _d.hideMenu, setQuoteMessage = _d.setQuoteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, __assign({}, props, { disabled: message.parentMessageId > 0, onClick: function(e3) {\n    var _a3;\n    setQuoteMessage(message);\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.REPLY, fillColor: ((_b2 = message.parentMessageId) !== null && _b2 !== void 0 ? _b2 : 0) > 0 ? IconColors.ON_BACKGROUND_3 : IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: ((_c = message.parentMessageId) !== null && _c !== void 0 ? _c : 0) > 0 ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__REPLY)\n  ));\n};\nvar ThreadMenuItem = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), message = _b2.message, hideMenu = _b2.hideMenu, onReplyInThread = _b2.onReplyInThread;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, __assign({}, props, { onClick: function(e3) {\n    var _a3;\n    onReplyInThread({ message });\n    hideMenu();\n    (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n  } }), (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.THREAD, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__THREAD)\n  ));\n};\nvar DeleteMenuItem = function(props) {\n  var _a2, _b2, _c;\n  var stringSet2 = useLocalization().stringSet;\n  var _d = useMessageMenuContext(), message = _d.message, hideMenu = _d.hideMenu, deleteMessage = _d.deleteMessage, showRemove = _d.showRemove, isOnline = _d.isOnline, disableDeleteMessage = _d.disableDeleteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, __assign({}, props, { disabled: typeof disableDeleteMessage === \"boolean\" ? disableDeleteMessage : ((_b2 = (_a2 = message.threadInfo) === null || _a2 === void 0 ? void 0 : _a2.replyCount) !== null && _b2 !== void 0 ? _b2 : 0) > 0, onClick: function(e3) {\n    var _a3;\n    if (isFailedMessage(message)) {\n      deleteMessage(message);\n    } else if (isOnline) {\n      showRemove(true);\n      hideMenu();\n      (_a3 = props.onClick) === null || _a3 === void 0 ? void 0 : _a3.call(props, e3);\n    }\n  } }), (_c = props.children) !== null && _c !== void 0 ? _c : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DELETE, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: disableDeleteMessage ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__DELETE)\n  ));\n};\nvar DownloadMenuItem = function(props) {\n  var _a2;\n  var stringSet2 = useLocalization().stringSet;\n  var _b2 = useMessageMenuContext(), hideMenu = _b2.hideMenu, message = _b2.message, onDownloadClick = _b2.onDownloadClick;\n  var url = message.url;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BottomSheetMenuItem, { onClick: function() {\n    return hideMenu();\n  } }, (_a2 = props.children) !== null && _a2 !== void 0 ? _a2 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"a\",\n    { className: \"sendbird-message__bottomsheet--hyperlink\", rel: \"noopener noreferrer\", href: url, target: \"_blank\", onClick: onDownloadClick },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DOWNLOAD, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MESSAGE_MENU__SAVE)\n  ));\n};\nvar EMOJI_SIZE = 38;\nvar MobileBottomSheet = function(props) {\n  var _a2, _b2, _c, _d;\n  var hideMenu = props.hideMenu, channel = props.channel, emojiContainer = props.emojiContainer, message = props.message, replyType = props.replyType, userId = props.userId, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, toggleReaction = props.toggleReaction, _e2 = props.isReactionEnabled, isReactionEnabled = _e2 === void 0 ? false : _e2, showEdit = props.showEdit, showRemove = props.showRemove, deleteMenuState = props.deleteMenuState, setQuoteMessage = props.setQuoteMessage, onReplyInThread = props.onReplyInThread, _f = props.isOpenedFromThread, isOpenedFromThread = _f === void 0 ? false : _f, onDownloadClick = props.onDownloadClick, renderMenuItems = props.renderMenuItems;\n  var isByMe = ((_a2 = message === null || message === void 0 ? void 0 : message.sender) === null || _a2 === void 0 ? void 0 : _a2.userId) === userId;\n  var isOnline = useSendbird().state.config.isOnline;\n  var showMenuItemCopy2 = isUserMessage(message);\n  var showMenuItemEdit2 = isUserMessage(message) && isSentMessage(message) && isByMe;\n  var showMenuItemResend2 = isOnline && isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe;\n  var showMenuItemDelete2 = !isPendingMessage(message) && isByMe;\n  var showMenuItemDeleteByState = isByMe && (deleteMenuState === void 0 || deleteMenuState !== \"HIDE\");\n  var showMenuItemDeleteFinal = showMenuItemDeleteByState && showMenuItemDelete2;\n  var disableDelete = deleteMenuState !== void 0 && deleteMenuState === \"DISABLE\" || ((_c = (_b2 = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _b2 === void 0 ? void 0 : _b2.replyCount) !== null && _c !== void 0 ? _c : 0) > 0;\n  var showMenuItemDownload = isSentMessage(message) && isFileMessage(message) && !isVoiceMessage(message);\n  var showReaction = !isFailedMessage(message) && !isPendingMessage(message) && isReactionEnabled;\n  var showMenuItemReply2 = replyType === \"QUOTE_REPLY\" && !isFailedMessage(message) && !isPendingMessage(message) && ((channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast));\n  var showMenuItemThread2 = replyType === \"THREAD\" && !isOpenedFromThread && !isFailedMessage(message) && !isPendingMessage(message) && !isThreadMessage(message) && ((channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast));\n  var maxEmojisPerRow = Math.floor(window.innerWidth / EMOJI_SIZE) - 1;\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showEmojisOnly = _g2[0], setShowEmojisOnly = _g2[1];\n  var emojis = emojiContainer && getEmojiListAll(emojiContainer);\n  var visibleEmojis = showEmojisOnly ? emojis : emojis === null || emojis === void 0 ? void 0 : emojis.slice(0, maxEmojisPerRow);\n  var canShowMoreEmojis = emojis && emojis.length > maxEmojisPerRow;\n  var contextValue = {\n    message,\n    hideMenu,\n    setQuoteMessage,\n    onReplyInThread,\n    onMoveToParentMessage: function() {\n    },\n    showEdit,\n    showRemove,\n    deleteMessage,\n    resendMessage,\n    isOnline,\n    disableDeleteMessage: disableDelete,\n    triggerRef: null,\n    containerRef: null,\n    onDownloadClick\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    MessageMenuProvider,\n    { value: contextValue },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      BottomSheet,\n      { onBackdropClick: hideMenu },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message__bottomsheet\" },\n        showReaction && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-message__bottomsheet-reactions\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"ul\",\n            { className: \"sendbird-message__bottomsheet-reaction-bar\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: classnames(\"sendbird-message__bottomsheet-reaction-bar__row\", showEmojisOnly && \"sendbird-message__bottomsheet-reaction-bar__all\") },\n              visibleEmojis.map(function(emoji) {\n                var _a3, _b3, _c2;\n                var isReacted = (_c2 = (_b3 = (_a3 = message === null || message === void 0 ? void 0 : message.reactions) === null || _a3 === void 0 ? void 0 : _a3.filter(function(reaction) {\n                  return reaction.key === emoji.key;\n                })[0]) === null || _b3 === void 0 ? void 0 : _b3.userIds) === null || _c2 === void 0 ? void 0 : _c2.some(function(reactorId) {\n                  return reactorId === userId;\n                });\n                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                  ReactionButton,\n                  { key: emoji.key, width: \"\".concat(EMOJI_SIZE, \"px\"), height: \"\".concat(EMOJI_SIZE, \"px\"), selected: isReacted, onClick: function() {\n                    hideMenu();\n                    toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);\n                  }, testID: \"ui_mobile_emoji_reactions_menu_\".concat(emoji.key) },\n                  react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: (emoji === null || emoji === void 0 ? void 0 : emoji.url) || \"\", width: \"28px\", height: \"28px\", placeHolder: function(_a4) {\n                    var style = _a4.style;\n                    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                      \"div\",\n                      { style },\n                      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: \"28px\", height: \"28px\" })\n                    );\n                  } })\n                );\n              }),\n              canShowMoreEmojis && !showEmojisOnly && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                ReactionButton,\n                { key: \"emoji_more\", width: \"38px\", height: \"38px\", onClick: function() {\n                  return setShowEmojisOnly(true);\n                }, testID: \"ui_mobile_emoji_reactions_menu_emojiadd\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: \"\", width: \"28px\", height: \"28px\", placeHolder: function(_a3) {\n                  var style = _a3.style;\n                  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                    \"div\",\n                    { style },\n                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.EMOJI_MORE, fillColor: IconColors.ON_BACKGROUND_3, width: \"28px\", height: \"28px\" })\n                  );\n                } })\n              )\n            )\n          )\n        ),\n        !showEmojisOnly && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-message__bottomsheet--actions\" }, (_d = renderMenuItems === null || renderMenuItems === void 0 ? void 0 : renderMenuItems({\n          items: {\n            CopyMenuItem,\n            EditMenuItem,\n            ResendMenuItem,\n            ReplyMenuItem,\n            ThreadMenuItem,\n            DeleteMenuItem\n          }\n        })) !== null && _d !== void 0 ? _d : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n          null,\n          showMenuItemCopy2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CopyMenuItem, null),\n          showMenuItemEdit2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditMenuItem, null),\n          showMenuItemResend2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ResendMenuItem, null),\n          showMenuItemReply2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReplyMenuItem, null),\n          showMenuItemThread2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ThreadMenuItem, null),\n          showMenuItemDeleteFinal && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DeleteMenuItem, null),\n          showMenuItemDownload && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DownloadMenuItem, null)\n        ))\n      )\n    )\n  );\n};\nvar MobileMenu = function(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, (props === null || props === void 0 ? void 0 : props.isReactionEnabled) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MobileBottomSheet, __assign({}, props)) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MobileContextMenu, __assign({}, props)));\n};\nfunction ThreadReplies(_a2, ref) {\n  var _b2;\n  var className = _a2.className, threadInfo = _a2.threadInfo, onClick = _a2.onClick;\n  var _c = threadInfo.mostRepliedUsers, mostRepliedUsers = _c === void 0 ? [] : _c, replyCount = threadInfo.replyCount;\n  var stringSet2 = useLocalization().stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-ui-thread-replies \".concat(className), role: \"button\", onClick: function(e3) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(e3);\n      e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();\n    }, onKeyDown: function(e3) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(e3);\n      e3 === null || e3 === void 0 ? void 0 : e3.stopPropagation();\n    }, ref },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-ui-thread-replies__user-profiles\" },\n      mostRepliedUsers.slice(0, 4).map(function(user) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { key: user.userId, className: \"sendbird-ui-thread-replies__user-profiles__avatar\", src: user === null || user === void 0 ? void 0 : user.profileUrl, alt: \"user profile\", width: \"20px\", height: \"20px\" });\n      }),\n      (mostRepliedUsers === null || mostRepliedUsers === void 0 ? void 0 : mostRepliedUsers.length) >= 5 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-ui-thread-replies__user-profiles__avatar\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-ui-thread-replies__user-profiles__avatar__image\", src: (_b2 = mostRepliedUsers === null || mostRepliedUsers === void 0 ? void 0 : mostRepliedUsers[4]) === null || _b2 === void 0 ? void 0 : _b2.profileUrl, alt: \"user profile\", width: \"20px\", height: \"20px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-ui-thread-replies__user-profiles__avatar__cover\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-ui-thread-replies__user-profiles__avatar__plus\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.PLUS, fillColor: IconColors.WHITE, width: \"16px\", height: \"16px\" })\n        )\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-ui-thread-replies__reply-counts\", type: LabelTypography.CAPTION_2, color: LabelColors.PRIMARY }, replyCount === 1 ? \"\".concat(replyCount, \" \").concat(stringSet2.CHANNEL__THREAD_REPLY) : \"\".concat(replyCount > 99 ? stringSet2.CHANNEL__THREAD_OVER_MAX : replyCount, \" \").concat(stringSet2.CHANNEL__THREAD_REPLIES)),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-ui-thread-replies__icon\", type: IconTypes.CHEVRON_RIGHT, fillColor: IconColors.PRIMARY, width: \"16px\", height: \"16px\" })\n  );\n}\nvar ThreadReplies$1 = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(ThreadReplies);\nfunction MentionLabel(props) {\n  var _a2, _b2, _c;\n  var mentionTemplate = props.mentionTemplate, mentionedUserId = props.mentionedUserId, mentionedUserNickname = props.mentionedUserNickname, isByMe = props.isByMe;\n  var mentionRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var state = useSendbird().state;\n  var userId = (_a2 = state === null || state === void 0 ? void 0 : state.config) === null || _a2 === void 0 ? void 0 : _a2.userId;\n  var sdk = (_c = (_b2 = state === null || state === void 0 ? void 0 : state.stores) === null || _b2 === void 0 ? void 0 : _b2.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;\n  var amIBeingMentioned = userId === mentionedUserId;\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(), user = _d[0], setUser = _d[1];\n  var fetchUser = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(toggleDropdown) {\n    if (user || !(sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery)) {\n      toggleDropdown();\n      return;\n    }\n    var query = sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery({\n      userIdsFilter: [mentionedUserId]\n    });\n    query.next().then(function(members) {\n      if ((members === null || members === void 0 ? void 0 : members.length) > 0) {\n        setUser(members[0]);\n      }\n      toggleDropdown();\n    });\n  }, [sdk, mentionedUserId]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"a\",\n      { className: classnames(\"sendbird-word__mention\", amIBeingMentioned && \"sendbird-word__mention--me\"), onClick: function() {\n        return fetchUser(toggleDropdown);\n      }, ref: mentionRef, \"data-userid\": mentionedUserId, \"data-nickname\": mentionedUserNickname, \"data-sb-mention\": true },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.CAPTION_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, \"\".concat(mentionTemplate).concat(mentionedUserNickname))\n    );\n  }, menuItems: function(closeDropdown) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      MenuItems,\n      {\n        /**\n        * parentRef: For catching location(x, y) of MenuItems\n        * parentContainRef: For toggling more options(menus & reactions)\n        */\n        parentRef: mentionRef,\n        parentContainRef: mentionRef,\n        closeDropdown,\n        style: { paddingTop: \"0px\", paddingBottom: \"0px\" }\n      },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { user, onSuccess: closeDropdown, currentUserId: userId })\n    );\n  } });\n}\nvar http = /https?:\\/\\//;\nfunction LinkLabel(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, src = _a2.src, type = _a2.type, color2 = _a2.color, children = _a2.children;\n  var url = http.test(src) ? src : \"http://\".concat(src);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"a\",\n    {\n      className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n        \"sendbird-link-label\",\n        changeColorToClassName$2(color2)\n      ], false).join(\" \"),\n      href: url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      // for mobile\n      onTouchEnd: function(e3) {\n        e3.preventDefault();\n        e3.nativeEvent.stopImmediatePropagation();\n        openURL(url);\n      }\n    },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-link-label__label\", testID: \"sendbird-link-label__label\", type, color: color2 }, children)\n  );\n}\nfunction keyGenerator(createdAt, messageUpdatedAt, index2) {\n  return \"sb-msg_\".concat(createdAt, \"_\").concat(messageUpdatedAt, \"_\").concat(index2);\n}\nvar supportedProtocols = [\"https:\", \"http:\", \"tel:\", \"mailto:\"];\nfunction asSafeURL(url) {\n  var safeURL = decodeURIComponent(url);\n  try {\n    var protocol_1 = new URL(safeURL).protocol;\n    if (supportedProtocols.some(function(it2) {\n      return it2 === protocol_1.toLowerCase();\n    })) {\n      return safeURL;\n    } else {\n      return \"#\";\n    }\n  } catch (error) {\n    if (!safeURL.startsWith(\"http://\") && !safeURL.startsWith(\"https://\")) {\n      safeURL = \"https://\" + safeURL;\n    }\n  }\n  return safeURL;\n}\nfunction TextFragment(_a2) {\n  var tokens = _a2.tokens;\n  var messageStore = useMessageContext$1();\n  var message = messageStore === null || messageStore === void 0 ? void 0 : messageStore.message;\n  var isByMe = messageStore === null || messageStore === void 0 ? void 0 : messageStore.isByMe;\n  var updatedAt = message.updatedAt, createdAt = message.createdAt;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, tokens === null || tokens === void 0 ? void 0 : tokens.map(function(token, idx) {\n    var key = keyGenerator(createdAt, updatedAt, idx);\n    return K(token.type).with(TOKEN_TYPES.markdown, function() {\n      var markdownToken = token;\n      var groups = markdownToken.groups;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sendbird-word\", key, \"data-testid\": \"sendbird-ui-word\" }, K(markdownToken.markdownType).with(\"bold\", function() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"span\",\n          { style: { fontWeight: \"bold\" } },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextFragment, { tokens: tokenizeMarkdown({ messageText: groups[1] }) })\n        );\n      }).with(\"url\", function() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"a\",\n          { className: isByMe ? \"sendbird-label--color-oncontent-1\" : \"sendbird-label--color-onbackground-1\", href: asSafeURL(groups[2]) },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextFragment, { tokens: tokenizeMarkdown({ messageText: groups[1] }) })\n        );\n      }).otherwise(function() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n      }));\n    }).with(TOKEN_TYPES.mention, function() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"span\",\n        { className: \"sendbird-word\", key, \"data-testid\": \"sendbird-ui-word\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MentionLabel, {\n          mentionTemplate: USER_MENTION_PREFIX,\n          // @ts-ignore\n          mentionedUserId: token.userId,\n          mentionedUserNickname: token.value,\n          isByMe\n        })\n      );\n    }).with(TOKEN_TYPES.url, function() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"span\",\n        { className: \"sendbird-word\", key, \"data-testid\": \"sendbird-ui-word\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LinkLabel, { src: token.value, type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, token.value)\n      );\n    }).otherwise(function() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, { key }, getWhiteSpacePreservedText(token.value));\n    });\n  }));\n}\nfunction OGMessageItemBody(_a2) {\n  var _b2, _c, _d, _e2;\n  var className = _a2.className, message = _a2.message, _f = _a2.isByMe, isByMe = _f === void 0 ? false : _f, _g2 = _a2.mouseHover, mouseHover = _g2 === void 0 ? false : _g2, _h = _a2.isMentionEnabled, isMentionEnabled = _h === void 0 ? false : _h, _j = _a2.isReactionEnabled, isReactionEnabled = _j === void 0 ? false : _j, _k = _a2.isMarkdownEnabled, isMarkdownEnabled = _k === void 0 ? false : _k, _l = _a2.onMessageHeightChange, onMessageHeightChange = _l === void 0 ? function() {\n  } : _l;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var isMessageMentioned = isMentionEnabled && ((_b2 = message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate) === null || _b2 === void 0 ? void 0 : _b2.length) > 0 && (message === null || message === void 0 ? void 0 : message.mentionedUsers) && ((_c = message === null || message === void 0 ? void 0 : message.mentionedUsers) === null || _c === void 0 ? void 0 : _c.length) > 0;\n  var tokens = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3;\n    if (isMessageMentioned) {\n      return tokenizeMessage({\n        mentionedUsers: (_a3 = message === null || message === void 0 ? void 0 : message.mentionedUsers) !== null && _a3 !== void 0 ? _a3 : void 0,\n        messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,\n        includeMarkdown: isMarkdownEnabled\n      });\n    }\n    return tokenizeMessage({\n      messageText: message === null || message === void 0 ? void 0 : message.message,\n      includeMarkdown: isMarkdownEnabled\n    });\n  }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);\n  var openOpenGraphURL = function() {\n    var _a3;\n    return openURL((_a3 = message === null || message === void 0 ? void 0 : message.ogMetaData) === null || _a3 === void 0 ? void 0 : _a3.url);\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      className !== null && className !== void 0 ? className : \"\",\n      \"sendbird-og-message-item-body\",\n      isByMe ? \"outgoing\" : \"incoming\",\n      mouseHover ? \"mouse-hover\" : \"\",\n      isReactionEnabled && ((_d = message === null || message === void 0 ? void 0 : message.reactions) === null || _d === void 0 ? void 0 : _d.length) > 0 ? \"reactions\" : \"\"\n    ]) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Label,\n      { type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: OG_MESSAGE_BODY_CLASSNAME },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextFragment, { tokens }),\n        isEditedMessage(message) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-og-message-item-body__text-bubble__message\", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2 }, \" \".concat(stringSet2.MESSAGE_EDITED, \" \"))\n      )\n    ),\n    ((_e2 = message.ogMetaData) === null || _e2 === void 0 ? void 0 : _e2.defaultImage) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OGImageSection, { onClick: openOpenGraphURL, ogImage: message.ogMetaData.defaultImage, onMessageHeightChange }),\n    message.ogMetaData && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OGDescriptionSection, { onClick: openOpenGraphURL, ogMetaData: message.ogMetaData, onMessageHeightChange }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-og-message-item-body__cover\" })\n  );\n}\nvar OGImageSection = function(props) {\n  var onClick = props.onClick, ogImage = props.ogImage, onMessageHeightChange = props.onMessageHeightChange;\n  var imageRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var isMobile = useMediaQueryContext().isMobile;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { ref: imageRef, className: classnames(\"sendbird-og-message-item-body__og-thumbnail\", !ogImage.url && \"sendbird-og-message-item-body__og-thumbnail__empty\"), onClick: function() {\n      return onClick();\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: \"sendbird-og-message-item-body__og-thumbnail__image\", url: ogImage.url || \"\", alt: ogImage.alt || \"\", width: \"100%\", height: isMobile ? \"136px\" : \"240px\", onLoad: onMessageHeightChange, onError: function() {\n      var _a2, _b2;\n      try {\n        (_b2 = (_a2 = imageRef === null || imageRef === void 0 ? void 0 : imageRef.current) === null || _a2 === void 0 ? void 0 : _a2.classList) === null || _b2 === void 0 ? void 0 : _b2.add(\"sendbird-og-message-item-body__og-thumbnail__empty\");\n      } catch (error) {\n      }\n    }, defaultComponent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-og-message-item-body__og-thumbnail__place-holder\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-og-message-item-body__og-thumbnail__place-holder__icon\", type: IconTypes.THUMBNAIL_NONE, width: \"56px\", height: \"56px\" })\n    ) })\n  );\n};\nvar OGDescriptionSection = function(props) {\n  var onClick = props.onClick, ogMetaData = props.ogMetaData, onMessageHeightChange = props.onMessageHeightChange;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    onMessageHeightChange();\n  }, [ogMetaData.title, ogMetaData.description, ogMetaData.url]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-og-message-item-body__description\", onClick: function() {\n      return onClick();\n    } },\n    ogMetaData.title && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-og-message-item-body__description__title\", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, ogMetaData.title),\n    ogMetaData.description && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-og-message-item-body__description__description\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, ogMetaData.description),\n    ogMetaData.url && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-og-message-item-body__description__url\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, ogMetaData.url)\n  );\n};\nfunction TextMessageItemBody(_a2) {\n  var _b2;\n  var _c = _a2.className, className = _c === void 0 ? \"\" : _c, message = _a2.message, _d = _a2.isByMe, isByMe = _d === void 0 ? false : _d, _e2 = _a2.mouseHover, mouseHover = _e2 === void 0 ? false : _e2, _f = _a2.isMentionEnabled, isMentionEnabled = _f === void 0 ? false : _f, _g2 = _a2.isReactionEnabled, isReactionEnabled = _g2 === void 0 ? false : _g2, _h = _a2.isMarkdownEnabled, isMarkdownEnabled = _h === void 0 ? false : _h;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var isMessageMentioned = isMentionEnabled && (message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate) && message.mentionedMessageTemplate.length > 0 && (message === null || message === void 0 ? void 0 : message.mentionedUsers) && message.mentionedUsers.length > 0;\n  var tokens = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3;\n    if (isMessageMentioned) {\n      return tokenizeMessage({\n        mentionedUsers: (_a3 = message === null || message === void 0 ? void 0 : message.mentionedUsers) !== null && _a3 !== void 0 ? _a3 : void 0,\n        messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,\n        includeMarkdown: isMarkdownEnabled\n      });\n    }\n    return tokenizeMessage({\n      messageText: message === null || message === void 0 ? void 0 : message.message,\n      includeMarkdown: isMarkdownEnabled\n    });\n  }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Label,\n    { type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: getClassName([\n        className,\n        TEXT_MESSAGE_BODY_CLASSNAME,\n        isByMe ? \"outgoing\" : \"incoming\",\n        mouseHover ? \"mouse-hover\" : \"\",\n        isReactionEnabled && ((_b2 = message === null || message === void 0 ? void 0 : message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length) > 0 ? \"reactions\" : \"\"\n      ]) },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextFragment, { tokens }),\n      isEditedMessage(message) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-text-message-item-body__message edited\", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2 }, \" \".concat(stringSet2.MESSAGE_EDITED, \" \"))\n    )\n  );\n}\nfunction FileMessageItemBody(_a2) {\n  var _this = this;\n  var _b2;\n  var _c = _a2.className, className = _c === void 0 ? \"\" : _c, message = _a2.message, _d = _a2.isByMe, isByMe = _d === void 0 ? false : _d, _e2 = _a2.mouseHover, mouseHover = _e2 === void 0 ? false : _e2, _f = _a2.isReactionEnabled, isReactionEnabled = _f === void 0 ? false : _f, truncateLimit = _a2.truncateLimit, onBeforeDownloadFileMessage = _a2.onBeforeDownloadFileMessage;\n  var logger = null;\n  try {\n    var globalLogger = useSendbird().state.config.logger;\n    logger = globalLogger;\n  } catch (err) {\n  }\n  var isMobile = useMediaQueryContext().isMobile;\n  var truncateMaxNum = truncateLimit !== null && truncateLimit !== void 0 ? truncateLimit : isMobile ? 20 : void 0;\n  var downloadFileWithUrl = function() {\n    return openURL(message === null || message === void 0 ? void 0 : message.url);\n  };\n  var handleOnClickTextButton = onBeforeDownloadFileMessage ? function() {\n    return __awaiter$5(_this, void 0, void 0, function() {\n      var allowDownload, err_1;\n      var _a3, _b3;\n      return __generator(this, function(_c2) {\n        switch (_c2.label) {\n          case 0:\n            _c2.trys.push([0, 2, , 3]);\n            return [4, onBeforeDownloadFileMessage({ message })];\n          case 1:\n            allowDownload = _c2.sent();\n            if (allowDownload) {\n              downloadFileWithUrl();\n            } else {\n              (_a3 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"FileMessageItemBody: Not allowed to download.\");\n            }\n            return [3, 3];\n          case 2:\n            err_1 = _c2.sent();\n            (_b3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b3 === void 0 ? void 0 : _b3.call(logger, \"FileMessageItemBody: Error occurred while determining download continuation:\", err_1);\n            return [3, 3];\n          case 3:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  } : downloadFileWithUrl;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      className,\n      \"sendbird-file-message-item-body\",\n      isByMe ? \"outgoing\" : \"incoming\",\n      mouseHover ? \"mouse-hover\" : \"\",\n      isReactionEnabled && ((_b2 = message === null || message === void 0 ? void 0 : message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length) > 0 ? \"reactions\" : \"\"\n    ]) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-file-message-item-body__file-icon\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-file-message-item-body__file-icon__icon\", type: {\n        IMAGE: IconTypes.PHOTO,\n        VIDEO: IconTypes.PLAY,\n        AUDIO: IconTypes.FILE_AUDIO,\n        GIF: IconTypes.GIF,\n        OTHERS: IconTypes.FILE_DOCUMENT\n      }[getUIKitFileType(message === null || message === void 0 ? void 0 : message.type)], fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      TextButton,\n      { className: \"sendbird-file-message-item-body__file-name\", onClick: handleOnClickTextButton, color: isByMe ? Colors.ONCONTENT_1 : Colors.ONBACKGROUND_1 },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-file-message-item-body__file-name__text\", testID: \"sendbird-file-message-item-body__file-name__text\", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, truncateString((message === null || message === void 0 ? void 0 : message.name) || (message === null || message === void 0 ? void 0 : message.url), truncateMaxNum))\n    )\n  );\n}\nfunction useKeyDown(ref, keyDownCallbackMap) {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    var _a2;\n    (_a2 = ref.current) === null || _a2 === void 0 ? void 0 : _a2.focus();\n  }, [ref.current]);\n  var onKeyDown = usePreservedCallback$1(function(event) {\n    var callback = keyDownCallbackMap[event.key];\n    callback === null || callback === void 0 ? void 0 : callback(event);\n    event.stopPropagation();\n  });\n  return onKeyDown;\n}\nvar ViewerTypes = {\n  MULTI: \"MULTI\"\n};\nfunction mapFileViewerComponentProps(_a2) {\n  var props = _a2.props;\n  if (props.viewerType === ViewerTypes.MULTI) {\n    var _b2 = props, fileInfoList = _b2.fileInfoList, currentIndex = _b2.currentIndex;\n    return fileInfoList[currentIndex];\n  }\n  var fileInfo = props;\n  return {\n    name: fileInfo.name,\n    type: fileInfo.type,\n    url: fileInfo.url\n  };\n}\nfunction DeleteButton(props) {\n  if (props.viewerType !== ViewerTypes.MULTI) {\n    var onDelete_1 = props.onDelete, isByMe = props.isByMe, disableDelete_1 = props.disableDelete, className = props.className;\n    return isByMe ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-fileviewer__header__right__actions__delete \".concat(className) },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: disableDelete_1 ? \"disabled\" : \"\", type: IconTypes.DELETE, fillColor: disableDelete_1 ? IconColors.GRAY : IconColors.ON_BACKGROUND_1, height: \"24px\", width: \"24px\", onClick: function(e3) {\n        if (!disableDelete_1) {\n          onDelete_1 === null || onDelete_1 === void 0 ? void 0 : onDelete_1(e3);\n        }\n      } })\n    ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n}\nfunction Slider(props) {\n  if (props.viewerType === ViewerTypes.MULTI) {\n    var onClickLeft_1 = props.onClickLeft, onClickRight_1 = props.onClickRight;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-file-viewer-slider\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-file-viewer-arrow--left\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SLIDE_LEFT, fillColor: IconColors.ON_BACKGROUND_1, height: SLIDER_BUTTON_ICON_SIDE_LENGTH, width: SLIDER_BUTTON_ICON_SIDE_LENGTH, onClick: function(e3) {\n          onClickLeft_1 === null || onClickLeft_1 === void 0 ? void 0 : onClickLeft_1();\n          e3.stopPropagation();\n        } })\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-file-viewer-arrow--right\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SLIDE_LEFT, fillColor: IconColors.ON_BACKGROUND_1, height: SLIDER_BUTTON_ICON_SIDE_LENGTH, width: SLIDER_BUTTON_ICON_SIDE_LENGTH, onClick: function(e3) {\n          e3.stopPropagation();\n          onClickRight_1 === null || onClickRight_1 === void 0 ? void 0 : onClickRight_1();\n        } })\n      )\n    );\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n}\nvar FileViewerComponent$1 = function(props) {\n  var profileUrl = props.profileUrl, nickname = props.nickname, onClose = props.onClose, onDownloadClick = props.onDownloadClick;\n  var _a2 = props, onClickLeft = _a2.onClickLeft, onClickRight = _a2.onClickRight;\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var onKeyDown = useKeyDown(ref, {\n    Escape: function(e3) {\n      return onClose === null || onClose === void 0 ? void 0 : onClose(e3);\n    },\n    ArrowLeft: function() {\n      return onClickLeft === null || onClickLeft === void 0 ? void 0 : onClickLeft();\n    },\n    ArrowRight: function() {\n      return onClickRight === null || onClickRight === void 0 ? void 0 : onClickRight();\n    }\n  });\n  var _b2 = mapFileViewerComponentProps({ props }), name2 = _b2.name, type = _b2.type, url = _b2.url;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Modal,\n    { onClose },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      {\n        className: \"sendbird-fileviewer\",\n        \"data-testid\": \"sendbird-fileviewer\",\n        onKeyDown,\n        // to focus\n        tabIndex: 1,\n        ref\n      },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-fileviewer__header\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-fileviewer__header__left\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__left__avatar\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { height: \"32px\", width: \"32px\", src: profileUrl })\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__left__text-container\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-fileviewer__header__left__filename\", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, name2),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-fileviewer__header__left__sender-name\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, nickname)\n          )\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-fileviewer__header__right\" },\n          isSupportedFileView(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__right__actions\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"a\",\n              { className: \"sendbird-fileviewer__header__right__actions__download\", rel: \"noopener noreferrer\", href: url, target: \"_blank\", onClick: onDownloadClick },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DOWNLOAD, fillColor: IconColors.ON_BACKGROUND_1, height: \"24px\", width: \"24px\" })\n            ),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DeleteButton, __assign({ className: \"sendbird-fileviewer__header__right__actions__delete\" }, props))\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__right__actions__close\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.CLOSE, fillColor: IconColors.ON_BACKGROUND_1, height: \"24px\", width: \"24px\", onClick: function(e3) {\n              return onClose === null || onClose === void 0 ? void 0 : onClose(e3);\n            } })\n          )\n        )\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-fileviewer__content\" },\n        isVideo(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"video\",\n          { controls: true, className: \"sendbird-fileviewer__content__video\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"source\", { src: url, type })\n        ),\n        isImage(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", { src: url, alt: name2, className: props.viewerType === ViewerTypes.MULTI ? \"sendbird-fileviewer__content__img__multi\" : \"sendbird-fileviewer__content__img\" }),\n        !isSupportedFileView(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-fileviewer__content__unsupported\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, (stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.UI__FILE_VIEWER__UNSUPPORT) || \"Unsupported message\")\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Slider, __assign({}, props))\n      )\n    )\n  );\n};\nfunction FileViewer$1(_a2) {\n  var _b2, _c, _d;\n  var message = _a2.message, _e2 = _a2.statefulFileInfoList, statefulFileInfoList = _e2 === void 0 ? [] : _e2, onClose = _a2.onClose, _f = _a2.isByMe, isByMe = _f === void 0 ? false : _f, onDelete = _a2.onDelete, currentIndex = _a2.currentIndex, onClickLeft = _a2.onClickLeft, onClickRight = _a2.onClickRight, onDownloadClick = _a2.onDownloadClick;\n  if (isMultipleFilesMessage(message)) {\n    var castedMessage = message;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewerComponent$1, { profileUrl: castedMessage.sender.profileUrl, nickname: castedMessage.sender.nickname, viewerType: ViewerTypes.MULTI, fileInfoList: statefulFileInfoList.filter(function(fileInfo) {\n      return fileInfo.url;\n    }).map(function(fileInfo) {\n      return {\n        name: fileInfo.fileName || \"\",\n        type: fileInfo.mimeType || \"\",\n        url: fileInfo.url || \"\"\n      };\n    }), currentIndex: currentIndex || 0, onClickLeft: onClickLeft || noop$4, onClickRight: onClickRight || noop$4, onClose, onDownloadClick });\n  } else if (isFileMessage(message)) {\n    var castedMessage = message;\n    return Object(react_dom__WEBPACK_IMPORTED_MODULE_1__[\"createPortal\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewerComponent$1, { profileUrl: (_b2 = castedMessage.sender) === null || _b2 === void 0 ? void 0 : _b2.profileUrl, nickname: (_c = castedMessage.sender) === null || _c === void 0 ? void 0 : _c.nickname, name: castedMessage.name, type: castedMessage.type, url: castedMessage === null || castedMessage === void 0 ? void 0 : castedMessage.url, isByMe, disableDelete: (((_d = castedMessage.threadInfo) === null || _d === void 0 ? void 0 : _d.replyCount) || 0) > 0, onClose, onDelete: onDelete || noop$4, onDownloadClick }), document.getElementById(MODAL_ROOT));\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n}\nfunction ImageGrid(_a2) {\n  var _b2;\n  var children = _a2.children, className = _a2.className, message = _a2.message, isReactionEnabled = _a2.isReactionEnabled;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-image-grid-wrap\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: getClassName([\n      className !== null && className !== void 0 ? className : \"\",\n      \"sendbird-image-grid\",\n      isReactionEnabled && ((_b2 = message === null || message === void 0 ? void 0 : message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length) > 0 ? \"reactions\" : \"\"\n    ]) }, children)\n  );\n}\nvar GRID_WIDTH_CHAT_WEB = 400;\nvar GRID_SIDE_PADDING = 8;\nvar GRID_GAP = 4;\nvar TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN = 54;\nvar PROFILE_IMAGE_WIDTH = 40;\nvar CHAT_MOBILE_SIDE_PADDING = 48;\nvar THREAD_PARENT_WIDTH = 320;\nvar THREAD_PARENT_SIDE_PADDING = 28;\nvar THREAD_PARENT_GRID_MARGIN_LEFT = 12;\nvar THREAD_CHILD_WIDTH = 200;\nvar THREAD_CHILD_SIDE_PADDING = 8;\nvar THREAD_CHILD_MOBILE_SIDE_PADDING = 32;\nvar THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN = 60;\nvar MULTIPLE_FILES_IMAGE_SIDE_LENGTH = {\n  CHAT_WEB: \"calc(\".concat(GRID_WIDTH_CHAT_WEB / 2, \"px - \").concat((GRID_SIDE_PADDING + GRID_GAP) / 2, \"px)\"),\n  CHAT_MOBILE: \"calc(50vw - \".concat((CHAT_MOBILE_SIDE_PADDING + PROFILE_IMAGE_WIDTH + TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN + GRID_SIDE_PADDING + GRID_GAP) / 2, \"px)\"),\n  THREAD_PARENT_WEB: \"calc(\".concat((THREAD_PARENT_WIDTH - (THREAD_PARENT_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_PARENT_GRID_MARGIN_LEFT + GRID_GAP)) / 2, \"px)\"),\n  THREAD_PARENT_MOBILE: \"calc(50vw - \".concat((THREAD_PARENT_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_PARENT_GRID_MARGIN_LEFT + GRID_GAP) / 2, \"px)\"),\n  THREAD_CHILD_WEB: \"calc(\".concat((THREAD_CHILD_WIDTH - THREAD_CHILD_SIDE_PADDING - GRID_GAP) / 2, \"px)\"),\n  THREAD_CHILD_MOBILE: \"calc(50vw - \".concat((THREAD_CHILD_MOBILE_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN + GRID_SIDE_PADDING + GRID_GAP) / 2, \"px)\")\n};\nvar MULTIPLE_FILES_IMAGE_BORDER_RADIUS = {\n  CHAT_WEB: \"6px\",\n  CHAT_MOBILE: \"6px\",\n  THREAD_PARENT_WEB: \"6px\",\n  THREAD_PARENT_MOBILE: \"6px\",\n  THREAD_CHILD_WEB: \"6px\",\n  THREAD_CHILD_MOBILE: \"6px\"\n};\nvar MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH = \"34px\";\nvar ThreadMessageKind = {\n  PARENT: \"parent\",\n  CHILD: \"child\"\n};\nfunction MultipleFilesMessageItemBody(_a2) {\n  var _this = this;\n  var className = _a2.className, message = _a2.message, _b2 = _a2.isReactionEnabled, isReactionEnabled = _b2 === void 0 ? false : _b2, threadMessageKindKey = _a2.threadMessageKindKey, _c = _a2.statefulFileInfoList, statefulFileInfoList = _c === void 0 ? [] : _c, _d = _a2.onBeforeDownloadFileMessage, onBeforeDownloadFileMessage = _d === void 0 ? null : _d;\n  var logger = useSendbird().state.config.logger;\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1), currentFileViewerIndex = _e2[0], setCurrentFileViewerIndex = _e2[1];\n  function onClose() {\n    setCurrentFileViewerIndex(-1);\n  }\n  function onClickLeft() {\n    setCurrentFileViewerIndex(currentFileViewerIndex === 0 ? statefulFileInfoList.length - 1 : currentFileViewerIndex - 1);\n  }\n  function onClickRight() {\n    setCurrentFileViewerIndex(currentFileViewerIndex === statefulFileInfoList.length - 1 ? 0 : currentFileViewerIndex + 1);\n  }\n  return threadMessageKindKey ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    currentFileViewerIndex > -1 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewer$1, { message, statefulFileInfoList, currentIndex: currentFileViewerIndex, onClickLeft, onClickRight, onClose, onDownloadClick: function(e3) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var allowDownload, err_1;\n        var _a3, _b3;\n        return __generator(this, function(_c2) {\n          switch (_c2.label) {\n            case 0:\n              if (!onBeforeDownloadFileMessage)\n                return [\n                  2\n                  /*return*/\n                ];\n              _c2.label = 1;\n            case 1:\n              _c2.trys.push([1, 3, , 4]);\n              return [4, onBeforeDownloadFileMessage({ message, index: currentFileViewerIndex })];\n            case 2:\n              allowDownload = _c2.sent();\n              if (!allowDownload) {\n                e3.preventDefault();\n                (_a3 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"MultipleFilesMessageItemBody: Not allowed to download.\");\n              }\n              return [3, 4];\n            case 3:\n              err_1 = _c2.sent();\n              (_b3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b3 === void 0 ? void 0 : _b3.call(logger, \"MultipleFilesMessageItemBody: Error occurred while determining download continuation:\", err_1);\n              return [3, 4];\n            case 4:\n              return [\n                2\n                /*return*/\n              ];\n          }\n        });\n      });\n    } }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageGrid, { className, message, isReactionEnabled }, statefulFileInfoList.map(function(fileInfo, index2) {\n      var _a3, _b3, _c2, _d2;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-multiple-files-image-renderer-wrapper\", onClick: message.sendingStatus === Z.SUCCEEDED ? function() {\n          return setCurrentFileViewerIndex(index2);\n        } : void 0, key: \"sendbird-multiple-files-image-renderer-\".concat(index2, \"-\").concat(fileInfo.url) },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { url: (_d2 = (_c2 = (_b3 = (_a3 = fileInfo.thumbnails) === null || _a3 === void 0 ? void 0 : _a3[0]) === null || _b3 === void 0 ? void 0 : _b3.url) !== null && _c2 !== void 0 ? _c2 : fileInfo.url) !== null && _d2 !== void 0 ? _d2 : \"\", fixedSize: false, width: MULTIPLE_FILES_IMAGE_SIDE_LENGTH[threadMessageKindKey], maxSideLength: MULTIPLE_FILES_IMAGE_SIDE_LENGTH.CHAT_WEB, height: MULTIPLE_FILES_IMAGE_SIDE_LENGTH[threadMessageKindKey], borderRadius: getBorderRadiusForMultipleImageRenderer(MULTIPLE_FILES_IMAGE_BORDER_RADIUS[threadMessageKindKey], index2, statefulFileInfoList.length), shadeOnHover: true, isUploaded: !!fileInfo.isUploaded, placeHolder: function(_a4) {\n          var style = _a4.style;\n          if (fileInfo.mimeType && isGif$1(fileInfo.mimeType))\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImagePlaceholder.GIF, { style });\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImagePlaceholder.Default, { style });\n        }, defaultComponent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImagePlaceholder.LoadError, null) })\n      );\n    }))\n  ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n}\nvar ImagePlaceholder = {\n  Default: function(_a2) {\n    var style = _a2.style;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-multiple-files-image-renderer__thumbnail__placeholder\", style },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH, height: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH })\n    );\n  },\n  GIF: function(_a2) {\n    var style = _a2.style;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-multiple-files-image-renderer__thumbnail__placeholder\", style },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.GIF, fillColor: IconColors.THUMBNAIL_ICON, width: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH, height: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH })\n      )\n    );\n  },\n  LoadError: function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-multiple-files-image-renderer__thumbnail__placeholder\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.THUMBNAIL_NONE, fillColor: IconColors.ON_BACKGROUND_2, width: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH, height: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH })\n    );\n  }\n};\nfunction useThreadMessageKindKeySelector(_a2) {\n  var threadMessageKind = _a2.threadMessageKind, isMobile = _a2.isMobile;\n  var threadMessageKindKey = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return K(threadMessageKind).with(ThreadMessageKind.PARENT, function() {\n      return isMobile ? \"THREAD_PARENT_MOBILE\" : \"THREAD_PARENT_WEB\";\n    }).with(ThreadMessageKind.CHILD, function() {\n      return isMobile ? \"THREAD_CHILD_MOBILE\" : \"THREAD_CHILD_WEB\";\n    }).otherwise(function() {\n      return isMobile ? \"CHAT_MOBILE\" : \"CHAT_WEB\";\n    });\n  }, [isMobile, threadMessageKind]);\n  return threadMessageKindKey;\n}\nvar useFileInfoListWithUploaded = function(message) {\n  var _a2, _b2;\n  var blobHandler = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(/* @__PURE__ */ new Map());\n  var getObjectURL = function(index2, blob) {\n    if (!blobHandler.current.has(index2) && blob)\n      blobHandler.current.set(index2, URL.createObjectURL(blob));\n    return blobHandler.current.get(index2);\n  };\n  var revokeURLs = function() {\n    if (blobHandler.current.size > 0) {\n      blobHandler.current.forEach(function(url) {\n        return URL.revokeObjectURL(url);\n      });\n      blobHandler.current.clear();\n    }\n  };\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    return function() {\n      return revokeURLs();\n    };\n  }, []);\n  if (!message || !message.isMultipleFilesMessage || !message.isMultipleFilesMessage()) {\n    return [];\n  } else if (message.sendingStatus === Z.SUCCEEDED) {\n    revokeURLs();\n    return message.fileInfoList.map(function(it2) {\n      var _a3, _b3;\n      return __assign(__assign({}, it2), { url: it2.url, isUploaded: true, mimeType: (_a3 = it2.mimeType) !== null && _a3 !== void 0 ? _a3 : void 0, fileName: (_b3 = it2.fileName) !== null && _b3 !== void 0 ? _b3 : void 0 });\n    });\n  } else {\n    return (_b2 = (_a2 = message === null || message === void 0 ? void 0 : message.messageParams) === null || _a2 === void 0 ? void 0 : _a2.fileInfoList.map(function(it2, index2) {\n      var _a3, _b3;\n      return __assign(__assign({}, it2), { url: (_b3 = (_a3 = getObjectURL(index2)) !== null && _a3 !== void 0 ? _a3 : it2.fileUrl) !== null && _b3 !== void 0 ? _b3 : it2.file instanceof Blob ? getObjectURL(index2, it2.file) : void 0, isUploaded: !it2.file && typeof it2.fileUrl === \"string\" && it2.fileUrl.length > 0 });\n    })) !== null && _b2 !== void 0 ? _b2 : [];\n  }\n};\nvar ProgressBarColorTypes = {\n  PRIMARY: \"progress-bar-color--primary\",\n  GRAY: \"progress-bar-color--gray\"\n};\nvar ProgressBar = function(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, _c = _a2.disabled, disabled = _c === void 0 ? false : _c, maxSize = _a2.maxSize, _d = _a2.currentSize, currentSize = _d === void 0 ? 0 : _d, _e2 = _a2.colorType, colorType = _e2 === void 0 ? ProgressBarColorTypes.PRIMARY : _e2;\n  var width = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return \"\".concat(currentSize / maxSize * 100, \"%\");\n  }, [currentSize, maxSize]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-progress-bar\", className, colorType, disabled && \"progress-bar--disabled\") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-progress-bar__fill\", style: { width } })\n  );\n};\nvar INITIALIZE_AUDIO_UNIT = \"INITIALIZE_AUDIO_UNIT\";\nvar RESET_AUDIO_UNIT = \"RESET_AUDIO_UNIT\";\nvar SET_CURRENT_PLAYER = \"SET_CURRENT_PLAYER\";\nvar ON_VOICE_PLAYER_PLAY = \"ON_VOICE_PLAYER_PLAY\";\nvar ON_VOICE_PLAYER_PAUSE = \"ON_VOICE_PLAYER_PAUSE\";\nvar ON_CURRENT_TIME_UPDATE = \"ON_CURRENT_TIME_UPDATE\";\nvar VOICE_PLAYER_STATUS = {\n  IDLE: \"IDLE\",\n  PREPARING: \"PREPARING\",\n  PLAYING: \"PLAYING\",\n  PAUSED: \"PAUSED\"\n};\nvar AudioUnitDefaultValue = function() {\n  return {\n    audioFile: null,\n    playbackTime: 0,\n    duration: 1e3,\n    playingStatus: VOICE_PLAYER_STATUS.IDLE\n  };\n};\nvar voicePlayerInitialState = {\n  currentPlayer: null,\n  currentGroupKey: \"\",\n  audioStorage: {}\n};\nfunction voicePlayerReducer(state, action) {\n  var _a2, _b2, _c, _d, _e2;\n  var _f, _g2, _h, _j;\n  switch (action.type) {\n    case INITIALIZE_AUDIO_UNIT: {\n      var groupKey = action.payload.groupKey;\n      var audioUnit = ((_f = state.audioStorage) === null || _f === void 0 ? void 0 : _f[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();\n      audioUnit.playingStatus = VOICE_PLAYER_STATUS.PREPARING;\n      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_a2 = {}, _a2[groupKey] = audioUnit, _a2)) });\n    }\n    case RESET_AUDIO_UNIT: {\n      var groupKey = action.payload.groupKey;\n      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_b2 = {}, _b2[groupKey] = AudioUnitDefaultValue(), _b2)) });\n    }\n    case SET_CURRENT_PLAYER: {\n      var _k = action.payload, audioPlayer = _k.audioPlayer, groupKey = _k.groupKey;\n      return __assign(__assign({}, state), { currentPlayer: audioPlayer, currentGroupKey: groupKey });\n    }\n    case ON_VOICE_PLAYER_PLAY: {\n      var _l = action.payload, groupKey = _l.groupKey, audioFile = _l.audioFile;\n      var audioUnit = ((_g2 = state.audioStorage) === null || _g2 === void 0 ? void 0 : _g2[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();\n      audioUnit.audioFile = audioFile;\n      audioUnit.playingStatus = VOICE_PLAYER_STATUS.PLAYING;\n      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_c = {}, _c[groupKey] = audioUnit, _c)) });\n    }\n    case ON_VOICE_PLAYER_PAUSE: {\n      var _m = action.payload, groupKey = _m.groupKey, duration = _m.duration, currentTime = _m.currentTime;\n      var audioUnit = ((_h = state.audioStorage) === null || _h === void 0 ? void 0 : _h[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();\n      audioUnit.playingStatus = VOICE_PLAYER_STATUS.PAUSED;\n      if (duration === currentTime) {\n        audioUnit.playbackTime = 0;\n      }\n      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_d = {}, _d[groupKey] = audioUnit, _d)) });\n    }\n    case ON_CURRENT_TIME_UPDATE: {\n      var groupKey = action.payload.groupKey;\n      var _o = state.currentPlayer, currentTime = _o.currentTime, duration = _o.duration;\n      var audioUnit = ((_j = state.audioStorage) === null || _j === void 0 ? void 0 : _j[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue();\n      if (audioUnit.playbackTime === audioUnit.duration && audioUnit.playingStatus === VOICE_PLAYER_STATUS.PAUSED) {\n        audioUnit.playbackTime = 0;\n      } else if (currentTime > 0 && duration > 0) {\n        audioUnit.playbackTime = currentTime;\n        audioUnit.duration = duration;\n      }\n      return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_e2 = {}, _e2[groupKey] = audioUnit, _e2)) });\n    }\n    default:\n      return state;\n  }\n}\nvar generateGroupKey = function(channelUrl, key) {\n  if (channelUrl === void 0) {\n    channelUrl = \"\";\n  }\n  if (key === void 0) {\n    key = \"\";\n  }\n  return \"\".concat(channelUrl, \"-\").concat(key);\n};\nvar getParsedVoiceAudioFileInfo = function(mimeType) {\n  if (isSafari(navigator.userAgent) && mimeType.includes(\"m4a\")) {\n    return {\n      name: VOICE_MESSAGE_FILE_NAME__XM4A,\n      mimeType: VOICE_MESSAGE_MIME_TYPE__XM4A\n    };\n  }\n  return {\n    name: VOICE_MESSAGE_FILE_NAME,\n    mimeType: VOICE_MESSAGE_MIME_TYPE\n  };\n};\nvar ALL = \"ALL\";\nvar noop$2 = function() {\n};\nvar VoicePlayerStoreDefaultValue = {\n  currentGroupKey: \"\",\n  currentPlayer: null,\n  audioStorage: {}\n};\nvar Context$1 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])({\n  play: noop$2,\n  pause: noop$2,\n  stop: noop$2,\n  voicePlayerStore: VoicePlayerStoreDefaultValue\n});\nvar VoicePlayerProvider = function(_a2) {\n  var children = _a2.children;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useReducer\"])(voicePlayerReducer, voicePlayerInitialState), voicePlayerStore = _b2[0], voicePlayerDispatcher = _b2[1];\n  var currentGroupKey = voicePlayerStore.currentGroupKey, currentPlayer = voicePlayerStore.currentPlayer, audioStorage = voicePlayerStore.audioStorage;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var logger = config2.logger;\n  var stop = function(text2) {\n    if (text2 === void 0) {\n      text2 = \"\";\n    }\n    if (currentGroupKey.includes(text2)) {\n      logger.info(\"VoicePlayer: Pause playing(by text).\");\n      pause(currentGroupKey);\n    }\n  };\n  var pause = function(groupKey) {\n    if (currentPlayer) {\n      if (groupKey === currentGroupKey) {\n        logger.info(\"VoicePlayer: Pause playing(by group key).\");\n        currentPlayer.pause();\n      } else if (groupKey === ALL) {\n        logger.info(\"VoicePlayer: Pause playing(all).\");\n        currentPlayer.pause();\n      }\n    } else {\n      logger.warning(\"VoicePlayer: No currentPlayer to pause.\");\n    }\n  };\n  var play = function(_a3) {\n    var groupKey = _a3.groupKey, audioFile = _a3.audioFile, _b3 = _a3.audioFileUrl, audioFileUrl = _b3 === void 0 ? \"\" : _b3, _c = _a3.audioFileMimeType, audioFileMimeType = _c === void 0 ? VOICE_MESSAGE_MIME_TYPE : _c;\n    if (groupKey !== currentGroupKey) {\n      pause(currentGroupKey);\n    }\n    var voicePlayerRoot = document.getElementById(VOICE_PLAYER_ROOT_ID);\n    var voicePlayerAudioElement = document.getElementById(VOICE_PLAYER_AUDIO_ID);\n    if (voicePlayerRoot && voicePlayerAudioElement) {\n      voicePlayerRoot.removeChild(voicePlayerAudioElement);\n    }\n    logger.info(\"VoicePlayer: Start getting audio file.\");\n    new Promise(function(resolve, reject) {\n      var _a4;\n      voicePlayerDispatcher({\n        type: INITIALIZE_AUDIO_UNIT,\n        payload: { groupKey }\n      });\n      if (audioFile) {\n        logger.info(\"VoicePlayer: Use the audioFile instance.\");\n        resolve(audioFile);\n        return;\n      }\n      var cachedAudioFile = (_a4 = audioStorage === null || audioStorage === void 0 ? void 0 : audioStorage[groupKey]) === null || _a4 === void 0 ? void 0 : _a4.audioFile;\n      if (cachedAudioFile) {\n        logger.info(\"VoicePlayer: Get from the audioStorage.\");\n        resolve(cachedAudioFile);\n        return;\n      }\n      fetch(audioFileUrl).then(function(res) {\n        return res.blob();\n      }).then(function(blob) {\n        var audioFile2 = new File([blob], getParsedVoiceAudioFileInfo(audioFileMimeType).name, {\n          lastModified: (/* @__PURE__ */ new Date()).getTime(),\n          type: getParsedVoiceAudioFileInfo(audioFileMimeType).mimeType\n        });\n        resolve(audioFile2);\n        logger.info(\"VoicePlayer: Get the audioFile from URL.\");\n      }).catch(reject);\n    }).then(function(audioFile2) {\n      var _a4;\n      var voicePlayerRoot2 = document.getElementById(VOICE_PLAYER_ROOT_ID);\n      logger.info(\"VoicePlayer: Succeeded getting audio file.\", { audioFile: audioFile2 });\n      var currentAudioUnit = audioStorage[groupKey] || AudioUnitDefaultValue();\n      var audioPlayer = new Audio((_a4 = URL === null || URL === void 0 ? void 0 : URL.createObjectURL) === null || _a4 === void 0 ? void 0 : _a4.call(URL, audioFile2));\n      audioPlayer.id = VOICE_PLAYER_AUDIO_ID;\n      audioPlayer.currentTime = currentAudioUnit.playbackTime;\n      audioPlayer.volume = 1;\n      audioPlayer.loop = false;\n      audioPlayer.onplaying = function() {\n        logger.info(\"VoicePlayer: OnPlaying event is called from audioPlayer\", { groupKey, audioPlayer });\n        voicePlayerDispatcher({\n          type: ON_VOICE_PLAYER_PLAY,\n          payload: { groupKey, audioFile: audioFile2 }\n        });\n      };\n      audioPlayer.onpause = function() {\n        logger.info(\"VoicePlayer: OnPause event is called from audioPlayer\", { groupKey, audioPlayer });\n        voicePlayerDispatcher({\n          type: ON_VOICE_PLAYER_PAUSE,\n          payload: { groupKey, duration: audioPlayer.duration, currentTime: audioPlayer.currentTime }\n        });\n      };\n      audioPlayer.ontimeupdate = function() {\n        voicePlayerDispatcher({\n          type: ON_CURRENT_TIME_UPDATE,\n          payload: { groupKey }\n        });\n      };\n      audioPlayer.onerror = function(error) {\n        logger.error(\"VoicePlayer: Failed to load the audioFile on the audio player.\", error);\n        voicePlayerDispatcher({\n          type: RESET_AUDIO_UNIT,\n          payload: { groupKey }\n        });\n      };\n      audioPlayer.dataset.sbGroupId = groupKey;\n      try {\n        voicePlayerRoot2 === null || voicePlayerRoot2 === void 0 ? void 0 : voicePlayerRoot2.childNodes.forEach(function(node2) {\n          var _a5, _b4;\n          var element2 = node2;\n          var thisGroupKey = (_a5 = element2.dataset) === null || _a5 === void 0 ? void 0 : _a5.sbGroupKey;\n          if (thisGroupKey !== groupKey) {\n            (_b4 = element2 === null || element2 === void 0 ? void 0 : element2.pause) === null || _b4 === void 0 ? void 0 : _b4.call(element2);\n            voicePlayerRoot2.removeChild(element2);\n            logger.info(\"VoicePlayer: Removed other player.\", { element: element2 });\n          }\n        });\n      } finally {\n        audioPlayer === null || audioPlayer === void 0 ? void 0 : audioPlayer.play();\n        voicePlayerRoot2 === null || voicePlayerRoot2 === void 0 ? void 0 : voicePlayerRoot2.appendChild(audioPlayer);\n        voicePlayerDispatcher({\n          type: SET_CURRENT_PLAYER,\n          payload: { groupKey, audioPlayer }\n        });\n        logger.info(\"VoicePlayer: Succeeded playing audio player.\", { groupKey, audioPlayer });\n      }\n    }).catch(function(error) {\n      logger.warning(\"VoicePlayer: Failed loading audio file with URL.\", error);\n      voicePlayerDispatcher({\n        type: RESET_AUDIO_UNIT,\n        payload: { groupKey }\n      });\n    });\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Context$1.Provider,\n    { value: {\n      play,\n      pause,\n      stop,\n      voicePlayerStore\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { id: VOICE_PLAYER_ROOT_ID, style: { display: \"none\" } }),\n    children\n  );\n};\nvar useVoicePlayerContext = function() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(Context$1);\n};\nvar Context = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])({\n  start: noop$4,\n  stop: noop$4,\n  isRecordable: false\n});\nvar VoiceRecorderProvider = function(props) {\n  var _a2;\n  var children = props.children;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var logger = config2.logger, groupChannel = config2.groupChannel;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), mediaRecorder = _b2[0], setMediaRecorder = _b2[1];\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isRecordable = _c[0], setIsRecordable = _c[1];\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), permissionWarning = _d[0], setPermissionWarning = _d[1];\n  var stringSet2 = useLocalization().stringSet;\n  var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), webAudioUtils = _e2[0], setWebAudioUtils = _e2[1];\n  var browserSupportMimeType = (_a2 = BROWSER_SUPPORT_MIME_TYPE_LIST.find(function(mimeType) {\n    return MediaRecorder.isTypeSupported(mimeType);\n  })) !== null && _a2 !== void 0 ? _a2 : \"\";\n  if (isVoiceMessageEnabled && !browserSupportMimeType) {\n    logger.error(\"VoiceRecorder: Browser does not support mimeType\", { mimmeTypes: BROWSER_SUPPORT_MIME_TYPE_LIST });\n  }\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (isVoiceMessageEnabled && !webAudioUtils) {\n      __webpack_require__.e(/*! import() */ 6).then(__webpack_require__.bind(null, /*! ./bundle-CzgB87O4-NjeC3zd8.js */ \"./node_modules/@practo/practo-ai/dist/bundle-CzgB87O4-NjeC3zd8.js\")).then(function(module) {\n        return setWebAudioUtils(module);\n      });\n    }\n  }, [isVoiceMessageEnabled, webAudioUtils]);\n  var start = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(eventHandler) {\n    var _a3, _b3;\n    if (isVoiceMessageEnabled && !webAudioUtils) {\n      logger.error(\"VoiceRecorder: Recording audio processor is being loaded.\");\n      return;\n    }\n    var checkPermission = function() {\n      try {\n        navigator.permissions.query({ name: \"microphone\" }).then(function(result) {\n          if (result.state === \"denied\") {\n            logger.warning(\"VoiceRecorder: Permission denied.\");\n            setPermissionWarning(true);\n          }\n        });\n      } catch (error) {\n        logger.warning(\"VoiceRecorder: Failed to check permission.\", error);\n      }\n    };\n    logger.info(\"VoiceRecorder: Start recording.\");\n    if (mediaRecorder) {\n      stop();\n      logger.info(\"VoiceRecorder: Previous mediaRecorder is stopped.\");\n    }\n    checkPermission();\n    (_b3 = (_a3 = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a3 === void 0 ? void 0 : _a3.getUserMedia) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, { audio: true }).then(function(stream) {\n      var _a4;\n      logger.info(\"VoiceRecorder: Succeeded getting media stream.\", stream);\n      setIsRecordable(true);\n      var mediaRecorder2 = new MediaRecorder(stream, {\n        mimeType: browserSupportMimeType,\n        audioBitsPerSecond: VOICE_RECORDER_AUDIO_BIT_RATE\n      });\n      mediaRecorder2.ondataavailable = function(e3) {\n        logger.info(\"VoiceRecorder: Succeeded getting an available data.\", e3.data);\n        var audioFile = new File([e3.data], VOICE_MESSAGE_FILE_NAME, {\n          lastModified: (/* @__PURE__ */ new Date()).getTime(),\n          type: VOICE_MESSAGE_MIME_TYPE\n        });\n        webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.downsampleToWav(audioFile, function(buffer) {\n          var _a5;\n          var mp3Buffer = webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.encodeMp3(buffer);\n          var mp3blob = new Blob(mp3Buffer, { type: VOICE_MESSAGE_MIME_TYPE });\n          var convertedAudioFile = new File([mp3blob], VOICE_MESSAGE_FILE_NAME, {\n            lastModified: (/* @__PURE__ */ new Date()).getTime(),\n            type: VOICE_MESSAGE_MIME_TYPE\n          });\n          (_a5 = eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingEnded) === null || _a5 === void 0 ? void 0 : _a5.call(eventHandler, convertedAudioFile);\n          logger.info(\"VoiceRecorder: Succeeded converting audio file.\", convertedAudioFile);\n        });\n        var tracks = stream.getAudioTracks();\n        tracks.forEach(function(track) {\n          return track.stop();\n        });\n        setIsRecordable(false);\n      };\n      mediaRecorder2.onstart = (_a4 = eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingStarted) !== null && _a4 !== void 0 ? _a4 : noop$4;\n      mediaRecorder2 === null || mediaRecorder2 === void 0 ? void 0 : mediaRecorder2.start();\n      setMediaRecorder(mediaRecorder2);\n    }).catch(function(err) {\n      logger.error(\"VoiceRecorder: Failed getting media stream.\", err);\n      setMediaRecorder(null);\n    });\n  }, [mediaRecorder, webAudioUtils]);\n  var stop = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    mediaRecorder === null || mediaRecorder === void 0 ? void 0 : mediaRecorder.stop();\n    setMediaRecorder(null);\n    setIsRecordable(false);\n    logger.info(\"VoiceRecorder: Stop recording.\");\n  }, [mediaRecorder]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Context.Provider,\n    { value: { start, stop, isRecordable } },\n    children,\n    permissionWarning && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Modal,\n      { hideFooter: true, onClose: function() {\n        return setPermissionWarning(false);\n      } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, stringSet2.VOICE_RECORDING_PERMISSION_DENIED)\n    )\n  );\n};\nvar useVoiceRecorderContext = function() {\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(Context);\n};\nvar useVoicePlayer = function(_a2) {\n  var _b2;\n  var _c = _a2.key, key = _c === void 0 ? \"\" : _c, _d = _a2.channelUrl, channelUrl = _d === void 0 ? \"\" : _d, audioFile = _a2.audioFile, _e2 = _a2.audioFileUrl, audioFileUrl = _e2 === void 0 ? \"\" : _e2, _f = _a2.audioFileMimeType, audioFileMimeType = _f === void 0 ? VOICE_MESSAGE_MIME_TYPE : _f;\n  var groupKey = generateGroupKey(channelUrl, key);\n  var _g2 = useVoicePlayerContext(), play = _g2.play, pause = _g2.pause, stop = _g2.stop, voicePlayerStore = _g2.voicePlayerStore;\n  var isRecordable = useVoiceRecorderContext().isRecordable;\n  var currentAudioUnit = ((_b2 = voicePlayerStore === null || voicePlayerStore === void 0 ? void 0 : voicePlayerStore.audioStorage) === null || _b2 === void 0 ? void 0 : _b2[groupKey]) || AudioUnitDefaultValue();\n  var playVoicePlayer = function() {\n    if (!isRecordable) {\n      play === null || play === void 0 ? void 0 : play({\n        groupKey,\n        audioFile,\n        audioFileUrl,\n        audioFileMimeType\n      });\n    }\n  };\n  var pauseVoicePlayer = function() {\n    pause === null || pause === void 0 ? void 0 : pause(groupKey);\n  };\n  var stopVoicePlayer = function(text2) {\n    if (text2 === void 0) {\n      text2 = \"\";\n    }\n    stop === null || stop === void 0 ? void 0 : stop(text2);\n  };\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    return function() {\n      var _a3;\n      if (audioFile || audioFileUrl) {\n        var voiceAudioPlayerElement = document.getElementById(VOICE_PLAYER_AUDIO_ID);\n        (_a3 = voiceAudioPlayerElement === null || voiceAudioPlayerElement === void 0 ? void 0 : voiceAudioPlayerElement.pause) === null || _a3 === void 0 ? void 0 : _a3.call(voiceAudioPlayerElement);\n      }\n    };\n  }, []);\n  return {\n    play: playVoicePlayer,\n    pause: pauseVoicePlayer,\n    stop: stopVoicePlayer,\n    /**\n     * The reason why we multiply this by *1000 is,\n     * The unit of playbackTime and duration should be millisecond\n     */\n    playbackTime: ((currentAudioUnit === null || currentAudioUnit === void 0 ? void 0 : currentAudioUnit.playbackTime) || 0) * 1e3,\n    duration: ((currentAudioUnit === null || currentAudioUnit === void 0 ? void 0 : currentAudioUnit.duration) || 0) * 1e3,\n    playingStatus: currentAudioUnit.playingStatus\n  };\n};\nvar PlaybackTime = function(_a2) {\n  var className = _a2.className, _b2 = _a2.time, time = _b2 === void 0 ? 0 : _b2, _c = _a2.labelType, labelType = _c === void 0 ? LabelTypography.CAPTION_2 : _c, _d = _a2.labelColor, labelColor = _d === void 0 ? LabelColors.ONCONTENT_1 : _d;\n  var naturalTime = time < 0 ? 0 : time;\n  var hour = Math.floor(naturalTime / 36e5);\n  var min = Math.floor(naturalTime % 36e5 / 6e4);\n  var sec = Math.floor(naturalTime % 36e5 % 6e4 / 1e3);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-ui-play-time \".concat(className) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: labelType, color: labelColor }, \"\".concat(hour ? hour + \":\" : \"\").concat(min < 10 ? \"0\" : \"\").concat(min ? min : \"0\", \":\").concat(sec < 10 ? \"0\" : \"\").concat(sec))\n  );\n};\nvar VoiceMessageItemBody = function(_a2) {\n  var _b2;\n  var className = _a2.className, message = _a2.message, channelUrl = _a2.channelUrl, _c = _a2.isByMe, isByMe = _c === void 0 ? false : _c, _d = _a2.isReactionEnabled, isReactionEnabled = _d === void 0 ? false : _d;\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), usingReaction = _e2[0], setUsingReaction = _e2[1];\n  var _f = useVoicePlayer({\n    channelUrl,\n    key: \"\".concat(message === null || message === void 0 ? void 0 : message.messageId),\n    audioFileUrl: message === null || message === void 0 ? void 0 : message.url,\n    audioFileMimeType: message === null || message === void 0 ? void 0 : message.type\n  }), play = _f.play, pause = _f.pause, _g2 = _f.playbackTime, playbackTime = _g2 === void 0 ? 0 : _g2, duration = _f.duration, _h = _f.playingStatus, playingStatus = _h === void 0 ? VOICE_PLAYER_STATUS.IDLE : _h;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3;\n    if (isReactionEnabled && ((_a3 = message === null || message === void 0 ? void 0 : message.reactions) === null || _a3 === void 0 ? void 0 : _a3.length) > 0) {\n      setUsingReaction(true);\n    } else {\n      setUsingReaction(false);\n    }\n  }, [isReactionEnabled, (_b2 = message === null || message === void 0 ? void 0 : message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length]);\n  var progressBarMaxSize = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3;\n    var DEFAULT_MAX_SIZE = 1;\n    if (message === null || message === void 0 ? void 0 : message.metaArrays) {\n      var duration_1 = (_a3 = message === null || message === void 0 ? void 0 : message.metaArrays.find(function(metaArray) {\n        return metaArray.key === \"KEY_VOICE_MESSAGE_DURATION\";\n      })) === null || _a3 === void 0 ? void 0 : _a3.value[0];\n      return duration_1 ? parseInt(duration_1) : DEFAULT_MAX_SIZE;\n    }\n    return DEFAULT_MAX_SIZE;\n  }, [message === null || message === void 0 ? void 0 : message.metaArrays]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-voice-message-item-body\", className, usingReaction && \"is-reactions-contained\") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProgressBar, { className: \"sendbird-voice-message-item-body__progress-bar\", maxSize: duration || progressBarMaxSize, currentSize: playbackTime, colorType: isByMe ? ProgressBarColorTypes.PRIMARY : ProgressBarColorTypes.GRAY }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-voice-message-item-body__status-button\" },\n      (playingStatus === VOICE_PLAYER_STATUS.IDLE || playingStatus === VOICE_PLAYER_STATUS.PAUSED) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-voice-message-item-body__status-button__button\", onClick: play },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"18px\", height: \"18px\", type: IconTypes.PLAY, fillColor: IconColors.PRIMARY })\n      ),\n      playingStatus === VOICE_PLAYER_STATUS.PREPARING && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        Loader,\n        { width: \"22.2px\", height: \"22.2px\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"22.2px\", height: \"22.2px\", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY_2 })\n      ),\n      playingStatus === VOICE_PLAYER_STATUS.PLAYING && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-voice-message-item-body__status-button__button\", onClick: function() {\n          pause();\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-voice-message-item-body__status-button__button__pause\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-voice-message-item-body__status-button__button__pause__inner\" }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-voice-message-item-body__status-button__button__pause__inner\" })\n        )\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaybackTime, { className: \"sendbird-voice-message-item-body__playback-time\", time: progressBarMaxSize - playbackTime, labelType: LabelTypography.BODY_1, labelColor: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 })\n  );\n};\nfunction ThumbnailMessageItemBody(_a2) {\n  var _b2, _c;\n  var _d = _a2.className, className = _d === void 0 ? \"\" : _d, message = _a2.message, _e2 = _a2.isByMe, isByMe = _e2 === void 0 ? false : _e2, _f = _a2.mouseHover, mouseHover = _f === void 0 ? false : _f, _g2 = _a2.isReactionEnabled, isReactionEnabled = _g2 === void 0 ? false : _g2, _h = _a2.showFileViewer, showFileViewer = _h === void 0 ? noop$4 : _h, _j = _a2.style, style = _j === void 0 ? {} : _j;\n  var thumbnailUrl = getMessageFirstFileThumbnailUrl(message);\n  var _k = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), imageRendered = _k[0], setImageRendered = _k[1];\n  var onClickHandler = useLongPress({\n    onLongPress: noop$4,\n    onClick: function() {\n      if (isSentMessage(message)) {\n        showFileViewer === null || showFileViewer === void 0 ? void 0 : showFileViewer(true);\n      }\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    __assign({ className: getClassName([\n      className,\n      \"sendbird-thumbnail-message-item-body\",\n      isByMe ? \"outgoing\" : \"incoming\",\n      mouseHover ? \"mouse-hover\" : \"\",\n      isReactionEnabled && ((_c = (_b2 = message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length) !== null && _c !== void 0 ? _c : 0) > 0 ? \"reactions\" : \"\"\n    ]) }, onClickHandler),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: \"sendbird-thumbnail-message-item-body__thumbnail\", url: thumbnailUrl || getMessageFirstFileUrl(message), alt: getMessageFirstFileType(message), width: (style === null || style === void 0 ? void 0 : style.width) || \"360px\", height: (style === null || style === void 0 ? void 0 : style.height) || \"270px\", onLoad: function() {\n      setImageRendered(true);\n    }, placeHolder: function(_a3) {\n      var style2 = _a3.style;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-thumbnail-message-item-body__placeholder\", style: style2 });\n    } }),\n    isVideoMessage(message) && !thumbnailUrl && !imageRendered && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"video\",\n      { className: \"sendbird-thumbnail-message-item-body__video\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"source\", { src: getMessageFirstFileUrl(message), type: getMessageFirstFileType(message) })\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-thumbnail-message-item-body__image-cover\" }),\n    (isVideoMessage(message) || isGifMessage(message)) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-thumbnail-message-item-body__icon-wrapper\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-thumbnail-message-item-body__icon-wrapper__icon\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.GIF, fillColor: IconColors.THUMBNAIL_ICON, width: \"34px\", height: \"34px\" })\n      )\n    )\n  );\n}\nfunction UnknownMessageItemBody(_a2) {\n  var _b2;\n  var className = _a2.className, message = _a2.message, _c = _a2.isByMe, isByMe = _c === void 0 ? false : _c, _d = _a2.mouseHover, mouseHover = _d === void 0 ? false : _d, _e2 = _a2.isReactionEnabled, isReactionEnabled = _e2 === void 0 ? false : _e2;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      className !== null && className !== void 0 ? className : \"\",\n      \"sendbird-unknown-message-item-body\",\n      isByMe ? \"outgoing\" : \"incoming\",\n      mouseHover ? \"mouse-hover\" : \"\",\n      isReactionEnabled && ((_b2 = message === null || message === void 0 ? void 0 : message.reactions) === null || _b2 === void 0 ? void 0 : _b2.length) > 0 ? \"reactions\" : \"\"\n    ]) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-unknown-message-item-body__header\", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, stringSet2.UNKNOWN__UNKNOWN_MESSAGE_TYPE),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-unknown-message-item-body__description\", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2 }, stringSet2.UNKNOWN__CANNOT_READ_MESSAGE)\n  );\n}\nvar ComponentType;\n(function(ComponentType2) {\n  ComponentType2[\"Box\"] = \"box\";\n  ComponentType2[\"Text\"] = \"text\";\n  ComponentType2[\"Image\"] = \"image\";\n  ComponentType2[\"TextButton\"] = \"textButton\";\n  ComponentType2[\"ImageButton\"] = \"imageButton\";\n  ComponentType2[\"Carousel\"] = \"carouselView\";\n})(ComponentType || (ComponentType = {}));\nconst outSingle$1 = (key, obj) => {\n  if (typeof obj[key] !== \"string\")\n    return {};\n  return { [key]: argbToRgba(obj[key]) };\n};\nfunction argbToRgba(string2) {\n  if (!string2.startsWith(\"#\")) {\n    return string2;\n  }\n  if (string2.length === 9) {\n    return `#${string2.slice(3)}${string2[1]}${string2[2]}`;\n  }\n  if (string2.length === 5) {\n    return `#${string2.slice(2)}${string2[1]}`;\n  }\n  return string2;\n}\nconst outViewStyle$1 = (viewStyle) => {\n  if (!viewStyle)\n    return {};\n  return {\n    viewStyle: Object.assign(Object.assign(Object.assign({}, viewStyle), outSingle$1(\"backgroundColor\", viewStyle)), outSingle$1(\"borderColor\", viewStyle))\n  };\n};\nconst outTextStyle$1 = (textStyle) => {\n  if (!textStyle)\n    return {};\n  return {\n    textStyle: Object.assign(Object.assign({}, textStyle), outSingle$1(\"color\", textStyle))\n  };\n};\nconst outImageStyle = (imageStyle) => {\n  if (!imageStyle)\n    return {};\n  return {\n    imageStyle: Object.assign(Object.assign({}, imageStyle), outSingle$1(\"tintColor\", imageStyle))\n  };\n};\nconst colorTransform = {\n  run(prop) {\n    if (prop.type === ComponentType.Text || prop.type === ComponentType.TextButton) {\n      return Object.assign(Object.assign(Object.assign({}, prop), outViewStyle$1(prop.viewStyle)), outTextStyle$1(prop.textStyle));\n    }\n    if (prop.type === ComponentType.ImageButton || prop.type === ComponentType.Image) {\n      return Object.assign(Object.assign(Object.assign({}, prop), outViewStyle$1(prop.viewStyle)), outImageStyle(prop.imageStyle));\n    }\n    return Object.assign(Object.assign({}, prop), outViewStyle$1(prop.viewStyle));\n  }\n};\nconst isNumber = (val) => {\n  if (typeof val === \"string\") {\n    return !Number.isNaN(Number(val));\n  }\n  return typeof val === \"number\" && !Number.isNaN(val);\n};\nconst outSingle = (key, obj) => {\n  if (obj[key] === void 0 || obj[key] === null)\n    return {};\n  return isNumber(obj[key]) ? { [key]: Number(obj[key]) } : {};\n};\nconst outSpacing = (key, spacing) => {\n  if (!spacing)\n    return {};\n  return {\n    [key]: {\n      left: isNumber(spacing.left) ? Number(spacing.left) : spacing.left,\n      right: isNumber(spacing.right) ? Number(spacing.right) : spacing.right,\n      top: isNumber(spacing.top) ? Number(spacing.top) : spacing.top,\n      bottom: isNumber(spacing.bottom) ? Number(spacing.bottom) : spacing.bottom\n    }\n  };\n};\nconst outSize = (key, size) => {\n  if (!size)\n    return {};\n  return {\n    [key]: {\n      type: size.type,\n      value: isNumber(size.value) ? Number(size.value) : size.value\n    }\n  };\n};\nconst outMetadata = (metaData) => {\n  if (!metaData)\n    return {};\n  return {\n    metaData: {\n      pixelWidth: isNumber(metaData.pixelWidth) ? Number(metaData.pixelWidth) : metaData.pixelWidth,\n      pixelHeight: isNumber(metaData.pixelHeight) ? Number(metaData.pixelHeight) : metaData.pixelHeight\n    }\n  };\n};\nconst outViewStyle = (viewStyle) => {\n  if (!viewStyle)\n    return {};\n  return {\n    viewStyle: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, viewStyle), outSingle(\"borderWidth\", viewStyle)), outSingle(\"radius\", viewStyle)), outSpacing(\"margin\", viewStyle.margin)), outSpacing(\"padding\", viewStyle.padding))\n  };\n};\nconst outTextStyle = (textStyle) => {\n  if (!textStyle)\n    return {};\n  return {\n    textStyle: Object.assign(Object.assign(Object.assign({}, textStyle), outSingle(\"size\", textStyle)), outSingle(\"weight\", textStyle))\n  };\n};\nconst outCarouselStyle = (carouselstyle) => {\n  if (!carouselstyle)\n    return {};\n  return {\n    carouselStyle: Object.assign(Object.assign({}, carouselstyle), outSingle(\"spacing\", carouselstyle))\n  };\n};\nconst outViewProps = (view) => {\n  return Object.assign(Object.assign(Object.assign({}, outSize(\"width\", view.width)), outSize(\"height\", view.height)), outViewStyle(view.viewStyle));\n};\nconst outTextProps = (text2) => {\n  return Object.assign(Object.assign(Object.assign({}, outViewProps(text2)), outTextStyle(text2.textStyle)), outSingle(\"maxTextLines\", text2));\n};\nconst outImageProps = (image2) => {\n  return Object.assign(Object.assign({}, outViewProps(image2)), outMetadata(image2.metaData));\n};\nconst outCarouselProps = (carousel) => {\n  return Object.assign(Object.assign(Object.assign({}, outViewProps(carousel)), outCarouselStyle(carousel.carouselStyle)), {\n    // Convert only top-level items to find has fill width values.\n    items: carousel.items.map((item) => Object.assign(Object.assign({}, item), { body: Object.assign(Object.assign({}, item.body), { items: item.body.items.map((it2) => numberTransform.run(it2)) }) }))\n  });\n};\nconst numberTransform = {\n  run(prop) {\n    if (prop.type === ComponentType.Text || prop.type === ComponentType.TextButton) {\n      return Object.assign(Object.assign({}, prop), outTextProps(prop));\n    }\n    if (prop.type === ComponentType.ImageButton || prop.type === ComponentType.Image) {\n      return Object.assign(Object.assign({}, prop), outImageProps(prop));\n    }\n    if (prop.type === ComponentType.Carousel) {\n      return Object.assign(Object.assign({}, prop), outCarouselProps(prop));\n    }\n    return Object.assign(Object.assign({}, prop), outViewProps(prop));\n  }\n};\nconst MAPPER = () => void 0;\nconst createParser = (params) => {\n  var _a2;\n  const defaultMapper = (params === null || params === void 0 ? void 0 : params.defaultMapper) || MAPPER;\n  const mapper = {\n    defaultMapper,\n    mapBoxProps: (params === null || params === void 0 ? void 0 : params.mapBoxProps) || defaultMapper,\n    mapTextProps: (params === null || params === void 0 ? void 0 : params.mapTextProps) || defaultMapper,\n    mapImageProps: (params === null || params === void 0 ? void 0 : params.mapImageProps) || defaultMapper,\n    mapTextButtonProps: (params === null || params === void 0 ? void 0 : params.mapTextButtonProps) || defaultMapper,\n    mapImageButtonProps: (params === null || params === void 0 ? void 0 : params.mapImageButtonProps) || defaultMapper,\n    mapCarouselProps: (params === null || params === void 0 ? void 0 : params.mapCarouselProps) || defaultMapper\n  };\n  const transforms = [colorTransform, numberTransform, ...(_a2 = params === null || params === void 0 ? void 0 : params.transforms) !== null && _a2 !== void 0 ? _a2 : []];\n  const transformDirty = /* @__PURE__ */ new Set();\n  return {\n    setTransforms(newTransforms) {\n      transforms.length = 0;\n      transforms.push(...newTransforms);\n      transformDirty.clear();\n    },\n    addTransforms(newTransforms) {\n      transforms.push(...newTransforms);\n    },\n    parse(rawItem, options) {\n      const item = transforms.reduce((it2, transform) => transform.run(it2), rawItem);\n      switch (item.type) {\n        case ComponentType.Box: {\n          return { transformed: item, properties: mapper.mapBoxProps(item, options) };\n        }\n        case ComponentType.Text: {\n          return { transformed: item, properties: mapper.mapTextProps(item, options) };\n        }\n        case ComponentType.Image: {\n          return { transformed: item, properties: mapper.mapImageProps(item, options) };\n        }\n        case ComponentType.TextButton: {\n          return { transformed: item, properties: mapper.mapTextButtonProps(item, options) };\n        }\n        case ComponentType.ImageButton: {\n          return { transformed: item, properties: mapper.mapImageButtonProps(item, options) };\n        }\n        case ComponentType.Carousel: {\n          return { transformed: item, properties: mapper.mapCarouselProps(item, options) };\n        }\n        default:\n          return { transformed: item, properties: void 0 };\n      }\n    }\n  };\n};\nconst FRAGMENT = ({ children }) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, children);\nfunction createRenderer(params) {\n  var _a2, _b2, _c, _d, _e2, _f;\n  return {\n    box: ((_a2 = params === null || params === void 0 ? void 0 : params.views) === null || _a2 === void 0 ? void 0 : _a2.box) || FRAGMENT,\n    text: ((_b2 = params === null || params === void 0 ? void 0 : params.views) === null || _b2 === void 0 ? void 0 : _b2.text) || FRAGMENT,\n    image: ((_c = params === null || params === void 0 ? void 0 : params.views) === null || _c === void 0 ? void 0 : _c.image) || FRAGMENT,\n    imageButton: ((_d = params === null || params === void 0 ? void 0 : params.views) === null || _d === void 0 ? void 0 : _d.imageButton) || FRAGMENT,\n    textButton: ((_e2 = params === null || params === void 0 ? void 0 : params.views) === null || _e2 === void 0 ? void 0 : _e2.textButton) || FRAGMENT,\n    carouselView: ((_f = params === null || params === void 0 ? void 0 : params.views) === null || _f === void 0 ? void 0 : _f.carouselView) || FRAGMENT\n  };\n}\nvar __rest$5 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst SizeContext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])({\n  sizes: {},\n  updateSize: () => {\n  }\n});\nconst SizeContextProvider = ({ children }) => {\n  const [sizes, setSizes] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({});\n  const updateSize = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])((_a2) => {\n    var { id: id2 } = _a2, rest = __rest$5(_a2, [\"id\"]);\n    if (id2) {\n      setSizes((prevSizes) => Object.assign(Object.assign({}, prevSizes), { [id2]: rest }));\n    }\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SizeContext.Provider, { value: { sizes, updateSize } }, children);\n};\nconst useSizeContext = () => Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(SizeContext);\nvar Layout;\n(function(Layout2) {\n  Layout2[\"Row\"] = \"row\";\n  Layout2[\"Column\"] = \"column\";\n})(Layout || (Layout = {}));\nvar AlignValue;\n(function(AlignValue2) {\n  AlignValue2[\"Center\"] = \"center\";\n  AlignValue2[\"Left\"] = \"left\";\n  AlignValue2[\"Right\"] = \"right\";\n  AlignValue2[\"Top\"] = \"top\";\n  AlignValue2[\"Bottom\"] = \"bottom\";\n})(AlignValue || (AlignValue = {}));\nvar FlexSizeSpecValue;\n(function(FlexSizeSpecValue2) {\n  FlexSizeSpecValue2[FlexSizeSpecValue2[\"FillParent\"] = 0] = \"FillParent\";\n  FlexSizeSpecValue2[FlexSizeSpecValue2[\"WrapContent\"] = 1] = \"WrapContent\";\n})(FlexSizeSpecValue || (FlexSizeSpecValue = {}));\nvar FontWeight;\n(function(FontWeight2) {\n  FontWeight2[\"Normal\"] = \"normal\";\n  FontWeight2[\"Bold\"] = \"bold\";\n})(FontWeight || (FontWeight = {}));\nvar MediaContentMode;\n(function(MediaContentMode2) {\n  MediaContentMode2[\"AspectFit\"] = \"aspectFit\";\n  MediaContentMode2[\"AspectFill\"] = \"aspectFill\";\n  MediaContentMode2[\"ScalesToFill\"] = \"scalesToFill\";\n})(MediaContentMode || (MediaContentMode = {}));\nconst SUPPORTED_TEMPLATE_VERSIONS = [\n  1,\n  2\n  // Composite templates: Carousel\n];\nconst alignInFlex = (align) => {\n  switch (align) {\n    case AlignValue.Right:\n    case AlignValue.Bottom:\n      return \"flex-end\";\n    case AlignValue.Center:\n      return \"center\";\n    case AlignValue.Left:\n    case AlignValue.Top:\n    default:\n      return \"flex-start\";\n  }\n};\nconst isTemplateVersionSupported = (templateVersion) => {\n  if (!templateVersion)\n    return true;\n  return SUPPORTED_TEMPLATE_VERSIONS.includes(Number(templateVersion));\n};\nconst memoize = (fn2) => {\n  const cache = /* @__PURE__ */ new Map();\n  const cached = function(val) {\n    return cache.has(val) ? cache.get(val) : cache.set(val, fn2.call(this, val)) && cache.get(val);\n  };\n  cached.cache = cache;\n  return cached;\n};\nconst setTemplateItemId = memoize((data) => {\n  const addIdRecursively = (item, id2) => {\n    if (\"items\" in item && (item === null || item === void 0 ? void 0 : item.items) != null) {\n      item.items.forEach((subItem, subIdx) => {\n        const subId = `${id2}-${subIdx}`;\n        subItem.id = subId;\n        addIdRecursively(subItem, subId);\n      });\n    }\n  };\n  data.forEach((item, idx) => {\n    const id2 = `${idx}`;\n    item.id = id2;\n    addIdRecursively(item, id2);\n  });\n  return data;\n});\nconst defaultProperties = {\n  rootLayout: Layout.Column,\n  view: {\n    size: {\n      width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n      height: { type: \"flex\", value: FlexSizeSpecValue.WrapContent }\n    }\n  },\n  box: {\n    layout: Layout.Row,\n    align: { vertical: AlignValue.Top, horizontal: AlignValue.Left }\n  },\n  textButton: {\n    maxTextLines: 1\n  },\n  carousel: {\n    style: {\n      spacing: 10,\n      maxChildWidth: 240\n    }\n  }\n};\nconst createMessageTemplate = (opts) => {\n  const Container = opts.Container || react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment;\n  const UnknownMessage = opts.UnknownMessage || (() => null);\n  const parser2 = opts.parser || createParser();\n  const renderer2 = opts.renderer || createRenderer();\n  const MessageTemplateBase = ({ templateItems, templateVersion, parentLayout = defaultProperties.box.layout, depth = 0 }) => {\n    if (!isTemplateVersionSupported(templateVersion)) {\n      throw new Error(`Cannot parse template item due to unsupported template version: ${templateVersion}, ${SUPPORTED_TEMPLATE_VERSIONS}`);\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, templateItems.map((rawItem, index2, siblings) => {\n      const result = parser2.parse(rawItem, { parentLayout, depth, elemIdx: index2, siblings });\n      const item = result.transformed;\n      const rendererProps = {\n        key: index2,\n        siblings,\n        parentLayout,\n        parsedProperties: result.properties\n      };\n      switch (item.type) {\n        case ComponentType.Carousel: {\n          if (!Array.isArray(item.items) || item.items.length === 0) {\n            throw new Error(\"Cannot parse template item as Carousel if carousel has no items.\");\n          }\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(renderer2.carouselView, Object.assign({}, item, rendererProps), item.items.map((template, index3) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageTemplateBase, { key: index3, templateItems: template.body.items || [], depth: depth + 1, templateVersion: template.version })));\n        }\n        case ComponentType.Box: {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            renderer2.box,\n            Object.assign({}, item, rendererProps),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageTemplateBase, { templateItems: item.items || [], parentLayout: item.layout, depth: depth + 1, templateVersion })\n          );\n        }\n        case ComponentType.Text: {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(renderer2.text, Object.assign({}, item, rendererProps));\n        }\n        case ComponentType.Image: {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(renderer2.image, Object.assign({}, item, rendererProps));\n        }\n        case ComponentType.TextButton: {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(renderer2.textButton, Object.assign({}, item, rendererProps));\n        }\n        case ComponentType.ImageButton: {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(renderer2.imageButton, Object.assign({}, item, rendererProps));\n        }\n        default: {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UnknownMessage, { item });\n        }\n      }\n    }));\n  };\n  return {\n    MessageTemplate: ({ templateVersion, templateItems, parentLayout = defaultProperties.rootLayout }) => {\n      const items = setTemplateItemId(templateItems);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        SizeContextProvider,\n        null,\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          Container,\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageTemplateBase, { isRoot: true, parentLayout, templateItems: items, templateVersion })\n        )\n      );\n    },\n    MessageTemplateBase\n  };\n};\nvar ActionType;\n(function(ActionType2) {\n  ActionType2[\"Web\"] = \"web\";\n  ActionType2[\"Custom\"] = \"custom\";\n  ActionType2[\"UIKit\"] = \"uikit\";\n})(ActionType || (ActionType = {}));\n({\n  body: {\n    items: [\n      {\n        type: ComponentType.Image,\n        action: { type: ActionType.Web, data: \"https://docs.sendbird.com\" },\n        height: { type: \"fixed\", value: 236 },\n        viewStyle: {\n          padding: {\n            left: 4,\n            right: 4,\n            top: 4,\n            bottom: 4\n          }\n        },\n        imageUrl: \"https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg\",\n        imageStyle: { contentMode: MediaContentMode.AspectFill }\n      },\n      {\n        type: ComponentType.Box,\n        layout: Layout.Column,\n        width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n        height: { type: \"fixed\", value: 200 },\n        items: [\n          {\n            type: ComponentType.Box,\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            height: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            viewStyle: { backgroundColor: \"#fa6464\" }\n          },\n          {\n            type: ComponentType.Box,\n            layout: Layout.Column,\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            height: { type: \"flex\", value: FlexSizeSpecValue.WrapContent },\n            viewStyle: { backgroundColor: \"#ffaf5c\" },\n            items: [\n              {\n                type: ComponentType.Text,\n                text: \"Message\",\n                align: { horizontal: AlignValue.Center, vertical: AlignValue.Center },\n                width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n                height: { type: \"fixed\", value: 50 }\n              },\n              {\n                type: ComponentType.Image,\n                action: { type: ActionType.Web, data: \"https://docs.sendbird.com\" },\n                width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n                height: { type: \"fixed\", value: 50 },\n                imageUrl: \"https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg\",\n                imageStyle: { contentMode: MediaContentMode.AspectFill }\n              }\n            ]\n          },\n          {\n            type: ComponentType.Box,\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            height: { type: \"fixed\", value: 20 },\n            viewStyle: { backgroundColor: \"#ffe450\" }\n          },\n          {\n            type: ComponentType.Box,\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            height: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            viewStyle: { backgroundColor: \"#329a1b\" }\n          }\n        ]\n      },\n      {\n        type: ComponentType.Box,\n        viewStyle: { padding: { top: 12, bottom: 12, left: 12, right: 12 } },\n        layout: Layout.Column,\n        items: [\n          {\n            type: ComponentType.Box,\n            align: { horizontal: AlignValue.Left, vertical: AlignValue.Center },\n            layout: Layout.Row,\n            viewStyle: {\n              borderWidth: 1,\n              borderColor: \"#72723f\"\n            },\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            height: { type: \"fixed\", value: 150 },\n            items: [\n              {\n                type: ComponentType.Text,\n                width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n                height: { type: \"fixed\", value: 50 },\n                text: \"Sample1 text\",\n                maxTextLines: 1,\n                align: { vertical: AlignValue.Center, horizontal: AlignValue.Left },\n                viewStyle: {\n                  backgroundColor: \"#cc4400\"\n                },\n                textStyle: {\n                  size: 16,\n                  color: \"#f8f8f8\",\n                  weight: FontWeight.Bold\n                }\n              },\n              {\n                type: ComponentType.ImageButton,\n                action: { type: ActionType.UIKit, data: \"uikit://delete\" },\n                width: { type: \"fixed\", value: 20 },\n                height: { type: \"fixed\", value: 20 },\n                imageUrl: \"https://file-ap-1.sendbird.com/5b5379aa73fd460da22ffaf9a61d0d7f.png\",\n                imageStyle: { contentMode: MediaContentMode.AspectFit }\n              }\n            ]\n          },\n          {\n            type: ComponentType.Text,\n            viewStyle: { padding: { top: 6, bottom: 12, left: 0, right: 0 } },\n            text: \"Esse eu esse duis ipsum et dolor eu ut sit amet consectetur cillum velit officia. Ex adipisicing elit quis ea sit. Occaecat in eu aliqua nulla magna id ut excepteur minim.\",\n            maxTextLines: 2,\n            textStyle: { size: 14, color: \"#e10000\" },\n            width: { type: \"fixed\", value: 200 },\n            height: { type: \"fixed\", value: 50 }\n          },\n          {\n            type: ComponentType.TextButton,\n            action: { type: ActionType.Web, data: \"https://www.daum.net\" },\n            text: \"Button 3\",\n            textStyle: { size: 14, color: \"#742ddd\", weight: FontWeight.Bold }\n          }\n        ]\n      }\n    ]\n  }\n});\n({\n  \"body\": {\n    \"items\": [\n      {\n        \"type\": ComponentType.Image,\n        \"action\": { \"type\": ActionType.Web, \"data\": \"https://www.naver.com/\" },\n        \"height\": { \"type\": \"fixed\", \"value\": 136 },\n        \"imageUrl\": \"https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg\",\n        \"imageStyle\": { \"contentMode\": MediaContentMode.AspectFill }\n      },\n      {\n        \"type\": ComponentType.Box,\n        \"viewStyle\": { \"padding\": { \"top\": 12, \"bottom\": 12, \"left\": 12, \"right\": 12 }, backgroundColor: \"#cccccc\" },\n        \"layout\": Layout.Column,\n        width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n        \"items\": [\n          {\n            \"type\": ComponentType.Box,\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            \"layout\": Layout.Row,\n            \"items\": [\n              {\n                \"type\": ComponentType.TextButton,\n                \"action\": { \"type\": ActionType.Web, \"data\": \"https://www.daum.net\" },\n                width: { type: \"fixed\", value: 150 },\n                \"viewStyle\": { \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 0, \"right\": 4 } },\n                \"text\": \"Button 2\",\n                \"textStyle\": { \"size\": 14, \"weight\": FontWeight.Bold }\n              },\n              {\n                \"type\": ComponentType.TextButton,\n                \"action\": { \"type\": ActionType.Web, \"data\": \"https://www.daum.net\" },\n                width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n                \"viewStyle\": { \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 4, \"right\": 0 } },\n                \"text\": \"Button 3\",\n                \"textStyle\": { \"size\": 14, \"weight\": FontWeight.Bold }\n              }\n            ]\n          },\n          {\n            \"type\": ComponentType.Box,\n            width: { type: \"flex\", value: FlexSizeSpecValue.FillParent },\n            \"layout\": Layout.Row,\n            \"items\": [\n              {\n                \"type\": ComponentType.Text,\n                \"text\": \"Sample2 text\",\n                \"width\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n                \"maxTextLines\": 1,\n                \"textStyle\": { \"size\": 16, \"weight\": FontWeight.Bold }\n              },\n              {\n                \"type\": ComponentType.ImageButton,\n                \"action\": { \"type\": ActionType.UIKit, \"data\": \"uikit://delete\" },\n                \"width\": { \"type\": \"fixed\", \"value\": 20 },\n                \"height\": { \"type\": \"fixed\", \"value\": 20 },\n                \"imageUrl\": \"https://file-ap-1.sendbird.com/5b5379aa73fd460da22ffaf9a61d0d7f.png\",\n                \"imageStyle\": { \"contentMode\": MediaContentMode.AspectFit }\n              }\n            ]\n          },\n          {\n            \"type\": ComponentType.Text,\n            \"viewStyle\": { \"padding\": { \"top\": 6, \"bottom\": 12, \"left\": 0, \"right\": 0 } },\n            \"text\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aui\",\n            \"textStyle\": { \"size\": 14 }\n          }\n        ]\n      }\n    ]\n  }\n});\n({\n  \"body\": {\n    \"items\": [\n      {\n        \"type\": ComponentType.Box,\n        \"viewStyle\": { \"backgroundColor\": \"#ffffff\", \"borderWidth\": 1, \"borderColor\": \"#eeeeee\", \"radius\": 16 },\n        \"layout\": Layout.Column,\n        \"items\": [\n          {\n            \"type\": ComponentType.Image,\n            \"height\": { \"type\": \"fixed\", \"value\": 200 },\n            \"imageUrl\": \"https://img.freepik.com/free-vector/cartoon-happy-hours-background_52683-81243.jpg?w=2000&t=st=1666689198~exp=1666689798~hmac=23109d44ba03deee7aee069cbeebfcb48fa27f85e53c1cafc5d5d7345f1a2041\",\n            \"imageStyle\": { \"contentMode\": MediaContentMode.AspectFill }\n          },\n          {\n            \"type\": ComponentType.Box,\n            \"viewStyle\": { \"padding\": { \"top\": 15, \"bottom\": 15, \"left\": 15, \"right\": 15 } },\n            \"layout\": Layout.Column,\n            \"items\": [\n              {\n                \"type\": ComponentType.Text,\n                \"text\": \"Don't miss these deals today\",\n                \"maxTextLines\": 1,\n                \"textStyle\": { \"size\": 20, \"color\": \"#e10000\", \"weight\": FontWeight.Bold }\n              },\n              {\n                \"type\": ComponentType.Text,\n                \"viewStyle\": { \"margin\": { \"top\": 5, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                \"text\": \"Pay with Maya and get cashback!\",\n                \"maxTextLines\": 1,\n                \"textStyle\": { \"size\": 14, \"color\": \"#e10000\" }\n              },\n              {\n                \"type\": ComponentType.Box,\n                \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                \"viewStyle\": { \"margin\": { \"top\": 10, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                \"layout\": Layout.Row,\n                \"items\": [\n                  {\n                    \"type\": ComponentType.Image,\n                    \"width\": { \"type\": \"fixed\", \"value\": 50 },\n                    \"height\": { \"type\": \"fixed\", \"value\": 50 },\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#ffffff\",\n                      \"borderWidth\": 1,\n                      \"borderColor\": \"#eeeeee\",\n                      \"radius\": 25\n                    },\n                    \"imageUrl\": \"https://yt3.ggpht.com/ytc/AMLnZu8Kg89ymE7qt5bsS9vMqi9h2aHiN6m9ID-IgxR6-Q=s900-c-k-c0x00ffffff-no-rj\",\n                    \"imageStyle\": { \"contentMode\": MediaContentMode.AspectFill }\n                  },\n                  {\n                    \"type\": ComponentType.Box,\n                    \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                    \"viewStyle\": { \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 15, \"right\": 0 } },\n                    \"layout\": Layout.Column,\n                    \"items\": [\n                      {\n                        \"type\": ComponentType.Text,\n                        \"text\": \"Meralco\",\n                        \"maxTextLines\": 1,\n                        \"textStyle\": { \"size\": 16, \"color\": \"#e10000\", \"weight\": FontWeight.Bold }\n                      },\n                      {\n                        \"type\": ComponentType.Text,\n                        \"viewStyle\": { \"margin\": { \"top\": 3, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                        \"text\": \"30% cashback, P300 min spend\",\n                        \"maxTextLines\": 1,\n                        \"textStyle\": { \"size\": 12, \"color\": \"#610000\", \"weight\": FontWeight.Bold }\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"type\": ComponentType.Box,\n                \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                \"viewStyle\": { \"margin\": { \"top\": 10, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                \"layout\": Layout.Row,\n                \"items\": [\n                  {\n                    \"type\": ComponentType.Image,\n                    \"width\": { \"type\": \"fixed\", \"value\": 50 },\n                    \"height\": { \"type\": \"fixed\", \"value\": 50 },\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#ffffff\",\n                      \"borderWidth\": 1,\n                      \"borderColor\": \"#eeeeee\",\n                      \"radius\": 25\n                    },\n                    \"imageUrl\": \"https://1000logos.net/wp-content/uploads/2021/12/Globe-Telecom-logo.png\",\n                    \"imageStyle\": { \"contentMode\": MediaContentMode.AspectFill, tintColor: \"#a49a9a\" }\n                  },\n                  {\n                    \"type\": ComponentType.Box,\n                    \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                    \"viewStyle\": { \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 15, \"right\": 0 } },\n                    \"layout\": Layout.Column,\n                    \"items\": [\n                      {\n                        \"type\": ComponentType.Text,\n                        \"text\": \"Globe\",\n                        \"maxTextLines\": 1,\n                        \"textStyle\": { \"size\": 16, \"color\": \"#e10000\", \"weight\": FontWeight.Bold }\n                      },\n                      {\n                        \"type\": ComponentType.Text,\n                        \"viewStyle\": { \"margin\": { \"top\": 3, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                        \"text\": \"30% cashback, P300 min spend\",\n                        \"maxTextLines\": 1,\n                        \"textStyle\": { \"size\": 12, \"color\": \"#610000\", \"weight\": FontWeight.Bold }\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"type\": ComponentType.Box,\n                \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                \"viewStyle\": { \"margin\": { \"top\": 10, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                \"layout\": Layout.Row,\n                \"items\": [\n                  {\n                    \"type\": ComponentType.Image,\n                    \"width\": { \"type\": \"fixed\", \"value\": 50 },\n                    \"height\": { \"type\": \"fixed\", \"value\": 50 },\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#ffffff\",\n                      \"borderWidth\": 1,\n                      \"borderColor\": \"#eeeeee\",\n                      \"radius\": 25\n                    },\n                    \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Cignal.svg/640px-Cignal.svg.png\",\n                    \"imageStyle\": { \"contentMode\": MediaContentMode.AspectFill }\n                  },\n                  {\n                    \"type\": ComponentType.Box,\n                    \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                    \"viewStyle\": { \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 15, \"right\": 0 } },\n                    \"layout\": Layout.Column,\n                    \"items\": [\n                      {\n                        \"type\": ComponentType.Text,\n                        \"text\": \"Cignal\",\n                        \"maxTextLines\": 1,\n                        \"textStyle\": { \"size\": 16, \"color\": \"#e10000\", \"weight\": FontWeight.Bold }\n                      },\n                      {\n                        \"type\": ComponentType.Text,\n                        \"viewStyle\": { \"margin\": { \"top\": 3, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                        \"text\": \"30% cashback, P300 min spend\",\n                        \"maxTextLines\": 1,\n                        \"textStyle\": { \"size\": 12, \"color\": \"#610000\", \"weight\": FontWeight.Bold }\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"type\": ComponentType.Box,\n                \"align\": { \"horizontal\": AlignValue.Left, \"vertical\": AlignValue.Center },\n                \"viewStyle\": { \"margin\": { \"top\": 10, \"bottom\": 0, \"left\": 0, \"right\": 0 } },\n                \"layout\": Layout.Row,\n                \"items\": [\n                  {\n                    \"type\": ComponentType.TextButton,\n                    \"action\": { \"type\": ActionType.Web, \"data\": \"https://www.daum.net\" },\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#e0e0e0\",\n                      \"radius\": 16,\n                      \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 0, \"right\": 4 },\n                      \"padding\": { \"top\": 12, \"bottom\": 12, \"left\": 12, \"right\": 12 }\n                    },\n                    \"text\": \"Learn more\",\n                    \"textStyle\": { \"size\": 15, \"color\": \"#e10000\", \"weight\": FontWeight.Bold }\n                  },\n                  {\n                    \"type\": ComponentType.TextButton,\n                    \"action\": { \"type\": ActionType.Web, \"data\": \"https://www.daum.net\" },\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#e10000\",\n                      \"radius\": 16,\n                      \"margin\": { \"top\": 0, \"bottom\": 0, \"left\": 4, \"right\": 0 },\n                      \"padding\": { \"top\": 12, \"bottom\": 12, \"left\": 12, \"right\": 12 }\n                    },\n                    \"text\": \"Pay now\",\n                    \"textStyle\": { \"size\": 15, \"color\": \"#ffffff\", \"weight\": FontWeight.Bold }\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n});\n({\n  \"body\": {\n    \"items\": [\n      {\n        \"type\": ComponentType.Box,\n        \"layout\": Layout.Column,\n        \"items\": [\n          {\n            \"type\": ComponentType.Image,\n            \"imageUrl\": \"https://static.sendbird.com/sample/profiles/profile_40_512px.png\",\n            \"metaData\": {\n              \"pixelWidth\": 512,\n              \"pixelHeight\": 512\n            },\n            \"imageStyle\": {\n              \"tintColor\": \"#44ff1188\"\n            },\n            viewStyle: {\n              \"padding\": {\n                \"top\": 12,\n                \"right\": 12,\n                \"bottom\": 12,\n                \"left\": 12\n              }\n            }\n          },\n          {\n            \"type\": ComponentType.Box,\n            \"viewStyle\": {\n              \"padding\": {\n                \"top\": 12,\n                \"right\": 12,\n                \"bottom\": 12,\n                \"left\": 12\n              }\n            },\n            \"layout\": Layout.Column,\n            \"items\": [\n              {\n                \"type\": ComponentType.Box,\n                \"layout\": Layout.Row,\n                \"items\": [\n                  {\n                    \"type\": ComponentType.Box,\n                    \"layout\": Layout.Column,\n                    \"items\": [\n                      {\n                        \"type\": ComponentType.Text,\n                        \"text\": \"hi\",\n                        \"maxTextLines\": 3,\n                        \"viewStyle\": {\n                          \"padding\": {\n                            \"top\": 0,\n                            \"bottom\": 6,\n                            \"left\": 0,\n                            \"right\": 0\n                          }\n                        },\n                        \"textStyle\": {\n                          \"size\": 16,\n                          \"weight\": FontWeight.Bold\n                        }\n                      },\n                      {\n                        \"type\": ComponentType.Text,\n                        \"text\": \"bye\",\n                        \"maxTextLines\": 10,\n                        \"textStyle\": {\n                          \"size\": 14\n                        }\n                      }\n                    ]\n                  },\n                  {\n                    \"type\": ComponentType.ImageButton,\n                    \"action\": {\n                      \"type\": ActionType.UIKit,\n                      \"data\": \"sendbirduikit://delete\"\n                    },\n                    \"width\": {\n                      \"type\": \"fixed\",\n                      \"value\": 20\n                    },\n                    \"height\": {\n                      \"type\": \"fixed\",\n                      \"value\": 20\n                    },\n                    \"metaData\": {\n                      \"pixelWidth\": 60,\n                      \"pixelHeight\": 60\n                    },\n                    \"imageUrl\": \"https://dxstmhyqfqr1o.cloudfront.net/sendbird-message-builder/icon-more.png\",\n                    \"imageStyle\": {\n                      \"tintColor\": \"#ff8d5a\"\n                    }\n                  }\n                ]\n              },\n              {\n                \"type\": ComponentType.Box,\n                \"layout\": Layout.Column,\n                \"items\": [\n                  {\n                    \"type\": ComponentType.Box,\n                    \"viewStyle\": {\n                      \"margin\": {\n                        \"top\": 16,\n                        \"bottom\": 0,\n                        \"left\": 0,\n                        \"right\": 0\n                      }\n                    },\n                    \"align\": {\n                      \"horizontal\": AlignValue.Left,\n                      \"vertical\": AlignValue.Center\n                    },\n                    \"layout\": Layout.Row,\n                    \"items\": [\n                      {\n                        \"type\": ComponentType.Image,\n                        \"imageUrl\": \"https://ca.slack-edge.com/T0ADCTNEL-ULE240VNV-83fd5776e78e-512\",\n                        \"width\": {\n                          \"type\": \"fixed\",\n                          \"value\": 40\n                        },\n                        \"height\": {\n                          \"type\": \"fixed\",\n                          \"value\": 40\n                        },\n                        \"metaData\": {\n                          \"pixelWidth\": 512,\n                          \"pixelHeight\": 512\n                        },\n                        \"viewStyle\": {\n                          \"backgroundColor\": \"#BDBDBD\",\n                          \"radius\": 20\n                        },\n                        \"imageStyle\": {\n                          \"contentMode\": MediaContentMode.AspectFill\n                        }\n                      },\n                      {\n                        \"type\": ComponentType.Box,\n                        \"viewStyle\": {\n                          \"margin\": {\n                            \"top\": 0,\n                            \"bottom\": 0,\n                            \"left\": 12,\n                            \"right\": 0\n                          }\n                        },\n                        \"layout\": Layout.Column,\n                        \"items\": [\n                          {\n                            \"type\": ComponentType.Text,\n                            \"text\": \"Chongbu\",\n                            \"maxTextLines\": 1,\n                            \"textStyle\": {\n                              \"size\": 16,\n                              \"weight\": FontWeight.Bold\n                            }\n                          },\n                          {\n                            \"type\": ComponentType.Text,\n                            \"viewStyle\": {\n                              \"margin\": {\n                                \"top\": 4,\n                                \"bottom\": 0,\n                                \"left\": 0,\n                                \"right\": 0\n                              }\n                            },\n                            \"text\": \" \",\n                            \"maxTextLines\": 1,\n                            \"textStyle\": {\n                              \"size\": 14\n                            }\n                          }\n                        ]\n                      }\n                    ]\n                  },\n                  {\n                    \"type\": ComponentType.Box,\n                    \"viewStyle\": {\n                      \"margin\": {\n                        \"top\": 16,\n                        \"bottom\": 0,\n                        \"left\": 0,\n                        \"right\": 0\n                      }\n                    },\n                    \"align\": {\n                      \"horizontal\": AlignValue.Left,\n                      \"vertical\": AlignValue.Center\n                    },\n                    \"layout\": Layout.Row,\n                    \"items\": [\n                      {\n                        \"type\": ComponentType.Image,\n                        \"imageUrl\": \"https://ca.slack-edge.com/T0ADCTNEL-U02LA25KY8J-d41a3e8c7554-512\",\n                        \"width\": {\n                          \"type\": \"fixed\",\n                          \"value\": 40\n                        },\n                        \"height\": {\n                          \"type\": \"fixed\",\n                          \"value\": 40\n                        },\n                        \"metaData\": {\n                          \"pixelWidth\": 512,\n                          \"pixelHeight\": 512\n                        },\n                        \"viewStyle\": {\n                          \"backgroundColor\": \"#BDBDBD\",\n                          \"radius\": 20\n                        },\n                        \"imageStyle\": {\n                          \"contentMode\": MediaContentMode.AspectFill\n                        }\n                      },\n                      {\n                        \"type\": ComponentType.Box,\n                        \"viewStyle\": {\n                          \"margin\": {\n                            \"top\": 0,\n                            \"bottom\": 0,\n                            \"left\": 12,\n                            \"right\": 0\n                          }\n                        },\n                        \"layout\": Layout.Column,\n                        \"items\": [\n                          {\n                            \"type\": ComponentType.Text,\n                            \"text\": \"Amanda\",\n                            \"maxTextLines\": 1,\n                            \"textStyle\": {\n                              \"size\": 16,\n                              \"weight\": FontWeight.Bold\n                            }\n                          },\n                          {\n                            \"type\": ComponentType.Text,\n                            \"viewStyle\": {\n                              \"margin\": {\n                                \"top\": 4,\n                                \"bottom\": 0,\n                                \"left\": 0,\n                                \"right\": 0\n                              }\n                            },\n                            \"text\": \"This is title message\",\n                            \"maxTextLines\": 1,\n                            \"textStyle\": {\n                              \"size\": 14\n                            }\n                          }\n                        ]\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n});\n({\n  \"body\": {\n    \"items\": [\n      {\n        \"type\": \"box\",\n        \"layout\": \"column\",\n        height: { type: \"fixed\", value: 600 },\n        \"items\": [\n          {\n            \"type\": \"box\",\n            \"layout\": \"column\",\n            \"viewStyle\": { \"radius\": \"8\", \"padding\": { \"top\": \"12\", \"bottom\": \"12\", \"left\": \"12\", \"right\": \"12\" } },\n            \"items\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"Title text\",\n                \"textStyle\": { \"color\": \"#E0000000\", \"size\": \"16\", \"weight\": \"bold\" },\n                \"maxTextLines\": \"5\",\n                \"viewStyle\": {},\n                \"action\": { \"data\": \"www.naver.com\" }\n              },\n              {\n                \"type\": \"text\",\n                \"viewStyle\": { \"margin\": { \"top\": \"8\", \"right\": \"0\", \"bottom\": \"0\", \"left\": \"0\" } },\n                \"text\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aui\",\n                \"textStyle\": { \"color\": \"#E0000000\", \"size\": \"14\", \"weight\": \"normal\" },\n                \"maxTextLines\": \"5\",\n                \"action\": { \"data\": \"https://www.naver.com\" }\n              },\n              {\n                \"type\": \"box\",\n                \"layout\": \"row\",\n                \"viewStyle\": { \"margin\": { \"top\": \"12\", \"right\": \"0\", \"bottom\": \"0\", \"left\": \"0\" } },\n                \"items\": [\n                  {\n                    \"type\": \"textButton\",\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#E0E0E0\",\n                      \"padding\": { \"top\": \"10\", \"bottom\": \"10\", \"left\": \"20\", \"right\": \"20\" }\n                    },\n                    \"text\": \"Button 1\",\n                    \"textStyle\": { \"color\": \"#742DDD\", \"size\": \"14\", \"weight\": \"bold\" },\n                    \"maxTextLines\": \"5\",\n                    \"action\": { \"data\": \"www.naver.com\" }\n                  },\n                  {\n                    \"type\": \"textButton\",\n                    \"viewStyle\": {\n                      \"backgroundColor\": \"#E0E0E0\",\n                      \"padding\": { \"top\": \"10\", \"bottom\": \"10\", \"left\": \"20\", \"right\": \"20\" },\n                      \"margin\": { \"left\": \"8\", \"right\": \"0\", \"top\": \"0\", \"bottom\": \"0\" }\n                    },\n                    \"text\": \"Button 2\",\n                    \"textStyle\": { \"color\": \"#742DDD\", \"size\": \"14\", \"weight\": \"bold\" },\n                    \"maxTextLines\": \"5\",\n                    \"action\": { \"data\": \"https://www.naver.com\" }\n                  }\n                ]\n              }\n            ],\n            \"action\": { \"data\": \"https://www.naver.com\" }\n          },\n          {\n            \"type\": \"image\",\n            \"viewStyle\": {},\n            \"width\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"height\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"imageStyle\": { \"contentMode\": \"aspectFill\" },\n            \"imageUrl\": \"https://file-preprod.sendbird.com/d03c08bb3f9041a88c1207b6bbf15ab8.png\",\n            \"metaData\": { \"pixelWidth\": \"1062\", \"pixelHeight\": \"1070\" }\n          },\n          {\n            \"type\": \"textButton\",\n            \"viewStyle\": {\n              \"backgroundColor\": \"#E0E0E0\",\n              \"padding\": { \"top\": \"10\", \"bottom\": \"10\", \"left\": \"20\", \"right\": \"20\" }\n            },\n            \"width\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"height\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"text\": \"Button\",\n            \"textStyle\": { \"color\": \"#742DDD\", \"size\": \"16\", \"weight\": \"normal\" },\n            \"maxTextLines\": \"5\",\n            \"action\": { \"data\": \"www.naver.com\" }\n          },\n          {\n            \"type\": \"imageButton\",\n            \"viewStyle\": {},\n            \"width\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"height\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"imageUrl\": \"https://file-preprod.sendbird.com/38fdf5c1056f42b89a44b38155cc4b49.jpg\",\n            \"imageStyle\": { \"contentMode\": \"aspectFill\" },\n            \"metaData\": { \"pixelWidth\": \"1080\", \"pixelHeight\": \"2640\" },\n            \"action\": { \"data\": \"www.naver.com\" }\n          }\n        ],\n        \"viewStyle\": {}\n      }\n    ]\n  }\n});\n({\n  \"body\": {\n    \"items\": [\n      {\n        \"elementId\": \"root\",\n        \"type\": \"box\",\n        \"layout\": \"column\",\n        \"width\": {\n          \"type\": \"flex\",\n          \"value\": FlexSizeSpecValue.FillParent\n        },\n        \"height\": {\n          \"type\": \"flex\",\n          \"value\": FlexSizeSpecValue.WrapContent\n        },\n        \"items\": [\n          {\n            \"type\": \"text\",\n            \"viewStyle\": {\n              \"backgroundColor\": \"#a0c0ffff\",\n              \"margin\": {\n                \"top\": 16,\n                \"bottom\": 16,\n                \"left\": 16,\n                \"right\": 16\n              },\n              \"padding\": {\n                \"top\": 16,\n                \"bottom\": 16,\n                \"left\": 16,\n                \"right\": 16\n              }\n            },\n            \"text\": \"Wrap Wrap Wrap Wrap Wrap Wrap Wrap Wrap Wrap Wrap \",\n            \"textStyle\": {\n              \"size\": 14,\n              \"color\": \"#222121e0\",\n              \"weight\": \"normal\"\n            },\n            \"maxTextLines\": 5,\n            \"width\": {\n              \"type\": \"flex\",\n              \"value\": FlexSizeSpecValue.FillParent\n            },\n            \"height\": {\n              \"type\": \"flex\",\n              \"value\": 1\n            },\n            \"align\": {\n              \"horizontal\": \"left\",\n              \"vertical\": \"top\"\n            },\n            \"elementId\": \"c0e15878-4984-408d-abaa-4b495c2e3872\"\n          },\n          {\n            \"type\": \"imageButton\",\n            \"viewStyle\": {\n              margin: {\n                left: 24,\n                right: 12\n              }\n            },\n            \"width\": { \"type\": \"flex\", \"value\": FlexSizeSpecValue.FillParent },\n            \"height\": { \"type\": \"fixed\", \"value\": 250 },\n            \"imageUrl\": \"https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg\",\n            \"imageStyle\": { \"contentMode\": \"aspectFill\" },\n            \"metaData\": { \"pixelWidth\": \"1080\", \"pixelHeight\": \"2640\" },\n            \"action\": { \"data\": \"www.naver.com\" }\n          }\n        ]\n      }\n    ]\n  }\n});\nconst SWIPE_THRESHOLD = 24;\nfunction useCarousel({ spacing, childrenLength, paddingInlineStart, paddingInlineEnd }) {\n  const paddingStart = paddingInlineStart;\n  const paddingEnd = paddingInlineEnd;\n  const carouselRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const childrenRefs = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(Array.from({ length: childrenLength }, () => react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef()));\n  const isDragging = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(false);\n  const isScrolling = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(false);\n  const animationFrame = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const drag = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])({\n    sx: null,\n    sy: null,\n    offset: 0,\n    translateX: 0,\n    currentIndex: 0\n  });\n  const [childWidths, setChildWidths] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(() => childrenRefs.current.map(() => 0));\n  const itemPositions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => {\n    let currentPosition = paddingStart;\n    return childWidths.map((width, i3) => {\n      const start = currentPosition - (i3 > 0 ? spacing : 0);\n      const end = start - width;\n      currentPosition = end;\n      return { start, end };\n    });\n  }, [childWidths, spacing, paddingStart]);\n  const totalContentWidth = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => {\n    const totalItemWidth = childWidths.reduce((acc, width) => acc + width, 0);\n    const totalSpacing = spacing * (childrenLength - 1);\n    return totalItemWidth + totalSpacing;\n  }, [childWidths, spacing, childrenLength]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(() => {\n    setChildWidths(childrenRefs.current.map((ref) => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = ref.current) === null || _a2 === void 0 ? void 0 : _a2.clientWidth) !== null && _b2 !== void 0 ? _b2 : 0;\n    }));\n  }, [childrenLength]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(() => {\n    if (itemPositions.length > 0) {\n      drag.current.translateX = itemPositions[0].start;\n      animate();\n    }\n  }, [itemPositions]);\n  const dragStart = () => {\n    if (!carouselRef.current)\n      return;\n    isDragging.current = true;\n    carouselRef.current.style.cursor = \"grabbing\";\n    carouselRef.current.style.transition = \"none\";\n    animationFrame.current = requestAnimationFrame(animate);\n  };\n  const dragStop = () => {\n    if (!carouselRef.current)\n      return;\n    isDragging.current = false;\n    carouselRef.current.style.cursor = \"grab\";\n    carouselRef.current.style.transition = \"transform 0.5s ease\";\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n      animationFrame.current = null;\n    }\n  };\n  const dragRelease = () => {\n    const { offset, currentIndex } = drag.current;\n    const thresholdExceeded = Math.abs(offset) >= SWIPE_THRESHOLD;\n    const swipeToNext = offset < 0 && currentIndex < childrenLength - 1;\n    const swipeToPrev = offset > 0 && currentIndex > 0;\n    let newIndex = currentIndex;\n    if (thresholdExceeded && swipeToNext) {\n      newIndex = currentIndex + 1;\n    } else if (thresholdExceeded && swipeToPrev) {\n      newIndex = currentIndex - 1;\n    }\n    function clampTranslateX(translateX) {\n      var _a2, _b2;\n      const containerWidth = (_b2 = (_a2 = carouselRef.current) === null || _a2 === void 0 ? void 0 : _a2.clientWidth) !== null && _b2 !== void 0 ? _b2 : 0;\n      const start = paddingStart;\n      const end = Math.min(0, containerWidth - totalContentWidth) - paddingEnd;\n      return Math.min(start, Math.max(end, translateX));\n    }\n    drag.current.currentIndex = newIndex;\n    drag.current.translateX = clampTranslateX(itemPositions[newIndex].start);\n    drag.current.offset = 0;\n  };\n  const scrollStart = () => {\n    isScrolling.current = true;\n  };\n  const scrollStop = () => {\n    isScrolling.current = false;\n  };\n  const animate = () => {\n    if (carouselRef.current) {\n      carouselRef.current.style.transform = `translateX(${drag.current.translateX + drag.current.offset}px)`;\n    }\n    if (animationFrame.current) {\n      animationFrame.current = requestAnimationFrame(animate);\n    }\n  };\n  const blockScroll = () => {\n    if (carouselRef.current) {\n      carouselRef.current.style.touchAction = \"pan-x\";\n    }\n  };\n  const unblockScroll = () => {\n    if (carouselRef.current) {\n      carouselRef.current.style.touchAction = \"pan-y\";\n    }\n  };\n  const onMouseDown = (event) => {\n    dragStart();\n    scrollStop();\n    drag.current.sx = event.clientX;\n    drag.current.sy = event.clientY;\n    drag.current.offset = 0;\n    animationFrame.current = requestAnimationFrame(animate);\n  };\n  const onMouseMove = (event) => {\n    if (!isDragging.current || drag.current.sx === null)\n      return;\n    drag.current.offset = event.clientX - drag.current.sx;\n  };\n  const onMouseUp = () => {\n    if (!isDragging.current)\n      return;\n    scrollStop();\n    dragRelease();\n    dragStop();\n  };\n  const onMouseLeave = () => {\n    if (!isDragging.current)\n      return;\n    scrollStop();\n    dragRelease();\n    dragStop();\n  };\n  const onTouchStart = (event) => {\n    scrollStop();\n    dragStop();\n    const touch = event.touches[0];\n    drag.current.sx = touch.clientX;\n    drag.current.sy = touch.clientY;\n    drag.current.offset = 0;\n    animationFrame.current = requestAnimationFrame(animate);\n  };\n  const onTouchMove = (event) => {\n    if (drag.current.sx === null || drag.current.sy === null || isScrolling.current)\n      return;\n    const { clientX, clientY } = event.touches[0];\n    const { sx, sy } = drag.current;\n    if (isDragging.current) {\n      drag.current.offset = clientX - sx;\n      return;\n    }\n    const isVerticalScroll = Math.abs(clientY - sy) > Math.abs(clientX - sx);\n    if (isVerticalScroll) {\n      scrollStart();\n    } else {\n      drag.current.offset = clientX - sx;\n      blockScroll();\n      dragStart();\n    }\n  };\n  const onTouchEnd = () => {\n    unblockScroll();\n    scrollStop();\n    dragRelease();\n    dragStop();\n  };\n  return {\n    carouselRef,\n    childrenRefs,\n    handlers: {\n      onMouseDown,\n      onMouseMove,\n      onMouseUp,\n      onMouseLeave,\n      onTouchStart,\n      onTouchMove,\n      onTouchEnd\n    }\n  };\n}\nvar __rest$4 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst Carousel = ({ children, style, spacing = defaultProperties.carousel.style.spacing, maxChildWidth = defaultProperties.carousel.style.maxChildWidth }) => {\n  const _a2 = style !== null && style !== void 0 ? style : {}, { paddingInlineStart = 0, paddingInlineEnd = 0 } = _a2, restStyle = __rest$4(_a2, [\"paddingInlineStart\", \"paddingInlineEnd\"]);\n  const { carouselRef, childrenRefs, handlers: handlers2 } = useCarousel({\n    spacing,\n    childrenLength: children.length,\n    paddingInlineStart: Number(paddingInlineStart),\n    paddingInlineEnd: Number(paddingInlineEnd)\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", Object.assign({}, handlers2, { ref: carouselRef, className: \"sb-message-template__carousel\", style: Object.assign(Object.assign({}, restStyle), { gap: spacing, width: \"100%\", overflow: \"visible\" }) }), children.map((item, index2) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CarouselChild, { ref: childrenRefs.current[index2], key: index2, maxChildWidth }, item)));\n};\nconst CarouselChild = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function CarouselChild2({ maxChildWidth, children }, ref) {\n  const maxWidth = shouldSetMaxChildWidth(children.props, maxChildWidth) ? maxChildWidth : \"fit-content\";\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { ref, style: { maxWidth, width: \"100%\", flexShrink: 0, overflow: \"hidden\", userSelect: \"none\" } }, children);\n});\nfunction shouldSetMaxChildWidth(props, maxChildWidth) {\n  return !!props.templateItems.find((it2) => {\n    var _a2, _b2, _c, _d;\n    const hasFillWidth = ((_a2 = it2.width) === null || _a2 === void 0 ? void 0 : _a2.type) === \"flex\" && ((_b2 = it2.width) === null || _b2 === void 0 ? void 0 : _b2.value) === FlexSizeSpecValue.FillParent;\n    const overMaxChildWidth = ((_c = it2.width) === null || _c === void 0 ? void 0 : _c.type) === \"fixed\" && ((_d = it2.width) === null || _d === void 0 ? void 0 : _d.value) >= maxChildWidth;\n    return hasFillWidth || overMaxChildWidth;\n  });\n}\nfunction isWrappedText(view) {\n  var _a2;\n  return view.type === ComponentType.Text && ((_a2 = view.width) === null || _a2 === void 0 ? void 0 : _a2.value) == FlexSizeSpecValue.WrapContent;\n}\nconst isSizeCompatibleWithOption = ({ size, option }) => {\n  if (option === \"wrap\") {\n    return size.type === \"flex\" && size.value == FlexSizeSpecValue.WrapContent;\n  }\n  if (option === \"fill\") {\n    return size.type === \"flex\" && size.value == FlexSizeSpecValue.FillParent;\n  }\n  return size.type === \"fixed\";\n};\nconst isGif = (url) => {\n  var _a2;\n  if (typeof url !== \"string\")\n    return false;\n  const extension2 = (_a2 = url.split(\".\").pop()) === null || _a2 === void 0 ? void 0 : _a2.toLowerCase();\n  return extension2 === \"gif\";\n};\nvar __rest$3 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst CanvasReactMessageTemplateImage = (props) => {\n  const { imageSize, canvasRef, canvasProps } = useCanvasMessageTemplateImage(props);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"canvas\", Object.assign({}, canvasProps, { ref: canvasRef, width: imageSize === null || imageSize === void 0 ? void 0 : imageSize.width, height: imageSize === null || imageSize === void 0 ? void 0 : imageSize.height, onError: props.onError }));\n};\nconst useCanvasMessageTemplateImage = (_a2) => {\n  var { metaData, tintColor } = _a2, props = __rest$3(_a2, [\"metaData\", \"tintColor\"]);\n  const canvasRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const [fallbackImageSize, setFallbackImageSize] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const imageSize = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => {\n    if ((metaData === null || metaData === void 0 ? void 0 : metaData.pixelHeight) && (metaData === null || metaData === void 0 ? void 0 : metaData.pixelWidth)) {\n      return { width: metaData.pixelWidth, height: metaData.pixelHeight };\n    }\n    return fallbackImageSize;\n  }, [fallbackImageSize, metaData === null || metaData === void 0 ? void 0 : metaData.pixelHeight, metaData === null || metaData === void 0 ? void 0 : metaData.pixelWidth]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (imageSize == null) {\n      console.log(\"Canvas_ReactMessageTemplateImage: no metaData, render fit to container\");\n      if (canvasRef.current) {\n        canvasRef.current.style.width = \"100%\";\n        canvasRef.current.style.height = \"100%\";\n        const containerSize = canvasRef.current.getBoundingClientRect();\n        setFallbackImageSize(containerSize);\n      }\n    }\n  }, [imageSize]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (props.src) {\n      const img = new Image();\n      const onImageLoad = () => {\n        if (canvasRef.current && tintColor && imageSize) {\n          const ctx = canvasRef.current.getContext(\"2d\");\n          if (ctx) {\n            const { width: imageWidth, height: imageHeight } = imageSize;\n            ctx.clearRect(0, 0, imageWidth, imageHeight);\n            ctx.beginPath();\n            ctx.globalCompositeOperation = \"source-over\";\n            ctx.fillStyle = \"#000\";\n            ctx.drawImage(img, 0, 0, imageWidth, imageHeight);\n            ctx.globalCompositeOperation = \"source-atop\";\n            ctx.fillStyle = tintColor;\n            ctx.fillRect(0, 0, imageWidth, imageHeight);\n          }\n        }\n      };\n      const onImageError = (event) => {\n        var _a3;\n        (_a3 = props.onError) === null || _a3 === void 0 ? void 0 : _a3.call(props, event);\n      };\n      img.addEventListener(\"load\", onImageLoad);\n      img.addEventListener(\"error\", onImageError);\n      img.src = props.src;\n      return () => {\n        img.removeEventListener(\"load\", onImageLoad);\n        img.removeEventListener(\"error\", onImageError);\n      };\n    }\n    return;\n  }, [props.src, imageSize, tintColor]);\n  return {\n    canvasRef,\n    canvasProps: props,\n    imageSize\n  };\n};\nconst ImgReactMessageTemplateImage = (props) => {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", Object.assign({}, props, { onError: props.onError, referrerPolicy: \"no-referrer\" }));\n};\nconst PlaceholderReactMessageTemplateImage = (props) => {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: Object.assign(Object.assign({}, props.style), { backgroundColor: \"transparent\" }) });\n};\nvar __rest$2 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst ReactMessageTemplateImage = (_a2) => {\n  var { tintColor, metaData } = _a2, props = __rest$2(_a2, [\"tintColor\", \"metaData\"]);\n  const { hasError, onError: onError2 } = useImageLoadError(props.src);\n  if (props.onError)\n    console.warn(\"`onError` is intercepted and not executed in the ReactMessageTemplateImage.\");\n  if (hasError) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceholderReactMessageTemplateImage, Object.assign({}, props));\n  } else if (tintColor && !isGif(props.src)) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CanvasReactMessageTemplateImage, Object.assign({}, props, { onError: onError2, tintColor, metaData }));\n  } else {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImgReactMessageTemplateImage, Object.assign({}, props, { onError: onError2 }));\n  }\n};\nconst useImageLoadError = (source) => {\n  const [hasError, setHasError] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => setHasError(false), [source]);\n  return {\n    hasError,\n    onError: Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(() => setHasError(true), [])\n  };\n};\nfunction getDefaultStyles(overrides) {\n  return Object.assign({ display: \"flex\", overflow: \"hidden\", boxSizing: \"border-box\" }, overrides);\n}\nfunction setViewProps(styles2, props, options) {\n  setViewSize(styles2, props, options);\n  setViewStyle(styles2, props);\n}\nfunction setBorderStyle(styles2, borderWidth, borderColor, radius) {\n  if (borderWidth) {\n    styles2[\"--border-width\"] = `${borderWidth}px`;\n    styles2[\"--border-color\"] = borderColor || \"transparent\";\n  }\n  if (radius) {\n    styles2[\"borderRadius\"] = radius;\n    styles2[\"--border-radius\"] = `${radius}px`;\n  }\n}\nfunction setViewStyle(styles2, props) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h;\n  const { viewStyle } = props;\n  styles2[\"marginBlockStart\"] = (_a2 = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _a2 === void 0 ? void 0 : _a2.top;\n  styles2[\"marginBlockEnd\"] = (_b2 = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _b2 === void 0 ? void 0 : _b2.bottom;\n  styles2[\"marginInlineStart\"] = (_c = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _c === void 0 ? void 0 : _c.left;\n  styles2[\"marginInlineEnd\"] = (_d = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _d === void 0 ? void 0 : _d.right;\n  const marginHorizontal = ((_f = (_e2 = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _e2 === void 0 ? void 0 : _e2.left) !== null && _f !== void 0 ? _f : 0) + ((_h = (_g2 = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _g2 === void 0 ? void 0 : _g2.right) !== null && _h !== void 0 ? _h : 0);\n  if (marginHorizontal > 0 && styles2.width === \"100%\")\n    styles2.width = `calc(100% - ${marginHorizontal}px)`;\n  if (viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.backgroundColor)\n    styles2[\"backgroundColor\"] = viewStyle.backgroundColor;\n  if (viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.backgroundImageUrl) {\n    styles2[\"backgroundImage\"] = `url(${JSON.stringify(viewStyle.backgroundImageUrl)})`;\n    styles2[\"backgroundSize\"] = \"100% 100%\";\n    styles2[\"backgroundPosition\"] = \"center\";\n  }\n  setBorderStyle(styles2, viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.borderWidth, viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.borderColor, viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.radius);\n}\nfunction getViewSizeStyle(width, height, parentLayout) {\n  const style = {};\n  if (width.type === \"flex\" && width.value == FlexSizeSpecValue.FillParent) {\n    style[\"width\"] = \"100%\";\n    if (parentLayout === Layout.Row) {\n      style[\"flex\"] = 1;\n    }\n  } else if (width.type === \"fixed\" && width.value >= 0) {\n    style[\"width\"] = width.value;\n  }\n  if (height.type === \"flex\" && height.value == FlexSizeSpecValue.FillParent) {\n    style[\"height\"] = \"100%\";\n    if (parentLayout === Layout.Column) {\n      style[\"flex\"] = 1;\n    }\n  } else if (height.type === \"fixed\" && height.value >= 0) {\n    style[\"height\"] = height.value;\n  }\n  return style;\n}\nfunction setViewSize(styles2, props, options) {\n  var _a2, _b2;\n  const { width: defaultWidth, height: defaultHeight } = defaultProperties.view.size;\n  const { parentLayout } = options;\n  const sizeStyle = getViewSizeStyle((_a2 = props.width) !== null && _a2 !== void 0 ? _a2 : defaultWidth, (_b2 = props.height) !== null && _b2 !== void 0 ? _b2 : defaultHeight, parentLayout);\n  Object.assign(styles2, sizeStyle);\n}\nfunction setAlign(styles2, layout = defaultProperties.box.layout, align = defaultProperties.box.align) {\n  if (layout === Layout.Row) {\n    styles2[\"flexDirection\"] = \"row\";\n    styles2[\"alignItems\"] = alignInFlex(align.vertical);\n    styles2[\"justifyContent\"] = alignInFlex(align.horizontal);\n  }\n  if (layout === Layout.Column) {\n    styles2[\"flexDirection\"] = \"column\";\n    styles2[\"alignItems\"] = alignInFlex(align.horizontal);\n    styles2[\"justifyContent\"] = alignInFlex(align.vertical);\n  }\n}\nfunction setTextAlign(styles2, align = defaultProperties.box.align.horizontal) {\n  styles2.textAlign = align;\n}\nfunction setImageStyle(styles2, imageStyle) {\n  const { contentMode = MediaContentMode.AspectFit } = imageStyle || {};\n  if (contentMode) {\n    switch (contentMode) {\n      case MediaContentMode.AspectFill:\n        styles2[\"objectFit\"] = \"cover\";\n        break;\n      case MediaContentMode.AspectFit:\n        styles2[\"objectFit\"] = \"contain\";\n        break;\n      case MediaContentMode.ScalesToFill:\n        styles2[\"objectFit\"] = \"fill\";\n        break;\n    }\n  }\n}\nfunction setImageAspectRatio(styles2, props) {\n  var _a2, _b2, _c, _d;\n  const imageMetaData = props === null || props === void 0 ? void 0 : props.metaData;\n  if (!(imageMetaData === null || imageMetaData === void 0 ? void 0 : imageMetaData.pixelHeight) || !(imageMetaData === null || imageMetaData === void 0 ? void 0 : imageMetaData.pixelWidth)) {\n    return;\n  }\n  if (((_a2 = props === null || props === void 0 ? void 0 : props.width) === null || _a2 === void 0 ? void 0 : _a2.type) === \"fixed\" || ((_b2 = props === null || props === void 0 ? void 0 : props.height) === null || _b2 === void 0 ? void 0 : _b2.type) === \"fixed\") {\n    return;\n  }\n  styles2[\"aspectRatio\"] = `${(_c = props === null || props === void 0 ? void 0 : props.metaData) === null || _c === void 0 ? void 0 : _c.pixelWidth} / ${(_d = props === null || props === void 0 ? void 0 : props.metaData) === null || _d === void 0 ? void 0 : _d.pixelHeight}`;\n}\nfunction webkitLineClampStyles(numberOfLines) {\n  return {\n    WebkitLineClamp: numberOfLines,\n    WebkitBoxOrient: \"vertical\",\n    display: \"-webkit-box\",\n    overflow: \"hidden\",\n    overflowWrap: \"anywhere\",\n    flex: 1\n  };\n}\nfunction setTextStyle(styles2, props, options) {\n  const { textStyle, width } = props;\n  const { size, color: color2, weight } = textStyle || {};\n  if (size)\n    styles2[\"fontSize\"] = size;\n  if (color2)\n    styles2[\"color\"] = color2;\n  if (weight)\n    styles2[\"fontWeight\"] = weight;\n  if ((width === null || width === void 0 ? void 0 : width.type) === \"flex\" && (width === null || width === void 0 ? void 0 : width.value) == FlexSizeSpecValue.WrapContent) {\n    styles2[\"width\"] = \"fit-content\";\n    styles2[\"maxWidth\"] = \"100%\";\n  }\n  if (props.type === ComponentType.Text) {\n    const { siblings, elemIdx } = options;\n    if (siblings != null && siblings.length >= 2 && siblings.every(isWrappedText)) {\n      styles2.flexShrink = siblings.length - 1 === elemIdx ? 1 : 0;\n    }\n  }\n}\nconst MessageContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nconst MessageProvider = (props) => {\n  const { message, handleWebAction, handleCustomAction, handlePredefinedAction, children } = props;\n  const value = react__WEBPACK_IMPORTED_MODULE_0___default.a.useMemo(() => ({\n    message,\n    handleWebAction,\n    handleCustomAction,\n    handlePredefinedAction\n  }), [message === null || message === void 0 ? void 0 : message.updatedAt]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageContext.Provider, { value }, children);\n};\nconst useMessageContext = () => {\n  const context = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(MessageContext);\n  if (!context) {\n    throw new Error(\"useMessageContext must be used within a MessageProvider\");\n  }\n  return context;\n};\nfunction usePreservedCallback(callback) {\n  const callbackRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(callback);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])((...args) => {\n    return callbackRef.current(...args);\n  }, [callbackRef]);\n}\nfunction useRefEffect(callback, deps) {\n  const preservedCallback = usePreservedCallback(callback);\n  const disposeRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(noop$1);\n  const effect = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])((element2) => {\n    disposeRef.current();\n    disposeRef.current = noop$1;\n    if (element2 != null) {\n      const cleanup = callback(element2);\n      if (typeof cleanup === \"function\") {\n        disposeRef.current = cleanup;\n      }\n    }\n  }, [preservedCallback, ...deps]);\n  return effect;\n}\nfunction noop$1() {\n}\nfunction useResizeObserver(onResize) {\n  const resizeCallback = usePreservedCallback(onResize);\n  const ref = useRefEffect((elem) => {\n    const observer = new ResizeObserver((entries2) => {\n      if (entries2[0] != null) {\n        resizeCallback(entries2[0]);\n      }\n    });\n    observer.observe(elem);\n    return () => {\n      observer.unobserve(elem);\n    };\n  }, [resizeCallback]);\n  return ref;\n}\nfunction useElementSize() {\n  const [width, setWidth] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1);\n  const [height, setHeight] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1);\n  const [contentWidth, setContentWidth] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1);\n  const [contentHeight, setContentHeight] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1);\n  const [paddingWidth, setPaddingWidth] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1);\n  const [paddingHeight, setPaddingHeight] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(-1);\n  const ref = useResizeObserver((entry) => {\n    const { width: contentWidth2, height: contentHeight2 } = entry.contentRect;\n    const target = entry.target;\n    const { width: width2, height: height2 } = target.getBoundingClientRect();\n    setWidth(width2);\n    setHeight(height2);\n    setContentWidth(contentWidth2);\n    setContentHeight(contentHeight2);\n    setPaddingWidth(width2 - contentWidth2);\n    setPaddingHeight(height2 - contentHeight2);\n  });\n  return { ref, width, height, contentWidth, contentHeight, paddingWidth, paddingHeight };\n}\nvar __rest$1 = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nfunction isViewCompatibleWithSizeOption({ width = defaultProperties.view.size.width, height = defaultProperties.view.size.height, parentLayout = defaultProperties.box.layout, option }) {\n  if (parentLayout === Layout.Row) {\n    return isSizeCompatibleWithOption({\n      size: width,\n      option\n    });\n  }\n  return isSizeCompatibleWithOption({\n    size: height,\n    option\n  });\n}\nfunction useRecalculateWidth(params) {\n  const { style, props } = params;\n  const _a2 = useElementSize(), { ref: elemRef } = _a2, size = __rest$1(_a2, [\"ref\"]);\n  const { updateSize, sizes } = useSizeContext();\n  const { id: id2, siblings, parentLayout } = props;\n  const { width, height, paddingWidth, paddingHeight, contentWidth, contentHeight } = size;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    updateSize({\n      id: props.id,\n      width,\n      height,\n      paddingWidth,\n      paddingHeight,\n      contentWidth,\n      contentHeight\n    });\n  }, [props.id, width, height, paddingWidth, paddingHeight, contentWidth, contentHeight, updateSize]);\n  const currentStyle = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => {\n    const sumViewSize = (acc = 0, view) => {\n      var _a3, _b2, _c, _d;\n      if (parentLayout === Layout.Row) {\n        return acc + ((_b2 = (_a3 = sizes[view.id]) === null || _a3 === void 0 ? void 0 : _a3.contentWidth) !== null && _b2 !== void 0 ? _b2 : 0);\n      }\n      return acc + ((_d = (_c = sizes[view.id]) === null || _c === void 0 ? void 0 : _c.contentHeight) !== null && _d !== void 0 ? _d : 0);\n    };\n    const hasFillOption = isViewCompatibleWithSizeOption({\n      width: props.width,\n      height: props.height,\n      parentLayout,\n      option: \"fill\"\n    });\n    if (hasFillOption) {\n      const wrapSiblingsSize = siblings.filter(({ width: width2, height: height2 }) => !isViewCompatibleWithSizeOption({\n        width: width2,\n        height: height2,\n        parentLayout,\n        option: \"fill\"\n      })).reduce(sumViewSize, 0);\n      const fillSiblingCount = siblings.filter(({ width: width2, height: height2 }) => isViewCompatibleWithSizeOption({\n        width: width2,\n        height: height2,\n        parentLayout,\n        option: \"fill\"\n      })).length;\n      const maxSizeOption = (() => {\n        if (parentLayout === Layout.Row) {\n          return {\n            maxWidth: `calc((100% - ${wrapSiblingsSize}px) / ${fillSiblingCount})`\n          };\n        }\n        return {\n          maxHeight: `calc((100% - ${wrapSiblingsSize}px) / ${fillSiblingCount})`\n        };\n      })();\n      return Object.assign(Object.assign(Object.assign({}, style), maxSizeOption), width == 0 && { height: 0 });\n    } else {\n      const currentElemIdx = siblings.findIndex((sibling) => sibling.id === id2);\n      const forwardSiblingsSize = siblings.slice(0, currentElemIdx).filter(({ width: width2, height: height2 }) => isViewCompatibleWithSizeOption({\n        width: width2,\n        height: height2,\n        parentLayout,\n        option: \"wrap\"\n      })).reduce(sumViewSize, 0);\n      return Object.assign(Object.assign(Object.assign({}, style), width === 0 && { height: 0 }), parentLayout === Layout.Row ? {\n        maxWidth: `calc(100% - ${forwardSiblingsSize}px)`\n      } : {\n        maxHeight: `calc(100% - ${forwardSiblingsSize}px)`\n      });\n    }\n  }, [props.width, props.height, parentLayout, sizes, siblings, style, width, id2]);\n  return { recalculatedStyle: currentStyle, elemRef };\n}\nvar __rest = function(s4, e3) {\n  var t4 = {};\n  for (var p2 in s4) if (Object.prototype.hasOwnProperty.call(s4, p2) && e3.indexOf(p2) < 0)\n    t4[p2] = s4[p2];\n  if (s4 != null && typeof Object.getOwnPropertySymbols === \"function\")\n    for (var i3 = 0, p2 = Object.getOwnPropertySymbols(s4); i3 < p2.length; i3++) {\n      if (e3.indexOf(p2[i3]) < 0 && Object.prototype.propertyIsEnumerable.call(s4, p2[i3]))\n        t4[p2[i3]] = s4[p2[i3]];\n    }\n  return t4;\n};\nconst hasValidUrlProtocol = (url = \"\") => [\"http://\", \"https://\", \"ftp://\"].some((protocol) => url.startsWith(protocol));\nconst returnUrl = (url = \"\") => {\n  if (hasValidUrlProtocol(url)) {\n    return url;\n  }\n  return `https://${url}`;\n};\nconst ActionHandler = ({ children, props, className, style }) => {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j;\n  const { recalculatedStyle, elemRef } = useRecalculateWidth({ style, props });\n  const { message, handleWebAction, handleCustomAction, handlePredefinedAction } = useMessageContext();\n  const borderClass = ((_a2 = props.viewStyle) === null || _a2 === void 0 ? void 0 : _a2.borderWidth) ? \"sb-message-template__border\" : \"\";\n  const paddingStyles = {\n    paddingBlockStart: (_c = (_b2 = props.viewStyle) === null || _b2 === void 0 ? void 0 : _b2.padding) === null || _c === void 0 ? void 0 : _c.top,\n    paddingBlockEnd: (_e2 = (_d = props.viewStyle) === null || _d === void 0 ? void 0 : _d.padding) === null || _e2 === void 0 ? void 0 : _e2.bottom,\n    paddingInlineStart: (_g2 = (_f = props.viewStyle) === null || _f === void 0 ? void 0 : _f.padding) === null || _g2 === void 0 ? void 0 : _g2.left,\n    paddingInlineEnd: (_j = (_h = props.viewStyle) === null || _h === void 0 ? void 0 : _h.padding) === null || _j === void 0 ? void 0 : _j.right\n  };\n  const onClick = (e3) => {\n    var _a3, _b3, _c2, _d2, _e3, _f2, _g3;\n    if (((_a3 = props.action) === null || _a3 === void 0 ? void 0 : _a3.type) === \"web\") {\n      if (handleWebAction) {\n        handleWebAction(e3, props.action, message);\n      } else {\n        (_c2 = window === null || window === void 0 ? void 0 : window.open(returnUrl((_b3 = props === null || props === void 0 ? void 0 : props.action) === null || _b3 === void 0 ? void 0 : _b3.data), \"_blank\", \"noopener noreferrer\")) === null || _c2 === void 0 ? void 0 : _c2.focus();\n      }\n    } else if (((_d2 = props.action) === null || _d2 === void 0 ? void 0 : _d2.type) === \"custom\") {\n      if (handleCustomAction) {\n        handleCustomAction(e3, props.action, message);\n      } else {\n        (_f2 = window === null || window === void 0 ? void 0 : window.open(returnUrl((_e3 = props === null || props === void 0 ? void 0 : props.action) === null || _e3 === void 0 ? void 0 : _e3.data), \"_blank\", \"noopener noreferrer\")) === null || _f2 === void 0 ? void 0 : _f2.focus();\n      }\n    } else if (((_g3 = props.action) === null || _g3 === void 0 ? void 0 : _g3.type) === \"uikit\") {\n      handlePredefinedAction === null || handlePredefinedAction === void 0 ? void 0 : handlePredefinedAction(e3, props.action, message);\n    }\n  };\n  if (props.type === ComponentType.TextButton) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", { className: clx(className, borderClass), \"data-sb-template-id\": props.elementId, style: Object.assign(Object.assign({}, style), paddingStyles), onClick }, children);\n  }\n  const { display, flexDirection, justifyContent, alignItems, objectFit } = recalculatedStyle, wrapperStyles = __rest(recalculatedStyle, [\"display\", \"flexDirection\", \"justifyContent\", \"alignItems\", \"objectFit\"]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { ref: elemRef, className: clx(className, borderClass, props.action && \"sb-message-template__action\"), \"data-sb-template-id\": props.elementId, style: wrapperStyles, onClick },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: Object.assign({\n      display,\n      flexDirection,\n      justifyContent,\n      alignItems,\n      objectFit,\n      width: \"100%\",\n      height: \"100%\"\n    }, paddingStyles) }, children)\n  );\n};\nfunction clx(...names) {\n  return names.filter((it2) => !!it2).join(\" \");\n}\nfunction isFixedOrFill(view) {\n  var _a2, _b2, _c, _d;\n  const heightType = (_a2 = view === null || view === void 0 ? void 0 : view.height) === null || _a2 === void 0 ? void 0 : _a2.type;\n  const widthType = (_b2 = view === null || view === void 0 ? void 0 : view.width) === null || _b2 === void 0 ? void 0 : _b2.type;\n  const isFixedDiamension = heightType === \"fixed\" || widthType === \"fixed\";\n  const isFill = heightType === \"flex\" && ((_c = view === null || view === void 0 ? void 0 : view.height) === null || _c === void 0 ? void 0 : _c.value) === FlexSizeSpecValue.FillParent || widthType === \"flex\" && ((_d = view === null || view === void 0 ? void 0 : view.width) === null || _d === void 0 ? void 0 : _d.value) === FlexSizeSpecValue.FillParent;\n  return isFixedDiamension || isFill;\n}\nfunction convertNewlinesToBr(text2) {\n  return text2.split(\"\\n\").map((line, index2) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    { key: index2 },\n    line,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null)\n  ));\n}\nfunction renderText(view) {\n  const { text: text2, maxTextLines } = view;\n  const isToBeWrapped = isFixedOrFill(view);\n  const hasMaxLines = typeof maxTextLines === \"number\" && maxTextLines > 0;\n  const convertedText = convertNewlinesToBr(text2);\n  if (hasMaxLines || isToBeWrapped) {\n    const wrapperStyling = Object.assign(Object.assign({}, (hasMaxLines || isToBeWrapped) && { maxWidth: \"100%\" }), isToBeWrapped && { maxHeight: \"100%\", overflow: \"hidden\" });\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: wrapperStyling }, hasMaxLines ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: webkitLineClampStyles(maxTextLines) }, convertedText) : convertedText);\n  }\n  return hasMaxLines ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { style: webkitLineClampStyles(maxTextLines) }, convertedText) : convertedText;\n}\nconst renderer = createRenderer({\n  views: {\n    box(props) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ActionHandler, { className: \"sb-message-template__box\", elementId: props.elementId, style: props.parsedProperties, props }, props.children);\n    },\n    text(props) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ActionHandler, { className: \"sb-message-template__text\", elementId: props.elementId, style: props.parsedProperties, props }, renderText(props));\n    },\n    image(props) {\n      var _a2;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        ActionHandler,\n        { className: \"sb-message-template__image-container\", elementId: props.elementId, style: props.parsedProperties, props },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReactMessageTemplateImage, { className: \"sb-message-template__image\", alt: \"image\", src: props.imageUrl, style: { width: \"100%\", height: \"100%\", aspectRatio: \"inherit\", objectFit: \"inherit\" }, tintColor: (_a2 = props.imageStyle) === null || _a2 === void 0 ? void 0 : _a2.tintColor, metaData: props.metaData })\n      );\n    },\n    textButton(props) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ActionHandler, { className: \"sb-message-template__text-button\", elementId: props.elementId, style: props.parsedProperties, props }, renderText(Object.assign({ maxTextLines: defaultProperties.textButton.maxTextLines }, props)));\n    },\n    imageButton(props) {\n      var _a2;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        ActionHandler,\n        { className: \"sb-message-template__image-container sb-message-template__image-button\", elementId: props.elementId, style: props.parsedProperties, props },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReactMessageTemplateImage, { className: \"sb-message-template__image\", alt: \"image-button\", src: props.imageUrl, style: { width: \"100%\", height: \"100%\", aspectRatio: \"inherit\", objectFit: \"inherit\" }, tintColor: (_a2 = props.imageStyle) === null || _a2 === void 0 ? void 0 : _a2.tintColor, metaData: props.metaData })\n      );\n    },\n    carouselView(props) {\n      var _a2, _b2;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Carousel, { maxChildWidth: (_a2 = props.carouselStyle) === null || _a2 === void 0 ? void 0 : _a2.maxChildWidth, spacing: (_b2 = props.carouselStyle) === null || _b2 === void 0 ? void 0 : _b2.spacing, style: props.parsedProperties }, props.children);\n    }\n  }\n});\nconst parser = createParser({\n  mapBoxProps(props, options) {\n    const styles2 = getDefaultStyles();\n    setViewProps(styles2, props, options);\n    setAlign(styles2, props.layout, props.align);\n    return styles2;\n  },\n  mapTextProps(props, options) {\n    var _a2;\n    const styles2 = getDefaultStyles({ whiteSpace: \"pre-line\", wordBreak: \"break-word\" });\n    setViewProps(styles2, props, options);\n    setTextStyle(styles2, props, options);\n    setAlign(styles2, Layout.Row, props.align);\n    setTextAlign(styles2, (_a2 = props.align) === null || _a2 === void 0 ? void 0 : _a2.horizontal);\n    return styles2;\n  },\n  mapImageProps(props, options) {\n    const styles2 = getDefaultStyles();\n    setViewProps(styles2, props, options);\n    setImageStyle(styles2, props.imageStyle);\n    setImageAspectRatio(styles2, props);\n    return styles2;\n  },\n  mapTextButtonProps(props, options) {\n    const styles2 = getDefaultStyles({ whiteSpace: \"pre-line\", alignItems: \"center\", justifyContent: \"center\" });\n    setViewProps(styles2, props, options);\n    setTextStyle(styles2, props, options);\n    return styles2;\n  },\n  mapImageButtonProps(props, options) {\n    const styles2 = getDefaultStyles();\n    setViewProps(styles2, props, options);\n    setImageStyle(styles2, props.imageStyle);\n    setImageAspectRatio(styles2, props);\n    return styles2;\n  },\n  mapCarouselProps(props, options) {\n    var _a2, _b2, _c, _d, _e2, _f, _g2, _h;\n    const styles2 = getDefaultStyles();\n    setViewProps(styles2, props, options);\n    styles2[\"paddingBlockStart\"] = (_b2 = (_a2 = props.viewStyle) === null || _a2 === void 0 ? void 0 : _a2.padding) === null || _b2 === void 0 ? void 0 : _b2.top;\n    styles2[\"paddingBlockEnd\"] = (_d = (_c = props.viewStyle) === null || _c === void 0 ? void 0 : _c.padding) === null || _d === void 0 ? void 0 : _d.bottom;\n    styles2[\"paddingInlineStart\"] = (_f = (_e2 = props.viewStyle) === null || _e2 === void 0 ? void 0 : _e2.padding) === null || _f === void 0 ? void 0 : _f.left;\n    styles2[\"paddingInlineEnd\"] = (_h = (_g2 = props.viewStyle) === null || _g2 === void 0 ? void 0 : _g2.padding) === null || _h === void 0 ? void 0 : _h.right;\n    return styles2;\n  }\n});\ncreateMessageTemplate({\n  renderer,\n  parser,\n  Container: ({ children, className }) => {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: `sb-message-template__parent ${className}`, style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      maxWidth: 400,\n      marginBlockEnd: 24\n    } }, children);\n  }\n});\nvar CustomTemplate = createMessageTemplate({\n  parser,\n  renderer,\n  Container: function(_a2) {\n    var children = _a2.children, className = _a2.className;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: [\n      \"sb-message-template__parent \".concat(className),\n      \"sendbird-message-template__root\"\n    ].join(\" \") }, children);\n  }\n}).MessageTemplate;\nfunction MessageTemplate(_a2) {\n  var templateItems = _a2.templateItems, templateVersion = _a2.templateVersion;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CustomTemplate, { templateItems, templateVersion });\n}\nfunction FallbackTemplateMessageItemBody(_a2) {\n  var className = _a2.className, message = _a2.message, isByMe = _a2.isByMe;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var text2 = message[\"message\"];\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: getClassName([\n    className !== null && className !== void 0 ? className : \"\",\n    isByMe ? \"outgoing\" : \"incoming\",\n    \"sendbird-template-message-item-body__fallback_message\"\n  ]) }, text2 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ONCONTENT_INVERSE_1 }, text2)\n  ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-template-message-item-body__fallback_message__header\", type: LabelTypography.BODY_1, color: LabelColors.ONCONTENT_INVERSE_1 }, stringSet2.UNKNOWN__TEMPLATE_ERROR),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-template-message-item-body__fallback_message__description\", type: LabelTypography.BODY_1, color: LabelColors.ONCONTENT_INVERSE_3 }, stringSet2.UNKNOWN__CANNOT_READ_TEMPLATE)\n  ));\n}\nvar TEMPLATE_LOADING_SPINNER_SIZE = \"40px\";\nfunction LoadingTemplateMessageItemBody(_a2) {\n  var className = _a2.className, isByMe = _a2.isByMe;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(className, isByMe ? \"outgoing\" : \"incoming\", \"sendbird-template-loading-message-item-body\") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Loader,\n      { className: \"sendbird-message-status__icon\", testID: \"sendbird-message-status-icon\", width: TEMPLATE_LOADING_SPINNER_SIZE, height: TEMPLATE_LOADING_SPINNER_SIZE },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.SPINNER, fillColor: IconColors.CONTENT_INVERSE_3, width: TEMPLATE_LOADING_SPINNER_SIZE, height: TEMPLATE_LOADING_SPINNER_SIZE })\n    )\n  );\n}\nvar MessageTemplateWrapper = function(_a2) {\n  var message = _a2.message, templateVersion = _a2.templateVersion, templateItems = _a2.templateItems;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    MessageProvider,\n    { message },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageTemplate, { templateVersion, templateItems })\n  );\n};\nvar splitColorVariables = function(colorVariables) {\n  var light = {};\n  var dark = {};\n  for (var key in colorVariables) {\n    if (Object.prototype.hasOwnProperty.call(colorVariables, key)) {\n      var value = colorVariables[key];\n      if (typeof value === \"object\" && value !== null) {\n        var _a2 = splitColorVariables(value), nestedLight = _a2[0], nestedDark = _a2[1];\n        light[key] = nestedLight;\n        dark[key] = nestedDark;\n      } else if (typeof value === \"string\") {\n        var _b2 = value.split(\",\"), lightColor = _b2[0], darkColor = _b2[1];\n        light[key] = lightColor;\n        dark[key] = darkColor || lightColor;\n      } else {\n        light[key] = value;\n        dark[key] = value;\n      }\n    }\n  }\n  return [light, dark];\n};\nfunction selectColorVariablesByTheme(_a2) {\n  var colorVariables = _a2.colorVariables, theme = _a2.theme;\n  var _b2 = splitColorVariables(colorVariables), light = _b2[0], dark = _b2[1];\n  return theme === \"light\" ? light : dark;\n}\nvar MessageTemplateErrorBoundary = (\n  /** @class */\n  function(_super) {\n    __extends(MessageTemplateErrorBoundary2, _super);\n    function MessageTemplateErrorBoundary2(props) {\n      var _this = _super.call(this, props) || this;\n      _this.state = { hasError: false };\n      return _this;\n    }\n    MessageTemplateErrorBoundary2.getDerivedStateFromError = function() {\n      return { hasError: true };\n    };\n    MessageTemplateErrorBoundary2.prototype.componentDidCatch = function(error, errorInfo) {\n      var _a2;\n      (_a2 = this.props.logger) === null || _a2 === void 0 ? void 0 : _a2.error(\"Error caught by ErrorBoundary: \", error, errorInfo);\n    };\n    MessageTemplateErrorBoundary2.prototype.render = function() {\n      if (this.state.hasError) {\n        return this.props.fallbackMessage;\n      }\n      return this.props.children;\n    };\n    return MessageTemplateErrorBoundary2;\n  }(react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"])\n);\nvar flattenObjectHelper = function(currentObject, flattenObject2, parentKeyPath) {\n  if (parentKeyPath === void 0) {\n    parentKeyPath = \"\";\n  }\n  for (var _i2 = 0, _a2 = Object.entries(currentObject); _i2 < _a2.length; _i2++) {\n    var _b2 = _a2[_i2], key = _b2[0], value = _b2[1];\n    var currentKeyPath = parentKeyPath ? \"\".concat(parentKeyPath, \".\").concat(key) : key;\n    if (value && typeof value === \"object\") {\n      flattenObjectHelper(value, flattenObject2, currentKeyPath);\n    } else {\n      flattenObject2[currentKeyPath] = value;\n    }\n  }\n};\nfunction flattenObject(object) {\n  var result = {};\n  flattenObjectHelper(object, result);\n  return result;\n}\nvar TEMPLATE_FETCH_RETRY_BUFFER_TIME_IN_MILLIES = 500;\nvar replaceVariablesInTemplateString = function(_a2) {\n  var template = _a2.template, _b2 = _a2.templateData, templateData = _b2 === void 0 ? {} : _b2, colorVariables = _a2.colorVariables, theme = _a2.theme;\n  var selectedThemeColorVariables = {};\n  if (colorVariables && theme) {\n    selectedThemeColorVariables = selectColorVariablesByTheme({\n      colorVariables,\n      theme\n    });\n  }\n  var source = __assign(__assign({}, templateData), selectedThemeColorVariables);\n  var flattenedSource = flattenObject(source);\n  var replaced = template;\n  Object.entries(flattenedSource).forEach(function(_a3) {\n    var key = _a3[0], val = _a3[1];\n    var pattern = \"\\\\{\".concat(key, \"\\\\}\");\n    var regex2 = new RegExp(pattern, \"g\");\n    replaced = replaced.replace(regex2, val);\n  });\n  return replaced;\n};\nfunction TemplateMessageItemBody(_a2) {\n  var _b2;\n  var _c = _a2.className, className = _c === void 0 ? \"\" : _c, message = _a2.message, _d = _a2.isByMe, isByMe = _d === void 0 ? false : _d, _e2 = _a2.theme, theme = _e2 === void 0 ? \"light\" : _e2;\n  var templateData = (_b2 = message.extendedMessagePayload) === null || _b2 === void 0 ? void 0 : _b2[MESSAGE_TEMPLATE_KEY];\n  var getFailedBody = function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FallbackTemplateMessageItemBody, { className, message, isByMe });\n  };\n  if (!(templateData === null || templateData === void 0 ? void 0 : templateData.key)) {\n    return getFailedBody();\n  }\n  var templateKey = templateData.key;\n  var state = useSendbird().state;\n  if (!state) {\n    return getFailedBody();\n  }\n  var logger = state.config.logger;\n  var _f = state.utils, getCachedTemplate = _f.getCachedTemplate, updateMessageTemplatesInfo = _f.updateMessageTemplatesInfo;\n  var waitingTemplateKeysMap = state.stores.appInfoStore.waitingTemplateKeysMap;\n  var waitingTemplateKeysMapString = Object.entries(waitingTemplateKeysMap).map(function(_a3) {\n    var key = _a3[0], value = _a3[1];\n    return [key, value.requestedAt, value.erroredMessageIds.join(\",\")].join(\"-\");\n  }).join(\"_\");\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(getFilledMessageTemplateItems()), renderData = _g2[0], setRenderData = _g2[1];\n  function findSubstrings(input, matchString) {\n    var indices = [];\n    var startIndex = 0;\n    while ((startIndex = input.indexOf(matchString, startIndex)) !== -1) {\n      indices.push({ start: startIndex, end: startIndex + matchString.length });\n      startIndex += matchString.length;\n    }\n    return indices;\n  }\n  function replaceAtIndices(input, indices, replacement) {\n    var result = \"\";\n    var lastIndex = 0;\n    indices.forEach(function(_a3) {\n      var start = _a3.start, end = _a3.end;\n      result += input.slice(lastIndex, start) + replacement;\n      lastIndex = end;\n    });\n    result += input.slice(lastIndex);\n    return result;\n  }\n  function replaceReservationKeys(templateString, reservationKey, replacement) {\n    var indices = findSubstrings(templateString, reservationKey);\n    return replaceAtIndices(templateString, indices, replacement);\n  }\n  function getFilledRootTemplate(rootTemplate) {\n    var rootTemplateString = replaceVariablesInTemplateString({\n      template: rootTemplate.uiTemplate,\n      templateData: templateData.variables,\n      colorVariables: rootTemplate.colorVariables,\n      theme\n    });\n    if (templateData.view_variables) {\n      var reservationKeyToItems_1 = {};\n      Object.entries(templateData.view_variables).forEach(function(_a3) {\n        var reservationKey = _a3[0], simpleTemplateDataList = _a3[1];\n        var filledSimpleTemplates = [];\n        simpleTemplateDataList.forEach(function(simpleTemplateData) {\n          var simpleTemplateKey = simpleTemplateData === null || simpleTemplateData === void 0 ? void 0 : simpleTemplateData.key;\n          if (simpleTemplateKey) {\n            var cachedTemplate = getCachedTemplate(simpleTemplateKey);\n            if (!cachedTemplate) {\n              logger.error(\"TemplateMessageItemBody | simple template is expected to be cached: \", simpleTemplateKey);\n            }\n            var items = replaceVariablesInTemplateString({\n              template: cachedTemplate.uiTemplate,\n              templateData: simpleTemplateData.variables,\n              colorVariables: cachedTemplate.colorVariables,\n              theme\n            });\n            filledSimpleTemplates.push({\n              version: cachedTemplate.version,\n              body: {\n                items: JSON.parse(items)\n              }\n            });\n            reservationKeyToItems_1[reservationKey] = JSON.stringify(filledSimpleTemplates);\n          }\n        });\n      });\n      Object.entries(reservationKeyToItems_1).forEach(function(_a3) {\n        var reservationKey = _a3[0], filledSimpleTemplates = _a3[1];\n        rootTemplateString = replaceReservationKeys(rootTemplateString, '\"@{'.concat(reservationKey, '}\"'), filledSimpleTemplates);\n      });\n    }\n    return JSON.parse(rootTemplateString);\n  }\n  function getFilledMessageTemplateItems() {\n    var result = {\n      filledMessageTemplateItemsList: [],\n      isErrored: false\n    };\n    var nonCachedTemplateKeys = [];\n    var cachedTemplate = getCachedTemplate(templateKey);\n    if (!cachedTemplate) {\n      nonCachedTemplateKeys.push(templateKey);\n    }\n    if (templateData === null || templateData === void 0 ? void 0 : templateData.view_variables) {\n      try {\n        Object.entries(templateData.view_variables).forEach(function(_a3) {\n          var _2 = _a3[0], simpleTemplateDataList = _a3[1];\n          simpleTemplateDataList.forEach(function(simpleTemplateData) {\n            var simpleTemplateKey = simpleTemplateData === null || simpleTemplateData === void 0 ? void 0 : simpleTemplateData.key;\n            if (simpleTemplateKey && !getCachedTemplate(simpleTemplateKey) && !nonCachedTemplateKeys.includes(simpleTemplateKey)) {\n              nonCachedTemplateKeys.push(simpleTemplateKey);\n            }\n          });\n        });\n      } catch (e3) {\n        logger.error(\"TemplateMessageItemBody | received view_variables is malformed: \", templateData);\n        result.isErrored = true;\n        return result;\n      }\n    }\n    try {\n      if (nonCachedTemplateKeys.length > 0) {\n        tryFetchTemplateByKey(nonCachedTemplateKeys);\n      } else if (cachedTemplate) {\n        var items = getFilledRootTemplate(cachedTemplate);\n        result.filledMessageTemplateItemsList.push({\n          version: cachedTemplate.version,\n          items\n        });\n      }\n    } catch (e3) {\n      logger.error(\"TemplateMessageItemBody | fetching non-cached templates by given template keys failed: \", e3);\n      result.isErrored = true;\n    }\n    return result;\n  }\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (!renderData.isErrored && renderData.filledMessageTemplateItemsList.length === 0) {\n      var newRenderData = getFilledMessageTemplateItems();\n      setRenderData(newRenderData);\n    }\n  }, [templateData.key, waitingTemplateKeysMapString]);\n  function tryFetchTemplateByKey(templateKeys) {\n    if (templateKeys.length > 0) {\n      var waitingTemplateKeyDataList_1 = [];\n      templateKeys.forEach(function(templateKey2) {\n        var waitingTemplateKeyData = waitingTemplateKeysMap[templateKey2];\n        waitingTemplateKeyDataList_1.push([templateKey2, waitingTemplateKeyData]);\n      });\n      var requestedAt_1 = Date.now();\n      var keysToUpdate_1 = [];\n      waitingTemplateKeyDataList_1.forEach(function(_a3) {\n        var templateKey2 = _a3[0], waitingTemplateKeyData = _a3[1];\n        if (!waitingTemplateKeyData || waitingTemplateKeyData.erroredMessageIds.indexOf(message.messageId) === -1 && requestedAt_1 > waitingTemplateKeyData.requestedAt + TEMPLATE_FETCH_RETRY_BUFFER_TIME_IN_MILLIES) {\n          keysToUpdate_1.push(templateKey2);\n        } else if (waitingTemplateKeyData.erroredMessageIds.indexOf(message.messageId) > -1) {\n          throw new Error(\"TemplateMessageItemBody | fetching template key \".concat(templateKey2, \" for messageId: \").concat(message.messageId, \" has failed.\"));\n        }\n      });\n      if (keysToUpdate_1.length > 0) {\n        updateMessageTemplatesInfo(keysToUpdate_1, message.messageId, requestedAt_1);\n      }\n    }\n  }\n  if (renderData.isErrored) {\n    return getFailedBody();\n  }\n  if (renderData.filledMessageTemplateItemsList.length === 0) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LoadingTemplateMessageItemBody, { className, isByMe });\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      className,\n      isByMe ? \"outgoing\" : \"incoming\",\n      \"sendbird-template-message-item-body\"\n    ]) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageTemplateErrorBoundary, { fallbackMessage: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FallbackTemplateMessageItemBody, { className, message, isByMe }), logger }, renderData.filledMessageTemplateItemsList.map(function(filledMessageTemplateItem, i3) {\n      var _a3;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageTemplateWrapper, { key: i3, message, templateVersion: (_a3 = filledMessageTemplateItem.version) !== null && _a3 !== void 0 ? _a3 : 0, templateItems: filledMessageTemplateItem.items });\n    }))\n  );\n}\nfunction MessageFeedbackFailedModal(props) {\n  var text2 = props.text, onCancel = props.onCancel;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var modalRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var onKeyDown = useKeyDown(modalRef, {\n    Enter: function() {\n      return onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n    },\n    Escape: function() {\n      return onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { onKeyDown },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Modal, { contentClassName: \"sendbird-message-feedback-modal-content__mobile\", type: ButtonTypes.PRIMARY, onSubmit: onCancel, onClose: onCancel, submitText: stringSet2.BUTTON__OK, renderHeader: function() {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-modal__header\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1, className: \"sendbird-message-feedback-modal-header\" }, text2)\n      );\n    }, customFooter: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message-feedback-modal-footer__root_failed\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        Button,\n        { onClick: onCancel },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_3, color: LabelColors.ONCONTENT_1 }, stringSet2.BUTTON__OK)\n      )\n    ) })\n  );\n}\nfunction MessageProfile(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, isByMe = _a2.isByMe, displayThreadReplies = _a2.displayThreadReplies, bottom = _a2.bottom, message = _a2.message, channel = _a2.channel, userId = _a2.userId, _c = _a2.chainBottom, chainBottom = _c === void 0 ? false : _c;\n  var avatarRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _d = useUserProfileContext(), disableUserProfile = _d.disableUserProfile, renderUserProfile = _d.renderUserProfile;\n  if (isByMe || chainBottom || !isSendableMessage(message)) {\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n    var _a3, _b3;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, {\n      className: classnames(className, displayThreadReplies && \"use-thread-replies\"),\n      src: ((_b3 = (_a3 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a3 === void 0 ? void 0 : _a3.find(function(member) {\n        return (member === null || member === void 0 ? void 0 : member.userId) === message.sender.userId;\n      })) === null || _b3 === void 0 ? void 0 : _b3.profileUrl) || message.sender.profileUrl || \"\",\n      // TODO: Divide getting profileUrl logic to utils\n      ref: avatarRef,\n      width: \"28px\",\n      height: \"28px\",\n      bottom,\n      onClick: function() {\n        if (!disableUserProfile)\n          toggleDropdown();\n      }\n    });\n  }, menuItems: function(closeDropdown) {\n    return renderUserProfile ? renderUserProfile({\n      user: message.sender,\n      close: closeDropdown,\n      currentUserId: userId,\n      avatarRef\n    }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      MenuItems,\n      {\n        /**\n         * parentRef: For catching location(x, y) of MenuItems\n         * parentContainRef: For toggling more options(menus & reactions)\n        */\n        parentRef: avatarRef,\n        parentContainRef: avatarRef,\n        closeDropdown,\n        style: { paddingTop: \"0px\", paddingBottom: \"0px\" }\n      },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { user: message.sender, onSuccess: closeDropdown })\n    );\n  } });\n}\nvar InputLabel$1 = function(_a2) {\n  var children = _a2.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-form-message__input__label\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, children);\n};\nvar FormInput = function(props) {\n  var name2 = props.name, required = props.required, errorMessage = props.errorMessage, isValid2 = props.isValid, values = props.values, isInvalidated = props.isInvalidated, isSubmitTried = props.isSubmitTried, style = props.style, onFocused = props.onFocused, onChange = props.onChange, placeHolder = props.placeHolder, isSubmitted = props.isSubmitted;\n  var layout = style.layout, _a2 = style.options, options = _a2 === void 0 ? [] : _a2, resultCount = style.resultCount;\n  var _b2 = resultCount !== null && resultCount !== void 0 ? resultCount : {}, _c = _b2.min, min = _c === void 0 ? 1 : _c, _d = _b2.max, max = _d === void 0 ? 1 : _d;\n  var chipDataList = getInitialChipDataList();\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var handleFocus = function() {\n    onFocused === null || onFocused === void 0 ? void 0 : onFocused(true);\n  };\n  var handleBlur = function() {\n    onFocused === null || onFocused === void 0 ? void 0 : onFocused(false);\n  };\n  function getInitialChipDataList() {\n    if (isSubmitted) {\n      return options.map(function(option) {\n        return {\n          state: values.includes(option) ? \"submittedSelected\" : \"submittedDefault\",\n          option\n        };\n      });\n    } else {\n      return options.map(function(option) {\n        return {\n          state: values.includes(option) ? \"selected\" : \"default\",\n          option\n        };\n      });\n    }\n  }\n  var onChipClick = function(index2) {\n    if (isSubmitted)\n      return;\n    var newDraftedValues;\n    if (min === 1 && max === 1) {\n      newDraftedValues = chipDataList[index2].state === \"selected\" ? [] : [chipDataList[index2].option];\n    } else {\n      newDraftedValues = chipDataList.reduce(function(acc, chipData, i3) {\n        if (i3 === index2) {\n          if (chipData.state === \"default\" && values.length < max) {\n            acc.push(chipData.option);\n          }\n        } else if (chipData.state === \"selected\") {\n          acc.push(chipData.option);\n        }\n        return acc;\n      }, []);\n    }\n    onChange(newDraftedValues);\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-form-message__input__root\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      InputLabel$1,\n      null,\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-form-message__input__title-container\" },\n        name2,\n        \" \",\n        !required && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: \"sendbird-form-message__input__title-optional\" }, \"(optional)\")\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-input_for_form\" },\n      function() {\n        switch (layout) {\n          case \"chip\": {\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-form-message__input__chip-container\" }, chipDataList.map(function(chipData, index2) {\n              return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                \"div\",\n                { className: \"sendbird-form-message__input__chip \".concat(chipData.state), key: index2, onClick: function() {\n                  return onChipClick(index2);\n                } },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-form-message__input__chip-text\" }, chipData.option),\n                isSubmitted && chipData.state === \"submittedSelected\" && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-form-message__submitted-check-icon-chip\", type: IconTypes.DONE, fillColor: IconColors.SECONDARY_2, width: \"20px\", height: \"20px\" })\n              );\n            }));\n          }\n          case \"textarea\": {\n            var currentValue = values.length > 0 ? values[0] : \"\";\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-form-message__input__container\" }, isSubmitted ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: \"sendbird-form-message__submitted-input-box textarea\" },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-form-message__submitted-input-box-text\" }, currentValue),\n              isValid2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                \"div\",\n                { className: \"sendbird-form-message__submitted-check-icon-container\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DONE, fillColor: IconColors.SECONDARY_2, width: \"20px\", height: \"20px\" })\n              ),\n              !currentValue && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-input__placeholder\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, stringSet2.FORM_ITEM_OPTIONAL_EMPTY)\n            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n              null,\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"textarea\", { className: classnames(\"sendbird-input__input\", !!errorMessage && \"error\", \"sendbird-form-message__input__textarea\"), required, disabled: isSubmitted, value: currentValue, onFocus: handleFocus, onBlur: handleBlur, onChange: function(event) {\n                var value = event.target.value;\n                onChange(value ? [value] : []);\n              } }),\n              placeHolder && !currentValue && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-input__placeholder textarea\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, placeHolder)\n            ));\n          }\n          case \"text\":\n          case \"number\":\n          case \"phone\":\n          case \"email\": {\n            var currentValue = values.length > 0 ? values[0] : \"\";\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-form-message__input__container\" }, isSubmitted ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: \"sendbird-form-message__submitted-input-box\" },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-form-message__submitted-input-box-text\" }, currentValue),\n              isValid2 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                \"div\",\n                { className: \"sendbird-form-message__submitted-check-icon-container\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DONE, fillColor: IconColors.SECONDARY_2, width: \"20px\", height: \"20px\" })\n              ),\n              !currentValue && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-input__placeholder\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, stringSet2.FORM_ITEM_OPTIONAL_EMPTY)\n            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n              null,\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { type: layout === \"number\" ? \"text\" : layout, inputMode: layout === \"number\" ? \"numeric\" : \"text\", className: \"sendbird-input__input \".concat(errorMessage ? \"error\" : \"\"), name: name2, required, disabled: isSubmitted, value: currentValue, onFocus: handleFocus, onBlur: handleBlur, onChange: function(event) {\n                var value = event.target.value;\n                onChange(value ? [value] : []);\n              } }),\n              placeHolder && !currentValue && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-input__placeholder\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, placeHolder)\n            ));\n          }\n          default: {\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n          }\n        }\n      }(),\n      errorMessage && (isSubmitTried || isInvalidated) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-form-message__error-label\", type: LabelTypography.CAPTION_3 }, errorMessage)\n    )\n  );\n};\nvar FallbackUserMessage = function(_a2) {\n  var isByMe = _a2.isByMe, text2 = _a2.text;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      \"sendbird-unknown-message-item-body\",\n      isByMe ? \"outgoing\" : \"incoming\"\n    ]) },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-unknown-message-item-body__description\", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_3 : LabelColors.ONBACKGROUND_3 }, text2)\n  );\n};\nfunction FormMessageItemBody(props) {\n  var _this = this;\n  var message = props.message, form = props.form, isByMe = props.isByMe, logger = props.logger;\n  var items = form.items, formId = form.id;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), submitFailed = _a2[0], setSubmitFailed = _a2[1];\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isSubmitTried = _b2[0], setIsSubmitTried = _b2[1];\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(function() {\n    var initialFormValues = [];\n    items.forEach(function(_a3) {\n      var required = _a3.required, _b3 = _a3.style, style = _b3 === void 0 ? {} : _b3;\n      var layout = style.layout, _c2 = style.defaultOptions, defaultOptions2 = _c2 === void 0 ? [] : _c2;\n      initialFormValues.push({\n        draftValues: layout === \"chip\" ? defaultOptions2 : [],\n        required,\n        errorMessage: null,\n        isInvalidated: false\n      });\n    });\n    return initialFormValues;\n  }), formValues = _c[0], setFormValues = _c[1];\n  var isSubmitted = form.isSubmitted;\n  var hasError = formValues.some(function(_a3) {\n    var errorMessage = _a3.errorMessage;\n    return !!errorMessage;\n  });\n  var hasInvalidated = formValues.some(function(_a3) {\n    var isInvalidated = _a3.isInvalidated;\n    return isInvalidated;\n  });\n  var isButtonDisabled = hasError && (isSubmitTried || hasInvalidated) || isSubmitted;\n  var handleSubmit = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    return __awaiter$5(_this, void 0, void 0, function() {\n      var hasError_1, isMissingRequired, error_1;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            setIsSubmitTried(true);\n            _a3.label = 1;\n          case 1:\n            _a3.trys.push([1, 3, , 4]);\n            hasError_1 = formValues.some(function(_a4) {\n              var errorMessage = _a4.errorMessage;\n              return errorMessage;\n            });\n            if (hasError_1) {\n              return [\n                2\n                /*return*/\n              ];\n            }\n            isMissingRequired = formValues.some(function(formValue) {\n              return formValue.required && (!formValue.draftValues || formValue.draftValues.length === 0);\n            });\n            if (isMissingRequired) {\n              setFormValues(function(oldFormValues) {\n                return oldFormValues.map(function(formValue) {\n                  if (formValue.required && formValue.draftValues.length === 0) {\n                    return __assign(__assign({}, formValue), { errorMessage: stringSet2.FORM_ITEM_REQUIRED });\n                  }\n                  return formValue;\n                });\n              });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            formValues.forEach(function(formValue, index2) {\n              items[index2].draftValues = formValue.draftValues;\n            });\n            return [4, message.submitMessageForm()];\n          case 2:\n            _a3.sent();\n            return [3, 4];\n          case 3:\n            error_1 = _a3.sent();\n            setSubmitFailed(true);\n            logger === null || logger === void 0 ? void 0 : logger.error(error_1);\n            return [3, 4];\n          case 4:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [formValues, message.messageId, message.submitMessageForm, formId]);\n  if (!isFormVersionCompatible(form.version)) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FallbackUserMessage, { isByMe, text: stringSet2.FORM_VERSION_ERROR });\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      \"\".concat(TEXT_MESSAGE_BODY_CLASSNAME, \" disable-hover\"),\n      \"sendbird-form-message__root\",\n      \"incoming\"\n    ]) },\n    items.map(function(item, index2) {\n      var _a3;\n      var name2 = item.name, placeholder = item.placeholder, id2 = item.id, required = item.required, style = item.style;\n      var _b3 = formValues[index2], _c2 = _b3.draftValues, draftValues = _c2 === void 0 ? [] : _c2, errorMessage = _b3.errorMessage;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FormInput, { key: id2, style, placeHolder: placeholder, values: (_a3 = item.submittedValues) !== null && _a3 !== void 0 ? _a3 : draftValues, isInvalidated: formValues[index2].isInvalidated, isSubmitTried, errorMessage, isValid: isSubmitted, isSubmitted, name: name2, required, onFocused: function(isFocus) {\n        if (errorMessage && !isFocus && !formValues[index2].isInvalidated) {\n          setFormValues(function(_a4) {\n            var newInputs = _a4.slice(0);\n            newInputs[index2] = __assign(__assign({}, newInputs[index2]), { isInvalidated: true });\n            return newInputs;\n          });\n        } else if (!errorMessage) {\n          setFormValues(function(_a4) {\n            var newInputs = _a4.slice(0);\n            newInputs[index2] = __assign(__assign({}, newInputs[index2]), { isInvalidated: false });\n            return newInputs;\n          });\n        }\n      }, onChange: function(values) {\n        setFormValues(function(_a4) {\n          var newInputs = _a4.slice(0);\n          newInputs[index2] = __assign(__assign({}, newInputs[index2]), { draftValues: values, errorMessage: function() {\n            if (!item.isValid(values)) {\n              return stringSet2.FORM_ITEM_INVALID;\n            }\n            if (required && values.length === 0) {\n              return stringSet2.FORM_ITEM_REQUIRED;\n            }\n            return null;\n          }() });\n          return newInputs;\n        });\n      } });\n    }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { className: \"sendbird-form-message__submit-button\", onClick: handleSubmit, disabled: isButtonDisabled, labelType: LabelTypography.BUTTON_2, labelColor: LabelColors.ONCONTENT_1 }, isSubmitted ? \"Submitted successfully\" : \"Submit\"),\n    submitFailed && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageFeedbackFailedModal, { text: \"Submit failed.\", onCancel: function() {\n      setSubmitFailed(false);\n    } })\n  );\n}\nvar MESSAGE_ITEM_BODY_CLASSNAME = \"sendbird-message-content__middle__message-item-body\";\nvar MessageBody = function(props) {\n  var _a2;\n  var _b2 = props.className, className = _b2 === void 0 ? MESSAGE_ITEM_BODY_CLASSNAME : _b2, message = props.message, channel = props.channel, showFileViewer = props.showFileViewer, onMessageHeightChange = props.onMessageHeightChange, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, mouseHover = props.mouseHover, isMobile = props.isMobile, config2 = props.config, isReactionEnabledInChannel = props.isReactionEnabledInChannel, isByMe = props.isByMe;\n  var customSubcomponentsProps = (_a2 = props[\"customSubcomponentsProps\"]) !== null && _a2 !== void 0 ? _a2 : {};\n  var threadMessageKindKey = useThreadMessageKindKeySelector({\n    isMobile\n  });\n  var statefulFileInfoList = useFileInfoListWithUploaded(message);\n  var messageTypes = getUIKitMessageTypes();\n  var isOgMessageEnabledInGroupChannel = (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && config2.groupChannel.enableOgtag;\n  var isFormMessageEnabledInGroupChannel = (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && config2.groupChannel.enableFormTypeMessage;\n  var renderUnknownMessageItemBody = function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UnknownMessageItemBody, { className, message, isByMe, mouseHover, isReactionEnabled: isReactionEnabledInChannel });\n  };\n  return K(message).when(function(message2) {\n    return isFormMessageEnabledInGroupChannel && isFormMessage(message2);\n  }, function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FormMessageItemBody, { isByMe, message, form: message.messageForm, logger: config2.logger });\n  }).when(isTemplateMessage, function() {\n    var _a3, _b3;\n    var templatePayload = message.extendedMessagePayload[MESSAGE_TEMPLATE_KEY];\n    if (!isValidTemplateMessageType(templatePayload)) {\n      (_b3 = (_a3 = config2.logger) === null || _a3 === void 0 ? void 0 : _a3.error) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, \"TemplateMessageItemBody: invalid type value in message.extendedMessagePayload.message_template.\", templatePayload);\n      return renderUnknownMessageItemBody();\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TemplateMessageItemBody, { className, message, isByMe, theme: config2 === null || config2 === void 0 ? void 0 : config2.theme });\n  }).when(function(message2) {\n    return isOgMessageEnabledInGroupChannel && isSendableMessage(message2) && isOGMessage(message2);\n  }, function() {\n    var _a3;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OGMessageItemBody, { className, message, isByMe, mouseHover, isMentionEnabled: (_a3 = config2.groupChannel.enableMention) !== null && _a3 !== void 0 ? _a3 : false, isReactionEnabled: isReactionEnabledInChannel, onMessageHeightChange, isMarkdownEnabled: config2.groupChannel.enableMarkdownForUserMessage });\n  }).when(isTextMessage, function() {\n    var _a3;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextMessageItemBody, { className, message, isByMe, mouseHover, isMentionEnabled: (_a3 = config2.groupChannel.enableMention) !== null && _a3 !== void 0 ? _a3 : false, isReactionEnabled: isReactionEnabledInChannel, isMarkdownEnabled: config2.groupChannel.enableMarkdownForUserMessage });\n  }).when(function(message2) {\n    return getUIKitMessageType(message2) === messageTypes.FILE;\n  }, function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileMessageItemBody, { className, message, isByMe, mouseHover, isReactionEnabled: isReactionEnabledInChannel, onBeforeDownloadFileMessage });\n  }).when(isMultipleFilesMessage, function() {\n    var _a3;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MultipleFilesMessageItemBody, __assign({ className, message, isByMe, mouseHover, isReactionEnabled: isReactionEnabledInChannel, threadMessageKindKey, statefulFileInfoList, onBeforeDownloadFileMessage }, (_a3 = customSubcomponentsProps[\"MultipleFilesMessageItemBody\"]) !== null && _a3 !== void 0 ? _a3 : {}));\n  }).when(isVoiceMessage, function() {\n    var _a3;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VoiceMessageItemBody, { className, message, channelUrl: (_a3 = channel === null || channel === void 0 ? void 0 : channel.url) !== null && _a3 !== void 0 ? _a3 : \"\", isByMe, isReactionEnabled: isReactionEnabledInChannel });\n  }).when(isThumbnailMessage, function() {\n    var _a3;\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ThumbnailMessageItemBody, __assign({ className, message, isByMe, mouseHover, isReactionEnabled: isReactionEnabledInChannel, showFileViewer, style: isMobile ? { width: \"100%\" } : {} }, (_a3 = customSubcomponentsProps[\"ThumbnailMessageItemBody\"]) !== null && _a3 !== void 0 ? _a3 : {}));\n  }).otherwise(function() {\n    return renderUnknownMessageItemBody();\n  });\n};\nvar MessageHeader = function(props) {\n  var _a2, _b2;\n  var channel = props.channel, message = props.message;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Label,\n    { className: \"sendbird-message-content__middle__sender-name\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 },\n    /**\n     * To use the latest member profile information, message.sender might be outdated\n     */\n    ((_b2 = (_a2 = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a2 === void 0 ? void 0 : _a2.find(function(member) {\n      var _a3;\n      return (member === null || member === void 0 ? void 0 : member.userId) === ((_a3 = message === null || message === void 0 ? void 0 : message.sender) === null || _a3 === void 0 ? void 0 : _a3.userId);\n    })) === null || _b2 === void 0 ? void 0 : _b2.nickname) || getSenderName(message)\n    // TODO: Divide getting profileUrl logic to utils\n  );\n};\nvar FeedbackIconButton = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var children = props.children, isSelected = props.isSelected, _a2 = props.onClick, onClick = _a2 === void 0 ? function() {\n  } : _a2, _b2 = props.disabled, disabled = _b2 === void 0 ? false : _b2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"button\",\n    { className: [\n      \"sendbird-iconbutton__feedback\",\n      isSelected ? \"sendbird-iconbutton__feedback__pressed\" : \"\",\n      disabled ? \"sendbird-iconbutton__feedback__disabled\" : \"\"\n    ].join(\" \"), ref, type: \"button\", onClick: function(e3) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(e3);\n    }, disabled },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: [\n      \"sendbird-iconbutton__feedback__inner\",\n      isSelected ? \"sendbird-iconbutton__feedback__inner__pressed\" : \"\",\n      disabled ? \"sendbird-iconbutton__feedback__inner__disabled\" : \"\"\n    ].join(\" \") }, children)\n  );\n});\nfunction MobileFeedbackMenu(props) {\n  var hideMenu = props.hideMenu, onEditFeedback = props.onEditFeedback, onRemoveFeedback = props.onRemoveFeedback;\n  var stringSet2 = useLocalization().stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    BottomSheet,\n    { onBackdropClick: hideMenu },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message__bottomsheet--feedback-options-menu\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message__bottomsheet--feedback-option\", onClick: function() {\n          hideMenu();\n          onEditFeedback();\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.EDIT_COMMENT)\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message__bottomsheet--feedback-option\", onClick: function() {\n          hideMenu();\n          onRemoveFeedback();\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ERROR }, stringSet2.REMOVE_FEEDBACK)\n      )\n    )\n  );\n}\nvar InputLabel = function(_a2) {\n  var children = _a2.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-input-label\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_1 }, children);\n};\nvar Input = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var name2 = props.name, required = props.required, disabled = props.disabled, value = props.value, placeHolder = props.placeHolder, _a2 = props.autoFocus, autoFocus = _a2 === void 0 ? false : _a2;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(value), inputValue = _b2[0], setInputValue = _b2[1];\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-input\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { className: \"sendbird-input__input\", ref, name: name2, required, disabled, value: inputValue, onChange: function(e3) {\n      setInputValue(e3.target.value);\n    }, autoFocus }),\n    placeHolder && !inputValue && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-input__placeholder\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, placeHolder)\n  );\n});\nfunction MessageFeedbackModal(props) {\n  var _a2, _b2;\n  var selectedFeedback = props.selectedFeedback, message = props.message, onClose = props.onClose, onSubmit = props.onSubmit, onUpdate = props.onUpdate, onRemove = props.onRemove;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var isMobile = useMediaQueryContext().isMobile;\n  var isEdit = (message === null || message === void 0 ? void 0 : message.myFeedback) && selectedFeedback === message.myFeedback.rating;\n  var hasComment = (_a2 = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _a2 === void 0 ? void 0 : _a2.comment;\n  var onSubmitWrapper = function() {\n    var _a3, _b3, _c;\n    if (!selectedFeedback)\n      return;\n    var comment = (_b3 = (_a3 = inputRef.current) === null || _a3 === void 0 ? void 0 : _a3.value) !== null && _b3 !== void 0 ? _b3 : \"\";\n    if (isEdit) {\n      if (comment !== ((_c = message.myFeedback) === null || _c === void 0 ? void 0 : _c.comment)) {\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(selectedFeedback, comment);\n      } else {\n        onClose === null || onClose === void 0 ? void 0 : onClose();\n      }\n    } else if (!message.myFeedback) {\n      onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit(selectedFeedback, comment);\n    }\n  };\n  var modalRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var inputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var onKeyDown = useKeyDown(modalRef, {\n    Enter: function() {\n      return onSubmitWrapper();\n    },\n    Escape: function() {\n      return onClose === null || onClose === void 0 ? void 0 : onClose();\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { onKeyDown },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Modal,\n      { contentClassName: \"sendbird-message-feedback-modal-content__mobile\", type: ButtonTypes.PRIMARY, onCancel: onClose, onSubmit: function() {\n        onSubmitWrapper();\n      }, submitText: stringSet2.BUTTON__SUBMIT, renderHeader: function() {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-modal__header\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1, className: \"sendbird-message-feedback-modal-header\" }, stringSet2.FEEDBACK_MODAL_TITLE)\n        );\n      }, customFooter: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message-feedback-modal-footer__root\" },\n        !isMobile && (message === null || message === void 0 ? void 0 : message.myFeedback) && selectedFeedback === message.myFeedback.rating ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { type: ButtonTypes.WARNING, onClick: onRemove, labelType: LabelTypography.BUTTON_3 }, stringSet2.BUTTON__REMOVE_FEEDBACK) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-message-feedback-modal-footer__right-content\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Button,\n            { type: ButtonTypes.SECONDARY, onClick: onClose },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_3, color: LabelColors.ONBACKGROUND_1 }, stringSet2.BUTTON__CANCEL)\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Button,\n            { onClick: function() {\n              return onSubmitWrapper();\n            } },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_3, color: LabelColors.ONCONTENT_1 }, hasComment ? stringSet2.BUTTON__SAVE : stringSet2.BUTTON__SUBMIT)\n          )\n        )\n      ) },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message-feedback-modal-body__root\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Input, { name: \"sendbird-message-feedback-modal-body__root\", ref: inputRef, value: isEdit ? (_b2 = message.myFeedback) === null || _b2 === void 0 ? void 0 : _b2.comment : void 0, placeHolder: stringSet2.FEEDBACK_CONTENT_PLACEHOLDER, autoFocus: true })\n      )\n    )\n  );\n}\nfunction useElementObserver(selector, targetElement) {\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isElementMounted = _a2[0], setIsElementMounted = _a2[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var targetElements = Array.isArray(targetElement) ? targetElement : [targetElement];\n    var updateElementState = function() {\n      var _a3;\n      var elements = targetElements === null || targetElements === void 0 ? void 0 : targetElements.map(function(target) {\n        return target === null || target === void 0 ? void 0 : target.querySelector(selector);\n      });\n      setIsElementMounted((_a3 = elements === null || elements === void 0 ? void 0 : elements.some(function(element2) {\n        return !!element2;\n      })) !== null && _a3 !== void 0 ? _a3 : false);\n    };\n    updateElementState();\n    var observerCallback = function(mutations) {\n      mutations.forEach(function(mutation) {\n        if (mutation.addedNodes.length || mutation.removedNodes.length) {\n          Array.from(mutation.addedNodes).forEach(function(node2) {\n            if (node2.nodeType === Node.ELEMENT_NODE && node2.matches(selector)) {\n              setIsElementMounted(true);\n            }\n          });\n          Array.from(mutation.removedNodes).forEach(function(node2) {\n            if (node2.nodeType === Node.ELEMENT_NODE && node2.matches(selector)) {\n              setIsElementMounted(false);\n            }\n          });\n        }\n      });\n    };\n    var observer = new MutationObserver(observerCallback);\n    var observerOptions = {\n      childList: true,\n      // Observe addition and removal of child nodes\n      subtree: true\n      // Observe the entire subtree\n    };\n    targetElements === null || targetElements === void 0 ? void 0 : targetElements.forEach(function(target) {\n      if (target)\n        observer.observe(target, observerOptions);\n    });\n    return function() {\n      observer.disconnect();\n    };\n  }, [selector, targetElement]);\n  return isElementMounted;\n}\nvar SbFeedbackStatus;\n(function(SbFeedbackStatus2) {\n  SbFeedbackStatus2[\"NOT_APPLICABLE\"] = \"NOT_APPLICABLE\";\n  SbFeedbackStatus2[\"NO_FEEDBACK\"] = \"NO_FEEDBACK\";\n  SbFeedbackStatus2[\"SUBMITTED\"] = \"SUBMITTED\";\n})(SbFeedbackStatus || (SbFeedbackStatus = {}));\nfunction MessageContentForTemplateMessage(props) {\n  var _a2, _b2, _c;\n  var channel = props.channel, message = props.message, showFileViewer = props.showFileViewer, onMessageHeightChange = props.onMessageHeightChange, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, renderSenderProfile = props.renderSenderProfile, renderMessageHeader = props.renderMessageHeader, renderMessageBody = props.renderMessageBody, isByMe = props.isByMe, displayThreadReplies = props.displayThreadReplies, mouseHover = props.mouseHover, isMobile = props.isMobile, isReactionEnabledInChannel = props.isReactionEnabledInChannel, hoveredMenuClassName = props.hoveredMenuClassName, templateType = props.templateType, useReplying = props.useReplying;\n  var config2 = useSendbird().state.config;\n  var dateLocale = useLocalization().dateLocale;\n  var uiContainerTypeClassName = (_a2 = uiContainerType[templateType]) !== null && _a2 !== void 0 ? _a2 : \"\";\n  var senderProfile = renderSenderProfile(__assign(__assign({}, props), { chainBottom: false, className: \"\", isByMe, displayThreadReplies }));\n  var messageHeader = renderMessageHeader(props);\n  var messageBody = renderMessageBody({\n    message,\n    channel,\n    showFileViewer,\n    onMessageHeightChange,\n    mouseHover,\n    isMobile,\n    config: config2,\n    isReactionEnabledInChannel,\n    isByMe,\n    onBeforeDownloadFileMessage\n  });\n  var timeStamp = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: classnames(\"sendbird-message-content__middle__body-container__created-at\", \"right\", hoveredMenuClassName, uiContainerTypeClassName), type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, \"p\", {\n    locale: dateLocale\n  }));\n  var templateData = (_b2 = message.extendedMessagePayload) === null || _b2 === void 0 ? void 0 : _b2[MESSAGE_TEMPLATE_KEY];\n  var _d = (_c = templateData === null || templateData === void 0 ? void 0 : templateData.container_options) !== null && _c !== void 0 ? _c : {}, _e2 = _d.profile, profile = _e2 === void 0 ? true : _e2, _f = _d.time, time = _f === void 0 ? true : _f, _g2 = _d.nickname, nickname = _g2 === void 0 ? true : _g2;\n  var hasContainerHeader = profile || nickname;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-message-content__sendbird-ui-container-type__default__root\" },\n    !isByMe && hasContainerHeader && !useReplying && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message-content__sendbird-ui-container-type__default__header-container\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-message-content__sendbird-ui-container-type__default__header-container__left__profile\" }, profile && senderProfile),\n      nickname && messageHeader\n    ),\n    messageBody,\n    !isByMe && time && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-message-content__sendbird-ui-container-type__default__bottom\" }, timeStamp)\n  );\n}\nfunction MessageContent(props) {\n  var _this = this;\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j, _k, _l, _m, _o;\n  var className = props.className, userId = props.userId, channel = props.channel, message = props.message, _p = props.disabled, disabled = _p === void 0 ? false : _p, _q = props.chainTop, chainTop = _q === void 0 ? false : _q, _r2 = props.chainBottom, chainBottom = _r2 === void 0 ? false : _r2, _s2 = props.isReactionEnabled, isReactionEnabled = _s2 === void 0 ? false : _s2, _t2 = props.disableQuoteMessage, disableQuoteMessage = _t2 === void 0 ? false : _t2, replyType = props.replyType, threadReplySelectType = props.threadReplySelectType, nicknamesMap = props.nicknamesMap, emojiContainer = props.emojiContainer, scrollToMessage = props.scrollToMessage, showEdit = props.showEdit, showRemove = props.showRemove, showFileViewer = props.showFileViewer, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, toggleReaction = props.toggleReaction, setQuoteMessage = props.setQuoteMessage, onReplyInThread = props.onReplyInThread, onQuoteMessageClick = props.onQuoteMessageClick, onMessageHeightChange = props.onMessageHeightChange, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, filterEmojiCategoryIds = props.filterEmojiCategoryIds;\n  var _u = deleteNullish(props), _v = _u.renderSenderProfile, renderSenderProfile = _v === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageProfile, __assign({}, props2));\n  } : _v, _w = _u.renderMessageBody, renderMessageBody = _w === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageBody, __assign({}, props2));\n  } : _w, _x = _u.renderMessageHeader, renderMessageHeader = _x === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageHeader, __assign({}, props2));\n  } : _x, _y = _u.renderMessageMenu, renderMessageMenu = _y === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageMenu, __assign({}, props2));\n  } : _y, _z = _u.renderEmojiMenu, renderEmojiMenu = _z === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageEmojiMenu, __assign({}, props2));\n  } : _z, _0 = _u.renderEmojiReactions, renderEmojiReactions = _0 === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmojiReactions, __assign({}, props2));\n  } : _0, _1 = _u.renderMobileMenuOnLongPress, renderMobileMenuOnLongPress = _1 === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MobileMenu, __assign({}, props2));\n  } : _1;\n  var _2 = useLocalization(), dateLocale = _2.dateLocale, stringSet2 = _2.stringSet;\n  var _3 = useSendbird().state, config2 = _3.config, eventHandlers = _3.eventHandlers;\n  var logger = config2.logger;\n  var onPressUserProfileHandler = (_a2 = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.reaction) === null || _a2 === void 0 ? void 0 : _a2.onPressUserProfile;\n  var contentRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var threadRepliesRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var feedbackButtonsRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var isMobile = useMediaQueryContext().isMobile;\n  var _4 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showMenu = _4[0], setShowMenu = _4[1];\n  var _5 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), mouseHover = _5[0], setMouseHover = _5[1];\n  var isMenuMounted = useElementObserver(\"#\".concat(getObservingId(message.messageId), \".\").concat(MENU_OBSERVING_CLASS_NAME), [\n    document.getElementById(MENU_ROOT_ID),\n    document.getElementById(EMOJI_MENU_ROOT_ID)\n  ]);\n  var _6 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showFeedbackOptionsMenu = _6[0], setShowFeedbackOptionsMenu = _6[1];\n  var _7 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showFeedbackModal = _7[0], setShowFeedbackModal = _7[1];\n  var _8 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), feedbackFailedText = _8[0], setFeedbackFailedText = _8[1];\n  var isByMe = userId === ((_b2 = message === null || message === void 0 ? void 0 : message.sender) === null || _b2 === void 0 ? void 0 : _b2.userId) || (message === null || message === void 0 ? void 0 : message.sendingStatus) === \"pending\" || (message === null || message === void 0 ? void 0 : message.sendingStatus) === \"failed\";\n  var isByMeClassName = isByMe ? \"outgoing\" : \"incoming\";\n  var chainTopClassName = chainTop ? \"chain-top\" : \"\";\n  var isReactionEnabledInChannel = isReactionEnabled && !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral);\n  var isReactionEnabledClassName = isReactionEnabledInChannel ? \"use-reactions\" : \"\";\n  var hoveredMenuClassName = isMenuMounted ? \"sendbird-mouse-hover\" : \"\";\n  var useReplying = !!((replyType === \"QUOTE_REPLY\" || replyType === \"THREAD\") && (message === null || message === void 0 ? void 0 : message.parentMessageId) && (message === null || message === void 0 ? void 0 : message.parentMessage) && !disableQuoteMessage);\n  var useReplyingClassName = useReplying ? \"use-quote\" : \"\";\n  var displayThreadReplies = ((_c = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _c === void 0 ? void 0 : _c.replyCount) && message.threadInfo.replyCount > 0 && replyType === \"THREAD\";\n  var isFeedbackMessage = !isByMe && !!(message === null || message === void 0 ? void 0 : message.myFeedbackStatus) && message.myFeedbackStatus !== SbFeedbackStatus.NOT_APPLICABLE;\n  var isFeedbackEnabled = !!((_d = config2 === null || config2 === void 0 ? void 0 : config2.groupChannel) === null || _d === void 0 ? void 0 : _d.enableFeedback) && isFeedbackMessage;\n  var hasFeedback = (_e2 = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _e2 === void 0 ? void 0 : _e2.rating;\n  var isNotSpecialMessage = !isTemplateMessage(message) && !isFormMessage(message);\n  var showLongPressMenu = isNotSpecialMessage && isMobile;\n  var showOutgoingMenu = isNotSpecialMessage && isByMe && !isMobile;\n  var showThreadReplies = isNotSpecialMessage && displayThreadReplies;\n  var showRightContent = isNotSpecialMessage && !isByMe && !isMobile;\n  var getTotalBottom = function() {\n    var sum = 2;\n    if (threadRepliesRef.current) {\n      sum += 4 + threadRepliesRef.current.clientHeight;\n    }\n    if (feedbackButtonsRef.current) {\n      sum += 4 + feedbackButtonsRef.current.clientHeight;\n    }\n    return sum > 0 ? sum + \"px\" : \"\";\n  };\n  var onCloseFeedbackForm = function() {\n    setShowFeedbackModal(false);\n  };\n  var openFeedbackFormOrMenu = function(hasFeedback2) {\n    if (hasFeedback2 === void 0) {\n      hasFeedback2 = false;\n    }\n    if (isMobile && hasFeedback2) {\n      setShowFeedbackOptionsMenu(true);\n    } else {\n      setShowFeedbackModal(true);\n    }\n  };\n  var longPress = useLongPress({\n    onLongPress: function() {\n      if (showLongPressMenu) {\n        setShowMenu(true);\n      }\n    },\n    onClick: noop$4\n  }, {\n    delay: 300,\n    shouldPreventDefault: false\n  });\n  if (isAdminMessage(message)) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AdminMessage, { message });\n  }\n  if (isTemplateMessage(message)) {\n    var templatePayload = message.extendedMessagePayload[MESSAGE_TEMPLATE_KEY];\n    if (isValidTemplateMessageType(templatePayload)) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageContentForTemplateMessage, __assign({}, props, { renderSenderProfile, renderMessageHeader, renderMessageBody, isByMe, displayThreadReplies, mouseHover, isMobile, isReactionEnabledInChannel, hoveredMenuClassName, templateType: templatePayload[\"type\"], useReplying }));\n    }\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\n      className !== null && className !== void 0 ? className : \"\",\n      \"sendbird-message-content\",\n      isByMeClassName\n    ]), onMouseOver: function() {\n      return setMouseHover(true);\n    }, onMouseLeave: function() {\n      return setMouseHover(false);\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: classnames(\"sendbird-message-content__left\", isReactionEnabledClassName, isByMeClassName, useReplyingClassName), \"data-testid\": \"sendbird-message-content__left\" },\n      renderSenderProfile(__assign(__assign({}, props), { className: \"sendbird-message-content__left__avatar\", isByMe, displayThreadReplies, bottom: getTotalBottom() })),\n      showOutgoingMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: classnames(\"sendbird-message-content-menu\", isReactionEnabledClassName, hoveredMenuClassName, isByMeClassName) },\n        renderMessageMenu({\n          channel,\n          message,\n          isByMe,\n          replyType,\n          showEdit,\n          showRemove,\n          resendMessage,\n          setQuoteMessage,\n          onReplyInThread: function(_a3) {\n            var _b3, _c2;\n            var message2 = _a3.message;\n            if (threadReplySelectType === ThreadReplySelectType.THREAD) {\n              onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message2 });\n            } else if (threadReplySelectType === ThreadReplySelectType.PARENT) {\n              scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage((_c2 = (_b3 = message2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.createdAt) !== null && _c2 !== void 0 ? _c2 : 0, message2.parentMessageId);\n            }\n          },\n          deleteMessage\n        }),\n        isReactionEnabledInChannel && renderEmojiMenu({\n          message,\n          userId,\n          emojiContainer,\n          toggleReaction,\n          filterEmojiCategoryIds\n        })\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      __assign({ className: classnames(\"sendbird-message-content__middle\"), \"data-testid\": \"sendbird-message-content__middle\" }, isMobile ? __assign({}, longPress) : {}, { ref: contentRef }),\n      !isByMe && !chainTop && !useReplying && renderMessageHeader(props),\n      useReplying ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: classnames(\"sendbird-message-content__middle__quote-message\", isByMe ? \"outgoing\" : \"incoming\", useReplyingClassName), \"data-testid\": \"sendbird-message-content__middle__quote-message\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(QuoteMessage, { className: \"sendbird-message-content__middle__quote-message__quote\", message, userId, isByMe, isUnavailable: ((_f = channel === null || channel === void 0 ? void 0 : channel.messageOffsetTimestamp) !== null && _f !== void 0 ? _f : 0) > ((_h = (_g2 = message.parentMessage) === null || _g2 === void 0 ? void 0 : _g2.createdAt) !== null && _h !== void 0 ? _h : 0), onClick: function() {\n          var _a3;\n          if (replyType === \"THREAD\" && threadReplySelectType === ThreadReplySelectType.THREAD) {\n            onQuoteMessageClick === null || onQuoteMessageClick === void 0 ? void 0 : onQuoteMessageClick({ message });\n          }\n          if ((replyType === \"QUOTE_REPLY\" || replyType === \"THREAD\" && threadReplySelectType === ThreadReplySelectType.PARENT) && ((_a3 = message === null || message === void 0 ? void 0 : message.parentMessage) === null || _a3 === void 0 ? void 0 : _a3.createdAt) && (message === null || message === void 0 ? void 0 : message.parentMessageId)) {\n            scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage(message.parentMessage.createdAt, message.parentMessageId);\n          }\n        } })\n      ) : null,\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: classnames(\"sendbird-message-content__middle__body-container\") },\n        isByMe && !chainBottom && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: classnames(\"sendbird-message-content__middle__body-container__created-at\", \"left\", hoveredMenuClassName) },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-message-content__middle__body-container__created-at__component-container\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageStatus, { message, channel })\n          )\n        ),\n        renderMessageBody({\n          message,\n          channel,\n          showFileViewer,\n          onMessageHeightChange,\n          mouseHover,\n          isMobile,\n          config: config2,\n          isReactionEnabledInChannel,\n          isByMe,\n          onBeforeDownloadFileMessage\n        }),\n        isReactionEnabledInChannel && ((_j = message === null || message === void 0 ? void 0 : message.reactions) === null || _j === void 0 ? void 0 : _j.length) > 0 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: classnames(\"sendbird-message-content-reactions\", isMultipleFilesMessage(message) ? \"image-grid\" : isByMe && !isThumbnailMessage(message) && !isOGMessage(message) && \"primary\", mouseHover && \"mouse-hover\") }, renderEmojiReactions({\n          userId,\n          message,\n          channel,\n          isByMe,\n          // @ts-ignore\n          emojiContainer: emojiContainer !== null && emojiContainer !== void 0 ? emojiContainer : new Ct({}),\n          memberNicknamesMap: nicknamesMap !== null && nicknamesMap !== void 0 ? nicknamesMap : /* @__PURE__ */ new Map(),\n          toggleReaction,\n          onPressUserProfile: onPressUserProfileHandler,\n          filterEmojiCategoryIds\n        })),\n        !isByMe && !chainBottom && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: classnames(\"sendbird-message-content__middle__body-container__created-at\", \"right\", hoveredMenuClassName), type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT, {\n          locale: dateLocale\n        }))\n      ),\n      showThreadReplies && (message === null || message === void 0 ? void 0 : message.threadInfo) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ThreadReplies$1, { className: \"sendbird-message-content__middle__thread-replies\", threadInfo: message === null || message === void 0 ? void 0 : message.threadInfo, onClick: function() {\n        return onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message });\n      }, ref: threadRepliesRef }),\n      isFeedbackEnabled && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-message-content__middle__body-container__feedback-buttons-container\", ref: feedbackButtonsRef },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          FeedbackIconButton,\n          { isSelected: ((_k = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _k === void 0 ? void 0 : _k.rating) === Le$1.GOOD, onClick: function() {\n            return __awaiter$5(_this, void 0, void 0, function() {\n              var error_1;\n              var _a3, _b3;\n              return __generator(this, function(_c2) {\n                switch (_c2.label) {\n                  case 0:\n                    if (!!hasFeedback) return [3, 5];\n                    _c2.label = 1;\n                  case 1:\n                    _c2.trys.push([1, 3, , 4]);\n                    return [4, message.submitFeedback({\n                      rating: Le$1.GOOD\n                    })];\n                  case 2:\n                    _c2.sent();\n                    openFeedbackFormOrMenu();\n                    return [3, 4];\n                  case 3:\n                    error_1 = _c2.sent();\n                    (_b3 = (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.logger) === null || _a3 === void 0 ? void 0 : _a3.error) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, \"Channel: Submit feedback failed.\", error_1);\n                    setFeedbackFailedText(stringSet2.FEEDBACK_FAILED_SUBMIT);\n                    return [3, 4];\n                  case 4:\n                    return [3, 6];\n                  case 5:\n                    openFeedbackFormOrMenu(true);\n                    _c2.label = 6;\n                  case 6:\n                    return [\n                      2\n                      /*return*/\n                    ];\n                }\n              });\n            });\n          }, disabled: !!(message === null || message === void 0 ? void 0 : message.myFeedback) && message.myFeedback.rating !== Le$1.GOOD },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.FEEDBACK_LIKE, width: \"24px\", height: \"24px\" })\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          FeedbackIconButton,\n          { isSelected: ((_l = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _l === void 0 ? void 0 : _l.rating) === Le$1.BAD, onClick: function() {\n            return __awaiter$5(_this, void 0, void 0, function() {\n              var error_2;\n              var _a3, _b3;\n              return __generator(this, function(_c2) {\n                switch (_c2.label) {\n                  case 0:\n                    if (!!hasFeedback) return [3, 5];\n                    _c2.label = 1;\n                  case 1:\n                    _c2.trys.push([1, 3, , 4]);\n                    return [4, message.submitFeedback({\n                      rating: Le$1.BAD\n                    })];\n                  case 2:\n                    _c2.sent();\n                    openFeedbackFormOrMenu();\n                    return [3, 4];\n                  case 3:\n                    error_2 = _c2.sent();\n                    (_b3 = (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.logger) === null || _a3 === void 0 ? void 0 : _a3.error) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, \"Channel: Submit feedback failed.\", error_2);\n                    setFeedbackFailedText(stringSet2.FEEDBACK_FAILED_SUBMIT);\n                    return [3, 4];\n                  case 4:\n                    return [3, 6];\n                  case 5:\n                    openFeedbackFormOrMenu(true);\n                    _c2.label = 6;\n                  case 6:\n                    return [\n                      2\n                      /*return*/\n                    ];\n                }\n              });\n            });\n          }, disabled: !!(message === null || message === void 0 ? void 0 : message.myFeedback) && message.myFeedback.rating !== Le$1.BAD },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.FEEDBACK_DISLIKE, width: \"24px\", height: \"24px\" })\n        )\n      )\n    ),\n    showRightContent && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: classnames(\"sendbird-message-content__right\", chainTopClassName, isReactionEnabledClassName, useReplyingClassName), \"data-testid\": \"sendbird-message-content__right\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: classnames(\"sendbird-message-content-menu\", chainTopClassName, hoveredMenuClassName, isByMeClassName) },\n        isReactionEnabledInChannel && renderEmojiMenu({\n          className: \"sendbird-message-content-menu__reaction-menu\",\n          message,\n          userId,\n          emojiContainer,\n          toggleReaction,\n          filterEmojiCategoryIds\n        }),\n        renderMessageMenu({\n          className: \"sendbird-message-content-menu__normal-menu\",\n          channel,\n          message,\n          isByMe,\n          replyType,\n          showRemove,\n          resendMessage,\n          setQuoteMessage,\n          onReplyInThread: function(_a3) {\n            var _b3, _c2;\n            var message2 = _a3.message;\n            if (threadReplySelectType === ThreadReplySelectType.THREAD) {\n              onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message2 });\n            } else if (threadReplySelectType === ThreadReplySelectType.PARENT) {\n              scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage((_c2 = (_b3 = message2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.createdAt) !== null && _c2 !== void 0 ? _c2 : 0, message2.parentMessageId);\n            }\n          },\n          deleteMessage\n        })\n      )\n    ),\n    showMenu && isSendableMessage(message) && channel && renderMobileMenuOnLongPress({\n      parentRef: contentRef,\n      channel,\n      hideMenu: function() {\n        setShowMenu(false);\n      },\n      message,\n      isReactionEnabled: isReactionEnabledInChannel,\n      isByMe,\n      userId,\n      replyType,\n      disabled,\n      showRemove,\n      emojiContainer,\n      resendMessage,\n      deleteMessage,\n      setQuoteMessage,\n      toggleReaction,\n      showEdit,\n      onReplyInThread: function(_a3) {\n        var _b3;\n        var message2 = _a3.message;\n        if (threadReplySelectType === ThreadReplySelectType.THREAD) {\n          onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message2 });\n        } else if (threadReplySelectType === ThreadReplySelectType.PARENT) {\n          scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage(((_b3 = message2 === null || message2 === void 0 ? void 0 : message2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.createdAt) || 0, (message2 === null || message2 === void 0 ? void 0 : message2.parentMessageId) || 0);\n        }\n      },\n      onDownloadClick: function(e3) {\n        return __awaiter$5(_this, void 0, void 0, function() {\n          var allowDownload, err_1;\n          var _a3, _b3;\n          return __generator(this, function(_c2) {\n            switch (_c2.label) {\n              case 0:\n                if (!onBeforeDownloadFileMessage) {\n                  return [\n                    2\n                    /*return*/\n                  ];\n                }\n                _c2.label = 1;\n              case 1:\n                _c2.trys.push([1, 3, , 4]);\n                return [4, onBeforeDownloadFileMessage({ message })];\n              case 2:\n                allowDownload = _c2.sent();\n                if (!allowDownload) {\n                  e3.preventDefault();\n                  (_a3 = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"MessageContent: Not allowed to download.\");\n                }\n                return [3, 4];\n              case 3:\n                err_1 = _c2.sent();\n                (_b3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b3 === void 0 ? void 0 : _b3.call(logger, \"MessageContent: Error occurred while determining download continuation:\", err_1);\n                return [3, 4];\n              case 4:\n                return [\n                  2\n                  /*return*/\n                ];\n            }\n          });\n        });\n      }\n    }),\n    ((_m = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _m === void 0 ? void 0 : _m.rating) && showFeedbackOptionsMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MobileFeedbackMenu, { hideMenu: function() {\n      setShowFeedbackOptionsMenu(false);\n    }, onEditFeedback: function() {\n      setShowFeedbackOptionsMenu(false);\n      setShowFeedbackModal(true);\n    }, onRemoveFeedback: function() {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var error_3;\n        var _a3, _b3;\n        return __generator(this, function(_c2) {\n          switch (_c2.label) {\n            case 0:\n              _c2.trys.push([0, 3, , 4]);\n              if (!(message.myFeedback !== null)) return [3, 2];\n              return [4, message.deleteFeedback(message.myFeedback.id)];\n            case 1:\n              _c2.sent();\n              _c2.label = 2;\n            case 2:\n              return [3, 4];\n            case 3:\n              error_3 = _c2.sent();\n              (_b3 = (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.logger) === null || _a3 === void 0 ? void 0 : _a3.error) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, \"Channel: Delete feedback failed.\", error_3);\n              setFeedbackFailedText(stringSet2.FEEDBACK_FAILED_DELETE);\n              return [3, 4];\n            case 4:\n              setShowFeedbackOptionsMenu(false);\n              return [\n                2\n                /*return*/\n              ];\n          }\n        });\n      });\n    } }),\n    ((_o = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _o === void 0 ? void 0 : _o.rating) && showFeedbackModal && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageFeedbackModal, { selectedFeedback: message.myFeedback.rating, message, onUpdate: function(selectedFeedback, comment) {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var newFeedback, error_4;\n        var _a3, _b3;\n        return __generator(this, function(_c2) {\n          switch (_c2.label) {\n            case 0:\n              if (!(message.myFeedback !== null)) return [3, 4];\n              newFeedback = new Qe$1({\n                id: message.myFeedback.id,\n                rating: selectedFeedback,\n                comment\n              });\n              _c2.label = 1;\n            case 1:\n              _c2.trys.push([1, 3, , 4]);\n              return [4, message.updateFeedback(newFeedback)];\n            case 2:\n              _c2.sent();\n              return [3, 4];\n            case 3:\n              error_4 = _c2.sent();\n              (_b3 = (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.logger) === null || _a3 === void 0 ? void 0 : _a3.error) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, \"Channel: Update feedback failed.\", error_4);\n              setFeedbackFailedText(stringSet2.FEEDBACK_FAILED_SAVE);\n              return [3, 4];\n            case 4:\n              onCloseFeedbackForm();\n              return [\n                2\n                /*return*/\n              ];\n          }\n        });\n      });\n    }, onClose: onCloseFeedbackForm, onRemove: function() {\n      return __awaiter$5(_this, void 0, void 0, function() {\n        var error_5;\n        var _a3, _b3;\n        return __generator(this, function(_c2) {\n          switch (_c2.label) {\n            case 0:\n              _c2.trys.push([0, 3, , 4]);\n              if (!(message.myFeedback !== null)) return [3, 2];\n              return [4, message.deleteFeedback(message.myFeedback.id)];\n            case 1:\n              _c2.sent();\n              _c2.label = 2;\n            case 2:\n              return [3, 4];\n            case 3:\n              error_5 = _c2.sent();\n              (_b3 = (_a3 = config2 === null || config2 === void 0 ? void 0 : config2.logger) === null || _a3 === void 0 ? void 0 : _a3.error) === null || _b3 === void 0 ? void 0 : _b3.call(_a3, \"Channel: Delete feedback failed.\", error_5);\n              setFeedbackFailedText(stringSet2.FEEDBACK_FAILED_DELETE);\n              return [3, 4];\n            case 4:\n              onCloseFeedbackForm();\n              return [\n                2\n                /*return*/\n              ];\n          }\n        });\n      });\n    } }),\n    feedbackFailedText && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageFeedbackFailedModal, { text: feedbackFailedText, onCancel: function() {\n      setFeedbackFailedText(\"\");\n    } })\n  );\n}\nvar ReplyItem = function(_a2) {\n  var value = _a2.value, onClickReply = _a2.onClickReply, _b2 = _a2.type, type = _b2 === void 0 ? \"vertical\" : _b2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-suggested-replies__option \".concat(type), id: value, onClick: function(e3) {\n    return onClickReply(e3, value);\n  } }, value);\n};\nvar SuggestedReplies$1 = function(_a2) {\n  var replyOptions = _a2.replyOptions, onSendMessage = _a2.onSendMessage, _b2 = _a2.type, type = _b2 === void 0 ? \"vertical\" : _b2;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), replied = _c[0], setReplied = _c[1];\n  var onClickReply = function(event, option) {\n    event.preventDefault();\n    onSendMessage({ message: option });\n    setReplied(true);\n  };\n  if (replied) {\n    return null;\n  }\n  var children = replyOptions.map(function(option, index2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ReplyItem, { key: index2, value: option, onClickReply, type });\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-suggested-replies \".concat(type) }, children);\n};\nfunction SuggestedUserMentionItem(props) {\n  var member = props.member, _a2 = props.isFocused, isFocused = _a2 === void 0 ? false : _a2, parentScrollRef = props.parentScrollRef, onClick = props.onClick, onMouseOver = props.onMouseOver, onMouseMove = props.onMouseMove, renderUserMentionItem = props.renderUserMentionItem;\n  var scrollRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (isFocused && (parentScrollRef === null || parentScrollRef === void 0 ? void 0 : parentScrollRef.current) != null && (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) != null && (parentScrollRef.current.scrollTop >= scrollRef.current.offsetTop || parentScrollRef.current.scrollTop + parentScrollRef.current.clientHeight <= scrollRef.current.offsetTop)) {\n      scrollRef.current.scrollIntoView({ block: \"nearest\", inline: \"nearest\" });\n    }\n  }, [isFocused]);\n  var customMentionItem = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    if (renderUserMentionItem) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-mention-suggest-list__user-item\", onClick: function(event) {\n        return onClick === null || onClick === void 0 ? void 0 : onClick({ event, member, itemRef: scrollRef });\n      }, onMouseOver: function(event) {\n        return onMouseOver === null || onMouseOver === void 0 ? void 0 : onMouseOver({ event, member, itemRef: scrollRef });\n      }, onMouseMove: function(event) {\n        return onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove({ event, member, itemRef: scrollRef });\n      }, key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(), ref: scrollRef }, renderUserMentionItem({ user: member }));\n    }\n  }, [renderUserMentionItem]);\n  if (customMentionItem) {\n    return customMentionItem;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-mention-suggest-list__user-item\", isFocused && \"focused\"), onClick: function(event) {\n      return onClick === null || onClick === void 0 ? void 0 : onClick({ event, member, itemRef: scrollRef });\n    }, onMouseOver: function(event) {\n      return onMouseOver === null || onMouseOver === void 0 ? void 0 : onMouseOver({ event, member, itemRef: scrollRef });\n    }, onMouseMove: function(event) {\n      return onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove({ event, member, itemRef: scrollRef });\n    }, key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(), ref: scrollRef },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-mention-suggest-list__user-item__avatar\", src: member === null || member === void 0 ? void 0 : member.profileUrl, alt: \"user-profile\", width: \"24px\", height: \"24px\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-mention-suggest-list__user-item__nickname\", testID: \"sendbird-mention-suggest-list__user-item__nickname\", type: LabelTypography.SUBTITLE_2, color: (member === null || member === void 0 ? void 0 : member.nickname) ? LabelColors.ONBACKGROUND_1 : LabelColors.ONBACKGROUND_3 }, (member === null || member === void 0 ? void 0 : member.nickname) || (stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.MENTION_NAME__NO_NAME)),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-mention-suggest-list__user-item__user-id\", testID: \"sendbird-mention-suggest-list__user-item__user-id\", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, member === null || member === void 0 ? void 0 : member.userId)\n  );\n}\nfunction fetchMembersFromChannel(currentUserId, channel, maxSuggestionCount, searchString) {\n  return __awaiter$5(this, void 0, void 0, function() {\n    return __generator(this, function(_a2) {\n      return [2, channel.members.sort(function(a4, b3) {\n        var _a3;\n        return (_a3 = a4.nickname) === null || _a3 === void 0 ? void 0 : _a3.localeCompare(b3.nickname);\n      }).filter(function(member) {\n        var _a3;\n        return ((_a3 = member.nickname) === null || _a3 === void 0 ? void 0 : _a3.toLowerCase().startsWith(searchString.toLowerCase())) && member.userId !== currentUserId && member.isActive;\n      }).slice(0, maxSuggestionCount)];\n    });\n  });\n}\nfunction fetchMembersFromQuery(currentUserId, channel, maxSuggestionCount, searchString) {\n  return __awaiter$5(this, void 0, void 0, function() {\n    var query;\n    return __generator(this, function(_a2) {\n      query = channel.createMemberListQuery({\n        limit: maxSuggestionCount + 1,\n        // because current user could be included\n        nicknameStartsWithFilter: searchString\n      });\n      return [2, query.next().then(function(memberList) {\n        return memberList.filter(function(member) {\n          return currentUserId !== (member === null || member === void 0 ? void 0 : member.userId);\n        }).slice(0, maxSuggestionCount);\n      })];\n    });\n  });\n}\nvar DEBOUNCING_TIME = 300;\nvar SuggestedMentionListView = function(props) {\n  var _a2, _b2, _c;\n  var className = props.className, currentChannel = props.currentChannel, _d = props.targetNickname, targetNickname = _d === void 0 ? \"\" : _d, onUserItemClick = props.onUserItemClick, onFocusItemChange = props.onFocusItemChange, onFetchUsers = props.onFetchUsers, renderUserMentionItem = props.renderUserMentionItem, inputEvent = props.inputEvent, _e2 = props.ableAddMention, ableAddMention = _e2 === void 0 ? true : _e2, _f = props.maxMentionCount, maxMentionCount = _f === void 0 ? MAX_USER_MENTION_COUNT : _f, _g2 = props.maxSuggestionCount, maxSuggestionCount = _g2 === void 0 ? MAX_USER_SUGGESTION_COUNT : _g2;\n  var state = useSendbird().state;\n  var config2 = state.config, stores2 = state.stores;\n  var logger = config2.logger;\n  var currentUserId = ((_c = (_b2 = (_a2 = stores2 === null || stores2 === void 0 ? void 0 : stores2.sdkStore) === null || _a2 === void 0 ? void 0 : _a2.sdk) === null || _b2 === void 0 ? void 0 : _b2.currentUser) === null || _c === void 0 ? void 0 : _c.userId) || \"\";\n  var scrollRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var stringSet2 = useLocalization().stringSet;\n  var _h = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), timer = _h[0], setTimer = _h[1];\n  var _j = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), searchString = _j[0], setSearchString = _j[1];\n  var _k = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), lastSearchString = _k[0], setLastSearchString = _k[1];\n  var _l = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), currentFocusedMember = _l[0], setCurrentFocusedMember = _l[1];\n  var _m = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), currentMemberList = _m[0], setCurrentMemberList = _m[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    clearTimeout(timer !== null && timer !== void 0 ? timer : void 0);\n    setTimer(setTimeout(function() {\n      setSearchString(targetNickname);\n    }, DEBOUNCING_TIME));\n  }, [targetNickname]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.Enter) {\n      if (currentFocusedMember && currentMemberList.length > 0) {\n        onUserItemClick === null || onUserItemClick === void 0 ? void 0 : onUserItemClick(currentFocusedMember);\n      }\n    }\n    if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.ArrowUp) {\n      var currentUserIndex = currentMemberList.findIndex(function(member) {\n        return (member === null || member === void 0 ? void 0 : member.userId) === (currentFocusedMember === null || currentFocusedMember === void 0 ? void 0 : currentFocusedMember.userId);\n      });\n      if (0 < currentUserIndex) {\n        setCurrentFocusedMember(currentMemberList[currentUserIndex - 1]);\n        onFocusItemChange === null || onFocusItemChange === void 0 ? void 0 : onFocusItemChange(currentMemberList[currentUserIndex - 1]);\n      }\n    }\n    if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.ArrowDown) {\n      var currentUserIndex = currentMemberList.findIndex(function(member) {\n        return (member === null || member === void 0 ? void 0 : member.userId) === (currentFocusedMember === null || currentFocusedMember === void 0 ? void 0 : currentFocusedMember.userId);\n      });\n      if (currentUserIndex < currentMemberList.length - 1) {\n        setCurrentFocusedMember(currentMemberList[currentUserIndex + 1]);\n        onFocusItemChange === null || onFocusItemChange === void 0 ? void 0 : onFocusItemChange(currentMemberList[currentUserIndex + 1]);\n      }\n    }\n  }, [inputEvent]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (lastSearchString && searchString.indexOf(lastSearchString) === 0 && currentMemberList.length === 0) {\n      return;\n    }\n    if (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isSuper) {\n      if (!(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.createMemberListQuery)) {\n        logger.warning(\"SuggestedMentionList: Creating member list query failed\");\n        return;\n      }\n    }\n    var fetcher = (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isSuper) ? fetchMembersFromQuery : fetchMembersFromChannel;\n    fetcher(currentUserId, currentChannel, maxSuggestionCount, searchString.slice(USER_MENTION_TEMP_CHAR.length)).then(function(suggestingMembers) {\n      if (suggestingMembers.length < 1) {\n        logger.info(\"SuggestedMentionList: Fetched member list is empty\");\n      } else {\n        logger.info(\"SuggestedMentionList: Fetching member list succeeded\", { memberList: suggestingMembers });\n        setCurrentFocusedMember(suggestingMembers[0]);\n      }\n      setLastSearchString(searchString);\n      onFetchUsers === null || onFetchUsers === void 0 ? void 0 : onFetchUsers(suggestingMembers);\n      setCurrentMemberList(suggestingMembers);\n    }).catch(function(error) {\n      if (error) {\n        logger.error(\"SuggestedMentionList: Fetching member list failed\", error);\n      }\n    });\n  }, [\n    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,\n    // We have to be specific like this or React would not recognize the changes in instances.\n    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members.map(function(member) {\n      return member.nickname;\n    }).join(),\n    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members.map(function(member) {\n      return member.isActive;\n    }).join(),\n    searchString,\n    maxSuggestionCount,\n    currentUserId,\n    currentMemberList.length,\n    lastSearchString\n  ]);\n  if (!ableAddMention && currentMemberList.length === 0) {\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-mention-suggest-list\", className), \"data-testid\": \"sendbird-mention-suggest-list\", key: \"sendbird-mention-suggest-list\", ref: scrollRef },\n    ableAddMention && (currentMemberList === null || currentMemberList === void 0 ? void 0 : currentMemberList.map(function(member) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedUserMentionItem, { key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(), member, isFocused: (member === null || member === void 0 ? void 0 : member.userId) === (currentFocusedMember === null || currentFocusedMember === void 0 ? void 0 : currentFocusedMember.userId), parentScrollRef: scrollRef, onClick: function(_a3) {\n        var member2 = _a3.member;\n        onUserItemClick === null || onUserItemClick === void 0 ? void 0 : onUserItemClick(member2);\n      }, onMouseOver: function(_a3) {\n        var member2 = _a3.member;\n        setCurrentFocusedMember(member2);\n      }, renderUserMentionItem });\n    })),\n    !ableAddMention && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-mention-suggest-list__notice-item\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-mention-suggest-list__notice-item__icon\", type: IconTypes.INFO, fillColor: IconColors.ON_BACKGROUND_2, width: \"20px\", height: \"20px\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-mention-suggest-list__notice-item__text\", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet2.MENTION_COUNT__OVER_LIMIT.replace(\"%d\", String(maxMentionCount)))\n    )\n  );\n};\nvar useDidMountEffect = function(func, deps) {\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), didMount = _a2[0], setDidMount = _a2[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (didMount) {\n      func();\n    } else {\n      setDidMount(true);\n    }\n  }, deps);\n};\nvar MessageView = function(props) {\n  var _a2, _b2;\n  var message = props.message, children = props.children, hasSeparator = props.hasSeparator, chainTop = props.chainTop, chainBottom = props.chainBottom, handleScroll = props.handleScroll, channel = props.channel, emojiContainer = props.emojiContainer, editInputDisabled = props.editInputDisabled, shouldRenderSuggestedReplies = props.shouldRenderSuggestedReplies, isReactionEnabled = props.isReactionEnabled, replyType = props.replyType, threadReplySelectType = props.threadReplySelectType, nicknamesMap = props.nicknamesMap, scrollToMessage = props.scrollToMessage, toggleReaction = props.toggleReaction, setQuoteMessage = props.setQuoteMessage, onQuoteMessageClick = props.onQuoteMessageClick, onReplyInThreadClick = props.onReplyInThreadClick, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, sendUserMessage = props.sendUserMessage, updateUserMessage = props.updateUserMessage, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, setAnimatedMessageId = props.setAnimatedMessageId, animatedMessageId = props.animatedMessageId, onMessageAnimated = props.onMessageAnimated, _c = props.usedInLegacy, usedInLegacy = _c === void 0 ? true : _c;\n  var _d = deleteNullish(props), renderUserMentionItem = _d.renderUserMentionItem, renderMessage = _d.renderMessage, _e2 = _d.renderMessageContent, renderMessageContent = _e2 === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageContent, __assign({}, props2));\n  } : _e2, _f = _d.renderSuggestedReplies, renderSuggestedReplies = _f === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedReplies$1, __assign({}, props2));\n  } : _f, renderCustomSeparator = _d.renderCustomSeparator, renderEditInput = _d.renderEditInput, renderFileViewer = _d.renderFileViewer, renderRemoveMessageModal = _d.renderRemoveMessageModal, filterEmojiCategoryIds = _d.filterEmojiCategoryIds;\n  var _g2 = useLocalization(), dateLocale = _g2.dateLocale, stringSet2 = _g2.stringSet;\n  var state = useSendbird().state;\n  var _h = state.config, userId = _h.userId, isOnline = _h.isOnline, userMention = _h.userMention, logger = _h.logger, groupChannel = _h.groupChannel;\n  var maxUserMentionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || MAX_USER_MENTION_COUNT;\n  var maxUserSuggestionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || MAX_USER_SUGGESTION_COUNT;\n  var _j = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showEdit = _j[0], setShowEdit = _j[1];\n  var _k = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showRemove = _k[0], setShowRemove = _k[1];\n  var _l = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showFileViewer = _l[0], setShowFileViewer = _l[1];\n  var _m = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isAnimated = _m[0], setIsAnimated = _m[1];\n  var _o = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), mentionNickname = _o[0], setMentionNickname = _o[1];\n  var _p = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUsers = _p[0], setMentionedUsers = _p[1];\n  var _q = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUserIds = _q[0], setMentionedUserIds = _q[1];\n  var _r2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), messageInputEvent = _r2[0], setMessageInputEvent = _r2[1];\n  var _s2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), selectedUser = _s2[0], setSelectedUser = _s2[1];\n  var _t2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionSuggestedUsers = _t2[0], setMentionSuggestedUsers = _t2[1];\n  var editMessageInputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var messageScrollRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var displaySuggestedMentionList = isOnline && groupChannel.enableMention && mentionNickname.length > 0 && !isDisabledBecauseFrozen$1(channel) && !isDisabledBecauseMuted$1(channel);\n  var mentionNodes = useDirtyGetMentions({ ref: editMessageInputRef }, { logger });\n  var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < maxUserMentionCount;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setMentionedUsers(mentionedUsers.filter(function(_a3) {\n      var userId2 = _a3.userId;\n      var i3 = mentionedUserIds.indexOf(userId2);\n      if (i3 < 0) {\n        return false;\n      } else {\n        mentionedUserIds.splice(i3, 1);\n        return true;\n      }\n    }));\n  }, [mentionedUserIds]);\n  useDidMountEffect(function() {\n    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();\n  }, [showEdit, (_a2 = message === null || message === void 0 ? void 0 : message.reactions) === null || _a2 === void 0 ? void 0 : _a2.length]);\n  useDidMountEffect(function() {\n    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);\n  }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);\n  var prevShouldRenderSuggestedReplies = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(shouldRenderSuggestedReplies);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (prevShouldRenderSuggestedReplies.current !== shouldRenderSuggestedReplies) {\n      handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();\n    } else {\n      prevShouldRenderSuggestedReplies.current = shouldRenderSuggestedReplies;\n    }\n  }, [shouldRenderSuggestedReplies]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    if (usedInLegacy)\n      handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    var timeouts = [];\n    if (animatedMessageId === message.messageId && (messageScrollRef === null || messageScrollRef === void 0 ? void 0 : messageScrollRef.current)) {\n      timeouts.push(setTimeout(function() {\n        setIsAnimated(true);\n      }, 500));\n      timeouts.push(setTimeout(function() {\n        setAnimatedMessageId(null);\n        onMessageAnimated === null || onMessageAnimated === void 0 ? void 0 : onMessageAnimated();\n      }, 1600));\n    } else {\n      setIsAnimated(false);\n    }\n    return function() {\n      timeouts.forEach(function(it2) {\n        return clearTimeout(it2);\n      });\n    };\n  }, [animatedMessageId, messageScrollRef.current, message.messageId]);\n  var renderedCustomSeparator = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3;\n    return (_a3 = renderCustomSeparator === null || renderCustomSeparator === void 0 ? void 0 : renderCustomSeparator({ message })) !== null && _a3 !== void 0 ? _a3 : null;\n  }, [message, renderCustomSeparator]);\n  var renderChildren = function() {\n    if (children) {\n      return children;\n    }\n    if (renderMessage) {\n      var messageProps = __assign(__assign({}, props), { renderMessage: void 0 });\n      return renderMessage(messageProps);\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n      null,\n      renderMessageContent({\n        className: \"sendbird-message-hoc__message-content\",\n        userId,\n        scrollToMessage,\n        channel,\n        message,\n        disabled: !isOnline,\n        chainTop,\n        chainBottom,\n        isReactionEnabled,\n        replyType,\n        threadReplySelectType,\n        nicknamesMap,\n        emojiContainer,\n        showEdit: setShowEdit,\n        showRemove: setShowRemove,\n        showFileViewer: setShowFileViewer,\n        resendMessage,\n        deleteMessage,\n        toggleReaction,\n        setQuoteMessage,\n        onReplyInThread: onReplyInThreadClick,\n        onQuoteMessageClick,\n        onMessageHeightChange: handleScroll,\n        onBeforeDownloadFileMessage,\n        filterEmojiCategoryIds\n      }),\n      shouldRenderSuggestedReplies && renderSuggestedReplies({\n        replyOptions: getSuggestedReplies(message),\n        onSendMessage: sendUserMessage,\n        type: groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.suggestedRepliesDirection\n      }),\n      showRemove && (renderRemoveMessageModal === null || renderRemoveMessageModal === void 0 ? void 0 : renderRemoveMessageModal({ message, onCancel: function() {\n        return setShowRemove(false);\n      } })),\n      showFileViewer && renderFileViewer({ message, onCancel: function() {\n        return setShowFileViewer(false);\n      } })\n    );\n  };\n  if (showEdit && ((_b2 = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _b2 === void 0 ? void 0 : _b2.call(message))) {\n    return (renderEditInput === null || renderEditInput === void 0 ? void 0 : renderEditInput()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n      null,\n      displaySuggestedMentionList && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedMentionListView, { currentChannel: channel, targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : void 0, renderUserMentionItem, onUserItemClick: function(user) {\n        if (user) {\n          setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));\n        }\n        setMentionNickname(\"\");\n        setSelectedUser(user);\n        setMessageInputEvent(null);\n      }, onFocusItemChange: function() {\n        setMessageInputEvent(null);\n      }, onFetchUsers: function(users) {\n        setMentionSuggestedUsers(users);\n      }, ableAddMention: ableMention, maxMentionCount: maxUserMentionCount, maxSuggestionCount: maxUserSuggestionCount }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInput, { isEdit: true, channel, disabled: editInputDisabled, ref: editMessageInputRef, mentionSelectedUser: selectedUser, isMentionEnabled: groupChannel.enableMention, message, onStartTyping: function() {\n        var _a3;\n        (_a3 = channel === null || channel === void 0 ? void 0 : channel.startTyping) === null || _a3 === void 0 ? void 0 : _a3.call(channel);\n      }, onUpdateMessage: function(_a3) {\n        var _b3;\n        var messageId = _a3.messageId, message2 = _a3.message, mentionTemplate = _a3.mentionTemplate;\n        updateUserMessage(messageId, {\n          message: message2,\n          mentionedUsers,\n          mentionedMessageTemplate: mentionTemplate\n        });\n        setShowEdit(false);\n        (_b3 = channel === null || channel === void 0 ? void 0 : channel.endTyping) === null || _b3 === void 0 ? void 0 : _b3.call(channel);\n      }, onCancelEdit: function() {\n        var _a3;\n        setMentionNickname(\"\");\n        setMentionedUsers([]);\n        setMentionedUserIds([]);\n        setMentionSuggestedUsers([]);\n        setShowEdit(false);\n        (_a3 = channel === null || channel === void 0 ? void 0 : channel.endTyping) === null || _a3 === void 0 ? void 0 : _a3.call(channel);\n      }, onUserMentioned: function(user) {\n        if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {\n          setSelectedUser(null);\n          setMentionNickname(\"\");\n        }\n      }, onMentionStringChange: function(mentionText) {\n        setMentionNickname(mentionText);\n      }, onMentionedUserIdsUpdated: function(userIds) {\n        setMentionedUserIds(userIds);\n      }, onKeyDown: function(e3) {\n        if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e3.key === MessageInputKeys.Enter && ableMention || e3.key === MessageInputKeys.ArrowUp || e3.key === MessageInputKeys.ArrowDown)) {\n          setMessageInputEvent(e3);\n          return true;\n        }\n        return false;\n      } })\n    );\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-msg-hoc sendbird-msg--scroll-ref\", isAnimated && \"sendbird-msg-hoc__animated\"), \"data-testid\": \"sendbird-message-view\", style: children || renderMessage ? void 0 : { marginBottom: \"2px\" }, \"data-sb-message-id\": message.messageId, \"data-sb-created-at\": message.createdAt, ref: messageScrollRef },\n    hasSeparator && (renderedCustomSeparator || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      DateSeparator,\n      null,\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, format(message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR, {\n        locale: dateLocale\n      }))\n    )),\n    renderChildren()\n  );\n};\nvar FileViewerView = function(_a2) {\n  var message = _a2.message, onCancel = _a2.onCancel, deleteMessage = _a2.deleteMessage, onDownloadClick = _a2.onDownloadClick;\n  var sender = message.sender, type = message.type, url = message.url, _b2 = message.name, name2 = _b2 === void 0 ? \"\" : _b2, threadInfo = message.threadInfo;\n  var profileUrl = sender.profileUrl, nickname = sender.nickname, userId = sender.userId;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  return Object(react_dom__WEBPACK_IMPORTED_MODULE_1__[\"createPortal\"])(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewerComponent, { profileUrl, nickname, type, url, name: name2, onCancel, onDelete: function() {\n    return deleteMessage(message).then(function() {\n      return onCancel();\n    });\n  }, isByMe: config2.userId === userId, disableDelete: (threadInfo === null || threadInfo === void 0 ? void 0 : threadInfo.replyCount) ? threadInfo.replyCount > 0 : false, onDownloadClick }), document.getElementById(MODAL_ROOT));\n};\nvar FileViewerComponent = function(_a2) {\n  var profileUrl = _a2.profileUrl, nickname = _a2.nickname, name2 = _a2.name, type = _a2.type, url = _a2.url, isByMe = _a2.isByMe, onCancel = _a2.onCancel, onDelete = _a2.onDelete, disableDelete = _a2.disableDelete, onDownloadClick = _a2.onDownloadClick;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Modal,\n    { onClose: onCancel },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-fileviewer\", \"data-testid\": \"sendbird-fileviewer\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-fileviewer__header\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-fileviewer__header__left\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__left__avatar\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { height: \"32px\", width: \"32px\", src: profileUrl })\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__left__text-container\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-fileviewer__header__left__filename\", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, name2),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-fileviewer__header__left__sender-name\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, nickname)\n          )\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-fileviewer__header__right\" },\n          isSupportedFileView(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__right__actions\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"a\",\n              { className: \"sendbird-fileviewer__header__right__actions__download\", rel: \"noopener noreferrer\", href: url, target: \"_blank\", onClick: onDownloadClick },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.DOWNLOAD, fillColor: IconColors.ON_BACKGROUND_1, height: \"24px\", width: \"24px\" })\n            ),\n            onDelete && isByMe && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: \"sendbird-fileviewer__header__right__actions__delete\" },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: disableDelete ? \"disabled\" : \"\", type: IconTypes.DELETE, fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1, height: \"24px\", width: \"24px\", onClick: function() {\n                if (!disableDelete) {\n                  onDelete();\n                }\n              } })\n            )\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-fileviewer__header__right__actions__close\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.CLOSE, fillColor: IconColors.ON_BACKGROUND_1, height: \"24px\", width: \"24px\", onClick: onCancel })\n          )\n        )\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-fileviewer__content\" },\n        isVideo(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"video\",\n          { controls: true, className: \"sendbird-fileviewer__content__video\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"source\", { src: url, type })\n        ),\n        isImage(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", { src: url, alt: name2, className: \"sendbird-fileviewer__content__img\" }),\n        !isSupportedFileView(type) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-fileviewer__content__unsupported\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, LabelStringSet.UI__FILE_VIEWER__UNSUPPORT)\n        )\n      )\n    )\n  );\n};\nvar FileViewer = function(props) {\n  var _a2 = useGroupChannel(), onBeforeDownloadFileMessage = _a2.state.onBeforeDownloadFileMessage, deleteMessage = _a2.actions.deleteMessage;\n  var logger = useSendbird().state.config.logger;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewerView, __assign({}, props, { deleteMessage, onDownloadClick: function(e3) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var allowDownload, err_1;\n      var _a3, _b2;\n      return __generator(this, function(_c) {\n        switch (_c.label) {\n          case 0:\n            if (!onBeforeDownloadFileMessage)\n              return [\n                2\n                /*return*/\n              ];\n            _c.label = 1;\n          case 1:\n            _c.trys.push([1, 3, , 4]);\n            return [4, onBeforeDownloadFileMessage({ message: props.message })];\n          case 2:\n            allowDownload = _c.sent();\n            if (!allowDownload) {\n              e3.preventDefault();\n              (_a3 = logger.info) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"FileViewer: Not allowed to download.\");\n            }\n            return [3, 4];\n          case 3:\n            err_1 = _c.sent();\n            (_b2 = logger.error) === null || _b2 === void 0 ? void 0 : _b2.call(logger, \"FileViewer: Error occurred while determining download continuation:\", err_1);\n            return [3, 4];\n          case 4:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  } }));\n};\nfunction getModalDeleteMessageTitle(stringSet2, message) {\n  return K(message).when(isMultipleFilesMessage, function() {\n    var filesCount = message.fileInfoList.length;\n    return \"Do you want to delete all \".concat(filesCount, \" photos?\");\n  }).otherwise(function() {\n    return stringSet2.MODAL__DELETE_MESSAGE__TITLE;\n  });\n}\nvar RemoveMessageModalView = function(props) {\n  var _a2;\n  var _b2 = props.onSubmit, onSubmit = _b2 === void 0 ? function() {\n  } : _b2, onCancel = props.onCancel, message = props.message, deleteMessage = props.deleteMessage;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Modal, { type: ButtonTypes.DANGER, disabled: ((_a2 = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _a2 === void 0 ? void 0 : _a2.replyCount) ? message.threadInfo.replyCount > 0 : void 0, onCancel, onSubmit: function() {\n    if (message.isUserMessage() || message.isFileMessage() || message.isMultipleFilesMessage()) {\n      deleteMessage(message).then(function() {\n        onSubmit();\n        onCancel();\n      });\n    }\n  }, submitText: stringSet2.MESSAGE_MENU__DELETE, titleText: getModalDeleteMessageTitle(stringSet2, message) });\n};\nvar RemoveMessageModal$1 = function(props) {\n  var deleteMessage = useGroupChannel().actions.deleteMessage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RemoveMessageModalView, __assign({}, props, { deleteMessage }));\n};\nvar Message = function(props) {\n  var state = useSendbird().state;\n  var config2 = state.config, emojiManager = state.emojiManager;\n  var _a2 = useGroupChannel(), _b2 = _a2.state, loading = _b2.loading, currentChannel = _b2.currentChannel, animatedMessageId = _b2.animatedMessageId, replyType = _b2.replyType, threadReplySelectType = _b2.threadReplySelectType, isReactionEnabled = _b2.isReactionEnabled, nicknamesMap = _b2.nicknamesMap, renderUserMentionItem = _b2.renderUserMentionItem, filterEmojiCategoryIds = _b2.filterEmojiCategoryIds, onQuoteMessageClick = _b2.onQuoteMessageClick, onReplyInThreadClick = _b2.onReplyInThreadClick, onMessageAnimated = _b2.onMessageAnimated, onBeforeDownloadFileMessage = _b2.onBeforeDownloadFileMessage, messages = _b2.messages, _c = _a2.actions, toggleReaction = _c.toggleReaction, setQuoteMessage = _c.setQuoteMessage, setAnimatedMessageId = _c.setAnimatedMessageId, scrollToMessage = _c.scrollToMessage, updateUserMessage = _c.updateUserMessage, sendUserMessage = _c.sendUserMessage, resendMessage = _c.resendMessage, deleteMessage = _c.deleteMessage;\n  var message = props.message;\n  var initialized = !loading && Boolean(currentChannel);\n  var shouldRenderSuggestedReplies = useIIFE(function() {\n    var _a3 = config2.groupChannel, enableSuggestedReplies = _a3.enableSuggestedReplies, showSuggestedRepliesFor = _a3.showSuggestedRepliesFor;\n    var lastMessageInView = messages[messages.length - 1];\n    var hasUnsentMessage = isSendableMessage(lastMessageInView) && lastMessageInView.sendingStatus !== \"succeeded\";\n    var showSuggestedReplies = showSuggestedRepliesFor === \"all_messages\" ? true : message.messageId === lastMessageInView.messageId;\n    return enableSuggestedReplies && getSuggestedReplies(message).length > 0 && !hasUnsentMessage && showSuggestedReplies;\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageView, __assign({}, props, { channel: currentChannel, emojiContainer: emojiManager.emojiContainer, editInputDisabled: !initialized || isDisabledBecauseFrozen$1(currentChannel !== null && currentChannel !== void 0 ? currentChannel : void 0) || isDisabledBecauseMuted$1(currentChannel !== null && currentChannel !== void 0 ? currentChannel : void 0) || !config2.isOnline, shouldRenderSuggestedReplies, isReactionEnabled: isReactionEnabled !== null && isReactionEnabled !== void 0 ? isReactionEnabled : false, replyType: replyType !== null && replyType !== void 0 ? replyType : \"NONE\", threadReplySelectType: threadReplySelectType !== null && threadReplySelectType !== void 0 ? threadReplySelectType : ThreadReplySelectType.PARENT, nicknamesMap, renderUserMentionItem, filterEmojiCategoryIds, scrollToMessage, toggleReaction, setQuoteMessage, onQuoteMessageClick, onReplyInThreadClick, sendUserMessage, updateUserMessage, resendMessage, deleteMessage, animatedMessageId, setAnimatedMessageId, onMessageAnimated, renderFileViewer: function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewer, __assign({}, props2));\n  }, renderRemoveMessageModal: function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RemoveMessageModal$1, __assign({}, props2));\n  }, usedInLegacy: false, onBeforeDownloadFileMessage }));\n};\nvar UnreadCount = function(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, _c = _a2.count, count = _c === void 0 ? 0 : _c, _d = _a2.time, time = _d === void 0 ? \"\" : _d, onClick = _a2.onClick, lastReadAt = _a2.lastReadAt;\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext), stringSet2 = _e2.stringSet, dateLocale = _e2.dateLocale;\n  var unreadSince = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3, _b3;\n    if (stringSet2.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON !== \"on\") {\n      var timeArray = ((_b3 = (_a3 = time === null || time === void 0 ? void 0 : time.toString) === null || _a3 === void 0 ? void 0 : _a3.call(time)) === null || _b3 === void 0 ? void 0 : _b3.split(\" \")) || [];\n      timeArray === null || timeArray === void 0 ? void 0 : timeArray.splice(-2, 0, stringSet2.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON);\n      return timeArray.join(\" \");\n    } else if (lastReadAt) {\n      return format(lastReadAt, stringSet2.DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE, { locale: dateLocale });\n    }\n  }, [time, lastReadAt]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(count < 1 ? \"sendbird-notification--hide\" : \"sendbird-notification\", className), \"data-testid\": \"sendbird-notification\", onClick },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Label,\n      { className: \"sendbird-notification__text\", testID: \"sendbird-notification__text\", color: LabelColors.ONCONTENT_1, type: LabelTypography.CAPTION_2 },\n      \"\".concat(count, \" \"),\n      stringSet2.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE,\n      \" \".concat(unreadSince)\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"24px\", height: \"24px\", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.CONTENT })\n  );\n};\nvar FrozenNotification = function(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(\"sendbird-notification\", \"sendbird-notification--frozen\", className), \"data-testid\": \"sendbird-notification\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-notification__text\", testID: \"sendbird-notification__text\", type: LabelTypography.CAPTION_2 }, stringSet2.CHANNEL_FROZEN)\n  );\n};\nvar TypingDots = function() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"typing-dots-container\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null)\n  );\n};\nvar AVATAR_BORDER_SIZE = 2;\nvar AVATAR_DIAMETER_WITHOUT_BORDER = 28;\nvar AVATAR_DIAMETER = AVATAR_DIAMETER_WITHOUT_BORDER + AVATAR_BORDER_SIZE * 2;\nvar LEFT_GAP = 24;\nvar MAX_PROFILES_COUNT = 3;\nvar LEFT_FOR_BORDER = AVATAR_BORDER_SIZE;\nvar AvatarStack = function(props) {\n  var sources = props.sources, max = props.max;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    \" \",\n    sources.slice(0, max).map(function(src, index2) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, {\n        className: \"sendbird-message-content__left__avatar multiple\",\n        src: src || \"\",\n        key: \"avatar_stack_item_\".concat(src),\n        // TODO: Divide getting profileUrl logic to utils\n        width: \"\".concat(AVATAR_DIAMETER_WITHOUT_BORDER, \"px\"),\n        height: \"\".concat(AVATAR_DIAMETER_WITHOUT_BORDER, \"px\"),\n        zIndex: index2,\n        left: \"\".concat(index2 * LEFT_GAP - LEFT_FOR_BORDER, \"px\")\n      });\n    }),\n    \" \"\n  );\n};\nvar TypingIndicatorBubbleAvatar = function(props) {\n  var typingMembers = props.typingMembers;\n  var membersCount = typingMembers.length;\n  var displayCount = Math.min(membersCount, 4);\n  var hiddenCount = membersCount - MAX_PROFILES_COUNT;\n  var superImposedWidth = (displayCount - 1) * (AVATAR_DIAMETER - LEFT_GAP);\n  var rightPaddingSize = 12;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-message-content__left incoming\", style: {\n      minWidth: displayCount * AVATAR_DIAMETER - superImposedWidth + rightPaddingSize\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AvatarStack, { sources: typingMembers.map(function(member) {\n      return member.profileUrl;\n    }), max: MAX_PROFILES_COUNT }),\n    hiddenCount > 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, {\n      className: \"sendbird-message-content__left__avatar multiple\",\n      // TODO: Divide getting profileUrl logic to utils\n      width: \"\".concat(AVATAR_DIAMETER_WITHOUT_BORDER, \"px\"),\n      height: \"\".concat(AVATAR_DIAMETER_WITHOUT_BORDER, \"px\"),\n      zIndex: MAX_PROFILES_COUNT,\n      left: \"\".concat(MAX_PROFILES_COUNT * LEFT_GAP, \"px\"),\n      customDefaultComponent: function(_a2) {\n        var width = _a2.width, height = _a2.height;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AvatarDefault, { width, height, text: \"+\".concat(hiddenCount) });\n      }\n    }) : null\n  );\n};\nvar TypingIndicatorBubble = function(props) {\n  var typingMembers = props.typingMembers, handleScroll = props.handleScroll;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);\n  }, []);\n  if (typingMembers.length === 0)\n    return null;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-message-content incoming\", style: { marginBottom: \"2px\" } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingIndicatorBubbleAvatar, { typingMembers }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message-content__middle\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingDots, null)\n    )\n  );\n};\nvar compareMessagesForGrouping = function(prevMessage, currMessage, nextMessage, stringSet2, currentChannel, replyType) {\n  if (!currentChannel || currentChannel.channelType !== \"group\") {\n    return [\n      isSameGroup(prevMessage, currMessage, stringSet2),\n      isSameGroup(currMessage, nextMessage, stringSet2)\n    ];\n  }\n  if (replyType === \"THREAD\" && (currMessage === null || currMessage === void 0 ? void 0 : currMessage.threadInfo)) {\n    return [false, false];\n  }\n  var sendingStatus = (currMessage === null || currMessage === void 0 ? void 0 : currMessage.sendingStatus) || \"\";\n  var isAcceptable = sendingStatus !== \"pending\" && sendingStatus !== \"failed\";\n  return [\n    isSameGroup(prevMessage, currMessage, stringSet2, currentChannel) && isAcceptable,\n    isSameGroup(currMessage, nextMessage, stringSet2, currentChannel) && isAcceptable\n  ];\n};\nvar getMessageCreatedAt = function(message, stringSet2) {\n  return format(message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT);\n};\nvar isSameGroup = function(message, comparingMessage, stringSet2, currentChannel) {\n  var _a2, _b2;\n  if (!(message && comparingMessage && message.messageType && message.messageType !== \"admin\" && comparingMessage.messageType && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.messageType) !== \"admin\" && \"sender\" in message && \"sender\" in comparingMessage && message.createdAt && comparingMessage.createdAt && message.sender.userId && comparingMessage.sender.userId)) {\n    return false;\n  }\n  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sendingStatus) && ((_a2 = message === null || message === void 0 ? void 0 : message.sender) === null || _a2 === void 0 ? void 0 : _a2.userId) === ((_b2 = comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sender) === null || _b2 === void 0 ? void 0 : _b2.userId) && getMessageCreatedAt(message, stringSet2) === getMessageCreatedAt(comparingMessage, stringSet2) && (currentChannel ? isReadMessage(currentChannel, message) === isReadMessage(currentChannel, comparingMessage) : true);\n};\nvar getMessagePartsInfo = function(_a2) {\n  var allMessages = _a2.allMessages, stringSet2 = _a2.stringSet, _b2 = _a2.isMessageGroupingEnabled, isMessageGroupingEnabled = _b2 === void 0 ? true : _b2, _c = _a2.currentIndex, currentIndex = _c === void 0 ? 0 : _c, currentMessage = _a2.currentMessage, _d = _a2.currentChannel, currentChannel = _d === void 0 ? null : _d, _e2 = _a2.replyType, replyType = _e2 === void 0 ? \"\" : _e2;\n  var previousMessage = allMessages[currentIndex - 1];\n  var nextMessage = allMessages[currentIndex + 1];\n  var _f = isMessageGroupingEnabled ? compareMessagesForGrouping(previousMessage, currentMessage, nextMessage, stringSet2, currentChannel, replyType) : [false, false], chainTop = _f[0], chainBottom = _f[1];\n  var previousMessageCreatedAt = previousMessage === null || previousMessage === void 0 ? void 0 : previousMessage.createdAt;\n  var currentCreatedAt = currentMessage.createdAt;\n  var isLocalMessage = \"sendingStatus\" in currentMessage && currentMessage.sendingStatus !== \"succeeded\";\n  var hasSeparator = isLocalMessage ? false : !(previousMessageCreatedAt && isSameDay(currentCreatedAt, previousMessageCreatedAt));\n  return {\n    chainTop,\n    chainBottom,\n    hasSeparator\n  };\n};\nvar scrollIntoLast$1 = function(initialTry, scrollRef, setIsScrolled) {\n  if (initialTry === void 0) {\n    initialTry = 0;\n  }\n  var MAX_TRIES = 10;\n  var currentTry = initialTry;\n  if (currentTry > MAX_TRIES) {\n    return;\n  }\n  try {\n    var scrollDOM = (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) || document.querySelector(\".sendbird-conversation__messages-padding\");\n    if (scrollDOM)\n      scrollDOM.scrollTop = scrollDOM.scrollHeight;\n    setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);\n  } catch (error) {\n    setTimeout(function() {\n      scrollIntoLast$1(currentTry + 1, scrollRef, setIsScrolled);\n    }, 500 * currentTry);\n  }\n};\nvar isOperator = function(groupChannel) {\n  var myRole = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myRole;\n  return myRole === \"operator\";\n};\nvar isDisabledBecauseFrozen = function(groupChannel) {\n  var isFrozen2 = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen;\n  return isFrozen2 && !isOperator(groupChannel);\n};\nvar isDisabledBecauseMuted = function(groupChannel) {\n  var myMutedState = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myMutedState;\n  return myMutedState === \"muted\";\n};\nvar isAboutSame = function(a4, b3, px) {\n  return Math.abs(a4 - b3) <= px;\n};\nvar InfiniteList = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"forwardRef\"])(function(props, listRef) {\n  var messages = props.messages, renderMessage = props.renderMessage, scrollPositionRef = props.scrollPositionRef, scrollDistanceFromBottomRef = props.scrollDistanceFromBottomRef, onLoadPrevious = props.onLoadPrevious, onLoadNext = props.onLoadNext, _a2 = props.loadThreshold, loadThreshold = _a2 === void 0 ? 0.05 : _a2, typingIndicator = props.typingIndicator, _b2 = props.onScrollPosition, onScrollPosition = _b2 === void 0 ? noop$4 : _b2, initDeps = props.initDeps;\n  var isFetching = react__WEBPACK_IMPORTED_MODULE_0___default.a.useRef(false);\n  var direction = react__WEBPACK_IMPORTED_MODULE_0___default.a.useRef();\n  var oldScrollTop = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(0);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    if (listRef.current) {\n      listRef.current.scrollTop = listRef.current.scrollHeight;\n    }\n  }, initDeps);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    if (listRef.current) {\n      if (direction.current === \"top\") {\n        listRef.current.scrollTop = listRef.current.scrollHeight - scrollPositionRef.current;\n      }\n      if (direction.current === \"bottom\") {\n        listRef.current.scrollTop = oldScrollTop.current;\n      }\n      direction.current = void 0;\n    }\n  }, [listRef.current, messages.length]);\n  var handleScroll = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var list2, threshold;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            if (!listRef.current)\n              return [\n                2\n                /*return*/\n              ];\n            list2 = listRef.current;\n            onScrollPosition(getReachedStatus(list2));\n            scrollPositionRef.current = list2.scrollHeight - list2.scrollTop;\n            scrollDistanceFromBottomRef.current = scrollPositionRef.current - list2.clientHeight;\n            oldScrollTop.current = list2.scrollTop;\n            if (isFetching.current)\n              return [\n                2\n                /*return*/\n              ];\n            threshold = list2.clientHeight * Math.min(Math.max(0, loadThreshold), 1);\n            if (!(list2.scrollTop <= threshold)) return [3, 2];\n            isFetching.current = true;\n            direction.current = \"top\";\n            return [4, onLoadPrevious()];\n          case 1:\n            _a3.sent();\n            isFetching.current = false;\n            return [3, 5];\n          case 2:\n            if (!(list2.scrollHeight - list2.scrollTop - list2.clientHeight <= threshold)) return [3, 4];\n            isFetching.current = true;\n            direction.current = \"bottom\";\n            return [4, onLoadNext()];\n          case 3:\n            _a3.sent();\n            isFetching.current = false;\n            return [3, 5];\n          case 4:\n            direction.current = void 0;\n            _a3.label = 5;\n          case 5:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [messages.length]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-conversation__scroll-container\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-conversation__padding\" }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { ref: listRef, className: \"sendbird-conversation__messages-padding\", \"data-testid\": \"sendbird-message-list-container\", onScroll: handleScroll },\n      messages.map(function(message, index2) {\n        return renderMessage({ message, index: index2 });\n      }),\n      typingIndicator\n    )\n  );\n});\nfunction getReachedStatus(element2) {\n  if (isAboutSame(element2.scrollTop, 0, SCROLL_BUFFER)) {\n    return \"top\";\n  }\n  if (isAboutSame(element2.scrollHeight, element2.clientHeight + element2.scrollTop, SCROLL_BUFFER)) {\n    return \"bottom\";\n  }\n  return \"middle\";\n}\nvar MessageList = function(props) {\n  var _a2, _b2, _c, _d, _e2;\n  var _f = props.className, className = _f === void 0 ? \"\" : _f;\n  var _g2 = deleteNullish(props), _h = _g2.renderMessage, renderMessage = _h === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Message, __assign({}, props2));\n  } : _h, renderMessageContent = _g2.renderMessageContent, renderSuggestedReplies = _g2.renderSuggestedReplies, renderCustomSeparator = _g2.renderCustomSeparator, _j = _g2.renderPlaceholderLoader, renderPlaceholderLoader = _j === void 0 ? function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING });\n  } : _j, _k = _g2.renderPlaceholderEmpty, renderPlaceholderEmpty = _k === void 0 ? function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { className: \"sendbird-conversation__no-messages\", type: PlaceHolderTypes.NO_MESSAGES });\n  } : _k, _l = _g2.renderFrozenNotification, renderFrozenNotification = _l === void 0 ? function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FrozenNotification, { className: \"sendbird-conversation__messages__notification\" });\n  } : _l;\n  var _m = useGroupChannel(), _o = _m.state, channelUrl = _o.channelUrl, hasNext = _o.hasNext, loading = _o.loading, messages = _o.messages, newMessages = _o.newMessages, isScrollBottomReached = _o.isScrollBottomReached, isMessageGroupingEnabled = _o.isMessageGroupingEnabled, currentChannel = _o.currentChannel, replyType = _o.replyType, scrollPubSub = _o.scrollPubSub, loadNext = _o.loadNext, loadPrevious = _o.loadPrevious, resetNewMessages = _o.resetNewMessages, scrollRef = _o.scrollRef, scrollPositionRef = _o.scrollPositionRef, scrollDistanceFromBottomRef = _o.scrollDistanceFromBottomRef, _p = _m.actions, scrollToBottom = _p.scrollToBottom, setIsScrollBottomReached = _p.setIsScrollBottomReached;\n  var state = useSendbird().state;\n  var stringSet2 = useLocalization().stringSet;\n  var _q = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(), unreadSinceDate = _q[0], setUnreadSinceDate = _q[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (isScrollBottomReached) {\n      setUnreadSinceDate(void 0);\n    } else {\n      setUnreadSinceDate(/* @__PURE__ */ new Date());\n    }\n  }, [isScrollBottomReached]);\n  var onMessageContentSizeChanged = function(isBottomMessageAffected) {\n    if (isBottomMessageAffected === void 0) {\n      isBottomMessageAffected = false;\n    }\n    var elem = scrollRef.current;\n    if (elem) {\n      var latestDistance = scrollDistanceFromBottomRef.current;\n      var currentDistance = elem.scrollHeight - elem.scrollTop - elem.offsetHeight;\n      if (latestDistance < currentDistance && (!isBottomMessageAffected || latestDistance < SCROLL_BUFFER)) {\n        var diff = currentDistance - latestDistance;\n        scrollPubSub.publish(\"scroll\", { top: elem.scrollTop + diff, lazy: false, animated: false });\n      }\n    }\n  };\n  var renderer2 = {\n    frozenNotification: function() {\n      if (!currentChannel || !currentChannel.isFrozen)\n        return null;\n      return renderFrozenNotification();\n    },\n    unreadMessagesNotification: function() {\n      if (isScrollBottomReached || !unreadSinceDate)\n        return null;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UnreadCount, { className: \"sendbird-conversation__messages__notification\", count: newMessages.length, lastReadAt: unreadSinceDate, onClick: function() {\n        return scrollToBottom();\n      } });\n    },\n    scrollToBottomButton: function() {\n      if (!hasNext() && isScrollBottomReached)\n        return null;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-conversation__scroll-bottom-button\", onClick: function() {\n          return scrollToBottom();\n        }, onKeyDown: function() {\n          return scrollToBottom();\n        }, tabIndex: 0, role: \"button\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"24px\", height: \"24px\", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.PRIMARY })\n      );\n    }\n  };\n  if (loading) {\n    return renderPlaceholderLoader();\n  }\n  if (messages.length === 0) {\n    return renderPlaceholderEmpty();\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-conversation__messages \".concat(className), dir: getHTMLTextDirection(state.config.htmlTextDirection, state.config.forceLeftToRightMessageLayout) },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InfiniteList, { ref: scrollRef, initDeps: [channelUrl], scrollPositionRef, scrollDistanceFromBottomRef, onLoadNext: loadNext, onLoadPrevious: loadPrevious, onScrollPosition: function(it2) {\n        var isScrollBottomReached2 = it2 === \"bottom\";\n        if (newMessages.length > 0 && isScrollBottomReached2) {\n          resetNewMessages();\n        }\n        setIsScrollBottomReached(isScrollBottomReached2);\n      }, messages, renderMessage: function(_a3) {\n        var message = _a3.message, index2 = _a3.index;\n        var _b3 = getMessagePartsInfo({\n          allMessages: messages,\n          stringSet: stringSet2,\n          replyType: replyType !== null && replyType !== void 0 ? replyType : \"NONE\",\n          isMessageGroupingEnabled: isMessageGroupingEnabled !== null && isMessageGroupingEnabled !== void 0 ? isMessageGroupingEnabled : false,\n          currentIndex: index2,\n          currentMessage: message,\n          currentChannel\n        }), chainTop = _b3.chainTop, chainBottom = _b3.chainBottom, hasSeparator = _b3.hasSeparator;\n        var isOutgoingMessage = isSendableMessage(message) && message.sender.userId === state.config.userId;\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageProvider$1, { message, key: getComponentKeyFromMessage(message), isByMe: isOutgoingMessage }, renderMessage({\n          handleScroll: onMessageContentSizeChanged,\n          message,\n          hasSeparator,\n          chainTop,\n          chainBottom,\n          renderMessageContent,\n          renderSuggestedReplies,\n          renderCustomSeparator\n        }));\n      }, typingIndicator: !hasNext() && ((_b2 = (_a2 = state === null || state === void 0 ? void 0 : state.config) === null || _a2 === void 0 ? void 0 : _a2.groupChannel) === null || _b2 === void 0 ? void 0 : _b2.enableTypingIndicator) && ((_e2 = (_d = (_c = state === null || state === void 0 ? void 0 : state.config) === null || _c === void 0 ? void 0 : _c.groupChannel) === null || _d === void 0 ? void 0 : _d.typingIndicatorTypes) === null || _e2 === void 0 ? void 0 : _e2.has(TypingIndicatorType.Bubble)) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingIndicatorBubbleWrapper, { channelUrl, handleScroll: onMessageContentSizeChanged }) }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, renderer2.frozenNotification()),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, renderer2.unreadMessagesNotification()),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, renderer2.scrollToBottomButton())\n    )\n  );\n};\nvar TypingIndicatorBubbleWrapper = function(props) {\n  var stores2 = useSendbird().state.stores;\n  var _a2 = useGroupChannel().state, isScrollBottomReached = _a2.isScrollBottomReached, scrollPubSub = _a2.scrollPubSub;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), typingMembers = _b2[0], setTypingMembers = _b2[1];\n  useGroupChannelHandler(stores2.sdkStore.sdk, {\n    onTypingStatusUpdated: function(channel) {\n      if (channel.url === props.channelUrl) {\n        setTypingMembers(channel.getTypingUsers());\n      }\n      if (isScrollBottomReached && isContextMenuClosed()) {\n        setTimeout(function() {\n          scrollPubSub.publish(\"scrollToBottom\", {});\n        }, 10);\n      }\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingIndicatorBubble, { typingMembers, handleScroll: props.handleScroll });\n};\nvar SuggestedMentionList$1 = function(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedMentionListView, __assign({}, props));\n};\nvar componentClassname = \"sendbird-quote_message_input__avatar\";\nfunction QuoteMessageThumbnail(_a2) {\n  var _b2;\n  var message = _a2.message;\n  if (!isFileMessage(message) && !isMultipleFilesMessage(message) || isVoiceMessage(message)) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n  }\n  var thumbnailUrl = getMessageFirstFileThumbnailUrl(message);\n  if (!thumbnailUrl) {\n    if (isImageMessage(message) || isVideoMessage(message)) {\n      thumbnailUrl = getMessageFirstFileUrl(message);\n    } else if (isMultipleFilesMessage(message) && isImageFileInfo((_b2 = message.fileInfoList) === null || _b2 === void 0 ? void 0 : _b2[0])) {\n      thumbnailUrl = message.fileInfoList[0].url;\n    }\n  }\n  if (isVideoMessage(message) && thumbnailUrl) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: componentClassname },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"video\", { style: {\n        width: \"44px\",\n        height: \"44px\"\n      }, src: thumbnailUrl })\n    );\n  } else if ((isThumbnailMessage(message) || isMultipleFilesMessage(message)) && thumbnailUrl) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: componentClassname, url: thumbnailUrl, alt: getMessageFirstFileType(message), width: \"44px\", height: \"44px\", fixedSize: true });\n  } else if (isAudioMessage(message)) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: componentClassname },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.FILE_AUDIO, fillColor: IconColors.ON_BACKGROUND_2, width: \"24px\", height: \"24px\" })\n    );\n  } else {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: componentClassname },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.FILE_DOCUMENT, fillColor: IconColors.ON_BACKGROUND_2, width: \"24px\", height: \"24px\" })\n    );\n  }\n}\nfunction QuoteMessageInput(_a2) {\n  var className = _a2.className, replyingMessage = _a2.replyingMessage, onClose = _a2.onClose;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var fileMessage = replyingMessage;\n  var sender = replyingMessage === null || replyingMessage === void 0 ? void 0 : replyingMessage.sender;\n  var displayFileIcon = (isFileMessage(replyingMessage) || isMultipleFilesMessage(replyingMessage)) && !isVoiceMessage(replyingMessage);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: getClassName([\"sendbird-quote_message_input\", className !== null && className !== void 0 ? className : \"\"]) },\n    displayFileIcon && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(QuoteMessageThumbnail, { message: fileMessage }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-quote_message_input__body\", style: {\n        width: \"calc(100% - \".concat(displayFileIcon ? \"164px\" : \"120px\", \")\"),\n        left: displayFileIcon ? \"92px\" : \"40px\"\n      } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-quote_message_input__body__sender-name\", type: LabelTypography.CAPTION_1, color: LabelColors.ONBACKGROUND_1 }, \"\".concat(stringSet2.QUOTE_MESSAGE_INPUT__REPLY_TO, \" \").concat(sender && sender.nickname ? sender.nickname : stringSet2.NO_NAME)),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        Label,\n        { className: \"sendbird-quote_message_input__body__message-content\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 },\n        isImageMessage(fileMessage) && !isGifMessage(fileMessage) && stringSet2.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,\n        isVideoMessage(fileMessage) && stringSet2.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,\n        isGifMessage(fileMessage) && stringSet2.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,\n        isUserMessage(replyingMessage) && replyingMessage.message,\n        getUIKitMessageType(replyingMessage) === UIKitMessageTypes.FILE && getMessageFirstFileName(fileMessage),\n        isMultipleFilesMessage(replyingMessage) && \"\".concat(fileMessage.fileInfoList.length, \" Photos\"),\n        isVoiceMessage(replyingMessage) && stringSet2.VOICE_MESSAGE\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-quote_message_input__close-button\", type: IconTypes.CLOSE, fillColor: IconColors.ON_BACKGROUND_2, width: \"24px\", height: \"24px\", onClick: function() {\n      return onClose === null || onClose === void 0 ? void 0 : onClose(replyingMessage);\n    } })\n  );\n}\nvar VoiceRecorderStatus = {\n  PREPARING: \"PREPARING\",\n  READY_TO_RECORD: \"READY_TO_RECORD\",\n  RECORDING: \"RECORDING\",\n  COMPLETED: \"COMPLETED\"\n};\nvar useVoiceRecorder = function(_a2) {\n  var _b2 = _a2.onRecordingStarted, onRecordingStarted = _b2 === void 0 ? noop$4 : _b2, _c = _a2.onRecordingEnded, onRecordingEnded = _c === void 0 ? noop$4 : _c;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var voiceRecord = config2.voiceRecord;\n  var maxRecordingTime = voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.maxRecordingTime;\n  var voiceRecorder = useVoiceRecorderContext();\n  var isRecordable = voiceRecorder.isRecordable;\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), recordedFile = _d[0], setRecordedFile = _d[1];\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(VoiceRecorderStatus.PREPARING), recordingStatus = _e2[0], setRecordingStatus = _e2[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (isRecordable && recordingStatus === VoiceRecorderStatus.PREPARING) {\n      setRecordingStatus(VoiceRecorderStatus.READY_TO_RECORD);\n    }\n  }, [isRecordable]);\n  var start = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    voiceRecorder === null || voiceRecorder === void 0 ? void 0 : voiceRecorder.start({\n      onRecordingStarted: function() {\n        setRecordingStatus(VoiceRecorderStatus.RECORDING);\n        onRecordingStarted();\n        startTimer();\n      },\n      onRecordingEnded: function(audioFile) {\n        setRecordingStatus(VoiceRecorderStatus.COMPLETED);\n        onRecordingEnded(audioFile);\n        setRecordedFile(audioFile);\n        stopTimer();\n      }\n    });\n  }, [onRecordingStarted, onRecordingEnded]);\n  var stop = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    voiceRecorder === null || voiceRecorder === void 0 ? void 0 : voiceRecorder.stop();\n    stopTimer();\n  }, [voiceRecorder]);\n  var cancel = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function() {\n    stop();\n    setRecordedFile(null);\n  }, [voiceRecorder]);\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0), recordingTime = _f[0], setRecordingTime = _f[1];\n  var timer = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  function startTimer() {\n    stopTimer();\n    setRecordingTime(0);\n    timer.current = setInterval(function() {\n      setRecordingTime(function(prevTime) {\n        var newTime = prevTime + 100;\n        if (newTime > maxRecordingTime) {\n          stopTimer();\n        }\n        return newTime;\n      });\n    }, 100);\n  }\n  function stopTimer() {\n    if (timer.current) {\n      clearInterval(timer.current);\n      timer.current = null;\n    }\n  }\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (recordingTime > maxRecordingTime) {\n      stop();\n    }\n  }, [recordingTime, maxRecordingTime, stop]);\n  return {\n    start,\n    stop,\n    cancel,\n    recordingStatus,\n    recordingTime,\n    recordedFile,\n    recordingLimit: maxRecordingTime\n  };\n};\nvar VoiceMessageInputStatus = {\n  READY_TO_RECORD: \"READY_TO_RECORD\",\n  RECORDING: \"RECORDING\",\n  READY_TO_PLAY: \"READY_TO_PLAY\",\n  PLAYING: \"PLAYING\"\n};\nvar ControlerIcon = function(_a2) {\n  var inputState = _a2.inputState;\n  switch (inputState) {\n    case VoiceMessageInputStatus.READY_TO_RECORD: {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-controler-icon record-icon\" });\n    }\n    case VoiceMessageInputStatus.RECORDING: {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-controler-icon stop-icon\" });\n    }\n    case VoiceMessageInputStatus.READY_TO_PLAY: {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-controler-icon play-icon\", width: \"20px\", height: \"20px\", type: IconTypes.PLAY, fillColor: IconColors.ON_BACKGROUND_1 });\n    }\n    case VoiceMessageInputStatus.PLAYING: {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-controler-icon pause-icon\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-controler-icon pause-icon-inner\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-controler-icon pause-icon-inner\" })\n      );\n    }\n    default:\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n  }\n};\nvar VoiceMessageInput = function(_a2) {\n  var _b2 = _a2.minRecordTime, minRecordTime = _b2 === void 0 ? VOICE_RECORDER_DEFAULT_MIN : _b2, maximumValue = _a2.maximumValue, _c = _a2.currentValue, currentValue = _c === void 0 ? 0 : _c, currentType = _a2.currentType, onCancelClick = _a2.onCancelClick, onControlClick = _a2.onControlClick, onSubmitClick = _a2.onSubmitClick, renderCancelButton = _a2.renderCancelButton, renderControlButton = _a2.renderControlButton, renderSubmitButton = _a2.renderSubmitButton;\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0), lastClickTime = _d[0], setLastClickTime = _d[1];\n  var isReadyToRecord = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return currentType === VoiceMessageInputStatus.READY_TO_RECORD;\n  }, [currentType]);\n  var isRecording = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return currentType === VoiceMessageInputStatus.RECORDING;\n  }, [currentType]);\n  var isSendButtonDisabled = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    if (currentType === VoiceMessageInputStatus.READY_TO_RECORD || currentType === VoiceMessageInputStatus.RECORDING) {\n      return minRecordTime > currentValue;\n    }\n    return false;\n  }, [currentType, minRecordTime, currentValue]);\n  var isPlayMode = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return currentType === VoiceMessageInputStatus.READY_TO_PLAY || currentType === VoiceMessageInputStatus.PLAYING;\n  }, [currentType]);\n  var stringSet2 = useLocalization().stringSet;\n  var handleOnCancelClick = function() {\n    var currentTime = Date.now();\n    if (currentTime - lastClickTime > VOICE_RECORDER_CLICK_BUFFER_TIME) {\n      onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();\n      setLastClickTime(currentTime);\n    }\n  };\n  var handleOnControlClick = function() {\n    var currentTime = Date.now();\n    if (currentTime - lastClickTime > VOICE_RECORDER_CLICK_BUFFER_TIME) {\n      onControlClick === null || onControlClick === void 0 ? void 0 : onControlClick(currentType);\n      setLastClickTime(currentTime);\n    }\n  };\n  var handleOnSubmitClick = function() {\n    var currentTime = Date.now();\n    if (currentTime - lastClickTime > VOICE_RECORDER_CLICK_BUFFER_TIME) {\n      if (!isSendButtonDisabled) {\n        onSubmitClick === null || onSubmitClick === void 0 ? void 0 : onSubmitClick();\n      }\n      setLastClickTime(currentTime);\n    }\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-voice-message-input\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-voice-message-input__indicator\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-voice-message-input__indicator__progress-bar\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProgressBar, { className: \"sendbird-voice-message-input__indicator__progress-bar__bar\", disabled: isReadyToRecord, maxSize: maximumValue, currentSize: currentValue })\n      ),\n      isRecording ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-voice-message-input__indicator__on-rec\" }) : null,\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaybackTime, { className: \"sendbird-voice-message-input__indicator__playback-time\", time: isPlayMode ? maximumValue - currentValue : currentValue, labelColor: isReadyToRecord ? LabelColors.ONBACKGROUND_4 : LabelColors.ONCONTENT_1 })\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-voice-message-input__controler\" },\n      (renderCancelButton === null || renderCancelButton === void 0 ? void 0 : renderCancelButton()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        TextButton,\n        { className: \"sendbird-voice-message-input__controler__cancel\", onClick: handleOnCancelClick, disableUnderline: true },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet2.BUTTON__CANCEL)\n      ),\n      (renderControlButton === null || renderControlButton === void 0 ? void 0 : renderControlButton(currentType)) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-voice-message-input__controler__main\", onClick: handleOnControlClick },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ControlerIcon, { inputState: currentType })\n      ),\n      (renderSubmitButton === null || renderSubmitButton === void 0 ? void 0 : renderSubmitButton()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: classnames(\"sendbird-voice-message-input__controler__submit\", isSendButtonDisabled && \"voice-message--disabled\"), onClick: handleOnSubmitClick },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"19px\", height: \"19px\", type: IconTypes.SEND, fillColor: isSendButtonDisabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT })\n      )\n    )\n  );\n};\nvar compressImage = function(_a2) {\n  var imageFile = _a2.imageFile, compressionRate = _a2.compressionRate, resizingWidth = _a2.resizingWidth, resizingHeight = _a2.resizingHeight, outputFormat = _a2.outputFormat;\n  var image2 = document.createElement(\"img\");\n  return new Promise(function(resolve, reject) {\n    image2.src = URL.createObjectURL(imageFile);\n    image2.onerror = reject;\n    image2.onload = function() {\n      URL.revokeObjectURL(image2.src);\n      var canvas = document.createElement(\"canvas\");\n      var originWidth = image2.width;\n      var originHeight = image2.height;\n      var targetResizingWidth = !resizingWidth || resizingWidth > originWidth ? originWidth : resizingWidth;\n      var targetResizingHeight = !resizingHeight || resizingHeight > originHeight ? originHeight : resizingHeight;\n      var widthRatio = originWidth / targetResizingWidth;\n      var heightRatio = originHeight / targetResizingHeight;\n      if (widthRatio > heightRatio) {\n        targetResizingHeight = originHeight / (resizingWidth ? widthRatio : 1);\n      } else if (heightRatio > widthRatio) {\n        targetResizingWidth = originWidth / (resizingHeight ? heightRatio : 1);\n      }\n      canvas.width = targetResizingWidth;\n      canvas.height = targetResizingHeight;\n      var ctx = canvas.getContext(\"2d\");\n      if (!ctx) {\n        reject(new Error(\"Failed to get canvas 2d context\"));\n        return;\n      }\n      ctx.drawImage(image2, 0, 0, targetResizingWidth, targetResizingHeight);\n      var targetFileType = outputFormat === \"preserve\" ? imageFile.type : \"image/\".concat(outputFormat);\n      var targetSubtype = targetFileType.split(\"/\").pop();\n      var dotIndex = imageFile.name.lastIndexOf(\".\");\n      var targetName = \"\".concat(dotIndex === -1 ? imageFile.name : imageFile.name.substring(0, dotIndex), \".\").concat(targetSubtype);\n      ctx.canvas.toBlob(function(blob) {\n        if (blob) {\n          var file = new File([blob], targetName, { type: targetFileType });\n          resolve(file);\n        } else {\n          reject(new Error(\"Failed to compress image\"));\n        }\n      }, targetFileType, compressionRate);\n    };\n  });\n};\nvar compressImages = function(_a2) {\n  return __awaiter$5(void 0, [_a2], void 0, function(_b2) {\n    var compressionRate, _c, outputFormat, resizingWidth, resizingHeight, result;\n    var files = _b2.files, logger = _b2.logger, imageCompression = _b2.imageCompression;\n    return __generator(this, function(_d) {\n      switch (_d.label) {\n        case 0:\n          compressionRate = imageCompression.compressionRate, _c = imageCompression.outputFormat, outputFormat = _c === void 0 ? \"preserve\" : _c;\n          resizingWidth = imageCompression.resizingWidth ? pxToNumber(imageCompression.resizingWidth) : void 0;\n          resizingHeight = imageCompression.resizingHeight ? pxToNumber(imageCompression.resizingHeight) : void 0;\n          result = {\n            failedIndexes: [],\n            compressedFiles: []\n          };\n          if (!(Array.isArray(files) && files.length > 0)) {\n            logger === null || logger === void 0 ? void 0 : logger.warning(\"utils - compressImages: There are no files.\", files);\n            return [2, result];\n          }\n          if (!compressionRate || compressionRate < 0 || 1 < compressionRate) {\n            logger === null || logger === void 0 ? void 0 : logger.warning(\"utils - compressImages: The compressionRate is not acceptable.\", compressionRate);\n            return [2, result];\n          }\n          return [4, Promise.all(files.map(function(file, index2) {\n            return __awaiter$5(void 0, void 0, void 0, function() {\n              var compressedImage, err_1;\n              return __generator(this, function(_a3) {\n                switch (_a3.label) {\n                  case 0:\n                    if (!(file.type === \"image/jpg\" || file.type === \"image/png\" || file.type === \"image/jpeg\")) {\n                      logger === null || logger === void 0 ? void 0 : logger.warning(\"utils - compressImages: The fileType is not compressible.\", { file, index: index2 });\n                      result.failedIndexes.push(index2);\n                      result.compressedFiles.push(file);\n                      return [\n                        2\n                        /*return*/\n                      ];\n                    }\n                    _a3.label = 1;\n                  case 1:\n                    _a3.trys.push([1, 3, , 4]);\n                    return [4, compressImage({\n                      imageFile: file,\n                      compressionRate,\n                      resizingWidth,\n                      resizingHeight,\n                      outputFormat\n                    })];\n                  case 2:\n                    compressedImage = _a3.sent();\n                    result.compressedFiles.push(compressedImage);\n                    return [3, 4];\n                  case 3:\n                    err_1 = _a3.sent();\n                    result.compressedFiles.push(file);\n                    result.failedIndexes.push(index2);\n                    logger === null || logger === void 0 ? void 0 : logger.warning(\"utils - compressImages: Failed to compress image file\", { file, err: err_1 });\n                    return [3, 4];\n                  case 4:\n                    return [\n                      2\n                      /*return*/\n                    ];\n                }\n              });\n            });\n          }))];\n        case 1:\n          _d.sent();\n          logger === null || logger === void 0 ? void 0 : logger.info(\"utils - compressImages: Finished compressing images\", result);\n          return [2, result];\n      }\n    });\n  });\n};\nvar VoiceMessageInputWrapper = function(_a2) {\n  var channel = _a2.channel, onCancelClick = _a2.onCancelClick, onSubmitClick = _a2.onSubmitClick;\n  var uuid = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(uuidv4()).current;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), audioFile = _b2[0], setAudioFile = _b2[1];\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(VoiceMessageInputStatus.READY_TO_RECORD), voiceInputState = _c[0], setVoiceInputState = _c[1];\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isSubmitted = _d[0], setSubmit = _d[1];\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), isDisabled = _e2[0], setDisabled = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showModal = _f[0], setShowModal = _f[1];\n  var stringSet2 = useLocalization().stringSet;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var _g2 = useVoiceRecorder({\n    onRecordingStarted: function() {\n      setVoiceInputState(VoiceMessageInputStatus.RECORDING);\n    },\n    onRecordingEnded: function(audioFile2) {\n      setAudioFile(audioFile2);\n    }\n  }), start = _g2.start, stop = _g2.stop, cancel = _g2.cancel, recordingTime = _g2.recordingTime, recordingStatus = _g2.recordingStatus, recordingLimit = _g2.recordingLimit;\n  var voicePlayer = useVoicePlayer({\n    channelUrl: channel === null || channel === void 0 ? void 0 : channel.url,\n    key: uuid,\n    audioFile: audioFile !== null && audioFile !== void 0 ? audioFile : void 0\n  });\n  var play = voicePlayer.play, pause = voicePlayer.pause, playbackTime = voicePlayer.playbackTime, playingStatus = voicePlayer.playingStatus;\n  var stopVoicePlayer = voicePlayer.stop;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (isDisabledBecauseFrozen$1(channel) || isDisabledBecauseMuted$1(channel)) {\n      setDisabled(true);\n    } else {\n      setDisabled(false);\n    }\n  }, [channel === null || channel === void 0 ? void 0 : channel.myRole, channel === null || channel === void 0 ? void 0 : channel.isFrozen, channel === null || channel === void 0 ? void 0 : channel.myMutedState]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (isSubmitted && audioFile) {\n      onSubmitClick === null || onSubmitClick === void 0 ? void 0 : onSubmitClick(audioFile, recordingTime);\n      setSubmit(false);\n      setAudioFile(null);\n    }\n  }, [isSubmitted, audioFile, recordingTime]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (audioFile) {\n      if (recordingTime < config2.voiceRecord.minRecordingTime) {\n        setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);\n        setAudioFile(null);\n      } else if (playingStatus === VOICE_PLAYER_STATUS.PLAYING) {\n        setVoiceInputState(VoiceMessageInputStatus.PLAYING);\n      } else {\n        setVoiceInputState(VoiceMessageInputStatus.READY_TO_PLAY);\n      }\n    }\n  }, [audioFile, recordingTime, playingStatus]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-voice-message-input-wrapper\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VoiceMessageInput, { currentValue: recordingStatus === VoiceRecorderStatus.COMPLETED ? playbackTime : recordingTime, maximumValue: recordingStatus === VoiceRecorderStatus.COMPLETED ? recordingTime : recordingLimit, currentType: voiceInputState, onCancelClick: function() {\n      onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();\n      cancel();\n      stopVoicePlayer();\n    }, onSubmitClick: function() {\n      if (isDisabled) {\n        setShowModal(true);\n        setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);\n      } else {\n        stop();\n        pause();\n        setSubmit(true);\n      }\n    }, onControlClick: function(type) {\n      switch (type) {\n        case VoiceMessageInputStatus.READY_TO_RECORD: {\n          stopVoicePlayer();\n          start();\n          break;\n        }\n        case VoiceMessageInputStatus.RECORDING: {\n          if (recordingTime >= config2.voiceRecord.minRecordingTime && !isDisabled) {\n            stop();\n          } else if (isDisabled) {\n            cancel();\n            setShowModal(true);\n            setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);\n          } else {\n            cancel();\n            setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);\n          }\n          break;\n        }\n        case VoiceMessageInputStatus.READY_TO_PLAY: {\n          play();\n          break;\n        }\n        case VoiceMessageInputStatus.PLAYING: {\n          pause();\n          break;\n        }\n      }\n    } }),\n    showModal && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Modal,\n      { className: \"sendbird-voice-message-input-wrapper-alert\", titleText: isDisabledBecauseMuted$1(channel) ? stringSet2.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED : stringSet2.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN, hideFooter: true, isCloseOnClickOutside: true, onClose: function() {\n        setShowModal(false);\n        onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();\n      } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-voice-message-input-wrapper-alert__body\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Button, { className: \"sendbird-voice-message-input-wrapper-alert__body__ok-button\", type: ButtonTypes.PRIMARY, size: ButtonSizes.BIG, onClick: function() {\n          setShowModal(false);\n          onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();\n        } }, stringSet2.BUTTON__OK)\n      )\n    )\n  );\n};\nvar useHandleUploadFiles$1 = function(_a2, _b2) {\n  var sendFileMessage = _a2.sendFileMessage, sendMultipleFilesMessage = _a2.sendMultipleFilesMessage, quoteMessage = _a2.quoteMessage;\n  var logger = _b2.logger;\n  var stringSet2 = useLocalization().stringSet;\n  var state = useSendbird().state;\n  var config2 = state.config;\n  var imageCompression = config2.imageCompression;\n  var uikitUploadSizeLimit = config2 === null || config2 === void 0 ? void 0 : config2.uikitUploadSizeLimit;\n  var uikitMultipleFilesMessageLimit = config2 === null || config2 === void 0 ? void 0 : config2.uikitMultipleFilesMessageLimit;\n  var openModal = useGlobalModalContext().openModal;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(files) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var ONE_MiB2, compressedFiles, sendingFiles, file, imageFiles_1, otherFiles_1;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            if (files.length === 0) {\n              logger.warning(\"Channel|useHandleUploadFiles: given file list is empty.\", { files });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            if (files.length > uikitMultipleFilesMessageLimit) {\n              logger.info(\"Channel|useHandleUploadFiles: Cannot upload files more than \".concat(uikitMultipleFilesMessageLimit));\n              openModal({\n                modalProps: {\n                  titleText: stringSet2.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace(\"%d\", \"\".concat(uikitUploadSizeLimit)),\n                  hideFooter: true\n                },\n                childElement: function(_a4) {\n                  var closeModal = _a4.closeModal;\n                  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet2.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal });\n                }\n              });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            if (files.some(function(file2) {\n              return file2.size > uikitUploadSizeLimit;\n            })) {\n              logger.info(\"Channel|useHandleUploadFiles: Cannot upload file size exceeding \".concat(uikitUploadSizeLimit));\n              ONE_MiB2 = 1024 * 1024;\n              openModal({\n                modalProps: {\n                  titleText: stringSet2.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace(\"%d\", \"\".concat(Math.floor(uikitUploadSizeLimit / ONE_MiB2))),\n                  hideFooter: true\n                },\n                childElement: function(_a4) {\n                  var closeModal = _a4.closeModal;\n                  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet2.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal });\n                }\n              });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            return [4, compressImages({\n              files,\n              imageCompression,\n              logger\n            })];\n          case 1:\n            compressedFiles = _a3.sent().compressedFiles;\n            sendingFiles = compressedFiles;\n            if (sendingFiles.length === 1) {\n              logger.info(\"Channel|useHandleUploadFiles: sending one file.\");\n              file = sendingFiles[0];\n              return [2, sendFileMessage({ file, parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId })];\n            } else if (sendingFiles.length > 1) {\n              logger.info(\"Channel|useHandleUploadFiles: sending multiple files.\");\n              imageFiles_1 = [];\n              otherFiles_1 = [];\n              sendingFiles.forEach(function(file2) {\n                if (isImage(file2.type)) {\n                  imageFiles_1.push(file2);\n                } else {\n                  otherFiles_1.push(file2);\n                }\n              });\n              return [2, otherFiles_1.reduce(function(previousPromise, item) {\n                return previousPromise.then(function() {\n                  return sendFileMessage({ file: item, parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId });\n                });\n              }, function() {\n                if (imageFiles_1.length === 0) {\n                  return Promise.resolve();\n                } else if (imageFiles_1.length === 1) {\n                  return sendFileMessage({ file: imageFiles_1[0] });\n                } else {\n                  return sendMultipleFilesMessage({\n                    fileInfoList: imageFiles_1.map(function(file2) {\n                      return {\n                        file: file2,\n                        fileName: file2.name,\n                        fileSize: file2.size,\n                        mimeType: file2.type\n                      };\n                    }),\n                    parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId\n                  });\n                }\n              }())];\n            }\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [sendFileMessage, sendMultipleFilesMessage, quoteMessage]);\n};\nvar MessageInputWrapperView = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var _a2;\n  var currentChannel = props.currentChannel, messages = props.messages, loading = props.loading, quoteMessage = props.quoteMessage, setQuoteMessage = props.setQuoteMessage, messageInputRef = props.messageInputRef, sendUserMessage = props.sendUserMessage, sendFileMessage = props.sendFileMessage, sendVoiceMessage = props.sendVoiceMessage, sendMultipleFilesMessage = props.sendMultipleFilesMessage, renderUserMentionItem = props.renderUserMentionItem, renderFileUploadIcon = props.renderFileUploadIcon, renderVoiceMessageIcon = props.renderVoiceMessageIcon, renderSendMessageIcon = props.renderSendMessageIcon, acceptableMimeTypes = props.acceptableMimeTypes, disabled = props.disabled;\n  var stringSet2 = useLocalization().stringSet;\n  var isMobile = useMediaQueryContext().isMobile;\n  var state = useSendbird().state;\n  var stores2 = state.stores, config2 = state.config;\n  var isOnline = config2.isOnline, userMention = config2.userMention, logger = config2.logger, groupChannel = config2.groupChannel;\n  var sdk = stores2.sdkStore.sdk;\n  var maxMentionCount = userMention.maxMentionCount, maxSuggestionCount = userMention.maxSuggestionCount;\n  var isBroadcast = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isBroadcast;\n  var isOperator2 = (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === \"operator\";\n  var isMultipleFilesMessageEnabled = (_a2 = props.isMultipleFilesMessageEnabled) !== null && _a2 !== void 0 ? _a2 : config2.isMultipleFilesMessageEnabled;\n  var isMentionEnabled = groupChannel.enableMention;\n  var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), mentionNickname = _b2[0], setMentionNickname = _b2[1];\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUsers = _c[0], setMentionedUsers = _c[1];\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUserIds = _d[0], setMentionedUserIds = _d[1];\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), selectedUser = _e2[0], setSelectedUser = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionSuggestedUsers = _f[0], setMentionSuggestedUsers = _f[1];\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), messageInputEvent = _g2[0], setMessageInputEvent = _g2[1];\n  var _h = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showVoiceMessageInput = _h[0], setShowVoiceMessageInput = _h[1];\n  var isMessageInputDisabled = loading || (!currentChannel || !sdk) || !sdk.isCacheEnabled && !isOnline || isDisabledBecauseFrozen$1(currentChannel) || isDisabledBecauseMuted$1(currentChannel) || isDisabledBecauseSuggestedReplies(currentChannel, config2.groupChannel.enableSuggestedReplies) || isDisabledBecauseMessageForm(messages, config2.groupChannel.enableFormTypeMessage) || disabled;\n  var showSuggestedMentionList = !isMessageInputDisabled && isMentionEnabled && mentionNickname.length > 0 && !isBroadcast;\n  var mentionNodes = useDirtyGetMentions({ ref: ref || messageInputRef }, { logger });\n  var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < maxMentionCount;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setMentionNickname(\"\");\n    setMentionedUsers([]);\n    setMentionedUserIds([]);\n    setSelectedUser(null);\n    setMentionSuggestedUsers([]);\n    setMessageInputEvent(null);\n    setShowVoiceMessageInput(false);\n  }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setMentionedUsers(mentionedUsers.filter(function(_a3) {\n      var userId = _a3.userId;\n      var i3 = mentionedUserIds.indexOf(userId);\n      if (i3 < 0) {\n        return false;\n      } else {\n        mentionedUserIds.splice(i3, 1);\n        return true;\n      }\n    }));\n  }, [mentionedUserIds]);\n  var handleUploadFiles = useHandleUploadFiles$1({\n    sendFileMessage,\n    sendMultipleFilesMessage,\n    quoteMessage: quoteMessage !== null && quoteMessage !== void 0 ? quoteMessage : void 0\n  }, { logger });\n  if (isBroadcast && !isOperator2) {\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: showVoiceMessageInput ? \"sendbird-message-input-wrapper--voice-message\" : \"sendbird-message-input-wrapper\" },\n    showSuggestedMentionList && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedMentionList$1, { currentChannel, targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : void 0, renderUserMentionItem, onUserItemClick: function(user) {\n      if (user) {\n        setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));\n      }\n      setMentionNickname(\"\");\n      setSelectedUser(user);\n      setMessageInputEvent(null);\n    }, onFocusItemChange: function() {\n      setMessageInputEvent(null);\n    }, onFetchUsers: function(users) {\n      setMentionSuggestedUsers(users);\n    }, ableAddMention: ableMention, maxMentionCount, maxSuggestionCount }),\n    quoteMessage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-message-input-wrapper__quote-message-input\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(QuoteMessageInput, { replyingMessage: quoteMessage, onClose: function() {\n        return setQuoteMessage(null);\n      } })\n    ),\n    showVoiceMessageInput ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VoiceMessageInputWrapper, { channel: currentChannel !== null && currentChannel !== void 0 ? currentChannel : void 0, onSubmitClick: function(recordedFile, duration) {\n      sendVoiceMessage({ file: recordedFile, parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId }, duration);\n      setQuoteMessage(null);\n      setShowVoiceMessageInput(false);\n    }, onCancelClick: function() {\n      setShowVoiceMessageInput(false);\n    } }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInput, { className: \"sendbird-message-input-wrapper__message-input\", channel: currentChannel, channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url, isMobile, acceptableMimeTypes, mentionSelectedUser: selectedUser, isMentionEnabled, isVoiceMessageEnabled, isSelectingMultipleFilesEnabled: isMultipleFilesMessageEnabled, onVoiceMessageIconClick: function() {\n      setShowVoiceMessageInput(true);\n    }, setMentionedUsers, placeholder: quoteMessage && stringSet2.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER || isDisabledBecauseFrozen$1(currentChannel) && stringSet2.MESSAGE_INPUT__PLACE_HOLDER__FROZEN || isDisabledBecauseMuted$1(currentChannel) && (isMobile ? stringSet2.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT : stringSet2.MESSAGE_INPUT__PLACE_HOLDER__MUTED) || isDisabledBecauseSuggestedReplies(currentChannel, config2.groupChannel.enableSuggestedReplies) && stringSet2.MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES || isDisabledBecauseMessageForm(messages, config2.groupChannel.enableFormTypeMessage) && stringSet2.MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM || disabled && stringSet2.MESSAGE_INPUT__PLACE_HOLDER__DISABLED || void 0, ref: ref || messageInputRef, disabled: isMessageInputDisabled, renderFileUploadIcon, renderSendMessageIcon, renderVoiceMessageIcon, onStartTyping: function() {\n      currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.startTyping();\n    }, onSendMessage: function(_a3) {\n      var _b3;\n      var message = _a3.message, mentionTemplate = _a3.mentionTemplate;\n      sendUserMessage({\n        message,\n        mentionedUsers,\n        mentionedMessageTemplate: mentionTemplate,\n        parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId\n      });\n      setMentionNickname(\"\");\n      setMentionedUsers([]);\n      setQuoteMessage(null);\n      (_b3 = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _b3 === void 0 ? void 0 : _b3.call(currentChannel);\n    }, onFileUpload: function(fileList) {\n      handleUploadFiles(fileList);\n      setQuoteMessage(null);\n    }, onUserMentioned: function(user) {\n      if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {\n        setSelectedUser(null);\n        setMentionNickname(\"\");\n      }\n    }, onMentionStringChange: function(mentionText) {\n      setMentionNickname(mentionText);\n    }, onMentionedUserIdsUpdated: function(userIds) {\n      setMentionedUserIds(userIds);\n    }, onKeyDown: function(e3) {\n      if (showSuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e3.key === MessageInputKeys.Enter && ableMention || e3.key === MessageInputKeys.ArrowUp || e3.key === MessageInputKeys.ArrowDown)) {\n        setMessageInputEvent(e3);\n        return true;\n      }\n      return false;\n    } })\n  );\n});\nvar MessageInputWrapper = function(props) {\n  var _a2 = useGroupChannel(), state = _a2.state, actions = _a2.actions;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInputWrapperView, __assign({}, props, state, actions));\n};\nvar GroupChannelUI = function(props) {\n  var context = useGroupChannelContext();\n  var _a2 = useGroupChannel().state, channelUrl = _a2.channelUrl, fetchChannelError = _a2.fetchChannelError;\n  var _b2 = deleteNullish(props), _c = _b2.renderChannelHeader, renderChannelHeader = _c === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelHeader, __assign({}, props2));\n  } : _c, _d = _b2.renderMessageList, renderMessageList = _d === void 0 ? function(props2) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageList, __assign({}, props2, { className: \"sendbird-conversation__message-list\" }));\n  } : _d, _e2 = _b2.renderMessageInput, renderMessageInput = _e2 === void 0 ? function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInputWrapper, __assign({}, props));\n  } : _e2;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelUIView, __assign({}, props, context, { isInvalid: fetchChannelError !== null, channelUrl, renderChannelHeader, renderMessageList, renderMessageInput }));\n};\nvar GroupChannel = function(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    GroupChannelProvider,\n    __assign({}, props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelUI, __assign({}, props))\n  );\n};\nvar EmojiManager = (\n  /** @class */\n  function() {\n    function EmojiManager2(props) {\n      var _this = this;\n      var _a2;\n      var sdk = props.sdk, logger = props.logger;\n      (_a2 = sdk === null || sdk === void 0 ? void 0 : sdk.getAllEmoji) === null || _a2 === void 0 ? void 0 : _a2.call(sdk).then(function(emojiContainer) {\n        _this._emojiContainer = emojiContainer;\n        logger === null || logger === void 0 ? void 0 : logger.info(\"EmojiManager | Succeeded getting all emojis. \", emojiContainer);\n      }).catch(function() {\n        logger === null || logger === void 0 ? void 0 : logger.warning(\"EmojiManager | Failed getting all emojis.\");\n      });\n    }\n    Object.defineProperty(EmojiManager2.prototype, \"AllEmojisAsArray\", {\n      get: function() {\n        return this._emojiContainer.emojiCategories.flatMap(function(category) {\n          return category.emojis;\n        });\n      },\n      enumerable: false,\n      configurable: true\n    });\n    Object.defineProperty(EmojiManager2.prototype, \"AllEmojisAsMap\", {\n      get: function() {\n        return this._emojiContainer.emojiCategories.flatMap(function(category) {\n          return category.emojis;\n        }).reduce(function(map, emoji) {\n          map.set(emoji.key, emoji.url);\n          return map;\n        }, /* @__PURE__ */ new Map());\n      },\n      enumerable: false,\n      configurable: true\n    });\n    EmojiManager2.prototype.getAllEmojis = function(type) {\n      var _this = this;\n      return K(type).when(function(type2) {\n        return [\"array\", \"arr\"].includes(type2);\n      }, function() {\n        return _this.AllEmojisAsArray;\n      }).when(function(type2) {\n        return [\"map\"].includes(type2);\n      }, function() {\n        return _this.AllEmojisAsMap;\n      }).otherwise(function() {\n        return _this.AllEmojisAsArray;\n      });\n    };\n    EmojiManager2.prototype.getEmojiUrl = function(reactionKey) {\n      var _a2, _b2;\n      return (_b2 = (_a2 = this.AllEmojisAsArray.find(function(emoji) {\n        return emoji.key === reactionKey;\n      })) === null || _a2 === void 0 ? void 0 : _a2.url) !== null && _b2 !== void 0 ? _b2 : \"\";\n    };\n    Object.defineProperty(EmojiManager2.prototype, \"emojiContainer\", {\n      get: function() {\n        return this._emojiContainer;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    return EmojiManager2;\n  }()\n);\nvar colorMapping = {\n  // Primary / Secondary / Error / Information\n  100: \"extra-light\",\n  200: \"light\",\n  300: \"main\",\n  400: \"dark\",\n  500: \"extra-dark\",\n  // Overlay\n  \"overlay-01\": \"overlay-dark\",\n  \"overlay-02\": \"overlay-light\",\n  // OnLight\n  \"onlight-01\": \"onlight-text-high-emphasis\",\n  \"onlight-02\": \"onlight-text-mid-emphasis\",\n  \"onlight-03\": \"onlight-text-low-emphasis\",\n  \"onlight-04\": \"onlight-text-disabled\",\n  // OnDark\n  \"ondark-01\": \"ondark-text-high-emphasis\",\n  \"ondark-02\": \"ondark-text-mid-emphasis\",\n  \"ondark-03\": \"ondark-text-low-emphasis\",\n  \"ondark-04\": \"ondark-text-disabled\"\n};\nvar colorMappingOrder = Object.values(colorMapping).sort(function(a4, b3) {\n  return b3.length - a4.length;\n});\nvar colorMappingMap = new Map(Object.entries(colorMapping).map(function(_a2) {\n  var key = _a2[0], value = _a2[1];\n  return [value, key];\n}));\nvar mapColorKeys = function(colorSet) {\n  var mappedColors = {};\n  Object.entries(colorSet).forEach(function(_a2) {\n    var key = _a2[0], value = _a2[1];\n    var descriptiveKey = key;\n    for (var _i2 = 0, colorMappingOrder_1 = colorMappingOrder; _i2 < colorMappingOrder_1.length; _i2++) {\n      var mappingValue = colorMappingOrder_1[_i2];\n      var regex2 = new RegExp(\"-\".concat(mappingValue, \"$\"));\n      if (regex2.test(key)) {\n        var numericKey = colorMappingMap.get(mappingValue);\n        if (numericKey) {\n          descriptiveKey = key.replace(regex2, \"-\".concat(numericKey));\n          break;\n        }\n      }\n    }\n    mappedColors[descriptiveKey] = value;\n  });\n  return mappedColors;\n};\n/*!\n * css-vars-ponyfill\n * v2.4.9\n * https://jhildenbiddle.github.io/css-vars-ponyfill/\n * (c) 2018-2024 John Hildenbiddle <http://hildenbiddle.com>\n * MIT license\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function(target) {\n    for (var i3 = 1; i3 < arguments.length; i3++) {\n      var source = arguments[i3];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n/*!\n * get-css-data\n * v2.1.0\n * https://github.com/jhildenbiddle/get-css-data\n * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>\n * MIT license\n */\nfunction getUrls(urls) {\n  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n  var settings = {\n    mimeType: options.mimeType || null,\n    onBeforeSend: options.onBeforeSend || Function.prototype,\n    onSuccess: options.onSuccess || Function.prototype,\n    onError: options.onError || Function.prototype,\n    onComplete: options.onComplete || Function.prototype\n  };\n  var urlArray = Array.isArray(urls) ? urls : [urls];\n  var urlQueue = Array.apply(null, Array(urlArray.length)).map(function(x3) {\n    return null;\n  });\n  function isValidCss(text2) {\n    var isString = typeof text2 === \"string\";\n    var isHTML = isString && text2.trim().charAt(0) === \"<\";\n    return isString && !isHTML;\n  }\n  function onError2(xhr, urlIndex) {\n    settings.onError(xhr, urlArray[urlIndex], urlIndex);\n  }\n  function onSuccess2(responseText, urlIndex) {\n    var returnVal = settings.onSuccess(responseText, urlArray[urlIndex], urlIndex);\n    responseText = returnVal === false ? \"\" : returnVal || responseText;\n    urlQueue[urlIndex] = responseText;\n    if (urlQueue.indexOf(null) === -1) {\n      settings.onComplete(urlQueue);\n    }\n  }\n  var parser2 = document.createElement(\"a\");\n  urlArray.forEach(function(url, i3) {\n    parser2.setAttribute(\"href\", url);\n    parser2.href = String(parser2.href);\n    var isIElte9 = Boolean(document.all && !window.atob);\n    var isIElte9CORS = isIElte9 && parser2.host.split(\":\")[0] !== location.host.split(\":\")[0];\n    if (isIElte9CORS) {\n      var isSameProtocol = parser2.protocol === location.protocol;\n      if (isSameProtocol) {\n        var xdr = new XDomainRequest();\n        xdr.open(\"GET\", url);\n        xdr.timeout = 0;\n        xdr.onprogress = Function.prototype;\n        xdr.ontimeout = Function.prototype;\n        xdr.onload = function() {\n          var text2 = xdr.responseText;\n          if (isValidCss(text2)) {\n            onSuccess2(text2, i3);\n          } else {\n            onError2(xdr, i3);\n          }\n        };\n        xdr.onerror = function(err) {\n          onError2(xdr, i3);\n        };\n        setTimeout(function() {\n          xdr.send();\n        }, 0);\n      } else {\n        console.warn(\"Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (\".concat(url, \")\"));\n        onError2(null, i3);\n      }\n    } else {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url);\n      if (settings.mimeType && xhr.overrideMimeType) {\n        xhr.overrideMimeType(settings.mimeType);\n      }\n      settings.onBeforeSend(xhr, url, i3);\n      xhr.onreadystatechange = function() {\n        if (xhr.readyState === 4) {\n          var text2 = xhr.responseText;\n          if (xhr.status < 400 && isValidCss(text2)) {\n            onSuccess2(text2, i3);\n          } else if (xhr.status === 0 && isValidCss(text2)) {\n            onSuccess2(text2, i3);\n          } else {\n            onError2(xhr, i3);\n          }\n        }\n      };\n      xhr.send();\n    }\n  });\n}\n/**\n * Gets CSS data from <style> and <link> nodes (including @imports), then\n * returns data in order processed by DOM. Allows specifying nodes to\n * include/exclude and filtering CSS data using RegEx.\n *\n * @preserve\n * @param {object}   [options] The options object\n * @param {object}   [options.rootElement=document] Root element to traverse for\n *                   <link> and <style> nodes.\n * @param {string}   [options.include] CSS selector matching <link> and <style>\n *                   nodes to include\n * @param {string}   [options.exclude] CSS selector matching <link> and <style>\n *                   nodes to exclude\n * @param {object}   [options.filter] Regular expression used to filter node CSS\n *                   data. Each block of CSS data is tested against the filter,\n *                   and only matching data is included.\n * @param {boolean}  [options.skipDisabled=true] Determines if disabled\n *                   stylesheets will be skipped while collecting CSS data.\n * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be\n *                   collected from a stylesheet's runtime values instead of its\n *                   text content. This is required to get accurate CSS data\n *                   when a stylesheet has been modified using the deleteRule()\n *                   or insertRule() methods because these modifications will\n *                   not be reflected in the stylesheet's text content.\n * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes\n *                   1) the XHR object, 2) source node reference, and 3) the\n *                   source URL as arguments.\n * @param {function} [options.onSuccess] Callback on each CSS node read. Passes\n *                   1) CSS text, 2) source node reference, and 3) the source\n *                   URL as arguments.\n * @param {function} [options.onError] Callback on each error. Passes 1) the XHR\n *                   object for inspection, 2) soure node reference, and 3) the\n *                   source URL that failed (either a <link> href or an @import)\n *                   as arguments\n * @param {function} [options.onComplete] Callback after all nodes have been\n *                   processed. Passes 1) concatenated CSS text, 2) an array of\n *                   CSS text in DOM order, and 3) an array of nodes in DOM\n *                   order as arguments.\n *\n * @example\n *\n *   getCssData({\n *     rootElement : document,\n *     include     : 'style,link[rel=\"stylesheet\"]',\n *     exclude     : '[href=\"skip.css\"]',\n *     filter      : /red/,\n *     skipDisabled: true,\n *     useCSSOM    : false,\n *     onBeforeSend(xhr, node, url) {\n *       // ...\n *     }\n *     onSuccess(cssText, node, url) {\n *       // ...\n *     }\n *     onError(xhr, node, url) {\n *       // ...\n *     },\n *     onComplete(cssText, cssArray, nodeArray) {\n *       // ...\n *     }\n *   });\n */\nfunction getCssData(options) {\n  var regex2 = {\n    cssComments: /\\/\\*[\\s\\S]+?\\*\\//g,\n    cssImports: /(?:@import\\s*)(?:url\\(\\s*)?(?:['\"])([^'\"]*)(?:['\"])(?:\\s*\\))?(?:[^;]*;)/g\n  };\n  var settings = {\n    rootElement: options.rootElement || document,\n    include: options.include || 'style,link[rel=\"stylesheet\"]',\n    exclude: options.exclude || null,\n    filter: options.filter || null,\n    skipDisabled: options.skipDisabled !== false,\n    useCSSOM: options.useCSSOM || false,\n    onBeforeSend: options.onBeforeSend || Function.prototype,\n    onSuccess: options.onSuccess || Function.prototype,\n    onError: options.onError || Function.prototype,\n    onComplete: options.onComplete || Function.prototype\n  };\n  var sourceNodes = Array.apply(null, settings.rootElement.querySelectorAll(settings.include)).filter(function(node2) {\n    return !matchesSelector(node2, settings.exclude);\n  });\n  var cssArray = Array.apply(null, Array(sourceNodes.length)).map(function(x3) {\n    return null;\n  });\n  function handleComplete() {\n    var isComplete = cssArray.indexOf(null) === -1;\n    if (isComplete) {\n      cssArray.reduce(function(skipIndices, value, i3) {\n        if (value === \"\") {\n          skipIndices.push(i3);\n        }\n        return skipIndices;\n      }, []).reverse().forEach(function(skipIndex) {\n        return [sourceNodes, cssArray].forEach(function(arr) {\n          return arr.splice(skipIndex, 1);\n        });\n      });\n      var cssText = cssArray.join(\"\");\n      settings.onComplete(cssText, cssArray, sourceNodes);\n    }\n  }\n  function handleSuccess(cssText, cssIndex, node2, sourceUrl) {\n    var returnVal = settings.onSuccess(cssText, node2, sourceUrl);\n    cssText = returnVal !== void 0 && Boolean(returnVal) === false ? \"\" : returnVal || cssText;\n    resolveImports(cssText, node2, sourceUrl, function(resolvedCssText, errorData) {\n      if (cssArray[cssIndex] === null) {\n        errorData.forEach(function(data) {\n          return settings.onError(data.xhr, node2, data.url);\n        });\n        if (!settings.filter || settings.filter.test(resolvedCssText)) {\n          cssArray[cssIndex] = resolvedCssText;\n        } else {\n          cssArray[cssIndex] = \"\";\n        }\n        handleComplete();\n      }\n    });\n  }\n  function parseImportData(cssText, baseUrl) {\n    var ignoreRules = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];\n    var importData = {};\n    importData.rules = (cssText.replace(regex2.cssComments, \"\").match(regex2.cssImports) || []).filter(function(rule) {\n      return ignoreRules.indexOf(rule) === -1;\n    });\n    importData.urls = importData.rules.map(function(rule) {\n      return rule.replace(regex2.cssImports, \"$1\");\n    });\n    importData.absoluteUrls = importData.urls.map(function(url) {\n      return getFullUrl$1(url, baseUrl);\n    });\n    importData.absoluteRules = importData.rules.map(function(rule, i3) {\n      var oldUrl = importData.urls[i3];\n      var newUrl = getFullUrl$1(importData.absoluteUrls[i3], baseUrl);\n      return rule.replace(oldUrl, newUrl);\n    });\n    return importData;\n  }\n  function resolveImports(cssText, node2, baseUrl, callbackFn) {\n    var __errorData = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : [];\n    var __errorRules = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : [];\n    var importData = parseImportData(cssText, baseUrl, __errorRules);\n    if (importData.rules.length) {\n      getUrls(importData.absoluteUrls, {\n        onBeforeSend: function onBeforeSend2(xhr, url, urlIndex) {\n          settings.onBeforeSend(xhr, node2, url);\n        },\n        onSuccess: function onSuccess2(cssText2, url, urlIndex) {\n          var returnVal = settings.onSuccess(cssText2, node2, url);\n          cssText2 = returnVal === false ? \"\" : returnVal || cssText2;\n          var responseImportData = parseImportData(cssText2, url, __errorRules);\n          responseImportData.rules.forEach(function(rule, i3) {\n            cssText2 = cssText2.replace(rule, responseImportData.absoluteRules[i3]);\n          });\n          return cssText2;\n        },\n        onError: function onError2(xhr, url, urlIndex) {\n          __errorData.push({\n            xhr,\n            url\n          });\n          __errorRules.push(importData.rules[urlIndex]);\n          resolveImports(cssText, node2, baseUrl, callbackFn, __errorData, __errorRules);\n        },\n        onComplete: function onComplete2(responseArray) {\n          responseArray.forEach(function(importText, i3) {\n            cssText = cssText.replace(importData.rules[i3], importText);\n          });\n          resolveImports(cssText, node2, baseUrl, callbackFn, __errorData, __errorRules);\n        }\n      });\n    } else {\n      callbackFn(cssText, __errorData);\n    }\n  }\n  if (sourceNodes.length) {\n    sourceNodes.forEach(function(node2, i3) {\n      var linkHref = node2.getAttribute(\"href\");\n      var linkRel = node2.getAttribute(\"rel\");\n      var isLink = node2.nodeName.toLowerCase() === \"link\" && linkHref && linkRel && linkRel.toLowerCase().indexOf(\"stylesheet\") !== -1;\n      var isSkip = settings.skipDisabled === false ? false : node2.disabled;\n      var isStyle = node2.nodeName.toLowerCase() === \"style\";\n      if (isLink && !isSkip) {\n        var isURIScheme = linkHref.indexOf(\"data:text/css\") !== -1;\n        if (isURIScheme) {\n          var cssText = decodeURIComponent(linkHref.substring(linkHref.indexOf(\",\") + 1));\n          if (settings.useCSSOM) {\n            cssText = Array.apply(null, node2.sheet.cssRules).map(function(rule) {\n              return rule.cssText;\n            }).join(\"\");\n          }\n          handleSuccess(cssText, i3, node2, location.href);\n        } else {\n          getUrls(linkHref, {\n            mimeType: \"text/css\",\n            onBeforeSend: function onBeforeSend2(xhr, url, urlIndex) {\n              settings.onBeforeSend(xhr, node2, url);\n            },\n            onSuccess: function onSuccess2(cssText2, url, urlIndex) {\n              var sourceUrl = getFullUrl$1(linkHref);\n              handleSuccess(cssText2, i3, node2, sourceUrl);\n            },\n            onError: function onError2(xhr, url, urlIndex) {\n              cssArray[i3] = \"\";\n              settings.onError(xhr, node2, url);\n              handleComplete();\n            }\n          });\n        }\n      } else if (isStyle && !isSkip) {\n        var _cssText = node2.textContent;\n        if (settings.useCSSOM) {\n          _cssText = Array.apply(null, node2.sheet.cssRules).map(function(rule) {\n            return rule.cssText;\n          }).join(\"\");\n        }\n        handleSuccess(_cssText, i3, node2, location.href);\n      } else {\n        cssArray[i3] = \"\";\n        handleComplete();\n      }\n    });\n  } else {\n    settings.onComplete(\"\", []);\n  }\n}\nfunction getFullUrl$1(url, base) {\n  var d4 = document.implementation.createHTMLDocument(\"\");\n  var b3 = d4.createElement(\"base\");\n  var a4 = d4.createElement(\"a\");\n  d4.head.appendChild(b3);\n  d4.body.appendChild(a4);\n  b3.href = base || document.baseURI || (document.querySelector(\"base\") || {}).href || location.href;\n  a4.href = url;\n  return a4.href;\n}\nfunction matchesSelector(elm, selector) {\n  var matches = elm.matches || elm.matchesSelector || elm.webkitMatchesSelector || elm.mozMatchesSelector || elm.msMatchesSelector || elm.oMatchesSelector;\n  return matches.call(elm, selector);\n}\nvar balancedMatch = balanced;\nfunction balanced(a4, b3, str) {\n  if (a4 instanceof RegExp) a4 = maybeMatch(a4, str);\n  if (b3 instanceof RegExp) b3 = maybeMatch(b3, str);\n  var r2 = range(a4, b3, str);\n  return r2 && {\n    start: r2[0],\n    end: r2[1],\n    pre: str.slice(0, r2[0]),\n    body: str.slice(r2[0] + a4.length, r2[1]),\n    post: str.slice(r2[1] + b3.length)\n  };\n}\nfunction maybeMatch(reg, str) {\n  var m4 = str.match(reg);\n  return m4 ? m4[0] : null;\n}\nbalanced.range = range;\nfunction range(a4, b3, str) {\n  var begs, beg, left, right, result;\n  var ai2 = str.indexOf(a4);\n  var bi2 = str.indexOf(b3, ai2 + 1);\n  var i3 = ai2;\n  if (ai2 >= 0 && bi2 > 0) {\n    if (a4 === b3) {\n      return [ai2, bi2];\n    }\n    begs = [];\n    left = str.length;\n    while (i3 >= 0 && !result) {\n      if (i3 == ai2) {\n        begs.push(i3);\n        ai2 = str.indexOf(a4, i3 + 1);\n      } else if (begs.length == 1) {\n        result = [begs.pop(), bi2];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi2;\n        }\n        bi2 = str.indexOf(b3, i3 + 1);\n      }\n      i3 = ai2 < bi2 && ai2 >= 0 ? ai2 : bi2;\n    }\n    if (begs.length) {\n      result = [left, right];\n    }\n  }\n  return result;\n}\nfunction parseCss(css) {\n  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n  var defaults2 = {\n    preserveStatic: true,\n    removeComments: false\n  };\n  var settings = _extends({}, defaults2, options);\n  var errors = [];\n  function error(msg) {\n    throw new Error(\"CSS parse error: \".concat(msg));\n  }\n  function match2(re2) {\n    var m4 = re2.exec(css);\n    if (m4) {\n      css = css.slice(m4[0].length);\n      return m4;\n    }\n  }\n  function open() {\n    return match2(/^{\\s*/);\n  }\n  function close() {\n    return match2(/^}/);\n  }\n  function whitespace2() {\n    match2(/^\\s*/);\n  }\n  function comment() {\n    whitespace2();\n    if (css[0] !== \"/\" || css[1] !== \"*\") {\n      return;\n    }\n    var i3 = 2;\n    while (css[i3] && (css[i3] !== \"*\" || css[i3 + 1] !== \"/\")) {\n      i3++;\n    }\n    if (!css[i3]) {\n      return error(\"end of comment is missing\");\n    }\n    var str = css.slice(2, i3);\n    css = css.slice(i3 + 2);\n    return {\n      type: \"comment\",\n      comment: str\n    };\n  }\n  function comments() {\n    var cmnts = [];\n    var c3;\n    while (c3 = comment()) {\n      cmnts.push(c3);\n    }\n    return settings.removeComments ? [] : cmnts;\n  }\n  function selector() {\n    whitespace2();\n    while (css[0] === \"}\") {\n      error(\"extra closing bracket\");\n    }\n    var m4 = match2(/^((\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|[^{])+)/);\n    if (m4) {\n      var _selector = m4[0].trim();\n      var selectorItems;\n      var hasComment = /\\/\\*/.test(_selector);\n      if (hasComment) {\n        _selector = _selector.replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, \"\");\n      }\n      var hasCommaInQuotes = /[\"']\\w*,\\w*[\"']/.test(_selector);\n      if (hasCommaInQuotes) {\n        _selector = _selector.replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function(m5) {\n          return m5.replace(/,/g, \"\");\n        });\n      }\n      var hasMultipleSelectors = /,/.test(_selector);\n      if (hasMultipleSelectors) {\n        selectorItems = _selector.split(/\\s*(?![^(]*\\)),\\s*/);\n      } else {\n        selectorItems = [_selector];\n      }\n      if (hasCommaInQuotes) {\n        selectorItems = selectorItems.map(function(s4) {\n          return s4.replace(/\\u200C/g, \",\");\n        });\n      }\n      return selectorItems;\n    }\n  }\n  function declaration() {\n    if (css[0] === \"@\") {\n      return at_rule();\n    }\n    match2(/^([;\\s]*)+/);\n    var comment_regexp = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n    var prop = match2(/^(\\*?[-#/*\\\\\\w.]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n    if (!prop) {\n      return;\n    }\n    prop = prop[0].trim();\n    if (!match2(/^:\\s*/)) {\n      return error(\"property missing ':'\");\n    }\n    var val = match2(/^((?:\\/\\*.*?\\*\\/|'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\((\\s*'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|[^)]*?)\\s*\\)|[^};])+)/);\n    var ret = {\n      type: \"declaration\",\n      property: prop.replace(comment_regexp, \"\"),\n      value: val ? val[0].replace(comment_regexp, \"\").trim() : \"\"\n    };\n    match2(/^[;\\s]*/);\n    return ret;\n  }\n  function declarations() {\n    if (!open()) {\n      return error(\"missing '{'\");\n    }\n    var d4;\n    var decls = comments();\n    while (d4 = declaration()) {\n      decls.push(d4);\n      decls = decls.concat(comments());\n    }\n    if (!close()) {\n      return error(\"missing '}'\");\n    }\n    return decls;\n  }\n  function keyframe() {\n    whitespace2();\n    var vals = [];\n    var m4;\n    while (m4 = match2(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/)) {\n      vals.push(m4[1]);\n      match2(/^,\\s*/);\n    }\n    if (vals.length) {\n      return {\n        type: \"keyframe\",\n        values: vals,\n        declarations: declarations()\n      };\n    }\n  }\n  function at_keyframes() {\n    var m4 = match2(/^@([-\\w]+)?keyframes\\s*/);\n    if (!m4) {\n      return;\n    }\n    var vendor = m4[1];\n    m4 = match2(/^([-\\w]+)\\s*/);\n    if (!m4) {\n      return error(\"@keyframes missing name\");\n    }\n    var name2 = m4[1];\n    if (!open()) {\n      return error(\"@keyframes missing '{'\");\n    }\n    var frame;\n    var frames = comments();\n    while (frame = keyframe()) {\n      frames.push(frame);\n      frames = frames.concat(comments());\n    }\n    if (!close()) {\n      return error(\"@keyframes missing '}'\");\n    }\n    return {\n      type: \"keyframes\",\n      name: name2,\n      vendor,\n      keyframes: frames\n    };\n  }\n  function at_page() {\n    var m4 = match2(/^@page */);\n    if (m4) {\n      var sel = selector() || [];\n      return {\n        type: \"page\",\n        selectors: sel,\n        declarations: declarations()\n      };\n    }\n  }\n  function at_page_margin_box() {\n    var m4 = match2(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\\s*/);\n    if (m4) {\n      var name2 = \"\".concat(m4[1], \"-\").concat(m4[2]) + (m4[3] ? \"-\".concat(m4[3]) : \"\");\n      return {\n        type: \"page-margin-box\",\n        name: name2,\n        declarations: declarations()\n      };\n    }\n  }\n  function at_fontface() {\n    var m4 = match2(/^@font-face\\s*/);\n    if (m4) {\n      return {\n        type: \"font-face\",\n        declarations: declarations()\n      };\n    }\n  }\n  function at_supports() {\n    var m4 = match2(/^@supports *([^{]+)/);\n    if (m4) {\n      return {\n        type: \"supports\",\n        supports: m4[1].trim(),\n        rules: rules()\n      };\n    }\n  }\n  function at_host() {\n    var m4 = match2(/^@host\\s*/);\n    if (m4) {\n      return {\n        type: \"host\",\n        rules: rules()\n      };\n    }\n  }\n  function at_media() {\n    var m4 = match2(/^@media([^{]+)*/);\n    if (m4) {\n      return {\n        type: \"media\",\n        media: (m4[1] || \"\").trim(),\n        rules: rules()\n      };\n    }\n  }\n  function at_custom_m() {\n    var m4 = match2(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n    if (m4) {\n      return {\n        type: \"custom-media\",\n        name: m4[1].trim(),\n        media: m4[2].trim()\n      };\n    }\n  }\n  function at_document() {\n    var m4 = match2(/^@([-\\w]+)?document *([^{]+)/);\n    if (m4) {\n      return {\n        type: \"document\",\n        document: m4[2].trim(),\n        vendor: m4[1] ? m4[1].trim() : null,\n        rules: rules()\n      };\n    }\n  }\n  function at_x() {\n    var m4 = match2(/^@(import|charset|namespace)\\s*([^;]+);/);\n    if (m4) {\n      return {\n        type: m4[1],\n        name: m4[2].trim()\n      };\n    }\n  }\n  function at_rule() {\n    whitespace2();\n    if (css[0] === \"@\") {\n      var ret = at_x() || at_fontface() || at_media() || at_keyframes() || at_supports() || at_document() || at_custom_m() || at_host() || at_page() || at_page_margin_box();\n      if (ret && !settings.preserveStatic) {\n        var hasVarFunc = false;\n        if (ret.declarations) {\n          hasVarFunc = ret.declarations.some(function(decl) {\n            return /var\\(/.test(decl.value);\n          });\n        } else {\n          var arr = ret.keyframes || ret.rules || [];\n          hasVarFunc = arr.some(function(obj) {\n            return (obj.declarations || []).some(function(decl) {\n              return /var\\(/.test(decl.value);\n            });\n          });\n        }\n        return hasVarFunc ? ret : {};\n      }\n      return ret;\n    }\n  }\n  function rule() {\n    if (!settings.preserveStatic) {\n      var balancedMatch$1 = balancedMatch(\"{\", \"}\", css);\n      if (balancedMatch$1) {\n        var hasVarDecl = /:(?:root|host)(?![.:#(])/.test(balancedMatch$1.pre) && /--\\S*\\s*:/.test(balancedMatch$1.body);\n        var hasVarFunc = /var\\(/.test(balancedMatch$1.body);\n        if (!hasVarDecl && !hasVarFunc) {\n          css = css.slice(balancedMatch$1.end + 1);\n          return {};\n        }\n      }\n    }\n    var sel = selector() || [];\n    var decls = settings.preserveStatic ? declarations() : declarations().filter(function(decl) {\n      var hasVarDecl2 = sel.some(function(s4) {\n        return /:(?:root|host)(?![.:#(])/.test(s4);\n      }) && /^--\\S/.test(decl.property);\n      var hasVarFunc2 = /var\\(/.test(decl.value);\n      return hasVarDecl2 || hasVarFunc2;\n    });\n    if (!sel.length) {\n      error(\"selector missing\");\n    }\n    return {\n      type: \"rule\",\n      selectors: sel,\n      declarations: decls\n    };\n  }\n  function rules(core) {\n    if (!core && !open()) {\n      return error(\"missing '{'\");\n    }\n    var node2;\n    var rules2 = comments();\n    while (css.length && (core || css[0] !== \"}\") && (node2 = at_rule() || rule())) {\n      if (node2.type) {\n        rules2.push(node2);\n      }\n      rules2 = rules2.concat(comments());\n    }\n    if (!core && !close()) {\n      return error(\"missing '}'\");\n    }\n    return rules2;\n  }\n  return {\n    type: \"stylesheet\",\n    stylesheet: {\n      rules: rules(true),\n      errors\n    }\n  };\n}\nfunction parseVars(cssData) {\n  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n  var defaults2 = {\n    parseHost: false,\n    store: {},\n    onWarning: function onWarning2() {\n    }\n  };\n  var settings = _extends({}, defaults2, options);\n  var reVarDeclSelectors = new RegExp(\":\".concat(settings.parseHost ? \"host\" : \"root\", \"$\"));\n  if (typeof cssData === \"string\") {\n    cssData = parseCss(cssData, settings);\n  }\n  cssData.stylesheet.rules.forEach(function(rule) {\n    if (rule.type !== \"rule\" || !rule.selectors.some(function(s4) {\n      return reVarDeclSelectors.test(s4);\n    })) {\n      return;\n    }\n    rule.declarations.forEach(function(decl, i3) {\n      var prop = decl.property;\n      var value = decl.value;\n      if (prop && prop.indexOf(\"--\") === 0) {\n        settings.store[prop] = value;\n      }\n    });\n  });\n  return settings.store;\n}\nfunction stringifyCss(tree) {\n  var delim = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"\";\n  var cb = arguments.length > 2 ? arguments[2] : void 0;\n  var renderMethods = {\n    charset: function charset(node2) {\n      return \"@charset \" + node2.name + \";\";\n    },\n    comment: function comment(node2) {\n      return node2.comment.indexOf(\"__CSSVARSPONYFILL\") === 0 ? \"/*\" + node2.comment + \"*/\" : \"\";\n    },\n    \"custom-media\": function customMedia(node2) {\n      return \"@custom-media \" + node2.name + \" \" + node2.media + \";\";\n    },\n    declaration: function declaration(node2) {\n      return node2.property + \":\" + node2.value + \";\";\n    },\n    document: function document2(node2) {\n      return \"@\" + (node2.vendor || \"\") + \"document \" + node2.document + \"{\" + visit2(node2.rules) + \"}\";\n    },\n    \"font-face\": function fontFace(node2) {\n      return \"@font-face{\" + visit2(node2.declarations) + \"}\";\n    },\n    host: function host(node2) {\n      return \"@host{\" + visit2(node2.rules) + \"}\";\n    },\n    import: function _import(node2) {\n      return \"@import \" + node2.name + \";\";\n    },\n    keyframe: function keyframe(node2) {\n      return node2.values.join(\",\") + \"{\" + visit2(node2.declarations) + \"}\";\n    },\n    keyframes: function keyframes(node2) {\n      return \"@\" + (node2.vendor || \"\") + \"keyframes \" + node2.name + \"{\" + visit2(node2.keyframes) + \"}\";\n    },\n    media: function media(node2) {\n      return \"@media \" + node2.media + \"{\" + visit2(node2.rules) + \"}\";\n    },\n    namespace: function namespace(node2) {\n      return \"@namespace \" + node2.name + \";\";\n    },\n    page: function page(node2) {\n      return \"@page \" + (node2.selectors.length ? node2.selectors.join(\", \") : \"\") + \"{\" + visit2(node2.declarations) + \"}\";\n    },\n    \"page-margin-box\": function pageMarginBox(node2) {\n      return \"@\" + node2.name + \"{\" + visit2(node2.declarations) + \"}\";\n    },\n    rule: function rule(node2) {\n      var decls = node2.declarations;\n      if (decls.length) {\n        return node2.selectors.join(\",\") + \"{\" + visit2(decls) + \"}\";\n      }\n    },\n    supports: function supports(node2) {\n      return \"@supports \" + node2.supports + \"{\" + visit2(node2.rules) + \"}\";\n    }\n  };\n  function visit2(nodes) {\n    var buf = \"\";\n    for (var i3 = 0; i3 < nodes.length; i3++) {\n      var n2 = nodes[i3];\n      if (cb) {\n        cb(n2);\n      }\n      var txt = renderMethods[n2.type](n2);\n      if (txt) {\n        buf += txt;\n        if (txt.length && n2.selectors) {\n          buf += delim;\n        }\n      }\n    }\n    return buf;\n  }\n  return visit2(tree.stylesheet.rules);\n}\nfunction walkCss(node2, fn2) {\n  node2.rules.forEach(function(rule) {\n    if (rule.rules) {\n      walkCss(rule, fn2);\n      return;\n    }\n    if (rule.keyframes) {\n      rule.keyframes.forEach(function(keyframe) {\n        if (keyframe.type === \"keyframe\") {\n          fn2(keyframe.declarations, rule);\n        }\n      });\n      return;\n    }\n    if (!rule.declarations) {\n      return;\n    }\n    fn2(rule.declarations, node2);\n  });\n}\nvar VAR_PROP_IDENTIFIER = \"--\";\nvar VAR_FUNC_IDENTIFIER = \"var\";\nfunction transformCss(cssData) {\n  var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n  var defaults2 = {\n    preserveStatic: true,\n    preserveVars: false,\n    variables: {},\n    onWarning: function onWarning2() {\n    }\n  };\n  var settings = _extends({}, defaults2, options);\n  if (typeof cssData === \"string\") {\n    cssData = parseCss(cssData, settings);\n  }\n  walkCss(cssData.stylesheet, function(declarations, node2) {\n    for (var i3 = 0; i3 < declarations.length; i3++) {\n      var decl = declarations[i3];\n      var type = decl.type;\n      var prop = decl.property;\n      var value = decl.value;\n      if (type !== \"declaration\") {\n        continue;\n      }\n      if (!settings.preserveVars && prop && prop.indexOf(VAR_PROP_IDENTIFIER) === 0) {\n        declarations.splice(i3, 1);\n        i3--;\n        continue;\n      }\n      if (value.indexOf(VAR_FUNC_IDENTIFIER + \"(\") !== -1) {\n        var resolvedValue = resolveValue(value, settings);\n        if (resolvedValue !== decl.value) {\n          resolvedValue = fixNestedCalc(resolvedValue);\n          if (!settings.preserveVars) {\n            decl.value = resolvedValue;\n          } else {\n            declarations.splice(i3, 0, {\n              type,\n              property: prop,\n              value: resolvedValue\n            });\n            i3++;\n          }\n        }\n      }\n    }\n  });\n  return stringifyCss(cssData);\n}\nfunction fixNestedCalc(value) {\n  var reCalcVal = /calc\\(([^)]+)\\)/g;\n  (value.match(reCalcVal) || []).forEach(function(match2) {\n    var newVal = \"calc\".concat(match2.split(\"calc\").join(\"\"));\n    value = value.replace(match2, newVal);\n  });\n  return value;\n}\nfunction resolveValue(value) {\n  var settings = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n  var __recursiveFallback = arguments.length > 2 ? arguments[2] : void 0;\n  if (value.indexOf(\"var(\") === -1) {\n    return value;\n  }\n  var valueData = balancedMatch(\"(\", \")\", value);\n  function resolveFunc(value2) {\n    var name2 = value2.split(\",\")[0].replace(/[\\s\\n\\t]/g, \"\");\n    var fallback = (value2.match(/(?:\\s*,\\s*){1}(.*)?/) || [])[1];\n    var match2 = Object.prototype.hasOwnProperty.call(settings.variables, name2) ? String(settings.variables[name2]) : void 0;\n    var replacement = match2 || (fallback ? String(fallback) : void 0);\n    var unresolvedFallback = __recursiveFallback || value2;\n    if (!match2) {\n      settings.onWarning('variable \"'.concat(name2, '\" is undefined'));\n    }\n    if (replacement && replacement !== \"undefined\" && replacement.length > 0) {\n      return resolveValue(replacement, settings, unresolvedFallback);\n    } else {\n      return \"var(\".concat(unresolvedFallback, \")\");\n    }\n  }\n  if (!valueData) {\n    if (value.indexOf(\"var(\") !== -1) {\n      settings.onWarning('missing closing \")\" in the value \"'.concat(value, '\"'));\n    }\n    return value;\n  } else if (valueData.pre.slice(-3) === \"var\") {\n    var isEmptyVarFunc = valueData.body.trim().length === 0;\n    if (isEmptyVarFunc) {\n      settings.onWarning(\"var() must contain a non-whitespace string\");\n      return value;\n    } else {\n      return valueData.pre.slice(0, -3) + resolveFunc(valueData.body) + resolveValue(valueData.post, settings);\n    }\n  } else {\n    return valueData.pre + \"(\".concat(resolveValue(valueData.body, settings), \")\") + resolveValue(valueData.post, settings);\n  }\n}\nvar isBrowser = typeof window !== \"undefined\";\nvar isNativeSupport = isBrowser && window.CSS && window.CSS.supports && window.CSS.supports(\"(--a: 0)\");\nvar counters = {\n  group: 0,\n  job: 0\n};\nvar defaults = {\n  rootElement: isBrowser ? document : null,\n  shadowDOM: false,\n  include: \"style,link[rel=stylesheet]\",\n  exclude: \"\",\n  variables: {},\n  onlyLegacy: true,\n  preserveStatic: true,\n  preserveVars: false,\n  silent: false,\n  updateDOM: true,\n  updateURLs: true,\n  watch: null,\n  onBeforeSend: function onBeforeSend() {\n  },\n  onError: function onError() {\n  },\n  onWarning: function onWarning() {\n  },\n  onSuccess: function onSuccess() {\n  },\n  onComplete: function onComplete() {\n  },\n  onFinally: function onFinally() {\n  }\n};\nvar regex = {\n  cssComments: /\\/\\*[\\s\\S]+?\\*\\//g,\n  cssKeyframes: /@(?:-\\w*-)?keyframes/,\n  cssMediaQueries: /@media[^{]+\\{([\\s\\S]+?})\\s*}/g,\n  cssUrls: /url\\((?!['\"]?(?:data|http|\\/\\/):)['\"]?([^'\")]*)['\"]?\\)/g,\n  cssVarDeclRules: /(?::(?:root|host)(?![.:#(])[\\s,]*[^{]*{\\s*[^}]*})/g,\n  cssVarDecls: /(?:[\\s;]*)(-{2}\\w[\\w-]*)(?:\\s*:\\s*)([^;]*);/g,\n  cssVarFunc: /var\\(\\s*--[\\w-]/,\n  cssVars: /(?:(?::(?:root|host)(?![.:#(])[\\s,]*[^{]*{\\s*[^;]*;*\\s*)|(?:var\\(\\s*))(--[^:)]+)(?:\\s*[:)])/\n};\nvar variableStore = {\n  dom: {},\n  job: {},\n  user: {}\n};\nvar cssVarsIsRunning = false;\nvar cssVarsObserver = null;\nvar cssVarsSrcNodeCount = 0;\nvar debounceTimer = null;\nvar isShadowDOMReady = false;\n/**\n * Fetches, parses, and transforms CSS custom properties from specified\n * <style> and <link> elements into static values, then appends a new <style>\n * element with static values to the DOM to provide CSS custom property\n * compatibility for legacy browsers. Also provides a single interface for\n * live updates of runtime values in both modern and legacy browsers.\n *\n * @preserve\n * @param {object}   [options] Options object\n * @param {object}   [options.rootElement=document] Root element to traverse for\n *                   <link> and <style> nodes\n * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>\n *                   and <style> nodes will be processed.\n * @param {string}   [options.include=\"style,link[rel=stylesheet]\"] CSS selector\n *                   matching <link re=\"stylesheet\"> and <style> nodes to\n *                   process\n * @param {string}   [options.exclude] CSS selector matching <link\n *                   rel=\"stylehseet\"> and <style> nodes to exclude from those\n *                   matches by options.include\n * @param {object}   [options.variables] A map of custom property name/value\n *                   pairs. Property names can omit or include the leading\n *                   double-hyphen (), and values specified will override\n *                   previous values\n * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will\n *                   only generate legacy-compatible CSS in browsers that lack\n *                   native support (i.e., legacy browsers)\n * @param {boolean}  [options.preserveStatic=true] Determines if CSS\n *                   declarations that do not reference a custom property will\n *                   be preserved in the transformed CSS\n * @param {boolean}  [options.preserveVars=false] Determines if CSS custom\n *                   property declarations will be preserved in the transformed\n *                   CSS\n * @param {boolean}  [options.silent=false] Determines if warning and error\n *                   messages will be displayed on the console\n * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will\n *                   update the DOM after processing CSS custom properties\n * @param {boolean}  [options.updateURLs=true] Determines if relative url()\n *                   paths will be converted to absolute urls in external CSS\n * @param {boolean}  [options.watch=false] Determines if a MutationObserver will\n *                   be created that will execute the ponyfill when a <link> or\n *                   <style> DOM mutation is observed\n * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes\n *                   1) the XHR object, 2) source node reference, and 3) the\n *                   source URL as arguments\n * @param {function} [options.onError] Callback after a CSS parsing error has\n *                   occurred or an XHR request has failed. Passes 1) an error\n *                   message, and 2) source node reference, 3) xhr, and 4 url as\n *                   arguments.\n * @param {function} [options.onWarning] Callback after each CSS parsing warning\n *                   has occurred. Passes 1) a warning message as an argument.\n * @param {function} [options.onSuccess] Callback after CSS data has been\n *                   collected from each node and before CSS custom properties\n *                   have been transformed. Allows modifying the CSS data before\n *                   it is transformed by returning any string value (or false\n *                   to skip). Passes 1) CSS text, 2) source node reference, and\n *                   3) the source URL as arguments.\n * @param {function} [options.onComplete] Callback after all CSS has been\n *                   processed, legacy-compatible CSS has been generated, and\n *                   (optionally) the DOM has been updated. Passes 1) a CSS\n *                   string with CSS variable values resolved, 2) an array of\n *                   output <style> node references that have been appended to\n *                   the DOM, 3) an object containing all custom properies names\n *                   and values, and 4) the ponyfill execution time in\n *                   milliseconds.\n * @param {function} [options.onFinally] Callback in modern and legacy browsers\n *                   after the ponyfill has finished all tasks. Passes 1) a\n *                   boolean indicating if the last ponyfill call resulted in a\n *                   style change, 2) a boolean indicating if the current\n *                   browser provides native support for CSS custom properties,\n *                   and 3) the ponyfill execution time in milliseconds.\n * @example\n *\n *   cssVars({\n *     rootElement   : document,\n *     shadowDOM     : false,\n *     include       : 'style,link[rel=\"stylesheet\"]',\n *     exclude       : '',\n *     variables     : {},\n *     onlyLegacy    : true,\n *     preserveStatic: true,\n *     preserveVars  : false,\n *     silent        : false,\n *     updateDOM     : true,\n *     updateURLs    : true,\n *     watch         : false,\n *     onBeforeSend(xhr, node, url) {},\n *     onError(message, node, xhr, url) {},\n *     onWarning(message) {},\n *     onSuccess(cssText, node, url) {},\n *     onComplete(cssText, styleNode, cssVariables, benchmark) {},\n *     onFinally(hasChanged, hasNativeSupport, benchmark)\n *   });\n */\nfunction cssVars() {\n  var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n  var msgPrefix = \"cssVars(): \";\n  var settings = _extends({}, defaults, options);\n  function handleError(message, sourceNode, xhr, url) {\n    if (!settings.silent && window.console) {\n      console.error(\"\".concat(msgPrefix).concat(message, \"\\n\"), sourceNode);\n    }\n    settings.onError(message, sourceNode, xhr, url);\n  }\n  function handleWarning(message) {\n    if (!settings.silent && window.console) {\n      console.warn(\"\".concat(msgPrefix).concat(message));\n    }\n    settings.onWarning(message);\n  }\n  function handleFinally(hasChanged) {\n    settings.onFinally(Boolean(hasChanged), isNativeSupport, getTimeStamp() - settings.__benchmark);\n  }\n  if (!isBrowser) {\n    return;\n  }\n  if (settings.watch) {\n    settings.watch = defaults.watch;\n    addMutationObserver(settings);\n    cssVars(settings);\n    return;\n  } else if (settings.watch === false && cssVarsObserver) {\n    cssVarsObserver.disconnect();\n    cssVarsObserver = null;\n  }\n  if (!settings.__benchmark) {\n    if (cssVarsIsRunning === settings.rootElement) {\n      cssVarsDebounced(options);\n      return;\n    }\n    var srcNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars=\"out\"])'));\n    settings.__benchmark = getTimeStamp();\n    settings.exclude = [cssVarsObserver ? '[data-cssvars]:not([data-cssvars=\"\"])' : '[data-cssvars=\"out\"]', \"link[disabled]:not([data-cssvars])\", settings.exclude].filter(function(selector) {\n      return selector;\n    }).join(\",\");\n    settings.variables = fixVarNames(settings.variables);\n    srcNodes.forEach(function(srcNode) {\n      var hasStyleCache = srcNode.nodeName.toLowerCase() === \"style\" && srcNode.__cssVars.text;\n      var hasStyleChanged = hasStyleCache && srcNode.textContent !== srcNode.__cssVars.text;\n      if (hasStyleCache && hasStyleChanged) {\n        srcNode.sheet && (srcNode.sheet.disabled = false);\n        srcNode.setAttribute(\"data-cssvars\", \"\");\n      }\n    });\n    if (!cssVarsObserver) {\n      var outNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars=\"out\"]'));\n      outNodes.forEach(function(outNode) {\n        var dataGroup = outNode.getAttribute(\"data-cssvars-group\");\n        var srcNode = dataGroup ? settings.rootElement.querySelector('[data-cssvars=\"src\"][data-cssvars-group=\"'.concat(dataGroup, '\"]')) : null;\n        if (!srcNode) {\n          outNode.parentNode.removeChild(outNode);\n        }\n      });\n      if (cssVarsSrcNodeCount && srcNodes.length < cssVarsSrcNodeCount) {\n        cssVarsSrcNodeCount = srcNodes.length;\n        variableStore.dom = {};\n      }\n    }\n  }\n  if (document.readyState !== \"loading\") {\n    if (isNativeSupport && settings.onlyLegacy) {\n      var hasVarChange = false;\n      if (settings.updateDOM) {\n        var targetElm = settings.rootElement.host || (settings.rootElement === document ? document.documentElement : settings.rootElement);\n        Object.keys(settings.variables).forEach(function(key) {\n          var varValue = settings.variables[key];\n          hasVarChange = hasVarChange || varValue !== getComputedStyle(targetElm).getPropertyValue(key);\n          targetElm.style.setProperty(key, varValue);\n        });\n      }\n      handleFinally(hasVarChange);\n    } else if (!isShadowDOMReady && (settings.shadowDOM || settings.rootElement.shadowRoot || settings.rootElement.host)) {\n      getCssData({\n        rootElement: defaults.rootElement,\n        include: defaults.include,\n        exclude: settings.exclude,\n        skipDisabled: false,\n        onSuccess: function onSuccess2(cssText, node2, url) {\n          var isUserDisabled = (node2.sheet || {}).disabled && !node2.__cssVars;\n          if (isUserDisabled) {\n            return false;\n          }\n          cssText = cssText.replace(regex.cssComments, \"\").replace(regex.cssMediaQueries, \"\");\n          cssText = (cssText.match(regex.cssVarDeclRules) || []).join(\"\");\n          return cssText || false;\n        },\n        onComplete: function onComplete2(cssText, cssArray, nodeArray) {\n          parseVars(cssText, {\n            store: variableStore.dom,\n            onWarning: handleWarning\n          });\n          isShadowDOMReady = true;\n          cssVars(settings);\n        }\n      });\n    } else {\n      cssVarsIsRunning = settings.rootElement;\n      getCssData({\n        rootElement: settings.rootElement,\n        include: settings.include,\n        exclude: settings.exclude,\n        skipDisabled: false,\n        onBeforeSend: settings.onBeforeSend,\n        onError: function onError2(xhr, node2, url) {\n          var responseUrl = xhr.responseURL || getFullUrl(url, location.href);\n          var statusText = xhr.statusText ? \"(\".concat(xhr.statusText, \")\") : \"Unspecified Error\" + (xhr.status === 0 ? \" (possibly CORS related)\" : \"\");\n          var errorMsg = \"CSS XHR Error: \".concat(responseUrl, \" \").concat(xhr.status, \" \").concat(statusText);\n          handleError(errorMsg, node2, xhr, responseUrl);\n        },\n        onSuccess: function onSuccess2(cssText, node2, url) {\n          var isUserDisabled = (node2.sheet || {}).disabled && !node2.__cssVars;\n          if (isUserDisabled) {\n            return false;\n          }\n          var isLink = node2.nodeName.toLowerCase() === \"link\";\n          var isStyleImport = node2.nodeName.toLowerCase() === \"style\" && cssText !== node2.textContent;\n          var returnVal = settings.onSuccess(cssText, node2, url);\n          cssText = returnVal !== void 0 && Boolean(returnVal) === false ? \"\" : returnVal || cssText;\n          if (settings.updateURLs && (isLink || isStyleImport)) {\n            cssText = fixRelativeCssUrls(cssText, url);\n          }\n          return cssText;\n        },\n        onComplete: function onComplete2(cssText, cssArray) {\n          var nodeArray = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];\n          var currentVars = _extends({}, variableStore.dom, variableStore.user);\n          var hasVarChange2 = false;\n          variableStore.job = {};\n          nodeArray.forEach(function(node2, i4) {\n            var nodeCSS = cssArray[i4];\n            node2.__cssVars = node2.__cssVars || {};\n            node2.__cssVars.text = nodeCSS;\n            if (regex.cssVars.test(nodeCSS)) {\n              try {\n                var cssTree = parseCss(nodeCSS, {\n                  preserveStatic: settings.preserveStatic,\n                  removeComments: true\n                });\n                parseVars(cssTree, {\n                  parseHost: Boolean(settings.rootElement.host),\n                  store: variableStore.dom,\n                  onWarning: handleWarning\n                });\n                node2.__cssVars.tree = cssTree;\n              } catch (err) {\n                handleError(err.message, node2);\n              }\n            }\n          });\n          _extends(variableStore.job, variableStore.dom);\n          if (settings.updateDOM) {\n            _extends(variableStore.user, settings.variables);\n            _extends(variableStore.job, variableStore.user);\n          } else {\n            _extends(variableStore.job, variableStore.user, settings.variables);\n            _extends(currentVars, settings.variables);\n          }\n          hasVarChange2 = counters.job > 0 && Boolean(Object.keys(variableStore.job).length > Object.keys(currentVars).length || Boolean(Object.keys(currentVars).length && Object.keys(variableStore.job).some(function(key) {\n            return variableStore.job[key] !== currentVars[key];\n          })));\n          if (hasVarChange2) {\n            resetCssNodes(settings.rootElement);\n            cssVars(settings);\n          } else {\n            var outCssArray = [];\n            var outNodeArray = [];\n            var hasKeyframesWithVars = false;\n            if (settings.updateDOM) {\n              counters.job++;\n            }\n            nodeArray.forEach(function(node2, i4) {\n              var isSkip = !node2.__cssVars.tree;\n              if (node2.__cssVars.tree) {\n                try {\n                  transformCss(node2.__cssVars.tree, _extends({}, settings, {\n                    variables: variableStore.job,\n                    onWarning: handleWarning\n                  }));\n                  var outCss = stringifyCss(node2.__cssVars.tree);\n                  if (settings.updateDOM) {\n                    var nodeCSS = cssArray[i4];\n                    var hasCSSVarFunc = regex.cssVarFunc.test(nodeCSS);\n                    if (!node2.getAttribute(\"data-cssvars\")) {\n                      node2.setAttribute(\"data-cssvars\", \"src\");\n                    }\n                    if (outCss.length && hasCSSVarFunc) {\n                      var dataGroup = node2.getAttribute(\"data-cssvars-group\") || ++counters.group;\n                      var outCssNoSpaces = outCss.replace(/\\s/g, \"\");\n                      var outNode = settings.rootElement.querySelector('[data-cssvars=\"out\"][data-cssvars-group=\"'.concat(dataGroup, '\"]')) || document.createElement(\"style\");\n                      hasKeyframesWithVars = hasKeyframesWithVars || regex.cssKeyframes.test(outCss);\n                      if (settings.preserveStatic) {\n                        node2.sheet && (node2.sheet.disabled = true);\n                      }\n                      if (!outNode.hasAttribute(\"data-cssvars\")) {\n                        outNode.setAttribute(\"data-cssvars\", \"out\");\n                      }\n                      if (outCssNoSpaces === node2.textContent.replace(/\\s/g, \"\")) {\n                        isSkip = true;\n                        if (outNode && outNode.parentNode) {\n                          node2.removeAttribute(\"data-cssvars-group\");\n                          outNode.parentNode.removeChild(outNode);\n                        }\n                      } else if (outCssNoSpaces !== outNode.textContent.replace(/\\s/g, \"\")) {\n                        [node2, outNode].forEach(function(n2) {\n                          n2.setAttribute(\"data-cssvars-job\", counters.job);\n                          n2.setAttribute(\"data-cssvars-group\", dataGroup);\n                        });\n                        outNode.textContent = outCss;\n                        outCssArray.push(outCss);\n                        outNodeArray.push(outNode);\n                        if (!outNode.parentNode) {\n                          node2.parentNode.insertBefore(outNode, node2.nextSibling);\n                        }\n                      }\n                    }\n                  } else {\n                    if (node2.textContent.replace(/\\s/g, \"\") !== outCss) {\n                      outCssArray.push(outCss);\n                    }\n                  }\n                } catch (err) {\n                  handleError(err.message, node2);\n                }\n              }\n              if (isSkip) {\n                node2.setAttribute(\"data-cssvars\", \"skip\");\n              }\n              if (!node2.hasAttribute(\"data-cssvars-job\")) {\n                node2.setAttribute(\"data-cssvars-job\", counters.job);\n              }\n            });\n            cssVarsSrcNodeCount = settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars=\"out\"])').length;\n            if (settings.shadowDOM) {\n              var elms = [].concat(settings.rootElement).concat([].slice.call(settings.rootElement.querySelectorAll(\"*\")));\n              for (var i3 = 0, elm; elm = elms[i3]; ++i3) {\n                if (elm.shadowRoot && elm.shadowRoot.querySelector(\"style\")) {\n                  var shadowSettings = _extends({}, settings, {\n                    rootElement: elm.shadowRoot\n                  });\n                  cssVars(shadowSettings);\n                }\n              }\n            }\n            if (settings.updateDOM && hasKeyframesWithVars) {\n              fixKeyframes(settings.rootElement);\n            }\n            cssVarsIsRunning = false;\n            settings.onComplete(outCssArray.join(\"\"), outNodeArray, JSON.parse(JSON.stringify(variableStore.job)), getTimeStamp() - settings.__benchmark);\n            handleFinally(outNodeArray.length);\n          }\n        }\n      });\n    }\n  } else {\n    document.addEventListener(\"DOMContentLoaded\", function init(evt) {\n      cssVars(options);\n      document.removeEventListener(\"DOMContentLoaded\", init);\n    });\n  }\n}\ncssVars.reset = function() {\n  counters.job = 0;\n  counters.group = 0;\n  cssVarsIsRunning = false;\n  if (cssVarsObserver) {\n    cssVarsObserver.disconnect();\n    cssVarsObserver = null;\n  }\n  cssVarsSrcNodeCount = 0;\n  debounceTimer = null;\n  isShadowDOMReady = false;\n  for (var prop in variableStore) {\n    variableStore[prop] = {};\n  }\n};\nfunction addMutationObserver(settings) {\n  function isDisabled(node2) {\n    var isDisabledAttr = isLink(node2) && node2.hasAttribute(\"disabled\");\n    var isDisabledSheet = (node2.sheet || {}).disabled;\n    return isDisabledAttr || isDisabledSheet;\n  }\n  function isLink(node2) {\n    var isStylesheet = node2.nodeName.toLowerCase() === \"link\" && (node2.getAttribute(\"rel\") || \"\").indexOf(\"stylesheet\") !== -1;\n    return isStylesheet;\n  }\n  function isStyle(node2) {\n    return node2.nodeName.toLowerCase() === \"style\";\n  }\n  function isValidAttributeMutation(mutation) {\n    var isValid2 = false;\n    if (mutation.type === \"attributes\" && isLink(mutation.target) && !isDisabled(mutation.target)) {\n      var isEnabledMutation = mutation.attributeName === \"disabled\";\n      var isHrefMutation = mutation.attributeName === \"href\";\n      var isSkipNode = mutation.target.getAttribute(\"data-cssvars\") === \"skip\";\n      var isSrcNode = mutation.target.getAttribute(\"data-cssvars\") === \"src\";\n      if (isEnabledMutation) {\n        isValid2 = !isSkipNode && !isSrcNode;\n      } else if (isHrefMutation) {\n        if (isSkipNode) {\n          mutation.target.setAttribute(\"data-cssvars\", \"\");\n        } else if (isSrcNode) {\n          resetCssNodes(settings.rootElement, true);\n        }\n        isValid2 = true;\n      }\n    }\n    return isValid2;\n  }\n  function isValidStyleTextMutation(mutation) {\n    var isValid2 = false;\n    if (mutation.type === \"childList\") {\n      var isStyleElm = isStyle(mutation.target);\n      var isOutNode = mutation.target.getAttribute(\"data-cssvars\") === \"out\";\n      isValid2 = isStyleElm && !isOutNode;\n    }\n    return isValid2;\n  }\n  function isValidAddMutation(mutation) {\n    var isValid2 = false;\n    if (mutation.type === \"childList\") {\n      isValid2 = [].slice.call(mutation.addedNodes).some(function(node2) {\n        var isElm = node2.nodeType === 1;\n        var hasAttr = isElm && node2.hasAttribute(\"data-cssvars\");\n        var isStyleWithVars = isStyle(node2) && regex.cssVars.test(node2.textContent);\n        var isValid3 = !hasAttr && (isLink(node2) || isStyleWithVars);\n        return isValid3 && !isDisabled(node2);\n      });\n    }\n    return isValid2;\n  }\n  function isValidRemoveMutation(mutation) {\n    var isValid2 = false;\n    if (mutation.type === \"childList\") {\n      isValid2 = [].slice.call(mutation.removedNodes).some(function(node2) {\n        var isElm = node2.nodeType === 1;\n        var isOutNode = isElm && node2.getAttribute(\"data-cssvars\") === \"out\";\n        var isSrcNode = isElm && node2.getAttribute(\"data-cssvars\") === \"src\";\n        var isValid3 = isSrcNode;\n        if (isSrcNode || isOutNode) {\n          var dataGroup = node2.getAttribute(\"data-cssvars-group\");\n          var orphanNode = settings.rootElement.querySelector('[data-cssvars-group=\"'.concat(dataGroup, '\"]'));\n          if (isSrcNode) {\n            resetCssNodes(settings.rootElement, true);\n          }\n          if (orphanNode) {\n            orphanNode.parentNode.removeChild(orphanNode);\n          }\n        }\n        return isValid3;\n      });\n    }\n    return isValid2;\n  }\n  if (!window.MutationObserver) {\n    return;\n  }\n  if (cssVarsObserver) {\n    cssVarsObserver.disconnect();\n    cssVarsObserver = null;\n  }\n  cssVarsObserver = new MutationObserver(function(mutations) {\n    var hasValidMutation = mutations.some(function(mutation) {\n      return isValidAttributeMutation(mutation) || isValidStyleTextMutation(mutation) || isValidAddMutation(mutation) || isValidRemoveMutation(mutation);\n    });\n    if (hasValidMutation) {\n      cssVars(settings);\n    }\n  });\n  cssVarsObserver.observe(document.documentElement, {\n    attributes: true,\n    attributeFilter: [\"disabled\", \"href\"],\n    childList: true,\n    subtree: true\n  });\n}\nfunction cssVarsDebounced(settings) {\n  var delay2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;\n  clearTimeout(debounceTimer);\n  debounceTimer = setTimeout(function() {\n    settings.__benchmark = null;\n    cssVars(settings);\n  }, delay2);\n}\nfunction fixKeyframes(rootElement) {\n  var animationNameProp = [\"animation-name\", \"-moz-animation-name\", \"-webkit-animation-name\"].filter(function(prop) {\n    return getComputedStyle(document.body)[prop];\n  })[0];\n  if (animationNameProp) {\n    var allNodes = [].slice.call(rootElement.querySelectorAll(\"*\"));\n    var keyframeNodes = [];\n    var nameMarker = \"__CSSVARSPONYFILL-KEYFRAMES__\";\n    for (var i3 = 0, len = allNodes.length; i3 < len; i3++) {\n      var node2 = allNodes[i3];\n      var animationName = getComputedStyle(node2)[animationNameProp];\n      if (animationName !== \"none\") {\n        node2.style[animationNameProp] += nameMarker;\n        keyframeNodes.push(node2);\n      }\n    }\n    void document.body.offsetHeight;\n    for (var _i2 = 0, _len = keyframeNodes.length; _i2 < _len; _i2++) {\n      var nodeStyle = keyframeNodes[_i2].style;\n      nodeStyle[animationNameProp] = nodeStyle[animationNameProp].replace(nameMarker, \"\");\n    }\n  }\n}\nfunction fixRelativeCssUrls(cssText, baseUrl) {\n  var cssUrls = cssText.replace(regex.cssComments, \"\").match(regex.cssUrls) || [];\n  cssUrls.forEach(function(cssUrl) {\n    var oldUrl = cssUrl.replace(regex.cssUrls, \"$1\");\n    var newUrl = getFullUrl(oldUrl, baseUrl);\n    cssText = cssText.replace(cssUrl, cssUrl.replace(oldUrl, newUrl));\n  });\n  return cssText;\n}\nfunction fixVarNames() {\n  var varObj = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n  var reLeadingHyphens = /^-{2}/;\n  return Object.keys(varObj).reduce(function(obj, value) {\n    var key = reLeadingHyphens.test(value) ? value : \"--\".concat(value.replace(/^-+/, \"\"));\n    obj[key] = varObj[value];\n    return obj;\n  }, {});\n}\nfunction getFullUrl(url) {\n  var base = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : location.href;\n  var d4 = document.implementation.createHTMLDocument(\"\");\n  var b3 = d4.createElement(\"base\");\n  var a4 = d4.createElement(\"a\");\n  d4.head.appendChild(b3);\n  d4.body.appendChild(a4);\n  b3.href = base;\n  a4.href = url;\n  return a4.href;\n}\nfunction getTimeStamp() {\n  return isBrowser && (window.performance || {}).now ? window.performance.now() : (/* @__PURE__ */ new Date()).getTime();\n}\nfunction resetCssNodes(rootElement) {\n  var resetDOMVariableStore = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n  var resetNodes = [].slice.call(rootElement.querySelectorAll('[data-cssvars=\"skip\"],[data-cssvars=\"src\"]'));\n  resetNodes.forEach(function(node2) {\n    return node2.setAttribute(\"data-cssvars\", \"\");\n  });\n  if (resetDOMVariableStore) {\n    variableStore.dom = {};\n  }\n}\nfunction useUnmount(callback, deps) {\n  if (deps === void 0) {\n    deps = [];\n  }\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    return function() {\n      callback();\n    };\n  }, deps);\n}\nfunction useOnlineStatus(sdk, logger) {\n  var _a2, _b2;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\n    // window is undefined in SSR env\n    typeof window !== \"undefined\" ? (_b2 = (_a2 = window === null || window === void 0 ? void 0 : window.navigator) === null || _a2 === void 0 ? void 0 : _a2.onLine) !== null && _b2 !== void 0 ? _b2 : true : true\n  ), isOnline = _c[0], setIsOnline = _c[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var uniqueHandlerId = uuidv4();\n    try {\n      logger.warning(\"sdk changed\", uniqueHandlerId);\n      var handler = new wi({\n        onDisconnected: function() {\n          setIsOnline(false);\n          logger.warning(\"onDisconnected\", { isOnline });\n        },\n        onReconnectStarted: function() {\n          setIsOnline(false);\n          logger.warning(\"onReconnectStarted\", { isOnline });\n        },\n        onReconnectSucceeded: function() {\n          setIsOnline(true);\n          logger.warning(\"onReconnectSucceeded\", { isOnline });\n        },\n        onReconnectFailed: function() {\n          sdk.reconnect();\n          logger.warning(\"onReconnectFailed\");\n        }\n      });\n      if (sdk === null || sdk === void 0 ? void 0 : sdk.addConnectionHandler) {\n        sdk.addConnectionHandler(uniqueHandlerId, handler);\n        logger.info(\"Added ConnectionHandler\", uniqueHandlerId);\n      }\n    } catch (_a3) {\n    }\n    return function() {\n      try {\n        sdk.removeConnectionHandler(uniqueHandlerId);\n        logger.info(\"Removed ConnectionHandler\", uniqueHandlerId);\n      } catch (_a3) {\n      }\n    };\n  }, [sdk]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var tryReconnect = function() {\n      try {\n        logger.warning(\"Try reconnecting SDK\");\n        if (sdk.connectionState !== \"OPEN\") {\n          sdk.reconnect();\n        }\n      } catch (_a3) {\n      }\n    };\n    window.addEventListener(\"online\", tryReconnect);\n    return function() {\n      window.removeEventListener(\"online\", tryReconnect);\n    };\n  }, [sdk]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var body = document.querySelector(\"body\");\n    if (!isOnline && !(sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled)) {\n      try {\n        body === null || body === void 0 ? void 0 : body.classList.add(\"sendbird__offline\");\n        logger.info(\"Added class sendbird__offline to body\");\n      } catch (e3) {\n      }\n    } else {\n      try {\n        body === null || body === void 0 ? void 0 : body.classList.remove(\"sendbird__offline\");\n        logger.info(\"Removed class sendbird__offline from body\");\n      } catch (e3) {\n      }\n    }\n  }, [isOnline, sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled]);\n  return isOnline;\n}\nvar TIMEOUT = 2e3;\nfunction schedulerFactory(_a2) {\n  var logger = _a2.logger, timeout = _a2.timeout, cb = _a2.cb;\n  var queue = [];\n  var interval = null;\n  var push2 = function(channel) {\n    var channelPresent = queue.find(function(c3) {\n      return c3.url === channel.url;\n    });\n    if (!channelPresent) {\n      queue.push(channel);\n    } else {\n      logger.info(\"Channel: Mark as read already in queue\", { channel });\n    }\n    if (interval) {\n      return;\n    }\n    var item = queue.shift();\n    if (item) {\n      cb(item);\n    }\n    interval = setInterval(function() {\n      if (queue.length === 0 && interval) {\n        clearInterval(interval);\n        interval = null;\n        return;\n      }\n      var item2 = queue.shift();\n      if (item2) {\n        cb(item2);\n      }\n    }, timeout || TIMEOUT);\n  };\n  var clear = function() {\n    queue = [];\n    if (interval) {\n      clearInterval(interval);\n      interval = null;\n    }\n  };\n  return {\n    push: push2,\n    clear,\n    getQueue: function() {\n      return queue;\n    }\n  };\n}\nfunction useMarkAsDeliveredScheduler(_a2, _b2) {\n  var _this = this;\n  var isConnected = _a2.isConnected;\n  var logger = _b2.logger;\n  var markAsDeliveredScheduler = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return schedulerFactory({\n      logger,\n      cb: function(channel) {\n        return __awaiter$5(_this, void 0, void 0, function() {\n          var error_1;\n          return __generator(this, function(_a3) {\n            switch (_a3.label) {\n              case 0:\n                _a3.trys.push([0, 2, , 3]);\n                return [4, channel.markAsDelivered()];\n              case 1:\n                _a3.sent();\n                return [3, 3];\n              case 2:\n                error_1 = _a3.sent();\n                logger === null || logger === void 0 ? void 0 : logger.warning(\"Channel: Mark as delivered failed\", { channel, error: error_1 });\n                return [3, 3];\n              case 3:\n                return [\n                  2\n                  /*return*/\n                ];\n            }\n          });\n        });\n      }\n    });\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (!isConnected) {\n      markAsDeliveredScheduler.clear();\n    }\n  }, [isConnected]);\n  useUnmount(function() {\n    markAsDeliveredScheduler.clear();\n  });\n  return markAsDeliveredScheduler;\n}\nfunction uikitConfigMapper(_a2) {\n  var _b2, _c, _d, _e2, _f, _g2, _h, _j, _k, _l, _m, _o, _p, _q, _r2, _s2, _t2, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8;\n  var legacyConfig = _a2.legacyConfig, _9 = _a2.uikitOptions, uikitOptions = _9 === void 0 ? {} : _9;\n  var replyType = legacyConfig.replyType, isMentionEnabled = legacyConfig.isMentionEnabled, isReactionEnabled = legacyConfig.isReactionEnabled, disableUserProfile = legacyConfig.disableUserProfile, isVoiceMessageEnabled = legacyConfig.isVoiceMessageEnabled, isTypingIndicatorEnabledOnChannelList = legacyConfig.isTypingIndicatorEnabledOnChannelList, isMessageReceiptStatusEnabledOnChannelList = legacyConfig.isMessageReceiptStatusEnabledOnChannelList, showSearchIcon = legacyConfig.showSearchIcon;\n  return {\n    common: {\n      enableUsingDefaultUserProfile: (_c = (_b2 = uikitOptions.common) === null || _b2 === void 0 ? void 0 : _b2.enableUsingDefaultUserProfile) !== null && _c !== void 0 ? _c : typeof disableUserProfile === \"boolean\" ? !disableUserProfile : void 0\n    },\n    groupChannel: {\n      enableOgtag: (_d = uikitOptions.groupChannel) === null || _d === void 0 ? void 0 : _d.enableOgtag,\n      enableMention: (_f = (_e2 = uikitOptions.groupChannel) === null || _e2 === void 0 ? void 0 : _e2.enableMention) !== null && _f !== void 0 ? _f : isMentionEnabled,\n      enableReactions: (_h = (_g2 = uikitOptions.groupChannel) === null || _g2 === void 0 ? void 0 : _g2.enableReactions) !== null && _h !== void 0 ? _h : isReactionEnabled,\n      enableReactionsSupergroup: (_j = uikitOptions.groupChannel) === null || _j === void 0 ? void 0 : _j.enableReactionsSupergroup,\n      enableTypingIndicator: (_k = uikitOptions.groupChannel) === null || _k === void 0 ? void 0 : _k.enableTypingIndicator,\n      enableVoiceMessage: (_m = (_l = uikitOptions.groupChannel) === null || _l === void 0 ? void 0 : _l.enableVoiceMessage) !== null && _m !== void 0 ? _m : isVoiceMessageEnabled,\n      replyType: (_p = (_o = uikitOptions.groupChannel) === null || _o === void 0 ? void 0 : _o.replyType) !== null && _p !== void 0 ? _p : replyType != null ? getCaseResolvedReplyType(replyType).lowerCase : void 0,\n      threadReplySelectType: (_q = uikitOptions.groupChannel) === null || _q === void 0 ? void 0 : _q.threadReplySelectType,\n      input: {\n        enableDocument: (_s2 = (_r2 = uikitOptions.groupChannel) === null || _r2 === void 0 ? void 0 : _r2.input) === null || _s2 === void 0 ? void 0 : _s2.enableDocument\n      },\n      typingIndicatorTypes: (_t2 = uikitOptions.groupChannel) === null || _t2 === void 0 ? void 0 : _t2.typingIndicatorTypes,\n      enableFeedback: (_u = uikitOptions.groupChannel) === null || _u === void 0 ? void 0 : _u.enableFeedback,\n      enableSuggestedReplies: (_v = uikitOptions.groupChannel) === null || _v === void 0 ? void 0 : _v.enableSuggestedReplies,\n      showSuggestedRepliesFor: (_w = uikitOptions.groupChannel) === null || _w === void 0 ? void 0 : _w.showSuggestedRepliesFor,\n      suggestedRepliesDirection: (_x = uikitOptions.groupChannel) === null || _x === void 0 ? void 0 : _x.suggestedRepliesDirection,\n      enableMarkdownForUserMessage: (_y = uikitOptions.groupChannel) === null || _y === void 0 ? void 0 : _y.enableMarkdownForUserMessage,\n      enableFormTypeMessage: (_z = uikitOptions.groupChannel) === null || _z === void 0 ? void 0 : _z.enableFormTypeMessage\n    },\n    groupChannelList: {\n      enableTypingIndicator: (_1 = (_0 = uikitOptions.groupChannelList) === null || _0 === void 0 ? void 0 : _0.enableTypingIndicator) !== null && _1 !== void 0 ? _1 : isTypingIndicatorEnabledOnChannelList,\n      enableMessageReceiptStatus: (_3 = (_2 = uikitOptions.groupChannelList) === null || _2 === void 0 ? void 0 : _2.enableMessageReceiptStatus) !== null && _3 !== void 0 ? _3 : isMessageReceiptStatusEnabledOnChannelList\n    },\n    groupChannelSettings: {\n      enableMessageSearch: (_5 = (_4 = uikitOptions.groupChannelSettings) === null || _4 === void 0 ? void 0 : _4.enableMessageSearch) !== null && _5 !== void 0 ? _5 : showSearchIcon\n    },\n    openChannel: {\n      enableOgtag: (_6 = uikitOptions.openChannel) === null || _6 === void 0 ? void 0 : _6.enableOgtag,\n      input: {\n        enableDocument: (_8 = (_7 = uikitOptions.openChannel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.enableDocument\n      }\n    }\n  };\n}\nvar uikitConfigStorage = {\n  getItem: function(key) {\n    return __awaiter$5(this, void 0, void 0, function() {\n      var _a2;\n      return __generator(this, function(_b2) {\n        return [2, (_a2 = localStorage.getItem(key)) !== null && _a2 !== void 0 ? _a2 : null];\n      });\n    });\n  },\n  setItem: function(key, value) {\n    return __awaiter$5(this, void 0, void 0, function() {\n      return __generator(this, function(_a2) {\n        return [2, localStorage.setItem(key, value)];\n      });\n    });\n  }\n};\nvar VoiceMessageProvider = function(_a2) {\n  var children = _a2.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    VoicePlayerProvider,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VoiceRecorderProvider, null, children)\n  );\n};\nvar LOG_LEVELS = {\n  DEBUG: \"debug\",\n  WARNING: \"warning\",\n  ERROR: \"error\",\n  INFO: \"info\",\n  ALL: \"all\"\n};\nvar colorLog = function(level) {\n  switch (level) {\n    case LOG_LEVELS.WARNING:\n      return \"color: Orange\";\n    case LOG_LEVELS.ERROR:\n      return \"color: Red\";\n    default:\n      return \"color: Gray\";\n  }\n};\nvar printLog = function(_a2) {\n  var level = _a2.level, title = _a2.title, _b2 = _a2.description, description = _b2 === void 0 ? \"\" : _b2, _c = _a2.payload, payload = _c === void 0 ? [] : _c;\n  console.log.apply(console, __spreadArray([\"%c SendbirdUIKit | \".concat(level, \" | \").concat((/* @__PURE__ */ new Date()).toISOString(), \" | \").concat(title, \" \").concat(description && \"|\"), colorLog(level), description], payload, false));\n};\nvar getDefaultLogger = function() {\n  return {\n    info: noop$4,\n    error: noop$4,\n    warning: noop$4\n  };\n};\nvar LoggerFactory = function(lvl, customInterface) {\n  var logInterface = printLog;\n  var lvlArray = Array.isArray(lvl) ? lvl : [lvl];\n  var applyLog = function(lgLvl) {\n    return function(title, description) {\n      var payload = [];\n      for (var _i2 = 2; _i2 < arguments.length; _i2++) {\n        payload[_i2 - 2] = arguments[_i2];\n      }\n      return logInterface({\n        level: lgLvl,\n        title,\n        description,\n        payload\n      });\n    };\n  };\n  return lvlArray.reduce(function(accumulator, currentLvl) {\n    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {\n      return __assign(__assign({}, accumulator), { info: applyLog(LOG_LEVELS.INFO), error: applyLog(LOG_LEVELS.ERROR), warning: applyLog(LOG_LEVELS.WARNING) });\n    }\n    if (currentLvl === LOG_LEVELS.INFO) {\n      return __assign(__assign({}, accumulator), { info: applyLog(LOG_LEVELS.INFO) });\n    }\n    if (currentLvl === LOG_LEVELS.ERROR) {\n      return __assign(__assign({}, accumulator), { error: applyLog(LOG_LEVELS.ERROR) });\n    }\n    if (currentLvl === LOG_LEVELS.WARNING) {\n      return __assign(__assign({}, accumulator), { warning: applyLog(LOG_LEVELS.WARNING) });\n    }\n    return __assign({}, accumulator);\n  }, getDefaultLogger());\n};\nvar DEFAULT_COLOR_SET = {\n  \"--sendbird-dark-primary-500\": \"#4d2aa6\",\n  \"--sendbird-dark-primary-400\": \"#6440C4\",\n  \"--sendbird-dark-primary-300\": \"#7B53EF\",\n  \"--sendbird-dark-primary-200\": \"#9E8CF5\",\n  \"--sendbird-dark-primary-100\": \"#E2DFFF\",\n  \"--sendbird-dark-secondary-500\": \"#007A7A\",\n  \"--sendbird-dark-secondary-400\": \"#189A8D\",\n  \"--sendbird-dark-secondary-300\": \"#2EBA9F\",\n  \"--sendbird-dark-secondary-200\": \"#6FD6BE\",\n  \"--sendbird-dark-secondary-100\": \"#AEF2DC\",\n  \"--sendbird-dark-information-100\": \"#b2d9ff\",\n  \"--sendbird-dark-error-500\": \"#A30E2D\",\n  \"--sendbird-dark-error-400\": \"#C11F41\",\n  \"--sendbird-dark-error-300\": \"#E53157\",\n  \"--sendbird-dark-error-200\": \"#FF6183\",\n  \"--sendbird-dark-error-100\": \"#FFABBD\",\n  \"--sendbird-dark-background-700\": \"#000000\",\n  \"--sendbird-dark-background-600\": \"#161616\",\n  \"--sendbird-dark-background-500\": \"#2C2C2C\",\n  \"--sendbird-dark-background-400\": \"#393939\",\n  \"--sendbird-dark-background-300\": \"#A8A8A8\",\n  \"--sendbird-dark-background-200\": \"#D9D9D9\",\n  \"--sendbird-dark-background-100\": \"#F0F0F0\",\n  \"--sendbird-dark-background-50\": \"#FFFFFF\",\n  \"--sendbird-dark-overlay\": \"rgba(0, 0, 0, 0.32)\",\n  \"--sendbird-dark-onlight-01\": \"rgba(0, 0, 0, 0.88)\",\n  \"--sendbird-dark-onlight-02\": \"rgba(0, 0, 0, 0.50)\",\n  \"--sendbird-dark-onlight-03\": \"rgba(0, 0, 0, 0.38)\",\n  \"--sendbird-dark-onlight-04\": \"rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-dark-ondark-01\": \"rgba(255, 255, 255, 0.88)\",\n  \"--sendbird-dark-ondark-02\": \"rgba(255, 255, 255, 0.50)\",\n  \"--sendbird-dark-ondark-03\": \"rgba(255, 255, 255, 0.38)\",\n  \"--sendbird-dark-ondark-04\": \"rgba(255, 255, 255, 0.12)\",\n  \"--sendbird-dark-shadow-01\": \"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-dark-shadow-02\": \"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-dark-shadow-03\": \"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-dark-shadow-04\": \"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-dark-shadow-message-input\": \"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-light-primary-500\": \"#4d2aa6\",\n  \"--sendbird-light-primary-400\": \"#6440C4\",\n  \"--sendbird-light-primary-300\": \"#7B53EF\",\n  \"--sendbird-light-primary-200\": \"#9E8CF5\",\n  \"--sendbird-light-primary-100\": \"#E2DFFF\",\n  \"--sendbird-light-secondary-500\": \"#007A7A\",\n  \"--sendbird-light-secondary-400\": \"#189A8D\",\n  \"--sendbird-light-secondary-300\": \"#2EBA9F\",\n  \"--sendbird-light-secondary-200\": \"#6FD6BE\",\n  \"--sendbird-light-secondary-100\": \"#AEF2DC\",\n  \"--sendbird-light-information-100\": \"#b2d9ff\",\n  \"--sendbird-light-error-500\": \"#A30E2D\",\n  \"--sendbird-light-error-400\": \"#C11F41\",\n  \"--sendbird-light-error-300\": \"#E53157\",\n  \"--sendbird-light-error-200\": \"#FF6183\",\n  \"--sendbird-light-error-100\": \"#FFABBD\",\n  \"--sendbird-light-background-700\": \"#000000\",\n  \"--sendbird-light-background-600\": \"#161616\",\n  \"--sendbird-light-background-500\": \"#2C2C2C\",\n  \"--sendbird-light-background-400\": \"#393939\",\n  \"--sendbird-light-background-300\": \"#A8A8A8\",\n  \"--sendbird-light-background-200\": \"#D9D9D9\",\n  \"--sendbird-light-background-100\": \"#F0F0F0\",\n  \"--sendbird-light-background-50\": \" #FFFFFF\",\n  \"--sendbird-light-overlay\": \"rgba(0, 0, 0, 0.32)\",\n  \"--sendbird-light-onlight-01\": \"rgba(0, 0, 0, 0.88)\",\n  \"--sendbird-light-onlight-02\": \"rgba(0, 0, 0, 0.50)\",\n  \"--sendbird-light-onlight-03\": \"rgba(0, 0, 0, 0.38)\",\n  \"--sendbird-light-onlight-04\": \"rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-light-ondark-01\": \"rgba(255, 255, 255, 0.88)\",\n  \"--sendbird-light-ondark-02\": \"rgba(255, 255, 255, 0.50)\",\n  \"--sendbird-light-ondark-03\": \"rgba(255, 255, 255, 0.38)\",\n  \"--sendbird-light-ondark-04\": \"rgba(255, 255, 255, 0.12)\",\n  \"--sendbird-light-shadow-01\": \"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-light-shadow-02\": \"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-light-shadow-03\": \"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-light-shadow-04\": \"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)\",\n  \"--sendbird-light-shadow-message-input\": \"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)\"\n};\nvar isEmpty$1 = function(obj) {\n  if (obj === null || obj === void 0) {\n    return true;\n  }\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return JSON.stringify(obj) === JSON.stringify({});\n};\nvar useTheme = function(overrides) {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useLayoutEffect\"])(function() {\n    if (!isEmpty$1(overrides)) {\n      var variables = __assign(__assign({}, DEFAULT_COLOR_SET), mapColorKeys(overrides));\n      cssVars({ variables });\n    }\n  }, [overrides]);\n};\nvar MESSAGE_TEMPLATES_FETCH_LIMIT = 20;\nvar getProcessedTemplate = function(parsedTemplate) {\n  return {\n    version: Number(parsedTemplate.ui_template.version),\n    uiTemplate: JSON.stringify(parsedTemplate.ui_template.body.items),\n    colorVariables: parsedTemplate.color_variables\n  };\n};\nvar getProcessedTemplatesMap = function(parsedTemplates) {\n  var processedTemplates = {};\n  parsedTemplates.forEach(function(template) {\n    processedTemplates[template.key] = getProcessedTemplate(template);\n  });\n  return processedTemplates;\n};\nfunction useMessageTemplateUtils(_a2) {\n  var _this = this;\n  var _b2;\n  var sdk = _a2.sdk, logger = _a2.logger, appInfoStore = _a2.appInfoStore, actions = _a2.actions;\n  var messageTemplatesInfo = appInfoStore === null || appInfoStore === void 0 ? void 0 : appInfoStore.messageTemplatesInfo;\n  var getCachedTemplate = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(key) {\n    var _a3, _b3;\n    if (!messageTemplatesInfo)\n      return null;\n    var cachedTemplate = null;\n    var cachedMessageTemplates = (_a3 = messageTemplatesInfo === null || messageTemplatesInfo === void 0 ? void 0 : messageTemplatesInfo.templatesMap) !== null && _a3 !== void 0 ? _a3 : null;\n    if (cachedMessageTemplates) {\n      cachedTemplate = (_b3 = cachedMessageTemplates[key]) !== null && _b3 !== void 0 ? _b3 : null;\n    }\n    return cachedTemplate;\n  }, [appInfoStore === null || appInfoStore === void 0 ? void 0 : appInfoStore.messageTemplatesInfo]);\n  var fetchAllMessageTemplates = function(readySdk) {\n    return __awaiter$5(_this, void 0, void 0, function() {\n      var hasMore, paginationToken, fetchedTemplates, res;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            hasMore = true;\n            paginationToken = null;\n            fetchedTemplates = [];\n            _a3.label = 1;\n          case 1:\n            if (!hasMore) return [3, 3];\n            return [4, readySdk.message.getMessageTemplatesByToken(paginationToken, { limit: MESSAGE_TEMPLATES_FETCH_LIMIT })];\n          case 2:\n            res = _a3.sent();\n            hasMore = res.hasMore;\n            paginationToken = res.token;\n            res.templates.forEach(function(messageTemplate) {\n              fetchedTemplates.push(JSON.parse(messageTemplate.template));\n            });\n            return [3, 1];\n          case 3:\n            return [2, fetchedTemplates];\n        }\n      });\n    });\n  };\n  var initializeMessageTemplatesInfo = function(readySdk) {\n    return __awaiter$5(_this, void 0, void 0, function() {\n      var sdkMessageTemplateToken, cachedMessageTemplatesToken, cachedMessageTemplates, parsedTemplates, newMessageTemplatesInfo, parsedTemplates, newMessageTemplatesInfo;\n      var _a3;\n      return __generator(this, function(_b3) {\n        switch (_b3.label) {\n          case 0:\n            sdkMessageTemplateToken = (_a3 = readySdk.appInfo) === null || _a3 === void 0 ? void 0 : _a3.messageTemplateInfo.token;\n            if (!sdkMessageTemplateToken) {\n              localStorage.removeItem(CACHED_MESSAGE_TEMPLATES_TOKEN_KEY);\n              localStorage.removeItem(CACHED_MESSAGE_TEMPLATES_KEY);\n              return [\n                2\n                /*return*/\n              ];\n            }\n            cachedMessageTemplatesToken = localStorage.getItem(CACHED_MESSAGE_TEMPLATES_TOKEN_KEY);\n            cachedMessageTemplates = localStorage.getItem(CACHED_MESSAGE_TEMPLATES_KEY);\n            if (!(!cachedMessageTemplatesToken || cachedMessageTemplatesToken !== sdkMessageTemplateToken)) return [3, 2];\n            return [4, fetchAllMessageTemplates(readySdk)];\n          case 1:\n            parsedTemplates = _b3.sent();\n            newMessageTemplatesInfo = {\n              token: sdkMessageTemplateToken,\n              templatesMap: getProcessedTemplatesMap(parsedTemplates)\n            };\n            actions.initMessageTemplateInfo({ payload: newMessageTemplatesInfo });\n            localStorage.setItem(CACHED_MESSAGE_TEMPLATES_TOKEN_KEY, sdkMessageTemplateToken);\n            localStorage.setItem(CACHED_MESSAGE_TEMPLATES_KEY, JSON.stringify(parsedTemplates));\n            return [3, 3];\n          case 2:\n            if (cachedMessageTemplatesToken && cachedMessageTemplatesToken === sdkMessageTemplateToken && cachedMessageTemplates) {\n              parsedTemplates = JSON.parse(cachedMessageTemplates);\n              newMessageTemplatesInfo = {\n                token: sdkMessageTemplateToken,\n                templatesMap: getProcessedTemplatesMap(parsedTemplates)\n              };\n              actions.initMessageTemplateInfo({ payload: newMessageTemplatesInfo });\n            }\n            _b3.label = 3;\n          case 3:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  };\n  var updateMessageTemplatesInfo = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(templateKeys, messageId, requestedAt) {\n    return __awaiter$5(_this, void 0, void 0, function() {\n      var newParsedTemplates, hasMore, token, result, e_1, cachedMessageTemplates, parsedTemplates_1, existingKeys_1;\n      var _a3;\n      return __generator(this, function(_b3) {\n        switch (_b3.label) {\n          case 0:\n            actions.upsertWaitingTemplateKeys({ keys: templateKeys, requestedAt });\n            newParsedTemplates = [];\n            _b3.label = 1;\n          case 1:\n            _b3.trys.push([1, 5, , 6]);\n            hasMore = true;\n            token = null;\n            _b3.label = 2;\n          case 2:\n            if (!hasMore) return [3, 4];\n            return [4, sdk.message.getMessageTemplatesByToken(token, {\n              keys: templateKeys\n            })];\n          case 3:\n            result = _b3.sent();\n            result.templates.forEach(function(newTemplate) {\n              newParsedTemplates.push(JSON.parse(newTemplate.template));\n            });\n            hasMore = result.hasMore;\n            token = result.token;\n            return [3, 2];\n          case 4:\n            return [3, 6];\n          case 5:\n            e_1 = _b3.sent();\n            (_a3 = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a3 === void 0 ? void 0 : _a3.call(logger, \"Sendbird | fetchProcessedMessageTemplates failed\", e_1, templateKeys);\n            return [3, 6];\n          case 6:\n            if (newParsedTemplates.length > 0) {\n              cachedMessageTemplates = localStorage.getItem(CACHED_MESSAGE_TEMPLATES_KEY);\n              if (cachedMessageTemplates) {\n                parsedTemplates_1 = JSON.parse(cachedMessageTemplates);\n                existingKeys_1 = parsedTemplates_1.map(function(parsedTemplate) {\n                  return parsedTemplate.key;\n                });\n                newParsedTemplates.forEach(function(newParsedTemplate) {\n                  if (!existingKeys_1.includes(newParsedTemplate.key)) {\n                    parsedTemplates_1.push(newParsedTemplate);\n                  }\n                });\n                localStorage.setItem(CACHED_MESSAGE_TEMPLATES_KEY, JSON.stringify(parsedTemplates_1));\n              } else {\n                localStorage.setItem(CACHED_MESSAGE_TEMPLATES_KEY, JSON.stringify([newParsedTemplates]));\n              }\n              actions.upsertMessageTemplates({\n                payload: newParsedTemplates.map(function(newParsedTemplate) {\n                  return {\n                    key: newParsedTemplate.key,\n                    template: getProcessedTemplate(newParsedTemplate)\n                  };\n                })\n              });\n            } else {\n              actions.markErrorWaitingTemplateKeys({\n                keys: templateKeys,\n                messageId\n              });\n            }\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [\n    actions.upsertMessageTemplates,\n    actions.upsertWaitingTemplateKeys,\n    (_b2 = sdk === null || sdk === void 0 ? void 0 : sdk.message) === null || _b2 === void 0 ? void 0 : _b2.getMessageTemplatesByToken\n  ]);\n  return {\n    getCachedTemplate,\n    updateMessageTemplatesInfo,\n    initializeMessageTemplatesInfo\n  };\n}\nvar useHTMLTextDirection = function(direction) {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var targetElement = document.getElementById(VOICE_PLAYER_ROOT_ID);\n    targetElement.parentElement.dir = direction;\n  }, [direction]);\n};\nfunction useMarkAsReadScheduler(_a2, _b2) {\n  var isConnected = _a2.isConnected;\n  var logger = _b2.logger;\n  var markAsReadScheduler = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return schedulerFactory({\n      logger,\n      cb: function(channel) {\n        try {\n          channel.markAsRead();\n        } catch (error) {\n          logger.warning(\"Channel: Mark as delivered failed\", { channel, error });\n        }\n      }\n    });\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    if (!isConnected) {\n      markAsReadScheduler.clear();\n    }\n  }, [isConnected]);\n  useUnmount(function() {\n    markAsReadScheduler.clear();\n  });\n  return markAsReadScheduler;\n}\nvar SendbirdContextManager = function(_a2) {\n  var _b2;\n  var appId = _a2.appId, userId = _a2.userId, accessToken = _a2.accessToken, customApiHost = _a2.customApiHost, customWebSocketHost = _a2.customWebSocketHost, configureSession = _a2.configureSession, _c = _a2.theme, theme = _c === void 0 ? \"light\" : _c, logger = _a2.logger, _d = _a2.config, config2 = _d === void 0 ? {} : _d, _e2 = _a2.nickname, nickname = _e2 === void 0 ? \"\" : _e2, colorSet = _a2.colorSet, _f = _a2.profileUrl, profileUrl = _f === void 0 ? \"\" : _f, voiceRecord = _a2.voiceRecord, userListQuery = _a2.userListQuery, _g2 = _a2.imageCompression, imageCompression = _g2 === void 0 ? {} : _g2, _h = _a2.allowProfileEdit, allowProfileEdit = _h === void 0 ? false : _h, _j = _a2.disableMarkAsDelivered, disableMarkAsDelivered = _j === void 0 ? false : _j, renderUserProfile = _a2.renderUserProfile, _onUserProfileMessage = _a2.onUserProfileMessage, _onStartDirectMessage = _a2.onStartDirectMessage, _k = _a2.isUserIdUsedForNickname, isUserIdUsedForNickname = _k === void 0 ? true : _k, sdkInitParams = _a2.sdkInitParams, customExtensionParams = _a2.customExtensionParams, _l = _a2.isMultipleFilesMessageEnabled, isMultipleFilesMessageEnabled = _l === void 0 ? false : _l, eventHandlers = _a2.eventHandlers, _m = _a2.htmlTextDirection, htmlTextDirection = _m === void 0 ? \"ltr\" : _m, _o = _a2.forceLeftToRightMessageLayout, forceLeftToRightMessageLayout = _o === void 0 ? false : _o;\n  var onStartDirectMessage = _onStartDirectMessage !== null && _onStartDirectMessage !== void 0 ? _onStartDirectMessage : _onUserProfileMessage;\n  var _p = config2.userMention, userMention = _p === void 0 ? {} : _p, _q = config2.isREMUnitEnabled, isREMUnitEnabled = _q === void 0 ? false : _q, customPubSub = config2.pubSub;\n  var isMobile = useMediaQueryContext().isMobile;\n  var pubSub = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(customPubSub !== null && customPubSub !== void 0 ? customPubSub : pubSubFactory())[0];\n  var _r2 = useSendbirdStore(), state = _r2.state, updateState = _r2.updateState;\n  var actions = useSendbird().actions;\n  var _s2 = state.stores, sdkStore = _s2.sdkStore, appInfoStore = _s2.appInfoStore;\n  var _t2 = useUIKitConfig(), configs = _t2.configs, configsWithAppAttr = _t2.configsWithAppAttr, initDashboardConfigs = _t2.initDashboardConfigs;\n  var sdkInitialized = sdkStore.initialized;\n  var sdk = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.sdk;\n  var _u = (_b2 = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) !== null && _b2 !== void 0 ? _b2 : {}, uploadSizeLimit = _u.uploadSizeLimit, multipleFilesMessageFileCountLimit = _u.multipleFilesMessageFileCountLimit;\n  useTheme(colorSet);\n  var _v = useMessageTemplateUtils({\n    sdk,\n    logger,\n    appInfoStore,\n    actions\n  }), getCachedTemplate = _v.getCachedTemplate, updateMessageTemplatesInfo = _v.updateMessageTemplatesInfo, initializeMessageTemplatesInfo = _v.initializeMessageTemplatesInfo;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    actions.connect({\n      appId,\n      userId,\n      accessToken,\n      isUserIdUsedForNickname,\n      isMobile,\n      logger,\n      nickname,\n      profileUrl,\n      configureSession,\n      customApiHost,\n      customWebSocketHost,\n      sdkInitParams,\n      customExtensionParams,\n      initDashboardConfigs,\n      eventHandlers,\n      initializeMessageTemplatesInfo\n    });\n  }, [appId, userId]);\n  useUnmount(function() {\n    actions.disconnect({ logger });\n  });\n  var _w = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(theme), currentTheme = _w[0], setCurrentTheme = _w[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setCurrentTheme(theme);\n  }, [theme]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var body = document.querySelector(\"body\");\n    body === null || body === void 0 ? void 0 : body.classList.remove(\"sendbird-experimental__rem__units\");\n    if (isREMUnitEnabled) {\n      body === null || body === void 0 ? void 0 : body.classList.add(\"sendbird-experimental__rem__units\");\n    }\n  }, [isREMUnitEnabled]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    logger.info(\"Setup theme\", \"Theme: \".concat(currentTheme));\n    try {\n      var body = document.querySelector(\"body\");\n      body === null || body === void 0 ? void 0 : body.classList.remove(\"sendbird-theme--light\");\n      body === null || body === void 0 ? void 0 : body.classList.remove(\"sendbird-theme--dark\");\n      body === null || body === void 0 ? void 0 : body.classList.add(\"sendbird-theme--\".concat(currentTheme || \"light\"));\n      logger.info(\"Finish setup theme\");\n    } catch (e3) {\n      logger.warning(\"Setup theme failed\", \"\".concat(e3));\n    }\n    return function() {\n      try {\n        var body2 = document.querySelector(\"body\");\n        body2 === null || body2 === void 0 ? void 0 : body2.classList.remove(\"sendbird-theme--light\");\n        body2 === null || body2 === void 0 ? void 0 : body2.classList.remove(\"sendbird-theme--dark\");\n      } catch (_a3) {\n      }\n    };\n  }, [currentTheme]);\n  useHTMLTextDirection(htmlTextDirection);\n  var isOnline = useOnlineStatus(sdkStore.sdk, logger);\n  var markAsReadScheduler = useMarkAsReadScheduler({ isConnected: isOnline }, { logger });\n  var markAsDeliveredScheduler = useMarkAsDeliveredScheduler({ isConnected: isOnline }, { logger });\n  var uikitMultipleFilesMessageLimit = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return Math.min(DEFAULT_MULTIPLE_FILES_MESSAGE_LIMIT, multipleFilesMessageFileCountLimit !== null && multipleFilesMessageFileCountLimit !== void 0 ? multipleFilesMessageFileCountLimit : Number.MAX_SAFE_INTEGER);\n  }, [multipleFilesMessageFileCountLimit]);\n  var emojiManager = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return new EmojiManager({\n      sdk,\n      logger\n    });\n  }, [sdkStore.initialized]);\n  var uikitConfigs = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      common: {\n        enableUsingDefaultUserProfile: configs.common.enableUsingDefaultUserProfile\n      },\n      groupChannel: {\n        enableOgtag: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableOgtag,\n        enableTypingIndicator: configs.groupChannel.channel.enableTypingIndicator,\n        enableReactions: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactions,\n        enableMention: configs.groupChannel.channel.enableMention,\n        replyType: configs.groupChannel.channel.replyType,\n        threadReplySelectType: configs.groupChannel.channel.threadReplySelectType,\n        enableVoiceMessage: configs.groupChannel.channel.enableVoiceMessage,\n        enableDocument: configs.groupChannel.channel.input.enableDocument,\n        typingIndicatorTypes: configs.groupChannel.channel.typingIndicatorTypes,\n        enableFeedback: configs.groupChannel.channel.enableFeedback,\n        enableSuggestedReplies: configs.groupChannel.channel.enableSuggestedReplies,\n        showSuggestedRepliesFor: configs.groupChannel.channel.showSuggestedRepliesFor,\n        suggestedRepliesDirection: configs.groupChannel.channel.suggestedRepliesDirection,\n        enableMarkdownForUserMessage: configs.groupChannel.channel.enableMarkdownForUserMessage,\n        enableFormTypeMessage: configs.groupChannel.channel.enableFormTypeMessage,\n        enableReactionsSupergroup: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactionsSupergroup\n      },\n      groupChannelList: {\n        enableTypingIndicator: configs.groupChannel.channelList.enableTypingIndicator,\n        enableMessageReceiptStatus: configs.groupChannel.channelList.enableMessageReceiptStatus\n      },\n      groupChannelSettings: {\n        enableMessageSearch: sdkInitialized && configsWithAppAttr(sdk).groupChannel.setting.enableMessageSearch\n      },\n      openChannel: {\n        enableOgtag: sdkInitialized && configsWithAppAttr(sdk).openChannel.channel.enableOgtag,\n        enableDocument: configs.openChannel.channel.input.enableDocument\n      }\n    };\n  }, [\n    sdkInitialized,\n    configs.common,\n    configs.groupChannel.channel,\n    configs.groupChannel.channelList,\n    configs.groupChannel.setting,\n    configs.openChannel.channel\n  ]);\n  var storeState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      stores: {\n        sdkStore: state.stores.sdkStore,\n        userStore: state.stores.userStore,\n        appInfoStore: state.stores.appInfoStore\n      }\n    };\n  }, [\n    state.stores.sdkStore,\n    state.stores.userStore,\n    state.stores.appInfoStore\n  ]);\n  var uikitUploadSizeLimit = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return uploadSizeLimit !== null && uploadSizeLimit !== void 0 ? uploadSizeLimit : DEFAULT_UPLOAD_SIZE_LIMIT;\n  }, [uploadSizeLimit, DEFAULT_UPLOAD_SIZE_LIMIT]);\n  var configImageCompression = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return __assign({ compressionRate: 0.7, outputFormat: \"preserve\" }, imageCompression);\n  }, [imageCompression]);\n  var configVoiceRecord = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3, _b3;\n    return {\n      maxRecordingTime: (_a3 = voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.maxRecordingTime) !== null && _a3 !== void 0 ? _a3 : VOICE_RECORDER_DEFAULT_MAX,\n      minRecordingTime: (_b3 = voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.minRecordingTime) !== null && _b3 !== void 0 ? _b3 : VOICE_RECORDER_DEFAULT_MIN\n    };\n  }, [\n    voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.maxRecordingTime,\n    voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.minRecordingTime\n  ]);\n  var configUserMention = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      maxMentionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || 10,\n      maxSuggestionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || 15\n    };\n  }, [\n    userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount,\n    userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount\n  ]);\n  var deprecatedConfigs = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      disableUserProfile: !configs.common.enableUsingDefaultUserProfile,\n      isReactionEnabled: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactions,\n      isMentionEnabled: configs.groupChannel.channel.enableMention,\n      isVoiceMessageEnabled: configs.groupChannel.channel.enableVoiceMessage,\n      replyType: getCaseResolvedReplyType(configs.groupChannel.channel.replyType).upperCase,\n      isTypingIndicatorEnabledOnChannelList: configs.groupChannel.channelList.enableTypingIndicator,\n      isMessageReceiptStatusEnabledOnChannelList: configs.groupChannel.channelList.enableMessageReceiptStatus,\n      showSearchIcon: sdkInitialized && configsWithAppAttr(sdk).groupChannel.setting.enableMessageSearch\n    };\n  }, [\n    sdkInitialized,\n    configsWithAppAttr,\n    configs.common.enableUsingDefaultUserProfile,\n    configs.groupChannel.channel.enableReactions,\n    configs.groupChannel.channel.enableMention,\n    configs.groupChannel.channel.enableVoiceMessage,\n    configs.groupChannel.channel.replyType,\n    configs.groupChannel.channelList.enableTypingIndicator,\n    configs.groupChannel.channelList.enableMessageReceiptStatus,\n    configs.groupChannel.setting.enableMessageSearch\n  ]);\n  var configState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      config: __assign(__assign({\n        disableMarkAsDelivered,\n        renderUserProfile,\n        onStartDirectMessage,\n        onUserProfileMessage: onStartDirectMessage,\n        // legacy of onStartDirectMessage\n        allowProfileEdit,\n        isOnline,\n        userId,\n        appId,\n        accessToken,\n        theme: currentTheme,\n        setCurrentTheme,\n        setCurrenttheme: setCurrentTheme,\n        // deprecated: typo\n        isMultipleFilesMessageEnabled,\n        uikitMultipleFilesMessageLimit,\n        logger,\n        pubSub,\n        userListQuery,\n        htmlTextDirection,\n        forceLeftToRightMessageLayout,\n        markAsReadScheduler,\n        markAsDeliveredScheduler,\n        uikitUploadSizeLimit,\n        imageCompression: configImageCompression,\n        voiceRecord: configVoiceRecord,\n        userMention: configUserMention\n      }, uikitConfigs), deprecatedConfigs)\n    };\n  }, [\n    disableMarkAsDelivered,\n    renderUserProfile,\n    onStartDirectMessage,\n    allowProfileEdit,\n    isOnline,\n    userId,\n    appId,\n    accessToken,\n    currentTheme,\n    setCurrentTheme,\n    isMultipleFilesMessageEnabled,\n    uikitMultipleFilesMessageLimit,\n    logger,\n    pubSub,\n    userListQuery,\n    htmlTextDirection,\n    forceLeftToRightMessageLayout,\n    markAsReadScheduler,\n    markAsDeliveredScheduler,\n    uikitUploadSizeLimit,\n    configImageCompression,\n    configVoiceRecord,\n    configUserMention,\n    uikitConfigs,\n    deprecatedConfigs\n  ]);\n  var utilsState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      utils: {\n        updateMessageTemplatesInfo,\n        getCachedTemplate\n      }\n    };\n  }, [\n    updateMessageTemplatesInfo,\n    getCachedTemplate\n  ]);\n  useDeepCompareEffect(function() {\n    updateState(__assign(__assign(__assign(__assign({}, storeState), utilsState), configState), { eventHandlers, emojiManager }));\n  }, [\n    storeState,\n    configState,\n    eventHandlers,\n    emojiManager,\n    utilsState\n  ]);\n  return null;\n};\nvar InternalSendbirdProvider = function(props) {\n  var _a2, _b2, _c, _d, _e2, _f, _g2, _h, _j;\n  var children = props.children, stringSet2 = props.stringSet, breakpoint = props.breakpoint, dateLocale = props.dateLocale;\n  var defaultProps = deleteNullish({\n    config: {\n      renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,\n      onStartDirectMessage: props === null || props === void 0 ? void 0 : props.onStartDirectMessage,\n      allowProfileEdit: props === null || props === void 0 ? void 0 : props.allowProfileEdit,\n      appId: props === null || props === void 0 ? void 0 : props.appId,\n      userId: props === null || props === void 0 ? void 0 : props.userId,\n      accessToken: props === null || props === void 0 ? void 0 : props.accessToken,\n      theme: props === null || props === void 0 ? void 0 : props.theme,\n      htmlTextDirection: props === null || props === void 0 ? void 0 : props.htmlTextDirection,\n      forceLeftToRightMessageLayout: props === null || props === void 0 ? void 0 : props.forceLeftToRightMessageLayout,\n      pubSub: (_a2 = props === null || props === void 0 ? void 0 : props.config) === null || _a2 === void 0 ? void 0 : _a2.pubSub,\n      logger: props === null || props === void 0 ? void 0 : props.logger,\n      userListQuery: props === null || props === void 0 ? void 0 : props.userListQuery,\n      voiceRecord: {\n        maxRecordingTime: (_c = (_b2 = props === null || props === void 0 ? void 0 : props.voiceRecord) === null || _b2 === void 0 ? void 0 : _b2.maxRecordingTime) !== null && _c !== void 0 ? _c : VOICE_RECORDER_DEFAULT_MAX,\n        minRecordingTime: (_e2 = (_d = props === null || props === void 0 ? void 0 : props.voiceRecord) === null || _d === void 0 ? void 0 : _d.minRecordingTime) !== null && _e2 !== void 0 ? _e2 : VOICE_RECORDER_DEFAULT_MIN\n      },\n      userMention: {\n        maxMentionCount: ((_g2 = (_f = props === null || props === void 0 ? void 0 : props.config) === null || _f === void 0 ? void 0 : _f.userMention) === null || _g2 === void 0 ? void 0 : _g2.maxMentionCount) || 10,\n        maxSuggestionCount: ((_j = (_h = props === null || props === void 0 ? void 0 : props.config) === null || _h === void 0 ? void 0 : _h.userMention) === null || _j === void 0 ? void 0 : _j.maxSuggestionCount) || 15\n      },\n      imageCompression: __assign({ compressionRate: 0.7, outputFormat: \"preserve\" }, props === null || props === void 0 ? void 0 : props.imageCompression),\n      disableMarkAsDelivered: props === null || props === void 0 ? void 0 : props.disableMarkAsDelivered,\n      isMultipleFilesMessageEnabled: props === null || props === void 0 ? void 0 : props.isMultipleFilesMessageEnabled\n    },\n    eventHandlers: props === null || props === void 0 ? void 0 : props.eventHandlers\n  });\n  var storeRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(createSendbirdContextStore(defaultProps));\n  var localeStringSet = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return __assign(__assign({}, getStringSet(\"en\")), stringSet2);\n  }, [stringSet2]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    SendbirdContext.Provider,\n    { value: storeRef.current },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      MediaQueryProvider,\n      { logger: storeRef.current.getState().config.logger, breakpoint },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        LocalizationProvider,\n        { stringSet: localeStringSet, dateLocale },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          VoiceMessageProvider,\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GlobalModalProvider, null, children)\n        )\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EmojiReactionListRoot, null),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalRoot, null),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuRoot, null)\n  );\n};\nvar SendbirdContextProvider = function(props) {\n  var children = props.children, config2 = props.config;\n  var logLevel = config2 === null || config2 === void 0 ? void 0 : config2.logLevel;\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(LoggerFactory(logLevel)), logger = _a2[0], setLogger = _a2[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setLogger(LoggerFactory(logLevel));\n  }, [logLevel]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    InternalSendbirdProvider,\n    __assign({}, props, { logger }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SendbirdContextManager, __assign({}, props, { logger })),\n    children\n  );\n};\nvar SendbirdProvider = function(props) {\n  var localConfigs = uikitConfigMapper({\n    legacyConfig: {\n      replyType: props.replyType,\n      isMentionEnabled: props.isMentionEnabled,\n      isReactionEnabled: props.isReactionEnabled,\n      disableUserProfile: props.disableUserProfile,\n      isVoiceMessageEnabled: props.isVoiceMessageEnabled,\n      isTypingIndicatorEnabledOnChannelList: props.isTypingIndicatorEnabledOnChannelList,\n      isMessageReceiptStatusEnabledOnChannelList: props.isMessageReceiptStatusEnabledOnChannelList,\n      showSearchIcon: props.showSearchIcon\n    },\n    uikitOptions: props.uikitOptions\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    UIKitConfigProvider,\n    { storage: uikitConfigStorage, localConfigs: {\n      common: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.common,\n      groupChannel: {\n        channel: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannel,\n        channelList: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannelList,\n        setting: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannelSettings\n      },\n      openChannel: {\n        channel: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.openChannel\n      }\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SendbirdContextProvider, __assign({}, props))\n  );\n};\nconst SendIcon$1 = ({ width = 26, height = 26, color: color2 = \"#B4B4BE\" }) => {\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\n    \"svg\",\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width,\n      height,\n      viewBox: \"0 0 26 26\",\n      fill: \"none\",\n      children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"g\", { clipPath: \"url(#clip0_8040_135368)\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n          \"path\",\n          {\n            d: \"M21.2959 14.7941L10.5021 19.3473C8.93209 20.0137 7.47499 18.1856 8.47599 16.8019L10.7639 13.6316C10.7852 13.6316 10.7958 13.6315 10.817 13.6316L14.3625 13.637C14.7765 13.6377 15.1104 13.3038 15.1097 12.8899C15.1144 12.4706 14.7795 12.1357 14.3602 12.1403L10.8201 12.1295C10.7989 12.1295 10.7776 12.1294 10.7617 12.1347L8.34155 8.79261C7.34693 7.41643 8.76665 5.60346 10.344 6.23748L21.2524 10.6381C23.1165 11.3894 23.1471 14.0168 21.2959 14.7941Z\",\n            fill: color2\n          }\n        ) }),\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"defs\", { children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"clipPath\", { id: \"clip0_8040_135368\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n          \"rect\",\n          {\n            width: \"18\",\n            height: \"18\",\n            fill: \"white\",\n            transform: \"translate(13) rotate(45)\"\n          }\n        ) }) })\n      ]\n    }\n  );\n};\nconst BotLogo = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAMAAAC4uKf/AAAAclBMVEXj6/cAAADU3/Dc5fTp8fvy+P3F0uofFBrSm4kNBwvdrJ7ChnYqICi1w+BDLTQyKzZAN0ZMRFWsdGZnRETowruSXlXd6PPe5/Te5/Sus8x1ibVrXG+cm7NYaJQuS5CWpMcTHmfg6fXg6fSCeY20wd+kqsb/F7czAAAAJnRSTlP/AP//////////////////////////F63X/////v////+BUf+QQEOKnCoAAA0HSURBVHicrZoLX6s4EMVjEgK0hEcRlUKtld3v/xX3nAm01ELx7m6u+quPy78zc+aRgHr5g/X2fXl///hQsj4+3t8v329/8v/VH3DU4voD4q9gb2ugK/B3vG3YJmni/XfY2+UJwNx99/G+Zd5z2NuaUWb8h1dz4gbuGWwdZcbPn8Zt4NZhaw6cXd6AeLMsvDCXfwH7/lgxy9pIPvAqsoZrBE2fH6tSWYGt6sJGyrdtP3QDPnodcKNDJ+euGrcMe1sxy0a674qsyOI4zrIsLgc3WTe6NNA+liO3CPte9WBfglJkYRWAFoONbsbJp2AXjVuCrbrQdiAVEws08iodaGLcaJ1ZduUjbFXwka7EGDgweLHgKouRNi41vVhIggfYWrhU5Iu4yNI0FdDoR9LKytg72Mh7DNxP2BrLRK6IYVFKWhpfaSVYRWfVkm0PNPU7lrKmJIuwmOalwayR1i868oGmfsdSUZeK4sWNqdCAQcRK0ko/c+Rs/aDdw1abSdRmwXXxmGEjjbyyqsphZtrcpe/rsPV2YrugizwXv9V1nmdpUZVhgdZGD2Y9ZoD6FSvymYgir7G6w+HQNHUdp/Bf4FVltwIz38uwt1WWigbYFYPVNIfDPkmS/aGp8zgGrCLwiWnmbRG2Kg5IsWK0ivqw3wO1S3a7JGlqFKtA+xm1NZHcYE/6P+TBwlE3YtVOVnKo8ywTqyr54pYFOQ/bFbZWfIMXM8Qsrw8z2C5pclZGgZHXr5l2C9sVtu5ErKpA1agZr/0Ee93tayb21bROqRXY1ZET7IkTjfUFYNnImmCvOzGtnEyrVhLbGH25hz1RIspiXxRpmjdzL75iHeoyFOJSTOtXYZMiR9jTOTQaWO1rKnF3QymV1KxXoWBhDYtu1PzyPoc9M+washpBSyZWMmDl7GZFqFgIml6gaS0fbzPYU8OsLxmyMocVFXGvu6SDNXVXA1WFagw/dotB07Leb7DnhkV9BlgOdaBs1KThBcK3e93XgFXBk6CtBE1ob1fY850DsgywmgWRVXFPy1CvgNs3rB6TSsqloBFER16usKc5hjEngxibBm7McgATqB6YrCjreoKJSpaCNsKCaWqjeACmKyg/bup4KNFVAqwpBwDiPBR9GQ+Ksmp/+FEbsUpglxH23IvWlTlg0lXqrqkPzGd8h7A1dejUmIREJfdB01d5TBJRm7qPPGFZCBkZED41ggQHjSbBxNBWfwbt6sPRj2rLiyj5OXK6gCJkNXtm9CubDHoNy6MMk2gARdk59RN2s+0isI1dLIsV0kzKoohwhElu7/OYA3KBBiRBUzMn6jvD6Ee15UUWqxEGawKMeR1q1muTcvxBB8ryMmfFCld+cKL4UW158QpjpSIsGZ0YYEksC6YBBvGbK+qqw2l9A/Zsh85lu6tlYO33I2SfBHfmcZjuZLJD0AIsiP7OMARNbYVshMWMGZ1IywgK1N2uIepqWqsmxB1nDJp62WKZirCUs47IUYTCVDuwbgmMfkQqgiZBexRHWC9qSx9WlwJr9vsmwEZPkoa1H/1I+ed5N+l96i7z9aa29CEwjNv1XtIaWR2aaJKwJiOOuWw4kGx0ZOVV0IVZ8OO32tSHK4scsBziaDhgBT9i3EG9EliacQ9VSK7lvR39Z8wD7aI29eFyzPW4EB3Y5MOrMTZS6jU57GTSAiyW2Zx+vAXNLNDefwErAYO0G5iG7tkEBAS5k+FnT7PiETYL2sJ6V097mcSsQo1FR4sJu8XsdZx9Gtmx0Y0lgjbClmkfv4DVHA9HiYx6TKaSRS+mo2llRtiKVQG2tW6wdCJNI5bM4PIbqSFoa3kuclxbv4LJMUtKQd5ogbXHLyfTSrS1/wVWyK693o97pt3Y0ti+xbL/C2a6PJy1hDKyT8buIi3gQFgsgsQAhH5dtf8dxppE25pksktQKJc1j0fSmMdYmBDy7j/CBqSZFECeEDRSP1irGrqUME6VsAuwKo+fw7b1iJFeyh9pWROqsWyfwsjDdwI5lrINBWxd+9t5RlgunhphTaj8wULCihEWYxLPytY9gW0f2hMmIqDs7lkCC7+G+bAsy/v1pN6ujTdYyqDV9zCoscgLOUooA6x7BttqMQpqzANrDktusFLOO4sKsAq7/HWFXDabp0JST24ErZ7bJTAMA3AhLAMPSYfquEb73h4LWlxrOorjNm0BVrIHAUbtZ3X/2DbDetseeAapiyFmqEfNHMYGB8MIo/YDtW5XaJujXNSWwYepSC7AJrsgxqavhCGJlrHNFgibVgst9H1rSI10F/I5rCqv72CHpvUnVGAZCWKepFXs6/nQOlzd+3t9PB2/bRS5rg7nmSKQ8ixHSnJWFgxz1p/zXLY59AAKcYdVwZdD3wpxpo8nGwvj2n6o63I6W0+xo1XD7fwKrL2OlHdDFkLG95MDNQznfqi6wdt7P7492TJp13YMeImdILYqcXE6HX2bT80TrIS3YpzqURw57kgTHdrWe4ONuG6H+2IiW6aVoMGHbYeCcOriVE6Hj8fj6djyyFHGgmS/M15HzkU95BFYoHXeOyf3gKzt72jf69tcOLHLy6E/Dnk4xf80x+On76+HSsn+NXJeO4Od6dgSYuRjdyaLF1B4t62Ze3F1A2/g9d77lizeVvo6RjDN+SYZD7AwpFrozVnr6hFWDVVaIsksrLLwjLUziYwb+CU/Wt2f4Y++Yh3CzPQF2PkILZMl4wf2Tgowa5XuJA3T7Hwu094aCQGXioyfe1Fgj35EeFuwBh5/QSXDSWAeyyVXGEYbrwGzfSbn8PHQVW3EezEA8d4hmHoy7eN6wvNgmuFl22Fo/bED7vj19fUZeYcf6jYJu1wYZpzmDUnfVzJf5fmgeXtSkyUoGOdmXlw+KLOOq4WEPUJXEvX59Xk0zjvlJxgNY3Ci9jggNxC1Ek4FC4YpG1xp7Uwey0eACDxhqG2Q5ADKJ2EgIozWjfrYGxhGC4ztjxULdVy1/NYwWFZFd7DZEeC9adbQXayj3vU9QSfvzifiztigB9jeG+fkpi7M7zDppFl/djTMRga5HiQS2TFo88PNO9OgDiSQsHyLcH2eWo0feKjkhGkmZFmCXyM4vHGmVV+eirSC83kATrsmVhQZdzNs6UCaMIdrMGwtDOtbKiNyZ7zGm5At7t7BsMBCfNrhmKVdgAE1Y9kAuz+QngsSOmj5F5BD20Pz8grBgmmfnpaxEOOPFK8FlmmPvk/jPhIYImbsDWad1j+P2me36fAGtQx/QAznry9HE702AaYCDD8MToQZsNt3cXGOICkYZm4svsDVPl5+wG5tzXhnPIua0317/joZsjzeAmEhZkk7qgMVFwO88+ey/ITtgEXYTM9ZTOvH2yOTI6F7iOOMqzo/2BO86Gij9SbAHOVBwcAuS5ZVSJDi66ToMRVJngknpJpxl5dH2ORI2A2fEdY7e/w8k4pQQeqEKeRZwlpiA4z33F3fIQctq4WNqH0+6TCyInV14uPNOiRGyAxjWEHanunNXHbaH08nvA24kTHEZfDX4ve+r76OXkpTJEkd3ViRWr5ZF8LmxjREp8a77lGPibdeYwDo8RWVmIYpK41EhN/3UI5Hicff6WCYnVjR5WUZhrBJxDSTAwqBqnvPloS60dK1vcebOcBYT+/xkgbC9/Dv0WgWOcXOTZWqaIH189axdQLTTGrNruaYBQ6aCkE0yjVIOu4hrRRCRrdFxOAvzd7ip0QLhfjJrWOIROqvMcwripowphSrrnbQKKqFY+OXJ12s2BcdIRwioEPrJxZh9ulNcaHh7SJ1BObPaDQIO8THWglf2vYMOK828mDe5+dRElyED4lM8vjJWniQwcnhNb2J/G7Z1TSaNC5BmLKcnuRKJkgkis5iWIDheyNJscRaekSDRSdkm8DgV+tYAzW4jJEUKr55XhOiFcNCTY7kZ8Kyj6zFh09udxu8FHwRAviEsUCL1qx04/Z8Ph9PLUcOHulH4tmgj988fIJ1mU7JA0yz3gGGV0osi5hezLCoP8tfIaOjMOncWJeFCy8+MHQZE9tAf0yecOPSSzSdlGCZQ217VGwJ6DEqwBhIcWa0+OzVyqNQPhStESY3PZDubMT4gVQqqv54NjIa6aMPMCa5IesPHoXC+isMKj2LcICxNUpndcLiwewDjC0HobysPDC3+vja3x8Uf+9Zc3kN7cLRE6uyDTDdsjCD5Y4mGp8tQxn548fXuC6A+Z4XNzKRhAfvmNJiGfGnE+ewIBAbNGzWzHoOQxJohdnHBy+KJIU6dnRcuK9O2G4c2+gK+5ePHAYcDTCcC7wLj1TNYVoPPca4UFGwz1x6sOv3MOKYXu7cokzy+jxQmYYVXB2Z3nvpJ0jqJw78HQzr775vNSqFF9O0duZKU+P+AXa9b6J++Wjv33/91YKlTdBFgMkcN8J+Q/ot7CU8tCwKCTBpMAH2fz+0PCe+f3xwfFP2XzyO/Q88/xK6UD47rgAAAABJRU5ErkJggg==\";\nconst BackIcon = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAcCAYAAACZOmSXAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFZSURBVHgBxZYxTsMwFIaf8yLECFIlysZcqVFVLgC3YM0JUE5AegNuQI/AygRcoLKqqnM2WnXAY4YmxkkFSqid1G7sflIkx37S91uOXkzAgCC4feScx2LIOM/DxYJ+gAEeaBIE4ychfhbDC/HcEOK9gCFa8p0Y4vosB1MOlsvFpTwCQ/xDilTiLINwuaSvYAhpK2gWz6ZwBORU4ka5bbFS7kIslbsS78ldimtylVjMTbbbsyl0SJqmLEkoI01imxACUSkfDsffsOvVLmHaP5bu4Kxsr1mW3yN67yDdPU+gY8QRM9/n4d8HNxiMRrIA4mzi+Xw2AQvg72CzWa16vas3zyMP4vW8UnPX71/Dev31CR2D1RfXAfD/hMsAKJt0FQBVCy4CYNOi7QDYVmAzQKvcZoDWO1wVVSNCzC8ppQw00ert4qZKi1Yshtqio+X1AEXP5yzPITLZdcEP+7znr5ZGTGAAAAAASUVORK5CYII=\";\nvar useGroupChannelList = function() {\n  var store = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(GroupChannelListContext);\n  if (!store)\n    throw new Error(\"useGroupChannelList must be used within a GroupChannelListProvider\");\n  var setGroupChannels = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(channels) {\n    store.setState(function(state2) {\n      return __assign(__assign({}, state2), { groupChannels: channels });\n    }, true);\n  }, []);\n  var state = shimExports.useSyncExternalStore(store.subscribe, store.getState);\n  var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      setGroupChannels\n    };\n  }, [setGroupChannels]);\n  return { state, actions };\n};\nvar GroupChannelListContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nvar initialState$1 = {\n  className: \"\",\n  selectedChannelUrl: \"\",\n  disableAutoSelect: false,\n  allowProfileEdit: false,\n  isTypingIndicatorEnabled: false,\n  isMessageReceiptStatusEnabled: false,\n  onChannelSelect: function() {\n  },\n  onChannelCreated: function() {\n  },\n  onThemeChange: noop$4,\n  onCreateChannelClick: noop$4,\n  onBeforeCreateChannel: null,\n  onUserProfileUpdated: noop$4,\n  typingChannelUrls: [],\n  refreshing: false,\n  initialized: false,\n  groupChannels: [],\n  refresh: null,\n  loadMore: null,\n  scrollRef: { current: null }\n};\nvar useGroupChannelListStore = function() {\n  return useStore(GroupChannelListContext, function(state) {\n    return state;\n  }, initialState$1);\n};\nvar GroupChannelListManager = function(_a2) {\n  var _b2, _c, _d, _e2, _f, _g2;\n  var _h = _a2.className, className = _h === void 0 ? \"\" : _h, _j = _a2.selectedChannelUrl, selectedChannelUrl = _j === void 0 ? \"\" : _j, _k = _a2.disableAutoSelect, disableAutoSelect = _k === void 0 ? false : _k, channelListQueryParams = _a2.channelListQueryParams, onThemeChange = _a2.onThemeChange, onChannelSelect = _a2.onChannelSelect, onChannelCreated = _a2.onChannelCreated, onCreateChannelClick = _a2.onCreateChannelClick, onBeforeCreateChannel = _a2.onBeforeCreateChannel, onUserProfileUpdated = _a2.onUserProfileUpdated, props = __rest$8(_a2, [\"className\", \"selectedChannelUrl\", \"disableAutoSelect\", \"channelListQueryParams\", \"onThemeChange\", \"onChannelSelect\", \"onChannelCreated\", \"onCreateChannelClick\", \"onBeforeCreateChannel\", \"onUserProfileUpdated\"]);\n  var sendbirdState = useSendbird().state;\n  var config2 = sendbirdState.config, stores2 = sendbirdState.stores;\n  var _l = useGroupChannelList(), state = _l.state, actions = _l.actions;\n  var updateState = useGroupChannelListStore().updateState;\n  var sdkStore = stores2.sdkStore;\n  var sdk = sdkStore.sdk;\n  var isConnected = useOnlineStatus(sdk, config2.logger);\n  var scheduler = useMarkAsDeliveredScheduler({ isConnected }, config2);\n  var scrollRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var channelListDataSource = useGroupChannelList$1(sdk, {\n    collectionCreator: getCollectionCreator(sdk, channelListQueryParams),\n    markAsDelivered: function(channels) {\n      return channels.forEach(scheduler.push);\n    },\n    onChannelsDeleted: function(channelUrls) {\n      channelUrls.forEach(function(url) {\n        if (url === selectedChannelUrl)\n          onChannelSelect(null);\n      });\n    },\n    onChannelsUpdated: function() {\n      actions.setGroupChannels(groupChannels);\n    }\n  });\n  var refreshing = channelListDataSource.refreshing, initialized = channelListDataSource.initialized, groupChannels = channelListDataSource.groupChannels, refresh = channelListDataSource.refresh, loadMore = channelListDataSource.loadMore;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3;\n    if (!disableAutoSelect && stores2.sdkStore.initialized && initialized) {\n      if (!selectedChannelUrl)\n        onChannelSelect((_a3 = groupChannels[0]) !== null && _a3 !== void 0 ? _a3 : null);\n    }\n  }, [disableAutoSelect, stores2.sdkStore.initialized, initialized, selectedChannelUrl]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    refresh === null || refresh === void 0 ? void 0 : refresh();\n  }, [\n    Object.keys(channelListQueryParams !== null && channelListQueryParams !== void 0 ? channelListQueryParams : {}).sort().map(function(key) {\n      return \"\".concat(key, \"=\").concat(encodeURIComponent(JSON.stringify(channelListQueryParams[key])));\n    }).join(\"&\")\n  ]);\n  var typingChannelUrls = state.typingChannelUrls;\n  useGroupChannelHandler(sdk, {\n    onTypingStatusUpdated: function(channel) {\n      var _a3;\n      var channelList = typingChannelUrls.filter(function(channelUrl) {\n        return channelUrl !== channel.url;\n      });\n      if (((_a3 = channel.getTypingUsers()) === null || _a3 === void 0 ? void 0 : _a3.length) > 0) {\n        updateState({\n          typingChannelUrls: channelList.concat(channel.url)\n        });\n      } else {\n        updateState({\n          typingChannelUrls: channelList\n        });\n      }\n    }\n  });\n  var allowProfileEdit = (_c = (_b2 = props.allowProfileEdit) !== null && _b2 !== void 0 ? _b2 : config2.allowProfileEdit) !== null && _c !== void 0 ? _c : true;\n  var isTypingIndicatorEnabled = (_e2 = (_d = props.isTypingIndicatorEnabled) !== null && _d !== void 0 ? _d : config2.groupChannelList.enableTypingIndicator) !== null && _e2 !== void 0 ? _e2 : false;\n  var isMessageReceiptStatusEnabled = (_g2 = (_f = props.isMessageReceiptStatusEnabled) !== null && _f !== void 0 ? _f : config2.groupChannelList.enableMessageReceiptStatus) !== null && _g2 !== void 0 ? _g2 : false;\n  var eventHandlers = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      onChannelSelect,\n      onChannelCreated,\n      onThemeChange,\n      onCreateChannelClick,\n      onBeforeCreateChannel,\n      onUserProfileUpdated\n    };\n  }, [\n    onChannelSelect,\n    onChannelCreated,\n    onThemeChange,\n    onCreateChannelClick,\n    onBeforeCreateChannel,\n    onUserProfileUpdated\n  ]);\n  var configurations = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      className,\n      selectedChannelUrl,\n      disableAutoSelect,\n      allowProfileEdit,\n      isTypingIndicatorEnabled,\n      isMessageReceiptStatusEnabled,\n      typingChannelUrls,\n      refreshing,\n      initialized,\n      refresh,\n      loadMore\n    };\n  }, [\n    className,\n    selectedChannelUrl,\n    disableAutoSelect,\n    allowProfileEdit,\n    isTypingIndicatorEnabled,\n    isMessageReceiptStatusEnabled,\n    typingChannelUrls,\n    refreshing,\n    initialized,\n    scrollRef\n  ]);\n  useDeepCompareEffect(function() {\n    updateState(__assign(__assign(__assign({}, eventHandlers), configurations), { groupChannels }));\n  }, [\n    configurations,\n    eventHandlers,\n    groupChannels.map(function(groupChannel) {\n      return groupChannel.serialize();\n    })\n  ]);\n  return null;\n};\nvar createGroupChannelListStore = function(props) {\n  return createStore(__assign(__assign({}, initialState$1), props));\n};\nvar InternalGroupChannelListProvider = function(props) {\n  var children = props.children;\n  var defaultProps = deleteNullish({\n    onChannelSelect: props === null || props === void 0 ? void 0 : props.onChannelSelect,\n    onChannelCreated: props === null || props === void 0 ? void 0 : props.onChannelCreated,\n    className: props === null || props === void 0 ? void 0 : props.className,\n    selectedChannelUrl: props === null || props === void 0 ? void 0 : props.selectedChannelUrl,\n    allowProfileEdit: props === null || props === void 0 ? void 0 : props.allowProfileEdit,\n    disableAutoSelect: props === null || props === void 0 ? void 0 : props.disableAutoSelect,\n    isTypingIndicatorEnabled: props === null || props === void 0 ? void 0 : props.isTypingIndicatorEnabled,\n    isMessageReceiptStatusEnabled: props === null || props === void 0 ? void 0 : props.isMessageReceiptStatusEnabled,\n    channelListQueryParams: props === null || props === void 0 ? void 0 : props.channelListQueryParams,\n    onThemeChange: props === null || props === void 0 ? void 0 : props.onThemeChange,\n    onCreateChannelClick: props === null || props === void 0 ? void 0 : props.onCreateChannelClick,\n    onBeforeCreateChannel: props === null || props === void 0 ? void 0 : props.onBeforeCreateChannel,\n    onUserProfileUpdated: props === null || props === void 0 ? void 0 : props.onUserProfileUpdated\n  });\n  var storeRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(createGroupChannelListStore(defaultProps));\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListContext.Provider, { value: storeRef.current }, children);\n};\nvar GroupChannelListProvider = function(props) {\n  var children = props.children, className = props.className;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    InternalGroupChannelListProvider,\n    __assign({}, props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListManager, __assign({}, props)),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      UserProfileProvider,\n      __assign({}, props),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-channel-list \".concat(className) }, children)\n    )\n  );\n};\nfunction getCollectionCreator(sdk, channelListQueryParams) {\n  return function(defaultParams) {\n    var params = __assign(__assign({}, defaultParams), channelListQueryParams);\n    return sdk.groupChannel.createGroupChannelCollection(__assign(__assign({}, params), { filter: new hn$1(params) }));\n  };\n}\nvar GroupChannelListHeader = function(_a2) {\n  var renderTitle = _a2.renderTitle, renderIconButton = _a2.renderIconButton, onEdit = _a2.onEdit, allowProfileEdit = _a2.allowProfileEdit, renderLeft = _a2.renderLeft, renderMiddle = _a2.renderMiddle, renderRight = _a2.renderRight;\n  var user = useSendbird().state.stores.userStore.user;\n  var stringSet2 = useLocalization().stringSet;\n  var renderProfile = renderMiddle !== null && renderMiddle !== void 0 ? renderMiddle : renderTitle;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Header$1, { className: classnames(\"sendbird-channel-header\", allowProfileEdit && \"sendbird-channel-header--allow-edit\"), renderLeft, renderMiddle: function() {\n    var _a3;\n    return (_a3 = renderProfile === null || renderProfile === void 0 ? void 0 : renderProfile()) !== null && _a3 !== void 0 ? _a3 : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-channel-header__title\", role: \"button\", onClick: function() {\n        onEdit === null || onEdit === void 0 ? void 0 : onEdit();\n      }, onKeyDown: function() {\n        onEdit === null || onEdit === void 0 ? void 0 : onEdit();\n      }, tabIndex: 0 },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-channel-header__title__left\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { width: \"32px\", height: \"32px\", src: user.profileUrl, alt: user.nickname })\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-channel-header__title__right\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-channel-header__title__right__name\", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, user.nickname || stringSet2.NO_NAME),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-channel-header__title__right__user-id\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_2 }, user.userId)\n      )\n    );\n  }, renderRight: renderRight !== null && renderRight !== void 0 ? renderRight : renderIconButton });\n};\nvar EditUserProfileProviderContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nvar EditUserProfileProvider = function(_a2) {\n  var children = _a2.children, props = __rest$8(_a2, [\"children\"]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditUserProfileProviderContext.Provider, { value: props }, children);\n};\nvar useEditUserProfileContext = function() {\n  var context = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(EditUserProfileProviderContext);\n  if (!context)\n    throw new Error(\"EditUserProfileContext not found. Use within the EditUserProfile module.\");\n  return context;\n};\nvar EditUserProfileUIView = function(_a2) {\n  var _b2;\n  var formRef = _a2.formRef, inputRef = _a2.inputRef, onThemeChange = _a2.onThemeChange, setProfileImage = _a2.setProfileImage;\n  var state = useSendbird().state;\n  var stores2 = state.stores, config2 = state.config;\n  var theme = config2.theme, setCurrentTheme = config2.setCurrentTheme;\n  var user = (_b2 = stores2.userStore) === null || _b2 === void 0 ? void 0 : _b2.user;\n  var stringSet2 = useLocalization().stringSet;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), currentImg = _c[0], setCurrentImg = _c[1];\n  var hiddenInputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"form\",\n    { className: \"sendbird-edit-user-profile\", ref: formRef, onSubmit: function(e3) {\n      e3.preventDefault();\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird-edit-user-profile__img\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InputLabel, null, stringSet2.EDIT_PROFILE__IMAGE_LABEL),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-edit-user-profile__img__avatar\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { width: \"80px\", height: \"80px\", src: currentImg || (user === null || user === void 0 ? void 0 : user.profileUrl) })\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", { ref: hiddenInputRef, type: \"file\", accept: \"image/gif, image/jpeg, image/png\", style: { display: \"none\" }, onChange: function(e3) {\n        if (e3.target.files) {\n          setCurrentImg(URL.createObjectURL(e3.target.files[0]));\n          setProfileImage(e3.target.files[0]);\n        }\n        if (hiddenInputRef.current) {\n          hiddenInputRef.current.value = \"\";\n        }\n      } }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        TextButton,\n        { className: \"sendbird-edit-user-profile__img__avatar-button\", disableUnderline: true, onClick: function() {\n          var _a3;\n          return (_a3 = hiddenInputRef.current) === null || _a3 === void 0 ? void 0 : _a3.click();\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet2.EDIT_PROFILE__IMAGE_UPLOAD)\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird-edit-user-profile__name\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InputLabel, null, stringSet2.EDIT_PROFILE__NICKNAME_LABEL),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Input, { required: (user === null || user === void 0 ? void 0 : user.nickname) !== \"\", name: \"sendbird-edit-user-profile__name__input\", ref: inputRef, value: user === null || user === void 0 ? void 0 : user.nickname, placeHolder: stringSet2.EDIT_PROFILE__NICKNAME_PLACEHOLDER })\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird-edit-user-profile__userid\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InputLabel, null, stringSet2.EDIT_PROFILE__USERID_LABEL),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Input, { disabled: true, name: \"sendbird-edit-user-profile__userid__input\", value: user === null || user === void 0 ? void 0 : user.userId })\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"section\",\n      { className: \"sendbird-edit-user-profile__theme\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InputLabel, null, stringSet2.EDIT_PROFILE__THEME_LABEL),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-edit-user-profile__theme__theme-icon\" }, theme === \"dark\" ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { onClick: function() {\n        setCurrentTheme(\"light\");\n        onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange(\"light\");\n      }, type: IconTypes.TOGGLE_ON, width: 44, height: 24 }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { onClick: function() {\n        setCurrentTheme(\"dark\");\n        onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange(\"dark\");\n      }, type: IconTypes.TOGGLE_OFF, width: 44, height: 24 }))\n    )\n  );\n};\nvar handleUpdateUserInfo = function(_a2) {\n  var _b2, _c, _d;\n  var globalContext = _a2.globalContext, formRef = _a2.formRef, inputRef = _a2.inputRef, profileImage = _a2.profileImage, onEditProfile = _a2.onEditProfile, updateUserInfo = _a2.updateUserInfo;\n  var stores2 = globalContext.stores;\n  var sdk = stores2.sdkStore.sdk;\n  var user = stores2.userStore.user;\n  if ((user === null || user === void 0 ? void 0 : user.nickname) !== \"\" && !inputRef.current.value) {\n    (_c = (_b2 = formRef.current).reportValidity) === null || _c === void 0 ? void 0 : _c.call(_b2);\n    return;\n  }\n  sdk === null || sdk === void 0 ? void 0 : sdk.updateCurrentUserInfo({\n    nickname: (_d = inputRef === null || inputRef === void 0 ? void 0 : inputRef.current) === null || _d === void 0 ? void 0 : _d.value,\n    profileImage: profileImage !== null && profileImage !== void 0 ? profileImage : void 0\n  }).then(function(updatedUser) {\n    updateUserInfo(updatedUser);\n    onEditProfile === null || onEditProfile === void 0 ? void 0 : onEditProfile(updatedUser);\n  });\n};\nvar useEditUserProfileUISates = function(_a2) {\n  var onEditProfile = _a2.onEditProfile;\n  var _b2 = useSendbird(), state = _b2.state, actions = _b2.actions;\n  var inputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var formRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), profileImage = _c[0], setProfileImage = _c[1];\n  var updateUserInfo = function() {\n    handleUpdateUserInfo({\n      globalContext: state,\n      formRef,\n      inputRef,\n      profileImage,\n      onEditProfile,\n      updateUserInfo: actions.updateUserInfo\n    });\n  };\n  return {\n    formRef,\n    inputRef,\n    updateUserInfo,\n    profileImage,\n    setProfileImage\n  };\n};\nvar EditUserProfileUI = function() {\n  var editProfileContext = useEditUserProfileContext();\n  var onEditProfile = editProfileContext.onEditProfile, onCancel = editProfileContext.onCancel, onThemeChange = editProfileContext.onThemeChange;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var _a2 = useEditUserProfileUISates({ onEditProfile }), formRef = _a2.formRef, inputRef = _a2.inputRef, updateUserInfo = _a2.updateUserInfo, setProfileImage = _a2.setProfileImage;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Modal,\n    { titleText: stringSet2.EDIT_PROFILE__TITLE, submitText: stringSet2.BUTTON__SAVE, type: ButtonTypes.PRIMARY, onCancel, isFullScreenOnMobile: true, onSubmit: updateUserInfo },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditUserProfileUIView, { formRef, inputRef, setProfileImage, onThemeChange })\n  );\n};\nvar EditUserProfile = function(props) {\n  var onEditProfile = props.onEditProfile, onCancel = props.onCancel, onThemeChange = props.onThemeChange;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    EditUserProfileProvider,\n    { onEditProfile, onCancel, onThemeChange },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditUserProfileUI, null)\n  );\n};\nfunction useThrottleCallback(callback, delay2, options) {\n  if (options === void 0) {\n    options = {\n      leading: true,\n      trailing: false\n    };\n  }\n  var timer = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var trailingArgs = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    return function() {\n      if (timer.current)\n        clearTimeout(timer.current);\n    };\n  }, []);\n  return usePreservedCallback$1(function() {\n    var args = [];\n    for (var _i2 = 0; _i2 < arguments.length; _i2++) {\n      args[_i2] = arguments[_i2];\n    }\n    if (timer.current) {\n      trailingArgs.current = args;\n      return;\n    }\n    if (options.leading) {\n      callback.apply(void 0, args);\n    } else {\n      trailingArgs.current = args;\n    }\n    var invoke = function() {\n      if (options.trailing && trailingArgs.current) {\n        callback.apply(void 0, trailingArgs.current);\n        trailingArgs.current = null;\n        timer.current = setTimeout(invoke, delay2);\n      } else {\n        timer.current = null;\n      }\n    };\n    timer.current = setTimeout(invoke, delay2);\n  });\n}\nvar BUFFER_DELAY = 100;\nfunction useOnScrollPositionChangeDetector(params) {\n  var onReachedTop = params.onReachedTop, onReachedBottom = params.onReachedBottom, onInBetween = params.onInBetween;\n  var cb = usePreservedCallback$1(function(event) {\n    if (event === null || event === void 0 ? void 0 : event.target) {\n      var _a2 = event.target, scrollTop = _a2.scrollTop, scrollHeight = _a2.scrollHeight, clientHeight = _a2.clientHeight;\n      var positionEvent = {\n        distanceFromBottom: scrollHeight - scrollTop - clientHeight\n      };\n      if (onReachedTop && isAboutSame(scrollTop, 0, SCROLL_BUFFER)) {\n        onReachedTop(positionEvent);\n      } else if (onReachedBottom && isAboutSame(scrollHeight, clientHeight + scrollTop, SCROLL_BUFFER)) {\n        onReachedBottom(positionEvent);\n      } else if (onInBetween) {\n        onInBetween(positionEvent);\n      }\n    }\n  });\n  return useThrottleCallback(cb, BUFFER_DELAY, { trailing: true });\n}\nvar LeaveGroupChannel = function(_a2) {\n  var channel = _a2.channel, onSubmit = _a2.onSubmit, onCancel = _a2.onCancel;\n  var _b2 = useSendbird().state.config, logger = _b2.logger, isOnline = _b2.isOnline;\n  var stringSet2 = useLocalization().stringSet;\n  if (channel) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Modal, { disabled: !isOnline, onCancel, onSubmit: function() {\n      logger.info(\"LeaveGroupChannel: Leaving channel\", channel);\n      channel.leave().then(function() {\n        logger.info(\"LeaveGroupChannel: Leaving channel successful!\", channel);\n        onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit();\n      });\n    }, submitText: stringSet2.MODAL__LEAVE_CHANNEL__FOOTER, titleText: stringSet2.MODAL__LEAVE_CHANNEL__TITLE });\n  }\n};\nfunction GroupChannelPreviewAction(_a2) {\n  var channel = _a2.channel, _b2 = _a2.disabled, disabled = _b2 === void 0 ? false : _b2, onLeaveChannel = _a2.onLeaveChannel;\n  var parentRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var parentContainerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showModal = _c[0], setShowModal = _c[1];\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { ref: parentContainerRef, tabIndex: 0, role: \"button\", style: { display: \"inline-block\" }, onKeyDown: function(e3) {\n      return e3.stopPropagation();\n    }, onClick: function(e3) {\n      return e3.stopPropagation();\n    } },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        IconButton$1,\n        { ref: parentRef, onClick: toggleDropdown, height: \"32px\", width: \"32px\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.MORE, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n      );\n    }, menuItems: function(closeDropdown) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItems,\n        { parentRef, parentContainRef: parentContainerRef, closeDropdown },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { onClick: function() {\n          if (disabled)\n            return;\n          setShowModal(true);\n          closeDropdown();\n        }, testID: \"channel_list_item_context_menu_leave_channel\" }, stringSet2.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)\n      );\n    } }),\n    showModal && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LeaveGroupChannel, { channel, onSubmit: function() {\n      setShowModal(false);\n      onLeaveChannel === null || onLeaveChannel === void 0 ? void 0 : onLeaveChannel();\n    }, onCancel: function() {\n      return setShowModal(false);\n    } })\n  );\n}\nfunction Badge(_a2) {\n  var count = _a2.count, _b2 = _a2.maxLevel, maxLevel = _b2 === void 0 ? 2 : _b2, _c = _a2.className, className = _c === void 0 ? \"\" : _c;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var maximumNumber = parseInt(\"9\".repeat(maxLevel > 6 ? 6 : maxLevel), 10);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-badge\"\n    ], false).join(\" \") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-badge__text\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONCONTENT_1 }, typeof count === \"string\" ? count : count > maximumNumber ? \"\".concat(maximumNumber).concat(stringSet2.BADGE__OVER) : count)\n    )\n  );\n}\nfunction MentionUserLabel(_a2) {\n  var _b2 = _a2.className, className = _b2 === void 0 ? \"\" : _b2, children = _a2.children, _c = _a2.isReverse, isReverse = _c === void 0 ? false : _c, color2 = _a2.color, userId = _a2.userId;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", { className: classnames(MENTION_USER_LABEL_CLASSNAME, className, isReverse && \"reverse\", color2), contentEditable: false, \"data-userid\": userId, \"data-sb-mention\": true }, children);\n}\nvar GroupChannelListItemView = function(_a2) {\n  var channel = _a2.channel, tabIndex = _a2.tabIndex, isTyping = _a2.isTyping, isSelected = _a2.isSelected, channelName = _a2.channelName, _b2 = _a2.isMessageStatusEnabled, isMessageStatusEnabled = _b2 === void 0 ? true : _b2, _c = _a2.onClick, onClick = _c === void 0 ? noop$4 : _c, _d = _a2.onLeaveChannel, onLeaveChannel = _d === void 0 ? function() {\n    return Promise.resolve();\n  } : _d, renderChannelAction = _a2.renderChannelAction;\n  var config2 = useSendbird().state.config;\n  var theme = config2.theme, userId = config2.userId;\n  var _e2 = useLocalization(), dateLocale = _e2.dateLocale, stringSet2 = _e2.stringSet;\n  var isMobile = useMediaQueryContext().isMobile;\n  var isMentionEnabled = config2.groupChannel.enableMention;\n  var lastMessage = getLastMessageText(channel, stringSet2);\n  var previewLastMessage = config2.groupChannel.enableMarkdownForUserMessage ? getChannelPreviewMessage(lastMessage) : lastMessage;\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showMobileLeave = _f[0], setShowMobileLeave = _f[1];\n  var onLongPress = useLongPress({\n    onLongPress: function() {\n      if (isMobile) {\n        setShowMobileLeave(true);\n      }\n    },\n    onClick\n  }, {\n    delay: 1e3\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      __assign({ className: [\n        \"sendbird-channel-preview\",\n        isSelected ? \"sendbird-channel-preview--active\" : \"\"\n      ].join(\" \"), role: \"link\", tabIndex }, isMobile ? __assign({}, onLongPress) : { onClick }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-channel-preview__avatar\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ChannelAvatar, { channel, userId, theme })\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-channel-preview__content\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-channel-preview__content__upper\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-channel-preview__content__upper__header\" },\n            (channel.isBroadcast || false) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: \"sendbird-channel-preview__content__upper__header__broadcast-icon\" },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.BROADCAST, fillColor: IconColors.SECONDARY, height: \"16px\", width: \"16px\" })\n            ),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-channel-preview__content__upper__header__channel-name\", testID: \"sendbird-channel-preview__content__upper__header__channel-name\", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, channelName),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-channel-preview__content__upper__header__total-members\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, getTotalMembers(channel)),\n            channel.isFrozen && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { title: \"Frozen\", className: \"sendbird-channel-preview__content__upper__header__frozen-icon\" },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.FREEZE, fillColor: IconColors.PRIMARY, height: 12, width: 12 })\n            )\n          ),\n          !channel.isEphemeral && isMessageStatusEnabled && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageStatus, { className: \"sendbird-channel-preview__content__upper__last-message-at\", channel, message: channel.lastMessage, isDateSeparatorConsidered: false }),\n          !channel.isEphemeral && !isMessageStatusEnabled && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-channel-preview__content__upper__last-message-at\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, getLastMessageCreatedAt({\n            channel,\n            locale: dateLocale,\n            stringSet: stringSet2\n          }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-channel-preview__content__lower\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Label,\n            { className: \"sendbird-channel-preview__content__lower__last-message\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 },\n            isTyping && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TypingIndicatorText, { members: channel.getTypingUsers() }),\n            !isTyping && !isVoiceMessage(channel.lastMessage) && previewLastMessage,\n            !isTyping && isVoiceMessage(channel.lastMessage) && stringSet2.VOICE_MESSAGE\n          ),\n          /**\n           * Do not show unread count for focused channel. This is because of the limitation where\n           * isScrollBottom and hasNext states needs to be added globally but they are from channel context\n           * so channel list cannot see them with the current architecture.\n           */\n          !isSelected && !channel.isEphemeral && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-channel-preview__content__lower__unread-message-count\" },\n            isMentionEnabled && channel.unreadMentionCount > 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MentionUserLabel, { className: \"sendbird-channel-preview__content__lower__unread-message-count__mention\", color: \"purple\" }, \"@\") : null,\n            getChannelUnreadMessageCount(channel) ? (\n              // return number\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Badge, { count: getChannelUnreadMessageCount(channel) })\n            ) : null\n          )\n        )\n      ),\n      !isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-channel-preview__action\" }, renderChannelAction({ channel }))\n    ),\n    showMobileLeave && isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      Modal,\n      { className: \"sendbird-channel-preview__leave--mobile\", titleText: channelName, hideFooter: true, isCloseOnClickOutside: true, onCancel: function() {\n        return setShowMobileLeave(false);\n      } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        TextButton,\n        { onClick: function() {\n          onLeaveChannel();\n          setShowMobileLeave(false);\n        }, className: \"sendbird-channel-preview__leave-label--mobile\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.CHANNEL_PREVIEW_MOBILE_LEAVE)\n      )\n    )\n  );\n};\nvar GroupChannelListItem = function(_a2) {\n  var _b2, _c, _d;\n  var channel = _a2.channel, isSelected = _a2.isSelected, isTyping = _a2.isTyping, renderChannelAction = _a2.renderChannelAction, onLeaveChannel = _a2.onLeaveChannel, onClick = _a2.onClick, tabIndex = _a2.tabIndex;\n  var config2 = useSendbird().state.config;\n  var stringSet2 = useLocalization().stringSet;\n  var _e2 = useGroupChannelList().state, isTypingIndicatorEnabled = _e2.isTypingIndicatorEnabled, isMessageReceiptStatusEnabled = _e2.isMessageReceiptStatusEnabled;\n  var userId = config2.userId;\n  var isMessageStatusEnabled = isMessageReceiptStatusEnabled && !((_b2 = channel.lastMessage) === null || _b2 === void 0 ? void 0 : _b2.isAdminMessage()) && ((_d = (_c = channel.lastMessage) === null || _c === void 0 ? void 0 : _c.sender) === null || _d === void 0 ? void 0 : _d.userId) === userId;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListItemView, { channel, tabIndex, channelName: getChannelTitle(channel, userId, stringSet2), isTyping: isTypingIndicatorEnabled && isTyping, isSelected, isMessageStatusEnabled, onClick, onLeaveChannel, renderChannelAction });\n};\nvar isEmpty = function(val) {\n  return val === null || val === void 0;\n};\nfunction compareIds(a4, b3) {\n  if (isEmpty(a4) || isEmpty(b3)) {\n    return false;\n  }\n  var aString = a4.toString();\n  var bString = b3.toString();\n  return aString === bString;\n}\nvar scrollIntoLast = function(intialTry) {\n  if (intialTry === void 0) {\n    intialTry = 0;\n  }\n  var MAX_TRIES = 10;\n  var currentTry = intialTry;\n  if (currentTry > MAX_TRIES) {\n    return;\n  }\n  try {\n    var scrollDOM = document.querySelector(\".sendbird-thread-ui--scroll\");\n    if (scrollDOM) {\n      scrollDOM.scrollTop = scrollDOM.scrollHeight;\n    }\n  } catch (error) {\n    setTimeout(function() {\n      scrollIntoLast(currentTry + 1);\n    }, 500 * currentTry);\n  }\n};\nvar useSendMultipleFilesMessage = function(_a2, _b2) {\n  var currentChannel = _a2.currentChannel, onBeforeSendMultipleFilesMessage = _a2.onBeforeSendMultipleFilesMessage, publishingModules = _a2.publishingModules;\n  var logger = _b2.logger, pubSub = _b2.pubSub, scrollRef = _b2.scrollRef;\n  var sendMessage = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(files, quoteMessage) {\n    return new Promise(function(resolve, reject) {\n      if (!currentChannel) {\n        logger.warning(\"Channel: Sending MFm failed, because currentChannel is null.\", { currentChannel });\n        reject();\n      }\n      if (files.length <= 1) {\n        logger.warning(\"Channel: Sending MFM failed, because there are no multiple files.\", { files });\n        reject();\n      }\n      var messageParams = {\n        fileInfoList: files.map(function(file) {\n          return {\n            file,\n            fileName: file.name,\n            fileSize: file.size,\n            mimeType: file.type\n          };\n        })\n      };\n      if (quoteMessage) {\n        messageParams.isReplyToChannel = true;\n        messageParams.parentMessageId = quoteMessage.messageId;\n      }\n      if (typeof onBeforeSendMultipleFilesMessage === \"function\") {\n        messageParams = onBeforeSendMultipleFilesMessage(files, quoteMessage);\n      }\n      logger.info(\"Channel: Start sending MFM\", { messageParams });\n      try {\n        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendMultipleFilesMessage(messageParams).onFileUploaded(function(requestId, index2, uploadableFileInfo, error) {\n          logger.info(\"Channel: onFileUploaded during sending MFM\", {\n            requestId,\n            index: index2,\n            error,\n            uploadableFileInfo\n          });\n          pubSub.publish(pubSubTopics.ON_FILE_INFO_UPLOADED, {\n            response: {\n              channelUrl: currentChannel.url,\n              requestId,\n              index: index2,\n              uploadableFileInfo,\n              error\n            },\n            publishingModules\n          });\n        }).onPending(function(pendingMessage) {\n          logger.info(\"Channel: in progress of sending MFM\", { pendingMessage, fileInfoList: messageParams.fileInfoList });\n          pubSub.publish(pubSubTopics.SEND_MESSAGE_START, {\n            message: pendingMessage,\n            channel: currentChannel,\n            publishingModules\n          });\n          setTimeout(function() {\n            if (scrollRef && shouldPubSubPublishToChannel(publishingModules)) {\n              scrollIntoLast$1(0, scrollRef);\n            }\n            if (shouldPubSubPublishToThread(publishingModules)) {\n              scrollIntoLast(0);\n            }\n          }, SCROLL_BOTTOM_DELAY_FOR_SEND);\n        }).onFailed(function(error, failedMessage) {\n          logger.error(\"Channel: Sending MFM failed.\", { error, failedMessage });\n          pubSub.publish(pubSubTopics.SEND_MESSAGE_FAILED, {\n            channel: currentChannel,\n            message: failedMessage,\n            publishingModules\n          });\n          reject(error);\n        }).onSucceeded(function(succeededMessage) {\n          logger.info(\"Channel: Sending voice message success!\", { succeededMessage });\n          pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {\n            channel: currentChannel,\n            message: succeededMessage,\n            publishingModules\n          });\n          resolve(succeededMessage);\n        });\n      } catch (error) {\n        logger.error(\"Channel: Sending MFM failed.\", { error });\n        reject(error);\n      }\n    });\n  }, [\n    currentChannel,\n    onBeforeSendMultipleFilesMessage,\n    publishingModules\n  ]);\n  return [sendMessage];\n};\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nObject(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])(null);\nObject(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])(void 0);\nvar noop = function() {\n};\nvar TOGGLE_DEFAULT_VALUE = {\n  checked: null,\n  defaultChecked: false,\n  disabled: false,\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop\n};\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(TOGGLE_DEFAULT_VALUE);\nvar MessageSearchOrder;\n(function(MessageSearchOrder2) {\n  MessageSearchOrder2[\"SCORE\"] = \"score\";\n  MessageSearchOrder2[\"TIMESTAMP\"] = \"ts\";\n})(MessageSearchOrder || (MessageSearchOrder = {}));\nObject(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])(null);\nvar ChannelStateTypes;\n(function(ChannelStateTypes2) {\n  ChannelStateTypes2[\"NIL\"] = \"NIL\";\n  ChannelStateTypes2[\"LOADING\"] = \"LOADING\";\n  ChannelStateTypes2[\"INVALID\"] = \"INVALID\";\n  ChannelStateTypes2[\"INITIALIZED\"] = \"INITIALIZED\";\n})(ChannelStateTypes || (ChannelStateTypes = {}));\nvar ParentMessageStateTypes;\n(function(ParentMessageStateTypes2) {\n  ParentMessageStateTypes2[\"NIL\"] = \"NIL\";\n  ParentMessageStateTypes2[\"LOADING\"] = \"LOADING\";\n  ParentMessageStateTypes2[\"INVALID\"] = \"INVALID\";\n  ParentMessageStateTypes2[\"INITIALIZED\"] = \"INITIALIZED\";\n})(ParentMessageStateTypes || (ParentMessageStateTypes = {}));\nvar ThreadListStateTypes;\n(function(ThreadListStateTypes2) {\n  ThreadListStateTypes2[\"NIL\"] = \"NIL\";\n  ThreadListStateTypes2[\"LOADING\"] = \"LOADING\";\n  ThreadListStateTypes2[\"INVALID\"] = \"INVALID\";\n  ThreadListStateTypes2[\"INITIALIZED\"] = \"INITIALIZED\";\n})(ThreadListStateTypes || (ThreadListStateTypes = {}));\nvar PREV_THREADS_FETCH_SIZE = 30;\nvar NEXT_THREADS_FETCH_SIZE = 30;\nfunction useToggleReactionCallback(_a2, _b2) {\n  var currentChannel = _a2.currentChannel;\n  var logger = _b2.logger;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(message, key, isReacted) {\n    var _a3, _b3;\n    if (isReacted) {\n      (_a3 = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.deleteReaction) === null || _a3 === void 0 ? void 0 : _a3.call(currentChannel, message, key).then(function(res) {\n        logger.info(\"Thread | useToggleReactionsCallback: Delete reaction succeeded.\", res);\n      }).catch(function(err) {\n        logger.warning(\"Thread | useToggleReactionsCallback: Delete reaction failed.\", err);\n      });\n      return;\n    }\n    (_b3 = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.addReaction) === null || _b3 === void 0 ? void 0 : _b3.call(currentChannel, message, key).then(function(res) {\n      logger.info(\"Thread | useToggleReactionsCallback: Add reaction succeeded.\", res);\n    }).catch(function(err) {\n      logger.warning(\"Thread | useToggleReactionsCallback: Add reaction failed.\", err);\n    });\n  }, [currentChannel]);\n}\nfunction useSendUserMessageCallback(_a2, _b2) {\n  var isMentionEnabled = _a2.isMentionEnabled, currentChannel = _a2.currentChannel, onBeforeSendUserMessage = _a2.onBeforeSendUserMessage, sendMessageStart = _a2.sendMessageStart, sendMessageFailure = _a2.sendMessageFailure;\n  var logger = _b2.logger, pubSub = _b2.pubSub;\n  var sendMessage = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(props) {\n    var _a3;\n    var message = props.message, quoteMessage = props.quoteMessage, mentionTemplate = props.mentionTemplate, mentionedUsers = props.mentionedUsers;\n    var createDefaultParams = function() {\n      var params2 = {};\n      params2.message = message;\n      var mentionedUsersLength = (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) || 0;\n      if (isMentionEnabled && mentionedUsersLength) {\n        params2.mentionedUsers = mentionedUsers;\n      }\n      if (isMentionEnabled && mentionTemplate && mentionedUsersLength) {\n        params2.mentionedMessageTemplate = mentionTemplate;\n      }\n      if (quoteMessage) {\n        params2.isReplyToChannel = true;\n        params2.parentMessageId = quoteMessage.messageId;\n      }\n      return params2;\n    };\n    var params = (_a3 = onBeforeSendUserMessage === null || onBeforeSendUserMessage === void 0 ? void 0 : onBeforeSendUserMessage(message, quoteMessage)) !== null && _a3 !== void 0 ? _a3 : createDefaultParams();\n    logger.info(\"Thread | useSendUserMessageCallback: Sending user message start.\", params);\n    if (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendUserMessage) {\n      currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendUserMessage(params).onPending(function(pendingMessage) {\n        sendMessageStart(pendingMessage);\n      }).onFailed(function(error, message2) {\n        logger.info(\"Thread | useSendUserMessageCallback: Sending user message failed.\", { message: message2, error });\n        sendMessageFailure(message2);\n      }).onSucceeded(function(message2) {\n        logger.info(\"Thread | useSendUserMessageCallback: Sending user message succeeded.\", message2);\n        pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, {\n          channel: currentChannel,\n          message: message2,\n          publishingModules: [PublishingModuleType.THREAD]\n        });\n      });\n    }\n  }, [isMentionEnabled, currentChannel]);\n  return sendMessage;\n}\nfunction useSendFileMessageCallback(_a2, _b2) {\n  var currentChannel = _a2.currentChannel, onBeforeSendFileMessage = _a2.onBeforeSendFileMessage, sendMessageStart = _a2.sendMessageStart, sendMessageFailure = _a2.sendMessageFailure;\n  var logger = _b2.logger, pubSub = _b2.pubSub;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(file, quoteMessage) {\n    return new Promise(function(resolve, reject) {\n      var _a3;\n      var createParamsDefault = function() {\n        var params2 = {};\n        params2.file = file;\n        if (quoteMessage) {\n          params2.isReplyToChannel = true;\n          params2.parentMessageId = quoteMessage.messageId;\n        }\n        return params2;\n      };\n      var params = (_a3 = onBeforeSendFileMessage === null || onBeforeSendFileMessage === void 0 ? void 0 : onBeforeSendFileMessage(file, quoteMessage)) !== null && _a3 !== void 0 ? _a3 : createParamsDefault();\n      logger.info(\"Thread | useSendFileMessageCallback: Sending file message start.\", params);\n      if (currentChannel == null) {\n        logger.warning(\"Thread | useSendFileMessageCallback: currentChannel is null. Skipping file message send.\");\n        resolve(null);\n      } else {\n        currentChannel.sendFileMessage(params).onPending(function(pendingMessage) {\n          sendMessageStart(__assign(__assign({}, pendingMessage), {\n            url: URL.createObjectURL(file),\n            // pending thumbnail message seems to be failed\n            sendingStatus: Z.PENDING,\n            isUserMessage: pendingMessage.isUserMessage,\n            isFileMessage: pendingMessage.isFileMessage,\n            isAdminMessage: pendingMessage.isAdminMessage,\n            isMultipleFilesMessage: pendingMessage.isMultipleFilesMessage\n          }));\n          setTimeout(function() {\n            return scrollIntoLast();\n          }, SCROLL_BOTTOM_DELAY_FOR_SEND);\n        }).onFailed(function(error, message) {\n          message.localUrl = URL.createObjectURL(file);\n          message.file = file;\n          logger.info(\"Thread | useSendFileMessageCallback: Sending file message failed.\", { message, error });\n          sendMessageFailure(message);\n          reject(error);\n        }).onSucceeded(function(message) {\n          logger.info(\"Thread | useSendFileMessageCallback: Sending file message succeeded.\", message);\n          pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {\n            channel: currentChannel,\n            message,\n            publishingModules: [PublishingModuleType.THREAD]\n          });\n          resolve(message);\n        });\n      }\n    });\n  }, [currentChannel]);\n}\nvar useSendVoiceMessageCallback = function(_a2, _b2) {\n  var currentChannel = _a2.currentChannel, onBeforeSendVoiceMessage = _a2.onBeforeSendVoiceMessage, sendMessageStart = _a2.sendMessageStart, sendMessageFailure = _a2.sendMessageFailure;\n  var logger = _b2.logger, pubSub = _b2.pubSub;\n  var sendMessage = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(file, duration, quoteMessage) {\n    var messageParams = onBeforeSendVoiceMessage && typeof onBeforeSendVoiceMessage === \"function\" ? onBeforeSendVoiceMessage(file, quoteMessage) : {\n      file,\n      fileName: VOICE_MESSAGE_FILE_NAME,\n      mimeType: VOICE_MESSAGE_MIME_TYPE,\n      metaArrays: [\n        new Ve$1({\n          key: META_ARRAY_VOICE_DURATION_KEY,\n          value: [\"\".concat(duration)]\n        }),\n        new Ve$1({\n          key: META_ARRAY_MESSAGE_TYPE_KEY,\n          value: [META_ARRAY_MESSAGE_TYPE_VALUE__VOICE]\n        })\n      ]\n    };\n    if (quoteMessage) {\n      messageParams.isReplyToChannel = true;\n      messageParams.parentMessageId = quoteMessage.messageId;\n    }\n    logger.info(\"Thread | useSendVoiceMessageCallback:  Start sending voice message\", messageParams);\n    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendFileMessage(messageParams).onPending(function(pendingMessage) {\n      sendMessageStart(__assign(__assign({}, pendingMessage), {\n        url: URL.createObjectURL(file),\n        // pending thumbnail message seems to be failed\n        sendingStatus: Z.PENDING,\n        isUserMessage: pendingMessage.isUserMessage,\n        isFileMessage: pendingMessage.isFileMessage,\n        isAdminMessage: pendingMessage.isAdminMessage,\n        isMultipleFilesMessage: pendingMessage.isMultipleFilesMessage\n      }));\n      setTimeout(function() {\n        return scrollIntoLast();\n      }, SCROLL_BOTTOM_DELAY_FOR_SEND);\n    }).onFailed(function(error, message) {\n      message.localUrl = URL.createObjectURL(file);\n      message.file = file;\n      logger.info(\"Thread | useSendVoiceMessageCallback: Sending voice message failed.\", { message, error });\n      sendMessageFailure(message);\n    }).onSucceeded(function(message) {\n      logger.info(\"Thread | useSendVoiceMessageCallback: Sending voice message succeeded.\", message);\n      pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {\n        channel: currentChannel,\n        message,\n        publishingModules: [PublishingModuleType.THREAD]\n      });\n    });\n  }, [\n    currentChannel,\n    onBeforeSendVoiceMessage\n  ]);\n  return sendMessage;\n};\nfunction useResendMessageCallback(_a2, _b2) {\n  var currentChannel = _a2.currentChannel, resendMessageStart = _a2.resendMessageStart, sendMessageSuccess = _a2.sendMessageSuccess, sendMessageFailure = _a2.sendMessageFailure;\n  var logger = _b2.logger, pubSub = _b2.pubSub;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(failedMessage) {\n    var _a3, _b3, _c, _d, _e2;\n    if (!(failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isResendable)) {\n      logger.warning(\"Thread | useResendMessageCallback: Message is not resendable.\", failedMessage);\n      return;\n    }\n    logger.info(\"Thread | useResendMessageCallback: Resending failedMessage start.\", failedMessage);\n    if (((_a3 = failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isUserMessage) === null || _a3 === void 0 ? void 0 : _a3.call(failedMessage)) || (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.messageType) === G.USER) {\n      try {\n        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendMessage(failedMessage).onPending(function(message) {\n          logger.info(\"Thread | useResendMessageCallback: Resending user message started.\", message);\n          resendMessageStart(message);\n        }).onSucceeded(function(message) {\n          logger.info(\"Thread | useResendMessageCallback: Resending user message succeeded.\", message);\n          sendMessageSuccess(message);\n          pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, {\n            channel: currentChannel,\n            message,\n            publishingModules: [PublishingModuleType.THREAD]\n          });\n        }).onFailed(function(error) {\n          logger.warning(\"Thread | useResendMessageCallback: Resending user message failed.\", error);\n          failedMessage.sendingStatus = Z.FAILED;\n          sendMessageFailure(failedMessage);\n        });\n      } catch (err) {\n        logger.warning(\"Thread | useResendMessageCallback: Resending user message failed.\", err);\n        failedMessage.sendingStatus = Z.FAILED;\n        sendMessageFailure(failedMessage);\n      }\n    } else if ((_b3 = failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isFileMessage) === null || _b3 === void 0 ? void 0 : _b3.call(failedMessage)) {\n      try {\n        (_c = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendMessage) === null || _c === void 0 ? void 0 : _c.call(currentChannel, failedMessage).onPending(function(message) {\n          logger.info(\"Thread | useResendMessageCallback: Resending file message started.\", message);\n          resendMessageStart(message);\n        }).onSucceeded(function(message) {\n          logger.info(\"Thread | useResendMessageCallback: Resending file message succeeded.\", message);\n          sendMessageSuccess(message);\n          pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {\n            channel: currentChannel,\n            message: failedMessage,\n            publishingModules: [PublishingModuleType.THREAD]\n          });\n        }).onFailed(function(error) {\n          logger.warning(\"Thread | useResendMessageCallback: Resending file message failed.\", error);\n          failedMessage.sendingStatus = Z.FAILED;\n          sendMessageFailure(failedMessage);\n        });\n      } catch (err) {\n        logger.warning(\"Thread | useResendMessageCallback: Resending file message failed.\", err);\n        failedMessage.sendingStatus = Z.FAILED;\n        sendMessageFailure(failedMessage);\n      }\n    } else if ((_d = failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isMultipleFilesMessage) === null || _d === void 0 ? void 0 : _d.call(failedMessage)) {\n      try {\n        (_e2 = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendMessage) === null || _e2 === void 0 ? void 0 : _e2.call(currentChannel, failedMessage).onPending(function(message) {\n          logger.info(\"Thread | useResendMessageCallback: Resending multiple files message started.\", message);\n          resendMessageStart(message);\n        }).onFileUploaded(function(requestId, index2, uploadableFileInfo, error) {\n          logger.info(\"Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.\", {\n            requestId,\n            index: index2,\n            error,\n            uploadableFileInfo\n          });\n          pubSub.publish(pubSubTopics.ON_FILE_INFO_UPLOADED, {\n            response: {\n              channelUrl: currentChannel.url,\n              requestId,\n              index: index2,\n              uploadableFileInfo,\n              error\n            },\n            publishingModules: [PublishingModuleType.THREAD]\n          });\n        }).onSucceeded(function(message) {\n          logger.info(\"Thread | useResendMessageCallback: Resending MFM succeeded.\", message);\n          sendMessageSuccess(message);\n          pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {\n            channel: currentChannel,\n            message,\n            publishingModules: [PublishingModuleType.THREAD]\n          });\n        }).onFailed(function(error, message) {\n          logger.warning(\"Thread | useResendMessageCallback: Resending MFM failed.\", error);\n          sendMessageFailure(message);\n        });\n      } catch (err) {\n        logger.warning(\"Thread | useResendMessageCallback: Resending MFM failed.\", err);\n        sendMessageFailure(failedMessage);\n      }\n    } else {\n      logger.warning(\"Thread | useResendMessageCallback: Message is not resendable.\", failedMessage);\n      failedMessage.sendingStatus = Z.FAILED;\n      sendMessageFailure(failedMessage);\n    }\n  }, [currentChannel]);\n}\nfunction useUpdateMessageCallback(_a2, _b2) {\n  var currentChannel = _a2.currentChannel, isMentionEnabled = _a2.isMentionEnabled, onMessageUpdated = _a2.onMessageUpdated;\n  var logger = _b2.logger, pubSub = _b2.pubSub;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(props) {\n    var _a3;\n    var messageId = props.messageId, message = props.message, mentionedUsers = props.mentionedUsers, mentionTemplate = props.mentionTemplate;\n    var createParamsDefault = function() {\n      var params2 = {};\n      params2.message = message;\n      if (isMentionEnabled && mentionedUsers && (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) > 0) {\n        params2.mentionedUsers = mentionedUsers;\n      }\n      if (isMentionEnabled && mentionTemplate) {\n        params2.mentionedMessageTemplate = mentionTemplate;\n      } else {\n        params2.mentionedMessageTemplate = message;\n      }\n      return params2;\n    };\n    var params = createParamsDefault();\n    logger.info(\"Thread | useUpdateMessageCallback: Message update start.\", params);\n    if (currentChannel == null) {\n      logger.warning(\"Thread | useUpdateMessageCallback: currentChannel is null.\");\n      return;\n    }\n    (_a3 = currentChannel.updateUserMessage) === null || _a3 === void 0 ? void 0 : _a3.call(currentChannel, messageId, params).then(function(message2) {\n      logger.info(\"Thread | useUpdateMessageCallback: Message update succeeded.\", message2);\n      onMessageUpdated(currentChannel, message2);\n      pubSub.publish(pubSubTopics.UPDATE_USER_MESSAGE, {\n        fromSelector: true,\n        channel: currentChannel,\n        message: message2,\n        publishingModules: [PublishingModuleType.THREAD]\n      });\n    });\n  }, [currentChannel, isMentionEnabled]);\n}\nfunction useDeleteMessageCallback(_a2, _b2) {\n  var currentChannel = _a2.currentChannel, onMessageDeletedByReqId = _a2.onMessageDeletedByReqId, onMessageDeleted = _a2.onMessageDeleted;\n  var logger = _b2.logger;\n  return Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(message) {\n    logger.info(\"Thread | useDeleteMessageCallback: Deleting message.\", message);\n    var sendingStatus = message.sendingStatus;\n    return new Promise(function(resolve, reject) {\n      var _a3;\n      logger.info(\"Thread | useDeleteMessageCallback: Deleting message requestState:\", sendingStatus);\n      if (sendingStatus === \"failed\" || sendingStatus === \"pending\") {\n        logger.info(\"Thread | useDeleteMessageCallback: Deleted message from local:\", message);\n        onMessageDeletedByReqId(message.reqId);\n        resolve();\n      }\n      if (currentChannel == null) {\n        logger.info(\"Thread | useDeleteMessageCallback: No current channel\");\n        resolve();\n      }\n      logger.info(\"Thread | useDeleteMessageCallback: Deleting message from remote:\", sendingStatus);\n      (_a3 = currentChannel.deleteMessage) === null || _a3 === void 0 ? void 0 : _a3.call(currentChannel, message).then(function() {\n        logger.info(\"Thread | useDeleteMessageCallback: Deleting message success!\", message);\n        onMessageDeleted(currentChannel, message.messageId);\n        resolve();\n      }).catch(function(err) {\n        logger.warning(\"Thread | useDeleteMessageCallback: Deleting message failed!\", err);\n        reject(err);\n      });\n    });\n  }, [currentChannel]);\n}\nfunction getThreadMessageListParams(params) {\n  return __assign({ prevResultSize: PREV_THREADS_FETCH_SIZE, nextResultSize: NEXT_THREADS_FETCH_SIZE, includeMetaArray: true }, params);\n}\nvar useThreadFetchers = function(_a2) {\n  var isReactionEnabled = _a2.isReactionEnabled, anchorMessage = _a2.anchorMessage, staleParentMessage = _a2.parentMessage, logger = _a2.logger, oldestMessageTimeStamp = _a2.oldestMessageTimeStamp, latestMessageTimeStamp = _a2.latestMessageTimeStamp, threadListState = _a2.threadListState, initializeThreadListStart = _a2.initializeThreadListStart, initializeThreadListSuccess = _a2.initializeThreadListSuccess, initializeThreadListFailure = _a2.initializeThreadListFailure, getPrevMessagesStart = _a2.getPrevMessagesStart, getPrevMessagesSuccess = _a2.getPrevMessagesSuccess, getPrevMessagesFailure = _a2.getPrevMessagesFailure, getNextMessagesStart = _a2.getNextMessagesStart, getNextMessagesSuccess = _a2.getNextMessagesSuccess, getNextMessagesFailure = _a2.getNextMessagesFailure;\n  var stores2 = useSendbird().state.stores;\n  var timestamp = (anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.createdAt) || 0;\n  var initialize = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(callback) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var params, _a3, threadedMessages_1, parentMessage, error_1;\n      return __generator(this, function(_b2) {\n        switch (_b2.label) {\n          case 0:\n            if (!stores2.sdkStore.initialized || !staleParentMessage)\n              return [\n                2\n                /*return*/\n              ];\n            initializeThreadListStart();\n            _b2.label = 1;\n          case 1:\n            _b2.trys.push([1, 3, , 4]);\n            params = getThreadMessageListParams({ includeReactions: isReactionEnabled });\n            logger.info(\"Thread | useGetThreadList: Initialize thread list start.\", { timestamp, params });\n            return [4, staleParentMessage.getThreadedMessagesByTimestamp(timestamp, params)];\n          case 2:\n            _a3 = _b2.sent(), threadedMessages_1 = _a3.threadedMessages, parentMessage = _a3.parentMessage;\n            logger.info(\"Thread | useGetThreadList: Initialize thread list succeeded.\", { staleParentMessage, threadedMessages: threadedMessages_1 });\n            initializeThreadListSuccess(parentMessage, anchorMessage, threadedMessages_1);\n            setTimeout(function() {\n              return callback === null || callback === void 0 ? void 0 : callback(threadedMessages_1);\n            });\n            return [3, 4];\n          case 3:\n            error_1 = _b2.sent();\n            logger.info(\"Thread | useGetThreadList: Initialize thread list failed.\", error_1);\n            initializeThreadListFailure();\n            return [3, 4];\n          case 4:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [stores2.sdkStore.initialized, staleParentMessage, anchorMessage, isReactionEnabled]);\n  var loadPrevious = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(callback) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var params, _a3, threadedMessages_2, parentMessage, error_2;\n      return __generator(this, function(_b2) {\n        switch (_b2.label) {\n          case 0:\n            if (threadListState !== ThreadListStateTypes.INITIALIZED || oldestMessageTimeStamp === 0 || !staleParentMessage)\n              return [\n                2\n                /*return*/\n              ];\n            getPrevMessagesStart();\n            _b2.label = 1;\n          case 1:\n            _b2.trys.push([1, 3, , 4]);\n            params = getThreadMessageListParams({ nextResultSize: 0, includeReactions: isReactionEnabled });\n            return [4, staleParentMessage.getThreadedMessagesByTimestamp(oldestMessageTimeStamp, params)];\n          case 2:\n            _a3 = _b2.sent(), threadedMessages_2 = _a3.threadedMessages, parentMessage = _a3.parentMessage;\n            logger.info(\"Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.\", { parentMessage, threadedMessages: threadedMessages_2 });\n            getPrevMessagesSuccess(threadedMessages_2);\n            setTimeout(function() {\n              return callback === null || callback === void 0 ? void 0 : callback(threadedMessages_2);\n            });\n            return [3, 4];\n          case 3:\n            error_2 = _b2.sent();\n            logger.info(\"Thread | useGetPrevThreadsCallback: Fetch prev threads failed.\", error_2);\n            getPrevMessagesFailure();\n            return [3, 4];\n          case 4:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [threadListState, oldestMessageTimeStamp, isReactionEnabled, staleParentMessage]);\n  var loadNext = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(callback) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var params, _a3, threadedMessages_3, parentMessage, error_3;\n      return __generator(this, function(_b2) {\n        switch (_b2.label) {\n          case 0:\n            if (threadListState !== ThreadListStateTypes.INITIALIZED || latestMessageTimeStamp === 0 || !staleParentMessage)\n              return [\n                2\n                /*return*/\n              ];\n            getNextMessagesStart();\n            _b2.label = 1;\n          case 1:\n            _b2.trys.push([1, 3, , 4]);\n            params = getThreadMessageListParams({ prevResultSize: 0, includeReactions: isReactionEnabled });\n            return [4, staleParentMessage.getThreadedMessagesByTimestamp(latestMessageTimeStamp, params)];\n          case 2:\n            _a3 = _b2.sent(), threadedMessages_3 = _a3.threadedMessages, parentMessage = _a3.parentMessage;\n            logger.info(\"Thread | useGetNextThreadsCallback: Fetch next threads succeeded.\", { parentMessage, threadedMessages: threadedMessages_3 });\n            getNextMessagesSuccess(threadedMessages_3);\n            setTimeout(function() {\n              return callback === null || callback === void 0 ? void 0 : callback(threadedMessages_3);\n            });\n            return [3, 4];\n          case 3:\n            error_3 = _b2.sent();\n            logger.info(\"Thread | useGetNextThreadsCallback: Fetch next threads failed.\", error_3);\n            getNextMessagesFailure();\n            return [3, 4];\n          case 4:\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [threadListState, latestMessageTimeStamp, isReactionEnabled, staleParentMessage]);\n  return {\n    initializeThreadFetcher: initialize,\n    fetchPrevThreads: loadPrevious,\n    fetchNextThreads: loadNext\n  };\n};\nfunction hasReqId(message) {\n  return \"reqId\" in message;\n}\nvar useThread = function() {\n  var _a2, _b2;\n  var store = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(ThreadContext);\n  if (!store)\n    throw new Error(\"useThread must be used within a ThreadProvider\");\n  var _c = useSendbird().state, stores2 = _c.stores, config2 = _c.config;\n  var logger = config2.logger, pubSub = config2.pubSub;\n  var isMentionEnabled = config2.groupChannel.enableMention;\n  var isReactionEnabled = config2.groupChannel.enableReactions;\n  var state = shimExports.useSyncExternalStore(store.subscribe, store.getState);\n  var message = state.message, parentMessage = state.parentMessage, currentChannel = state.currentChannel, threadListState = state.threadListState, allThreadMessages = state.allThreadMessages, onBeforeSendUserMessage = state.onBeforeSendUserMessage, onBeforeSendFileMessage = state.onBeforeSendFileMessage, onBeforeSendVoiceMessage = state.onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage = state.onBeforeSendMultipleFilesMessage;\n  var sendMessageStatusActions = {\n    sendMessageStart: function(message2) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { localThreadMessages: __spreadArray(__spreadArray([], state2.localThreadMessages, true), [\n          message2\n        ], false) });\n      });\n    },\n    sendMessageSuccess: function(message2) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { allThreadMessages: __spreadArray(__spreadArray([], state2.allThreadMessages.filter(function(m4) {\n          return !compareIds(m4 === null || m4 === void 0 ? void 0 : m4.reqId, message2 === null || message2 === void 0 ? void 0 : message2.reqId);\n        }), true), [\n          message2\n        ], false), localThreadMessages: state2.localThreadMessages.filter(function(m4) {\n          return !compareIds(m4 === null || m4 === void 0 ? void 0 : m4.reqId, message2 === null || message2 === void 0 ? void 0 : message2.reqId);\n        }) });\n      });\n    },\n    sendMessageFailure: function(message2) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { localThreadMessages: state2.localThreadMessages.map(function(m4) {\n          return compareIds(m4 === null || m4 === void 0 ? void 0 : m4.reqId, message2 === null || message2 === void 0 ? void 0 : message2.reqId) ? message2 : m4;\n        }) });\n      });\n    },\n    resendMessageStart: function(message2) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { localThreadMessages: state2.localThreadMessages.map(function(m4) {\n          return compareIds(m4 === null || m4 === void 0 ? void 0 : m4.reqId, message2 === null || message2 === void 0 ? void 0 : message2.reqId) ? message2 : m4;\n        }) });\n      });\n    }\n  };\n  var toggleReaction = useToggleReactionCallback({ currentChannel }, { logger });\n  var sendMessageActions = {\n    sendMessage: useSendUserMessageCallback({\n      isMentionEnabled,\n      currentChannel,\n      onBeforeSendUserMessage,\n      sendMessageStart: sendMessageStatusActions.sendMessageStart,\n      sendMessageFailure: sendMessageStatusActions.sendMessageFailure\n    }, {\n      logger,\n      pubSub\n    }),\n    sendFileMessage: useSendFileMessageCallback({\n      currentChannel,\n      onBeforeSendFileMessage,\n      sendMessageStart: sendMessageStatusActions.sendMessageStart,\n      sendMessageFailure: sendMessageStatusActions.sendMessageFailure\n    }, {\n      logger,\n      pubSub\n    }),\n    sendVoiceMessage: useSendVoiceMessageCallback({\n      currentChannel,\n      onBeforeSendVoiceMessage,\n      sendMessageStart: sendMessageStatusActions.sendMessageStart,\n      sendMessageFailure: sendMessageStatusActions.sendMessageFailure\n    }, {\n      logger,\n      pubSub\n    }),\n    sendMultipleFilesMessage: useSendMultipleFilesMessage({\n      currentChannel,\n      onBeforeSendMultipleFilesMessage,\n      publishingModules: [PublishingModuleType.THREAD]\n    }, {\n      logger,\n      pubSub\n    })[0],\n    resendMessage: useResendMessageCallback({\n      resendMessageStart: sendMessageStatusActions.resendMessageStart,\n      sendMessageSuccess: sendMessageStatusActions.sendMessageSuccess,\n      sendMessageFailure: sendMessageStatusActions.sendMessageFailure,\n      currentChannel\n    }, { logger, pubSub })\n  };\n  var messageModifiedActions = {\n    onMessageUpdated: function(channel, message2) {\n      return store.setState(function(state2) {\n        var _a3, _b3, _c2;\n        if (((_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)) {\n          return state2;\n        }\n        return __assign(__assign({}, state2), { parentMessage: ((_b3 = state2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.messageId) === (message2 === null || message2 === void 0 ? void 0 : message2.messageId) ? message2 : state2.parentMessage, allThreadMessages: (_c2 = state2.allThreadMessages) === null || _c2 === void 0 ? void 0 : _c2.map(function(msg) {\n          return (msg === null || msg === void 0 ? void 0 : msg.messageId) === (message2 === null || message2 === void 0 ? void 0 : message2.messageId) ? message2 : msg;\n        }) });\n      });\n    },\n    onMessageDeleted: function(channel, messageId) {\n      return store.setState(function(state2) {\n        var _a3, _b3, _c2, _d2;\n        if (((_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)) {\n          return state2;\n        }\n        if (((_b3 = state2 === null || state2 === void 0 ? void 0 : state2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.messageId) === messageId) {\n          return __assign(__assign({}, state2), { parentMessage: null, parentMessageState: ParentMessageStateTypes.NIL, allThreadMessages: [] });\n        }\n        return __assign(__assign({}, state2), { allThreadMessages: (_c2 = state2.allThreadMessages) === null || _c2 === void 0 ? void 0 : _c2.filter(function(msg) {\n          return (msg === null || msg === void 0 ? void 0 : msg.messageId) !== messageId;\n        }), localThreadMessages: (_d2 = state2.localThreadMessages) === null || _d2 === void 0 ? void 0 : _d2.filter(function(msg) {\n          return (msg === null || msg === void 0 ? void 0 : msg.messageId) !== messageId;\n        }) });\n      });\n    },\n    onMessageDeletedByReqId: function(reqId) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { localThreadMessages: state2.localThreadMessages.filter(function(m4) {\n          return !compareIds(m4.reqId, reqId);\n        }) });\n      });\n    }\n  };\n  var modifyMessageActions = {\n    updateMessage: useUpdateMessageCallback({\n      currentChannel,\n      isMentionEnabled,\n      onMessageUpdated: messageModifiedActions.onMessageUpdated\n    }, { logger, pubSub }),\n    deleteMessage: useDeleteMessageCallback({\n      currentChannel,\n      onMessageDeleted: messageModifiedActions.onMessageDeleted,\n      onMessageDeletedByReqId: messageModifiedActions.onMessageDeletedByReqId\n    }, { logger })\n  };\n  var threadFetcherStatusActions = {\n    initializeThreadListStart: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { threadListState: ThreadListStateTypes.LOADING, allThreadMessages: [] });\n      });\n    },\n    initializeThreadListSuccess: function(parentMessage2, anchorMessage, threadedMessages) {\n      return store.setState(function(state2) {\n        var anchorMessageCreatedAt = !(anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.messageId) ? parentMessage2 === null || parentMessage2 === void 0 ? void 0 : parentMessage2.createdAt : anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.createdAt;\n        var anchorIndex = threadedMessages.findIndex(function(message2) {\n          return (message2 === null || message2 === void 0 ? void 0 : message2.createdAt) > anchorMessageCreatedAt;\n        });\n        var prevThreadMessages = anchorIndex > -1 ? threadedMessages.slice(0, anchorIndex) : threadedMessages;\n        var anchorThreadMessage = (anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.messageId) ? [anchorMessage] : [];\n        var nextThreadMessages = anchorIndex > -1 ? threadedMessages.slice(anchorIndex) : [];\n        return __assign(__assign({}, state2), { threadListState: ThreadListStateTypes.INITIALIZED, hasMorePrev: anchorIndex === -1 || anchorIndex === PREV_THREADS_FETCH_SIZE, hasMoreNext: threadedMessages.length - anchorIndex === NEXT_THREADS_FETCH_SIZE, allThreadMessages: [prevThreadMessages, anchorThreadMessage, nextThreadMessages].flat() });\n      });\n    },\n    initializeThreadListFailure: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { threadListState: ThreadListStateTypes.LOADING, allThreadMessages: [] });\n      });\n    },\n    getPrevMessagesStart: function() {\n      return store.setState(function(state2) {\n        return __assign({}, state2);\n      });\n    },\n    getPrevMessagesSuccess: function(threadedMessages) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { hasMorePrev: threadedMessages.length === PREV_THREADS_FETCH_SIZE, allThreadMessages: __spreadArray(__spreadArray([], threadedMessages, true), state2.allThreadMessages, true) });\n      });\n    },\n    getPrevMessagesFailure: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { hasMorePrev: false });\n      });\n    },\n    getNextMessagesStart: function() {\n      return store.setState(function(state2) {\n        return __assign({}, state2);\n      });\n    },\n    getNextMessagesSuccess: function(threadedMessages) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { hasMoreNext: threadedMessages.length === NEXT_THREADS_FETCH_SIZE, allThreadMessages: __spreadArray(__spreadArray([], state2.allThreadMessages, true), threadedMessages, true) });\n      });\n    },\n    getNextMessagesFailure: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { hasMoreNext: false });\n      });\n    }\n  };\n  var _d = useThreadFetchers({\n    parentMessage,\n    // anchorMessage should be null when parentMessage doesn't exist\n    anchorMessage: (message === null || message === void 0 ? void 0 : message.messageId) !== (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId) ? message || void 0 : void 0,\n    logger,\n    isReactionEnabled,\n    threadListState,\n    oldestMessageTimeStamp: ((_a2 = allThreadMessages[0]) === null || _a2 === void 0 ? void 0 : _a2.createdAt) || 0,\n    latestMessageTimeStamp: ((_b2 = allThreadMessages[allThreadMessages.length - 1]) === null || _b2 === void 0 ? void 0 : _b2.createdAt) || 0,\n    initializeThreadListStart: threadFetcherStatusActions.initializeThreadListStart,\n    initializeThreadListSuccess: threadFetcherStatusActions.initializeThreadListSuccess,\n    initializeThreadListFailure: threadFetcherStatusActions.initializeThreadListFailure,\n    getPrevMessagesStart: threadFetcherStatusActions.getPrevMessagesStart,\n    getPrevMessagesSuccess: threadFetcherStatusActions.getPrevMessagesSuccess,\n    getPrevMessagesFailure: threadFetcherStatusActions.getPrevMessagesFailure,\n    getNextMessagesStart: threadFetcherStatusActions.getNextMessagesStart,\n    getNextMessagesSuccess: threadFetcherStatusActions.getNextMessagesSuccess,\n    getNextMessagesFailure: threadFetcherStatusActions.getNextMessagesFailure\n  }), initializeThreadFetcher = _d.initializeThreadFetcher, fetchPrevThreads = _d.fetchPrevThreads, fetchNextThreads = _d.fetchNextThreads;\n  var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return __assign(__assign(__assign(__assign(__assign(__assign({ setCurrentUserId: function(currentUserId) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { currentUserId });\n      });\n    }, getChannelStart: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { channelState: ChannelStateTypes.LOADING, currentChannel: null });\n      });\n    }, getChannelSuccess: function(groupChannel) {\n      return store.setState(function(state2) {\n        var _a3, _b3;\n        return __assign(__assign({}, state2), {\n          channelState: ChannelStateTypes.INITIALIZED,\n          currentChannel: groupChannel,\n          // only support in normal group channel\n          isMuted: ((_b3 = (_a3 = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.members) === null || _a3 === void 0 ? void 0 : _a3.find(function(member) {\n            return (member === null || member === void 0 ? void 0 : member.userId) === state2.currentUserId;\n          })) === null || _b3 === void 0 ? void 0 : _b3.isMuted) || false,\n          isChannelFrozen: (groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen) || false\n        });\n      });\n    }, getChannelFailure: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { channelState: ChannelStateTypes.INVALID, currentChannel: null });\n      });\n    }, getParentMessageStart: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { parentMessageState: ParentMessageStateTypes.LOADING, parentMessage: null });\n      });\n    }, getParentMessageSuccess: function(parentMessage2) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { parentMessageState: ParentMessageStateTypes.INITIALIZED, parentMessage: parentMessage2 });\n      });\n    }, getParentMessageFailure: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { parentMessageState: ParentMessageStateTypes.INVALID, parentMessage: null });\n      });\n    }, setEmojiContainer: function(emojiContainer) {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { emojiContainer });\n      });\n    }, onMessageReceived: function(channel, message2) {\n      return store.setState(function(state2) {\n        var _a3, _b3, _c2, _d2;\n        if (((_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state2.hasMoreNext || ((_b3 = message2 === null || message2 === void 0 ? void 0 : message2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.messageId) !== ((_c2 = state2 === null || state2 === void 0 ? void 0 : state2.parentMessage) === null || _c2 === void 0 ? void 0 : _c2.messageId)) {\n          return state2;\n        }\n        var isAlreadyReceived = state2.allThreadMessages.findIndex(function(m4) {\n          return m4.messageId === message2.messageId;\n        }) > -1;\n        return __assign(__assign({}, state2), { parentMessage: ((_d2 = state2.parentMessage) === null || _d2 === void 0 ? void 0 : _d2.messageId) === (message2 === null || message2 === void 0 ? void 0 : message2.messageId) ? message2 : state2.parentMessage, allThreadMessages: isAlreadyReceived ? state2.allThreadMessages.map(function(m4) {\n          return m4.messageId === message2.messageId ? message2 : m4;\n        }) : __spreadArray(__spreadArray([], state2.allThreadMessages.filter(function(m4) {\n          return (m4 === null || m4 === void 0 ? void 0 : m4.reqId) !== (message2 === null || message2 === void 0 ? void 0 : message2.reqId);\n        }), true), [\n          message2\n        ], false) });\n      });\n    }, onReactionUpdated: function(reactionEvent) {\n      return store.setState(function(state2) {\n        var _a3, _b3, _c2;\n        if (((_a3 = state2 === null || state2 === void 0 ? void 0 : state2.parentMessage) === null || _a3 === void 0 ? void 0 : _a3.messageId) === (reactionEvent === null || reactionEvent === void 0 ? void 0 : reactionEvent.messageId)) {\n          (_c2 = (_b3 = state2.parentMessage) === null || _b3 === void 0 ? void 0 : _b3.applyReactionEvent) === null || _c2 === void 0 ? void 0 : _c2.call(_b3, reactionEvent);\n        }\n        return __assign(__assign({}, state2), { allThreadMessages: state2.allThreadMessages.map(function(m4) {\n          var _a4;\n          if ((reactionEvent === null || reactionEvent === void 0 ? void 0 : reactionEvent.messageId) === (m4 === null || m4 === void 0 ? void 0 : m4.messageId)) {\n            (_a4 = m4 === null || m4 === void 0 ? void 0 : m4.applyReactionEvent) === null || _a4 === void 0 ? void 0 : _a4.call(m4, reactionEvent);\n            return m4;\n          }\n          return m4;\n        }) });\n      });\n    }, onUserMuted: function(channel, user) {\n      return store.setState(function(state2) {\n        var _a3;\n        if (((_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state2.currentUserId !== (user === null || user === void 0 ? void 0 : user.userId)) {\n          return state2;\n        }\n        return __assign(__assign({}, state2), { isMuted: true });\n      });\n    }, onUserUnmuted: function(channel, user) {\n      return store.setState(function(state2) {\n        var _a3;\n        if (((_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state2.currentUserId !== (user === null || user === void 0 ? void 0 : user.userId)) {\n          return state2;\n        }\n        return __assign(__assign({}, state2), { isMuted: false });\n      });\n    }, onUserBanned: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { channelState: ChannelStateTypes.NIL, threadListState: ThreadListStateTypes.NIL, parentMessageState: ParentMessageStateTypes.NIL, currentChannel: null, parentMessage: null, allThreadMessages: [], hasMorePrev: false, hasMoreNext: false });\n      });\n    }, onUserUnbanned: function() {\n      return store.setState(function(state2) {\n        return __assign({}, state2);\n      });\n    }, onUserLeft: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { channelState: ChannelStateTypes.NIL, threadListState: ThreadListStateTypes.NIL, parentMessageState: ParentMessageStateTypes.NIL, currentChannel: null, parentMessage: null, allThreadMessages: [], hasMorePrev: false, hasMoreNext: false });\n      });\n    }, onChannelFrozen: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { isChannelFrozen: true });\n      });\n    }, onChannelUnfrozen: function() {\n      return store.setState(function(state2) {\n        return __assign(__assign({}, state2), { isChannelFrozen: false });\n      });\n    }, onOperatorUpdated: function(channel) {\n      return store.setState(function(state2) {\n        var _a3;\n        if ((channel === null || channel === void 0 ? void 0 : channel.url) === ((_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url)) {\n          return __assign(__assign({}, state2), { currentChannel: channel });\n        }\n        return state2;\n      });\n    }, onTypingStatusUpdated: function(channel, typingMembers) {\n      return store.setState(function(state2) {\n        var _a3;\n        if (!compareIds(channel.url, (_a3 = state2.currentChannel) === null || _a3 === void 0 ? void 0 : _a3.url)) {\n          return state2;\n        }\n        return __assign(__assign({}, state2), { typingMembers });\n      });\n    }, onFileInfoUpdated: function(_a3) {\n      var channelUrl = _a3.channelUrl, requestId = _a3.requestId, index2 = _a3.index, uploadableFileInfo = _a3.uploadableFileInfo, error = _a3.error;\n      return store.setState(function(state2) {\n        var _a4, _b3;\n        if (!compareIds(channelUrl, (_a4 = state2.currentChannel) === null || _a4 === void 0 ? void 0 : _a4.url)) {\n          return state2;\n        }\n        if (error)\n          return state2;\n        var localThreadMessages = state2.localThreadMessages;\n        var messageToUpdate = localThreadMessages.find(function(message2) {\n          return compareIds(hasReqId(message2) && message2.reqId, requestId);\n        });\n        var fileInfoList = (_b3 = messageToUpdate.messageParams) === null || _b3 === void 0 ? void 0 : _b3.fileInfoList;\n        if (Array.isArray(fileInfoList)) {\n          fileInfoList[index2] = uploadableFileInfo;\n        }\n        return __assign(__assign({}, state2), { localThreadMessages });\n      });\n    }, toggleReaction }, sendMessageStatusActions), sendMessageActions), messageModifiedActions), modifyMessageActions), threadFetcherStatusActions), { initializeThreadFetcher, fetchPrevThreads, fetchNextThreads });\n  }, [\n    store,\n    currentChannel,\n    stores2.sdkStore.initialized,\n    parentMessage\n  ]);\n  return { state, actions };\n};\n({\n  channelState: ChannelStateTypes.NIL,\n  parentMessageState: ParentMessageStateTypes.NIL,\n  threadListState: ThreadListStateTypes.NIL\n});\nvar ThreadContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nvar SuggestedMentionList = function(props) {\n  var currentChannel = useThread().state.currentChannel;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedMentionListView, __assign({}, props, { currentChannel }));\n};\nvar Role = {\n  OPERATOR: \"operator\"\n};\nvar useHandleUploadFiles = function(_a2, _b2) {\n  var sendFileMessage = _a2.sendFileMessage, sendMultipleFilesMessage = _a2.sendMultipleFilesMessage, quoteMessage = _a2.quoteMessage;\n  var logger = _b2.logger;\n  var stringSet2 = useLocalization().stringSet;\n  var config2 = useSendbird().state.config;\n  var imageCompression = config2.imageCompression;\n  var uikitUploadSizeLimit = config2 === null || config2 === void 0 ? void 0 : config2.uikitUploadSizeLimit;\n  var uikitMultipleFilesMessageLimit = config2 === null || config2 === void 0 ? void 0 : config2.uikitMultipleFilesMessageLimit;\n  var openModal = useGlobalModalContext().openModal;\n  var handleUploadFiles = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function(files) {\n    return __awaiter$5(void 0, void 0, void 0, function() {\n      var compressedFiles, sendingFiles, file, imageFiles_1, otherFiles_1;\n      return __generator(this, function(_a3) {\n        switch (_a3.label) {\n          case 0:\n            if (!sendFileMessage || !sendMultipleFilesMessage) {\n              logger.warning(\"Channel|useHandleUploadFiles: required functions are undefined\", { sendFileMessage, sendMultipleFilesMessage });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            if (files.length === 0) {\n              logger.warning(\"Channel|useHandleUploadFiles: given file list is empty.\", { files });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            if (files.length > uikitMultipleFilesMessageLimit) {\n              logger.info(\"Channel|useHandleUploadFiles: Cannot upload files more than \".concat(uikitMultipleFilesMessageLimit));\n              openModal({\n                modalProps: {\n                  titleText: stringSet2.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace(\"%d\", \"\".concat(uikitMultipleFilesMessageLimit)),\n                  hideFooter: true\n                },\n                childElement: function(_a4) {\n                  var closeModal = _a4.closeModal;\n                  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet2.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal });\n                }\n              });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            if (files.some(function(file2) {\n              return file2.size > uikitUploadSizeLimit;\n            })) {\n              logger.info(\"Channel|useHandleUploadFiles: Cannot upload file size exceeding \".concat(uikitUploadSizeLimit));\n              openModal({\n                modalProps: {\n                  titleText: stringSet2.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace(\"%d\", \"\".concat(Math.floor(uikitUploadSizeLimit / ONE_MiB))),\n                  hideFooter: true\n                },\n                childElement: function(_a4) {\n                  var closeModal = _a4.closeModal;\n                  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet2.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal });\n                }\n              });\n              return [\n                2\n                /*return*/\n              ];\n            }\n            return [4, compressImages({\n              files,\n              imageCompression,\n              logger\n            })];\n          case 1:\n            compressedFiles = _a3.sent().compressedFiles;\n            sendingFiles = compressedFiles;\n            if (sendingFiles.length === 1) {\n              logger.info(\"Channel|useHandleUploadFiles: sending one file.\");\n              file = sendingFiles[0];\n              sendFileMessage(file, quoteMessage);\n            } else if (sendingFiles.length > 1) {\n              logger.info(\"Channel|useHandleUploadFiles: sending multiple files.\");\n              imageFiles_1 = [];\n              otherFiles_1 = [];\n              sendingFiles.forEach(function(file2) {\n                if (isImage(file2.type)) {\n                  imageFiles_1.push(file2);\n                } else {\n                  otherFiles_1.push(file2);\n                }\n              });\n              return [2, otherFiles_1.reduce(function(previousPromise, item) {\n                return previousPromise.then(function() {\n                  return sendFileMessage(item, quoteMessage);\n                });\n              }, function() {\n                if (imageFiles_1.length === 0) {\n                  return Promise.resolve();\n                } else if (imageFiles_1.length === 1) {\n                  return sendFileMessage(imageFiles_1[0], quoteMessage);\n                } else {\n                  return sendMultipleFilesMessage(imageFiles_1, quoteMessage);\n                }\n              }())];\n            }\n            return [\n              2\n              /*return*/\n            ];\n        }\n      });\n    });\n  }, [\n    sendFileMessage,\n    sendMultipleFilesMessage,\n    quoteMessage\n  ]);\n  return handleUploadFiles;\n};\nvar ThreadMessageInput = function(props, ref) {\n  var _a2;\n  var className = props.className, renderFileUploadIcon = props.renderFileUploadIcon, renderVoiceMessageIcon = props.renderVoiceMessageIcon, renderSendMessageIcon = props.renderSendMessageIcon, acceptableMimeTypes = props.acceptableMimeTypes;\n  var config2 = useSendbird().state.config;\n  var isMobile = useMediaQueryContext().isMobile;\n  var stringSet2 = useLocalization().stringSet;\n  var isOnline = config2.isOnline, userMention = config2.userMention, logger = config2.logger, groupChannel = config2.groupChannel;\n  var threadContext = useThread();\n  var _b2 = threadContext.state, currentChannel = _b2.currentChannel, parentMessage = _b2.parentMessage, isMuted = _b2.isMuted, isChannelFrozen = _b2.isChannelFrozen, allThreadMessages = _b2.allThreadMessages, _c = threadContext.actions, sendMessage = _c.sendMessage, sendFileMessage = _c.sendFileMessage, sendVoiceMessage = _c.sendVoiceMessage, sendMultipleFilesMessage = _c.sendMultipleFilesMessage;\n  var messageInputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var isMentionEnabled = groupChannel.enableMention;\n  var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;\n  var isMultipleFilesMessageEnabled = (_a2 = threadContext.state.isMultipleFilesMessageEnabled) !== null && _a2 !== void 0 ? _a2 : config2.isMultipleFilesMessageEnabled;\n  var threadInputDisabled = props.disabled || !isOnline || isMuted || !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR) && isChannelFrozen || parentMessage === null;\n  var handleUploadFiles = useHandleUploadFiles({\n    sendFileMessage,\n    sendMultipleFilesMessage,\n    quoteMessage: parentMessage\n  }, {\n    logger\n  });\n  var _d = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\"), mentionNickname = _d[0], setMentionNickname = _d[1];\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUsers = _e2[0], setMentionedUsers = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionedUserIds = _f[0], setMentionedUserIds = _f[1];\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), selectedUser = _g2[0], setSelectedUser = _g2[1];\n  var _h = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), mentionSuggestedUsers = _h[0], setMentionSuggestedUsers = _h[1];\n  var _j = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), messageInputEvent = _j[0], setMessageInputEvent = _j[1];\n  var _k = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showVoiceMessageInput = _k[0], setShowVoiceMessageInput = _k[1];\n  var displaySuggestedMentionList = isOnline && isMentionEnabled && mentionNickname.length > 0 && !isDisabledBecauseFrozen(currentChannel) && !isDisabledBecauseMuted(currentChannel) && !(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isBroadcast);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setShowVoiceMessageInput(false);\n  }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);\n  var mentionNodes = useDirtyGetMentions({ ref: ref || messageInputRef }, { logger });\n  var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    setMentionedUsers(mentionedUsers.filter(function(_a3) {\n      var userId = _a3.userId;\n      var i3 = mentionedUserIds.indexOf(userId);\n      if (i3 < 0) {\n        return false;\n      } else {\n        mentionedUserIds.splice(i3, 1);\n        return true;\n      }\n    }));\n  }, [mentionedUserIds]);\n  if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isBroadcast) && (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) !== Role.OPERATOR) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: classnames(showVoiceMessageInput ? \"sendbird-thread-message-input--voice-message\" : \"sendbird-thread-message-input\", className) },\n    displaySuggestedMentionList && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SuggestedMentionList, {\n      targetNickname: mentionNickname,\n      inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : void 0,\n      // renderUserMentionItem={renderUserMentionItem}\n      onUserItemClick: function(user) {\n        if (user) {\n          setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));\n        }\n        setMentionNickname(\"\");\n        setSelectedUser(user);\n        setMessageInputEvent(null);\n      },\n      onFocusItemChange: function() {\n        setMessageInputEvent(null);\n      },\n      onFetchUsers: function(users) {\n        setMentionSuggestedUsers(users);\n      },\n      ableAddMention: ableMention,\n      maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount,\n      maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount\n    }),\n    showVoiceMessageInput ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(VoiceMessageInputWrapper, { channel: currentChannel, onSubmitClick: function(recordedFile, duration) {\n      sendVoiceMessage(recordedFile, duration, parentMessage);\n      setShowVoiceMessageInput(false);\n    }, onCancelClick: function() {\n      setShowVoiceMessageInput(false);\n    } }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInput, { className: \"sendbird-thread-message-input__message-input\", messageFieldId: \"sendbird-message-input-text-field--thread\", channel: currentChannel, channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url, isMobile, disabled: threadInputDisabled, acceptableMimeTypes, setMentionedUsers, mentionSelectedUser: selectedUser, isMentionEnabled, isVoiceMessageEnabled, isSelectingMultipleFilesEnabled: isMultipleFilesMessageEnabled, onVoiceMessageIconClick: function() {\n      setShowVoiceMessageInput(true);\n    }, renderFileUploadIcon, renderVoiceMessageIcon, renderSendMessageIcon, ref: ref || messageInputRef, placeholder: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isFrozen) && !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR) && stringSet2.MESSAGE_INPUT__PLACE_HOLDER__DISABLED || (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myMutedState) === z.MUTED && stringSet2.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT || (allThreadMessages.length > 0 ? stringSet2.THREAD__INPUT__REPLY_TO_THREAD : stringSet2.THREAD__INPUT__REPLY_IN_THREAD), onStartTyping: function() {\n      var _a3;\n      (_a3 = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.startTyping) === null || _a3 === void 0 ? void 0 : _a3.call(currentChannel);\n    }, onSendMessage: function(_a3) {\n      var _b3;\n      var message = _a3.message, mentionTemplate = _a3.mentionTemplate;\n      sendMessage({\n        message,\n        mentionedUsers,\n        mentionTemplate,\n        quoteMessage: parentMessage\n      });\n      setMentionNickname(\"\");\n      setMentionedUsers([]);\n      (_b3 = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _b3 === void 0 ? void 0 : _b3.call(currentChannel);\n    }, onFileUpload: handleUploadFiles, onUserMentioned: function(user) {\n      if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {\n        setSelectedUser(null);\n        setMentionNickname(\"\");\n      }\n    }, onMentionStringChange: function(mentionText) {\n      setMentionNickname(mentionText);\n    }, onMentionedUserIdsUpdated: function(userIds) {\n      setMentionedUserIds(userIds);\n    }, onKeyDown: function(e3) {\n      if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e3.key === MessageInputKeys.Enter && ableMention || e3.key === MessageInputKeys.ArrowUp || e3.key === MessageInputKeys.ArrowDown)) {\n        setMessageInputEvent(e3);\n        return true;\n      }\n      return false;\n    } })\n  );\n};\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(ThreadMessageInput);\nvar DELAY = 100;\nfunction calcScrollBottom(scrollHeight, scrollTop) {\n  return scrollHeight - scrollTop;\n}\nfunction useHandleOnScrollCallback(_a2) {\n  var hasMore = _a2.hasMore, hasNext = _a2.hasNext, onScroll = _a2.onScroll, scrollRef = _a2.scrollRef, setShowScrollDownButton = _a2.setShowScrollDownButton;\n  var scrollCb = usePreservedCallback$1(function() {\n    var element2 = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;\n    if (element2 == null)\n      return;\n    var scrollTop = element2.scrollTop, scrollHeight = element2.scrollHeight, clientHeight = element2.clientHeight;\n    var scrollBottom = calcScrollBottom(scrollHeight, scrollTop);\n    if (typeof setShowScrollDownButton === \"function\") {\n      setShowScrollDownButton(scrollHeight > scrollTop + clientHeight + 1);\n    }\n    if (hasMore && isAboutSame(scrollTop, 0, SCROLL_BUFFER)) {\n      onScroll(function() {\n        var messagesAreAddedToView = element2.scrollHeight > scrollHeight;\n        if (messagesAreAddedToView)\n          element2.scrollTop = element2.scrollHeight - scrollBottom;\n      });\n    }\n    if (hasNext && isAboutSame(clientHeight + scrollTop, scrollHeight, SCROLL_BUFFER)) {\n      onScroll(function() {\n        var messagesAreAddedToView = element2.scrollHeight > scrollHeight;\n        if (messagesAreAddedToView)\n          element2.scrollTop = scrollTop;\n      });\n    }\n  });\n  return useThrottleCallback(scrollCb, DELAY, { trailing: true });\n}\nvar OpenChannelContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nvar useOpenChannelContext = function() {\n  var context = react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(OpenChannelContext);\n  if (!context)\n    throw new Error(\"OpenChannelContext not found. Use within the OpenChannel module\");\n  return context;\n};\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function(props, ref) {\n  var _a2 = useOpenChannelContext(), currentOpenChannel = _a2.currentOpenChannel, disabled = _a2.disabled, handleSendMessage = _a2.handleSendMessage, handleFileUpload = _a2.handleFileUpload, amIMuted = _a2.amIMuted;\n  var channel = currentOpenChannel;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var value = props.value;\n  function getPlaceHolderString() {\n    if (amIMuted) {\n      return stringSet2.MESSAGE_INPUT__PLACE_HOLDER__MUTED;\n    }\n    if (disabled) {\n      return stringSet2.MESSAGE_INPUT__PLACE_HOLDER__DISABLED;\n    }\n    return \"\";\n  }\n  if (!channel) {\n    return null;\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-openchannel-footer\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInput, { channel: currentOpenChannel, ref, value, disabled, isVoiceMessageEnabled: false, onSendMessage: handleSendMessage, onFileUpload: handleFileUpload, placeholder: getPlaceHolderString() })\n  );\n});\nvar copyToClipboard = function(text2) {\n  if (window.clipboardData && window.clipboardData.setData) {\n    return window.clipboardData.setData(\"Text\", text2);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\n    var textarea = document.createElement(\"textarea\");\n    textarea.textContent = text2;\n    textarea.style.position = \"fixed\";\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\");\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\nvar OpenChannelMessageStatusTypes = {\n  PENDING: \"pending\",\n  FAILED: \"failed\",\n  SUCCEEDED: \"succeeded\"\n};\nvar getSenderFromMessage = function(message) {\n  return message.sender || message._sender;\n};\nvar checkIsSent = function(status) {\n  return status === OpenChannelMessageStatusTypes.SUCCEEDED;\n};\nvar checkIsPending = function(status) {\n  return status === OpenChannelMessageStatusTypes.PENDING;\n};\nvar checkIsFailed = function(status) {\n  return status === OpenChannelMessageStatusTypes.FAILED;\n};\nvar checkIsByMe = function(message, userId) {\n  return getSenderFromMessage(message).userId === userId;\n};\nvar isFineCopy = function(_a2) {\n  var _b2;\n  var message = _a2.message;\n  return (message === null || message === void 0 ? void 0 : message.messageType) === \"user\" && ((_b2 = message === null || message === void 0 ? void 0 : message.message) === null || _b2 === void 0 ? void 0 : _b2.length) > 0;\n};\nvar isFineResend = function(_a2) {\n  var message = _a2.message, status = _a2.status, userId = _a2.userId;\n  return checkIsByMe(message, userId) && checkIsFailed(status) && (message === null || message === void 0 ? void 0 : message.isResendable);\n};\nvar isFineEdit = function(_a2) {\n  var _b2;\n  var message = _a2.message, status = _a2.status, userId = _a2.userId;\n  return checkIsByMe(message, userId) && checkIsSent(status) && ((_b2 = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _b2 === void 0 ? void 0 : _b2.call(message));\n};\nvar isFineDelete = function(_a2) {\n  var message = _a2.message, userId = _a2.userId;\n  return checkIsByMe(message, userId);\n};\nvar isFineDownload = function(_a2) {\n  var _b2;\n  var message = _a2.message, status = _a2.status;\n  if (((_b2 = message === null || message === void 0 ? void 0 : message.isFileMessage) === null || _b2 === void 0 ? void 0 : _b2.call(message)) && checkIsSent(status)) {\n    return true;\n  }\n  return false;\n};\nvar showMenuTrigger = function(props) {\n  var message = props.message, status = props.status, userId = props.userId;\n  if (message.messageType === \"user\") {\n    return isFineDelete({ message, userId }) || isFineEdit({ message, status, userId }) || isFineCopy({ message }) || isFineResend({ message, status, userId });\n  } else {\n    return isFineDelete({ message, userId }) || isFineResend({ message, status, userId });\n  }\n};\nvar OpenChannelMobileMenu = function(props) {\n  var message = props.message, parentRef = props.parentRef, resendMessage = props.resendMessage, showEdit = props.showEdit, showRemove = props.showRemove, copyToClipboard2 = props.copyToClipboard, hideMenu = props.hideMenu, _a2 = props.isEphemeral, isEphemeral = _a2 === void 0 ? false : _a2;\n  var userMessage = message;\n  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;\n  var stringSet2 = useLocalization().stringSet;\n  var userId = useSendbird().state.config.userId;\n  var fileMessage = message;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { isOpen: true, menuItems: function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      MenuItems,\n      { className: \"sendbird-openchannel__mobile-menu\", parentRef, parentContainRef: parentRef, closeDropdown: hideMenu },\n      isFineCopy({ message: userMessage }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItem,\n        { className: \"sendbird-openchannel-og-message__top__context-menu__copy\", onClick: function() {\n          copyToClipboard2 === null || copyToClipboard2 === void 0 ? void 0 : copyToClipboard2();\n        }, testID: \"open_channel_mobile_context_menu_copy\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, stringSet2.CONTEXT_MENU_DROPDOWN__COPY)\n      ),\n      !isEphemeral && isFineEdit({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItem,\n        { className: \"sendbird-openchannel-og-message__top__context-menu__edit\", onClick: function() {\n          showEdit === null || showEdit === void 0 ? void 0 : showEdit();\n        }, testID: \"open_channel_mobile_context_menu_edit\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, stringSet2.CONTEXT_MENU_DROPDOWN__EDIT)\n      ),\n      isFineResend({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItem,\n        { onClick: function() {\n          resendMessage === null || resendMessage === void 0 ? void 0 : resendMessage();\n        }, testID: \"open_channel_mobile_context_menu_resend\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, stringSet2.CONTEXT_MENU_DROPDOWN__RESEND)\n      ),\n      !isEphemeral && isFineDelete({ message, userId }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItem,\n        { onClick: function() {\n          showRemove === null || showRemove === void 0 ? void 0 : showRemove();\n        }, testID: \"open_channel_mobile_context_menu_delete\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, stringSet2.CONTEXT_MENU_DROPDOWN__DELETE)\n      ),\n      isFineDownload({ message, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        MenuItem,\n        { onClick: function() {\n          hideMenu();\n        }, testID: \"open_channel_mobile_context_menu_download_file\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"a\", { className: \"sendbird-openchannel__mobile-menu-hyperlink\", rel: \"noopener noreferrer\", href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url, target: \"_blank\" }, stringSet2.CONTEXT_MENU_DROPDOWN__SAVE)\n      )\n    );\n  } });\n};\nfunction OpenchannelUserMessage(_a2) {\n  var className = _a2.className, message = _a2.message, isOperator2 = _a2.isOperator, _b2 = _a2.isEphemeral, isEphemeral = _b2 === void 0 ? false : _b2, userId = _a2.userId, resendMessage = _a2.resendMessage, disabled = _a2.disabled, showEdit = _a2.showEdit, showRemove = _a2.showRemove, chainTop = _a2.chainTop;\n  var _c = useLocalization(), stringSet2 = _c.stringSet, dateLocale = _c.dateLocale;\n  var _d = useUserProfileContext(), disableUserProfile = _d.disableUserProfile, renderUserProfile = _d.renderUserProfile;\n  var messageRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var avatarRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var contextMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var mobileMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({}), contextStyle = _e2[0], setContextStyle = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), contextMenu = _f[0], setContextMenu = _f[1];\n  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;\n  var isPending = checkIsPending(status);\n  var isFailed = checkIsFailed(status);\n  var sender = getSenderFromMessage(message);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3;\n    if (((_a3 = messageRef === null || messageRef === void 0 ? void 0 : messageRef.current) === null || _a3 === void 0 ? void 0 : _a3.clientHeight) && messageRef.current.clientHeight > 36) {\n      setContextStyle({ top: \"8px \" });\n    } else {\n      setContextStyle({ top: \"2px\" });\n    }\n  }, [window.innerWidth]);\n  var onLongPress = useLongPress({\n    onLongPress: function() {\n      setContextMenu(true);\n    }\n  });\n  var isMobile = useMediaQueryContext().isMobile;\n  if (!message || message.messageType !== \"user\") {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n        \"sendbird-openchannel-user-message\"\n      ], false).join(\" \"), ref: messageRef },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-user-message__left\" }, !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-openchannel-user-message__left__avatar\", src: sender.profileUrl || \"\", ref: avatarRef, width: \"28px\", height: \"28px\", onClick: function() {\n          if (!disableUserProfile) {\n            toggleDropdown();\n          }\n        } });\n      }, menuItems: function(closeDropdown) {\n        return renderUserProfile ? renderUserProfile({\n          user: sender,\n          close: closeDropdown,\n          currentUserId: userId,\n          avatarRef\n        }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          MenuItems,\n          { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown, style: { paddingTop: \"0px\", paddingBottom: \"0px\" } },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })\n        );\n      } })),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-openchannel-user-message__right\" },\n        !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-user-message__right__top\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-user-message__right__top__sender-name\", type: LabelTypography.CAPTION_2, color: isOperator2 ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName || sender.nickname || sender.userId)),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-user-message__right__top__sent-at\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message === null || message === void 0 ? void 0 : message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT, {\n            locale: dateLocale\n          }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          __assign({}, isMobile ? __assign({}, onLongPress) : {}, { className: \"sendbird-openchannel-user-message__right__bottom\", ref: mobileMenuRef }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Label,\n            { className: \"sendbird-openchannel-user-message__right__bottom__message\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 },\n            message === null || message === void 0 ? void 0 : message.message,\n            isEditedMessage(message) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { key: uuidv4(), type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2, className: \"sendbird-openchannel-user-message-word\" }, \" \".concat(stringSet2.MESSAGE_EDITED, \" \"))\n          )\n        ),\n        (isPending || isFailed) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-user-message__right__tail\" },\n          isPending && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Loader,\n            { width: \"16px\", height: \"16px\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-user-message__right__tail__pending\", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: \"16px\", height: \"16px\" })\n          ),\n          isFailed && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-user-message__right__tail__failed\", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: \"16px\", height: \"16px\" })\n        )\n      ),\n      !isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-openchannel-user-message__context-menu\", ref: contextMenuRef, style: contextStyle },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n          return showMenuTrigger({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            IconButton$1,\n            { className: \"sendbird-openchannel-user-message__context-menu--icon\", width: \"32px\", height: \"32px\", onClick: function() {\n              toggleDropdown();\n            } },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: \"24px\", height: \"24px\" })\n          );\n        }, menuItems: function(closeDropdown) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            MenuItems,\n            { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown, openLeft: true },\n            isFineCopy({ message }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-user-message__context-menu__copy\", onClick: function() {\n              copyToClipboard(message.message);\n              closeDropdown();\n            }, testID: \"open_channel_user_message_menu_copy\" }, stringSet2.CONTEXT_MENU_DROPDOWN__COPY),\n            !isEphemeral && isFineEdit({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-user-message__context-menu__edit\", onClick: function() {\n              if (disabled) {\n                return;\n              }\n              showEdit(true);\n              closeDropdown();\n            }, testID: \"open_channel_user_message_menu_edit\" }, stringSet2.CONTEXT_MENU_DROPDOWN__EDIT),\n            isFineResend({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-user-message__context-menu__resend\", onClick: function() {\n              resendMessage(message);\n              closeDropdown();\n            }, testID: \"open_channel_user_message_menu_resend\" }, stringSet2.CONTEXT_MENU_DROPDOWN__RESEND),\n            !isEphemeral && isFineDelete({ message, userId }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-user-message__context-menu__delete\", onClick: function() {\n              if (disabled) {\n                return;\n              }\n              showRemove(true);\n              closeDropdown();\n            }, testID: \"open_channel_user_message_menu_delete\" }, stringSet2.CONTEXT_MENU_DROPDOWN__DELETE)\n          );\n        } })\n      )\n    ),\n    contextMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelMobileMenu, { message, parentRef: mobileMenuRef, hideMenu: function() {\n      setContextMenu(false);\n    }, showRemove: function() {\n      setContextMenu(false);\n      showRemove(true);\n    }, showEdit: function() {\n      setContextMenu(false);\n      showEdit(true);\n    }, copyToClipboard: function() {\n      setContextMenu(false);\n      copyToClipboard(message === null || message === void 0 ? void 0 : message.message);\n    }, resendMessage: function() {\n      setContextMenu(false);\n      resendMessage(message);\n    } })\n  );\n}\nfunction OpenChannelAdminMessage(_a2) {\n  var className = _a2.className, message = _a2.message;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n      \"sendbird-openchannel-admin-message\"\n    ], false).join(\" \") },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-admin-message__text\", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, message.message || \"\")\n  );\n}\nfunction OpenChannelOGMessage(_a2) {\n  var _b2, _c, _d;\n  var message = _a2.message, isOperator2 = _a2.isOperator, _e2 = _a2.isEphemeral, isEphemeral = _e2 === void 0 ? false : _e2, className = _a2.className, disabled = _a2.disabled, showEdit = _a2.showEdit, showRemove = _a2.showRemove, resendMessage = _a2.resendMessage, chainTop = _a2.chainTop, userId = _a2.userId;\n  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;\n  var ogMetaData = (_b2 = message.ogMetaData) !== null && _b2 !== void 0 ? _b2 : null;\n  var defaultImage = ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.defaultImage;\n  var _f = useLocalization(), stringSet2 = _f.stringSet, dateLocale = _f.dateLocale;\n  var isMobile = useMediaQueryContext().isMobile;\n  var _g2 = useUserProfileContext(), disableUserProfile = _g2.disableUserProfile, renderUserProfile = _g2.renderUserProfile;\n  var _h = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({}), contextStyle = _h[0], setContextStyle = _h[1];\n  var _j = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showContextMenu = _j[0], setShowContextMenu = _j[1];\n  var openLink = function() {\n    return openURL(ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.url);\n  };\n  var onLongPress = useLongPress({\n    onLongPress: function() {\n      return setShowContextMenu(true);\n    },\n    onClick: openLink\n  }, {\n    delay: 300\n  });\n  var messageComponentRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var contextMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var mobileMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var avatarRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  var isPending = checkIsPending(status);\n  var isFailed = checkIsFailed(status);\n  var sender = getSenderFromMessage(message);\n  var tokens = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return tokenizeMessage({\n      messageText: message.message\n    });\n  }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3, _b3;\n    if (((_a3 = messageComponentRef === null || messageComponentRef === void 0 ? void 0 : messageComponentRef.current) === null || _a3 === void 0 ? void 0 : _a3.clientHeight) && ((_b3 = messageComponentRef === null || messageComponentRef === void 0 ? void 0 : messageComponentRef.current) === null || _b3 === void 0 ? void 0 : _b3.clientHeight) > 36) {\n      setContextStyle({ top: \"8px \" });\n    } else {\n      setContextStyle({ top: \"2px\" });\n    }\n  }, [window.innerWidth]);\n  if (!message || message.messageType !== \"user\") {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null);\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      __assign({ className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n        \"sendbird-openchannel-og-message\"\n      ], false).join(\" \"), ref: messageComponentRef }, isMobile ? __assign({}, onLongPress) : {}),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-openchannel-og-message__top\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-og-message__top__left\" }, !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-openchannel-og-message__top__left__avatar\", src: sender.profileUrl || \"\", ref: avatarRef, width: \"28px\", height: \"28px\", onClick: function() {\n            if (!disableUserProfile) {\n              toggleDropdown();\n            }\n          } });\n        }, menuItems: function(closeDropdown) {\n          return renderUserProfile ? renderUserProfile({\n            user: sender,\n            close: closeDropdown,\n            currentUserId: userId,\n            avatarRef\n          }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            MenuItems,\n            { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown, style: { paddingTop: \"0px\", paddingBottom: \"0px\" } },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })\n          );\n        } })),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-og-message__top__right\" },\n          !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-openchannel-og-message__top__right__title\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-og-message__top__right__title__sender-name\", type: LabelTypography.CAPTION_2, color: isOperator2 ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName || sender.nickname || sender.userId)),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-og-message__top__right__title__sent-at\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message === null || message === void 0 ? void 0 : message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT, {\n              locale: dateLocale\n            }))\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-openchannel-og-message__top__right__description\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              Label,\n              { className: \"sendbird-openchannel-og-message__top__right__description__message\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextFragment, { tokens }),\n              ((_c = message === null || message === void 0 ? void 0 : message.updatedAt) !== null && _c !== void 0 ? _c : 0) > 0 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { key: uuidv4(), className: \"sendbird-openchannel-og-message--word\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet2.MESSAGE_EDITED)\n            )\n          )\n        ),\n        !isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-og-message__top__context-menu\", ref: contextMenuRef, style: contextStyle },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n            return showMenuTrigger({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              IconButton$1,\n              { className: \"sendbird-openchannel-og-message__top__context-menu--icon\", width: \"32px\", height: \"32px\", onClick: function() {\n                toggleDropdown();\n              } },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: \"24px\", height: \"24px\" })\n            );\n          }, menuItems: function(closeDropdown) {\n            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              MenuItems,\n              { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown, openLeft: true },\n              isFineCopy({ message }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-og-message__top__context-menu__copy\", onClick: function() {\n                copyToClipboard(message.message);\n                closeDropdown();\n              }, testID: \"open_channel_og_message_menu_copy\" }, stringSet2.CONTEXT_MENU_DROPDOWN__COPY),\n              !isEphemeral && isFineEdit({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-og-message__top__context-menu__edit\", onClick: function() {\n                if (disabled) {\n                  return;\n                }\n                showEdit(true);\n                closeDropdown();\n              }, testID: \"open_channel_og_message_menu_edit\" }, stringSet2.CONTEXT_MENU_DROPDOWN__EDIT),\n              isFineResend({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-og-message__top__context-menu__resend\", onClick: function() {\n                resendMessage(message);\n                closeDropdown();\n              }, testID: \"open_channel_og_message_menu_resend\" }, stringSet2.CONTEXT_MENU_DROPDOWN__RESEND),\n              !isEphemeral && isFineDelete({ message, userId }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { className: \"sendbird-openchannel-og-message__top__context-menu__delete\", onClick: function() {\n                if (disabled) {\n                  return;\n                }\n                showRemove(true);\n                closeDropdown();\n              }, testID: \"open_channel_og_message_menu_delete\" }, stringSet2.CONTEXT_MENU_DROPDOWN__DELETE)\n            );\n          } })\n        )\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-openchannel-og-message__bottom\" },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-og-message__bottom__og-tag\", ref: mobileMenuRef },\n          (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.url) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-og-message__bottom__og-tag__url\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, ogMetaData.url),\n          (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.title) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LinkLabel, { className: \"sendbird-openchannel-og-message__bottom__og-tag__title\", src: (_d = ogMetaData.url) !== null && _d !== void 0 ? _d : \"\", type: LabelTypography.SUBTITLE_2, color: LabelColors.PRIMARY }, ogMetaData.title),\n          (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.description) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-og-message__bottom__og-tag__description\", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, ogMetaData.description),\n          (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.url) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-og-message__bottom__og-tag__thumbnail\", role: \"button\", onClick: openLink, onKeyDown: openLink, tabIndex: 0 }, defaultImage && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: \"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image\", url: defaultImage.url || \"\", alt: defaultImage.alt || \"\", width: \"334px\", height: \"189px\", defaultComponent: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { className: \"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.THUMBNAIL_NONE, width: \"56px\", height: \"56px\" })\n          ) }))\n        ),\n        (isPending || isFailed) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-og-message__top__right__tail\" },\n          isPending && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Loader,\n            { width: \"16px\", height: \"16px\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-og-message__top__right__tail__pending\", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: \"16px\", height: \"16px\" })\n          ),\n          isFailed && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-og-message__top__right__tail__failed\", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: \"16px\", height: \"16px\" })\n        )\n      )\n    ),\n    showContextMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelMobileMenu, { message, parentRef: mobileMenuRef, hideMenu: function() {\n      setShowContextMenu(false);\n    }, showRemove: function() {\n      setShowContextMenu(false);\n      showRemove(true);\n    }, showEdit: function() {\n      setShowContextMenu(false);\n      showEdit(true);\n    }, copyToClipboard: function() {\n      setShowContextMenu(false);\n      copyToClipboard(message === null || message === void 0 ? void 0 : message.message);\n    }, resendMessage: function() {\n      setShowContextMenu(false);\n      resendMessage(message);\n    } })\n  );\n}\nvar SUPPORTING_TYPES = {\n  IMAGE: \"IMAGE\",\n  VIDEO: \"VIDEO\",\n  UNSUPPORTED: \"UNSUPPORTED\"\n};\nvar SUPPORTED_MIMES = {\n  IMAGE: [\n    \"image/jpeg\",\n    \"image/jpg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/webp\"\n  ],\n  VIDEO: [\n    \"video/mpeg\",\n    \"video/ogg\",\n    \"video/webm\",\n    \"video/mp4\"\n  ]\n};\nvar getSupportingFileType = function(type) {\n  if (SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0) {\n    return SUPPORTING_TYPES.IMAGE;\n  }\n  if (SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0) {\n    return SUPPORTING_TYPES.VIDEO;\n  }\n  return SUPPORTING_TYPES.UNSUPPORTED;\n};\nfunction OpenchannelThumbnailMessage(_a2) {\n  var _b2;\n  var className = _a2.className, message = _a2.message, isOperator2 = _a2.isOperator, _c = _a2.isEphemeral, isEphemeral = _c === void 0 ? false : _c, disabled = _a2.disabled, userId = _a2.userId, chainTop = _a2.chainTop, onClick = _a2.onClick, showRemove = _a2.showRemove, resendMessage = _a2.resendMessage;\n  var type = message.type, url = message.url, thumbnails = message.thumbnails, localUrl = message.localUrl;\n  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;\n  var thumbnailUrl = thumbnails && thumbnails.length > 0 && thumbnails[0].url || null;\n  var _d = useLocalization(), stringSet2 = _d.stringSet, dateLocale = _d.dateLocale;\n  var _e2 = useUserProfileContext(), disableUserProfile = _e2.disableUserProfile, renderUserProfile = _e2.renderUserProfile;\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(360), messageWidth = _f[0], setMessageWidth = _f[1];\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), contextMenu = _g2[0], setContextMenu = _g2[1];\n  var messageRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var mobileMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var contextMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var avatarRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var onLongPress = useLongPress({\n    onLongPress: function() {\n      setContextMenu(true);\n    },\n    onClick: function() {\n      onClick(true);\n    }\n  });\n  var isMobile = useMediaQueryContext().isMobile;\n  var memorizedThumbnailPlaceHolder = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return function(type2) {\n      return function(_a3) {\n        var style = _a3.style;\n        return (\n          // eslint-disable-line\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            { style },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: type2, fillColor: IconColors.ON_BACKGROUND_2, width: \"56px\", height: \"56px\" })\n          )\n        );\n      };\n    };\n  }, []);\n  var isMessageSent = checkIsSent(status);\n  var isPending = checkIsPending(status);\n  var isFailed = checkIsFailed(status);\n  var sender = getSenderFromMessage(message);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var _a3, _b3;\n    var thumbnailWidth = ((_b3 = (_a3 = messageRef === null || messageRef === void 0 ? void 0 : messageRef.current) === null || _a3 === void 0 ? void 0 : _a3.clientWidth) !== null && _b3 !== void 0 ? _b3 : 0) - 80;\n    setMessageWidth(thumbnailWidth > 360 ? 360 : thumbnailWidth);\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n        \"sendbird-openchannel-thumbnail-message\"\n      ], false).join(\" \"), ref: messageRef },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-thumbnail-message__left\" }, !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-openchannel-thumbnail-message__left__avatar\", src: sender.profileUrl || \"\", ref: avatarRef, width: \"28px\", height: \"28px\", onClick: function() {\n          if (!disableUserProfile) {\n            toggleDropdown();\n          }\n        } });\n      }, menuItems: function(closeDropdown) {\n        return renderUserProfile ? renderUserProfile({\n          user: sender,\n          close: closeDropdown,\n          currentUserId: userId,\n          avatarRef\n        }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          MenuItems,\n          { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown, style: { paddingTop: \"0px\", paddingBottom: \"0px\" } },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })\n        );\n      } })),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-openchannel-thumbnail-message__right\" },\n        !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-thumbnail-message__right__title\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-thumbnail-message__right__title__sender-name\", type: LabelTypography.CAPTION_2, color: isOperator2 ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName || sender.nickname || sender.userId)),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-thumbnail-message__right__title__sent-at\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT, {\n            locale: dateLocale\n          }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-thumbnail-message__right__body\", ref: mobileMenuRef },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            \"div\",\n            __assign({ className: \"sendbird-openchannel-thumbnail-message__right__body__wrap\", role: \"button\", onClick: function() {\n              if (isMessageSent) {\n                onClick(true);\n              }\n            }, onKeyDown: function() {\n              if (isMessageSent) {\n                onClick(true);\n              }\n            }, tabIndex: 0 }, isMobile ? __assign({}, onLongPress) : {}),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay\" }),\n            (_b2 = {}, _b2[SUPPORTING_TYPES.VIDEO] = url || localUrl ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              \"div\",\n              { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__video\" },\n              thumbnailUrl ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__video\", url: thumbnailUrl, width: messageWidth, height: \"270px\", alt: \"image\", placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PLAY) }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                \"video\",\n                { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video\" },\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"source\", { src: url || localUrl, type })\n              ),\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon\", type: IconTypes.PLAY, fillColor: IconColors.ON_BACKGROUND_2, width: \"56px\", height: \"56px\" })\n            ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon\", type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: \"56px\", height: \"56px\" }), _b2[SUPPORTING_TYPES.IMAGE] = url || localUrl ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ImageRenderer, { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__image\", url: thumbnailUrl || url || localUrl || \"\", alt: \"image\", width: messageWidth, height: \"270px\", placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PHOTO) }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon\", type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: \"56px\", height: \"56px\" }), _b2[SUPPORTING_TYPES.UNSUPPORTED] = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown\", type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: \"56px\", height: \"56px\" }), _b2)[getSupportingFileType(type)]\n          )\n        ),\n        (isPending || isFailed) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-thumbnail-message__right__tail\" },\n          isPending && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Loader,\n            { width: \"16px\", height: \"16px\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-thumbnail-message__right__tail__pending\", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: \"16px\", height: \"16px\" })\n          ),\n          isFailed && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-thumbnail-message__right__tail__failed\", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: \"16px\", height: \"16px\" })\n        )\n      ),\n      !isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-thumbnail-message__context-menu\", ref: contextMenuRef }, (isFineResend({ message, userId, status }) || !isEphemeral) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n        return showMenuTrigger({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          IconButton$1,\n          { className: \"sendbird-openchannel-thumbnail-message__context-menu--icon\", width: \"32px\", height: \"32px\", onClick: toggleDropdown },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: \"24px\", height: \"24px\" })\n        );\n      }, menuItems: function(closeDropdown) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          MenuItems,\n          { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown, openLeft: true },\n          isFineResend({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { onClick: function() {\n            resendMessage(message);\n            closeDropdown();\n          }, testID: \"open_channel_thumbnail_message_menu_resend\" }, stringSet2.CONTEXT_MENU_DROPDOWN__RESEND),\n          !isEphemeral && isFineDelete({ message, userId }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { onClick: function() {\n            if (disabled) {\n              return;\n            }\n            showRemove(true);\n            closeDropdown();\n          }, testID: \"open_channel_thumbnail_message_menu_delete\" }, stringSet2.CONTEXT_MENU_DROPDOWN__DELETE)\n        );\n      } }))\n    ),\n    contextMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelMobileMenu, { message, parentRef: mobileMenuRef, hideMenu: function() {\n      setContextMenu(false);\n    }, showRemove: function() {\n      setContextMenu(false);\n      showRemove(true);\n    }, resendMessage: function() {\n      setContextMenu(false);\n      resendMessage(message);\n    } })\n  );\n}\nvar checkFileType = function(fileUrl) {\n  var audioFile = /(\\.mp3)$/i;\n  var gifFile = /(\\.gif)$/i;\n  if (audioFile.test(fileUrl)) {\n    return IconTypes.FILE_AUDIO;\n  }\n  if (gifFile.test(fileUrl)) {\n    return IconTypes.GIF;\n  }\n  return IconTypes.FILE_DOCUMENT;\n};\nvar truncate = function(fullStr, strLen) {\n  if (fullStr === null || fullStr === void 0)\n    return \"\";\n  if (fullStr.length <= strLen)\n    return fullStr;\n  var separator = \"...\";\n  var sepLen = separator.length;\n  var charsToShow = strLen - sepLen;\n  var frontChars = Math.ceil(charsToShow / 2);\n  var backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\nfunction OpenChannelFileMessage(_a2) {\n  var className = _a2.className, message = _a2.message, isOperator2 = _a2.isOperator, _b2 = _a2.isEphemeral, isEphemeral = _b2 === void 0 ? false : _b2, userId = _a2.userId, disabled = _a2.disabled, chainTop = _a2.chainTop, showRemove = _a2.showRemove, resendMessage = _a2.resendMessage;\n  var status = message === null || message === void 0 ? void 0 : message.sendingStatus;\n  var _c = useLocalization(), dateLocale = _c.dateLocale, stringSet2 = _c.stringSet;\n  var contextMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var mobileMenuRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var avatarRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var _d = useUserProfileContext(), disableUserProfile = _d.disableUserProfile, renderUserProfile = _d.renderUserProfile;\n  var isMobile = useMediaQueryContext().isMobile;\n  var openFileUrl = function() {\n    return openURL(message.url);\n  };\n  var isPending = checkIsPending(status);\n  var isFailed = checkIsFailed(status);\n  var sender = getSenderFromMessage(message);\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), contextMenu = _e2[0], setContextMenu = _e2[1];\n  var longPress = useLongPress({\n    onLongPress: function() {\n      if (isMobile) {\n        setContextMenu(true);\n      }\n    },\n    onClick: openFileUrl\n  }, { delay: 300 });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: __spreadArray(__spreadArray([], Array.isArray(className) ? className : [className], true), [\n        \"sendbird-openchannel-file-message\"\n      ], false).join(\" \"), ref: mobileMenuRef },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-file-message__left\" }, !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Avatar$1, { className: \"sendbird-openchannel-file-message__left__avatar\", src: sender.profileUrl || \"\", ref: avatarRef, width: \"28px\", height: \"28px\", onClick: function() {\n          if (!disableUserProfile) {\n            toggleDropdown();\n          }\n        } });\n      }, menuItems: function(closeDropdown) {\n        return renderUserProfile ? renderUserProfile({\n          user: sender,\n          close: closeDropdown,\n          currentUserId: userId,\n          avatarRef\n        }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          MenuItems,\n          { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown, style: { paddingTop: \"0px\", paddingBottom: \"0px\" } },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })\n        );\n      } })),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-openchannel-file-message__right\" },\n        !chainTop && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-file-message__right__title\" },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-file-message__right__title__sender-name\", type: LabelTypography.CAPTION_2, color: isOperator2 ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName || sender.nickname || sender.userId)),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-file-message__right__title__sent-at\", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_CREATED_AT, {\n            locale: dateLocale\n          }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          __assign({ className: \"sendbird-openchannel-file-message__right__body\" }, isMobile ? __assign({}, longPress) : {}),\n          checkFileType(message.url) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-file-message__right__body__icon\", type: checkFileType(message.url), fillColor: IconColors.PRIMARY, width: \"48px\", height: \"48px\" }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            TextButton,\n            { className: \"sendbird-openchannel-file-message__right__body__file-name\", onClick: openFileUrl },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { className: \"sendbird-openchannel-file-message__right__body__file-name__label\", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, truncate(message.name || message.url, 40))\n          )\n        ),\n        (isPending || isFailed) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          \"div\",\n          { className: \"sendbird-openchannel-file-message__right__tail\" },\n          isPending && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            Loader,\n            { width: \"16px\", height: \"16px\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-file-message__right__tail__pending\", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: \"16px\", height: \"16px\" })\n          ),\n          isFailed && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-openchannel-file-message__right__tail__failed\", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: \"16px\", height: \"16px\" })\n        )\n      ),\n      !isMobile && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-file-message__context-menu\", ref: contextMenuRef }, (isFineResend({ message, userId, status }) || !isEphemeral) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ContextMenu, { menuTrigger: function(toggleDropdown) {\n        return showMenuTrigger({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          IconButton$1,\n          { className: \"sendbird-openchannel-file-message__context-menu__icon\", width: \"32px\", height: \"32px\", onClick: toggleDropdown },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.MORE, width: \"24px\", height: \"24px\" })\n        );\n      }, menuItems: function(closeDropdown) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          MenuItems,\n          { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown, openLeft: true },\n          isFineResend({ message, userId, status }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { onClick: function() {\n            if (disabled) {\n              return;\n            }\n            resendMessage(message);\n            closeDropdown();\n          }, testID: \"open_channel_file_message_context_menu_resend\" }, stringSet2.CONTEXT_MENU_DROPDOWN__RESEND),\n          !isEphemeral && isFineDelete({ message, userId }) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, { onClick: function() {\n            if (disabled) {\n              return;\n            }\n            showRemove(true);\n            closeDropdown();\n          }, testID: \"open_channel_file_message_context_menu_delete\" }, stringSet2.CONTEXT_MENU_DROPDOWN__DELETE)\n        );\n      } }))\n    ),\n    contextMenu && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelMobileMenu, { message, hideMenu: function() {\n      setContextMenu(false);\n    }, parentRef: mobileMenuRef, showRemove: function() {\n      setContextMenu(false);\n      showRemove(true);\n    } })\n  );\n}\nfunction RemoveMessageModal(_a2) {\n  var message = _a2.message, onCloseModal = _a2.onCloseModal, onDeleteMessage = _a2.onDeleteMessage;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Modal, { onCancel: onCloseModal, onSubmit: onDeleteMessage, submitText: stringSet2.MESSAGE_MENU__DELETE, titleText: getModalDeleteMessageTitle(stringSet2, message) });\n}\nvar MessageTypes = {\n  ADMIN: \"ADMIN\",\n  USER: \"USER\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\"\n};\nvar SendingMessageStatus = {\n  FAILED: \"failed\",\n  PENDING: \"pending\"\n};\nvar getMessageType = function(message, options) {\n  var _a2, _b2;\n  var isOgMessageEnabledInOpenChannel = options === null || options === void 0 ? void 0 : options.isOgMessageEnabledInOpenChannel;\n  if (((_a2 = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _a2 === void 0 ? void 0 : _a2.call(message)) || (message === null || message === void 0 ? void 0 : message.messageType) === \"user\") {\n    return (message === null || message === void 0 ? void 0 : message.ogMetaData) && isOgMessageEnabledInOpenChannel ? MessageTypes.OG : MessageTypes.USER;\n  }\n  if ((_b2 = message === null || message === void 0 ? void 0 : message.isAdminMessage) === null || _b2 === void 0 ? void 0 : _b2.call(message)) {\n    return MessageTypes.ADMIN;\n  }\n  if ((message === null || message === void 0 ? void 0 : message.messageType) === \"file\") {\n    return isImage(message.type) || isVideo(message.type) ? MessageTypes.THUMBNAIL : MessageTypes.FILE;\n  }\n  return MessageTypes.UNKNOWN;\n};\nfunction OpenChannelMessage(props) {\n  var _a2;\n  var _b2;\n  var message = props.message, chainTop = props.chainTop, chainBottom = props.chainBottom, hasSeparator = props.hasSeparator, renderMessage = props.renderMessage;\n  var _c = useOpenChannelContext(), currentOpenChannel = _c.currentOpenChannel, deleteMessage = _c.deleteMessage, updateMessage = _c.updateMessage, resendMessage = _c.resendMessage;\n  var _d = useLocalization(), dateLocale = _d.dateLocale, stringSet2 = _d.stringSet;\n  var editDisabled = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen;\n  var state = useSendbird().state;\n  var currentUserId = (_b2 = state === null || state === void 0 ? void 0 : state.config) === null || _b2 === void 0 ? void 0 : _b2.userId;\n  var isOgMessageEnabledInOpenChannel = state.config.openChannel.enableOgtag;\n  var sender;\n  if ((message === null || message === void 0 ? void 0 : message.messageType) !== \"admin\") {\n    sender = message === null || message === void 0 ? void 0 : message.sender;\n  }\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showEdit = _e2[0], setShowEdit = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showRemove = _f[0], setShowRemove = _f[1];\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showFileViewer = _g2[0], setShowFileViewer = _g2[1];\n  var editMessageInputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var isByMe = false;\n  if (sender && (message === null || message === void 0 ? void 0 : message.messageType) !== \"admin\") {\n    isByMe = currentUserId === sender.userId || (message === null || message === void 0 ? void 0 : message.sendingStatus) === SendingMessageStatus.PENDING || (message === null || message === void 0 ? void 0 : message.sendingStatus) === SendingMessageStatus.FAILED;\n  }\n  if (renderMessage) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref\", \"data-testid\": \"sendbird-message-hoc\" }, renderMessage({ message, chainTop, chainBottom }));\n  }\n  if ((message === null || message === void 0 ? void 0 : message.messageType) === \"user\" && showEdit) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MessageInput, { isEdit: true, channel: currentOpenChannel, disabled: editDisabled, ref: editMessageInputRef, message, onUpdateMessage: function(_a3) {\n      var messageId = _a3.messageId, message2 = _a3.message;\n      updateMessage(messageId, message2);\n      setShowEdit(false);\n    }, onCancelEdit: function() {\n      setShowEdit(false);\n    } });\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref\", \"data-testid\": \"sendbird-message-hoc\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n      null,\n      hasSeparator && (message === null || message === void 0 ? void 0 : message.createdAt) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        DateSeparator,\n        null,\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, format(message === null || message === void 0 ? void 0 : message.createdAt, stringSet2.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR, { locale: dateLocale }))\n      ),\n      (_a2 = {}, _a2[MessageTypes.ADMIN] = function() {\n        if ((message === null || message === void 0 ? void 0 : message.messageType) === \"admin\") {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelAdminMessage, { message });\n        }\n      }(), _a2[MessageTypes.FILE] = function() {\n        var _a3;\n        if ((message === null || message === void 0 ? void 0 : message.messageType) === \"file\") {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelFileMessage, { message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a3 = message === null || message === void 0 ? void 0 : message.sender) === null || _a3 === void 0 ? void 0 : _a3.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, disabled: editDisabled, userId: currentUserId, showRemove: setShowRemove, resendMessage, chainTop, chainBottom });\n        }\n      }(), _a2[MessageTypes.OG] = function() {\n        var _a3;\n        if ((message === null || message === void 0 ? void 0 : message.messageType) === \"user\" && isOgMessageEnabledInOpenChannel) {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelOGMessage, { message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a3 = message === null || message === void 0 ? void 0 : message.sender) === null || _a3 === void 0 ? void 0 : _a3.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, userId: currentUserId, showEdit: setShowEdit, disabled: editDisabled, showRemove: setShowRemove, resendMessage, chainTop, chainBottom });\n        }\n      }(), _a2[MessageTypes.THUMBNAIL] = function() {\n        var _a3;\n        if ((message === null || message === void 0 ? void 0 : message.messageType) === \"file\") {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenchannelThumbnailMessage, { message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a3 = message === null || message === void 0 ? void 0 : message.sender) === null || _a3 === void 0 ? void 0 : _a3.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, disabled: editDisabled, userId: currentUserId, showRemove: setShowRemove, resendMessage, onClick: setShowFileViewer, chainTop, chainBottom });\n        }\n      }(), _a2[MessageTypes.USER] = function() {\n        var _a3;\n        if ((message === null || message === void 0 ? void 0 : message.messageType) === \"user\") {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenchannelUserMessage, { message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a3 = message === null || message === void 0 ? void 0 : message.sender) === null || _a3 === void 0 ? void 0 : _a3.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, userId: currentUserId, disabled: editDisabled, showEdit: setShowEdit, showRemove: setShowRemove, resendMessage, chainTop, chainBottom });\n        }\n      }(), _a2[MessageTypes.UNKNOWN] = /* @__PURE__ */ function() {\n      }(), _a2)[getMessageType(message, { isOgMessageEnabledInOpenChannel })],\n      showRemove && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(RemoveMessageModal, { message, onCloseModal: function() {\n        return setShowRemove(false);\n      }, onDeleteMessage: function() {\n        if ((message === null || message === void 0 ? void 0 : message.messageType) !== \"admin\") {\n          deleteMessage(message);\n        }\n      } }),\n      showFileViewer && (message === null || message === void 0 ? void 0 : message.messageType) === \"file\" && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(FileViewer$1, { onClose: function() {\n        return setShowFileViewer(false);\n      }, message, onDelete: function() {\n        return deleteMessage(message);\n      }, isByMe })\n    )\n  );\n}\nfunction OpenChannelMessageList(props, ref) {\n  var _a2 = useOpenChannelContext(), _b2 = _a2.isMessageGroupingEnabled, isMessageGroupingEnabled = _b2 === void 0 ? true : _b2, allMessages = _a2.allMessages, hasMore = _a2.hasMore, onScroll = _a2.onScroll;\n  var state = useSendbird().state;\n  var stringSet2 = useLocalization().stringSet;\n  var userId = state.config.userId;\n  var localRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var scrollRef = ref || localRef;\n  var _c = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showScrollDownButton = _c[0], setShowScrollDownButton = _c[1];\n  var scrollToBottom = function() {\n    if (scrollRef && \"current\" in scrollRef && scrollRef.current) {\n      scrollRef.current.scrollTo(0, scrollRef.current.scrollHeight);\n      setShowScrollDownButton(false);\n    }\n  };\n  var handleOnScroll = useHandleOnScrollCallback({\n    setShowScrollDownButton,\n    hasMore,\n    onScroll,\n    scrollRef\n  });\n  var memoizedMessageList = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    var _a3;\n    if (allMessages.length > 0) {\n      return allMessages.map(function(message, index2) {\n        var _a4;\n        var previousMessage = allMessages[index2 - 1];\n        var nextMessage = allMessages[index2 - 1];\n        var previousMessageCreatedAt = previousMessage && previousMessage.createdAt;\n        var currentCreatedAt = message === null || message === void 0 ? void 0 : message.createdAt;\n        var hasSeparator = !(previousMessageCreatedAt && isSameDay(currentCreatedAt, previousMessageCreatedAt));\n        var _b3 = isMessageGroupingEnabled ? compareMessagesForGrouping(previousMessage, message, nextMessage, stringSet2) : [false, false], chainTop = _b3[0], chainBottom = _b3[1];\n        var isByMe = ((_a4 = message === null || message === void 0 ? void 0 : message.sender) === null || _a4 === void 0 ? void 0 : _a4.userId) === userId;\n        var key = (message === null || message === void 0 ? void 0 : message.messageId) || (message === null || message === void 0 ? void 0 : message.reqId);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          MessageProvider$1,\n          { message, isByMe, key },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(OpenChannelMessage, { message, chainTop, chainBottom, hasSeparator, renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage })\n        );\n      });\n    }\n    return ((_a3 = props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList) === null || _a3 === void 0 ? void 0 : _a3.call(props)) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { className: \"sendbird-openchannel-conversation-scroll__container__place-holder\", type: PlaceHolderTypes.NO_MESSAGES });\n  }, [allMessages]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-openchannel-conversation-scroll\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-openchannel-conversation-scroll__container\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-openchannel-conversation-scroll__container__padding\" }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: [\n        \"sendbird-openchannel-conversation-scroll__container__item-container\",\n        allMessages.length > 0 ? \"\" : \"no-messages\"\n      ].join(\" \"), onScroll: handleOnScroll, ref: scrollRef }, memoizedMessageList)\n    ),\n    showScrollDownButton && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button\", onClick: scrollToBottom, onKeyDown: scrollToBottom, tabIndex: 0, role: \"button\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { width: \"24px\", height: \"24px\", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.CONTENT })\n    )\n  );\n}\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(OpenChannelMessageList);\nreact__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nObject(react__WEBPACK_IMPORTED_MODULE_0__[\"createContext\"])({\n  openedListKeys: [],\n  addOpenedListKey: noop$4,\n  removeOpenedListKey: noop$4,\n  clearOpenedListKeys: noop$4,\n  allowMultipleOpen: false\n});\nfunction useSendbirdStateContext() {\n  var _a2 = useSendbird(), state = _a2.state, actions = _a2.actions;\n  return __assign(__assign({}, state), actions);\n}\nvar GroupChannelListUIView = function(_a2) {\n  var renderHeader = _a2.renderHeader, renderPlaceHolderError = _a2.renderPlaceHolderError, renderPlaceHolderLoading = _a2.renderPlaceHolderLoading, renderPlaceHolderEmptyList = _a2.renderPlaceHolderEmptyList, onChangeTheme = _a2.onChangeTheme, onUserProfileUpdated = _a2.onUserProfileUpdated, allowProfileEdit = _a2.allowProfileEdit, channels = _a2.channels, onLoadMore = _a2.onLoadMore, initialized = _a2.initialized, renderChannel = _a2.renderChannel, renderAddChannel = _a2.renderAddChannel, scrollRef = _a2.scrollRef;\n  var _b2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), showProfileEdit = _b2[0], setShowProfileEdit = _b2[1];\n  var stores2 = useSendbird().state.stores;\n  var renderer2 = {\n    addChannel: renderAddChannel,\n    channel: renderChannel,\n    placeholder: {\n      loading: function() {\n        if (initialized)\n          return null;\n        if (renderPlaceHolderLoading)\n          return renderPlaceHolderLoading();\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING });\n      },\n      empty: function() {\n        if (!initialized)\n          return null;\n        if (renderPlaceHolderEmptyList)\n          return renderPlaceHolderEmptyList();\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.NO_CHANNELS });\n      },\n      error: function() {\n        if (!initialized || !stores2.sdkStore.error)\n          return null;\n        if (renderPlaceHolderError)\n          return renderPlaceHolderError();\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG });\n      }\n    }\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-channel-list__header\" }, (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListHeader, { onEdit: function() {\n      return allowProfileEdit && setShowProfileEdit(true);\n    }, allowProfileEdit, renderIconButton: function() {\n      return renderer2.addChannel();\n    } })),\n    showProfileEdit && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EditUserProfile, { onThemeChange: onChangeTheme, onCancel: function() {\n      return setShowProfileEdit(false);\n    }, onEditProfile: function(user) {\n      setShowProfileEdit(false);\n      onUserProfileUpdated(user);\n    } }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ChannelListComponent, { data: channels, renderItem: renderer2.channel, onLoadMore, placeholderLoading: renderer2.placeholder.loading(), placeholderEmpty: renderer2.placeholder.empty(), placeholderError: renderer2.placeholder.error(), scrollRef })\n  );\n};\nvar ChannelListComponent = function(props) {\n  var data = props.data, renderItem = props.renderItem, onLoadMore = props.onLoadMore, placeholderLoading = props.placeholderLoading, placeholderError = props.placeholderError, placeholderEmpty = props.placeholderEmpty, scrollRef = props.scrollRef;\n  var onScroll = useOnScrollPositionChangeDetector({\n    onReachedBottom: function() {\n      return onLoadMore === null || onLoadMore === void 0 ? void 0 : onLoadMore();\n    }\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    \"div\",\n    { className: \"sendbird-channel-list__body\", onScroll, ref: scrollRef },\n    placeholderError,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, data.map(function(item, index2) {\n      return renderItem({ item, index: index2 });\n    })),\n    placeholderLoading,\n    data.length === 0 && placeholderEmpty\n  );\n};\nvar filterUser = function(idsToFilter) {\n  return function(currentId) {\n    return idsToFilter === null || idsToFilter === void 0 ? void 0 : idsToFilter.includes(currentId);\n  };\n};\nvar setChannelType = function(params, type) {\n  if (type === \"broadcast\") {\n    params.isBroadcast = true;\n  }\n  if (type === \"supergroup\") {\n    params.isSuper = true;\n  }\n  return params;\n};\nvar createDefaultUserListQuery = function(_a2) {\n  var sdk = _a2.sdk, userFilledApplicationUserListQuery = _a2.userFilledApplicationUserListQuery;\n  var params = sdk.createApplicationUserListQuery();\n  if (userFilledApplicationUserListQuery) {\n    Object.keys(userFilledApplicationUserListQuery).forEach(function(key) {\n      params[key] = userFilledApplicationUserListQuery[key];\n    });\n  }\n  return params;\n};\nvar CHANNEL_TYPE;\n(function(CHANNEL_TYPE2) {\n  CHANNEL_TYPE2[\"GROUP\"] = \"group\";\n  CHANNEL_TYPE2[\"SUPERGROUP\"] = \"supergroup\";\n  CHANNEL_TYPE2[\"BROADCAST\"] = \"broadcast\";\n})(CHANNEL_TYPE || (CHANNEL_TYPE = {}));\nvar CreateChannelContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext(null);\nvar initialState = {\n  sdk: void 0,\n  userListQuery: void 0,\n  onCreateChannelClick: void 0,\n  onChannelCreated: void 0,\n  onBeforeCreateChannel: void 0,\n  pageStep: 0,\n  type: CHANNEL_TYPE.GROUP,\n  onCreateChannel: void 0,\n  overrideInviteUser: void 0\n};\nvar CreateChannelManager = function(props) {\n  var onCreateChannelClick = props.onCreateChannelClick, onBeforeCreateChannel = props.onBeforeCreateChannel, onChannelCreated = props.onChannelCreated, userListQuery = props.userListQuery, onCreateChannel = props.onCreateChannel, overrideInviteUser = props.overrideInviteUser;\n  var updateState = useCreateChannelStore().updateState;\n  var config2 = useSendbird().state.config;\n  var _userListQuery = userListQuery !== null && userListQuery !== void 0 ? userListQuery : config2 === null || config2 === void 0 ? void 0 : config2.userListQuery;\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    updateState({\n      onCreateChannelClick,\n      onBeforeCreateChannel,\n      onChannelCreated,\n      userListQuery: _userListQuery,\n      onCreateChannel,\n      overrideInviteUser\n    });\n  }, [\n    onCreateChannelClick,\n    onBeforeCreateChannel,\n    onChannelCreated,\n    userListQuery,\n    onCreateChannel,\n    overrideInviteUser,\n    _userListQuery\n  ]);\n  return null;\n};\nvar CreateChannelProvider = function(props) {\n  var children = props.children;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    InternalCreateChannelProvider,\n    __assign({}, props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CreateChannelManager, __assign({}, props)),\n    children\n  );\n};\nvar createCreateChannelStore = function(props) {\n  return createStore(__assign(__assign({}, initialState), props));\n};\nvar InternalCreateChannelProvider = function(props) {\n  var children = props.children;\n  var defaultProps = deleteNullish({\n    userListQuery: props === null || props === void 0 ? void 0 : props.userListQuery,\n    onCreateChannelClick: props === null || props === void 0 ? void 0 : props.onCreateChannelClick,\n    onChannelCreated: props === null || props === void 0 ? void 0 : props.onChannelCreated,\n    onBeforeCreateChannel: props === null || props === void 0 ? void 0 : props.onBeforeCreateChannel,\n    onCreateChannel: props === null || props === void 0 ? void 0 : props.onCreateChannel,\n    overrideInviteUser: props === null || props === void 0 ? void 0 : props.overrideInviteUser\n  });\n  var storeRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(createCreateChannelStore(defaultProps));\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CreateChannelContext.Provider, { value: storeRef.current }, children);\n};\nvar useCreateChannelStore = function() {\n  return useStore(CreateChannelContext, function(state) {\n    return state;\n  }, initialState);\n};\nvar useCreateChannel = function() {\n  var store = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(CreateChannelContext);\n  var sendbirdStore = useSendbirdStateContext();\n  if (!store)\n    throw new Error(\"useCreateChannel must be used within a CreateChannelProvider\");\n  var state = shimExports.useSyncExternalStore(store.subscribe, store.getState);\n  var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function() {\n    return {\n      setPageStep: function(pageStep) {\n        return store.setState(function(state2) {\n          return __assign(__assign({}, state2), { pageStep });\n        });\n      },\n      setType: function(type) {\n        return store.setState(function(state2) {\n          return __assign(__assign({}, state2), { type });\n        });\n      },\n      createChannel: getCreateGroupChannel(sendbirdStore)\n    };\n  }, [store]);\n  return { state, actions };\n};\nvar BUFFER = 50;\nvar InviteUsers = function(_a2) {\n  var onCancel = _a2.onCancel, userListQuery = _a2.userListQuery;\n  var _b2 = useCreateChannel(), _c = _b2.state, onCreateChannelClick = _c.onCreateChannelClick, onBeforeCreateChannel = _c.onBeforeCreateChannel, onChannelCreated = _c.onChannelCreated, onCreateChannel = _c.onCreateChannel, overrideInviteUser = _c.overrideInviteUser, type = _c.type, createChannel = _b2.actions.createChannel;\n  var _d = useSendbird().state, userId = _d.config.userId, sdk = _d.stores.sdkStore.sdk;\n  var idsToFilter = [userId];\n  var _e2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]), users = _e2[0], setUsers = _e2[1];\n  var _f = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({}), selectedUsers = _f[0], setSelectedUsers = _f[1];\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var _g2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null), usersDataSource = _g2[0], setUsersDataSource = _g2[1];\n  var selectedCount = Object.keys(selectedUsers).length;\n  var titleText = stringSet2.MODAL__CREATE_CHANNEL__TITLE;\n  var submitText = stringSet2.BUTTON__CREATE;\n  var isMobile = useMediaQueryContext().isMobile;\n  var _h = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(window.innerHeight), scrollableAreaHeight = _h[0], setScrollableAreaHeight = _h[1];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var applicationUserListQuery = userListQuery ? userListQuery() : createDefaultUserListQuery({ sdk });\n    setUsersDataSource(applicationUserListQuery);\n    if (!(applicationUserListQuery === null || applicationUserListQuery === void 0 ? void 0 : applicationUserListQuery.isLoading)) {\n      applicationUserListQuery.next().then(function(it2) {\n        setUsers(it2);\n      });\n    }\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function() {\n    var scrollableAreaHeight2 = function() {\n      setScrollableAreaHeight(window.innerHeight);\n    };\n    window.addEventListener(\"resize\", scrollableAreaHeight2);\n    return function() {\n      window.removeEventListener(\"resize\", scrollableAreaHeight2);\n    };\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Modal,\n    {\n      isFullScreenOnMobile: true,\n      titleText,\n      submitText,\n      type: ButtonTypes.PRIMARY,\n      // Disable the create button if no users are selected,\n      // but if there's only the logged-in user in the user list,\n      // then the create button should be enabled\n      disabled: users.length > 1 && Object.keys(selectedUsers).length === 0,\n      onCancel,\n      onSubmit: function() {\n        var selectedUserList = Object.keys(selectedUsers).length > 0 ? Object.keys(selectedUsers) : [userId];\n        var _onChannelCreated = onChannelCreated !== null && onChannelCreated !== void 0 ? onChannelCreated : onCreateChannel;\n        var _onCreateChannelClick = onCreateChannelClick !== null && onCreateChannelClick !== void 0 ? onCreateChannelClick : overrideInviteUser;\n        if (typeof _onCreateChannelClick === \"function\") {\n          _onCreateChannelClick({\n            users: selectedUserList,\n            onClose: onCancel !== null && onCancel !== void 0 ? onCancel : noop$4,\n            channelType: type\n          });\n          return;\n        }\n        if (onBeforeCreateChannel) {\n          var params = onBeforeCreateChannel(selectedUserList);\n          setChannelType(params, type);\n          createChannel(params).then(function(channel) {\n            return _onChannelCreated === null || _onChannelCreated === void 0 ? void 0 : _onChannelCreated(channel);\n          });\n        } else {\n          var params = {};\n          params.invitedUserIds = selectedUserList;\n          params.isDistinct = false;\n          if (userId) {\n            params.operatorUserIds = [userId];\n          }\n          setChannelType(params, type);\n          createChannel(params).then(function(channel) {\n            return _onChannelCreated === null || _onChannelCreated === void 0 ? void 0 : _onChannelCreated(channel);\n          });\n        }\n        onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n      }\n    },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      null,\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { color: selectedCount > 0 ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3, type: LabelTypography.CAPTION_1 }, \"\".concat(selectedCount, \" \").concat(stringSet2.MODAL__INVITE_MEMBER__SELECTED)),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { className: \"sendbird-create-channel--scroll\", style: isMobile ? { height: \"calc(\".concat(scrollableAreaHeight, \"px - 200px)\") } : {}, onScroll: function(e3) {\n        if (!usersDataSource)\n          return;\n        var eventTarget = e3.target;\n        var hasNext = usersDataSource.hasNext, isLoading = usersDataSource.isLoading;\n        var fetchMore = eventTarget.clientHeight + eventTarget.scrollTop + BUFFER > eventTarget.scrollHeight;\n        if (hasNext && fetchMore && !isLoading) {\n          usersDataSource.next().then(function(usersBatch) {\n            setUsers(__spreadArray(__spreadArray([], users, true), usersBatch, true));\n          });\n        }\n      } }, users.map(function(user) {\n        return !filterUser(idsToFilter)(user.userId) && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UserListItem, { key: user.userId, user, checkBox: true, checked: selectedUsers[user.userId], onChange: function(event) {\n          var _a3;\n          var modifiedSelectedUsers = __assign(__assign({}, selectedUsers), (_a3 = {}, _a3[event.target.id] = event.target.checked, _a3));\n          if (!event.target.checked) {\n            delete modifiedSelectedUsers[event.target.id];\n          }\n          setSelectedUsers(modifiedSelectedUsers);\n        } });\n      }))\n    )\n  );\n};\nvar isBroadcastChannelEnabled = function(sdk) {\n  var _a2;\n  var ALLOW_BROADCAST_CHANNEL = \"allow_broadcast_channel\";\n  var applicationAttributes2 = (_a2 = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a2 === void 0 ? void 0 : _a2.applicationAttributes;\n  if (Array.isArray(applicationAttributes2)) {\n    return applicationAttributes2.includes(ALLOW_BROADCAST_CHANNEL);\n  }\n  return false;\n};\nvar isSuperGroupChannelEnabled = function(sdk) {\n  var _a2;\n  var ALLOW_SUPER_GROUP_CHANNEL = \"allow_super_group_channel\";\n  var applicationAttributes2 = (_a2 = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a2 === void 0 ? void 0 : _a2.applicationAttributes;\n  if (Array.isArray(applicationAttributes2)) {\n    return applicationAttributes2.includes(ALLOW_SUPER_GROUP_CHANNEL);\n  }\n  return false;\n};\nvar SelectChannelType = function(props) {\n  var onCancel = props.onCancel;\n  var state = useSendbird().state;\n  var sdk = getSdk(state);\n  var _a2 = useCreateChannel().actions, setPageStep = _a2.setPageStep, setType = _a2.setType;\n  var stringSet2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useContext\"])(LocalizationContext).stringSet;\n  var isBroadcastAvailable = isBroadcastChannelEnabled(sdk);\n  var isSupergroupAvailable = isSuperGroupChannelEnabled(sdk);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    Modal,\n    { titleText: stringSet2 === null || stringSet2 === void 0 ? void 0 : stringSet2.MODAL__CREATE_CHANNEL__TITLE, hideFooter: true, onCancel: function() {\n      onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n    }, className: \"sendbird-add-channel__modal\" },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      \"div\",\n      { className: \"sendbird-add-channel__rectangle-wrap\" },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-add-channel__rectangle\", onClick: function() {\n          setType(CHANNEL_TYPE.GROUP);\n          setPageStep(1);\n        }, role: \"button\", tabIndex: 0, onKeyDown: function() {\n          setType(CHANNEL_TYPE.GROUP);\n          setPageStep(1);\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-add-channel__rectangle__chat-icon\", type: IconTypes.CHAT, fillColor: IconColors.PRIMARY, width: \"28px\", height: \"28px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MODAL__CREATE_CHANNEL__GROUP)\n      ),\n      isSupergroupAvailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-add-channel__rectangle\", onClick: function() {\n          setType(CHANNEL_TYPE.SUPERGROUP);\n          setPageStep(1);\n        }, role: \"button\", tabIndex: 0, onKeyDown: function() {\n          setType(CHANNEL_TYPE.SUPERGROUP);\n          setPageStep(1);\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-add-channel__rectangle__supergroup-icon\", type: IconTypes.SUPERGROUP, fillColor: IconColors.PRIMARY, width: \"28px\", height: \"28px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MODAL__CREATE_CHANNEL__SUPER)\n      ),\n      isBroadcastAvailable && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        \"div\",\n        { className: \"sendbird-add-channel__rectangle\", onClick: function() {\n          setType(CHANNEL_TYPE.BROADCAST);\n          setPageStep(1);\n        }, role: \"button\", tabIndex: 0, onKeyDown: function() {\n          setType(CHANNEL_TYPE.BROADCAST);\n          setPageStep(1);\n        } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { className: \"sendbird-add-channel__rectangle__broadcast-icon\", type: IconTypes.BROADCAST, fillColor: IconColors.PRIMARY, width: \"28px\", height: \"28px\" }),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet2.MODAL__CREATE_CHANNEL__BROADCAST)\n      )\n    )\n  );\n};\nvar CreateChannel$1 = function(props) {\n  var onCancel = props.onCancel, renderStepOne = props.renderStepOne;\n  var _a2 = useCreateChannel(), _b2 = _a2.state, pageStep = _b2.pageStep, userListQuery = _b2.userListQuery, setPageStep = _a2.actions.setPageStep;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    pageStep === 0 && ((renderStepOne === null || renderStepOne === void 0 ? void 0 : renderStepOne()) || react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SelectChannelType, { onCancel })),\n    pageStep === 1 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InviteUsers, { userListQuery, onCancel: function() {\n      setPageStep(0);\n      onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n    } })\n  );\n};\nvar CreateChannel = function(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    CreateChannelProvider,\n    __assign({}, props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CreateChannel$1, __assign({}, props))\n  );\n};\nvar AddGroupChannelView = function(_a2) {\n  var createChannelVisible = _a2.createChannelVisible, onChangeCreateChannelVisible = _a2.onChangeCreateChannelVisible, onBeforeCreateChannel = _a2.onBeforeCreateChannel, onCreateChannelClick = _a2.onCreateChannelClick, onChannelCreated = _a2.onChannelCreated;\n  var config2 = useSendbird().state.config;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      IconButton$1,\n      { height: \"32px\", width: \"32px\", disabled: !config2.isOnline, onClick: function() {\n        return onChangeCreateChannelVisible(true);\n      } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Icon$1, { type: IconTypes.CREATE, fillColor: IconColors.PRIMARY, width: \"24px\", height: \"24px\" })\n    ),\n    createChannelVisible && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CreateChannel, { onCancel: function() {\n      return onChangeCreateChannelVisible(false);\n    }, onChannelCreated: function(channel) {\n      onChannelCreated === null || onChannelCreated === void 0 ? void 0 : onChannelCreated(channel);\n      onChangeCreateChannelVisible(false);\n    }, onBeforeCreateChannel, onCreateChannelClick })\n  );\n};\nvar AddGroupChannel = function() {\n  var _a2 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false), createChannelVisible = _a2[0], setCreateChannelVisible = _a2[1];\n  var _b2 = useGroupChannelList().state, onChannelCreated = _b2.onChannelCreated, onBeforeCreateChannel = _b2.onBeforeCreateChannel, onCreateChannelClick = _b2.onCreateChannelClick;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AddGroupChannelView, { createChannelVisible, onChangeCreateChannelVisible: setCreateChannelVisible, onCreateChannelClick, onBeforeCreateChannel, onChannelCreated });\n};\nvar GroupChannelListUI = function(props) {\n  var renderHeader = props.renderHeader, renderChannelPreview = props.renderChannelPreview, renderPlaceHolderError = props.renderPlaceHolderError, renderPlaceHolderLoading = props.renderPlaceHolderLoading, renderPlaceHolderEmptyList = props.renderPlaceHolderEmptyList;\n  var _a2 = useGroupChannelList().state, onChannelSelect = _a2.onChannelSelect, onThemeChange = _a2.onThemeChange, allowProfileEdit = _a2.allowProfileEdit, typingChannelUrls = _a2.typingChannelUrls, groupChannels = _a2.groupChannels, initialized = _a2.initialized, selectedChannelUrl = _a2.selectedChannelUrl, loadMore = _a2.loadMore, onUserProfileUpdated = _a2.onUserProfileUpdated, scrollRef = _a2.scrollRef;\n  var _b2 = useSendbird().state, stores2 = _b2.stores, _c = _b2.config, logger = _c.logger, isOnline = _c.isOnline;\n  var sdk = stores2.sdkStore.sdk;\n  var renderListItem = function(renderProps) {\n    var channel = renderProps.item, index2 = renderProps.index;\n    var itemProps = {\n      channel,\n      tabIndex: index2,\n      isSelected: channel.url === selectedChannelUrl,\n      isTyping: typingChannelUrls.includes(channel.url),\n      renderChannelAction: function(props2) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelPreviewAction, __assign({}, props2));\n      },\n      onClick: function() {\n        if (isOnline || (sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled)) {\n          logger.info(\"ChannelList: Clicked on channel:\", channel);\n          onChannelSelect(channel);\n        } else {\n          logger.warning(\"ChannelList: Inactivated clicking channel item during offline.\");\n        }\n      },\n      onLeaveChannel: function() {\n        return __awaiter$5(this, void 0, void 0, function() {\n          return __generator(this, function(_a3) {\n            switch (_a3.label) {\n              case 0:\n                logger.info(\"ChannelList: Leaving channel\", channel);\n                return [4, channel.leave()];\n              case 1:\n                _a3.sent();\n                logger.info(\"ChannelList: Leaving channel success\");\n                return [\n                  2\n                  /*return*/\n                ];\n            }\n          });\n        });\n      }\n    };\n    if (renderChannelPreview) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", { key: channel.url, onClick: itemProps.onClick }, renderChannelPreview(itemProps));\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListItem, __assign({ key: channel.url }, itemProps));\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListUIView, { renderHeader, renderChannel: renderListItem, renderPlaceHolderError, renderPlaceHolderLoading, renderPlaceHolderEmptyList, onChangeTheme: onThemeChange !== null && onThemeChange !== void 0 ? onThemeChange : noop$4, allowProfileEdit, onUserProfileUpdated: onUserProfileUpdated !== null && onUserProfileUpdated !== void 0 ? onUserProfileUpdated : noop$4, channels: groupChannels, onLoadMore: loadMore, initialized, renderAddChannel: function() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AddGroupChannel, null);\n  }, scrollRef });\n};\nvar GroupChannelList = function(props) {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    GroupChannelListProvider,\n    __assign({}, props),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(GroupChannelListUI, __assign({}, props))\n  );\n};\nvar PANELS;\n(function(PANELS2) {\n  PANELS2[\"CHANNEL_LIST\"] = \"CHANNEL_LIST\";\n  PANELS2[\"CHANNEL\"] = \"CHANNEL\";\n  PANELS2[\"CHANNEL_SETTINGS\"] = \"CHANNEL_SETTINGS\";\n  PANELS2[\"MESSAGE_SEARCH\"] = \"MESSAGE_SEARCH\";\n  PANELS2[\"THREAD\"] = \"THREAD\";\n})(PANELS || (PANELS = {}));\nconst initialisingChatText = \"CareAiChat-module__initialisingChatText__1WvCX\";\nconst loadingText = \"CareAiChat-module__loadingText__GO-Id\";\nconst chatInterface = \"CareAiChat-module__chatInterface__ESwZS\";\nconst careAIChatInterface = \"CareAiChat-module__careAIChatInterface__PiKmV\";\nconst careAiChatInterface = \"CareAiChat-module__careAIChatInterface__PiKmV\";\nconst backIcon = \"CareAiChat-module__backIcon__HV0VU\";\nconst careaiContainer = \"CareAiChat-module__careaiContainer__aV9aO\";\nconst customMessage = \"CareAiChat-module__customMessage__GXH4Y\";\nconst customMessageBot = \"CareAiChat-module__customMessageBot__CgEcY\";\nconst customMessageUser = \"CareAiChat-module__customMessageUser__WrxTg\";\nconst customMessageAvatar = \"CareAiChat-module__customMessageAvatar__mjg4n\";\nconst customMessageContent = \"CareAiChat-module__customMessageContent__yQgTI\";\nconst customMessageBubble = \"CareAiChat-module__customMessageBubble__JYLXZ\";\nconst customMessageBubbleBot = \"CareAiChat-module__customMessageBubbleBot__gq8-1\";\nconst customMessageBubbleUser = \"CareAiChat-module__customMessageBubbleUser__0ak9J\";\nconst customMessageTime = \"CareAiChat-module__customMessageTime__oHE73\";\nconst customGroupChannelList = \"CareAiChat-module__customGroupChannelList__-6ydS\";\nconst customGroupChannelHeader = \"CareAiChat-module__customGroupChannelHeader__b2iZV\";\nconst customTextarea = \"CareAiChat-module__customTextarea__urAzR\";\nconst customTextareaExpanded = \"CareAiChat-module__customTextareaExpanded__wpGsQ\";\nconst sendBtn = \"CareAiChat-module__sendBtn__RNo5U\";\nconst sendBtnActive = \"CareAiChat-module__sendBtnActive__66OyI\";\nconst chatBotTypingIndicator = \"CareAiChat-module__chatBotTypingIndicator__MDyW4\";\nconst typingIndicatorAvatar = \"CareAiChat-module__typingIndicatorAvatar__zv-l3\";\nconst typingIndicatorText = \"CareAiChat-module__typingIndicatorText__KPSYN\";\nconst customInputWrapper = \"CareAiChat-module__customInputWrapper__wNCUR\";\nconst careAIDisclaimerText = \"CareAiChat-module__careAIDisclaimerText__u695z\";\nconst careAiDisclaimerText = \"CareAiChat-module__careAIDisclaimerText__u695z\";\nconst customCardBubble = \"CareAiChat-module__customCardBubble__3QqBC\";\nconst chatCardImage = \"CareAiChat-module__chatCardImage__YdRqx\";\nconst chatCardContent = \"CareAiChat-module__chatCardContent__H4Byf\";\nconst chatCardTitle = \"CareAiChat-module__chatCardTitle__GKTlu\";\nconst chatCardDescription = \"CareAiChat-module__chatCardDescription__mTd7M\";\nconst chatCardButton = \"CareAiChat-module__chatCardButton__0uUqp\";\nconst chatCardButtonSupport = \"CareAiChat-module__chatCardButtonSupport__NdA4A\";\nconst chatCardButtonListing = \"CareAiChat-module__chatCardButtonListing__sprTC\";\nconst chatCardButtonDoctor_profile = \"CareAiChat-module__chatCardButtonDoctor_profile__iyezf\";\nconst chatCardButtonDoctorProfile = \"CareAiChat-module__chatCardButtonDoctor_profile__iyezf\";\nconst chatCardButtonConsult = \"CareAiChat-module__chatCardButtonConsult__TpdK3\";\nconst suggestedReplies = \"CareAiChat-module__suggestedReplies__FRkYy\";\nconst suggestedRepliesWrapper = \"CareAiChat-module__suggestedRepliesWrapper__CEOzn\";\nconst suggestedReplyBtn = \"CareAiChat-module__suggestedReplyBtn__FaU0p\";\nconst customChatHistory = \"CareAiChat-module__customChatHistory__7cGwx\";\nconst messageText = \"CareAiChat-module__messageText__VfNQc\";\nconst messageTime = \"CareAiChat-module__messageTime__E79Em\";\nconst careAiHeaderHistory$1 = \"CareAiChat-module__careAiHeaderHistory__3-5oG\";\nconst styles$4 = {\n  initialisingChatText,\n  loadingText,\n  chatInterface,\n  careAIChatInterface,\n  careAiChatInterface,\n  backIcon,\n  careaiContainer,\n  customMessage,\n  customMessageBot,\n  customMessageUser,\n  customMessageAvatar,\n  customMessageContent,\n  customMessageBubble,\n  customMessageBubbleBot,\n  customMessageBubbleUser,\n  customMessageTime,\n  customGroupChannelList,\n  customGroupChannelHeader,\n  customTextarea,\n  customTextareaExpanded,\n  sendBtn,\n  sendBtnActive,\n  chatBotTypingIndicator,\n  typingIndicatorAvatar,\n  typingIndicatorText,\n  customInputWrapper,\n  careAIDisclaimerText,\n  careAiDisclaimerText,\n  customCardBubble,\n  chatCardImage,\n  chatCardContent,\n  chatCardTitle,\n  chatCardDescription,\n  chatCardButton,\n  chatCardButtonSupport,\n  chatCardButtonListing,\n  chatCardButtonDoctor_profile,\n  chatCardButtonDoctorProfile,\n  chatCardButtonConsult,\n  suggestedReplies,\n  suggestedRepliesWrapper,\n  suggestedReplyBtn,\n  customChatHistory,\n  messageText,\n  messageTime,\n  careAiHeaderHistory: careAiHeaderHistory$1\n};\nfunction ok$2() {\n}\nfunction unreachable() {\n}\nfunction stringify$1(values, options) {\n  const settings = {};\n  const input = values[values.length - 1] === \"\" ? [...values, \"\"] : values;\n  return input.join(\n    (settings.padRight ? \" \" : \"\") + \",\" + (settings.padLeft === false ? \"\" : \" \")\n  ).trim();\n}\nconst nameRe = /^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$/u;\nconst nameReJsx = /^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$/u;\nconst emptyOptions$2 = {};\nfunction name(name2, options) {\n  const settings = emptyOptions$2;\n  const re2 = settings.jsx ? nameReJsx : nameRe;\n  return re2.test(name2);\n}\nconst re = /[ \\t\\n\\f\\r]/g;\nfunction whitespace(thing) {\n  return typeof thing === \"object\" ? thing.type === \"text\" ? empty$2(thing.value) : false : empty$2(thing);\n}\nfunction empty$2(value) {\n  return value.replace(re, \"\") === \"\";\n}\nclass Schema {\n  /**\n   * @param {SchemaType['property']} property\n   *   Property.\n   * @param {SchemaType['normal']} normal\n   *   Normal.\n   * @param {Space | undefined} [space]\n   *   Space.\n   * @returns\n   *   Schema.\n   */\n  constructor(property, normal, space2) {\n    this.normal = normal;\n    this.property = property;\n    if (space2) {\n      this.space = space2;\n    }\n  }\n}\nSchema.prototype.normal = {};\nSchema.prototype.property = {};\nSchema.prototype.space = void 0;\nfunction merge(definitions, space2) {\n  const property = {};\n  const normal = {};\n  for (const definition2 of definitions) {\n    Object.assign(property, definition2.property);\n    Object.assign(normal, definition2.normal);\n  }\n  return new Schema(property, normal, space2);\n}\nfunction normalize$1(value) {\n  return value.toLowerCase();\n}\nclass Info {\n  /**\n   * @param {string} property\n   *   Property.\n   * @param {string} attribute\n   *   Attribute.\n   * @returns\n   *   Info.\n   */\n  constructor(property, attribute) {\n    this.attribute = attribute;\n    this.property = property;\n  }\n}\nInfo.prototype.attribute = \"\";\nInfo.prototype.booleanish = false;\nInfo.prototype.boolean = false;\nInfo.prototype.commaOrSpaceSeparated = false;\nInfo.prototype.commaSeparated = false;\nInfo.prototype.defined = false;\nInfo.prototype.mustUseProperty = false;\nInfo.prototype.number = false;\nInfo.prototype.overloadedBoolean = false;\nInfo.prototype.property = \"\";\nInfo.prototype.spaceSeparated = false;\nInfo.prototype.space = void 0;\nlet powers = 0;\nconst boolean = increment();\nconst booleanish = increment();\nconst overloadedBoolean = increment();\nconst number = increment();\nconst spaceSeparated = increment();\nconst commaSeparated = increment();\nconst commaOrSpaceSeparated = increment();\nfunction increment() {\n  return 2 ** ++powers;\n}\nconst types = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  boolean,\n  booleanish,\n  commaOrSpaceSeparated,\n  commaSeparated,\n  number,\n  overloadedBoolean,\n  spaceSeparated\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst checks = (\n  /** @type {ReadonlyArray<keyof typeof types>} */\n  Object.keys(types)\n);\nclass DefinedInfo extends Info {\n  /**\n   * @constructor\n   * @param {string} property\n   *   Property.\n   * @param {string} attribute\n   *   Attribute.\n   * @param {number | null | undefined} [mask]\n   *   Mask.\n   * @param {Space | undefined} [space]\n   *   Space.\n   * @returns\n   *   Info.\n   */\n  constructor(property, attribute, mask, space2) {\n    let index2 = -1;\n    super(property, attribute);\n    mark(this, \"space\", space2);\n    if (typeof mask === \"number\") {\n      while (++index2 < checks.length) {\n        const check = checks[index2];\n        mark(this, checks[index2], (mask & types[check]) === types[check]);\n      }\n    }\n  }\n}\nDefinedInfo.prototype.defined = true;\nfunction mark(values, key, value) {\n  if (value) {\n    values[key] = value;\n  }\n}\nfunction create(definition2) {\n  const properties = {};\n  const normals = {};\n  for (const [property, value] of Object.entries(definition2.properties)) {\n    const info = new DefinedInfo(\n      property,\n      definition2.transform(definition2.attributes || {}, property),\n      value,\n      definition2.space\n    );\n    if (definition2.mustUseProperty && definition2.mustUseProperty.includes(property)) {\n      info.mustUseProperty = true;\n    }\n    properties[property] = info;\n    normals[normalize$1(property)] = property;\n    normals[normalize$1(info.attribute)] = property;\n  }\n  return new Schema(properties, normals, definition2.space);\n}\nconst aria = create({\n  properties: {\n    ariaActiveDescendant: null,\n    ariaAtomic: booleanish,\n    ariaAutoComplete: null,\n    ariaBusy: booleanish,\n    ariaChecked: booleanish,\n    ariaColCount: number,\n    ariaColIndex: number,\n    ariaColSpan: number,\n    ariaControls: spaceSeparated,\n    ariaCurrent: null,\n    ariaDescribedBy: spaceSeparated,\n    ariaDetails: null,\n    ariaDisabled: booleanish,\n    ariaDropEffect: spaceSeparated,\n    ariaErrorMessage: null,\n    ariaExpanded: booleanish,\n    ariaFlowTo: spaceSeparated,\n    ariaGrabbed: booleanish,\n    ariaHasPopup: null,\n    ariaHidden: booleanish,\n    ariaInvalid: null,\n    ariaKeyShortcuts: null,\n    ariaLabel: null,\n    ariaLabelledBy: spaceSeparated,\n    ariaLevel: number,\n    ariaLive: null,\n    ariaModal: booleanish,\n    ariaMultiLine: booleanish,\n    ariaMultiSelectable: booleanish,\n    ariaOrientation: null,\n    ariaOwns: spaceSeparated,\n    ariaPlaceholder: null,\n    ariaPosInSet: number,\n    ariaPressed: booleanish,\n    ariaReadOnly: booleanish,\n    ariaRelevant: null,\n    ariaRequired: booleanish,\n    ariaRoleDescription: spaceSeparated,\n    ariaRowCount: number,\n    ariaRowIndex: number,\n    ariaRowSpan: number,\n    ariaSelected: booleanish,\n    ariaSetSize: number,\n    ariaSort: null,\n    ariaValueMax: number,\n    ariaValueMin: number,\n    ariaValueNow: number,\n    ariaValueText: null,\n    role: null\n  },\n  transform(_2, property) {\n    return property === \"role\" ? property : \"aria-\" + property.slice(4).toLowerCase();\n  }\n});\nfunction caseSensitiveTransform(attributes, attribute) {\n  return attribute in attributes ? attributes[attribute] : attribute;\n}\nfunction caseInsensitiveTransform(attributes, property) {\n  return caseSensitiveTransform(attributes, property.toLowerCase());\n}\nconst html$2 = create({\n  attributes: {\n    acceptcharset: \"accept-charset\",\n    classname: \"class\",\n    htmlfor: \"for\",\n    httpequiv: \"http-equiv\"\n  },\n  mustUseProperty: [\"checked\", \"multiple\", \"muted\", \"selected\"],\n  properties: {\n    // Standard Properties.\n    abbr: null,\n    accept: commaSeparated,\n    acceptCharset: spaceSeparated,\n    accessKey: spaceSeparated,\n    action: null,\n    allow: null,\n    allowFullScreen: boolean,\n    allowPaymentRequest: boolean,\n    allowUserMedia: boolean,\n    alt: null,\n    as: null,\n    async: boolean,\n    autoCapitalize: null,\n    autoComplete: spaceSeparated,\n    autoFocus: boolean,\n    autoPlay: boolean,\n    blocking: spaceSeparated,\n    capture: null,\n    charSet: null,\n    checked: boolean,\n    cite: null,\n    className: spaceSeparated,\n    cols: number,\n    colSpan: null,\n    content: null,\n    contentEditable: booleanish,\n    controls: boolean,\n    controlsList: spaceSeparated,\n    coords: number | commaSeparated,\n    crossOrigin: null,\n    data: null,\n    dateTime: null,\n    decoding: null,\n    default: boolean,\n    defer: boolean,\n    dir: null,\n    dirName: null,\n    disabled: boolean,\n    download: overloadedBoolean,\n    draggable: booleanish,\n    encType: null,\n    enterKeyHint: null,\n    fetchPriority: null,\n    form: null,\n    formAction: null,\n    formEncType: null,\n    formMethod: null,\n    formNoValidate: boolean,\n    formTarget: null,\n    headers: spaceSeparated,\n    height: number,\n    hidden: boolean,\n    high: number,\n    href: null,\n    hrefLang: null,\n    htmlFor: spaceSeparated,\n    httpEquiv: spaceSeparated,\n    id: null,\n    imageSizes: null,\n    imageSrcSet: null,\n    inert: boolean,\n    inputMode: null,\n    integrity: null,\n    is: null,\n    isMap: boolean,\n    itemId: null,\n    itemProp: spaceSeparated,\n    itemRef: spaceSeparated,\n    itemScope: boolean,\n    itemType: spaceSeparated,\n    kind: null,\n    label: null,\n    lang: null,\n    language: null,\n    list: null,\n    loading: null,\n    loop: boolean,\n    low: number,\n    manifest: null,\n    max: null,\n    maxLength: number,\n    media: null,\n    method: null,\n    min: null,\n    minLength: number,\n    multiple: boolean,\n    muted: boolean,\n    name: null,\n    nonce: null,\n    noModule: boolean,\n    noValidate: boolean,\n    onAbort: null,\n    onAfterPrint: null,\n    onAuxClick: null,\n    onBeforeMatch: null,\n    onBeforePrint: null,\n    onBeforeToggle: null,\n    onBeforeUnload: null,\n    onBlur: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onContextLost: null,\n    onContextMenu: null,\n    onContextRestored: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFormData: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLanguageChange: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadEnd: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMessageError: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRejectionHandled: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onScrollEnd: null,\n    onSecurityPolicyViolation: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onSlotChange: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnhandledRejection: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onWheel: null,\n    open: boolean,\n    optimum: number,\n    pattern: null,\n    ping: spaceSeparated,\n    placeholder: null,\n    playsInline: boolean,\n    popover: null,\n    popoverTarget: null,\n    popoverTargetAction: null,\n    poster: null,\n    preload: null,\n    readOnly: boolean,\n    referrerPolicy: null,\n    rel: spaceSeparated,\n    required: boolean,\n    reversed: boolean,\n    rows: number,\n    rowSpan: number,\n    sandbox: spaceSeparated,\n    scope: null,\n    scoped: boolean,\n    seamless: boolean,\n    selected: boolean,\n    shadowRootClonable: boolean,\n    shadowRootDelegatesFocus: boolean,\n    shadowRootMode: null,\n    shape: null,\n    size: number,\n    sizes: null,\n    slot: null,\n    span: number,\n    spellCheck: booleanish,\n    src: null,\n    srcDoc: null,\n    srcLang: null,\n    srcSet: null,\n    start: number,\n    step: null,\n    style: null,\n    tabIndex: number,\n    target: null,\n    title: null,\n    translate: null,\n    type: null,\n    typeMustMatch: boolean,\n    useMap: null,\n    value: booleanish,\n    width: number,\n    wrap: null,\n    writingSuggestions: null,\n    // Legacy.\n    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis\n    align: null,\n    // Several. Use CSS `text-align` instead,\n    aLink: null,\n    // `<body>`. Use CSS `a:active {color}` instead\n    archive: spaceSeparated,\n    // `<object>`. List of URIs to archives\n    axis: null,\n    // `<td>` and `<th>`. Use `scope` on `<th>`\n    background: null,\n    // `<body>`. Use CSS `background-image` instead\n    bgColor: null,\n    // `<body>` and table elements. Use CSS `background-color` instead\n    border: number,\n    // `<table>`. Use CSS `border-width` instead,\n    borderColor: null,\n    // `<table>`. Use CSS `border-color` instead,\n    bottomMargin: number,\n    // `<body>`\n    cellPadding: null,\n    // `<table>`\n    cellSpacing: null,\n    // `<table>`\n    char: null,\n    // Several table elements. When `align=char`, sets the character to align on\n    charOff: null,\n    // Several table elements. When `char`, offsets the alignment\n    classId: null,\n    // `<object>`\n    clear: null,\n    // `<br>`. Use CSS `clear` instead\n    code: null,\n    // `<object>`\n    codeBase: null,\n    // `<object>`\n    codeType: null,\n    // `<object>`\n    color: null,\n    // `<font>` and `<hr>`. Use CSS instead\n    compact: boolean,\n    // Lists. Use CSS to reduce space between items instead\n    declare: boolean,\n    // `<object>`\n    event: null,\n    // `<script>`\n    face: null,\n    // `<font>`. Use CSS instead\n    frame: null,\n    // `<table>`\n    frameBorder: null,\n    // `<iframe>`. Use CSS `border` instead\n    hSpace: number,\n    // `<img>` and `<object>`\n    leftMargin: number,\n    // `<body>`\n    link: null,\n    // `<body>`. Use CSS `a:link {color: *}` instead\n    longDesc: null,\n    // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`\n    lowSrc: null,\n    // `<img>`. Use a `<picture>`\n    marginHeight: number,\n    // `<body>`\n    marginWidth: number,\n    // `<body>`\n    noResize: boolean,\n    // `<frame>`\n    noHref: boolean,\n    // `<area>`. Use no href instead of an explicit `nohref`\n    noShade: boolean,\n    // `<hr>`. Use background-color and height instead of borders\n    noWrap: boolean,\n    // `<td>` and `<th>`\n    object: null,\n    // `<applet>`\n    profile: null,\n    // `<head>`\n    prompt: null,\n    // `<isindex>`\n    rev: null,\n    // `<link>`\n    rightMargin: number,\n    // `<body>`\n    rules: null,\n    // `<table>`\n    scheme: null,\n    // `<meta>`\n    scrolling: booleanish,\n    // `<frame>`. Use overflow in the child context\n    standby: null,\n    // `<object>`\n    summary: null,\n    // `<table>`\n    text: null,\n    // `<body>`. Use CSS `color` instead\n    topMargin: number,\n    // `<body>`\n    valueType: null,\n    // `<param>`\n    version: null,\n    // `<html>`. Use a doctype.\n    vAlign: null,\n    // Several. Use CSS `vertical-align` instead\n    vLink: null,\n    // `<body>`. Use CSS `a:visited {color}` instead\n    vSpace: number,\n    // `<img>` and `<object>`\n    // Non-standard Properties.\n    allowTransparency: null,\n    autoCorrect: null,\n    autoSave: null,\n    disablePictureInPicture: boolean,\n    disableRemotePlayback: boolean,\n    prefix: null,\n    property: null,\n    results: number,\n    security: null,\n    unselectable: null\n  },\n  space: \"html\",\n  transform: caseInsensitiveTransform\n});\nconst svg$1 = create({\n  attributes: {\n    accentHeight: \"accent-height\",\n    alignmentBaseline: \"alignment-baseline\",\n    arabicForm: \"arabic-form\",\n    baselineShift: \"baseline-shift\",\n    capHeight: \"cap-height\",\n    className: \"class\",\n    clipPath: \"clip-path\",\n    clipRule: \"clip-rule\",\n    colorInterpolation: \"color-interpolation\",\n    colorInterpolationFilters: \"color-interpolation-filters\",\n    colorProfile: \"color-profile\",\n    colorRendering: \"color-rendering\",\n    crossOrigin: \"crossorigin\",\n    dataType: \"datatype\",\n    dominantBaseline: \"dominant-baseline\",\n    enableBackground: \"enable-background\",\n    fillOpacity: \"fill-opacity\",\n    fillRule: \"fill-rule\",\n    floodColor: \"flood-color\",\n    floodOpacity: \"flood-opacity\",\n    fontFamily: \"font-family\",\n    fontSize: \"font-size\",\n    fontSizeAdjust: \"font-size-adjust\",\n    fontStretch: \"font-stretch\",\n    fontStyle: \"font-style\",\n    fontVariant: \"font-variant\",\n    fontWeight: \"font-weight\",\n    glyphName: \"glyph-name\",\n    glyphOrientationHorizontal: \"glyph-orientation-horizontal\",\n    glyphOrientationVertical: \"glyph-orientation-vertical\",\n    hrefLang: \"hreflang\",\n    horizAdvX: \"horiz-adv-x\",\n    horizOriginX: \"horiz-origin-x\",\n    horizOriginY: \"horiz-origin-y\",\n    imageRendering: \"image-rendering\",\n    letterSpacing: \"letter-spacing\",\n    lightingColor: \"lighting-color\",\n    markerEnd: \"marker-end\",\n    markerMid: \"marker-mid\",\n    markerStart: \"marker-start\",\n    navDown: \"nav-down\",\n    navDownLeft: \"nav-down-left\",\n    navDownRight: \"nav-down-right\",\n    navLeft: \"nav-left\",\n    navNext: \"nav-next\",\n    navPrev: \"nav-prev\",\n    navRight: \"nav-right\",\n    navUp: \"nav-up\",\n    navUpLeft: \"nav-up-left\",\n    navUpRight: \"nav-up-right\",\n    onAbort: \"onabort\",\n    onActivate: \"onactivate\",\n    onAfterPrint: \"onafterprint\",\n    onBeforePrint: \"onbeforeprint\",\n    onBegin: \"onbegin\",\n    onCancel: \"oncancel\",\n    onCanPlay: \"oncanplay\",\n    onCanPlayThrough: \"oncanplaythrough\",\n    onChange: \"onchange\",\n    onClick: \"onclick\",\n    onClose: \"onclose\",\n    onCopy: \"oncopy\",\n    onCueChange: \"oncuechange\",\n    onCut: \"oncut\",\n    onDblClick: \"ondblclick\",\n    onDrag: \"ondrag\",\n    onDragEnd: \"ondragend\",\n    onDragEnter: \"ondragenter\",\n    onDragExit: \"ondragexit\",\n    onDragLeave: \"ondragleave\",\n    onDragOver: \"ondragover\",\n    onDragStart: \"ondragstart\",\n    onDrop: \"ondrop\",\n    onDurationChange: \"ondurationchange\",\n    onEmptied: \"onemptied\",\n    onEnd: \"onend\",\n    onEnded: \"onended\",\n    onError: \"onerror\",\n    onFocus: \"onfocus\",\n    onFocusIn: \"onfocusin\",\n    onFocusOut: \"onfocusout\",\n    onHashChange: \"onhashchange\",\n    onInput: \"oninput\",\n    onInvalid: \"oninvalid\",\n    onKeyDown: \"onkeydown\",\n    onKeyPress: \"onkeypress\",\n    onKeyUp: \"onkeyup\",\n    onLoad: \"onload\",\n    onLoadedData: \"onloadeddata\",\n    onLoadedMetadata: \"onloadedmetadata\",\n    onLoadStart: \"onloadstart\",\n    onMessage: \"onmessage\",\n    onMouseDown: \"onmousedown\",\n    onMouseEnter: \"onmouseenter\",\n    onMouseLeave: \"onmouseleave\",\n    onMouseMove: \"onmousemove\",\n    onMouseOut: \"onmouseout\",\n    onMouseOver: \"onmouseover\",\n    onMouseUp: \"onmouseup\",\n    onMouseWheel: \"onmousewheel\",\n    onOffline: \"onoffline\",\n    onOnline: \"ononline\",\n    onPageHide: \"onpagehide\",\n    onPageShow: \"onpageshow\",\n    onPaste: \"onpaste\",\n    onPause: \"onpause\",\n    onPlay: \"onplay\",\n    onPlaying: \"onplaying\",\n    onPopState: \"onpopstate\",\n    onProgress: \"onprogress\",\n    onRateChange: \"onratechange\",\n    onRepeat: \"onrepeat\",\n    onReset: \"onreset\",\n    onResize: \"onresize\",\n    onScroll: \"onscroll\",\n    onSeeked: \"onseeked\",\n    onSeeking: \"onseeking\",\n    onSelect: \"onselect\",\n    onShow: \"onshow\",\n    onStalled: \"onstalled\",\n    onStorage: \"onstorage\",\n    onSubmit: \"onsubmit\",\n    onSuspend: \"onsuspend\",\n    onTimeUpdate: \"ontimeupdate\",\n    onToggle: \"ontoggle\",\n    onUnload: \"onunload\",\n    onVolumeChange: \"onvolumechange\",\n    onWaiting: \"onwaiting\",\n    onZoom: \"onzoom\",\n    overlinePosition: \"overline-position\",\n    overlineThickness: \"overline-thickness\",\n    paintOrder: \"paint-order\",\n    panose1: \"panose-1\",\n    pointerEvents: \"pointer-events\",\n    referrerPolicy: \"referrerpolicy\",\n    renderingIntent: \"rendering-intent\",\n    shapeRendering: \"shape-rendering\",\n    stopColor: \"stop-color\",\n    stopOpacity: \"stop-opacity\",\n    strikethroughPosition: \"strikethrough-position\",\n    strikethroughThickness: \"strikethrough-thickness\",\n    strokeDashArray: \"stroke-dasharray\",\n    strokeDashOffset: \"stroke-dashoffset\",\n    strokeLineCap: \"stroke-linecap\",\n    strokeLineJoin: \"stroke-linejoin\",\n    strokeMiterLimit: \"stroke-miterlimit\",\n    strokeOpacity: \"stroke-opacity\",\n    strokeWidth: \"stroke-width\",\n    tabIndex: \"tabindex\",\n    textAnchor: \"text-anchor\",\n    textDecoration: \"text-decoration\",\n    textRendering: \"text-rendering\",\n    transformOrigin: \"transform-origin\",\n    typeOf: \"typeof\",\n    underlinePosition: \"underline-position\",\n    underlineThickness: \"underline-thickness\",\n    unicodeBidi: \"unicode-bidi\",\n    unicodeRange: \"unicode-range\",\n    unitsPerEm: \"units-per-em\",\n    vAlphabetic: \"v-alphabetic\",\n    vHanging: \"v-hanging\",\n    vIdeographic: \"v-ideographic\",\n    vMathematical: \"v-mathematical\",\n    vectorEffect: \"vector-effect\",\n    vertAdvY: \"vert-adv-y\",\n    vertOriginX: \"vert-origin-x\",\n    vertOriginY: \"vert-origin-y\",\n    wordSpacing: \"word-spacing\",\n    writingMode: \"writing-mode\",\n    xHeight: \"x-height\",\n    // These were camelcased in Tiny. Now lowercased in SVG 2\n    playbackOrder: \"playbackorder\",\n    timelineBegin: \"timelinebegin\"\n  },\n  properties: {\n    about: commaOrSpaceSeparated,\n    accentHeight: number,\n    accumulate: null,\n    additive: null,\n    alignmentBaseline: null,\n    alphabetic: number,\n    amplitude: number,\n    arabicForm: null,\n    ascent: number,\n    attributeName: null,\n    attributeType: null,\n    azimuth: number,\n    bandwidth: null,\n    baselineShift: null,\n    baseFrequency: null,\n    baseProfile: null,\n    bbox: null,\n    begin: null,\n    bias: number,\n    by: null,\n    calcMode: null,\n    capHeight: number,\n    className: spaceSeparated,\n    clip: null,\n    clipPath: null,\n    clipPathUnits: null,\n    clipRule: null,\n    color: null,\n    colorInterpolation: null,\n    colorInterpolationFilters: null,\n    colorProfile: null,\n    colorRendering: null,\n    content: null,\n    contentScriptType: null,\n    contentStyleType: null,\n    crossOrigin: null,\n    cursor: null,\n    cx: null,\n    cy: null,\n    d: null,\n    dataType: null,\n    defaultAction: null,\n    descent: number,\n    diffuseConstant: number,\n    direction: null,\n    display: null,\n    dur: null,\n    divisor: number,\n    dominantBaseline: null,\n    download: boolean,\n    dx: null,\n    dy: null,\n    edgeMode: null,\n    editable: null,\n    elevation: number,\n    enableBackground: null,\n    end: null,\n    event: null,\n    exponent: number,\n    externalResourcesRequired: null,\n    fill: null,\n    fillOpacity: number,\n    fillRule: null,\n    filter: null,\n    filterRes: null,\n    filterUnits: null,\n    floodColor: null,\n    floodOpacity: null,\n    focusable: null,\n    focusHighlight: null,\n    fontFamily: null,\n    fontSize: null,\n    fontSizeAdjust: null,\n    fontStretch: null,\n    fontStyle: null,\n    fontVariant: null,\n    fontWeight: null,\n    format: null,\n    fr: null,\n    from: null,\n    fx: null,\n    fy: null,\n    g1: commaSeparated,\n    g2: commaSeparated,\n    glyphName: commaSeparated,\n    glyphOrientationHorizontal: null,\n    glyphOrientationVertical: null,\n    glyphRef: null,\n    gradientTransform: null,\n    gradientUnits: null,\n    handler: null,\n    hanging: number,\n    hatchContentUnits: null,\n    hatchUnits: null,\n    height: null,\n    href: null,\n    hrefLang: null,\n    horizAdvX: number,\n    horizOriginX: number,\n    horizOriginY: number,\n    id: null,\n    ideographic: number,\n    imageRendering: null,\n    initialVisibility: null,\n    in: null,\n    in2: null,\n    intercept: number,\n    k: number,\n    k1: number,\n    k2: number,\n    k3: number,\n    k4: number,\n    kernelMatrix: commaOrSpaceSeparated,\n    kernelUnitLength: null,\n    keyPoints: null,\n    // SEMI_COLON_SEPARATED\n    keySplines: null,\n    // SEMI_COLON_SEPARATED\n    keyTimes: null,\n    // SEMI_COLON_SEPARATED\n    kerning: null,\n    lang: null,\n    lengthAdjust: null,\n    letterSpacing: null,\n    lightingColor: null,\n    limitingConeAngle: number,\n    local: null,\n    markerEnd: null,\n    markerMid: null,\n    markerStart: null,\n    markerHeight: null,\n    markerUnits: null,\n    markerWidth: null,\n    mask: null,\n    maskContentUnits: null,\n    maskUnits: null,\n    mathematical: null,\n    max: null,\n    media: null,\n    mediaCharacterEncoding: null,\n    mediaContentEncodings: null,\n    mediaSize: number,\n    mediaTime: null,\n    method: null,\n    min: null,\n    mode: null,\n    name: null,\n    navDown: null,\n    navDownLeft: null,\n    navDownRight: null,\n    navLeft: null,\n    navNext: null,\n    navPrev: null,\n    navRight: null,\n    navUp: null,\n    navUpLeft: null,\n    navUpRight: null,\n    numOctaves: null,\n    observer: null,\n    offset: null,\n    onAbort: null,\n    onActivate: null,\n    onAfterPrint: null,\n    onBeforePrint: null,\n    onBegin: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnd: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFocusIn: null,\n    onFocusOut: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onMouseWheel: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRepeat: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onShow: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onZoom: null,\n    opacity: null,\n    operator: null,\n    order: null,\n    orient: null,\n    orientation: null,\n    origin: null,\n    overflow: null,\n    overlay: null,\n    overlinePosition: number,\n    overlineThickness: number,\n    paintOrder: null,\n    panose1: null,\n    path: null,\n    pathLength: number,\n    patternContentUnits: null,\n    patternTransform: null,\n    patternUnits: null,\n    phase: null,\n    ping: spaceSeparated,\n    pitch: null,\n    playbackOrder: null,\n    pointerEvents: null,\n    points: null,\n    pointsAtX: number,\n    pointsAtY: number,\n    pointsAtZ: number,\n    preserveAlpha: null,\n    preserveAspectRatio: null,\n    primitiveUnits: null,\n    propagate: null,\n    property: commaOrSpaceSeparated,\n    r: null,\n    radius: null,\n    referrerPolicy: null,\n    refX: null,\n    refY: null,\n    rel: commaOrSpaceSeparated,\n    rev: commaOrSpaceSeparated,\n    renderingIntent: null,\n    repeatCount: null,\n    repeatDur: null,\n    requiredExtensions: commaOrSpaceSeparated,\n    requiredFeatures: commaOrSpaceSeparated,\n    requiredFonts: commaOrSpaceSeparated,\n    requiredFormats: commaOrSpaceSeparated,\n    resource: null,\n    restart: null,\n    result: null,\n    rotate: null,\n    rx: null,\n    ry: null,\n    scale: null,\n    seed: null,\n    shapeRendering: null,\n    side: null,\n    slope: null,\n    snapshotTime: null,\n    specularConstant: number,\n    specularExponent: number,\n    spreadMethod: null,\n    spacing: null,\n    startOffset: null,\n    stdDeviation: null,\n    stemh: null,\n    stemv: null,\n    stitchTiles: null,\n    stopColor: null,\n    stopOpacity: null,\n    strikethroughPosition: number,\n    strikethroughThickness: number,\n    string: null,\n    stroke: null,\n    strokeDashArray: commaOrSpaceSeparated,\n    strokeDashOffset: null,\n    strokeLineCap: null,\n    strokeLineJoin: null,\n    strokeMiterLimit: number,\n    strokeOpacity: number,\n    strokeWidth: null,\n    style: null,\n    surfaceScale: number,\n    syncBehavior: null,\n    syncBehaviorDefault: null,\n    syncMaster: null,\n    syncTolerance: null,\n    syncToleranceDefault: null,\n    systemLanguage: commaOrSpaceSeparated,\n    tabIndex: number,\n    tableValues: null,\n    target: null,\n    targetX: number,\n    targetY: number,\n    textAnchor: null,\n    textDecoration: null,\n    textRendering: null,\n    textLength: null,\n    timelineBegin: null,\n    title: null,\n    transformBehavior: null,\n    type: null,\n    typeOf: commaOrSpaceSeparated,\n    to: null,\n    transform: null,\n    transformOrigin: null,\n    u1: null,\n    u2: null,\n    underlinePosition: number,\n    underlineThickness: number,\n    unicode: null,\n    unicodeBidi: null,\n    unicodeRange: null,\n    unitsPerEm: number,\n    values: null,\n    vAlphabetic: number,\n    vMathematical: number,\n    vectorEffect: null,\n    vHanging: number,\n    vIdeographic: number,\n    version: null,\n    vertAdvY: number,\n    vertOriginX: number,\n    vertOriginY: number,\n    viewBox: null,\n    viewTarget: null,\n    visibility: null,\n    width: null,\n    widths: null,\n    wordSpacing: null,\n    writingMode: null,\n    x: null,\n    x1: null,\n    x2: null,\n    xChannelSelector: null,\n    xHeight: number,\n    y: null,\n    y1: null,\n    y2: null,\n    yChannelSelector: null,\n    z: null,\n    zoomAndPan: null\n  },\n  space: \"svg\",\n  transform: caseSensitiveTransform\n});\nconst xlink = create({\n  properties: {\n    xLinkActuate: null,\n    xLinkArcRole: null,\n    xLinkHref: null,\n    xLinkRole: null,\n    xLinkShow: null,\n    xLinkTitle: null,\n    xLinkType: null\n  },\n  space: \"xlink\",\n  transform(_2, property) {\n    return \"xlink:\" + property.slice(5).toLowerCase();\n  }\n});\nconst xmlns = create({\n  attributes: { xmlnsxlink: \"xmlns:xlink\" },\n  properties: { xmlnsXLink: null, xmlns: null },\n  space: \"xmlns\",\n  transform: caseInsensitiveTransform\n});\nconst xml = create({\n  properties: { xmlBase: null, xmlLang: null, xmlSpace: null },\n  space: \"xml\",\n  transform(_2, property) {\n    return \"xml:\" + property.slice(3).toLowerCase();\n  }\n});\nconst hastToReact = {\n  classId: \"classID\",\n  dataType: \"datatype\",\n  itemId: \"itemID\",\n  strokeDashArray: \"strokeDasharray\",\n  strokeDashOffset: \"strokeDashoffset\",\n  strokeLineCap: \"strokeLinecap\",\n  strokeLineJoin: \"strokeLinejoin\",\n  strokeMiterLimit: \"strokeMiterlimit\",\n  typeOf: \"typeof\",\n  xLinkActuate: \"xlinkActuate\",\n  xLinkArcRole: \"xlinkArcrole\",\n  xLinkHref: \"xlinkHref\",\n  xLinkRole: \"xlinkRole\",\n  xLinkShow: \"xlinkShow\",\n  xLinkTitle: \"xlinkTitle\",\n  xLinkType: \"xlinkType\",\n  xmlnsXLink: \"xmlnsXlink\"\n};\nconst cap$1 = /[A-Z]/g;\nconst dash = /-[a-z]/g;\nconst valid = /^data[-\\w.:]+$/i;\nfunction find(schema, value) {\n  const normal = normalize$1(value);\n  let property = value;\n  let Type = Info;\n  if (normal in schema.normal) {\n    return schema.property[schema.normal[normal]];\n  }\n  if (normal.length > 4 && normal.slice(0, 4) === \"data\" && valid.test(value)) {\n    if (value.charAt(4) === \"-\") {\n      const rest = value.slice(5).replace(dash, camelcase);\n      property = \"data\" + rest.charAt(0).toUpperCase() + rest.slice(1);\n    } else {\n      const rest = value.slice(4);\n      if (!dash.test(rest)) {\n        let dashes = rest.replace(cap$1, kebab);\n        if (dashes.charAt(0) !== \"-\") {\n          dashes = \"-\" + dashes;\n        }\n        value = \"data\" + dashes;\n      }\n    }\n    Type = DefinedInfo;\n  }\n  return new Type(property, value);\n}\nfunction kebab($0) {\n  return \"-\" + $0.toLowerCase();\n}\nfunction camelcase($0) {\n  return $0.charAt(1).toUpperCase();\n}\nconst html$1 = merge([aria, html$2, xlink, xmlns, xml], \"html\");\nconst svg = merge([aria, svg$1, xlink, xmlns, xml], \"svg\");\nfunction stringify(values) {\n  return values.join(\" \").trim();\n}\nvar cjs$1 = {};\nvar COMMENT_REGEX = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\nvar NEWLINE_REGEX = /\\n/g;\nvar WHITESPACE_REGEX = /^\\s*/;\nvar PROPERTY_REGEX = /^(\\*?[-#/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/;\nvar COLON_REGEX = /^:\\s*/;\nvar VALUE_REGEX = /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};])+)/;\nvar SEMICOLON_REGEX = /^[;\\s]*/;\nvar TRIM_REGEX = /^\\s+|\\s+$/g;\nvar NEWLINE = \"\\n\";\nvar FORWARD_SLASH = \"/\";\nvar ASTERISK = \"*\";\nvar EMPTY_STRING = \"\";\nvar TYPE_COMMENT = \"comment\";\nvar TYPE_DECLARATION = \"declaration\";\nvar inlineStyleParser = function(style, options) {\n  if (typeof style !== \"string\") {\n    throw new TypeError(\"First argument must be a string\");\n  }\n  if (!style) return [];\n  options = options || {};\n  var lineno = 1;\n  var column = 1;\n  function updatePosition(str) {\n    var lines = str.match(NEWLINE_REGEX);\n    if (lines) lineno += lines.length;\n    var i3 = str.lastIndexOf(NEWLINE);\n    column = ~i3 ? str.length - i3 : column + str.length;\n  }\n  function position2() {\n    var start = { line: lineno, column };\n    return function(node2) {\n      node2.position = new Position(start);\n      whitespace2();\n      return node2;\n    };\n  }\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column };\n    this.source = options.source;\n  }\n  Position.prototype.content = style;\n  function error(msg) {\n    var err = new Error(\n      options.source + \":\" + lineno + \":\" + column + \": \" + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = style;\n    if (options.silent) ;\n    else {\n      throw err;\n    }\n  }\n  function match2(re2) {\n    var m4 = re2.exec(style);\n    if (!m4) return;\n    var str = m4[0];\n    updatePosition(str);\n    style = style.slice(str.length);\n    return m4;\n  }\n  function whitespace2() {\n    match2(WHITESPACE_REGEX);\n  }\n  function comments(rules) {\n    var c3;\n    rules = rules || [];\n    while (c3 = comment()) {\n      if (c3 !== false) {\n        rules.push(c3);\n      }\n    }\n    return rules;\n  }\n  function comment() {\n    var pos = position2();\n    if (FORWARD_SLASH != style.charAt(0) || ASTERISK != style.charAt(1)) return;\n    var i3 = 2;\n    while (EMPTY_STRING != style.charAt(i3) && (ASTERISK != style.charAt(i3) || FORWARD_SLASH != style.charAt(i3 + 1))) {\n      ++i3;\n    }\n    i3 += 2;\n    if (EMPTY_STRING === style.charAt(i3 - 1)) {\n      return error(\"End of comment missing\");\n    }\n    var str = style.slice(2, i3 - 2);\n    column += 2;\n    updatePosition(str);\n    style = style.slice(i3);\n    column += 2;\n    return pos({\n      type: TYPE_COMMENT,\n      comment: str\n    });\n  }\n  function declaration() {\n    var pos = position2();\n    var prop = match2(PROPERTY_REGEX);\n    if (!prop) return;\n    comment();\n    if (!match2(COLON_REGEX)) return error(\"property missing ':'\");\n    var val = match2(VALUE_REGEX);\n    var ret = pos({\n      type: TYPE_DECLARATION,\n      property: trim(prop[0].replace(COMMENT_REGEX, EMPTY_STRING)),\n      value: val ? trim(val[0].replace(COMMENT_REGEX, EMPTY_STRING)) : EMPTY_STRING\n    });\n    match2(SEMICOLON_REGEX);\n    return ret;\n  }\n  function declarations() {\n    var decls = [];\n    comments(decls);\n    var decl;\n    while (decl = declaration()) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n    return decls;\n  }\n  whitespace2();\n  return declarations();\n};\nfunction trim(str) {\n  return str ? str.replace(TRIM_REGEX, EMPTY_STRING) : EMPTY_STRING;\n}\nvar __importDefault$1 = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(mod) {\n  return mod && mod.__esModule ? mod : { \"default\": mod };\n};\nObject.defineProperty(cjs$1, \"__esModule\", { value: true });\ncjs$1.default = StyleToObject;\nvar inline_style_parser_1 = __importDefault$1(inlineStyleParser);\nfunction StyleToObject(style, iterator) {\n  var styleObject = null;\n  if (!style || typeof style !== \"string\") {\n    return styleObject;\n  }\n  var declarations = (0, inline_style_parser_1.default)(style);\n  var hasIterator = typeof iterator === \"function\";\n  declarations.forEach(function(declaration) {\n    if (declaration.type !== \"declaration\") {\n      return;\n    }\n    var property = declaration.property, value = declaration.value;\n    if (hasIterator) {\n      iterator(property, value, declaration);\n    } else if (value) {\n      styleObject = styleObject || {};\n      styleObject[property] = value;\n    }\n  });\n  return styleObject;\n}\nvar utilities = {};\nObject.defineProperty(utilities, \"__esModule\", { value: true });\nutilities.camelCase = void 0;\nvar CUSTOM_PROPERTY_REGEX = /^--[a-zA-Z0-9_-]+$/;\nvar HYPHEN_REGEX = /-([a-z])/g;\nvar NO_HYPHEN_REGEX = /^[^-]+$/;\nvar VENDOR_PREFIX_REGEX = /^-(webkit|moz|ms|o|khtml)-/;\nvar MS_VENDOR_PREFIX_REGEX = /^-(ms)-/;\nvar skipCamelCase = function(property) {\n  return !property || NO_HYPHEN_REGEX.test(property) || CUSTOM_PROPERTY_REGEX.test(property);\n};\nvar capitalize = function(match2, character) {\n  return character.toUpperCase();\n};\nvar trimHyphen = function(match2, prefix) {\n  return \"\".concat(prefix, \"-\");\n};\nvar camelCase = function(property, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (skipCamelCase(property)) {\n    return property;\n  }\n  property = property.toLowerCase();\n  if (options.reactCompat) {\n    property = property.replace(MS_VENDOR_PREFIX_REGEX, trimHyphen);\n  } else {\n    property = property.replace(VENDOR_PREFIX_REGEX, trimHyphen);\n  }\n  return property.replace(HYPHEN_REGEX, capitalize);\n};\nutilities.camelCase = camelCase;\nvar __importDefault = commonjsGlobal$1 && commonjsGlobal$1.__importDefault || function(mod) {\n  return mod && mod.__esModule ? mod : { \"default\": mod };\n};\nvar style_to_object_1 = __importDefault(cjs$1);\nvar utilities_1 = utilities;\nfunction StyleToJS(style, options) {\n  var output = {};\n  if (!style || typeof style !== \"string\") {\n    return output;\n  }\n  (0, style_to_object_1.default)(style, function(property, value) {\n    if (property && value) {\n      output[(0, utilities_1.camelCase)(property, options)] = value;\n    }\n  });\n  return output;\n}\nStyleToJS.default = StyleToJS;\nvar cjs = StyleToJS;\nconst styleToJs = /* @__PURE__ */ getDefaultExportFromCjs$1(cjs);\nconst pointEnd = point$2(\"end\");\nconst pointStart = point$2(\"start\");\nfunction point$2(type) {\n  return point2;\n  function point2(node2) {\n    const point3 = node2 && node2.position && node2.position[type] || {};\n    if (typeof point3.line === \"number\" && point3.line > 0 && typeof point3.column === \"number\" && point3.column > 0) {\n      return {\n        line: point3.line,\n        column: point3.column,\n        offset: typeof point3.offset === \"number\" && point3.offset > -1 ? point3.offset : void 0\n      };\n    }\n  }\n}\nfunction position$1(node2) {\n  const start = pointStart(node2);\n  const end = pointEnd(node2);\n  if (start && end) {\n    return { start, end };\n  }\n}\nfunction stringifyPosition(value) {\n  if (!value || typeof value !== \"object\") {\n    return \"\";\n  }\n  if (\"position\" in value || \"type\" in value) {\n    return position(value.position);\n  }\n  if (\"start\" in value || \"end\" in value) {\n    return position(value);\n  }\n  if (\"line\" in value || \"column\" in value) {\n    return point$1(value);\n  }\n  return \"\";\n}\nfunction point$1(point2) {\n  return index(point2 && point2.line) + \":\" + index(point2 && point2.column);\n}\nfunction position(pos) {\n  return point$1(pos && pos.start) + \"-\" + point$1(pos && pos.end);\n}\nfunction index(value) {\n  return value && typeof value === \"number\" ? value : 1;\n}\nclass VFileMessage extends Error {\n  /**\n   * Create a message for `reason`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Options | null | undefined} [options]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | Options | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns\n   *   Instance of `VFileMessage`.\n   */\n  // eslint-disable-next-line complexity\n  constructor(causeOrReason, optionsOrParentOrPlace, origin) {\n    super();\n    if (typeof optionsOrParentOrPlace === \"string\") {\n      origin = optionsOrParentOrPlace;\n      optionsOrParentOrPlace = void 0;\n    }\n    let reason = \"\";\n    let options = {};\n    let legacyCause = false;\n    if (optionsOrParentOrPlace) {\n      if (\"line\" in optionsOrParentOrPlace && \"column\" in optionsOrParentOrPlace) {\n        options = { place: optionsOrParentOrPlace };\n      } else if (\"start\" in optionsOrParentOrPlace && \"end\" in optionsOrParentOrPlace) {\n        options = { place: optionsOrParentOrPlace };\n      } else if (\"type\" in optionsOrParentOrPlace) {\n        options = {\n          ancestors: [optionsOrParentOrPlace],\n          place: optionsOrParentOrPlace.position\n        };\n      } else {\n        options = { ...optionsOrParentOrPlace };\n      }\n    }\n    if (typeof causeOrReason === \"string\") {\n      reason = causeOrReason;\n    } else if (!options.cause && causeOrReason) {\n      legacyCause = true;\n      reason = causeOrReason.message;\n      options.cause = causeOrReason;\n    }\n    if (!options.ruleId && !options.source && typeof origin === \"string\") {\n      const index2 = origin.indexOf(\":\");\n      if (index2 === -1) {\n        options.ruleId = origin;\n      } else {\n        options.source = origin.slice(0, index2);\n        options.ruleId = origin.slice(index2 + 1);\n      }\n    }\n    if (!options.place && options.ancestors && options.ancestors) {\n      const parent = options.ancestors[options.ancestors.length - 1];\n      if (parent) {\n        options.place = parent.position;\n      }\n    }\n    const start = options.place && \"start\" in options.place ? options.place.start : options.place;\n    this.ancestors = options.ancestors || void 0;\n    this.cause = options.cause || void 0;\n    this.column = start ? start.column : void 0;\n    this.fatal = void 0;\n    this.file;\n    this.message = reason;\n    this.line = start ? start.line : void 0;\n    this.name = stringifyPosition(options.place) || \"1:1\";\n    this.place = options.place || void 0;\n    this.reason = this.message;\n    this.ruleId = options.ruleId || void 0;\n    this.source = options.source || void 0;\n    this.stack = legacyCause && options.cause && typeof options.cause.stack === \"string\" ? options.cause.stack : \"\";\n    this.actual;\n    this.expected;\n    this.note;\n    this.url;\n  }\n}\nVFileMessage.prototype.file = \"\";\nVFileMessage.prototype.name = \"\";\nVFileMessage.prototype.reason = \"\";\nVFileMessage.prototype.message = \"\";\nVFileMessage.prototype.stack = \"\";\nVFileMessage.prototype.column = void 0;\nVFileMessage.prototype.line = void 0;\nVFileMessage.prototype.ancestors = void 0;\nVFileMessage.prototype.cause = void 0;\nVFileMessage.prototype.fatal = void 0;\nVFileMessage.prototype.place = void 0;\nVFileMessage.prototype.ruleId = void 0;\nVFileMessage.prototype.source = void 0;\nconst own$3 = {}.hasOwnProperty;\nconst emptyMap = /* @__PURE__ */ new Map();\nconst cap = /[A-Z]/g;\nconst tableElements = /* @__PURE__ */ new Set([\"table\", \"tbody\", \"thead\", \"tfoot\", \"tr\"]);\nconst tableCellElement = /* @__PURE__ */ new Set([\"td\", \"th\"]);\nconst docs = \"https://github.com/syntax-tree/hast-util-to-jsx-runtime\";\nfunction toJsxRuntime(tree, options) {\n  if (!options || options.Fragment === void 0) {\n    throw new TypeError(\"Expected `Fragment` in options\");\n  }\n  const filePath = options.filePath || void 0;\n  let create2;\n  if (options.development) {\n    if (typeof options.jsxDEV !== \"function\") {\n      throw new TypeError(\n        \"Expected `jsxDEV` in options when `development: true`\"\n      );\n    }\n    create2 = developmentCreate(filePath, options.jsxDEV);\n  } else {\n    if (typeof options.jsx !== \"function\") {\n      throw new TypeError(\"Expected `jsx` in production options\");\n    }\n    if (typeof options.jsxs !== \"function\") {\n      throw new TypeError(\"Expected `jsxs` in production options\");\n    }\n    create2 = productionCreate(filePath, options.jsx, options.jsxs);\n  }\n  const state = {\n    Fragment: options.Fragment,\n    ancestors: [],\n    components: options.components || {},\n    create: create2,\n    elementAttributeNameCase: options.elementAttributeNameCase || \"react\",\n    evaluater: options.createEvaluater ? options.createEvaluater() : void 0,\n    filePath,\n    ignoreInvalidStyle: options.ignoreInvalidStyle || false,\n    passKeys: options.passKeys !== false,\n    passNode: options.passNode || false,\n    schema: options.space === \"svg\" ? svg : html$1,\n    stylePropertyNameCase: options.stylePropertyNameCase || \"dom\",\n    tableCellAlignToStyle: options.tableCellAlignToStyle !== false\n  };\n  const result = one$1(state, tree, void 0);\n  if (result && typeof result !== \"string\") {\n    return result;\n  }\n  return state.create(\n    tree,\n    state.Fragment,\n    { children: result || void 0 },\n    void 0\n  );\n}\nfunction one$1(state, node2, key) {\n  if (node2.type === \"element\") {\n    return element$1(state, node2, key);\n  }\n  if (node2.type === \"mdxFlowExpression\" || node2.type === \"mdxTextExpression\") {\n    return mdxExpression(state, node2);\n  }\n  if (node2.type === \"mdxJsxFlowElement\" || node2.type === \"mdxJsxTextElement\") {\n    return mdxJsxElement(state, node2, key);\n  }\n  if (node2.type === \"mdxjsEsm\") {\n    return mdxEsm(state, node2);\n  }\n  if (node2.type === \"root\") {\n    return root$1(state, node2, key);\n  }\n  if (node2.type === \"text\") {\n    return text$3(state, node2);\n  }\n}\nfunction element$1(state, node2, key) {\n  const parentSchema = state.schema;\n  let schema = parentSchema;\n  if (node2.tagName.toLowerCase() === \"svg\" && parentSchema.space === \"html\") {\n    schema = svg;\n    state.schema = schema;\n  }\n  state.ancestors.push(node2);\n  const type = findComponentFromName(state, node2.tagName, false);\n  const props = createElementProps(state, node2);\n  let children = createChildren(state, node2);\n  if (tableElements.has(node2.tagName)) {\n    children = children.filter(function(child) {\n      return typeof child === \"string\" ? !whitespace(child) : true;\n    });\n  }\n  addNode(state, props, type, node2);\n  addChildren(props, children);\n  state.ancestors.pop();\n  state.schema = parentSchema;\n  return state.create(node2, type, props, key);\n}\nfunction mdxExpression(state, node2) {\n  if (node2.data && node2.data.estree && state.evaluater) {\n    const program = node2.data.estree;\n    const expression = program.body[0];\n    ok$2(expression.type === \"ExpressionStatement\");\n    return (\n      /** @type {Child | undefined} */\n      state.evaluater.evaluateExpression(expression.expression)\n    );\n  }\n  crashEstree(state, node2.position);\n}\nfunction mdxEsm(state, node2) {\n  if (node2.data && node2.data.estree && state.evaluater) {\n    return (\n      /** @type {Child | undefined} */\n      state.evaluater.evaluateProgram(node2.data.estree)\n    );\n  }\n  crashEstree(state, node2.position);\n}\nfunction mdxJsxElement(state, node2, key) {\n  const parentSchema = state.schema;\n  let schema = parentSchema;\n  if (node2.name === \"svg\" && parentSchema.space === \"html\") {\n    schema = svg;\n    state.schema = schema;\n  }\n  state.ancestors.push(node2);\n  const type = node2.name === null ? state.Fragment : findComponentFromName(state, node2.name, true);\n  const props = createJsxElementProps(state, node2);\n  const children = createChildren(state, node2);\n  addNode(state, props, type, node2);\n  addChildren(props, children);\n  state.ancestors.pop();\n  state.schema = parentSchema;\n  return state.create(node2, type, props, key);\n}\nfunction root$1(state, node2, key) {\n  const props = {};\n  addChildren(props, createChildren(state, node2));\n  return state.create(node2, state.Fragment, props, key);\n}\nfunction text$3(_2, node2) {\n  return node2.value;\n}\nfunction addNode(state, props, type, node2) {\n  if (typeof type !== \"string\" && type !== state.Fragment && state.passNode) {\n    props.node = node2;\n  }\n}\nfunction addChildren(props, children) {\n  if (children.length > 0) {\n    const value = children.length > 1 ? children : children[0];\n    if (value) {\n      props.children = value;\n    }\n  }\n}\nfunction productionCreate(_2, jsx, jsxs) {\n  return create2;\n  function create2(_3, type, props, key) {\n    const isStaticChildren = Array.isArray(props.children);\n    const fn2 = isStaticChildren ? jsxs : jsx;\n    return key ? fn2(type, props, key) : fn2(type, props);\n  }\n}\nfunction developmentCreate(filePath, jsxDEV) {\n  return create2;\n  function create2(node2, type, props, key) {\n    const isStaticChildren = Array.isArray(props.children);\n    const point2 = pointStart(node2);\n    return jsxDEV(\n      type,\n      props,\n      key,\n      isStaticChildren,\n      {\n        columnNumber: point2 ? point2.column - 1 : void 0,\n        fileName: filePath,\n        lineNumber: point2 ? point2.line : void 0\n      },\n      void 0\n    );\n  }\n}\nfunction createElementProps(state, node2) {\n  const props = {};\n  let alignValue;\n  let prop;\n  for (prop in node2.properties) {\n    if (prop !== \"children\" && own$3.call(node2.properties, prop)) {\n      const result = createProperty(state, prop, node2.properties[prop]);\n      if (result) {\n        const [key, value] = result;\n        if (state.tableCellAlignToStyle && key === \"align\" && typeof value === \"string\" && tableCellElement.has(node2.tagName)) {\n          alignValue = value;\n        } else {\n          props[key] = value;\n        }\n      }\n    }\n  }\n  if (alignValue) {\n    const style = (\n      /** @type {Style} */\n      props.style || (props.style = {})\n    );\n    style[state.stylePropertyNameCase === \"css\" ? \"text-align\" : \"textAlign\"] = alignValue;\n  }\n  return props;\n}\nfunction createJsxElementProps(state, node2) {\n  const props = {};\n  for (const attribute of node2.attributes) {\n    if (attribute.type === \"mdxJsxExpressionAttribute\") {\n      if (attribute.data && attribute.data.estree && state.evaluater) {\n        const program = attribute.data.estree;\n        const expression = program.body[0];\n        ok$2(expression.type === \"ExpressionStatement\");\n        const objectExpression = expression.expression;\n        ok$2(objectExpression.type === \"ObjectExpression\");\n        const property = objectExpression.properties[0];\n        ok$2(property.type === \"SpreadElement\");\n        Object.assign(\n          props,\n          state.evaluater.evaluateExpression(property.argument)\n        );\n      } else {\n        crashEstree(state, node2.position);\n      }\n    } else {\n      const name2 = attribute.name;\n      let value;\n      if (attribute.value && typeof attribute.value === \"object\") {\n        if (attribute.value.data && attribute.value.data.estree && state.evaluater) {\n          const program = attribute.value.data.estree;\n          const expression = program.body[0];\n          ok$2(expression.type === \"ExpressionStatement\");\n          value = state.evaluater.evaluateExpression(expression.expression);\n        } else {\n          crashEstree(state, node2.position);\n        }\n      } else {\n        value = attribute.value === null ? true : attribute.value;\n      }\n      props[name2] = /** @type {Props[keyof Props]} */\n      value;\n    }\n  }\n  return props;\n}\nfunction createChildren(state, node2) {\n  const children = [];\n  let index2 = -1;\n  const countsByName = state.passKeys ? /* @__PURE__ */ new Map() : emptyMap;\n  while (++index2 < node2.children.length) {\n    const child = node2.children[index2];\n    let key;\n    if (state.passKeys) {\n      const name2 = child.type === \"element\" ? child.tagName : child.type === \"mdxJsxFlowElement\" || child.type === \"mdxJsxTextElement\" ? child.name : void 0;\n      if (name2) {\n        const count = countsByName.get(name2) || 0;\n        key = name2 + \"-\" + count;\n        countsByName.set(name2, count + 1);\n      }\n    }\n    const result = one$1(state, child, key);\n    if (result !== void 0) children.push(result);\n  }\n  return children;\n}\nfunction createProperty(state, prop, value) {\n  const info = find(state.schema, prop);\n  if (value === null || value === void 0 || typeof value === \"number\" && Number.isNaN(value)) {\n    return;\n  }\n  if (Array.isArray(value)) {\n    value = info.commaSeparated ? stringify$1(value) : stringify(value);\n  }\n  if (info.property === \"style\") {\n    let styleObject = typeof value === \"object\" ? value : parseStyle(state, String(value));\n    if (state.stylePropertyNameCase === \"css\") {\n      styleObject = transformStylesToCssCasing(styleObject);\n    }\n    return [\"style\", styleObject];\n  }\n  return [\n    state.elementAttributeNameCase === \"react\" && info.space ? hastToReact[info.property] || info.property : info.attribute,\n    value\n  ];\n}\nfunction parseStyle(state, value) {\n  try {\n    return styleToJs(value, { reactCompat: true });\n  } catch (error) {\n    if (state.ignoreInvalidStyle) {\n      return {};\n    }\n    const cause = (\n      /** @type {Error} */\n      error\n    );\n    const message = new VFileMessage(\"Cannot parse `style` attribute\", {\n      ancestors: state.ancestors,\n      cause,\n      ruleId: \"style\",\n      source: \"hast-util-to-jsx-runtime\"\n    });\n    message.file = state.filePath || void 0;\n    message.url = docs + \"#cannot-parse-style-attribute\";\n    throw message;\n  }\n}\nfunction findComponentFromName(state, name$1, allowExpression) {\n  let result;\n  if (!allowExpression) {\n    result = { type: \"Literal\", value: name$1 };\n  } else if (name$1.includes(\".\")) {\n    const identifiers = name$1.split(\".\");\n    let index2 = -1;\n    let node2;\n    while (++index2 < identifiers.length) {\n      const prop = name(identifiers[index2]) ? { type: \"Identifier\", name: identifiers[index2] } : { type: \"Literal\", value: identifiers[index2] };\n      node2 = node2 ? {\n        type: \"MemberExpression\",\n        object: node2,\n        property: prop,\n        computed: Boolean(index2 && prop.type === \"Literal\"),\n        optional: false\n      } : prop;\n    }\n    result = node2;\n  } else {\n    result = name(name$1) && !/^[a-z]/.test(name$1) ? { type: \"Identifier\", name: name$1 } : { type: \"Literal\", value: name$1 };\n  }\n  if (result.type === \"Literal\") {\n    const name2 = (\n      /** @type {string | number} */\n      result.value\n    );\n    return own$3.call(state.components, name2) ? state.components[name2] : name2;\n  }\n  if (state.evaluater) {\n    return state.evaluater.evaluateExpression(result);\n  }\n  crashEstree(state);\n}\nfunction crashEstree(state, place) {\n  const message = new VFileMessage(\n    \"Cannot handle MDX estrees without `createEvaluater`\",\n    {\n      ancestors: state.ancestors,\n      place,\n      ruleId: \"mdx-estree\",\n      source: \"hast-util-to-jsx-runtime\"\n    }\n  );\n  message.file = state.filePath || void 0;\n  message.url = docs + \"#cannot-handle-mdx-estrees-without-createevaluater\";\n  throw message;\n}\nfunction transformStylesToCssCasing(domCasing) {\n  const cssCasing = {};\n  let from;\n  for (from in domCasing) {\n    if (own$3.call(domCasing, from)) {\n      cssCasing[transformStyleToCssCasing(from)] = domCasing[from];\n    }\n  }\n  return cssCasing;\n}\nfunction transformStyleToCssCasing(from) {\n  let to2 = from.replace(cap, toDash);\n  if (to2.slice(0, 3) === \"ms-\") to2 = \"-\" + to2;\n  return to2;\n}\nfunction toDash($0) {\n  return \"-\" + $0.toLowerCase();\n}\nconst urlAttributes = {\n  action: [\"form\"],\n  cite: [\"blockquote\", \"del\", \"ins\", \"q\"],\n  data: [\"object\"],\n  formAction: [\"button\", \"input\"],\n  href: [\"a\", \"area\", \"base\", \"link\"],\n  icon: [\"menuitem\"],\n  itemId: null,\n  manifest: [\"html\"],\n  ping: [\"a\", \"area\"],\n  poster: [\"video\"],\n  src: [\n    \"audio\",\n    \"embed\",\n    \"iframe\",\n    \"img\",\n    \"input\",\n    \"script\",\n    \"source\",\n    \"track\",\n    \"video\"\n  ]\n};\nconst emptyOptions$1 = {};\nfunction toString$1(value, options) {\n  const settings = emptyOptions$1;\n  const includeImageAlt = typeof settings.includeImageAlt === \"boolean\" ? settings.includeImageAlt : true;\n  const includeHtml = typeof settings.includeHtml === \"boolean\" ? settings.includeHtml : true;\n  return one(value, includeImageAlt, includeHtml);\n}\nfunction one(value, includeImageAlt, includeHtml) {\n  if (node(value)) {\n    if (\"value\" in value) {\n      return value.type === \"html\" && !includeHtml ? \"\" : value.value;\n    }\n    if (includeImageAlt && \"alt\" in value && value.alt) {\n      return value.alt;\n    }\n    if (\"children\" in value) {\n      return all(value.children, includeImageAlt, includeHtml);\n    }\n  }\n  if (Array.isArray(value)) {\n    return all(value, includeImageAlt, includeHtml);\n  }\n  return \"\";\n}\nfunction all(values, includeImageAlt, includeHtml) {\n  const result = [];\n  let index2 = -1;\n  while (++index2 < values.length) {\n    result[index2] = one(values[index2], includeImageAlt, includeHtml);\n  }\n  return result.join(\"\");\n}\nfunction node(value) {\n  return Boolean(value && typeof value === \"object\");\n}\nconst element = document.createElement(\"i\");\nfunction decodeNamedCharacterReference(value) {\n  const characterReference2 = \"&\" + value + \";\";\n  element.innerHTML = characterReference2;\n  const character = element.textContent;\n  if (\n    // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n    // yield `null`.\n    character.charCodeAt(character.length - 1) === 59 && value !== \"semi\"\n  ) {\n    return false;\n  }\n  return character === characterReference2 ? false : character;\n}\nfunction splice(list2, start, remove2, items) {\n  const end = list2.length;\n  let chunkStart = 0;\n  let parameters;\n  if (start < 0) {\n    start = -start > end ? 0 : end + start;\n  } else {\n    start = start > end ? end : start;\n  }\n  remove2 = remove2 > 0 ? remove2 : 0;\n  if (items.length < 1e4) {\n    parameters = Array.from(items);\n    parameters.unshift(start, remove2);\n    list2.splice(...parameters);\n  } else {\n    if (remove2) list2.splice(start, remove2);\n    while (chunkStart < items.length) {\n      parameters = items.slice(chunkStart, chunkStart + 1e4);\n      parameters.unshift(start, 0);\n      list2.splice(...parameters);\n      chunkStart += 1e4;\n      start += 1e4;\n    }\n  }\n}\nfunction push(list2, items) {\n  if (list2.length > 0) {\n    splice(list2, list2.length, 0, items);\n    return list2;\n  }\n  return items;\n}\nconst hasOwnProperty = {}.hasOwnProperty;\nfunction combineExtensions(extensions) {\n  const all2 = {};\n  let index2 = -1;\n  while (++index2 < extensions.length) {\n    syntaxExtension(all2, extensions[index2]);\n  }\n  return all2;\n}\nfunction syntaxExtension(all2, extension2) {\n  let hook;\n  for (hook in extension2) {\n    const maybe = hasOwnProperty.call(all2, hook) ? all2[hook] : void 0;\n    const left = maybe || (all2[hook] = {});\n    const right = extension2[hook];\n    let code2;\n    if (right) {\n      for (code2 in right) {\n        if (!hasOwnProperty.call(left, code2)) left[code2] = [];\n        const value = right[code2];\n        constructs(\n          // @ts-expect-error Looks like a list.\n          left[code2],\n          Array.isArray(value) ? value : value ? [value] : []\n        );\n      }\n    }\n  }\n}\nfunction constructs(existing, list2) {\n  let index2 = -1;\n  const before = [];\n  while (++index2 < list2.length) {\n    (list2[index2].add === \"after\" ? existing : before).push(list2[index2]);\n  }\n  splice(existing, 0, 0, before);\n}\nfunction decodeNumericCharacterReference(value, base) {\n  const code2 = Number.parseInt(value, base);\n  if (\n    // C0 except for HT, LF, FF, CR, space.\n    code2 < 9 || code2 === 11 || code2 > 13 && code2 < 32 || // Control character (DEL) of C0, and C1 controls.\n    code2 > 126 && code2 < 160 || // Lone high surrogates and low surrogates.\n    code2 > 55295 && code2 < 57344 || // Noncharacters.\n    code2 > 64975 && code2 < 65008 || /* eslint-disable no-bitwise */\n    (code2 & 65535) === 65535 || (code2 & 65535) === 65534 || /* eslint-enable no-bitwise */\n    // Out of range\n    code2 > 1114111\n  ) {\n    return \"\";\n  }\n  return String.fromCodePoint(code2);\n}\nfunction normalizeIdentifier(value) {\n  return value.replace(/[\\t\\n\\r ]+/g, \" \").replace(/^ | $/g, \"\").toLowerCase().toUpperCase();\n}\nconst asciiAlpha = regexCheck(/[A-Za-z]/);\nconst asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/);\nconst asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/);\nfunction asciiControl(code2) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code2 !== null && (code2 < 32 || code2 === 127)\n  );\n}\nconst asciiDigit = regexCheck(/\\d/);\nconst asciiHexDigit = regexCheck(/[\\dA-Fa-f]/);\nconst asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/);\nfunction markdownLineEnding(code2) {\n  return code2 !== null && code2 < -2;\n}\nfunction markdownLineEndingOrSpace(code2) {\n  return code2 !== null && (code2 < 0 || code2 === 32);\n}\nfunction markdownSpace(code2) {\n  return code2 === -2 || code2 === -1 || code2 === 32;\n}\nconst unicodePunctuation = regexCheck(new RegExp(\"\\\\p{P}|\\\\p{S}\", \"u\"));\nconst unicodeWhitespace = regexCheck(/\\s/);\nfunction regexCheck(regex2) {\n  return check;\n  function check(code2) {\n    return code2 !== null && code2 > -1 && regex2.test(String.fromCharCode(code2));\n  }\n}\nfunction normalizeUri(value) {\n  const result = [];\n  let index2 = -1;\n  let start = 0;\n  let skip = 0;\n  while (++index2 < value.length) {\n    const code2 = value.charCodeAt(index2);\n    let replace = \"\";\n    if (code2 === 37 && asciiAlphanumeric(value.charCodeAt(index2 + 1)) && asciiAlphanumeric(value.charCodeAt(index2 + 2))) {\n      skip = 2;\n    } else if (code2 < 128) {\n      if (!/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(code2))) {\n        replace = String.fromCharCode(code2);\n      }\n    } else if (code2 > 55295 && code2 < 57344) {\n      const next = value.charCodeAt(index2 + 1);\n      if (code2 < 56320 && next > 56319 && next < 57344) {\n        replace = String.fromCharCode(code2, next);\n        skip = 1;\n      } else {\n        replace = \"\";\n      }\n    } else {\n      replace = String.fromCharCode(code2);\n    }\n    if (replace) {\n      result.push(value.slice(start, index2), encodeURIComponent(replace));\n      start = index2 + skip + 1;\n      replace = \"\";\n    }\n    if (skip) {\n      index2 += skip;\n      skip = 0;\n    }\n  }\n  return result.join(\"\") + value.slice(start);\n}\nfunction factorySpace(effects, ok2, type, max) {\n  const limit = max ? max - 1 : Number.POSITIVE_INFINITY;\n  let size = 0;\n  return start;\n  function start(code2) {\n    if (markdownSpace(code2)) {\n      effects.enter(type);\n      return prefix(code2);\n    }\n    return ok2(code2);\n  }\n  function prefix(code2) {\n    if (markdownSpace(code2) && size++ < limit) {\n      effects.consume(code2);\n      return prefix;\n    }\n    effects.exit(type);\n    return ok2(code2);\n  }\n}\nconst content$2 = {\n  tokenize: initializeContent\n};\nfunction initializeContent(effects) {\n  const contentStart = effects.attempt(this.parser.constructs.contentInitial, afterContentStartConstruct, paragraphInitial);\n  let previous2;\n  return contentStart;\n  function afterContentStartConstruct(code2) {\n    if (code2 === null) {\n      effects.consume(code2);\n      return;\n    }\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return factorySpace(effects, contentStart, \"linePrefix\");\n  }\n  function paragraphInitial(code2) {\n    effects.enter(\"paragraph\");\n    return lineStart(code2);\n  }\n  function lineStart(code2) {\n    const token = effects.enter(\"chunkText\", {\n      contentType: \"text\",\n      previous: previous2\n    });\n    if (previous2) {\n      previous2.next = token;\n    }\n    previous2 = token;\n    return data(code2);\n  }\n  function data(code2) {\n    if (code2 === null) {\n      effects.exit(\"chunkText\");\n      effects.exit(\"paragraph\");\n      effects.consume(code2);\n      return;\n    }\n    if (markdownLineEnding(code2)) {\n      effects.consume(code2);\n      effects.exit(\"chunkText\");\n      return lineStart;\n    }\n    effects.consume(code2);\n    return data;\n  }\n}\nconst document$2 = {\n  tokenize: initializeDocument\n};\nconst containerConstruct = {\n  tokenize: tokenizeContainer\n};\nfunction initializeDocument(effects) {\n  const self2 = this;\n  const stack = [];\n  let continued = 0;\n  let childFlow;\n  let childToken;\n  let lineStartOffset;\n  return start;\n  function start(code2) {\n    if (continued < stack.length) {\n      const item = stack[continued];\n      self2.containerState = item[1];\n      return effects.attempt(item[0].continuation, documentContinue, checkNewContainers)(code2);\n    }\n    return checkNewContainers(code2);\n  }\n  function documentContinue(code2) {\n    continued++;\n    if (self2.containerState._closeFlow) {\n      self2.containerState._closeFlow = void 0;\n      if (childFlow) {\n        closeFlow();\n      }\n      const indexBeforeExits = self2.events.length;\n      let indexBeforeFlow = indexBeforeExits;\n      let point2;\n      while (indexBeforeFlow--) {\n        if (self2.events[indexBeforeFlow][0] === \"exit\" && self2.events[indexBeforeFlow][1].type === \"chunkFlow\") {\n          point2 = self2.events[indexBeforeFlow][1].end;\n          break;\n        }\n      }\n      exitContainers(continued);\n      let index2 = indexBeforeExits;\n      while (index2 < self2.events.length) {\n        self2.events[index2][1].end = {\n          ...point2\n        };\n        index2++;\n      }\n      splice(self2.events, indexBeforeFlow + 1, 0, self2.events.slice(indexBeforeExits));\n      self2.events.length = index2;\n      return checkNewContainers(code2);\n    }\n    return start(code2);\n  }\n  function checkNewContainers(code2) {\n    if (continued === stack.length) {\n      if (!childFlow) {\n        return documentContinued(code2);\n      }\n      if (childFlow.currentConstruct && childFlow.currentConstruct.concrete) {\n        return flowStart(code2);\n      }\n      self2.interrupt = Boolean(childFlow.currentConstruct && !childFlow._gfmTableDynamicInterruptHack);\n    }\n    self2.containerState = {};\n    return effects.check(containerConstruct, thereIsANewContainer, thereIsNoNewContainer)(code2);\n  }\n  function thereIsANewContainer(code2) {\n    if (childFlow) closeFlow();\n    exitContainers(continued);\n    return documentContinued(code2);\n  }\n  function thereIsNoNewContainer(code2) {\n    self2.parser.lazy[self2.now().line] = continued !== stack.length;\n    lineStartOffset = self2.now().offset;\n    return flowStart(code2);\n  }\n  function documentContinued(code2) {\n    self2.containerState = {};\n    return effects.attempt(containerConstruct, containerContinue, flowStart)(code2);\n  }\n  function containerContinue(code2) {\n    continued++;\n    stack.push([self2.currentConstruct, self2.containerState]);\n    return documentContinued(code2);\n  }\n  function flowStart(code2) {\n    if (code2 === null) {\n      if (childFlow) closeFlow();\n      exitContainers(0);\n      effects.consume(code2);\n      return;\n    }\n    childFlow = childFlow || self2.parser.flow(self2.now());\n    effects.enter(\"chunkFlow\", {\n      _tokenizer: childFlow,\n      contentType: \"flow\",\n      previous: childToken\n    });\n    return flowContinue(code2);\n  }\n  function flowContinue(code2) {\n    if (code2 === null) {\n      writeToChild(effects.exit(\"chunkFlow\"), true);\n      exitContainers(0);\n      effects.consume(code2);\n      return;\n    }\n    if (markdownLineEnding(code2)) {\n      effects.consume(code2);\n      writeToChild(effects.exit(\"chunkFlow\"));\n      continued = 0;\n      self2.interrupt = void 0;\n      return start;\n    }\n    effects.consume(code2);\n    return flowContinue;\n  }\n  function writeToChild(token, endOfFile) {\n    const stream = self2.sliceStream(token);\n    if (endOfFile) stream.push(null);\n    token.previous = childToken;\n    if (childToken) childToken.next = token;\n    childToken = token;\n    childFlow.defineSkip(token.start);\n    childFlow.write(stream);\n    if (self2.parser.lazy[token.start.line]) {\n      let index2 = childFlow.events.length;\n      while (index2--) {\n        if (\n          // The token starts before the line ending\n          childFlow.events[index2][1].start.offset < lineStartOffset && // and either is not ended yet\n          (!childFlow.events[index2][1].end || // or ends after it.\n          childFlow.events[index2][1].end.offset > lineStartOffset)\n        ) {\n          return;\n        }\n      }\n      const indexBeforeExits = self2.events.length;\n      let indexBeforeFlow = indexBeforeExits;\n      let seen;\n      let point2;\n      while (indexBeforeFlow--) {\n        if (self2.events[indexBeforeFlow][0] === \"exit\" && self2.events[indexBeforeFlow][1].type === \"chunkFlow\") {\n          if (seen) {\n            point2 = self2.events[indexBeforeFlow][1].end;\n            break;\n          }\n          seen = true;\n        }\n      }\n      exitContainers(continued);\n      index2 = indexBeforeExits;\n      while (index2 < self2.events.length) {\n        self2.events[index2][1].end = {\n          ...point2\n        };\n        index2++;\n      }\n      splice(self2.events, indexBeforeFlow + 1, 0, self2.events.slice(indexBeforeExits));\n      self2.events.length = index2;\n    }\n  }\n  function exitContainers(size) {\n    let index2 = stack.length;\n    while (index2-- > size) {\n      const entry = stack[index2];\n      self2.containerState = entry[1];\n      entry[0].exit.call(self2, effects);\n    }\n    stack.length = size;\n  }\n  function closeFlow() {\n    childFlow.write([null]);\n    childToken = void 0;\n    childFlow = void 0;\n    self2.containerState._closeFlow = void 0;\n  }\n}\nfunction tokenizeContainer(effects, ok2, nok) {\n  return factorySpace(effects, effects.attempt(this.parser.constructs.document, ok2, nok), \"linePrefix\", this.parser.constructs.disable.null.includes(\"codeIndented\") ? void 0 : 4);\n}\nfunction classifyCharacter(code2) {\n  if (code2 === null || markdownLineEndingOrSpace(code2) || unicodeWhitespace(code2)) {\n    return 1;\n  }\n  if (unicodePunctuation(code2)) {\n    return 2;\n  }\n}\nfunction resolveAll(constructs2, events, context) {\n  const called = [];\n  let index2 = -1;\n  while (++index2 < constructs2.length) {\n    const resolve = constructs2[index2].resolveAll;\n    if (resolve && !called.includes(resolve)) {\n      events = resolve(events, context);\n      called.push(resolve);\n    }\n  }\n  return events;\n}\nconst attention = {\n  name: \"attention\",\n  resolveAll: resolveAllAttention,\n  tokenize: tokenizeAttention\n};\nfunction resolveAllAttention(events, context) {\n  let index2 = -1;\n  let open;\n  let group;\n  let text2;\n  let openingSequence;\n  let closingSequence;\n  let use;\n  let nextEvents;\n  let offset;\n  while (++index2 < events.length) {\n    if (events[index2][0] === \"enter\" && events[index2][1].type === \"attentionSequence\" && events[index2][1]._close) {\n      open = index2;\n      while (open--) {\n        if (events[open][0] === \"exit\" && events[open][1].type === \"attentionSequence\" && events[open][1]._open && // If the markers are the same:\n        context.sliceSerialize(events[open][1]).charCodeAt(0) === context.sliceSerialize(events[index2][1]).charCodeAt(0)) {\n          if ((events[open][1]._close || events[index2][1]._open) && (events[index2][1].end.offset - events[index2][1].start.offset) % 3 && !((events[open][1].end.offset - events[open][1].start.offset + events[index2][1].end.offset - events[index2][1].start.offset) % 3)) {\n            continue;\n          }\n          use = events[open][1].end.offset - events[open][1].start.offset > 1 && events[index2][1].end.offset - events[index2][1].start.offset > 1 ? 2 : 1;\n          const start = {\n            ...events[open][1].end\n          };\n          const end = {\n            ...events[index2][1].start\n          };\n          movePoint(start, -use);\n          movePoint(end, use);\n          openingSequence = {\n            type: use > 1 ? \"strongSequence\" : \"emphasisSequence\",\n            start,\n            end: {\n              ...events[open][1].end\n            }\n          };\n          closingSequence = {\n            type: use > 1 ? \"strongSequence\" : \"emphasisSequence\",\n            start: {\n              ...events[index2][1].start\n            },\n            end\n          };\n          text2 = {\n            type: use > 1 ? \"strongText\" : \"emphasisText\",\n            start: {\n              ...events[open][1].end\n            },\n            end: {\n              ...events[index2][1].start\n            }\n          };\n          group = {\n            type: use > 1 ? \"strong\" : \"emphasis\",\n            start: {\n              ...openingSequence.start\n            },\n            end: {\n              ...closingSequence.end\n            }\n          };\n          events[open][1].end = {\n            ...openingSequence.start\n          };\n          events[index2][1].start = {\n            ...closingSequence.end\n          };\n          nextEvents = [];\n          if (events[open][1].end.offset - events[open][1].start.offset) {\n            nextEvents = push(nextEvents, [[\"enter\", events[open][1], context], [\"exit\", events[open][1], context]]);\n          }\n          nextEvents = push(nextEvents, [[\"enter\", group, context], [\"enter\", openingSequence, context], [\"exit\", openingSequence, context], [\"enter\", text2, context]]);\n          nextEvents = push(nextEvents, resolveAll(context.parser.constructs.insideSpan.null, events.slice(open + 1, index2), context));\n          nextEvents = push(nextEvents, [[\"exit\", text2, context], [\"enter\", closingSequence, context], [\"exit\", closingSequence, context], [\"exit\", group, context]]);\n          if (events[index2][1].end.offset - events[index2][1].start.offset) {\n            offset = 2;\n            nextEvents = push(nextEvents, [[\"enter\", events[index2][1], context], [\"exit\", events[index2][1], context]]);\n          } else {\n            offset = 0;\n          }\n          splice(events, open - 1, index2 - open + 3, nextEvents);\n          index2 = open + nextEvents.length - offset - 2;\n          break;\n        }\n      }\n    }\n  }\n  index2 = -1;\n  while (++index2 < events.length) {\n    if (events[index2][1].type === \"attentionSequence\") {\n      events[index2][1].type = \"data\";\n    }\n  }\n  return events;\n}\nfunction tokenizeAttention(effects, ok2) {\n  const attentionMarkers2 = this.parser.constructs.attentionMarkers.null;\n  const previous2 = this.previous;\n  const before = classifyCharacter(previous2);\n  let marker;\n  return start;\n  function start(code2) {\n    marker = code2;\n    effects.enter(\"attentionSequence\");\n    return inside(code2);\n  }\n  function inside(code2) {\n    if (code2 === marker) {\n      effects.consume(code2);\n      return inside;\n    }\n    const token = effects.exit(\"attentionSequence\");\n    const after = classifyCharacter(code2);\n    const open = !after || after === 2 && before || attentionMarkers2.includes(code2);\n    const close = !before || before === 2 && after || attentionMarkers2.includes(previous2);\n    token._open = Boolean(marker === 42 ? open : open && (before || !close));\n    token._close = Boolean(marker === 42 ? close : close && (after || !open));\n    return ok2(code2);\n  }\n}\nfunction movePoint(point2, offset) {\n  point2.column += offset;\n  point2.offset += offset;\n  point2._bufferIndex += offset;\n}\nconst autolink = {\n  name: \"autolink\",\n  tokenize: tokenizeAutolink\n};\nfunction tokenizeAutolink(effects, ok2, nok) {\n  let size = 0;\n  return start;\n  function start(code2) {\n    effects.enter(\"autolink\");\n    effects.enter(\"autolinkMarker\");\n    effects.consume(code2);\n    effects.exit(\"autolinkMarker\");\n    effects.enter(\"autolinkProtocol\");\n    return open;\n  }\n  function open(code2) {\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      return schemeOrEmailAtext;\n    }\n    if (code2 === 64) {\n      return nok(code2);\n    }\n    return emailAtext(code2);\n  }\n  function schemeOrEmailAtext(code2) {\n    if (code2 === 43 || code2 === 45 || code2 === 46 || asciiAlphanumeric(code2)) {\n      size = 1;\n      return schemeInsideOrEmailAtext(code2);\n    }\n    return emailAtext(code2);\n  }\n  function schemeInsideOrEmailAtext(code2) {\n    if (code2 === 58) {\n      effects.consume(code2);\n      size = 0;\n      return urlInside;\n    }\n    if ((code2 === 43 || code2 === 45 || code2 === 46 || asciiAlphanumeric(code2)) && size++ < 32) {\n      effects.consume(code2);\n      return schemeInsideOrEmailAtext;\n    }\n    size = 0;\n    return emailAtext(code2);\n  }\n  function urlInside(code2) {\n    if (code2 === 62) {\n      effects.exit(\"autolinkProtocol\");\n      effects.enter(\"autolinkMarker\");\n      effects.consume(code2);\n      effects.exit(\"autolinkMarker\");\n      effects.exit(\"autolink\");\n      return ok2;\n    }\n    if (code2 === null || code2 === 32 || code2 === 60 || asciiControl(code2)) {\n      return nok(code2);\n    }\n    effects.consume(code2);\n    return urlInside;\n  }\n  function emailAtext(code2) {\n    if (code2 === 64) {\n      effects.consume(code2);\n      return emailAtSignOrDot;\n    }\n    if (asciiAtext(code2)) {\n      effects.consume(code2);\n      return emailAtext;\n    }\n    return nok(code2);\n  }\n  function emailAtSignOrDot(code2) {\n    return asciiAlphanumeric(code2) ? emailLabel(code2) : nok(code2);\n  }\n  function emailLabel(code2) {\n    if (code2 === 46) {\n      effects.consume(code2);\n      size = 0;\n      return emailAtSignOrDot;\n    }\n    if (code2 === 62) {\n      effects.exit(\"autolinkProtocol\").type = \"autolinkEmail\";\n      effects.enter(\"autolinkMarker\");\n      effects.consume(code2);\n      effects.exit(\"autolinkMarker\");\n      effects.exit(\"autolink\");\n      return ok2;\n    }\n    return emailValue(code2);\n  }\n  function emailValue(code2) {\n    if ((code2 === 45 || asciiAlphanumeric(code2)) && size++ < 63) {\n      const next = code2 === 45 ? emailValue : emailLabel;\n      effects.consume(code2);\n      return next;\n    }\n    return nok(code2);\n  }\n}\nconst blankLine = {\n  partial: true,\n  tokenize: tokenizeBlankLine\n};\nfunction tokenizeBlankLine(effects, ok2, nok) {\n  return start;\n  function start(code2) {\n    return markdownSpace(code2) ? factorySpace(effects, after, \"linePrefix\")(code2) : after(code2);\n  }\n  function after(code2) {\n    return code2 === null || markdownLineEnding(code2) ? ok2(code2) : nok(code2);\n  }\n}\nconst blockQuote = {\n  continuation: {\n    tokenize: tokenizeBlockQuoteContinuation\n  },\n  exit,\n  name: \"blockQuote\",\n  tokenize: tokenizeBlockQuoteStart\n};\nfunction tokenizeBlockQuoteStart(effects, ok2, nok) {\n  const self2 = this;\n  return start;\n  function start(code2) {\n    if (code2 === 62) {\n      const state = self2.containerState;\n      if (!state.open) {\n        effects.enter(\"blockQuote\", {\n          _container: true\n        });\n        state.open = true;\n      }\n      effects.enter(\"blockQuotePrefix\");\n      effects.enter(\"blockQuoteMarker\");\n      effects.consume(code2);\n      effects.exit(\"blockQuoteMarker\");\n      return after;\n    }\n    return nok(code2);\n  }\n  function after(code2) {\n    if (markdownSpace(code2)) {\n      effects.enter(\"blockQuotePrefixWhitespace\");\n      effects.consume(code2);\n      effects.exit(\"blockQuotePrefixWhitespace\");\n      effects.exit(\"blockQuotePrefix\");\n      return ok2;\n    }\n    effects.exit(\"blockQuotePrefix\");\n    return ok2(code2);\n  }\n}\nfunction tokenizeBlockQuoteContinuation(effects, ok2, nok) {\n  const self2 = this;\n  return contStart;\n  function contStart(code2) {\n    if (markdownSpace(code2)) {\n      return factorySpace(effects, contBefore, \"linePrefix\", self2.parser.constructs.disable.null.includes(\"codeIndented\") ? void 0 : 4)(code2);\n    }\n    return contBefore(code2);\n  }\n  function contBefore(code2) {\n    return effects.attempt(blockQuote, ok2, nok)(code2);\n  }\n}\nfunction exit(effects) {\n  effects.exit(\"blockQuote\");\n}\nconst characterEscape = {\n  name: \"characterEscape\",\n  tokenize: tokenizeCharacterEscape\n};\nfunction tokenizeCharacterEscape(effects, ok2, nok) {\n  return start;\n  function start(code2) {\n    effects.enter(\"characterEscape\");\n    effects.enter(\"escapeMarker\");\n    effects.consume(code2);\n    effects.exit(\"escapeMarker\");\n    return inside;\n  }\n  function inside(code2) {\n    if (asciiPunctuation(code2)) {\n      effects.enter(\"characterEscapeValue\");\n      effects.consume(code2);\n      effects.exit(\"characterEscapeValue\");\n      effects.exit(\"characterEscape\");\n      return ok2;\n    }\n    return nok(code2);\n  }\n}\nconst characterReference = {\n  name: \"characterReference\",\n  tokenize: tokenizeCharacterReference\n};\nfunction tokenizeCharacterReference(effects, ok2, nok) {\n  const self2 = this;\n  let size = 0;\n  let max;\n  let test;\n  return start;\n  function start(code2) {\n    effects.enter(\"characterReference\");\n    effects.enter(\"characterReferenceMarker\");\n    effects.consume(code2);\n    effects.exit(\"characterReferenceMarker\");\n    return open;\n  }\n  function open(code2) {\n    if (code2 === 35) {\n      effects.enter(\"characterReferenceMarkerNumeric\");\n      effects.consume(code2);\n      effects.exit(\"characterReferenceMarkerNumeric\");\n      return numeric;\n    }\n    effects.enter(\"characterReferenceValue\");\n    max = 31;\n    test = asciiAlphanumeric;\n    return value(code2);\n  }\n  function numeric(code2) {\n    if (code2 === 88 || code2 === 120) {\n      effects.enter(\"characterReferenceMarkerHexadecimal\");\n      effects.consume(code2);\n      effects.exit(\"characterReferenceMarkerHexadecimal\");\n      effects.enter(\"characterReferenceValue\");\n      max = 6;\n      test = asciiHexDigit;\n      return value;\n    }\n    effects.enter(\"characterReferenceValue\");\n    max = 7;\n    test = asciiDigit;\n    return value(code2);\n  }\n  function value(code2) {\n    if (code2 === 59 && size) {\n      const token = effects.exit(\"characterReferenceValue\");\n      if (test === asciiAlphanumeric && !decodeNamedCharacterReference(self2.sliceSerialize(token))) {\n        return nok(code2);\n      }\n      effects.enter(\"characterReferenceMarker\");\n      effects.consume(code2);\n      effects.exit(\"characterReferenceMarker\");\n      effects.exit(\"characterReference\");\n      return ok2;\n    }\n    if (test(code2) && size++ < max) {\n      effects.consume(code2);\n      return value;\n    }\n    return nok(code2);\n  }\n}\nconst nonLazyContinuation = {\n  partial: true,\n  tokenize: tokenizeNonLazyContinuation\n};\nconst codeFenced = {\n  concrete: true,\n  name: \"codeFenced\",\n  tokenize: tokenizeCodeFenced\n};\nfunction tokenizeCodeFenced(effects, ok2, nok) {\n  const self2 = this;\n  const closeStart = {\n    partial: true,\n    tokenize: tokenizeCloseStart\n  };\n  let initialPrefix = 0;\n  let sizeOpen = 0;\n  let marker;\n  return start;\n  function start(code2) {\n    return beforeSequenceOpen(code2);\n  }\n  function beforeSequenceOpen(code2) {\n    const tail = self2.events[self2.events.length - 1];\n    initialPrefix = tail && tail[1].type === \"linePrefix\" ? tail[2].sliceSerialize(tail[1], true).length : 0;\n    marker = code2;\n    effects.enter(\"codeFenced\");\n    effects.enter(\"codeFencedFence\");\n    effects.enter(\"codeFencedFenceSequence\");\n    return sequenceOpen(code2);\n  }\n  function sequenceOpen(code2) {\n    if (code2 === marker) {\n      sizeOpen++;\n      effects.consume(code2);\n      return sequenceOpen;\n    }\n    if (sizeOpen < 3) {\n      return nok(code2);\n    }\n    effects.exit(\"codeFencedFenceSequence\");\n    return markdownSpace(code2) ? factorySpace(effects, infoBefore, \"whitespace\")(code2) : infoBefore(code2);\n  }\n  function infoBefore(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"codeFencedFence\");\n      return self2.interrupt ? ok2(code2) : effects.check(nonLazyContinuation, atNonLazyBreak, after)(code2);\n    }\n    effects.enter(\"codeFencedFenceInfo\");\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return info(code2);\n  }\n  function info(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"chunkString\");\n      effects.exit(\"codeFencedFenceInfo\");\n      return infoBefore(code2);\n    }\n    if (markdownSpace(code2)) {\n      effects.exit(\"chunkString\");\n      effects.exit(\"codeFencedFenceInfo\");\n      return factorySpace(effects, metaBefore, \"whitespace\")(code2);\n    }\n    if (code2 === 96 && code2 === marker) {\n      return nok(code2);\n    }\n    effects.consume(code2);\n    return info;\n  }\n  function metaBefore(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      return infoBefore(code2);\n    }\n    effects.enter(\"codeFencedFenceMeta\");\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return meta(code2);\n  }\n  function meta(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"chunkString\");\n      effects.exit(\"codeFencedFenceMeta\");\n      return infoBefore(code2);\n    }\n    if (code2 === 96 && code2 === marker) {\n      return nok(code2);\n    }\n    effects.consume(code2);\n    return meta;\n  }\n  function atNonLazyBreak(code2) {\n    return effects.attempt(closeStart, after, contentBefore)(code2);\n  }\n  function contentBefore(code2) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return contentStart;\n  }\n  function contentStart(code2) {\n    return initialPrefix > 0 && markdownSpace(code2) ? factorySpace(effects, beforeContentChunk, \"linePrefix\", initialPrefix + 1)(code2) : beforeContentChunk(code2);\n  }\n  function beforeContentChunk(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      return effects.check(nonLazyContinuation, atNonLazyBreak, after)(code2);\n    }\n    effects.enter(\"codeFlowValue\");\n    return contentChunk(code2);\n  }\n  function contentChunk(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"codeFlowValue\");\n      return beforeContentChunk(code2);\n    }\n    effects.consume(code2);\n    return contentChunk;\n  }\n  function after(code2) {\n    effects.exit(\"codeFenced\");\n    return ok2(code2);\n  }\n  function tokenizeCloseStart(effects2, ok3, nok2) {\n    let size = 0;\n    return startBefore;\n    function startBefore(code2) {\n      effects2.enter(\"lineEnding\");\n      effects2.consume(code2);\n      effects2.exit(\"lineEnding\");\n      return start2;\n    }\n    function start2(code2) {\n      effects2.enter(\"codeFencedFence\");\n      return markdownSpace(code2) ? factorySpace(effects2, beforeSequenceClose, \"linePrefix\", self2.parser.constructs.disable.null.includes(\"codeIndented\") ? void 0 : 4)(code2) : beforeSequenceClose(code2);\n    }\n    function beforeSequenceClose(code2) {\n      if (code2 === marker) {\n        effects2.enter(\"codeFencedFenceSequence\");\n        return sequenceClose(code2);\n      }\n      return nok2(code2);\n    }\n    function sequenceClose(code2) {\n      if (code2 === marker) {\n        size++;\n        effects2.consume(code2);\n        return sequenceClose;\n      }\n      if (size >= sizeOpen) {\n        effects2.exit(\"codeFencedFenceSequence\");\n        return markdownSpace(code2) ? factorySpace(effects2, sequenceCloseAfter, \"whitespace\")(code2) : sequenceCloseAfter(code2);\n      }\n      return nok2(code2);\n    }\n    function sequenceCloseAfter(code2) {\n      if (code2 === null || markdownLineEnding(code2)) {\n        effects2.exit(\"codeFencedFence\");\n        return ok3(code2);\n      }\n      return nok2(code2);\n    }\n  }\n}\nfunction tokenizeNonLazyContinuation(effects, ok2, nok) {\n  const self2 = this;\n  return start;\n  function start(code2) {\n    if (code2 === null) {\n      return nok(code2);\n    }\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return lineStart;\n  }\n  function lineStart(code2) {\n    return self2.parser.lazy[self2.now().line] ? nok(code2) : ok2(code2);\n  }\n}\nconst codeIndented = {\n  name: \"codeIndented\",\n  tokenize: tokenizeCodeIndented\n};\nconst furtherStart = {\n  partial: true,\n  tokenize: tokenizeFurtherStart\n};\nfunction tokenizeCodeIndented(effects, ok2, nok) {\n  const self2 = this;\n  return start;\n  function start(code2) {\n    effects.enter(\"codeIndented\");\n    return factorySpace(effects, afterPrefix, \"linePrefix\", 4 + 1)(code2);\n  }\n  function afterPrefix(code2) {\n    const tail = self2.events[self2.events.length - 1];\n    return tail && tail[1].type === \"linePrefix\" && tail[2].sliceSerialize(tail[1], true).length >= 4 ? atBreak(code2) : nok(code2);\n  }\n  function atBreak(code2) {\n    if (code2 === null) {\n      return after(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      return effects.attempt(furtherStart, atBreak, after)(code2);\n    }\n    effects.enter(\"codeFlowValue\");\n    return inside(code2);\n  }\n  function inside(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"codeFlowValue\");\n      return atBreak(code2);\n    }\n    effects.consume(code2);\n    return inside;\n  }\n  function after(code2) {\n    effects.exit(\"codeIndented\");\n    return ok2(code2);\n  }\n}\nfunction tokenizeFurtherStart(effects, ok2, nok) {\n  const self2 = this;\n  return furtherStart2;\n  function furtherStart2(code2) {\n    if (self2.parser.lazy[self2.now().line]) {\n      return nok(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code2);\n      effects.exit(\"lineEnding\");\n      return furtherStart2;\n    }\n    return factorySpace(effects, afterPrefix, \"linePrefix\", 4 + 1)(code2);\n  }\n  function afterPrefix(code2) {\n    const tail = self2.events[self2.events.length - 1];\n    return tail && tail[1].type === \"linePrefix\" && tail[2].sliceSerialize(tail[1], true).length >= 4 ? ok2(code2) : markdownLineEnding(code2) ? furtherStart2(code2) : nok(code2);\n  }\n}\nconst codeText = {\n  name: \"codeText\",\n  previous,\n  resolve: resolveCodeText,\n  tokenize: tokenizeCodeText\n};\nfunction resolveCodeText(events) {\n  let tailExitIndex = events.length - 4;\n  let headEnterIndex = 3;\n  let index2;\n  let enter;\n  if ((events[headEnterIndex][1].type === \"lineEnding\" || events[headEnterIndex][1].type === \"space\") && (events[tailExitIndex][1].type === \"lineEnding\" || events[tailExitIndex][1].type === \"space\")) {\n    index2 = headEnterIndex;\n    while (++index2 < tailExitIndex) {\n      if (events[index2][1].type === \"codeTextData\") {\n        events[headEnterIndex][1].type = \"codeTextPadding\";\n        events[tailExitIndex][1].type = \"codeTextPadding\";\n        headEnterIndex += 2;\n        tailExitIndex -= 2;\n        break;\n      }\n    }\n  }\n  index2 = headEnterIndex - 1;\n  tailExitIndex++;\n  while (++index2 <= tailExitIndex) {\n    if (enter === void 0) {\n      if (index2 !== tailExitIndex && events[index2][1].type !== \"lineEnding\") {\n        enter = index2;\n      }\n    } else if (index2 === tailExitIndex || events[index2][1].type === \"lineEnding\") {\n      events[enter][1].type = \"codeTextData\";\n      if (index2 !== enter + 2) {\n        events[enter][1].end = events[index2 - 1][1].end;\n        events.splice(enter + 2, index2 - enter - 2);\n        tailExitIndex -= index2 - enter - 2;\n        index2 = enter + 2;\n      }\n      enter = void 0;\n    }\n  }\n  return events;\n}\nfunction previous(code2) {\n  return code2 !== 96 || this.events[this.events.length - 1][1].type === \"characterEscape\";\n}\nfunction tokenizeCodeText(effects, ok2, nok) {\n  let sizeOpen = 0;\n  let size;\n  let token;\n  return start;\n  function start(code2) {\n    effects.enter(\"codeText\");\n    effects.enter(\"codeTextSequence\");\n    return sequenceOpen(code2);\n  }\n  function sequenceOpen(code2) {\n    if (code2 === 96) {\n      effects.consume(code2);\n      sizeOpen++;\n      return sequenceOpen;\n    }\n    effects.exit(\"codeTextSequence\");\n    return between(code2);\n  }\n  function between(code2) {\n    if (code2 === null) {\n      return nok(code2);\n    }\n    if (code2 === 32) {\n      effects.enter(\"space\");\n      effects.consume(code2);\n      effects.exit(\"space\");\n      return between;\n    }\n    if (code2 === 96) {\n      token = effects.enter(\"codeTextSequence\");\n      size = 0;\n      return sequenceClose(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code2);\n      effects.exit(\"lineEnding\");\n      return between;\n    }\n    effects.enter(\"codeTextData\");\n    return data(code2);\n  }\n  function data(code2) {\n    if (code2 === null || code2 === 32 || code2 === 96 || markdownLineEnding(code2)) {\n      effects.exit(\"codeTextData\");\n      return between(code2);\n    }\n    effects.consume(code2);\n    return data;\n  }\n  function sequenceClose(code2) {\n    if (code2 === 96) {\n      effects.consume(code2);\n      size++;\n      return sequenceClose;\n    }\n    if (size === sizeOpen) {\n      effects.exit(\"codeTextSequence\");\n      effects.exit(\"codeText\");\n      return ok2(code2);\n    }\n    token.type = \"codeTextData\";\n    return data(code2);\n  }\n}\nclass SpliceBuffer {\n  /**\n   * @param {ReadonlyArray<T> | null | undefined} [initial]\n   *   Initial items (optional).\n   * @returns\n   *   Splice buffer.\n   */\n  constructor(initial) {\n    this.left = initial ? [...initial] : [];\n    this.right = [];\n  }\n  /**\n   * Array access;\n   * does not move the cursor.\n   *\n   * @param {number} index\n   *   Index.\n   * @return {T}\n   *   Item.\n   */\n  get(index2) {\n    if (index2 < 0 || index2 >= this.left.length + this.right.length) {\n      throw new RangeError(\"Cannot access index `\" + index2 + \"` in a splice buffer of size `\" + (this.left.length + this.right.length) + \"`\");\n    }\n    if (index2 < this.left.length) return this.left[index2];\n    return this.right[this.right.length - index2 + this.left.length - 1];\n  }\n  /**\n   * The length of the splice buffer, one greater than the largest index in the\n   * array.\n   */\n  get length() {\n    return this.left.length + this.right.length;\n  }\n  /**\n   * Remove and return `list[0]`;\n   * moves the cursor to `0`.\n   *\n   * @returns {T | undefined}\n   *   Item, optional.\n   */\n  shift() {\n    this.setCursor(0);\n    return this.right.pop();\n  }\n  /**\n   * Slice the buffer to get an array;\n   * does not move the cursor.\n   *\n   * @param {number} start\n   *   Start.\n   * @param {number | null | undefined} [end]\n   *   End (optional).\n   * @returns {Array<T>}\n   *   Array of items.\n   */\n  slice(start, end) {\n    const stop = end === null || end === void 0 ? Number.POSITIVE_INFINITY : end;\n    if (stop < this.left.length) {\n      return this.left.slice(start, stop);\n    }\n    if (start > this.left.length) {\n      return this.right.slice(this.right.length - stop + this.left.length, this.right.length - start + this.left.length).reverse();\n    }\n    return this.left.slice(start).concat(this.right.slice(this.right.length - stop + this.left.length).reverse());\n  }\n  /**\n   * Mimics the behavior of Array.prototype.splice() except for the change of\n   * interface necessary to avoid segfaults when patching in very large arrays.\n   *\n   * This operation moves cursor is moved to `start` and results in the cursor\n   * placed after any inserted items.\n   *\n   * @param {number} start\n   *   Start;\n   *   zero-based index at which to start changing the array;\n   *   negative numbers count backwards from the end of the array and values\n   *   that are out-of bounds are clamped to the appropriate end of the array.\n   * @param {number | null | undefined} [deleteCount=0]\n   *   Delete count (default: `0`);\n   *   maximum number of elements to delete, starting from start.\n   * @param {Array<T> | null | undefined} [items=[]]\n   *   Items to include in place of the deleted items (default: `[]`).\n   * @return {Array<T>}\n   *   Any removed items.\n   */\n  splice(start, deleteCount, items) {\n    const count = deleteCount || 0;\n    this.setCursor(Math.trunc(start));\n    const removed = this.right.splice(this.right.length - count, Number.POSITIVE_INFINITY);\n    if (items) chunkedPush(this.left, items);\n    return removed.reverse();\n  }\n  /**\n   * Remove and return the highest-numbered item in the array, so\n   * `list[list.length - 1]`;\n   * Moves the cursor to `length`.\n   *\n   * @returns {T | undefined}\n   *   Item, optional.\n   */\n  pop() {\n    this.setCursor(Number.POSITIVE_INFINITY);\n    return this.left.pop();\n  }\n  /**\n   * Inserts a single item to the high-numbered side of the array;\n   * moves the cursor to `length`.\n   *\n   * @param {T} item\n   *   Item.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  push(item) {\n    this.setCursor(Number.POSITIVE_INFINITY);\n    this.left.push(item);\n  }\n  /**\n   * Inserts many items to the high-numbered side of the array.\n   * Moves the cursor to `length`.\n   *\n   * @param {Array<T>} items\n   *   Items.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  pushMany(items) {\n    this.setCursor(Number.POSITIVE_INFINITY);\n    chunkedPush(this.left, items);\n  }\n  /**\n   * Inserts a single item to the low-numbered side of the array;\n   * Moves the cursor to `0`.\n   *\n   * @param {T} item\n   *   Item.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  unshift(item) {\n    this.setCursor(0);\n    this.right.push(item);\n  }\n  /**\n   * Inserts many items to the low-numbered side of the array;\n   * moves the cursor to `0`.\n   *\n   * @param {Array<T>} items\n   *   Items.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  unshiftMany(items) {\n    this.setCursor(0);\n    chunkedPush(this.right, items.reverse());\n  }\n  /**\n   * Move the cursor to a specific position in the array. Requires\n   * time proportional to the distance moved.\n   *\n   * If `n < 0`, the cursor will end up at the beginning.\n   * If `n > length`, the cursor will end up at the end.\n   *\n   * @param {number} n\n   *   Position.\n   * @return {undefined}\n   *   Nothing.\n   */\n  setCursor(n2) {\n    if (n2 === this.left.length || n2 > this.left.length && this.right.length === 0 || n2 < 0 && this.left.length === 0) return;\n    if (n2 < this.left.length) {\n      const removed = this.left.splice(n2, Number.POSITIVE_INFINITY);\n      chunkedPush(this.right, removed.reverse());\n    } else {\n      const removed = this.right.splice(this.left.length + this.right.length - n2, Number.POSITIVE_INFINITY);\n      chunkedPush(this.left, removed.reverse());\n    }\n  }\n}\nfunction chunkedPush(list2, right) {\n  let chunkStart = 0;\n  if (right.length < 1e4) {\n    list2.push(...right);\n  } else {\n    while (chunkStart < right.length) {\n      list2.push(...right.slice(chunkStart, chunkStart + 1e4));\n      chunkStart += 1e4;\n    }\n  }\n}\nfunction subtokenize(eventsArray) {\n  const jumps = {};\n  let index2 = -1;\n  let event;\n  let lineIndex;\n  let otherIndex;\n  let otherEvent;\n  let parameters;\n  let subevents;\n  let more;\n  const events = new SpliceBuffer(eventsArray);\n  while (++index2 < events.length) {\n    while (index2 in jumps) {\n      index2 = jumps[index2];\n    }\n    event = events.get(index2);\n    if (index2 && event[1].type === \"chunkFlow\" && events.get(index2 - 1)[1].type === \"listItemPrefix\") {\n      subevents = event[1]._tokenizer.events;\n      otherIndex = 0;\n      if (otherIndex < subevents.length && subevents[otherIndex][1].type === \"lineEndingBlank\") {\n        otherIndex += 2;\n      }\n      if (otherIndex < subevents.length && subevents[otherIndex][1].type === \"content\") {\n        while (++otherIndex < subevents.length) {\n          if (subevents[otherIndex][1].type === \"content\") {\n            break;\n          }\n          if (subevents[otherIndex][1].type === \"chunkText\") {\n            subevents[otherIndex][1]._isInFirstContentOfListItem = true;\n            otherIndex++;\n          }\n        }\n      }\n    }\n    if (event[0] === \"enter\") {\n      if (event[1].contentType) {\n        Object.assign(jumps, subcontent(events, index2));\n        index2 = jumps[index2];\n        more = true;\n      }\n    } else if (event[1]._container) {\n      otherIndex = index2;\n      lineIndex = void 0;\n      while (otherIndex--) {\n        otherEvent = events.get(otherIndex);\n        if (otherEvent[1].type === \"lineEnding\" || otherEvent[1].type === \"lineEndingBlank\") {\n          if (otherEvent[0] === \"enter\") {\n            if (lineIndex) {\n              events.get(lineIndex)[1].type = \"lineEndingBlank\";\n            }\n            otherEvent[1].type = \"lineEnding\";\n            lineIndex = otherIndex;\n          }\n        } else if (otherEvent[1].type === \"linePrefix\" || otherEvent[1].type === \"listItemIndent\") ;\n        else {\n          break;\n        }\n      }\n      if (lineIndex) {\n        event[1].end = {\n          ...events.get(lineIndex)[1].start\n        };\n        parameters = events.slice(lineIndex, index2);\n        parameters.unshift(event);\n        events.splice(lineIndex, index2 - lineIndex + 1, parameters);\n      }\n    }\n  }\n  splice(eventsArray, 0, Number.POSITIVE_INFINITY, events.slice(0));\n  return !more;\n}\nfunction subcontent(events, eventIndex) {\n  const token = events.get(eventIndex)[1];\n  const context = events.get(eventIndex)[2];\n  let startPosition = eventIndex - 1;\n  const startPositions = [];\n  let tokenizer = token._tokenizer;\n  if (!tokenizer) {\n    tokenizer = context.parser[token.contentType](token.start);\n    if (token._contentTypeTextTrailing) {\n      tokenizer._contentTypeTextTrailing = true;\n    }\n  }\n  const childEvents = tokenizer.events;\n  const jumps = [];\n  const gaps = {};\n  let stream;\n  let previous2;\n  let index2 = -1;\n  let current = token;\n  let adjust = 0;\n  let start = 0;\n  const breaks = [start];\n  while (current) {\n    while (events.get(++startPosition)[1] !== current) {\n    }\n    startPositions.push(startPosition);\n    if (!current._tokenizer) {\n      stream = context.sliceStream(current);\n      if (!current.next) {\n        stream.push(null);\n      }\n      if (previous2) {\n        tokenizer.defineSkip(current.start);\n      }\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = true;\n      }\n      tokenizer.write(stream);\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = void 0;\n      }\n    }\n    previous2 = current;\n    current = current.next;\n  }\n  current = token;\n  while (++index2 < childEvents.length) {\n    if (\n      // Find a void token that includes a break.\n      childEvents[index2][0] === \"exit\" && childEvents[index2 - 1][0] === \"enter\" && childEvents[index2][1].type === childEvents[index2 - 1][1].type && childEvents[index2][1].start.line !== childEvents[index2][1].end.line\n    ) {\n      start = index2 + 1;\n      breaks.push(start);\n      current._tokenizer = void 0;\n      current.previous = void 0;\n      current = current.next;\n    }\n  }\n  tokenizer.events = [];\n  if (current) {\n    current._tokenizer = void 0;\n    current.previous = void 0;\n  } else {\n    breaks.pop();\n  }\n  index2 = breaks.length;\n  while (index2--) {\n    const slice = childEvents.slice(breaks[index2], breaks[index2 + 1]);\n    const start2 = startPositions.pop();\n    jumps.push([start2, start2 + slice.length - 1]);\n    events.splice(start2, 2, slice);\n  }\n  jumps.reverse();\n  index2 = -1;\n  while (++index2 < jumps.length) {\n    gaps[adjust + jumps[index2][0]] = adjust + jumps[index2][1];\n    adjust += jumps[index2][1] - jumps[index2][0] - 1;\n  }\n  return gaps;\n}\nconst content$1 = {\n  resolve: resolveContent,\n  tokenize: tokenizeContent\n};\nconst continuationConstruct = {\n  partial: true,\n  tokenize: tokenizeContinuation\n};\nfunction resolveContent(events) {\n  subtokenize(events);\n  return events;\n}\nfunction tokenizeContent(effects, ok2) {\n  let previous2;\n  return chunkStart;\n  function chunkStart(code2) {\n    effects.enter(\"content\");\n    previous2 = effects.enter(\"chunkContent\", {\n      contentType: \"content\"\n    });\n    return chunkInside(code2);\n  }\n  function chunkInside(code2) {\n    if (code2 === null) {\n      return contentEnd(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      return effects.check(continuationConstruct, contentContinue, contentEnd)(code2);\n    }\n    effects.consume(code2);\n    return chunkInside;\n  }\n  function contentEnd(code2) {\n    effects.exit(\"chunkContent\");\n    effects.exit(\"content\");\n    return ok2(code2);\n  }\n  function contentContinue(code2) {\n    effects.consume(code2);\n    effects.exit(\"chunkContent\");\n    previous2.next = effects.enter(\"chunkContent\", {\n      contentType: \"content\",\n      previous: previous2\n    });\n    previous2 = previous2.next;\n    return chunkInside;\n  }\n}\nfunction tokenizeContinuation(effects, ok2, nok) {\n  const self2 = this;\n  return startLookahead;\n  function startLookahead(code2) {\n    effects.exit(\"chunkContent\");\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return factorySpace(effects, prefixed, \"linePrefix\");\n  }\n  function prefixed(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      return nok(code2);\n    }\n    const tail = self2.events[self2.events.length - 1];\n    if (!self2.parser.constructs.disable.null.includes(\"codeIndented\") && tail && tail[1].type === \"linePrefix\" && tail[2].sliceSerialize(tail[1], true).length >= 4) {\n      return ok2(code2);\n    }\n    return effects.interrupt(self2.parser.constructs.flow, nok, ok2)(code2);\n  }\n}\nfunction factoryDestination(effects, ok2, nok, type, literalType, literalMarkerType, rawType, stringType, max) {\n  const limit = max || Number.POSITIVE_INFINITY;\n  let balance = 0;\n  return start;\n  function start(code2) {\n    if (code2 === 60) {\n      effects.enter(type);\n      effects.enter(literalType);\n      effects.enter(literalMarkerType);\n      effects.consume(code2);\n      effects.exit(literalMarkerType);\n      return enclosedBefore;\n    }\n    if (code2 === null || code2 === 32 || code2 === 41 || asciiControl(code2)) {\n      return nok(code2);\n    }\n    effects.enter(type);\n    effects.enter(rawType);\n    effects.enter(stringType);\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return raw(code2);\n  }\n  function enclosedBefore(code2) {\n    if (code2 === 62) {\n      effects.enter(literalMarkerType);\n      effects.consume(code2);\n      effects.exit(literalMarkerType);\n      effects.exit(literalType);\n      effects.exit(type);\n      return ok2;\n    }\n    effects.enter(stringType);\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return enclosed(code2);\n  }\n  function enclosed(code2) {\n    if (code2 === 62) {\n      effects.exit(\"chunkString\");\n      effects.exit(stringType);\n      return enclosedBefore(code2);\n    }\n    if (code2 === null || code2 === 60 || markdownLineEnding(code2)) {\n      return nok(code2);\n    }\n    effects.consume(code2);\n    return code2 === 92 ? enclosedEscape : enclosed;\n  }\n  function enclosedEscape(code2) {\n    if (code2 === 60 || code2 === 62 || code2 === 92) {\n      effects.consume(code2);\n      return enclosed;\n    }\n    return enclosed(code2);\n  }\n  function raw(code2) {\n    if (!balance && (code2 === null || code2 === 41 || markdownLineEndingOrSpace(code2))) {\n      effects.exit(\"chunkString\");\n      effects.exit(stringType);\n      effects.exit(rawType);\n      effects.exit(type);\n      return ok2(code2);\n    }\n    if (balance < limit && code2 === 40) {\n      effects.consume(code2);\n      balance++;\n      return raw;\n    }\n    if (code2 === 41) {\n      effects.consume(code2);\n      balance--;\n      return raw;\n    }\n    if (code2 === null || code2 === 32 || code2 === 40 || asciiControl(code2)) {\n      return nok(code2);\n    }\n    effects.consume(code2);\n    return code2 === 92 ? rawEscape : raw;\n  }\n  function rawEscape(code2) {\n    if (code2 === 40 || code2 === 41 || code2 === 92) {\n      effects.consume(code2);\n      return raw;\n    }\n    return raw(code2);\n  }\n}\nfunction factoryLabel(effects, ok2, nok, type, markerType, stringType) {\n  const self2 = this;\n  let size = 0;\n  let seen;\n  return start;\n  function start(code2) {\n    effects.enter(type);\n    effects.enter(markerType);\n    effects.consume(code2);\n    effects.exit(markerType);\n    effects.enter(stringType);\n    return atBreak;\n  }\n  function atBreak(code2) {\n    if (size > 999 || code2 === null || code2 === 91 || code2 === 93 && !seen || // To do: remove in the future once weve switched from\n    // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,\n    // which doesnt need this.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    code2 === 94 && !size && \"_hiddenFootnoteSupport\" in self2.parser.constructs) {\n      return nok(code2);\n    }\n    if (code2 === 93) {\n      effects.exit(stringType);\n      effects.enter(markerType);\n      effects.consume(code2);\n      effects.exit(markerType);\n      effects.exit(type);\n      return ok2;\n    }\n    if (markdownLineEnding(code2)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code2);\n      effects.exit(\"lineEnding\");\n      return atBreak;\n    }\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return labelInside(code2);\n  }\n  function labelInside(code2) {\n    if (code2 === null || code2 === 91 || code2 === 93 || markdownLineEnding(code2) || size++ > 999) {\n      effects.exit(\"chunkString\");\n      return atBreak(code2);\n    }\n    effects.consume(code2);\n    if (!seen) seen = !markdownSpace(code2);\n    return code2 === 92 ? labelEscape : labelInside;\n  }\n  function labelEscape(code2) {\n    if (code2 === 91 || code2 === 92 || code2 === 93) {\n      effects.consume(code2);\n      size++;\n      return labelInside;\n    }\n    return labelInside(code2);\n  }\n}\nfunction factoryTitle(effects, ok2, nok, type, markerType, stringType) {\n  let marker;\n  return start;\n  function start(code2) {\n    if (code2 === 34 || code2 === 39 || code2 === 40) {\n      effects.enter(type);\n      effects.enter(markerType);\n      effects.consume(code2);\n      effects.exit(markerType);\n      marker = code2 === 40 ? 41 : code2;\n      return begin;\n    }\n    return nok(code2);\n  }\n  function begin(code2) {\n    if (code2 === marker) {\n      effects.enter(markerType);\n      effects.consume(code2);\n      effects.exit(markerType);\n      effects.exit(type);\n      return ok2;\n    }\n    effects.enter(stringType);\n    return atBreak(code2);\n  }\n  function atBreak(code2) {\n    if (code2 === marker) {\n      effects.exit(stringType);\n      return begin(marker);\n    }\n    if (code2 === null) {\n      return nok(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code2);\n      effects.exit(\"lineEnding\");\n      return factorySpace(effects, atBreak, \"linePrefix\");\n    }\n    effects.enter(\"chunkString\", {\n      contentType: \"string\"\n    });\n    return inside(code2);\n  }\n  function inside(code2) {\n    if (code2 === marker || code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"chunkString\");\n      return atBreak(code2);\n    }\n    effects.consume(code2);\n    return code2 === 92 ? escape : inside;\n  }\n  function escape(code2) {\n    if (code2 === marker || code2 === 92) {\n      effects.consume(code2);\n      return inside;\n    }\n    return inside(code2);\n  }\n}\nfunction factoryWhitespace(effects, ok2) {\n  let seen;\n  return start;\n  function start(code2) {\n    if (markdownLineEnding(code2)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code2);\n      effects.exit(\"lineEnding\");\n      seen = true;\n      return start;\n    }\n    if (markdownSpace(code2)) {\n      return factorySpace(effects, start, seen ? \"linePrefix\" : \"lineSuffix\")(code2);\n    }\n    return ok2(code2);\n  }\n}\nconst definition = {\n  name: \"definition\",\n  tokenize: tokenizeDefinition\n};\nconst titleBefore = {\n  partial: true,\n  tokenize: tokenizeTitleBefore\n};\nfunction tokenizeDefinition(effects, ok2, nok) {\n  const self2 = this;\n  let identifier;\n  return start;\n  function start(code2) {\n    effects.enter(\"definition\");\n    return before(code2);\n  }\n  function before(code2) {\n    return factoryLabel.call(\n      self2,\n      effects,\n      labelAfter,\n      // Note: we dont need to reset the way `markdown-rs` does.\n      nok,\n      \"definitionLabel\",\n      \"definitionLabelMarker\",\n      \"definitionLabelString\"\n    )(code2);\n  }\n  function labelAfter(code2) {\n    identifier = normalizeIdentifier(self2.sliceSerialize(self2.events[self2.events.length - 1][1]).slice(1, -1));\n    if (code2 === 58) {\n      effects.enter(\"definitionMarker\");\n      effects.consume(code2);\n      effects.exit(\"definitionMarker\");\n      return markerAfter;\n    }\n    return nok(code2);\n  }\n  function markerAfter(code2) {\n    return markdownLineEndingOrSpace(code2) ? factoryWhitespace(effects, destinationBefore)(code2) : destinationBefore(code2);\n  }\n  function destinationBefore(code2) {\n    return factoryDestination(\n      effects,\n      destinationAfter,\n      // Note: we dont need to reset the way `markdown-rs` does.\n      nok,\n      \"definitionDestination\",\n      \"definitionDestinationLiteral\",\n      \"definitionDestinationLiteralMarker\",\n      \"definitionDestinationRaw\",\n      \"definitionDestinationString\"\n    )(code2);\n  }\n  function destinationAfter(code2) {\n    return effects.attempt(titleBefore, after, after)(code2);\n  }\n  function after(code2) {\n    return markdownSpace(code2) ? factorySpace(effects, afterWhitespace, \"whitespace\")(code2) : afterWhitespace(code2);\n  }\n  function afterWhitespace(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"definition\");\n      self2.parser.defined.push(identifier);\n      return ok2(code2);\n    }\n    return nok(code2);\n  }\n}\nfunction tokenizeTitleBefore(effects, ok2, nok) {\n  return titleBefore2;\n  function titleBefore2(code2) {\n    return markdownLineEndingOrSpace(code2) ? factoryWhitespace(effects, beforeMarker)(code2) : nok(code2);\n  }\n  function beforeMarker(code2) {\n    return factoryTitle(effects, titleAfter, nok, \"definitionTitle\", \"definitionTitleMarker\", \"definitionTitleString\")(code2);\n  }\n  function titleAfter(code2) {\n    return markdownSpace(code2) ? factorySpace(effects, titleAfterOptionalWhitespace, \"whitespace\")(code2) : titleAfterOptionalWhitespace(code2);\n  }\n  function titleAfterOptionalWhitespace(code2) {\n    return code2 === null || markdownLineEnding(code2) ? ok2(code2) : nok(code2);\n  }\n}\nconst hardBreakEscape = {\n  name: \"hardBreakEscape\",\n  tokenize: tokenizeHardBreakEscape\n};\nfunction tokenizeHardBreakEscape(effects, ok2, nok) {\n  return start;\n  function start(code2) {\n    effects.enter(\"hardBreakEscape\");\n    effects.consume(code2);\n    return after;\n  }\n  function after(code2) {\n    if (markdownLineEnding(code2)) {\n      effects.exit(\"hardBreakEscape\");\n      return ok2(code2);\n    }\n    return nok(code2);\n  }\n}\nconst headingAtx = {\n  name: \"headingAtx\",\n  resolve: resolveHeadingAtx,\n  tokenize: tokenizeHeadingAtx\n};\nfunction resolveHeadingAtx(events, context) {\n  let contentEnd = events.length - 2;\n  let contentStart = 3;\n  let content2;\n  let text2;\n  if (events[contentStart][1].type === \"whitespace\") {\n    contentStart += 2;\n  }\n  if (contentEnd - 2 > contentStart && events[contentEnd][1].type === \"whitespace\") {\n    contentEnd -= 2;\n  }\n  if (events[contentEnd][1].type === \"atxHeadingSequence\" && (contentStart === contentEnd - 1 || contentEnd - 4 > contentStart && events[contentEnd - 2][1].type === \"whitespace\")) {\n    contentEnd -= contentStart + 1 === contentEnd ? 2 : 4;\n  }\n  if (contentEnd > contentStart) {\n    content2 = {\n      type: \"atxHeadingText\",\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end\n    };\n    text2 = {\n      type: \"chunkText\",\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end,\n      contentType: \"text\"\n    };\n    splice(events, contentStart, contentEnd - contentStart + 1, [[\"enter\", content2, context], [\"enter\", text2, context], [\"exit\", text2, context], [\"exit\", content2, context]]);\n  }\n  return events;\n}\nfunction tokenizeHeadingAtx(effects, ok2, nok) {\n  let size = 0;\n  return start;\n  function start(code2) {\n    effects.enter(\"atxHeading\");\n    return before(code2);\n  }\n  function before(code2) {\n    effects.enter(\"atxHeadingSequence\");\n    return sequenceOpen(code2);\n  }\n  function sequenceOpen(code2) {\n    if (code2 === 35 && size++ < 6) {\n      effects.consume(code2);\n      return sequenceOpen;\n    }\n    if (code2 === null || markdownLineEndingOrSpace(code2)) {\n      effects.exit(\"atxHeadingSequence\");\n      return atBreak(code2);\n    }\n    return nok(code2);\n  }\n  function atBreak(code2) {\n    if (code2 === 35) {\n      effects.enter(\"atxHeadingSequence\");\n      return sequenceFurther(code2);\n    }\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"atxHeading\");\n      return ok2(code2);\n    }\n    if (markdownSpace(code2)) {\n      return factorySpace(effects, atBreak, \"whitespace\")(code2);\n    }\n    effects.enter(\"atxHeadingText\");\n    return data(code2);\n  }\n  function sequenceFurther(code2) {\n    if (code2 === 35) {\n      effects.consume(code2);\n      return sequenceFurther;\n    }\n    effects.exit(\"atxHeadingSequence\");\n    return atBreak(code2);\n  }\n  function data(code2) {\n    if (code2 === null || code2 === 35 || markdownLineEndingOrSpace(code2)) {\n      effects.exit(\"atxHeadingText\");\n      return atBreak(code2);\n    }\n    effects.consume(code2);\n    return data;\n  }\n}\nconst htmlBlockNames = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"base\",\n  \"basefont\",\n  \"blockquote\",\n  \"body\",\n  \"caption\",\n  \"center\",\n  \"col\",\n  \"colgroup\",\n  \"dd\",\n  \"details\",\n  \"dialog\",\n  \"dir\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"frame\",\n  \"frameset\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"head\",\n  \"header\",\n  \"hr\",\n  \"html\",\n  \"iframe\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"menu\",\n  \"menuitem\",\n  \"nav\",\n  \"noframes\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"p\",\n  \"param\",\n  \"search\",\n  \"section\",\n  \"summary\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"ul\"\n];\nconst htmlRawNames = [\"pre\", \"script\", \"style\", \"textarea\"];\nconst htmlFlow = {\n  concrete: true,\n  name: \"htmlFlow\",\n  resolveTo: resolveToHtmlFlow,\n  tokenize: tokenizeHtmlFlow\n};\nconst blankLineBefore = {\n  partial: true,\n  tokenize: tokenizeBlankLineBefore\n};\nconst nonLazyContinuationStart = {\n  partial: true,\n  tokenize: tokenizeNonLazyContinuationStart\n};\nfunction resolveToHtmlFlow(events) {\n  let index2 = events.length;\n  while (index2--) {\n    if (events[index2][0] === \"enter\" && events[index2][1].type === \"htmlFlow\") {\n      break;\n    }\n  }\n  if (index2 > 1 && events[index2 - 2][1].type === \"linePrefix\") {\n    events[index2][1].start = events[index2 - 2][1].start;\n    events[index2 + 1][1].start = events[index2 - 2][1].start;\n    events.splice(index2 - 2, 2);\n  }\n  return events;\n}\nfunction tokenizeHtmlFlow(effects, ok2, nok) {\n  const self2 = this;\n  let marker;\n  let closingTag;\n  let buffer;\n  let index2;\n  let markerB;\n  return start;\n  function start(code2) {\n    return before(code2);\n  }\n  function before(code2) {\n    effects.enter(\"htmlFlow\");\n    effects.enter(\"htmlFlowData\");\n    effects.consume(code2);\n    return open;\n  }\n  function open(code2) {\n    if (code2 === 33) {\n      effects.consume(code2);\n      return declarationOpen;\n    }\n    if (code2 === 47) {\n      effects.consume(code2);\n      closingTag = true;\n      return tagCloseStart;\n    }\n    if (code2 === 63) {\n      effects.consume(code2);\n      marker = 3;\n      return self2.interrupt ? ok2 : continuationDeclarationInside;\n    }\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      buffer = String.fromCharCode(code2);\n      return tagName;\n    }\n    return nok(code2);\n  }\n  function declarationOpen(code2) {\n    if (code2 === 45) {\n      effects.consume(code2);\n      marker = 2;\n      return commentOpenInside;\n    }\n    if (code2 === 91) {\n      effects.consume(code2);\n      marker = 5;\n      index2 = 0;\n      return cdataOpenInside;\n    }\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      marker = 4;\n      return self2.interrupt ? ok2 : continuationDeclarationInside;\n    }\n    return nok(code2);\n  }\n  function commentOpenInside(code2) {\n    if (code2 === 45) {\n      effects.consume(code2);\n      return self2.interrupt ? ok2 : continuationDeclarationInside;\n    }\n    return nok(code2);\n  }\n  function cdataOpenInside(code2) {\n    const value = \"CDATA[\";\n    if (code2 === value.charCodeAt(index2++)) {\n      effects.consume(code2);\n      if (index2 === value.length) {\n        return self2.interrupt ? ok2 : continuation;\n      }\n      return cdataOpenInside;\n    }\n    return nok(code2);\n  }\n  function tagCloseStart(code2) {\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      buffer = String.fromCharCode(code2);\n      return tagName;\n    }\n    return nok(code2);\n  }\n  function tagName(code2) {\n    if (code2 === null || code2 === 47 || code2 === 62 || markdownLineEndingOrSpace(code2)) {\n      const slash = code2 === 47;\n      const name2 = buffer.toLowerCase();\n      if (!slash && !closingTag && htmlRawNames.includes(name2)) {\n        marker = 1;\n        return self2.interrupt ? ok2(code2) : continuation(code2);\n      }\n      if (htmlBlockNames.includes(buffer.toLowerCase())) {\n        marker = 6;\n        if (slash) {\n          effects.consume(code2);\n          return basicSelfClosing;\n        }\n        return self2.interrupt ? ok2(code2) : continuation(code2);\n      }\n      marker = 7;\n      return self2.interrupt && !self2.parser.lazy[self2.now().line] ? nok(code2) : closingTag ? completeClosingTagAfter(code2) : completeAttributeNameBefore(code2);\n    }\n    if (code2 === 45 || asciiAlphanumeric(code2)) {\n      effects.consume(code2);\n      buffer += String.fromCharCode(code2);\n      return tagName;\n    }\n    return nok(code2);\n  }\n  function basicSelfClosing(code2) {\n    if (code2 === 62) {\n      effects.consume(code2);\n      return self2.interrupt ? ok2 : continuation;\n    }\n    return nok(code2);\n  }\n  function completeClosingTagAfter(code2) {\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return completeClosingTagAfter;\n    }\n    return completeEnd(code2);\n  }\n  function completeAttributeNameBefore(code2) {\n    if (code2 === 47) {\n      effects.consume(code2);\n      return completeEnd;\n    }\n    if (code2 === 58 || code2 === 95 || asciiAlpha(code2)) {\n      effects.consume(code2);\n      return completeAttributeName;\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return completeAttributeNameBefore;\n    }\n    return completeEnd(code2);\n  }\n  function completeAttributeName(code2) {\n    if (code2 === 45 || code2 === 46 || code2 === 58 || code2 === 95 || asciiAlphanumeric(code2)) {\n      effects.consume(code2);\n      return completeAttributeName;\n    }\n    return completeAttributeNameAfter(code2);\n  }\n  function completeAttributeNameAfter(code2) {\n    if (code2 === 61) {\n      effects.consume(code2);\n      return completeAttributeValueBefore;\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return completeAttributeNameAfter;\n    }\n    return completeAttributeNameBefore(code2);\n  }\n  function completeAttributeValueBefore(code2) {\n    if (code2 === null || code2 === 60 || code2 === 61 || code2 === 62 || code2 === 96) {\n      return nok(code2);\n    }\n    if (code2 === 34 || code2 === 39) {\n      effects.consume(code2);\n      markerB = code2;\n      return completeAttributeValueQuoted;\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return completeAttributeValueBefore;\n    }\n    return completeAttributeValueUnquoted(code2);\n  }\n  function completeAttributeValueQuoted(code2) {\n    if (code2 === markerB) {\n      effects.consume(code2);\n      markerB = null;\n      return completeAttributeValueQuotedAfter;\n    }\n    if (code2 === null || markdownLineEnding(code2)) {\n      return nok(code2);\n    }\n    effects.consume(code2);\n    return completeAttributeValueQuoted;\n  }\n  function completeAttributeValueUnquoted(code2) {\n    if (code2 === null || code2 === 34 || code2 === 39 || code2 === 47 || code2 === 60 || code2 === 61 || code2 === 62 || code2 === 96 || markdownLineEndingOrSpace(code2)) {\n      return completeAttributeNameAfter(code2);\n    }\n    effects.consume(code2);\n    return completeAttributeValueUnquoted;\n  }\n  function completeAttributeValueQuotedAfter(code2) {\n    if (code2 === 47 || code2 === 62 || markdownSpace(code2)) {\n      return completeAttributeNameBefore(code2);\n    }\n    return nok(code2);\n  }\n  function completeEnd(code2) {\n    if (code2 === 62) {\n      effects.consume(code2);\n      return completeAfter;\n    }\n    return nok(code2);\n  }\n  function completeAfter(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      return continuation(code2);\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return completeAfter;\n    }\n    return nok(code2);\n  }\n  function continuation(code2) {\n    if (code2 === 45 && marker === 2) {\n      effects.consume(code2);\n      return continuationCommentInside;\n    }\n    if (code2 === 60 && marker === 1) {\n      effects.consume(code2);\n      return continuationRawTagOpen;\n    }\n    if (code2 === 62 && marker === 4) {\n      effects.consume(code2);\n      return continuationClose;\n    }\n    if (code2 === 63 && marker === 3) {\n      effects.consume(code2);\n      return continuationDeclarationInside;\n    }\n    if (code2 === 93 && marker === 5) {\n      effects.consume(code2);\n      return continuationCdataInside;\n    }\n    if (markdownLineEnding(code2) && (marker === 6 || marker === 7)) {\n      effects.exit(\"htmlFlowData\");\n      return effects.check(blankLineBefore, continuationAfter, continuationStart)(code2);\n    }\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"htmlFlowData\");\n      return continuationStart(code2);\n    }\n    effects.consume(code2);\n    return continuation;\n  }\n  function continuationStart(code2) {\n    return effects.check(nonLazyContinuationStart, continuationStartNonLazy, continuationAfter)(code2);\n  }\n  function continuationStartNonLazy(code2) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return continuationBefore;\n  }\n  function continuationBefore(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      return continuationStart(code2);\n    }\n    effects.enter(\"htmlFlowData\");\n    return continuation(code2);\n  }\n  function continuationCommentInside(code2) {\n    if (code2 === 45) {\n      effects.consume(code2);\n      return continuationDeclarationInside;\n    }\n    return continuation(code2);\n  }\n  function continuationRawTagOpen(code2) {\n    if (code2 === 47) {\n      effects.consume(code2);\n      buffer = \"\";\n      return continuationRawEndTag;\n    }\n    return continuation(code2);\n  }\n  function continuationRawEndTag(code2) {\n    if (code2 === 62) {\n      const name2 = buffer.toLowerCase();\n      if (htmlRawNames.includes(name2)) {\n        effects.consume(code2);\n        return continuationClose;\n      }\n      return continuation(code2);\n    }\n    if (asciiAlpha(code2) && buffer.length < 8) {\n      effects.consume(code2);\n      buffer += String.fromCharCode(code2);\n      return continuationRawEndTag;\n    }\n    return continuation(code2);\n  }\n  function continuationCdataInside(code2) {\n    if (code2 === 93) {\n      effects.consume(code2);\n      return continuationDeclarationInside;\n    }\n    return continuation(code2);\n  }\n  function continuationDeclarationInside(code2) {\n    if (code2 === 62) {\n      effects.consume(code2);\n      return continuationClose;\n    }\n    if (code2 === 45 && marker === 2) {\n      effects.consume(code2);\n      return continuationDeclarationInside;\n    }\n    return continuation(code2);\n  }\n  function continuationClose(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"htmlFlowData\");\n      return continuationAfter(code2);\n    }\n    effects.consume(code2);\n    return continuationClose;\n  }\n  function continuationAfter(code2) {\n    effects.exit(\"htmlFlow\");\n    return ok2(code2);\n  }\n}\nfunction tokenizeNonLazyContinuationStart(effects, ok2, nok) {\n  const self2 = this;\n  return start;\n  function start(code2) {\n    if (markdownLineEnding(code2)) {\n      effects.enter(\"lineEnding\");\n      effects.consume(code2);\n      effects.exit(\"lineEnding\");\n      return after;\n    }\n    return nok(code2);\n  }\n  function after(code2) {\n    return self2.parser.lazy[self2.now().line] ? nok(code2) : ok2(code2);\n  }\n}\nfunction tokenizeBlankLineBefore(effects, ok2, nok) {\n  return start;\n  function start(code2) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return effects.attempt(blankLine, ok2, nok);\n  }\n}\nconst htmlText = {\n  name: \"htmlText\",\n  tokenize: tokenizeHtmlText\n};\nfunction tokenizeHtmlText(effects, ok2, nok) {\n  const self2 = this;\n  let marker;\n  let index2;\n  let returnState;\n  return start;\n  function start(code2) {\n    effects.enter(\"htmlText\");\n    effects.enter(\"htmlTextData\");\n    effects.consume(code2);\n    return open;\n  }\n  function open(code2) {\n    if (code2 === 33) {\n      effects.consume(code2);\n      return declarationOpen;\n    }\n    if (code2 === 47) {\n      effects.consume(code2);\n      return tagCloseStart;\n    }\n    if (code2 === 63) {\n      effects.consume(code2);\n      return instruction;\n    }\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      return tagOpen;\n    }\n    return nok(code2);\n  }\n  function declarationOpen(code2) {\n    if (code2 === 45) {\n      effects.consume(code2);\n      return commentOpenInside;\n    }\n    if (code2 === 91) {\n      effects.consume(code2);\n      index2 = 0;\n      return cdataOpenInside;\n    }\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      return declaration;\n    }\n    return nok(code2);\n  }\n  function commentOpenInside(code2) {\n    if (code2 === 45) {\n      effects.consume(code2);\n      return commentEnd;\n    }\n    return nok(code2);\n  }\n  function comment(code2) {\n    if (code2 === null) {\n      return nok(code2);\n    }\n    if (code2 === 45) {\n      effects.consume(code2);\n      return commentClose;\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = comment;\n      return lineEndingBefore(code2);\n    }\n    effects.consume(code2);\n    return comment;\n  }\n  function commentClose(code2) {\n    if (code2 === 45) {\n      effects.consume(code2);\n      return commentEnd;\n    }\n    return comment(code2);\n  }\n  function commentEnd(code2) {\n    return code2 === 62 ? end(code2) : code2 === 45 ? commentClose(code2) : comment(code2);\n  }\n  function cdataOpenInside(code2) {\n    const value = \"CDATA[\";\n    if (code2 === value.charCodeAt(index2++)) {\n      effects.consume(code2);\n      return index2 === value.length ? cdata : cdataOpenInside;\n    }\n    return nok(code2);\n  }\n  function cdata(code2) {\n    if (code2 === null) {\n      return nok(code2);\n    }\n    if (code2 === 93) {\n      effects.consume(code2);\n      return cdataClose;\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = cdata;\n      return lineEndingBefore(code2);\n    }\n    effects.consume(code2);\n    return cdata;\n  }\n  function cdataClose(code2) {\n    if (code2 === 93) {\n      effects.consume(code2);\n      return cdataEnd;\n    }\n    return cdata(code2);\n  }\n  function cdataEnd(code2) {\n    if (code2 === 62) {\n      return end(code2);\n    }\n    if (code2 === 93) {\n      effects.consume(code2);\n      return cdataEnd;\n    }\n    return cdata(code2);\n  }\n  function declaration(code2) {\n    if (code2 === null || code2 === 62) {\n      return end(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = declaration;\n      return lineEndingBefore(code2);\n    }\n    effects.consume(code2);\n    return declaration;\n  }\n  function instruction(code2) {\n    if (code2 === null) {\n      return nok(code2);\n    }\n    if (code2 === 63) {\n      effects.consume(code2);\n      return instructionClose;\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = instruction;\n      return lineEndingBefore(code2);\n    }\n    effects.consume(code2);\n    return instruction;\n  }\n  function instructionClose(code2) {\n    return code2 === 62 ? end(code2) : instruction(code2);\n  }\n  function tagCloseStart(code2) {\n    if (asciiAlpha(code2)) {\n      effects.consume(code2);\n      return tagClose;\n    }\n    return nok(code2);\n  }\n  function tagClose(code2) {\n    if (code2 === 45 || asciiAlphanumeric(code2)) {\n      effects.consume(code2);\n      return tagClose;\n    }\n    return tagCloseBetween(code2);\n  }\n  function tagCloseBetween(code2) {\n    if (markdownLineEnding(code2)) {\n      returnState = tagCloseBetween;\n      return lineEndingBefore(code2);\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return tagCloseBetween;\n    }\n    return end(code2);\n  }\n  function tagOpen(code2) {\n    if (code2 === 45 || asciiAlphanumeric(code2)) {\n      effects.consume(code2);\n      return tagOpen;\n    }\n    if (code2 === 47 || code2 === 62 || markdownLineEndingOrSpace(code2)) {\n      return tagOpenBetween(code2);\n    }\n    return nok(code2);\n  }\n  function tagOpenBetween(code2) {\n    if (code2 === 47) {\n      effects.consume(code2);\n      return end;\n    }\n    if (code2 === 58 || code2 === 95 || asciiAlpha(code2)) {\n      effects.consume(code2);\n      return tagOpenAttributeName;\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = tagOpenBetween;\n      return lineEndingBefore(code2);\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return tagOpenBetween;\n    }\n    return end(code2);\n  }\n  function tagOpenAttributeName(code2) {\n    if (code2 === 45 || code2 === 46 || code2 === 58 || code2 === 95 || asciiAlphanumeric(code2)) {\n      effects.consume(code2);\n      return tagOpenAttributeName;\n    }\n    return tagOpenAttributeNameAfter(code2);\n  }\n  function tagOpenAttributeNameAfter(code2) {\n    if (code2 === 61) {\n      effects.consume(code2);\n      return tagOpenAttributeValueBefore;\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = tagOpenAttributeNameAfter;\n      return lineEndingBefore(code2);\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return tagOpenAttributeNameAfter;\n    }\n    return tagOpenBetween(code2);\n  }\n  function tagOpenAttributeValueBefore(code2) {\n    if (code2 === null || code2 === 60 || code2 === 61 || code2 === 62 || code2 === 96) {\n      return nok(code2);\n    }\n    if (code2 === 34 || code2 === 39) {\n      effects.consume(code2);\n      marker = code2;\n      return tagOpenAttributeValueQuoted;\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = tagOpenAttributeValueBefore;\n      return lineEndingBefore(code2);\n    }\n    if (markdownSpace(code2)) {\n      effects.consume(code2);\n      return tagOpenAttributeValueBefore;\n    }\n    effects.consume(code2);\n    return tagOpenAttributeValueUnquoted;\n  }\n  function tagOpenAttributeValueQuoted(code2) {\n    if (code2 === marker) {\n      effects.consume(code2);\n      marker = void 0;\n      return tagOpenAttributeValueQuotedAfter;\n    }\n    if (code2 === null) {\n      return nok(code2);\n    }\n    if (markdownLineEnding(code2)) {\n      returnState = tagOpenAttributeValueQuoted;\n      return lineEndingBefore(code2);\n    }\n    effects.consume(code2);\n    return tagOpenAttributeValueQuoted;\n  }\n  function tagOpenAttributeValueUnquoted(code2) {\n    if (code2 === null || code2 === 34 || code2 === 39 || code2 === 60 || code2 === 61 || code2 === 96) {\n      return nok(code2);\n    }\n    if (code2 === 47 || code2 === 62 || markdownLineEndingOrSpace(code2)) {\n      return tagOpenBetween(code2);\n    }\n    effects.consume(code2);\n    return tagOpenAttributeValueUnquoted;\n  }\n  function tagOpenAttributeValueQuotedAfter(code2) {\n    if (code2 === 47 || code2 === 62 || markdownLineEndingOrSpace(code2)) {\n      return tagOpenBetween(code2);\n    }\n    return nok(code2);\n  }\n  function end(code2) {\n    if (code2 === 62) {\n      effects.consume(code2);\n      effects.exit(\"htmlTextData\");\n      effects.exit(\"htmlText\");\n      return ok2;\n    }\n    return nok(code2);\n  }\n  function lineEndingBefore(code2) {\n    effects.exit(\"htmlTextData\");\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return lineEndingAfter;\n  }\n  function lineEndingAfter(code2) {\n    return markdownSpace(code2) ? factorySpace(effects, lineEndingAfterPrefix, \"linePrefix\", self2.parser.constructs.disable.null.includes(\"codeIndented\") ? void 0 : 4)(code2) : lineEndingAfterPrefix(code2);\n  }\n  function lineEndingAfterPrefix(code2) {\n    effects.enter(\"htmlTextData\");\n    return returnState(code2);\n  }\n}\nconst labelEnd = {\n  name: \"labelEnd\",\n  resolveAll: resolveAllLabelEnd,\n  resolveTo: resolveToLabelEnd,\n  tokenize: tokenizeLabelEnd\n};\nconst resourceConstruct = {\n  tokenize: tokenizeResource\n};\nconst referenceFullConstruct = {\n  tokenize: tokenizeReferenceFull\n};\nconst referenceCollapsedConstruct = {\n  tokenize: tokenizeReferenceCollapsed\n};\nfunction resolveAllLabelEnd(events) {\n  let index2 = -1;\n  const newEvents = [];\n  while (++index2 < events.length) {\n    const token = events[index2][1];\n    newEvents.push(events[index2]);\n    if (token.type === \"labelImage\" || token.type === \"labelLink\" || token.type === \"labelEnd\") {\n      const offset = token.type === \"labelImage\" ? 4 : 2;\n      token.type = \"data\";\n      index2 += offset;\n    }\n  }\n  if (events.length !== newEvents.length) {\n    splice(events, 0, events.length, newEvents);\n  }\n  return events;\n}\nfunction resolveToLabelEnd(events, context) {\n  let index2 = events.length;\n  let offset = 0;\n  let token;\n  let open;\n  let close;\n  let media;\n  while (index2--) {\n    token = events[index2][1];\n    if (open) {\n      if (token.type === \"link\" || token.type === \"labelLink\" && token._inactive) {\n        break;\n      }\n      if (events[index2][0] === \"enter\" && token.type === \"labelLink\") {\n        token._inactive = true;\n      }\n    } else if (close) {\n      if (events[index2][0] === \"enter\" && (token.type === \"labelImage\" || token.type === \"labelLink\") && !token._balanced) {\n        open = index2;\n        if (token.type !== \"labelLink\") {\n          offset = 2;\n          break;\n        }\n      }\n    } else if (token.type === \"labelEnd\") {\n      close = index2;\n    }\n  }\n  const group = {\n    type: events[open][1].type === \"labelLink\" ? \"link\" : \"image\",\n    start: {\n      ...events[open][1].start\n    },\n    end: {\n      ...events[events.length - 1][1].end\n    }\n  };\n  const label = {\n    type: \"label\",\n    start: {\n      ...events[open][1].start\n    },\n    end: {\n      ...events[close][1].end\n    }\n  };\n  const text2 = {\n    type: \"labelText\",\n    start: {\n      ...events[open + offset + 2][1].end\n    },\n    end: {\n      ...events[close - 2][1].start\n    }\n  };\n  media = [[\"enter\", group, context], [\"enter\", label, context]];\n  media = push(media, events.slice(open + 1, open + offset + 3));\n  media = push(media, [[\"enter\", text2, context]]);\n  media = push(media, resolveAll(context.parser.constructs.insideSpan.null, events.slice(open + offset + 4, close - 3), context));\n  media = push(media, [[\"exit\", text2, context], events[close - 2], events[close - 1], [\"exit\", label, context]]);\n  media = push(media, events.slice(close + 1));\n  media = push(media, [[\"exit\", group, context]]);\n  splice(events, open, events.length, media);\n  return events;\n}\nfunction tokenizeLabelEnd(effects, ok2, nok) {\n  const self2 = this;\n  let index2 = self2.events.length;\n  let labelStart;\n  let defined;\n  while (index2--) {\n    if ((self2.events[index2][1].type === \"labelImage\" || self2.events[index2][1].type === \"labelLink\") && !self2.events[index2][1]._balanced) {\n      labelStart = self2.events[index2][1];\n      break;\n    }\n  }\n  return start;\n  function start(code2) {\n    if (!labelStart) {\n      return nok(code2);\n    }\n    if (labelStart._inactive) {\n      return labelEndNok(code2);\n    }\n    defined = self2.parser.defined.includes(normalizeIdentifier(self2.sliceSerialize({\n      start: labelStart.end,\n      end: self2.now()\n    })));\n    effects.enter(\"labelEnd\");\n    effects.enter(\"labelMarker\");\n    effects.consume(code2);\n    effects.exit(\"labelMarker\");\n    effects.exit(\"labelEnd\");\n    return after;\n  }\n  function after(code2) {\n    if (code2 === 40) {\n      return effects.attempt(resourceConstruct, labelEndOk, defined ? labelEndOk : labelEndNok)(code2);\n    }\n    if (code2 === 91) {\n      return effects.attempt(referenceFullConstruct, labelEndOk, defined ? referenceNotFull : labelEndNok)(code2);\n    }\n    return defined ? labelEndOk(code2) : labelEndNok(code2);\n  }\n  function referenceNotFull(code2) {\n    return effects.attempt(referenceCollapsedConstruct, labelEndOk, labelEndNok)(code2);\n  }\n  function labelEndOk(code2) {\n    return ok2(code2);\n  }\n  function labelEndNok(code2) {\n    labelStart._balanced = true;\n    return nok(code2);\n  }\n}\nfunction tokenizeResource(effects, ok2, nok) {\n  return resourceStart;\n  function resourceStart(code2) {\n    effects.enter(\"resource\");\n    effects.enter(\"resourceMarker\");\n    effects.consume(code2);\n    effects.exit(\"resourceMarker\");\n    return resourceBefore;\n  }\n  function resourceBefore(code2) {\n    return markdownLineEndingOrSpace(code2) ? factoryWhitespace(effects, resourceOpen)(code2) : resourceOpen(code2);\n  }\n  function resourceOpen(code2) {\n    if (code2 === 41) {\n      return resourceEnd(code2);\n    }\n    return factoryDestination(effects, resourceDestinationAfter, resourceDestinationMissing, \"resourceDestination\", \"resourceDestinationLiteral\", \"resourceDestinationLiteralMarker\", \"resourceDestinationRaw\", \"resourceDestinationString\", 32)(code2);\n  }\n  function resourceDestinationAfter(code2) {\n    return markdownLineEndingOrSpace(code2) ? factoryWhitespace(effects, resourceBetween)(code2) : resourceEnd(code2);\n  }\n  function resourceDestinationMissing(code2) {\n    return nok(code2);\n  }\n  function resourceBetween(code2) {\n    if (code2 === 34 || code2 === 39 || code2 === 40) {\n      return factoryTitle(effects, resourceTitleAfter, nok, \"resourceTitle\", \"resourceTitleMarker\", \"resourceTitleString\")(code2);\n    }\n    return resourceEnd(code2);\n  }\n  function resourceTitleAfter(code2) {\n    return markdownLineEndingOrSpace(code2) ? factoryWhitespace(effects, resourceEnd)(code2) : resourceEnd(code2);\n  }\n  function resourceEnd(code2) {\n    if (code2 === 41) {\n      effects.enter(\"resourceMarker\");\n      effects.consume(code2);\n      effects.exit(\"resourceMarker\");\n      effects.exit(\"resource\");\n      return ok2;\n    }\n    return nok(code2);\n  }\n}\nfunction tokenizeReferenceFull(effects, ok2, nok) {\n  const self2 = this;\n  return referenceFull;\n  function referenceFull(code2) {\n    return factoryLabel.call(self2, effects, referenceFullAfter, referenceFullMissing, \"reference\", \"referenceMarker\", \"referenceString\")(code2);\n  }\n  function referenceFullAfter(code2) {\n    return self2.parser.defined.includes(normalizeIdentifier(self2.sliceSerialize(self2.events[self2.events.length - 1][1]).slice(1, -1))) ? ok2(code2) : nok(code2);\n  }\n  function referenceFullMissing(code2) {\n    return nok(code2);\n  }\n}\nfunction tokenizeReferenceCollapsed(effects, ok2, nok) {\n  return referenceCollapsedStart;\n  function referenceCollapsedStart(code2) {\n    effects.enter(\"reference\");\n    effects.enter(\"referenceMarker\");\n    effects.consume(code2);\n    effects.exit(\"referenceMarker\");\n    return referenceCollapsedOpen;\n  }\n  function referenceCollapsedOpen(code2) {\n    if (code2 === 93) {\n      effects.enter(\"referenceMarker\");\n      effects.consume(code2);\n      effects.exit(\"referenceMarker\");\n      effects.exit(\"reference\");\n      return ok2;\n    }\n    return nok(code2);\n  }\n}\nconst labelStartImage = {\n  name: \"labelStartImage\",\n  resolveAll: labelEnd.resolveAll,\n  tokenize: tokenizeLabelStartImage\n};\nfunction tokenizeLabelStartImage(effects, ok2, nok) {\n  const self2 = this;\n  return start;\n  function start(code2) {\n    effects.enter(\"labelImage\");\n    effects.enter(\"labelImageMarker\");\n    effects.consume(code2);\n    effects.exit(\"labelImageMarker\");\n    return open;\n  }\n  function open(code2) {\n    if (code2 === 91) {\n      effects.enter(\"labelMarker\");\n      effects.consume(code2);\n      effects.exit(\"labelMarker\");\n      effects.exit(\"labelImage\");\n      return after;\n    }\n    return nok(code2);\n  }\n  function after(code2) {\n    return code2 === 94 && \"_hiddenFootnoteSupport\" in self2.parser.constructs ? nok(code2) : ok2(code2);\n  }\n}\nconst labelStartLink = {\n  name: \"labelStartLink\",\n  resolveAll: labelEnd.resolveAll,\n  tokenize: tokenizeLabelStartLink\n};\nfunction tokenizeLabelStartLink(effects, ok2, nok) {\n  const self2 = this;\n  return start;\n  function start(code2) {\n    effects.enter(\"labelLink\");\n    effects.enter(\"labelMarker\");\n    effects.consume(code2);\n    effects.exit(\"labelMarker\");\n    effects.exit(\"labelLink\");\n    return after;\n  }\n  function after(code2) {\n    return code2 === 94 && \"_hiddenFootnoteSupport\" in self2.parser.constructs ? nok(code2) : ok2(code2);\n  }\n}\nconst lineEnding = {\n  name: \"lineEnding\",\n  tokenize: tokenizeLineEnding\n};\nfunction tokenizeLineEnding(effects, ok2) {\n  return start;\n  function start(code2) {\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    return factorySpace(effects, ok2, \"linePrefix\");\n  }\n}\nconst thematicBreak$1 = {\n  name: \"thematicBreak\",\n  tokenize: tokenizeThematicBreak\n};\nfunction tokenizeThematicBreak(effects, ok2, nok) {\n  let size = 0;\n  let marker;\n  return start;\n  function start(code2) {\n    effects.enter(\"thematicBreak\");\n    return before(code2);\n  }\n  function before(code2) {\n    marker = code2;\n    return atBreak(code2);\n  }\n  function atBreak(code2) {\n    if (code2 === marker) {\n      effects.enter(\"thematicBreakSequence\");\n      return sequence(code2);\n    }\n    if (size >= 3 && (code2 === null || markdownLineEnding(code2))) {\n      effects.exit(\"thematicBreak\");\n      return ok2(code2);\n    }\n    return nok(code2);\n  }\n  function sequence(code2) {\n    if (code2 === marker) {\n      effects.consume(code2);\n      size++;\n      return sequence;\n    }\n    effects.exit(\"thematicBreakSequence\");\n    return markdownSpace(code2) ? factorySpace(effects, atBreak, \"whitespace\")(code2) : atBreak(code2);\n  }\n}\nconst list$1 = {\n  continuation: {\n    tokenize: tokenizeListContinuation\n  },\n  exit: tokenizeListEnd,\n  name: \"list\",\n  tokenize: tokenizeListStart\n};\nconst listItemPrefixWhitespaceConstruct = {\n  partial: true,\n  tokenize: tokenizeListItemPrefixWhitespace\n};\nconst indentConstruct = {\n  partial: true,\n  tokenize: tokenizeIndent\n};\nfunction tokenizeListStart(effects, ok2, nok) {\n  const self2 = this;\n  const tail = self2.events[self2.events.length - 1];\n  let initialSize = tail && tail[1].type === \"linePrefix\" ? tail[2].sliceSerialize(tail[1], true).length : 0;\n  let size = 0;\n  return start;\n  function start(code2) {\n    const kind = self2.containerState.type || (code2 === 42 || code2 === 43 || code2 === 45 ? \"listUnordered\" : \"listOrdered\");\n    if (kind === \"listUnordered\" ? !self2.containerState.marker || code2 === self2.containerState.marker : asciiDigit(code2)) {\n      if (!self2.containerState.type) {\n        self2.containerState.type = kind;\n        effects.enter(kind, {\n          _container: true\n        });\n      }\n      if (kind === \"listUnordered\") {\n        effects.enter(\"listItemPrefix\");\n        return code2 === 42 || code2 === 45 ? effects.check(thematicBreak$1, nok, atMarker)(code2) : atMarker(code2);\n      }\n      if (!self2.interrupt || code2 === 49) {\n        effects.enter(\"listItemPrefix\");\n        effects.enter(\"listItemValue\");\n        return inside(code2);\n      }\n    }\n    return nok(code2);\n  }\n  function inside(code2) {\n    if (asciiDigit(code2) && ++size < 10) {\n      effects.consume(code2);\n      return inside;\n    }\n    if ((!self2.interrupt || size < 2) && (self2.containerState.marker ? code2 === self2.containerState.marker : code2 === 41 || code2 === 46)) {\n      effects.exit(\"listItemValue\");\n      return atMarker(code2);\n    }\n    return nok(code2);\n  }\n  function atMarker(code2) {\n    effects.enter(\"listItemMarker\");\n    effects.consume(code2);\n    effects.exit(\"listItemMarker\");\n    self2.containerState.marker = self2.containerState.marker || code2;\n    return effects.check(\n      blankLine,\n      // Cant be empty when interrupting.\n      self2.interrupt ? nok : onBlank,\n      effects.attempt(listItemPrefixWhitespaceConstruct, endOfPrefix, otherPrefix)\n    );\n  }\n  function onBlank(code2) {\n    self2.containerState.initialBlankLine = true;\n    initialSize++;\n    return endOfPrefix(code2);\n  }\n  function otherPrefix(code2) {\n    if (markdownSpace(code2)) {\n      effects.enter(\"listItemPrefixWhitespace\");\n      effects.consume(code2);\n      effects.exit(\"listItemPrefixWhitespace\");\n      return endOfPrefix;\n    }\n    return nok(code2);\n  }\n  function endOfPrefix(code2) {\n    self2.containerState.size = initialSize + self2.sliceSerialize(effects.exit(\"listItemPrefix\"), true).length;\n    return ok2(code2);\n  }\n}\nfunction tokenizeListContinuation(effects, ok2, nok) {\n  const self2 = this;\n  self2.containerState._closeFlow = void 0;\n  return effects.check(blankLine, onBlank, notBlank);\n  function onBlank(code2) {\n    self2.containerState.furtherBlankLines = self2.containerState.furtherBlankLines || self2.containerState.initialBlankLine;\n    return factorySpace(effects, ok2, \"listItemIndent\", self2.containerState.size + 1)(code2);\n  }\n  function notBlank(code2) {\n    if (self2.containerState.furtherBlankLines || !markdownSpace(code2)) {\n      self2.containerState.furtherBlankLines = void 0;\n      self2.containerState.initialBlankLine = void 0;\n      return notInCurrentItem(code2);\n    }\n    self2.containerState.furtherBlankLines = void 0;\n    self2.containerState.initialBlankLine = void 0;\n    return effects.attempt(indentConstruct, ok2, notInCurrentItem)(code2);\n  }\n  function notInCurrentItem(code2) {\n    self2.containerState._closeFlow = true;\n    self2.interrupt = void 0;\n    return factorySpace(effects, effects.attempt(list$1, ok2, nok), \"linePrefix\", self2.parser.constructs.disable.null.includes(\"codeIndented\") ? void 0 : 4)(code2);\n  }\n}\nfunction tokenizeIndent(effects, ok2, nok) {\n  const self2 = this;\n  return factorySpace(effects, afterPrefix, \"listItemIndent\", self2.containerState.size + 1);\n  function afterPrefix(code2) {\n    const tail = self2.events[self2.events.length - 1];\n    return tail && tail[1].type === \"listItemIndent\" && tail[2].sliceSerialize(tail[1], true).length === self2.containerState.size ? ok2(code2) : nok(code2);\n  }\n}\nfunction tokenizeListEnd(effects) {\n  effects.exit(this.containerState.type);\n}\nfunction tokenizeListItemPrefixWhitespace(effects, ok2, nok) {\n  const self2 = this;\n  return factorySpace(effects, afterPrefix, \"listItemPrefixWhitespace\", self2.parser.constructs.disable.null.includes(\"codeIndented\") ? void 0 : 4 + 1);\n  function afterPrefix(code2) {\n    const tail = self2.events[self2.events.length - 1];\n    return !markdownSpace(code2) && tail && tail[1].type === \"listItemPrefixWhitespace\" ? ok2(code2) : nok(code2);\n  }\n}\nconst setextUnderline = {\n  name: \"setextUnderline\",\n  resolveTo: resolveToSetextUnderline,\n  tokenize: tokenizeSetextUnderline\n};\nfunction resolveToSetextUnderline(events, context) {\n  let index2 = events.length;\n  let content2;\n  let text2;\n  let definition2;\n  while (index2--) {\n    if (events[index2][0] === \"enter\") {\n      if (events[index2][1].type === \"content\") {\n        content2 = index2;\n        break;\n      }\n      if (events[index2][1].type === \"paragraph\") {\n        text2 = index2;\n      }\n    } else {\n      if (events[index2][1].type === \"content\") {\n        events.splice(index2, 1);\n      }\n      if (!definition2 && events[index2][1].type === \"definition\") {\n        definition2 = index2;\n      }\n    }\n  }\n  const heading2 = {\n    type: \"setextHeading\",\n    start: {\n      ...events[content2][1].start\n    },\n    end: {\n      ...events[events.length - 1][1].end\n    }\n  };\n  events[text2][1].type = \"setextHeadingText\";\n  if (definition2) {\n    events.splice(text2, 0, [\"enter\", heading2, context]);\n    events.splice(definition2 + 1, 0, [\"exit\", events[content2][1], context]);\n    events[content2][1].end = {\n      ...events[definition2][1].end\n    };\n  } else {\n    events[content2][1] = heading2;\n  }\n  events.push([\"exit\", heading2, context]);\n  return events;\n}\nfunction tokenizeSetextUnderline(effects, ok2, nok) {\n  const self2 = this;\n  let marker;\n  return start;\n  function start(code2) {\n    let index2 = self2.events.length;\n    let paragraph2;\n    while (index2--) {\n      if (self2.events[index2][1].type !== \"lineEnding\" && self2.events[index2][1].type !== \"linePrefix\" && self2.events[index2][1].type !== \"content\") {\n        paragraph2 = self2.events[index2][1].type === \"paragraph\";\n        break;\n      }\n    }\n    if (!self2.parser.lazy[self2.now().line] && (self2.interrupt || paragraph2)) {\n      effects.enter(\"setextHeadingLine\");\n      marker = code2;\n      return before(code2);\n    }\n    return nok(code2);\n  }\n  function before(code2) {\n    effects.enter(\"setextHeadingLineSequence\");\n    return inside(code2);\n  }\n  function inside(code2) {\n    if (code2 === marker) {\n      effects.consume(code2);\n      return inside;\n    }\n    effects.exit(\"setextHeadingLineSequence\");\n    return markdownSpace(code2) ? factorySpace(effects, after, \"lineSuffix\")(code2) : after(code2);\n  }\n  function after(code2) {\n    if (code2 === null || markdownLineEnding(code2)) {\n      effects.exit(\"setextHeadingLine\");\n      return ok2(code2);\n    }\n    return nok(code2);\n  }\n}\nconst flow$1 = {\n  tokenize: initializeFlow\n};\nfunction initializeFlow(effects) {\n  const self2 = this;\n  const initial = effects.attempt(\n    // Try to parse a blank line.\n    blankLine,\n    atBlankEnding,\n    // Try to parse initial flow (essentially, only code).\n    effects.attempt(this.parser.constructs.flowInitial, afterConstruct, factorySpace(effects, effects.attempt(this.parser.constructs.flow, afterConstruct, effects.attempt(content$1, afterConstruct)), \"linePrefix\"))\n  );\n  return initial;\n  function atBlankEnding(code2) {\n    if (code2 === null) {\n      effects.consume(code2);\n      return;\n    }\n    effects.enter(\"lineEndingBlank\");\n    effects.consume(code2);\n    effects.exit(\"lineEndingBlank\");\n    self2.currentConstruct = void 0;\n    return initial;\n  }\n  function afterConstruct(code2) {\n    if (code2 === null) {\n      effects.consume(code2);\n      return;\n    }\n    effects.enter(\"lineEnding\");\n    effects.consume(code2);\n    effects.exit(\"lineEnding\");\n    self2.currentConstruct = void 0;\n    return initial;\n  }\n}\nconst resolver = {\n  resolveAll: createResolver()\n};\nconst string$1 = initializeFactory(\"string\");\nconst text$2 = initializeFactory(\"text\");\nfunction initializeFactory(field) {\n  return {\n    resolveAll: createResolver(field === \"text\" ? resolveAllLineSuffixes : void 0),\n    tokenize: initializeText\n  };\n  function initializeText(effects) {\n    const self2 = this;\n    const constructs2 = this.parser.constructs[field];\n    const text2 = effects.attempt(constructs2, start, notText);\n    return start;\n    function start(code2) {\n      return atBreak(code2) ? text2(code2) : notText(code2);\n    }\n    function notText(code2) {\n      if (code2 === null) {\n        effects.consume(code2);\n        return;\n      }\n      effects.enter(\"data\");\n      effects.consume(code2);\n      return data;\n    }\n    function data(code2) {\n      if (atBreak(code2)) {\n        effects.exit(\"data\");\n        return text2(code2);\n      }\n      effects.consume(code2);\n      return data;\n    }\n    function atBreak(code2) {\n      if (code2 === null) {\n        return true;\n      }\n      const list2 = constructs2[code2];\n      let index2 = -1;\n      if (list2) {\n        while (++index2 < list2.length) {\n          const item = list2[index2];\n          if (!item.previous || item.previous.call(self2, self2.previous)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }\n}\nfunction createResolver(extraResolver) {\n  return resolveAllText;\n  function resolveAllText(events, context) {\n    let index2 = -1;\n    let enter;\n    while (++index2 <= events.length) {\n      if (enter === void 0) {\n        if (events[index2] && events[index2][1].type === \"data\") {\n          enter = index2;\n          index2++;\n        }\n      } else if (!events[index2] || events[index2][1].type !== \"data\") {\n        if (index2 !== enter + 2) {\n          events[enter][1].end = events[index2 - 1][1].end;\n          events.splice(enter + 2, index2 - enter - 2);\n          index2 = enter + 2;\n        }\n        enter = void 0;\n      }\n    }\n    return extraResolver ? extraResolver(events, context) : events;\n  }\n}\nfunction resolveAllLineSuffixes(events, context) {\n  let eventIndex = 0;\n  while (++eventIndex <= events.length) {\n    if ((eventIndex === events.length || events[eventIndex][1].type === \"lineEnding\") && events[eventIndex - 1][1].type === \"data\") {\n      const data = events[eventIndex - 1][1];\n      const chunks = context.sliceStream(data);\n      let index2 = chunks.length;\n      let bufferIndex = -1;\n      let size = 0;\n      let tabs;\n      while (index2--) {\n        const chunk = chunks[index2];\n        if (typeof chunk === \"string\") {\n          bufferIndex = chunk.length;\n          while (chunk.charCodeAt(bufferIndex - 1) === 32) {\n            size++;\n            bufferIndex--;\n          }\n          if (bufferIndex) break;\n          bufferIndex = -1;\n        } else if (chunk === -2) {\n          tabs = true;\n          size++;\n        } else if (chunk === -1) ;\n        else {\n          index2++;\n          break;\n        }\n      }\n      if (context._contentTypeTextTrailing && eventIndex === events.length) {\n        size = 0;\n      }\n      if (size) {\n        const token = {\n          type: eventIndex === events.length || tabs || size < 2 ? \"lineSuffix\" : \"hardBreakTrailing\",\n          start: {\n            _bufferIndex: index2 ? bufferIndex : data.start._bufferIndex + bufferIndex,\n            _index: data.start._index + index2,\n            line: data.end.line,\n            column: data.end.column - size,\n            offset: data.end.offset - size\n          },\n          end: {\n            ...data.end\n          }\n        };\n        data.end = {\n          ...token.start\n        };\n        if (data.start.offset === data.end.offset) {\n          Object.assign(data, token);\n        } else {\n          events.splice(eventIndex, 0, [\"enter\", token, context], [\"exit\", token, context]);\n          eventIndex += 2;\n        }\n      }\n      eventIndex++;\n    }\n  }\n  return events;\n}\nconst document$1 = {\n  [42]: list$1,\n  [43]: list$1,\n  [45]: list$1,\n  [48]: list$1,\n  [49]: list$1,\n  [50]: list$1,\n  [51]: list$1,\n  [52]: list$1,\n  [53]: list$1,\n  [54]: list$1,\n  [55]: list$1,\n  [56]: list$1,\n  [57]: list$1,\n  [62]: blockQuote\n};\nconst contentInitial = {\n  [91]: definition\n};\nconst flowInitial = {\n  [-2]: codeIndented,\n  [-1]: codeIndented,\n  [32]: codeIndented\n};\nconst flow = {\n  [35]: headingAtx,\n  [42]: thematicBreak$1,\n  [45]: [setextUnderline, thematicBreak$1],\n  [60]: htmlFlow,\n  [61]: setextUnderline,\n  [95]: thematicBreak$1,\n  [96]: codeFenced,\n  [126]: codeFenced\n};\nconst string = {\n  [38]: characterReference,\n  [92]: characterEscape\n};\nconst text$1 = {\n  [-5]: lineEnding,\n  [-4]: lineEnding,\n  [-3]: lineEnding,\n  [33]: labelStartImage,\n  [38]: characterReference,\n  [42]: attention,\n  [60]: [autolink, htmlText],\n  [91]: labelStartLink,\n  [92]: [hardBreakEscape, characterEscape],\n  [93]: labelEnd,\n  [95]: attention,\n  [96]: codeText\n};\nconst insideSpan = {\n  null: [attention, resolver]\n};\nconst attentionMarkers = {\n  null: [42, 95]\n};\nconst disable = {\n  null: []\n};\nconst defaultConstructs = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  attentionMarkers,\n  contentInitial,\n  disable,\n  document: document$1,\n  flow,\n  flowInitial,\n  insideSpan,\n  string,\n  text: text$1\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction createTokenizer(parser2, initialize, from) {\n  let point2 = {\n    _bufferIndex: -1,\n    _index: 0,\n    line: from && from.line || 1,\n    column: from && from.column || 1,\n    offset: from && from.offset || 0\n  };\n  const columnStart = {};\n  const resolveAllConstructs = [];\n  let chunks = [];\n  let stack = [];\n  const effects = {\n    attempt: constructFactory(onsuccessfulconstruct),\n    check: constructFactory(onsuccessfulcheck),\n    consume,\n    enter,\n    exit: exit2,\n    interrupt: constructFactory(onsuccessfulcheck, {\n      interrupt: true\n    })\n  };\n  const context = {\n    code: null,\n    containerState: {},\n    defineSkip,\n    events: [],\n    now,\n    parser: parser2,\n    previous: null,\n    sliceSerialize,\n    sliceStream,\n    write\n  };\n  let state = initialize.tokenize.call(context, effects);\n  if (initialize.resolveAll) {\n    resolveAllConstructs.push(initialize);\n  }\n  return context;\n  function write(slice) {\n    chunks = push(chunks, slice);\n    main();\n    if (chunks[chunks.length - 1] !== null) {\n      return [];\n    }\n    addResult(initialize, 0);\n    context.events = resolveAll(resolveAllConstructs, context.events, context);\n    return context.events;\n  }\n  function sliceSerialize(token, expandTabs) {\n    return serializeChunks(sliceStream(token), expandTabs);\n  }\n  function sliceStream(token) {\n    return sliceChunks(chunks, token);\n  }\n  function now() {\n    const {\n      _bufferIndex,\n      _index,\n      line,\n      column,\n      offset\n    } = point2;\n    return {\n      _bufferIndex,\n      _index,\n      line,\n      column,\n      offset\n    };\n  }\n  function defineSkip(value) {\n    columnStart[value.line] = value.column;\n    accountForPotentialSkip();\n  }\n  function main() {\n    let chunkIndex;\n    while (point2._index < chunks.length) {\n      const chunk = chunks[point2._index];\n      if (typeof chunk === \"string\") {\n        chunkIndex = point2._index;\n        if (point2._bufferIndex < 0) {\n          point2._bufferIndex = 0;\n        }\n        while (point2._index === chunkIndex && point2._bufferIndex < chunk.length) {\n          go2(chunk.charCodeAt(point2._bufferIndex));\n        }\n      } else {\n        go2(chunk);\n      }\n    }\n  }\n  function go2(code2) {\n    state = state(code2);\n  }\n  function consume(code2) {\n    if (markdownLineEnding(code2)) {\n      point2.line++;\n      point2.column = 1;\n      point2.offset += code2 === -3 ? 2 : 1;\n      accountForPotentialSkip();\n    } else if (code2 !== -1) {\n      point2.column++;\n      point2.offset++;\n    }\n    if (point2._bufferIndex < 0) {\n      point2._index++;\n    } else {\n      point2._bufferIndex++;\n      if (point2._bufferIndex === // Points w/ non-negative `_bufferIndex` reference\n      // strings.\n      /** @type {string} */\n      chunks[point2._index].length) {\n        point2._bufferIndex = -1;\n        point2._index++;\n      }\n    }\n    context.previous = code2;\n  }\n  function enter(type, fields) {\n    const token = fields || {};\n    token.type = type;\n    token.start = now();\n    context.events.push([\"enter\", token, context]);\n    stack.push(token);\n    return token;\n  }\n  function exit2(type) {\n    const token = stack.pop();\n    token.end = now();\n    context.events.push([\"exit\", token, context]);\n    return token;\n  }\n  function onsuccessfulconstruct(construct2, info) {\n    addResult(construct2, info.from);\n  }\n  function onsuccessfulcheck(_2, info) {\n    info.restore();\n  }\n  function constructFactory(onreturn, fields) {\n    return hook;\n    function hook(constructs2, returnState, bogusState) {\n      let listOfConstructs;\n      let constructIndex;\n      let currentConstruct;\n      let info;\n      return Array.isArray(constructs2) ? (\n        /* c8 ignore next 1 */\n        handleListOfConstructs(constructs2)\n      ) : \"tokenize\" in constructs2 ? (\n        // Looks like a construct.\n        handleListOfConstructs([\n          /** @type {Construct} */\n          constructs2\n        ])\n      ) : handleMapOfConstructs(constructs2);\n      function handleMapOfConstructs(map) {\n        return start;\n        function start(code2) {\n          const left = code2 !== null && map[code2];\n          const all2 = code2 !== null && map.null;\n          const list2 = [\n            // To do: add more extension tests.\n            /* c8 ignore next 2 */\n            ...Array.isArray(left) ? left : left ? [left] : [],\n            ...Array.isArray(all2) ? all2 : all2 ? [all2] : []\n          ];\n          return handleListOfConstructs(list2)(code2);\n        }\n      }\n      function handleListOfConstructs(list2) {\n        listOfConstructs = list2;\n        constructIndex = 0;\n        if (list2.length === 0) {\n          return bogusState;\n        }\n        return handleConstruct(list2[constructIndex]);\n      }\n      function handleConstruct(construct2) {\n        return start;\n        function start(code2) {\n          info = store();\n          currentConstruct = construct2;\n          if (!construct2.partial) {\n            context.currentConstruct = construct2;\n          }\n          if (construct2.name && context.parser.constructs.disable.null.includes(construct2.name)) {\n            return nok();\n          }\n          return construct2.tokenize.call(\n            // If we do have fields, create an object w/ `context` as its\n            // prototype.\n            // This allows a live binding, which is needed for `interrupt`.\n            fields ? Object.assign(Object.create(context), fields) : context,\n            effects,\n            ok2,\n            nok\n          )(code2);\n        }\n      }\n      function ok2(code2) {\n        onreturn(currentConstruct, info);\n        return returnState;\n      }\n      function nok(code2) {\n        info.restore();\n        if (++constructIndex < listOfConstructs.length) {\n          return handleConstruct(listOfConstructs[constructIndex]);\n        }\n        return bogusState;\n      }\n    }\n  }\n  function addResult(construct2, from2) {\n    if (construct2.resolveAll && !resolveAllConstructs.includes(construct2)) {\n      resolveAllConstructs.push(construct2);\n    }\n    if (construct2.resolve) {\n      splice(context.events, from2, context.events.length - from2, construct2.resolve(context.events.slice(from2), context));\n    }\n    if (construct2.resolveTo) {\n      context.events = construct2.resolveTo(context.events, context);\n    }\n  }\n  function store() {\n    const startPoint = now();\n    const startPrevious = context.previous;\n    const startCurrentConstruct = context.currentConstruct;\n    const startEventsIndex = context.events.length;\n    const startStack = Array.from(stack);\n    return {\n      from: startEventsIndex,\n      restore\n    };\n    function restore() {\n      point2 = startPoint;\n      context.previous = startPrevious;\n      context.currentConstruct = startCurrentConstruct;\n      context.events.length = startEventsIndex;\n      stack = startStack;\n      accountForPotentialSkip();\n    }\n  }\n  function accountForPotentialSkip() {\n    if (point2.line in columnStart && point2.column < 2) {\n      point2.column = columnStart[point2.line];\n      point2.offset += columnStart[point2.line] - 1;\n    }\n  }\n}\nfunction sliceChunks(chunks, token) {\n  const startIndex = token.start._index;\n  const startBufferIndex = token.start._bufferIndex;\n  const endIndex = token.end._index;\n  const endBufferIndex = token.end._bufferIndex;\n  let view;\n  if (startIndex === endIndex) {\n    view = [chunks[startIndex].slice(startBufferIndex, endBufferIndex)];\n  } else {\n    view = chunks.slice(startIndex, endIndex);\n    if (startBufferIndex > -1) {\n      const head = view[0];\n      if (typeof head === \"string\") {\n        view[0] = head.slice(startBufferIndex);\n      } else {\n        view.shift();\n      }\n    }\n    if (endBufferIndex > 0) {\n      view.push(chunks[endIndex].slice(0, endBufferIndex));\n    }\n  }\n  return view;\n}\nfunction serializeChunks(chunks, expandTabs) {\n  let index2 = -1;\n  const result = [];\n  let atTab;\n  while (++index2 < chunks.length) {\n    const chunk = chunks[index2];\n    let value;\n    if (typeof chunk === \"string\") {\n      value = chunk;\n    } else switch (chunk) {\n      case -5: {\n        value = \"\\r\";\n        break;\n      }\n      case -4: {\n        value = \"\\n\";\n        break;\n      }\n      case -3: {\n        value = \"\\r\\n\";\n        break;\n      }\n      case -2: {\n        value = expandTabs ? \" \" : \"\t\";\n        break;\n      }\n      case -1: {\n        if (!expandTabs && atTab) continue;\n        value = \" \";\n        break;\n      }\n      default: {\n        value = String.fromCharCode(chunk);\n      }\n    }\n    atTab = chunk === -2;\n    result.push(value);\n  }\n  return result.join(\"\");\n}\nfunction parse$1(options) {\n  const settings = options || {};\n  const constructs2 = (\n    /** @type {FullNormalizedExtension} */\n    combineExtensions([defaultConstructs, ...settings.extensions || []])\n  );\n  const parser2 = {\n    constructs: constructs2,\n    content: create2(content$2),\n    defined: [],\n    document: create2(document$2),\n    flow: create2(flow$1),\n    lazy: {},\n    string: create2(string$1),\n    text: create2(text$2)\n  };\n  return parser2;\n  function create2(initial) {\n    return creator;\n    function creator(from) {\n      return createTokenizer(parser2, initial, from);\n    }\n  }\n}\nfunction postprocess(events) {\n  while (!subtokenize(events)) {\n  }\n  return events;\n}\nconst search = /[\\0\\t\\n\\r]/g;\nfunction preprocess() {\n  let column = 1;\n  let buffer = \"\";\n  let start = true;\n  let atCarriageReturn;\n  return preprocessor;\n  function preprocessor(value, encoding, end) {\n    const chunks = [];\n    let match2;\n    let next;\n    let startPosition;\n    let endPosition;\n    let code2;\n    value = buffer + (typeof value === \"string\" ? value.toString() : new TextDecoder(encoding || void 0).decode(value));\n    startPosition = 0;\n    buffer = \"\";\n    if (start) {\n      if (value.charCodeAt(0) === 65279) {\n        startPosition++;\n      }\n      start = void 0;\n    }\n    while (startPosition < value.length) {\n      search.lastIndex = startPosition;\n      match2 = search.exec(value);\n      endPosition = match2 && match2.index !== void 0 ? match2.index : value.length;\n      code2 = value.charCodeAt(endPosition);\n      if (!match2) {\n        buffer = value.slice(startPosition);\n        break;\n      }\n      if (code2 === 10 && startPosition === endPosition && atCarriageReturn) {\n        chunks.push(-3);\n        atCarriageReturn = void 0;\n      } else {\n        if (atCarriageReturn) {\n          chunks.push(-5);\n          atCarriageReturn = void 0;\n        }\n        if (startPosition < endPosition) {\n          chunks.push(value.slice(startPosition, endPosition));\n          column += endPosition - startPosition;\n        }\n        switch (code2) {\n          case 0: {\n            chunks.push(65533);\n            column++;\n            break;\n          }\n          case 9: {\n            next = Math.ceil(column / 4) * 4;\n            chunks.push(-2);\n            while (column++ < next) chunks.push(-1);\n            break;\n          }\n          case 10: {\n            chunks.push(-4);\n            column = 1;\n            break;\n          }\n          default: {\n            atCarriageReturn = true;\n            column = 1;\n          }\n        }\n      }\n      startPosition = endPosition + 1;\n    }\n    if (end) {\n      if (atCarriageReturn) chunks.push(-5);\n      if (buffer) chunks.push(buffer);\n      chunks.push(null);\n    }\n    return chunks;\n  }\n}\nconst characterEscapeOrReference = /\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi;\nfunction decodeString(value) {\n  return value.replace(characterEscapeOrReference, decode$1);\n}\nfunction decode$1($0, $1, $2) {\n  if ($1) {\n    return $1;\n  }\n  const head = $2.charCodeAt(0);\n  if (head === 35) {\n    const head2 = $2.charCodeAt(1);\n    const hex = head2 === 120 || head2 === 88;\n    return decodeNumericCharacterReference($2.slice(hex ? 2 : 1), hex ? 16 : 10);\n  }\n  return decodeNamedCharacterReference($2) || $0;\n}\nconst own$2 = {}.hasOwnProperty;\nfunction fromMarkdown(value, encoding, options) {\n  if (typeof encoding !== \"string\") {\n    options = encoding;\n    encoding = void 0;\n  }\n  return compiler(options)(postprocess(parse$1(options).document().write(preprocess()(value, encoding, true))));\n}\nfunction compiler(options) {\n  const config2 = {\n    transforms: [],\n    canContainEols: [\"emphasis\", \"fragment\", \"heading\", \"paragraph\", \"strong\"],\n    enter: {\n      autolink: opener(link2),\n      autolinkProtocol: onenterdata,\n      autolinkEmail: onenterdata,\n      atxHeading: opener(heading2),\n      blockQuote: opener(blockQuote2),\n      characterEscape: onenterdata,\n      characterReference: onenterdata,\n      codeFenced: opener(codeFlow),\n      codeFencedFenceInfo: buffer,\n      codeFencedFenceMeta: buffer,\n      codeIndented: opener(codeFlow, buffer),\n      codeText: opener(codeText2, buffer),\n      codeTextData: onenterdata,\n      data: onenterdata,\n      codeFlowValue: onenterdata,\n      definition: opener(definition2),\n      definitionDestinationString: buffer,\n      definitionLabelString: buffer,\n      definitionTitleString: buffer,\n      emphasis: opener(emphasis2),\n      hardBreakEscape: opener(hardBreak2),\n      hardBreakTrailing: opener(hardBreak2),\n      htmlFlow: opener(html2, buffer),\n      htmlFlowData: onenterdata,\n      htmlText: opener(html2, buffer),\n      htmlTextData: onenterdata,\n      image: opener(image2),\n      label: buffer,\n      link: opener(link2),\n      listItem: opener(listItem2),\n      listItemValue: onenterlistitemvalue,\n      listOrdered: opener(list2, onenterlistordered),\n      listUnordered: opener(list2),\n      paragraph: opener(paragraph2),\n      reference: onenterreference,\n      referenceString: buffer,\n      resourceDestinationString: buffer,\n      resourceTitleString: buffer,\n      setextHeading: opener(heading2),\n      strong: opener(strong2),\n      thematicBreak: opener(thematicBreak2)\n    },\n    exit: {\n      atxHeading: closer(),\n      atxHeadingSequence: onexitatxheadingsequence,\n      autolink: closer(),\n      autolinkEmail: onexitautolinkemail,\n      autolinkProtocol: onexitautolinkprotocol,\n      blockQuote: closer(),\n      characterEscapeValue: onexitdata,\n      characterReferenceMarkerHexadecimal: onexitcharacterreferencemarker,\n      characterReferenceMarkerNumeric: onexitcharacterreferencemarker,\n      characterReferenceValue: onexitcharacterreferencevalue,\n      characterReference: onexitcharacterreference,\n      codeFenced: closer(onexitcodefenced),\n      codeFencedFence: onexitcodefencedfence,\n      codeFencedFenceInfo: onexitcodefencedfenceinfo,\n      codeFencedFenceMeta: onexitcodefencedfencemeta,\n      codeFlowValue: onexitdata,\n      codeIndented: closer(onexitcodeindented),\n      codeText: closer(onexitcodetext),\n      codeTextData: onexitdata,\n      data: onexitdata,\n      definition: closer(),\n      definitionDestinationString: onexitdefinitiondestinationstring,\n      definitionLabelString: onexitdefinitionlabelstring,\n      definitionTitleString: onexitdefinitiontitlestring,\n      emphasis: closer(),\n      hardBreakEscape: closer(onexithardbreak),\n      hardBreakTrailing: closer(onexithardbreak),\n      htmlFlow: closer(onexithtmlflow),\n      htmlFlowData: onexitdata,\n      htmlText: closer(onexithtmltext),\n      htmlTextData: onexitdata,\n      image: closer(onexitimage),\n      label: onexitlabel,\n      labelText: onexitlabeltext,\n      lineEnding: onexitlineending,\n      link: closer(onexitlink),\n      listItem: closer(),\n      listOrdered: closer(),\n      listUnordered: closer(),\n      paragraph: closer(),\n      referenceString: onexitreferencestring,\n      resourceDestinationString: onexitresourcedestinationstring,\n      resourceTitleString: onexitresourcetitlestring,\n      resource: onexitresource,\n      setextHeading: closer(onexitsetextheading),\n      setextHeadingLineSequence: onexitsetextheadinglinesequence,\n      setextHeadingText: onexitsetextheadingtext,\n      strong: closer(),\n      thematicBreak: closer()\n    }\n  };\n  configure(config2, (options || {}).mdastExtensions || []);\n  const data = {};\n  return compile;\n  function compile(events) {\n    let tree = {\n      type: \"root\",\n      children: []\n    };\n    const context = {\n      stack: [tree],\n      tokenStack: [],\n      config: config2,\n      enter,\n      exit: exit2,\n      buffer,\n      resume,\n      data\n    };\n    const listStack = [];\n    let index2 = -1;\n    while (++index2 < events.length) {\n      if (events[index2][1].type === \"listOrdered\" || events[index2][1].type === \"listUnordered\") {\n        if (events[index2][0] === \"enter\") {\n          listStack.push(index2);\n        } else {\n          const tail = listStack.pop();\n          index2 = prepareList(events, tail, index2);\n        }\n      }\n    }\n    index2 = -1;\n    while (++index2 < events.length) {\n      const handler = config2[events[index2][0]];\n      if (own$2.call(handler, events[index2][1].type)) {\n        handler[events[index2][1].type].call(Object.assign({\n          sliceSerialize: events[index2][2].sliceSerialize\n        }, context), events[index2][1]);\n      }\n    }\n    if (context.tokenStack.length > 0) {\n      const tail = context.tokenStack[context.tokenStack.length - 1];\n      const handler = tail[1] || defaultOnError;\n      handler.call(context, void 0, tail[0]);\n    }\n    tree.position = {\n      start: point(events.length > 0 ? events[0][1].start : {\n        line: 1,\n        column: 1,\n        offset: 0\n      }),\n      end: point(events.length > 0 ? events[events.length - 2][1].end : {\n        line: 1,\n        column: 1,\n        offset: 0\n      })\n    };\n    index2 = -1;\n    while (++index2 < config2.transforms.length) {\n      tree = config2.transforms[index2](tree) || tree;\n    }\n    return tree;\n  }\n  function prepareList(events, start, length) {\n    let index2 = start - 1;\n    let containerBalance = -1;\n    let listSpread = false;\n    let listItem3;\n    let lineIndex;\n    let firstBlankLineIndex;\n    let atMarker;\n    while (++index2 <= length) {\n      const event = events[index2];\n      switch (event[1].type) {\n        case \"listUnordered\":\n        case \"listOrdered\":\n        case \"blockQuote\": {\n          if (event[0] === \"enter\") {\n            containerBalance++;\n          } else {\n            containerBalance--;\n          }\n          atMarker = void 0;\n          break;\n        }\n        case \"lineEndingBlank\": {\n          if (event[0] === \"enter\") {\n            if (listItem3 && !atMarker && !containerBalance && !firstBlankLineIndex) {\n              firstBlankLineIndex = index2;\n            }\n            atMarker = void 0;\n          }\n          break;\n        }\n        case \"linePrefix\":\n        case \"listItemValue\":\n        case \"listItemMarker\":\n        case \"listItemPrefix\":\n        case \"listItemPrefixWhitespace\": {\n          break;\n        }\n        default: {\n          atMarker = void 0;\n        }\n      }\n      if (!containerBalance && event[0] === \"enter\" && event[1].type === \"listItemPrefix\" || containerBalance === -1 && event[0] === \"exit\" && (event[1].type === \"listUnordered\" || event[1].type === \"listOrdered\")) {\n        if (listItem3) {\n          let tailIndex = index2;\n          lineIndex = void 0;\n          while (tailIndex--) {\n            const tailEvent = events[tailIndex];\n            if (tailEvent[1].type === \"lineEnding\" || tailEvent[1].type === \"lineEndingBlank\") {\n              if (tailEvent[0] === \"exit\") continue;\n              if (lineIndex) {\n                events[lineIndex][1].type = \"lineEndingBlank\";\n                listSpread = true;\n              }\n              tailEvent[1].type = \"lineEnding\";\n              lineIndex = tailIndex;\n            } else if (tailEvent[1].type === \"linePrefix\" || tailEvent[1].type === \"blockQuotePrefix\" || tailEvent[1].type === \"blockQuotePrefixWhitespace\" || tailEvent[1].type === \"blockQuoteMarker\" || tailEvent[1].type === \"listItemIndent\") ;\n            else {\n              break;\n            }\n          }\n          if (firstBlankLineIndex && (!lineIndex || firstBlankLineIndex < lineIndex)) {\n            listItem3._spread = true;\n          }\n          listItem3.end = Object.assign({}, lineIndex ? events[lineIndex][1].start : event[1].end);\n          events.splice(lineIndex || index2, 0, [\"exit\", listItem3, event[2]]);\n          index2++;\n          length++;\n        }\n        if (event[1].type === \"listItemPrefix\") {\n          const item = {\n            type: \"listItem\",\n            _spread: false,\n            start: Object.assign({}, event[1].start),\n            // @ts-expect-error: well add `end` in a second.\n            end: void 0\n          };\n          listItem3 = item;\n          events.splice(index2, 0, [\"enter\", item, event[2]]);\n          index2++;\n          length++;\n          firstBlankLineIndex = void 0;\n          atMarker = true;\n        }\n      }\n    }\n    events[start][1]._spread = listSpread;\n    return length;\n  }\n  function opener(create2, and) {\n    return open;\n    function open(token) {\n      enter.call(this, create2(token), token);\n      if (and) and.call(this, token);\n    }\n  }\n  function buffer() {\n    this.stack.push({\n      type: \"fragment\",\n      children: []\n    });\n  }\n  function enter(node2, token, errorHandler) {\n    const parent = this.stack[this.stack.length - 1];\n    const siblings = parent.children;\n    siblings.push(node2);\n    this.stack.push(node2);\n    this.tokenStack.push([token, errorHandler || void 0]);\n    node2.position = {\n      start: point(token.start),\n      // @ts-expect-error: `end` will be patched later.\n      end: void 0\n    };\n  }\n  function closer(and) {\n    return close;\n    function close(token) {\n      if (and) and.call(this, token);\n      exit2.call(this, token);\n    }\n  }\n  function exit2(token, onExitError) {\n    const node2 = this.stack.pop();\n    const open = this.tokenStack.pop();\n    if (!open) {\n      throw new Error(\"Cannot close `\" + token.type + \"` (\" + stringifyPosition({\n        start: token.start,\n        end: token.end\n      }) + \"): its not open\");\n    } else if (open[0].type !== token.type) {\n      if (onExitError) {\n        onExitError.call(this, token, open[0]);\n      } else {\n        const handler = open[1] || defaultOnError;\n        handler.call(this, token, open[0]);\n      }\n    }\n    node2.position.end = point(token.end);\n  }\n  function resume() {\n    return toString$1(this.stack.pop());\n  }\n  function onenterlistordered() {\n    this.data.expectingFirstListItemValue = true;\n  }\n  function onenterlistitemvalue(token) {\n    if (this.data.expectingFirstListItemValue) {\n      const ancestor = this.stack[this.stack.length - 2];\n      ancestor.start = Number.parseInt(this.sliceSerialize(token), 10);\n      this.data.expectingFirstListItemValue = void 0;\n    }\n  }\n  function onexitcodefencedfenceinfo() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.lang = data2;\n  }\n  function onexitcodefencedfencemeta() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.meta = data2;\n  }\n  function onexitcodefencedfence() {\n    if (this.data.flowCodeInside) return;\n    this.buffer();\n    this.data.flowCodeInside = true;\n  }\n  function onexitcodefenced() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.value = data2.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g, \"\");\n    this.data.flowCodeInside = void 0;\n  }\n  function onexitcodeindented() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.value = data2.replace(/(\\r?\\n|\\r)$/g, \"\");\n  }\n  function onexitdefinitionlabelstring(token) {\n    const label = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.label = label;\n    node2.identifier = normalizeIdentifier(this.sliceSerialize(token)).toLowerCase();\n  }\n  function onexitdefinitiontitlestring() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.title = data2;\n  }\n  function onexitdefinitiondestinationstring() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.url = data2;\n  }\n  function onexitatxheadingsequence(token) {\n    const node2 = this.stack[this.stack.length - 1];\n    if (!node2.depth) {\n      const depth = this.sliceSerialize(token).length;\n      node2.depth = depth;\n    }\n  }\n  function onexitsetextheadingtext() {\n    this.data.setextHeadingSlurpLineEnding = true;\n  }\n  function onexitsetextheadinglinesequence(token) {\n    const node2 = this.stack[this.stack.length - 1];\n    node2.depth = this.sliceSerialize(token).codePointAt(0) === 61 ? 1 : 2;\n  }\n  function onexitsetextheading() {\n    this.data.setextHeadingSlurpLineEnding = void 0;\n  }\n  function onenterdata(token) {\n    const node2 = this.stack[this.stack.length - 1];\n    const siblings = node2.children;\n    let tail = siblings[siblings.length - 1];\n    if (!tail || tail.type !== \"text\") {\n      tail = text2();\n      tail.position = {\n        start: point(token.start),\n        // @ts-expect-error: well add `end` later.\n        end: void 0\n      };\n      siblings.push(tail);\n    }\n    this.stack.push(tail);\n  }\n  function onexitdata(token) {\n    const tail = this.stack.pop();\n    tail.value += this.sliceSerialize(token);\n    tail.position.end = point(token.end);\n  }\n  function onexitlineending(token) {\n    const context = this.stack[this.stack.length - 1];\n    if (this.data.atHardBreak) {\n      const tail = context.children[context.children.length - 1];\n      tail.position.end = point(token.end);\n      this.data.atHardBreak = void 0;\n      return;\n    }\n    if (!this.data.setextHeadingSlurpLineEnding && config2.canContainEols.includes(context.type)) {\n      onenterdata.call(this, token);\n      onexitdata.call(this, token);\n    }\n  }\n  function onexithardbreak() {\n    this.data.atHardBreak = true;\n  }\n  function onexithtmlflow() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.value = data2;\n  }\n  function onexithtmltext() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.value = data2;\n  }\n  function onexitcodetext() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.value = data2;\n  }\n  function onexitlink() {\n    const node2 = this.stack[this.stack.length - 1];\n    if (this.data.inReference) {\n      const referenceType = this.data.referenceType || \"shortcut\";\n      node2.type += \"Reference\";\n      node2.referenceType = referenceType;\n      delete node2.url;\n      delete node2.title;\n    } else {\n      delete node2.identifier;\n      delete node2.label;\n    }\n    this.data.referenceType = void 0;\n  }\n  function onexitimage() {\n    const node2 = this.stack[this.stack.length - 1];\n    if (this.data.inReference) {\n      const referenceType = this.data.referenceType || \"shortcut\";\n      node2.type += \"Reference\";\n      node2.referenceType = referenceType;\n      delete node2.url;\n      delete node2.title;\n    } else {\n      delete node2.identifier;\n      delete node2.label;\n    }\n    this.data.referenceType = void 0;\n  }\n  function onexitlabeltext(token) {\n    const string2 = this.sliceSerialize(token);\n    const ancestor = this.stack[this.stack.length - 2];\n    ancestor.label = decodeString(string2);\n    ancestor.identifier = normalizeIdentifier(string2).toLowerCase();\n  }\n  function onexitlabel() {\n    const fragment = this.stack[this.stack.length - 1];\n    const value = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    this.data.inReference = true;\n    if (node2.type === \"link\") {\n      const children = fragment.children;\n      node2.children = children;\n    } else {\n      node2.alt = value;\n    }\n  }\n  function onexitresourcedestinationstring() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.url = data2;\n  }\n  function onexitresourcetitlestring() {\n    const data2 = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.title = data2;\n  }\n  function onexitresource() {\n    this.data.inReference = void 0;\n  }\n  function onenterreference() {\n    this.data.referenceType = \"collapsed\";\n  }\n  function onexitreferencestring(token) {\n    const label = this.resume();\n    const node2 = this.stack[this.stack.length - 1];\n    node2.label = label;\n    node2.identifier = normalizeIdentifier(this.sliceSerialize(token)).toLowerCase();\n    this.data.referenceType = \"full\";\n  }\n  function onexitcharacterreferencemarker(token) {\n    this.data.characterReferenceType = token.type;\n  }\n  function onexitcharacterreferencevalue(token) {\n    const data2 = this.sliceSerialize(token);\n    const type = this.data.characterReferenceType;\n    let value;\n    if (type) {\n      value = decodeNumericCharacterReference(data2, type === \"characterReferenceMarkerNumeric\" ? 10 : 16);\n      this.data.characterReferenceType = void 0;\n    } else {\n      const result = decodeNamedCharacterReference(data2);\n      value = result;\n    }\n    const tail = this.stack[this.stack.length - 1];\n    tail.value += value;\n  }\n  function onexitcharacterreference(token) {\n    const tail = this.stack.pop();\n    tail.position.end = point(token.end);\n  }\n  function onexitautolinkprotocol(token) {\n    onexitdata.call(this, token);\n    const node2 = this.stack[this.stack.length - 1];\n    node2.url = this.sliceSerialize(token);\n  }\n  function onexitautolinkemail(token) {\n    onexitdata.call(this, token);\n    const node2 = this.stack[this.stack.length - 1];\n    node2.url = \"mailto:\" + this.sliceSerialize(token);\n  }\n  function blockQuote2() {\n    return {\n      type: \"blockquote\",\n      children: []\n    };\n  }\n  function codeFlow() {\n    return {\n      type: \"code\",\n      lang: null,\n      meta: null,\n      value: \"\"\n    };\n  }\n  function codeText2() {\n    return {\n      type: \"inlineCode\",\n      value: \"\"\n    };\n  }\n  function definition2() {\n    return {\n      type: \"definition\",\n      identifier: \"\",\n      label: null,\n      title: null,\n      url: \"\"\n    };\n  }\n  function emphasis2() {\n    return {\n      type: \"emphasis\",\n      children: []\n    };\n  }\n  function heading2() {\n    return {\n      type: \"heading\",\n      // @ts-expect-error `depth` will be set later.\n      depth: 0,\n      children: []\n    };\n  }\n  function hardBreak2() {\n    return {\n      type: \"break\"\n    };\n  }\n  function html2() {\n    return {\n      type: \"html\",\n      value: \"\"\n    };\n  }\n  function image2() {\n    return {\n      type: \"image\",\n      title: null,\n      url: \"\",\n      alt: null\n    };\n  }\n  function link2() {\n    return {\n      type: \"link\",\n      title: null,\n      url: \"\",\n      children: []\n    };\n  }\n  function list2(token) {\n    return {\n      type: \"list\",\n      ordered: token.type === \"listOrdered\",\n      start: null,\n      spread: token._spread,\n      children: []\n    };\n  }\n  function listItem2(token) {\n    return {\n      type: \"listItem\",\n      spread: token._spread,\n      checked: null,\n      children: []\n    };\n  }\n  function paragraph2() {\n    return {\n      type: \"paragraph\",\n      children: []\n    };\n  }\n  function strong2() {\n    return {\n      type: \"strong\",\n      children: []\n    };\n  }\n  function text2() {\n    return {\n      type: \"text\",\n      value: \"\"\n    };\n  }\n  function thematicBreak2() {\n    return {\n      type: \"thematicBreak\"\n    };\n  }\n}\nfunction point(d4) {\n  return {\n    line: d4.line,\n    column: d4.column,\n    offset: d4.offset\n  };\n}\nfunction configure(combined, extensions) {\n  let index2 = -1;\n  while (++index2 < extensions.length) {\n    const value = extensions[index2];\n    if (Array.isArray(value)) {\n      configure(combined, value);\n    } else {\n      extension(combined, value);\n    }\n  }\n}\nfunction extension(combined, extension2) {\n  let key;\n  for (key in extension2) {\n    if (own$2.call(extension2, key)) {\n      switch (key) {\n        case \"canContainEols\": {\n          const right = extension2[key];\n          if (right) {\n            combined[key].push(...right);\n          }\n          break;\n        }\n        case \"transforms\": {\n          const right = extension2[key];\n          if (right) {\n            combined[key].push(...right);\n          }\n          break;\n        }\n        case \"enter\":\n        case \"exit\": {\n          const right = extension2[key];\n          if (right) {\n            Object.assign(combined[key], right);\n          }\n          break;\n        }\n      }\n    }\n  }\n}\nfunction defaultOnError(left, right) {\n  if (left) {\n    throw new Error(\"Cannot close `\" + left.type + \"` (\" + stringifyPosition({\n      start: left.start,\n      end: left.end\n    }) + \"): a different token (`\" + right.type + \"`, \" + stringifyPosition({\n      start: right.start,\n      end: right.end\n    }) + \") is open\");\n  } else {\n    throw new Error(\"Cannot close document, a token (`\" + right.type + \"`, \" + stringifyPosition({\n      start: right.start,\n      end: right.end\n    }) + \") is still open\");\n  }\n}\nfunction remarkParse(options) {\n  const self2 = this;\n  self2.parser = parser2;\n  function parser2(doc) {\n    return fromMarkdown(doc, {\n      ...self2.data(\"settings\"),\n      ...options,\n      // Note: these options are not in the readme.\n      // The goal is for them to be set by plugins on `data` instead of being\n      // passed by users.\n      extensions: self2.data(\"micromarkExtensions\") || [],\n      mdastExtensions: self2.data(\"fromMarkdownExtensions\") || []\n    });\n  }\n}\nfunction blockquote(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"blockquote\",\n    properties: {},\n    children: state.wrap(state.all(node2), true)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction hardBreak(state, node2) {\n  const result = { type: \"element\", tagName: \"br\", properties: {}, children: [] };\n  state.patch(node2, result);\n  return [state.applyData(node2, result), { type: \"text\", value: \"\\n\" }];\n}\nfunction code(state, node2) {\n  const value = node2.value ? node2.value + \"\\n\" : \"\";\n  const properties = {};\n  if (node2.lang) {\n    properties.className = [\"language-\" + node2.lang];\n  }\n  let result = {\n    type: \"element\",\n    tagName: \"code\",\n    properties,\n    children: [{ type: \"text\", value }]\n  };\n  if (node2.meta) {\n    result.data = { meta: node2.meta };\n  }\n  state.patch(node2, result);\n  result = state.applyData(node2, result);\n  result = { type: \"element\", tagName: \"pre\", properties: {}, children: [result] };\n  state.patch(node2, result);\n  return result;\n}\nfunction strikethrough(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"del\",\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction emphasis(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"em\",\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction footnoteReference(state, node2) {\n  const clobberPrefix = typeof state.options.clobberPrefix === \"string\" ? state.options.clobberPrefix : \"user-content-\";\n  const id2 = String(node2.identifier).toUpperCase();\n  const safeId = normalizeUri(id2.toLowerCase());\n  const index2 = state.footnoteOrder.indexOf(id2);\n  let counter;\n  let reuseCounter = state.footnoteCounts.get(id2);\n  if (reuseCounter === void 0) {\n    reuseCounter = 0;\n    state.footnoteOrder.push(id2);\n    counter = state.footnoteOrder.length;\n  } else {\n    counter = index2 + 1;\n  }\n  reuseCounter += 1;\n  state.footnoteCounts.set(id2, reuseCounter);\n  const link2 = {\n    type: \"element\",\n    tagName: \"a\",\n    properties: {\n      href: \"#\" + clobberPrefix + \"fn-\" + safeId,\n      id: clobberPrefix + \"fnref-\" + safeId + (reuseCounter > 1 ? \"-\" + reuseCounter : \"\"),\n      dataFootnoteRef: true,\n      ariaDescribedBy: [\"footnote-label\"]\n    },\n    children: [{ type: \"text\", value: String(counter) }]\n  };\n  state.patch(node2, link2);\n  const sup = {\n    type: \"element\",\n    tagName: \"sup\",\n    properties: {},\n    children: [link2]\n  };\n  state.patch(node2, sup);\n  return state.applyData(node2, sup);\n}\nfunction heading(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"h\" + node2.depth,\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction html(state, node2) {\n  if (state.options.allowDangerousHtml) {\n    const result = { type: \"raw\", value: node2.value };\n    state.patch(node2, result);\n    return state.applyData(node2, result);\n  }\n  return void 0;\n}\nfunction revert(state, node2) {\n  const subtype = node2.referenceType;\n  let suffix = \"]\";\n  if (subtype === \"collapsed\") {\n    suffix += \"[]\";\n  } else if (subtype === \"full\") {\n    suffix += \"[\" + (node2.label || node2.identifier) + \"]\";\n  }\n  if (node2.type === \"imageReference\") {\n    return [{ type: \"text\", value: \"![\" + node2.alt + suffix }];\n  }\n  const contents = state.all(node2);\n  const head = contents[0];\n  if (head && head.type === \"text\") {\n    head.value = \"[\" + head.value;\n  } else {\n    contents.unshift({ type: \"text\", value: \"[\" });\n  }\n  const tail = contents[contents.length - 1];\n  if (tail && tail.type === \"text\") {\n    tail.value += suffix;\n  } else {\n    contents.push({ type: \"text\", value: suffix });\n  }\n  return contents;\n}\nfunction imageReference(state, node2) {\n  const id2 = String(node2.identifier).toUpperCase();\n  const definition2 = state.definitionById.get(id2);\n  if (!definition2) {\n    return revert(state, node2);\n  }\n  const properties = { src: normalizeUri(definition2.url || \"\"), alt: node2.alt };\n  if (definition2.title !== null && definition2.title !== void 0) {\n    properties.title = definition2.title;\n  }\n  const result = { type: \"element\", tagName: \"img\", properties, children: [] };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction image(state, node2) {\n  const properties = { src: normalizeUri(node2.url) };\n  if (node2.alt !== null && node2.alt !== void 0) {\n    properties.alt = node2.alt;\n  }\n  if (node2.title !== null && node2.title !== void 0) {\n    properties.title = node2.title;\n  }\n  const result = { type: \"element\", tagName: \"img\", properties, children: [] };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction inlineCode(state, node2) {\n  const text2 = { type: \"text\", value: node2.value.replace(/\\r?\\n|\\r/g, \" \") };\n  state.patch(node2, text2);\n  const result = {\n    type: \"element\",\n    tagName: \"code\",\n    properties: {},\n    children: [text2]\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction linkReference(state, node2) {\n  const id2 = String(node2.identifier).toUpperCase();\n  const definition2 = state.definitionById.get(id2);\n  if (!definition2) {\n    return revert(state, node2);\n  }\n  const properties = { href: normalizeUri(definition2.url || \"\") };\n  if (definition2.title !== null && definition2.title !== void 0) {\n    properties.title = definition2.title;\n  }\n  const result = {\n    type: \"element\",\n    tagName: \"a\",\n    properties,\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction link(state, node2) {\n  const properties = { href: normalizeUri(node2.url) };\n  if (node2.title !== null && node2.title !== void 0) {\n    properties.title = node2.title;\n  }\n  const result = {\n    type: \"element\",\n    tagName: \"a\",\n    properties,\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction listItem(state, node2, parent) {\n  const results = state.all(node2);\n  const loose = parent ? listLoose(parent) : listItemLoose(node2);\n  const properties = {};\n  const children = [];\n  if (typeof node2.checked === \"boolean\") {\n    const head = results[0];\n    let paragraph2;\n    if (head && head.type === \"element\" && head.tagName === \"p\") {\n      paragraph2 = head;\n    } else {\n      paragraph2 = { type: \"element\", tagName: \"p\", properties: {}, children: [] };\n      results.unshift(paragraph2);\n    }\n    if (paragraph2.children.length > 0) {\n      paragraph2.children.unshift({ type: \"text\", value: \" \" });\n    }\n    paragraph2.children.unshift({\n      type: \"element\",\n      tagName: \"input\",\n      properties: { type: \"checkbox\", checked: node2.checked, disabled: true },\n      children: []\n    });\n    properties.className = [\"task-list-item\"];\n  }\n  let index2 = -1;\n  while (++index2 < results.length) {\n    const child = results[index2];\n    if (loose || index2 !== 0 || child.type !== \"element\" || child.tagName !== \"p\") {\n      children.push({ type: \"text\", value: \"\\n\" });\n    }\n    if (child.type === \"element\" && child.tagName === \"p\" && !loose) {\n      children.push(...child.children);\n    } else {\n      children.push(child);\n    }\n  }\n  const tail = results[results.length - 1];\n  if (tail && (loose || tail.type !== \"element\" || tail.tagName !== \"p\")) {\n    children.push({ type: \"text\", value: \"\\n\" });\n  }\n  const result = { type: \"element\", tagName: \"li\", properties, children };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction listLoose(node2) {\n  let loose = false;\n  if (node2.type === \"list\") {\n    loose = node2.spread || false;\n    const children = node2.children;\n    let index2 = -1;\n    while (!loose && ++index2 < children.length) {\n      loose = listItemLoose(children[index2]);\n    }\n  }\n  return loose;\n}\nfunction listItemLoose(node2) {\n  const spread = node2.spread;\n  return spread === null || spread === void 0 ? node2.children.length > 1 : spread;\n}\nfunction list(state, node2) {\n  const properties = {};\n  const results = state.all(node2);\n  let index2 = -1;\n  if (typeof node2.start === \"number\" && node2.start !== 1) {\n    properties.start = node2.start;\n  }\n  while (++index2 < results.length) {\n    const child = results[index2];\n    if (child.type === \"element\" && child.tagName === \"li\" && child.properties && Array.isArray(child.properties.className) && child.properties.className.includes(\"task-list-item\")) {\n      properties.className = [\"contains-task-list\"];\n      break;\n    }\n  }\n  const result = {\n    type: \"element\",\n    tagName: node2.ordered ? \"ol\" : \"ul\",\n    properties,\n    children: state.wrap(results, true)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction paragraph(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"p\",\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction root(state, node2) {\n  const result = { type: \"root\", children: state.wrap(state.all(node2)) };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction strong(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"strong\",\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction table(state, node2) {\n  const rows = state.all(node2);\n  const firstRow = rows.shift();\n  const tableContent = [];\n  if (firstRow) {\n    const head = {\n      type: \"element\",\n      tagName: \"thead\",\n      properties: {},\n      children: state.wrap([firstRow], true)\n    };\n    state.patch(node2.children[0], head);\n    tableContent.push(head);\n  }\n  if (rows.length > 0) {\n    const body = {\n      type: \"element\",\n      tagName: \"tbody\",\n      properties: {},\n      children: state.wrap(rows, true)\n    };\n    const start = pointStart(node2.children[1]);\n    const end = pointEnd(node2.children[node2.children.length - 1]);\n    if (start && end) body.position = { start, end };\n    tableContent.push(body);\n  }\n  const result = {\n    type: \"element\",\n    tagName: \"table\",\n    properties: {},\n    children: state.wrap(tableContent, true)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction tableRow(state, node2, parent) {\n  const siblings = parent ? parent.children : void 0;\n  const rowIndex = siblings ? siblings.indexOf(node2) : 1;\n  const tagName = rowIndex === 0 ? \"th\" : \"td\";\n  const align = parent && parent.type === \"table\" ? parent.align : void 0;\n  const length = align ? align.length : node2.children.length;\n  let cellIndex = -1;\n  const cells = [];\n  while (++cellIndex < length) {\n    const cell = node2.children[cellIndex];\n    const properties = {};\n    const alignValue = align ? align[cellIndex] : void 0;\n    if (alignValue) {\n      properties.align = alignValue;\n    }\n    let result2 = { type: \"element\", tagName, properties, children: [] };\n    if (cell) {\n      result2.children = state.all(cell);\n      state.patch(cell, result2);\n      result2 = state.applyData(cell, result2);\n    }\n    cells.push(result2);\n  }\n  const result = {\n    type: \"element\",\n    tagName: \"tr\",\n    properties: {},\n    children: state.wrap(cells, true)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction tableCell(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"td\",\n    // Assume body cell.\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nconst tab = 9;\nconst space = 32;\nfunction trimLines(value) {\n  const source = String(value);\n  const search2 = /\\r?\\n|\\r/g;\n  let match2 = search2.exec(source);\n  let last = 0;\n  const lines = [];\n  while (match2) {\n    lines.push(\n      trimLine(source.slice(last, match2.index), last > 0, true),\n      match2[0]\n    );\n    last = match2.index + match2[0].length;\n    match2 = search2.exec(source);\n  }\n  lines.push(trimLine(source.slice(last), last > 0, false));\n  return lines.join(\"\");\n}\nfunction trimLine(value, start, end) {\n  let startIndex = 0;\n  let endIndex = value.length;\n  if (start) {\n    let code2 = value.codePointAt(startIndex);\n    while (code2 === tab || code2 === space) {\n      startIndex++;\n      code2 = value.codePointAt(startIndex);\n    }\n  }\n  if (end) {\n    let code2 = value.codePointAt(endIndex - 1);\n    while (code2 === tab || code2 === space) {\n      endIndex--;\n      code2 = value.codePointAt(endIndex - 1);\n    }\n  }\n  return endIndex > startIndex ? value.slice(startIndex, endIndex) : \"\";\n}\nfunction text(state, node2) {\n  const result = { type: \"text\", value: trimLines(String(node2.value)) };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction thematicBreak(state, node2) {\n  const result = {\n    type: \"element\",\n    tagName: \"hr\",\n    properties: {},\n    children: []\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nconst handlers = {\n  blockquote,\n  break: hardBreak,\n  code,\n  delete: strikethrough,\n  emphasis,\n  footnoteReference,\n  heading,\n  html,\n  imageReference,\n  image,\n  inlineCode,\n  linkReference,\n  link,\n  listItem,\n  list,\n  paragraph,\n  // @ts-expect-error: root is different, but hard to type.\n  root,\n  strong,\n  table,\n  tableCell,\n  tableRow,\n  text,\n  thematicBreak,\n  toml: ignore,\n  yaml: ignore,\n  definition: ignore,\n  footnoteDefinition: ignore\n};\nfunction ignore() {\n  return void 0;\n}\nconst VOID = -1;\nconst PRIMITIVE = 0;\nconst ARRAY = 1;\nconst OBJECT = 2;\nconst DATE = 3;\nconst REGEXP = 4;\nconst MAP = 5;\nconst SET = 6;\nconst ERROR = 7;\nconst BIGINT = 8;\nconst env = typeof self === \"object\" ? self : globalThis;\nconst deserializer = ($2, _2) => {\n  const as2 = (out, index2) => {\n    $2.set(index2, out);\n    return out;\n  };\n  const unpair = (index2) => {\n    if ($2.has(index2))\n      return $2.get(index2);\n    const [type, value] = _2[index2];\n    switch (type) {\n      case PRIMITIVE:\n      case VOID:\n        return as2(value, index2);\n      case ARRAY: {\n        const arr = as2([], index2);\n        for (const index3 of value)\n          arr.push(unpair(index3));\n        return arr;\n      }\n      case OBJECT: {\n        const object = as2({}, index2);\n        for (const [key, index3] of value)\n          object[unpair(key)] = unpair(index3);\n        return object;\n      }\n      case DATE:\n        return as2(new Date(value), index2);\n      case REGEXP: {\n        const { source, flags } = value;\n        return as2(new RegExp(source, flags), index2);\n      }\n      case MAP: {\n        const map = as2(/* @__PURE__ */ new Map(), index2);\n        for (const [key, index3] of value)\n          map.set(unpair(key), unpair(index3));\n        return map;\n      }\n      case SET: {\n        const set = as2(/* @__PURE__ */ new Set(), index2);\n        for (const index3 of value)\n          set.add(unpair(index3));\n        return set;\n      }\n      case ERROR: {\n        const { name: name2, message } = value;\n        return as2(new env[name2](message), index2);\n      }\n      case BIGINT:\n        return as2(BigInt(value), index2);\n      case \"BigInt\":\n        return as2(Object(BigInt(value)), index2);\n      case \"ArrayBuffer\":\n        return as2(new Uint8Array(value).buffer, value);\n      case \"DataView\": {\n        const { buffer } = new Uint8Array(value);\n        return as2(new DataView(buffer), value);\n      }\n    }\n    return as2(new env[type](value), index2);\n  };\n  return unpair;\n};\nconst deserialize = (serialized) => deserializer(/* @__PURE__ */ new Map(), serialized)(0);\nconst EMPTY = \"\";\nconst { toString } = {};\nconst { keys } = Object;\nconst typeOf = (value) => {\n  const type = typeof value;\n  if (type !== \"object\" || !value)\n    return [PRIMITIVE, type];\n  const asString = toString.call(value).slice(8, -1);\n  switch (asString) {\n    case \"Array\":\n      return [ARRAY, EMPTY];\n    case \"Object\":\n      return [OBJECT, EMPTY];\n    case \"Date\":\n      return [DATE, EMPTY];\n    case \"RegExp\":\n      return [REGEXP, EMPTY];\n    case \"Map\":\n      return [MAP, EMPTY];\n    case \"Set\":\n      return [SET, EMPTY];\n    case \"DataView\":\n      return [ARRAY, asString];\n  }\n  if (asString.includes(\"Array\"))\n    return [ARRAY, asString];\n  if (asString.includes(\"Error\"))\n    return [ERROR, asString];\n  return [OBJECT, asString];\n};\nconst shouldSkip = ([TYPE, type]) => TYPE === PRIMITIVE && (type === \"function\" || type === \"symbol\");\nconst serializer = (strict, json, $2, _2) => {\n  const as2 = (out, value) => {\n    const index2 = _2.push(out) - 1;\n    $2.set(value, index2);\n    return index2;\n  };\n  const pair = (value) => {\n    if ($2.has(value))\n      return $2.get(value);\n    let [TYPE, type] = typeOf(value);\n    switch (TYPE) {\n      case PRIMITIVE: {\n        let entry = value;\n        switch (type) {\n          case \"bigint\":\n            TYPE = BIGINT;\n            entry = value.toString();\n            break;\n          case \"function\":\n          case \"symbol\":\n            if (strict)\n              throw new TypeError(\"unable to serialize \" + type);\n            entry = null;\n            break;\n          case \"undefined\":\n            return as2([VOID], value);\n        }\n        return as2([TYPE, entry], value);\n      }\n      case ARRAY: {\n        if (type) {\n          let spread = value;\n          if (type === \"DataView\") {\n            spread = new Uint8Array(value.buffer);\n          } else if (type === \"ArrayBuffer\") {\n            spread = new Uint8Array(value);\n          }\n          return as2([type, [...spread]], value);\n        }\n        const arr = [];\n        const index2 = as2([TYPE, arr], value);\n        for (const entry of value)\n          arr.push(pair(entry));\n        return index2;\n      }\n      case OBJECT: {\n        if (type) {\n          switch (type) {\n            case \"BigInt\":\n              return as2([type, value.toString()], value);\n            case \"Boolean\":\n            case \"Number\":\n            case \"String\":\n              return as2([type, value.valueOf()], value);\n          }\n        }\n        if (json && \"toJSON\" in value)\n          return pair(value.toJSON());\n        const entries2 = [];\n        const index2 = as2([TYPE, entries2], value);\n        for (const key of keys(value)) {\n          if (strict || !shouldSkip(typeOf(value[key])))\n            entries2.push([pair(key), pair(value[key])]);\n        }\n        return index2;\n      }\n      case DATE:\n        return as2([TYPE, value.toISOString()], value);\n      case REGEXP: {\n        const { source, flags } = value;\n        return as2([TYPE, { source, flags }], value);\n      }\n      case MAP: {\n        const entries2 = [];\n        const index2 = as2([TYPE, entries2], value);\n        for (const [key, entry] of value) {\n          if (strict || !(shouldSkip(typeOf(key)) || shouldSkip(typeOf(entry))))\n            entries2.push([pair(key), pair(entry)]);\n        }\n        return index2;\n      }\n      case SET: {\n        const entries2 = [];\n        const index2 = as2([TYPE, entries2], value);\n        for (const entry of value) {\n          if (strict || !shouldSkip(typeOf(entry)))\n            entries2.push(pair(entry));\n        }\n        return index2;\n      }\n    }\n    const { message } = value;\n    return as2([TYPE, { name: type, message }], value);\n  };\n  return pair;\n};\nconst serialize$1 = (value, { json, lossy } = {}) => {\n  const _2 = [];\n  return serializer(!(json || lossy), !!json, /* @__PURE__ */ new Map(), _2)(value), _2;\n};\nconst structuredClone$1 = typeof structuredClone === \"function\" ? (\n  /* c8 ignore start */\n  (any, options) => options && (\"json\" in options || \"lossy\" in options) ? deserialize(serialize$1(any, options)) : structuredClone(any)\n) : (any, options) => deserialize(serialize$1(any, options));\nfunction defaultFootnoteBackContent(_2, rereferenceIndex) {\n  const result = [{ type: \"text\", value: \"\" }];\n  if (rereferenceIndex > 1) {\n    result.push({\n      type: \"element\",\n      tagName: \"sup\",\n      properties: {},\n      children: [{ type: \"text\", value: String(rereferenceIndex) }]\n    });\n  }\n  return result;\n}\nfunction defaultFootnoteBackLabel(referenceIndex, rereferenceIndex) {\n  return \"Back to reference \" + (referenceIndex + 1) + (rereferenceIndex > 1 ? \"-\" + rereferenceIndex : \"\");\n}\nfunction footer(state) {\n  const clobberPrefix = typeof state.options.clobberPrefix === \"string\" ? state.options.clobberPrefix : \"user-content-\";\n  const footnoteBackContent = state.options.footnoteBackContent || defaultFootnoteBackContent;\n  const footnoteBackLabel = state.options.footnoteBackLabel || defaultFootnoteBackLabel;\n  const footnoteLabel = state.options.footnoteLabel || \"Footnotes\";\n  const footnoteLabelTagName = state.options.footnoteLabelTagName || \"h2\";\n  const footnoteLabelProperties = state.options.footnoteLabelProperties || {\n    className: [\"sr-only\"]\n  };\n  const listItems = [];\n  let referenceIndex = -1;\n  while (++referenceIndex < state.footnoteOrder.length) {\n    const definition2 = state.footnoteById.get(\n      state.footnoteOrder[referenceIndex]\n    );\n    if (!definition2) {\n      continue;\n    }\n    const content2 = state.all(definition2);\n    const id2 = String(definition2.identifier).toUpperCase();\n    const safeId = normalizeUri(id2.toLowerCase());\n    let rereferenceIndex = 0;\n    const backReferences = [];\n    const counts = state.footnoteCounts.get(id2);\n    while (counts !== void 0 && ++rereferenceIndex <= counts) {\n      if (backReferences.length > 0) {\n        backReferences.push({ type: \"text\", value: \" \" });\n      }\n      let children = typeof footnoteBackContent === \"string\" ? footnoteBackContent : footnoteBackContent(referenceIndex, rereferenceIndex);\n      if (typeof children === \"string\") {\n        children = { type: \"text\", value: children };\n      }\n      backReferences.push({\n        type: \"element\",\n        tagName: \"a\",\n        properties: {\n          href: \"#\" + clobberPrefix + \"fnref-\" + safeId + (rereferenceIndex > 1 ? \"-\" + rereferenceIndex : \"\"),\n          dataFootnoteBackref: \"\",\n          ariaLabel: typeof footnoteBackLabel === \"string\" ? footnoteBackLabel : footnoteBackLabel(referenceIndex, rereferenceIndex),\n          className: [\"data-footnote-backref\"]\n        },\n        children: Array.isArray(children) ? children : [children]\n      });\n    }\n    const tail = content2[content2.length - 1];\n    if (tail && tail.type === \"element\" && tail.tagName === \"p\") {\n      const tailTail = tail.children[tail.children.length - 1];\n      if (tailTail && tailTail.type === \"text\") {\n        tailTail.value += \" \";\n      } else {\n        tail.children.push({ type: \"text\", value: \" \" });\n      }\n      tail.children.push(...backReferences);\n    } else {\n      content2.push(...backReferences);\n    }\n    const listItem2 = {\n      type: \"element\",\n      tagName: \"li\",\n      properties: { id: clobberPrefix + \"fn-\" + safeId },\n      children: state.wrap(content2, true)\n    };\n    state.patch(definition2, listItem2);\n    listItems.push(listItem2);\n  }\n  if (listItems.length === 0) {\n    return;\n  }\n  return {\n    type: \"element\",\n    tagName: \"section\",\n    properties: { dataFootnotes: true, className: [\"footnotes\"] },\n    children: [\n      {\n        type: \"element\",\n        tagName: footnoteLabelTagName,\n        properties: {\n          ...structuredClone$1(footnoteLabelProperties),\n          id: \"footnote-label\"\n        },\n        children: [{ type: \"text\", value: footnoteLabel }]\n      },\n      { type: \"text\", value: \"\\n\" },\n      {\n        type: \"element\",\n        tagName: \"ol\",\n        properties: {},\n        children: state.wrap(listItems, true)\n      },\n      { type: \"text\", value: \"\\n\" }\n    ]\n  };\n}\nconst convert$1 = (\n  // Note: overloads in JSDoc cant yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((test?: Test) => Check)\n   * )}\n   */\n  /**\n   * @param {Test} [test]\n   * @returns {Check}\n   */\n  function(test) {\n    if (test === null || test === void 0) {\n      return ok$1;\n    }\n    if (typeof test === \"function\") {\n      return castFactory$1(test);\n    }\n    if (typeof test === \"object\") {\n      return Array.isArray(test) ? anyFactory$1(test) : propsFactory$1(test);\n    }\n    if (typeof test === \"string\") {\n      return typeFactory$1(test);\n    }\n    throw new Error(\"Expected function, string, or object as test\");\n  }\n);\nfunction anyFactory$1(tests) {\n  const checks2 = [];\n  let index2 = -1;\n  while (++index2 < tests.length) {\n    checks2[index2] = convert$1(tests[index2]);\n  }\n  return castFactory$1(any);\n  function any(...parameters) {\n    let index3 = -1;\n    while (++index3 < checks2.length) {\n      if (checks2[index3].apply(this, parameters)) return true;\n    }\n    return false;\n  }\n}\nfunction propsFactory$1(check) {\n  const checkAsRecord = (\n    /** @type {Record<string, unknown>} */\n    check\n  );\n  return castFactory$1(all2);\n  function all2(node2) {\n    const nodeAsRecord = (\n      /** @type {Record<string, unknown>} */\n      /** @type {unknown} */\n      node2\n    );\n    let key;\n    for (key in check) {\n      if (nodeAsRecord[key] !== checkAsRecord[key]) return false;\n    }\n    return true;\n  }\n}\nfunction typeFactory$1(check) {\n  return castFactory$1(type);\n  function type(node2) {\n    return node2 && node2.type === check;\n  }\n}\nfunction castFactory$1(testFunction) {\n  return check;\n  function check(value, index2, parent) {\n    return Boolean(\n      looksLikeANode$1(value) && testFunction.call(\n        this,\n        value,\n        typeof index2 === \"number\" ? index2 : void 0,\n        parent || void 0\n      )\n    );\n  }\n}\nfunction ok$1() {\n  return true;\n}\nfunction looksLikeANode$1(value) {\n  return value !== null && typeof value === \"object\" && \"type\" in value;\n}\nfunction color$1(d4) {\n  return d4;\n}\nconst empty$1 = [];\nconst CONTINUE$1 = true;\nconst EXIT$1 = false;\nconst SKIP$1 = \"skip\";\nfunction visitParents$1(tree, test, visitor, reverse) {\n  let check;\n  if (typeof test === \"function\" && typeof visitor !== \"function\") {\n    reverse = visitor;\n    visitor = test;\n  } else {\n    check = test;\n  }\n  const is2 = convert$1(check);\n  const step = reverse ? -1 : 1;\n  factory(tree, void 0, [])();\n  function factory(node2, index2, parents) {\n    const value = (\n      /** @type {Record<string, unknown>} */\n      node2 && typeof node2 === \"object\" ? node2 : {}\n    );\n    if (typeof value.type === \"string\") {\n      const name2 = (\n        // `hast`\n        typeof value.tagName === \"string\" ? value.tagName : (\n          // `xast`\n          typeof value.name === \"string\" ? value.name : void 0\n        )\n      );\n      Object.defineProperty(visit2, \"name\", {\n        value: \"node (\" + color$1(node2.type + (name2 ? \"<\" + name2 + \">\" : \"\")) + \")\"\n      });\n    }\n    return visit2;\n    function visit2() {\n      let result = empty$1;\n      let subresult;\n      let offset;\n      let grandparents;\n      if (!test || is2(node2, index2, parents[parents.length - 1] || void 0)) {\n        result = toResult$1(visitor(node2, parents));\n        if (result[0] === EXIT$1) {\n          return result;\n        }\n      }\n      if (\"children\" in node2 && node2.children) {\n        const nodeAsParent = (\n          /** @type {UnistParent} */\n          node2\n        );\n        if (nodeAsParent.children && result[0] !== SKIP$1) {\n          offset = (reverse ? nodeAsParent.children.length : -1) + step;\n          grandparents = parents.concat(nodeAsParent);\n          while (offset > -1 && offset < nodeAsParent.children.length) {\n            const child = nodeAsParent.children[offset];\n            subresult = factory(child, offset, grandparents)();\n            if (subresult[0] === EXIT$1) {\n              return subresult;\n            }\n            offset = typeof subresult[1] === \"number\" ? subresult[1] : offset + step;\n          }\n        }\n      }\n      return result;\n    }\n  }\n}\nfunction toResult$1(value) {\n  if (Array.isArray(value)) {\n    return value;\n  }\n  if (typeof value === \"number\") {\n    return [CONTINUE$1, value];\n  }\n  return value === null || value === void 0 ? empty$1 : [value];\n}\nfunction visit$1(tree, testOrVisitor, visitorOrReverse, maybeReverse) {\n  let reverse;\n  let test;\n  let visitor;\n  if (typeof testOrVisitor === \"function\" && true) {\n    test = void 0;\n    visitor = testOrVisitor;\n    reverse = visitorOrReverse;\n  } else {\n    test = testOrVisitor;\n    visitor = visitorOrReverse;\n    reverse = maybeReverse;\n  }\n  visitParents$1(tree, test, overload, reverse);\n  function overload(node2, parents) {\n    const parent = parents[parents.length - 1];\n    const index2 = parent ? parent.children.indexOf(node2) : void 0;\n    return visitor(node2, index2, parent);\n  }\n}\nconst own$1 = {}.hasOwnProperty;\nconst emptyOptions = {};\nfunction createState(tree, options) {\n  const settings = options || emptyOptions;\n  const definitionById = /* @__PURE__ */ new Map();\n  const footnoteById = /* @__PURE__ */ new Map();\n  const footnoteCounts = /* @__PURE__ */ new Map();\n  const handlers$1 = { ...handlers, ...settings.handlers };\n  const state = {\n    all: all2,\n    applyData,\n    definitionById,\n    footnoteById,\n    footnoteCounts,\n    footnoteOrder: [],\n    handlers: handlers$1,\n    one: one2,\n    options: settings,\n    patch,\n    wrap: wrap$1\n  };\n  visit$1(tree, function(node2) {\n    if (node2.type === \"definition\" || node2.type === \"footnoteDefinition\") {\n      const map = node2.type === \"definition\" ? definitionById : footnoteById;\n      const id2 = String(node2.identifier).toUpperCase();\n      if (!map.has(id2)) {\n        map.set(id2, node2);\n      }\n    }\n  });\n  return state;\n  function one2(node2, parent) {\n    const type = node2.type;\n    const handle = state.handlers[type];\n    if (own$1.call(state.handlers, type) && handle) {\n      return handle(state, node2, parent);\n    }\n    if (state.options.passThrough && state.options.passThrough.includes(type)) {\n      if (\"children\" in node2) {\n        const { children, ...shallow } = node2;\n        const result = structuredClone$1(shallow);\n        result.children = state.all(node2);\n        return result;\n      }\n      return structuredClone$1(node2);\n    }\n    const unknown = state.options.unknownHandler || defaultUnknownHandler;\n    return unknown(state, node2, parent);\n  }\n  function all2(parent) {\n    const values = [];\n    if (\"children\" in parent) {\n      const nodes = parent.children;\n      let index2 = -1;\n      while (++index2 < nodes.length) {\n        const result = state.one(nodes[index2], parent);\n        if (result) {\n          if (index2 && nodes[index2 - 1].type === \"break\") {\n            if (!Array.isArray(result) && result.type === \"text\") {\n              result.value = trimMarkdownSpaceStart(result.value);\n            }\n            if (!Array.isArray(result) && result.type === \"element\") {\n              const head = result.children[0];\n              if (head && head.type === \"text\") {\n                head.value = trimMarkdownSpaceStart(head.value);\n              }\n            }\n          }\n          if (Array.isArray(result)) {\n            values.push(...result);\n          } else {\n            values.push(result);\n          }\n        }\n      }\n    }\n    return values;\n  }\n}\nfunction patch(from, to2) {\n  if (from.position) to2.position = position$1(from);\n}\nfunction applyData(from, to2) {\n  let result = to2;\n  if (from && from.data) {\n    const hName = from.data.hName;\n    const hChildren = from.data.hChildren;\n    const hProperties = from.data.hProperties;\n    if (typeof hName === \"string\") {\n      if (result.type === \"element\") {\n        result.tagName = hName;\n      } else {\n        const children = \"children\" in result ? result.children : [result];\n        result = { type: \"element\", tagName: hName, properties: {}, children };\n      }\n    }\n    if (result.type === \"element\" && hProperties) {\n      Object.assign(result.properties, structuredClone$1(hProperties));\n    }\n    if (\"children\" in result && result.children && hChildren !== null && hChildren !== void 0) {\n      result.children = hChildren;\n    }\n  }\n  return result;\n}\nfunction defaultUnknownHandler(state, node2) {\n  const data = node2.data || {};\n  const result = \"value\" in node2 && !(own$1.call(data, \"hProperties\") || own$1.call(data, \"hChildren\")) ? { type: \"text\", value: node2.value } : {\n    type: \"element\",\n    tagName: \"div\",\n    properties: {},\n    children: state.all(node2)\n  };\n  state.patch(node2, result);\n  return state.applyData(node2, result);\n}\nfunction wrap$1(nodes, loose) {\n  const result = [];\n  let index2 = -1;\n  if (loose) {\n    result.push({ type: \"text\", value: \"\\n\" });\n  }\n  while (++index2 < nodes.length) {\n    if (index2) result.push({ type: \"text\", value: \"\\n\" });\n    result.push(nodes[index2]);\n  }\n  if (loose && nodes.length > 0) {\n    result.push({ type: \"text\", value: \"\\n\" });\n  }\n  return result;\n}\nfunction trimMarkdownSpaceStart(value) {\n  let index2 = 0;\n  let code2 = value.charCodeAt(index2);\n  while (code2 === 9 || code2 === 32) {\n    index2++;\n    code2 = value.charCodeAt(index2);\n  }\n  return value.slice(index2);\n}\nfunction toHast(tree, options) {\n  const state = createState(tree, options);\n  const node2 = state.one(tree, void 0);\n  const foot = footer(state);\n  const result = Array.isArray(node2) ? { type: \"root\", children: node2 } : node2 || { type: \"root\", children: [] };\n  if (foot) {\n    result.children.push({ type: \"text\", value: \"\\n\" }, foot);\n  }\n  return result;\n}\nfunction remarkRehype(destination, options) {\n  if (destination && \"run\" in destination) {\n    return async function(tree, file) {\n      const hastTree = (\n        /** @type {HastRoot} */\n        toHast(tree, { file, ...options })\n      );\n      await destination.run(hastTree, file);\n    };\n  }\n  return function(tree, file) {\n    return (\n      /** @type {HastRoot} */\n      toHast(tree, { file, ...destination || options })\n    );\n  };\n}\nfunction bail(error) {\n  if (error) {\n    throw error;\n  }\n}\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar isArray = function isArray2(arr) {\n  if (typeof Array.isArray === \"function\") {\n    return Array.isArray(arr);\n  }\n  return toStr.call(arr) === \"[object Array]\";\n};\nvar isPlainObject$1 = function isPlainObject(obj) {\n  if (!obj || toStr.call(obj) !== \"[object Object]\") {\n    return false;\n  }\n  var hasOwnConstructor = hasOwn.call(obj, \"constructor\");\n  var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\");\n  if (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n    return false;\n  }\n  var key;\n  for (key in obj) {\n  }\n  return typeof key === \"undefined\" || hasOwn.call(obj, key);\n};\nvar setProperty = function setProperty2(target, options) {\n  if (defineProperty && options.name === \"__proto__\") {\n    defineProperty(target, options.name, {\n      enumerable: true,\n      configurable: true,\n      value: options.newValue,\n      writable: true\n    });\n  } else {\n    target[options.name] = options.newValue;\n  }\n};\nvar getProperty = function getProperty2(obj, name2) {\n  if (name2 === \"__proto__\") {\n    if (!hasOwn.call(obj, name2)) {\n      return void 0;\n    } else if (gOPD) {\n      return gOPD(obj, name2).value;\n    }\n  }\n  return obj[name2];\n};\nvar extend = function extend2() {\n  var options, name2, src, copy, copyIsArray, clone2;\n  var target = arguments[0];\n  var i3 = 1;\n  var length = arguments.length;\n  var deep = false;\n  if (typeof target === \"boolean\") {\n    deep = target;\n    target = arguments[1] || {};\n    i3 = 2;\n  }\n  if (target == null || typeof target !== \"object\" && typeof target !== \"function\") {\n    target = {};\n  }\n  for (; i3 < length; ++i3) {\n    options = arguments[i3];\n    if (options != null) {\n      for (name2 in options) {\n        src = getProperty(target, name2);\n        copy = getProperty(options, name2);\n        if (target !== copy) {\n          if (deep && copy && (isPlainObject$1(copy) || (copyIsArray = isArray(copy)))) {\n            if (copyIsArray) {\n              copyIsArray = false;\n              clone2 = src && isArray(src) ? src : [];\n            } else {\n              clone2 = src && isPlainObject$1(src) ? src : {};\n            }\n            setProperty(target, { name: name2, newValue: extend2(deep, clone2, copy) });\n          } else if (typeof copy !== \"undefined\") {\n            setProperty(target, { name: name2, newValue: copy });\n          }\n        }\n      }\n    }\n  }\n  return target;\n};\nconst extend$1 = /* @__PURE__ */ getDefaultExportFromCjs$1(extend);\nfunction isPlainObject2(value) {\n  if (typeof value !== \"object\" || value === null) {\n    return false;\n  }\n  const prototype = Object.getPrototypeOf(value);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in value) && !(Symbol.iterator in value);\n}\nfunction trough() {\n  const fns = [];\n  const pipeline = { run, use };\n  return pipeline;\n  function run(...values) {\n    let middlewareIndex = -1;\n    const callback = values.pop();\n    if (typeof callback !== \"function\") {\n      throw new TypeError(\"Expected function as last argument, not \" + callback);\n    }\n    next(null, ...values);\n    function next(error, ...output) {\n      const fn2 = fns[++middlewareIndex];\n      let index2 = -1;\n      if (error) {\n        callback(error);\n        return;\n      }\n      while (++index2 < values.length) {\n        if (output[index2] === null || output[index2] === void 0) {\n          output[index2] = values[index2];\n        }\n      }\n      values = output;\n      if (fn2) {\n        wrap(fn2, next)(...output);\n      } else {\n        callback(null, ...output);\n      }\n    }\n  }\n  function use(middelware) {\n    if (typeof middelware !== \"function\") {\n      throw new TypeError(\n        \"Expected `middelware` to be a function, not \" + middelware\n      );\n    }\n    fns.push(middelware);\n    return pipeline;\n  }\n}\nfunction wrap(middleware, callback) {\n  let called;\n  return wrapped;\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length;\n    let result;\n    if (fnExpectsCallback) {\n      parameters.push(done);\n    }\n    try {\n      result = middleware.apply(this, parameters);\n    } catch (error) {\n      const exception = (\n        /** @type {Error} */\n        error\n      );\n      if (fnExpectsCallback && called) {\n        throw exception;\n      }\n      return done(exception);\n    }\n    if (!fnExpectsCallback) {\n      if (result && result.then && typeof result.then === \"function\") {\n        result.then(then, done);\n      } else if (result instanceof Error) {\n        done(result);\n      } else {\n        then(result);\n      }\n    }\n  }\n  function done(error, ...output) {\n    if (!called) {\n      called = true;\n      callback(error, ...output);\n    }\n  }\n  function then(value) {\n    done(null, value);\n  }\n}\nconst minpath = { basename, dirname, extname, join, sep: \"/\" };\nfunction basename(path, extname2) {\n  if (extname2 !== void 0 && typeof extname2 !== \"string\") {\n    throw new TypeError('\"ext\" argument must be a string');\n  }\n  assertPath$1(path);\n  let start = 0;\n  let end = -1;\n  let index2 = path.length;\n  let seenNonSlash;\n  if (extname2 === void 0 || extname2.length === 0 || extname2.length > path.length) {\n    while (index2--) {\n      if (path.codePointAt(index2) === 47) {\n        if (seenNonSlash) {\n          start = index2 + 1;\n          break;\n        }\n      } else if (end < 0) {\n        seenNonSlash = true;\n        end = index2 + 1;\n      }\n    }\n    return end < 0 ? \"\" : path.slice(start, end);\n  }\n  if (extname2 === path) {\n    return \"\";\n  }\n  let firstNonSlashEnd = -1;\n  let extnameIndex = extname2.length - 1;\n  while (index2--) {\n    if (path.codePointAt(index2) === 47) {\n      if (seenNonSlash) {\n        start = index2 + 1;\n        break;\n      }\n    } else {\n      if (firstNonSlashEnd < 0) {\n        seenNonSlash = true;\n        firstNonSlashEnd = index2 + 1;\n      }\n      if (extnameIndex > -1) {\n        if (path.codePointAt(index2) === extname2.codePointAt(extnameIndex--)) {\n          if (extnameIndex < 0) {\n            end = index2;\n          }\n        } else {\n          extnameIndex = -1;\n          end = firstNonSlashEnd;\n        }\n      }\n    }\n  }\n  if (start === end) {\n    end = firstNonSlashEnd;\n  } else if (end < 0) {\n    end = path.length;\n  }\n  return path.slice(start, end);\n}\nfunction dirname(path) {\n  assertPath$1(path);\n  if (path.length === 0) {\n    return \".\";\n  }\n  let end = -1;\n  let index2 = path.length;\n  let unmatchedSlash;\n  while (--index2) {\n    if (path.codePointAt(index2) === 47) {\n      if (unmatchedSlash) {\n        end = index2;\n        break;\n      }\n    } else if (!unmatchedSlash) {\n      unmatchedSlash = true;\n    }\n  }\n  return end < 0 ? path.codePointAt(0) === 47 ? \"/\" : \".\" : end === 1 && path.codePointAt(0) === 47 ? \"//\" : path.slice(0, end);\n}\nfunction extname(path) {\n  assertPath$1(path);\n  let index2 = path.length;\n  let end = -1;\n  let startPart = 0;\n  let startDot = -1;\n  let preDotState = 0;\n  let unmatchedSlash;\n  while (index2--) {\n    const code2 = path.codePointAt(index2);\n    if (code2 === 47) {\n      if (unmatchedSlash) {\n        startPart = index2 + 1;\n        break;\n      }\n      continue;\n    }\n    if (end < 0) {\n      unmatchedSlash = true;\n      end = index2 + 1;\n    }\n    if (code2 === 46) {\n      if (startDot < 0) {\n        startDot = index2;\n      } else if (preDotState !== 1) {\n        preDotState = 1;\n      }\n    } else if (startDot > -1) {\n      preDotState = -1;\n    }\n  }\n  if (startDot < 0 || end < 0 || // We saw a non-dot character immediately before the dot.\n  preDotState === 0 || // The (right-most) trimmed path component is exactly `..`.\n  preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return \"\";\n  }\n  return path.slice(startDot, end);\n}\nfunction join(...segments) {\n  let index2 = -1;\n  let joined;\n  while (++index2 < segments.length) {\n    assertPath$1(segments[index2]);\n    if (segments[index2]) {\n      joined = joined === void 0 ? segments[index2] : joined + \"/\" + segments[index2];\n    }\n  }\n  return joined === void 0 ? \".\" : normalize(joined);\n}\nfunction normalize(path) {\n  assertPath$1(path);\n  const absolute = path.codePointAt(0) === 47;\n  let value = normalizeString(path, !absolute);\n  if (value.length === 0 && !absolute) {\n    value = \".\";\n  }\n  if (value.length > 0 && path.codePointAt(path.length - 1) === 47) {\n    value += \"/\";\n  }\n  return absolute ? \"/\" + value : value;\n}\nfunction normalizeString(path, allowAboveRoot) {\n  let result = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let index2 = -1;\n  let code2;\n  let lastSlashIndex;\n  while (++index2 <= path.length) {\n    if (index2 < path.length) {\n      code2 = path.codePointAt(index2);\n    } else if (code2 === 47) {\n      break;\n    } else {\n      code2 = 47;\n    }\n    if (code2 === 47) {\n      if (lastSlash === index2 - 1 || dots === 1) ;\n      else if (lastSlash !== index2 - 1 && dots === 2) {\n        if (result.length < 2 || lastSegmentLength !== 2 || result.codePointAt(result.length - 1) !== 46 || result.codePointAt(result.length - 2) !== 46) {\n          if (result.length > 2) {\n            lastSlashIndex = result.lastIndexOf(\"/\");\n            if (lastSlashIndex !== result.length - 1) {\n              if (lastSlashIndex < 0) {\n                result = \"\";\n                lastSegmentLength = 0;\n              } else {\n                result = result.slice(0, lastSlashIndex);\n                lastSegmentLength = result.length - 1 - result.lastIndexOf(\"/\");\n              }\n              lastSlash = index2;\n              dots = 0;\n              continue;\n            }\n          } else if (result.length > 0) {\n            result = \"\";\n            lastSegmentLength = 0;\n            lastSlash = index2;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          result = result.length > 0 ? result + \"/..\" : \"..\";\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (result.length > 0) {\n          result += \"/\" + path.slice(lastSlash + 1, index2);\n        } else {\n          result = path.slice(lastSlash + 1, index2);\n        }\n        lastSegmentLength = index2 - lastSlash - 1;\n      }\n      lastSlash = index2;\n      dots = 0;\n    } else if (code2 === 46 && dots > -1) {\n      dots++;\n    } else {\n      dots = -1;\n    }\n  }\n  return result;\n}\nfunction assertPath$1(path) {\n  if (typeof path !== \"string\") {\n    throw new TypeError(\n      \"Path must be a string. Received \" + JSON.stringify(path)\n    );\n  }\n}\nconst minproc = { cwd };\nfunction cwd() {\n  return \"/\";\n}\nfunction isUrl(fileUrlOrPath) {\n  return Boolean(\n    fileUrlOrPath !== null && typeof fileUrlOrPath === \"object\" && \"href\" in fileUrlOrPath && fileUrlOrPath.href && \"protocol\" in fileUrlOrPath && fileUrlOrPath.protocol && // @ts-expect-error: indexing is fine.\n    fileUrlOrPath.auth === void 0\n  );\n}\nfunction urlToPath(path) {\n  if (typeof path === \"string\") {\n    path = new URL(path);\n  } else if (!isUrl(path)) {\n    const error = new TypeError(\n      'The \"path\" argument must be of type string or an instance of URL. Received `' + path + \"`\"\n    );\n    error.code = \"ERR_INVALID_ARG_TYPE\";\n    throw error;\n  }\n  if (path.protocol !== \"file:\") {\n    const error = new TypeError(\"The URL must be of scheme file\");\n    error.code = \"ERR_INVALID_URL_SCHEME\";\n    throw error;\n  }\n  return getPathFromURLPosix(path);\n}\nfunction getPathFromURLPosix(url) {\n  if (url.hostname !== \"\") {\n    const error = new TypeError(\n      'File URL host must be \"localhost\" or empty on darwin'\n    );\n    error.code = \"ERR_INVALID_FILE_URL_HOST\";\n    throw error;\n  }\n  const pathname = url.pathname;\n  let index2 = -1;\n  while (++index2 < pathname.length) {\n    if (pathname.codePointAt(index2) === 37 && pathname.codePointAt(index2 + 1) === 50) {\n      const third = pathname.codePointAt(index2 + 2);\n      if (third === 70 || third === 102) {\n        const error = new TypeError(\n          \"File URL path must not include encoded / characters\"\n        );\n        error.code = \"ERR_INVALID_FILE_URL_PATH\";\n        throw error;\n      }\n    }\n  }\n  return decodeURIComponent(pathname);\n}\nconst order = (\n  /** @type {const} */\n  [\n    \"history\",\n    \"path\",\n    \"basename\",\n    \"stem\",\n    \"extname\",\n    \"dirname\"\n  ]\n);\nclass VFile {\n  /**\n   * Create a new virtual file.\n   *\n   * `options` is treated as:\n   *\n   * *   `string` or `Uint8Array`  `{value: options}`\n   * *   `URL`  `{path: options}`\n   * *   `VFile`  shallow copies its data over to the new file\n   * *   `object`  all fields are shallow copied over to the new file\n   *\n   * Path related fields are set in the following order (least specific to\n   * most specific): `history`, `path`, `basename`, `stem`, `extname`,\n   * `dirname`.\n   *\n   * You cannot set `dirname` or `extname` without setting either `history`,\n   * `path`, `basename`, or `stem` too.\n   *\n   * @param {Compatible | null | undefined} [value]\n   *   File value.\n   * @returns\n   *   New instance.\n   */\n  constructor(value) {\n    let options;\n    if (!value) {\n      options = {};\n    } else if (isUrl(value)) {\n      options = { path: value };\n    } else if (typeof value === \"string\" || isUint8Array$1(value)) {\n      options = { value };\n    } else {\n      options = value;\n    }\n    this.cwd = \"cwd\" in options ? \"\" : minproc.cwd();\n    this.data = {};\n    this.history = [];\n    this.messages = [];\n    this.value;\n    this.map;\n    this.result;\n    this.stored;\n    let index2 = -1;\n    while (++index2 < order.length) {\n      const field2 = order[index2];\n      if (field2 in options && options[field2] !== void 0 && options[field2] !== null) {\n        this[field2] = field2 === \"history\" ? [...options[field2]] : options[field2];\n      }\n    }\n    let field;\n    for (field in options) {\n      if (!order.includes(field)) {\n        this[field] = options[field];\n      }\n    }\n  }\n  /**\n   * Get the basename (including extname) (example: `'index.min.js'`).\n   *\n   * @returns {string | undefined}\n   *   Basename.\n   */\n  get basename() {\n    return typeof this.path === \"string\" ? minpath.basename(this.path) : void 0;\n  }\n  /**\n   * Set basename (including extname) (`'index.min.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} basename\n   *   Basename.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set basename(basename2) {\n    assertNonEmpty(basename2, \"basename\");\n    assertPart(basename2, \"basename\");\n    this.path = minpath.join(this.dirname || \"\", basename2);\n  }\n  /**\n   * Get the parent path (example: `'~'`).\n   *\n   * @returns {string | undefined}\n   *   Dirname.\n   */\n  get dirname() {\n    return typeof this.path === \"string\" ? minpath.dirname(this.path) : void 0;\n  }\n  /**\n   * Set the parent path (example: `'~'`).\n   *\n   * Cannot be set if theres no `path` yet.\n   *\n   * @param {string | undefined} dirname\n   *   Dirname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set dirname(dirname2) {\n    assertPath(this.basename, \"dirname\");\n    this.path = minpath.join(dirname2 || \"\", this.basename);\n  }\n  /**\n   * Get the extname (including dot) (example: `'.js'`).\n   *\n   * @returns {string | undefined}\n   *   Extname.\n   */\n  get extname() {\n    return typeof this.path === \"string\" ? minpath.extname(this.path) : void 0;\n  }\n  /**\n   * Set the extname (including dot) (example: `'.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be set if theres no `path` yet.\n   *\n   * @param {string | undefined} extname\n   *   Extname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set extname(extname2) {\n    assertPart(extname2, \"extname\");\n    assertPath(this.dirname, \"extname\");\n    if (extname2) {\n      if (extname2.codePointAt(0) !== 46) {\n        throw new Error(\"`extname` must start with `.`\");\n      }\n      if (extname2.includes(\".\", 1)) {\n        throw new Error(\"`extname` cannot contain multiple dots\");\n      }\n    }\n    this.path = minpath.join(this.dirname, this.stem + (extname2 || \"\"));\n  }\n  /**\n   * Get the full path (example: `'~/index.min.js'`).\n   *\n   * @returns {string}\n   *   Path.\n   */\n  get path() {\n    return this.history[this.history.length - 1];\n  }\n  /**\n   * Set the full path (example: `'~/index.min.js'`).\n   *\n   * Cannot be nullified.\n   * You can set a file URL (a `URL` object with a `file:` protocol) which will\n   * be turned into a path with `url.fileURLToPath`.\n   *\n   * @param {URL | string} path\n   *   Path.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set path(path) {\n    if (isUrl(path)) {\n      path = urlToPath(path);\n    }\n    assertNonEmpty(path, \"path\");\n    if (this.path !== path) {\n      this.history.push(path);\n    }\n  }\n  /**\n   * Get the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * @returns {string | undefined}\n   *   Stem.\n   */\n  get stem() {\n    return typeof this.path === \"string\" ? minpath.basename(this.path, this.extname) : void 0;\n  }\n  /**\n   * Set the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} stem\n   *   Stem.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set stem(stem) {\n    assertNonEmpty(stem, \"stem\");\n    assertPart(stem, \"stem\");\n    this.path = minpath.join(this.dirname || \"\", stem + (this.extname || \"\"));\n  }\n  // Normal prototypal methods.\n  /**\n   * Create a fatal message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `true` (error; file not usable)\n   * and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {never}\n   *   Never.\n   * @throws {VFileMessage}\n   *   Message.\n   */\n  fail(causeOrReason, optionsOrParentOrPlace, origin) {\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin);\n    message.fatal = true;\n    throw message;\n  }\n  /**\n   * Create an info message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `undefined` (info; change\n   * likely not needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  info(causeOrReason, optionsOrParentOrPlace, origin) {\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin);\n    message.fatal = void 0;\n    return message;\n  }\n  /**\n   * Create a message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `false` (warning; change may be\n   * needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  message(causeOrReason, optionsOrParentOrPlace, origin) {\n    const message = new VFileMessage(\n      // @ts-expect-error: the overloads are fine.\n      causeOrReason,\n      optionsOrParentOrPlace,\n      origin\n    );\n    if (this.path) {\n      message.name = this.path + \":\" + message.name;\n      message.file = this.path;\n    }\n    message.fatal = false;\n    this.messages.push(message);\n    return message;\n  }\n  /**\n   * Serialize the file.\n   *\n   * > **Note**: which encodings are supported depends on the engine.\n   * > For info on Node.js, see:\n   * > <https://nodejs.org/api/util.html#whatwg-supported-encodings>.\n   *\n   * @param {string | null | undefined} [encoding='utf8']\n   *   Character encoding to understand `value` as when its a `Uint8Array`\n   *   (default: `'utf-8'`).\n   * @returns {string}\n   *   Serialized file.\n   */\n  toString(encoding) {\n    if (this.value === void 0) {\n      return \"\";\n    }\n    if (typeof this.value === \"string\") {\n      return this.value;\n    }\n    const decoder = new TextDecoder(encoding || void 0);\n    return decoder.decode(this.value);\n  }\n}\nfunction assertPart(part, name2) {\n  if (part && part.includes(minpath.sep)) {\n    throw new Error(\n      \"`\" + name2 + \"` cannot be a path: did not expect `\" + minpath.sep + \"`\"\n    );\n  }\n}\nfunction assertNonEmpty(part, name2) {\n  if (!part) {\n    throw new Error(\"`\" + name2 + \"` cannot be empty\");\n  }\n}\nfunction assertPath(path, name2) {\n  if (!path) {\n    throw new Error(\"Setting `\" + name2 + \"` requires `path` to be set too\");\n  }\n}\nfunction isUint8Array$1(value) {\n  return Boolean(\n    value && typeof value === \"object\" && \"byteLength\" in value && \"byteOffset\" in value\n  );\n}\nconst CallableInstance = (\n  /**\n   * @type {new <Parameters extends Array<unknown>, Result>(property: string | symbol) => (...parameters: Parameters) => Result}\n   */\n  /** @type {unknown} */\n  /**\n   * @this {Function}\n   * @param {string | symbol} property\n   * @returns {(...parameters: Array<unknown>) => unknown}\n   */\n  function(property) {\n    const self2 = this;\n    const constr = self2.constructor;\n    const proto = (\n      /** @type {Record<string | symbol, Function>} */\n      // Prototypes do exist.\n      // type-coverage:ignore-next-line\n      constr.prototype\n    );\n    const value = proto[property];\n    const apply2 = function() {\n      return value.apply(apply2, arguments);\n    };\n    Object.setPrototypeOf(apply2, proto);\n    return apply2;\n  }\n);\nconst own = {}.hasOwnProperty;\nclass Processor extends CallableInstance {\n  /**\n   * Create a processor.\n   */\n  constructor() {\n    super(\"copy\");\n    this.Compiler = void 0;\n    this.Parser = void 0;\n    this.attachers = [];\n    this.compiler = void 0;\n    this.freezeIndex = -1;\n    this.frozen = void 0;\n    this.namespace = {};\n    this.parser = void 0;\n    this.transformers = trough();\n  }\n  /**\n   * Copy a processor.\n   *\n   * @deprecated\n   *   This is a private internal method and should not be used.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   New *unfrozen* processor ({@linkcode Processor}) that is\n   *   configured to work the same as its ancestor.\n   *   When the descendant processor is configured in the future it does not\n   *   affect the ancestral processor.\n   */\n  copy() {\n    const destination = (\n      /** @type {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>} */\n      new Processor()\n    );\n    let index2 = -1;\n    while (++index2 < this.attachers.length) {\n      const attacher = this.attachers[index2];\n      destination.use(...attacher);\n    }\n    destination.data(extend$1(true, {}, this.namespace));\n    return destination;\n  }\n  /**\n   * Configure the processor with info available to all plugins.\n   * Information is stored in an object.\n   *\n   * Typically, options can be given to a specific plugin, but sometimes it\n   * makes sense to have information shared with several plugins.\n   * For example, a list of HTML elements that are self-closing, which is\n   * needed during all phases.\n   *\n   * > **Note**: setting information cannot occur on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * > **Note**: to register custom data in TypeScript, augment the\n   * > {@linkcode Data} interface.\n   *\n   * @example\n   *   This example show how to get and set info:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   const processor = unified().data('alpha', 'bravo')\n   *\n   *   processor.data('alpha') // => 'bravo'\n   *\n   *   processor.data() // => {alpha: 'bravo'}\n   *\n   *   processor.data({charlie: 'delta'})\n   *\n   *   processor.data() // => {charlie: 'delta'}\n   *   ```\n   *\n   * @template {keyof Data} Key\n   *\n   * @overload\n   * @returns {Data}\n   *\n   * @overload\n   * @param {Data} dataset\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Key} key\n   * @returns {Data[Key]}\n   *\n   * @overload\n   * @param {Key} key\n   * @param {Data[Key]} value\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @param {Data | Key} [key]\n   *   Key to get or set, or entire dataset to set, or nothing to get the\n   *   entire dataset (optional).\n   * @param {Data[Key]} [value]\n   *   Value to set (optional).\n   * @returns {unknown}\n   *   The current processor when setting, the value at `key` when getting, or\n   *   the entire dataset when getting without key.\n   */\n  data(key, value) {\n    if (typeof key === \"string\") {\n      if (arguments.length === 2) {\n        assertUnfrozen(\"data\", this.frozen);\n        this.namespace[key] = value;\n        return this;\n      }\n      return own.call(this.namespace, key) && this.namespace[key] || void 0;\n    }\n    if (key) {\n      assertUnfrozen(\"data\", this.frozen);\n      this.namespace = key;\n      return this;\n    }\n    return this.namespace;\n  }\n  /**\n   * Freeze a processor.\n   *\n   * Frozen processors are meant to be extended and not to be configured\n   * directly.\n   *\n   * When a processor is frozen it cannot be unfrozen.\n   * New processors working the same way can be created by calling the\n   * processor.\n   *\n   * Its possible to freeze processors explicitly by calling `.freeze()`.\n   * Processors freeze automatically when `.parse()`, `.run()`, `.runSync()`,\n   * `.stringify()`, `.process()`, or `.processSync()` are called.\n   *\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   The current processor.\n   */\n  freeze() {\n    if (this.frozen) {\n      return this;\n    }\n    const self2 = (\n      /** @type {Processor} */\n      /** @type {unknown} */\n      this\n    );\n    while (++this.freezeIndex < this.attachers.length) {\n      const [attacher, ...options] = this.attachers[this.freezeIndex];\n      if (options[0] === false) {\n        continue;\n      }\n      if (options[0] === true) {\n        options[0] = void 0;\n      }\n      const transformer = attacher.call(self2, ...options);\n      if (typeof transformer === \"function\") {\n        this.transformers.use(transformer);\n      }\n    }\n    this.frozen = true;\n    this.freezeIndex = Number.POSITIVE_INFINITY;\n    return this;\n  }\n  /**\n   * Parse text to a syntax tree.\n   *\n   * > **Note**: `parse` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `parse` performs the parse phase, not the run phase or other\n   * > phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   file to parse (optional); typically `string` or `VFile`; any value\n   *   accepted as `x` in `new VFile(x)`.\n   * @returns {ParseTree extends undefined ? Node : ParseTree}\n   *   Syntax tree representing `file`.\n   */\n  parse(file) {\n    this.freeze();\n    const realFile = vfile(file);\n    const parser2 = this.parser || this.Parser;\n    assertParser(\"parse\", parser2);\n    return parser2(String(realFile), realFile);\n  }\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * > **Note**: `process` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `process` performs the parse, run, and stringify phases.\n   *\n   * @overload\n   * @param {Compatible | undefined} file\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<VFileWithOutput<CompileResult>>}\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`]; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>> | undefined} [done]\n   *   Callback (optional).\n   * @returns {Promise<VFile> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise a promise, rejected with a fatal error or resolved with the\n   *   processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If youre using a compiler that doesnt serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  process(file, done) {\n    const self2 = this;\n    this.freeze();\n    assertParser(\"process\", this.parser || this.Parser);\n    assertCompiler(\"process\", this.compiler || this.Compiler);\n    return done ? executor(void 0, done) : new Promise(executor);\n    function executor(resolve, reject) {\n      const realFile = vfile(file);\n      const parseTree = (\n        /** @type {HeadTree extends undefined ? Node : HeadTree} */\n        /** @type {unknown} */\n        self2.parse(realFile)\n      );\n      self2.run(parseTree, realFile, function(error, tree, file2) {\n        if (error || !tree || !file2) {\n          return realDone(error);\n        }\n        const compileTree = (\n          /** @type {CompileTree extends undefined ? Node : CompileTree} */\n          /** @type {unknown} */\n          tree\n        );\n        const compileResult = self2.stringify(compileTree, file2);\n        if (looksLikeAValue(compileResult)) {\n          file2.value = compileResult;\n        } else {\n          file2.result = compileResult;\n        }\n        realDone(\n          error,\n          /** @type {VFileWithOutput<CompileResult>} */\n          file2\n        );\n      });\n      function realDone(error, file2) {\n        if (error || !file2) {\n          reject(error);\n        } else if (resolve) {\n          resolve(file2);\n        } else {\n          done(void 0, file2);\n        }\n      }\n    }\n  }\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > **Note**: `processSync` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `processSync` performs the parse, run, and stringify phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @returns {VFileWithOutput<CompileResult>}\n   *   The processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If youre using a compiler that doesnt serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  processSync(file) {\n    let complete = false;\n    let result;\n    this.freeze();\n    assertParser(\"processSync\", this.parser || this.Parser);\n    assertCompiler(\"processSync\", this.compiler || this.Compiler);\n    this.process(file, realDone);\n    assertDone(\"processSync\", \"process\", complete);\n    return result;\n    function realDone(error, file2) {\n      complete = true;\n      bail(error);\n      result = file2;\n    }\n  }\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * > **Note**: `run` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `run` performs the run phase, not other phases.\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} file\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree>}\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {(\n   *   RunCallback<TailTree extends undefined ? Node : TailTree> |\n   *   Compatible\n   * )} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} [done]\n   *   Callback (optional).\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise, a promise rejected with a fatal error or resolved with the\n   *   transformed tree.\n   */\n  run(tree, file, done) {\n    assertNode(tree);\n    this.freeze();\n    const transformers = this.transformers;\n    if (!done && typeof file === \"function\") {\n      done = file;\n      file = void 0;\n    }\n    return done ? executor(void 0, done) : new Promise(executor);\n    function executor(resolve, reject) {\n      const realFile = vfile(file);\n      transformers.run(tree, realFile, realDone);\n      function realDone(error, outputTree, file2) {\n        const resultingTree = (\n          /** @type {TailTree extends undefined ? Node : TailTree} */\n          outputTree || tree\n        );\n        if (error) {\n          reject(error);\n        } else if (resolve) {\n          resolve(resultingTree);\n        } else {\n          done(void 0, resultingTree, file2);\n        }\n      }\n    }\n  }\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > **Note**: `runSync` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `runSync` performs the run phase, not other phases.\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {TailTree extends undefined ? Node : TailTree}\n   *   Transformed tree.\n   */\n  runSync(tree, file) {\n    let complete = false;\n    let result;\n    this.run(tree, file, realDone);\n    assertDone(\"runSync\", \"run\", complete);\n    return result;\n    function realDone(error, tree2) {\n      bail(error);\n      result = tree2;\n      complete = true;\n    }\n  }\n  /**\n   * Compile a syntax tree.\n   *\n   * > **Note**: `stringify` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `stringify` performs the stringify phase, not the run phase\n   * > or other phases.\n   *\n   * @param {CompileTree extends undefined ? Node : CompileTree} tree\n   *   Tree to compile.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {CompileResult extends undefined ? Value : CompileResult}\n   *   Textual representation of the tree (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most compilers\n   *   > return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If youre using a compiler that doesnt serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  stringify(tree, file) {\n    this.freeze();\n    const realFile = vfile(file);\n    const compiler2 = this.compiler || this.Compiler;\n    assertCompiler(\"stringify\", compiler2);\n    assertNode(tree);\n    return compiler2(tree, realFile);\n  }\n  /**\n   * Configure the processor to use a plugin, a list of usable values, or a\n   * preset.\n   *\n   * If the processor is already using a plugin, the previous plugin\n   * configuration is changed based on the options that are passed in.\n   * In other words, the plugin is not added a second time.\n   *\n   * > **Note**: `use` cannot be called on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * @example\n   *   There are many ways to pass plugins to `.use()`.\n   *   This example gives an overview:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   unified()\n   *     // Plugin with options:\n   *     .use(pluginA, {x: true, y: true})\n   *     // Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):\n   *     .use(pluginA, {y: false, z: true})\n   *     // Plugins:\n   *     .use([pluginB, pluginC])\n   *     // Two plugins, the second with options:\n   *     .use([pluginD, [pluginE, {}]])\n   *     // Preset with plugins and settings:\n   *     .use({plugins: [pluginF, [pluginG, {}]], settings: {position: false}})\n   *     // Settings only:\n   *     .use({settings: {position: false}})\n   *   ```\n   *\n   * @template {Array<unknown>} [Parameters=[]]\n   * @template {Node | string | undefined} [Input=undefined]\n   * @template [Output=Input]\n   *\n   * @overload\n   * @param {Preset | null | undefined} [preset]\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {PluggableList} list\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Plugin<Parameters, Input, Output>} plugin\n   * @param {...(Parameters | [boolean])} parameters\n   * @returns {UsePlugin<ParseTree, HeadTree, TailTree, CompileTree, CompileResult, Input, Output>}\n   *\n   * @param {PluggableList | Plugin | Preset | null | undefined} value\n   *   Usable value.\n   * @param {...unknown} parameters\n   *   Parameters, when a plugin is given as a usable value.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   Current processor.\n   */\n  use(value, ...parameters) {\n    const attachers = this.attachers;\n    const namespace = this.namespace;\n    assertUnfrozen(\"use\", this.frozen);\n    if (value === null || value === void 0) ;\n    else if (typeof value === \"function\") {\n      addPlugin(value, parameters);\n    } else if (typeof value === \"object\") {\n      if (Array.isArray(value)) {\n        addList(value);\n      } else {\n        addPreset(value);\n      }\n    } else {\n      throw new TypeError(\"Expected usable value, not `\" + value + \"`\");\n    }\n    return this;\n    function add(value2) {\n      if (typeof value2 === \"function\") {\n        addPlugin(value2, []);\n      } else if (typeof value2 === \"object\") {\n        if (Array.isArray(value2)) {\n          const [plugin, ...parameters2] = (\n            /** @type {PluginTuple<Array<unknown>>} */\n            value2\n          );\n          addPlugin(plugin, parameters2);\n        } else {\n          addPreset(value2);\n        }\n      } else {\n        throw new TypeError(\"Expected usable value, not `\" + value2 + \"`\");\n      }\n    }\n    function addPreset(result) {\n      if (!(\"plugins\" in result) && !(\"settings\" in result)) {\n        throw new Error(\n          \"Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither\"\n        );\n      }\n      addList(result.plugins);\n      if (result.settings) {\n        namespace.settings = extend$1(true, namespace.settings, result.settings);\n      }\n    }\n    function addList(plugins) {\n      let index2 = -1;\n      if (plugins === null || plugins === void 0) ;\n      else if (Array.isArray(plugins)) {\n        while (++index2 < plugins.length) {\n          const thing = plugins[index2];\n          add(thing);\n        }\n      } else {\n        throw new TypeError(\"Expected a list of plugins, not `\" + plugins + \"`\");\n      }\n    }\n    function addPlugin(plugin, parameters2) {\n      let index2 = -1;\n      let entryIndex = -1;\n      while (++index2 < attachers.length) {\n        if (attachers[index2][0] === plugin) {\n          entryIndex = index2;\n          break;\n        }\n      }\n      if (entryIndex === -1) {\n        attachers.push([plugin, ...parameters2]);\n      } else if (parameters2.length > 0) {\n        let [primary, ...rest] = parameters2;\n        const currentPrimary = attachers[entryIndex][1];\n        if (isPlainObject2(currentPrimary) && isPlainObject2(primary)) {\n          primary = extend$1(true, currentPrimary, primary);\n        }\n        attachers[entryIndex] = [plugin, primary, ...rest];\n      }\n    }\n  }\n}\nconst unified = new Processor().freeze();\nfunction assertParser(name2, value) {\n  if (typeof value !== \"function\") {\n    throw new TypeError(\"Cannot `\" + name2 + \"` without `parser`\");\n  }\n}\nfunction assertCompiler(name2, value) {\n  if (typeof value !== \"function\") {\n    throw new TypeError(\"Cannot `\" + name2 + \"` without `compiler`\");\n  }\n}\nfunction assertUnfrozen(name2, frozen) {\n  if (frozen) {\n    throw new Error(\n      \"Cannot call `\" + name2 + \"` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.\"\n    );\n  }\n}\nfunction assertNode(node2) {\n  if (!isPlainObject2(node2) || typeof node2.type !== \"string\") {\n    throw new TypeError(\"Expected node, got `\" + node2 + \"`\");\n  }\n}\nfunction assertDone(name2, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      \"`\" + name2 + \"` finished async. Use `\" + asyncName + \"` instead\"\n    );\n  }\n}\nfunction vfile(value) {\n  return looksLikeAVFile(value) ? value : new VFile(value);\n}\nfunction looksLikeAVFile(value) {\n  return Boolean(\n    value && typeof value === \"object\" && \"message\" in value && \"messages\" in value\n  );\n}\nfunction looksLikeAValue(value) {\n  return typeof value === \"string\" || isUint8Array(value);\n}\nfunction isUint8Array(value) {\n  return Boolean(\n    value && typeof value === \"object\" && \"byteLength\" in value && \"byteOffset\" in value\n  );\n}\nconst convert = (\n  // Note: overloads in JSDoc cant yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((test?: Test) => Check)\n   * )}\n   */\n  /**\n   * @param {Test} [test]\n   * @returns {Check}\n   */\n  function(test) {\n    if (test === null || test === void 0) {\n      return ok;\n    }\n    if (typeof test === \"function\") {\n      return castFactory(test);\n    }\n    if (typeof test === \"object\") {\n      return Array.isArray(test) ? anyFactory(test) : propsFactory(test);\n    }\n    if (typeof test === \"string\") {\n      return typeFactory(test);\n    }\n    throw new Error(\"Expected function, string, or object as test\");\n  }\n);\nfunction anyFactory(tests) {\n  const checks2 = [];\n  let index2 = -1;\n  while (++index2 < tests.length) {\n    checks2[index2] = convert(tests[index2]);\n  }\n  return castFactory(any);\n  function any(...parameters) {\n    let index3 = -1;\n    while (++index3 < checks2.length) {\n      if (checks2[index3].apply(this, parameters)) return true;\n    }\n    return false;\n  }\n}\nfunction propsFactory(check) {\n  const checkAsRecord = (\n    /** @type {Record<string, unknown>} */\n    check\n  );\n  return castFactory(all2);\n  function all2(node2) {\n    const nodeAsRecord = (\n      /** @type {Record<string, unknown>} */\n      /** @type {unknown} */\n      node2\n    );\n    let key;\n    for (key in check) {\n      if (nodeAsRecord[key] !== checkAsRecord[key]) return false;\n    }\n    return true;\n  }\n}\nfunction typeFactory(check) {\n  return castFactory(type);\n  function type(node2) {\n    return node2 && node2.type === check;\n  }\n}\nfunction castFactory(testFunction) {\n  return check;\n  function check(value, index2, parent) {\n    return Boolean(\n      looksLikeANode(value) && testFunction.call(\n        this,\n        value,\n        typeof index2 === \"number\" ? index2 : void 0,\n        parent || void 0\n      )\n    );\n  }\n}\nfunction ok() {\n  return true;\n}\nfunction looksLikeANode(value) {\n  return value !== null && typeof value === \"object\" && \"type\" in value;\n}\nfunction color(d4) {\n  return d4;\n}\nconst empty = [];\nconst CONTINUE = true;\nconst EXIT = false;\nconst SKIP = \"skip\";\nfunction visitParents(tree, test, visitor, reverse) {\n  let check;\n  if (typeof test === \"function\" && typeof visitor !== \"function\") {\n    reverse = visitor;\n    visitor = test;\n  } else {\n    check = test;\n  }\n  const is2 = convert(check);\n  const step = reverse ? -1 : 1;\n  factory(tree, void 0, [])();\n  function factory(node2, index2, parents) {\n    const value = (\n      /** @type {Record<string, unknown>} */\n      node2 && typeof node2 === \"object\" ? node2 : {}\n    );\n    if (typeof value.type === \"string\") {\n      const name2 = (\n        // `hast`\n        typeof value.tagName === \"string\" ? value.tagName : (\n          // `xast`\n          typeof value.name === \"string\" ? value.name : void 0\n        )\n      );\n      Object.defineProperty(visit2, \"name\", {\n        value: \"node (\" + color(node2.type + (name2 ? \"<\" + name2 + \">\" : \"\")) + \")\"\n      });\n    }\n    return visit2;\n    function visit2() {\n      let result = empty;\n      let subresult;\n      let offset;\n      let grandparents;\n      if (!test || is2(node2, index2, parents[parents.length - 1] || void 0)) {\n        result = toResult(visitor(node2, parents));\n        if (result[0] === EXIT) {\n          return result;\n        }\n      }\n      if (\"children\" in node2 && node2.children) {\n        const nodeAsParent = (\n          /** @type {UnistParent} */\n          node2\n        );\n        if (nodeAsParent.children && result[0] !== SKIP) {\n          offset = (reverse ? nodeAsParent.children.length : -1) + step;\n          grandparents = parents.concat(nodeAsParent);\n          while (offset > -1 && offset < nodeAsParent.children.length) {\n            const child = nodeAsParent.children[offset];\n            subresult = factory(child, offset, grandparents)();\n            if (subresult[0] === EXIT) {\n              return subresult;\n            }\n            offset = typeof subresult[1] === \"number\" ? subresult[1] : offset + step;\n          }\n        }\n      }\n      return result;\n    }\n  }\n}\nfunction toResult(value) {\n  if (Array.isArray(value)) {\n    return value;\n  }\n  if (typeof value === \"number\") {\n    return [CONTINUE, value];\n  }\n  return value === null || value === void 0 ? empty : [value];\n}\nfunction visit(tree, testOrVisitor, visitorOrReverse, maybeReverse) {\n  let reverse;\n  let test;\n  let visitor;\n  if (typeof testOrVisitor === \"function\" && true) {\n    test = void 0;\n    visitor = testOrVisitor;\n    reverse = visitorOrReverse;\n  } else {\n    test = testOrVisitor;\n    visitor = visitorOrReverse;\n    reverse = maybeReverse;\n  }\n  visitParents(tree, test, overload, reverse);\n  function overload(node2, parents) {\n    const parent = parents[parents.length - 1];\n    const index2 = parent ? parent.children.indexOf(node2) : void 0;\n    return visitor(node2, index2, parent);\n  }\n}\nconst changelog = \"https://github.com/remarkjs/react-markdown/blob/main/changelog.md\";\nconst emptyPlugins = [];\nconst emptyRemarkRehypeOptions = { allowDangerousHtml: true };\nconst safeProtocol = /^(https?|ircs?|mailto|xmpp)$/i;\nconst deprecations = [\n  { from: \"astPlugins\", id: \"remove-buggy-html-in-markdown-parser\" },\n  { from: \"allowDangerousHtml\", id: \"remove-buggy-html-in-markdown-parser\" },\n  {\n    from: \"allowNode\",\n    id: \"replace-allownode-allowedtypes-and-disallowedtypes\",\n    to: \"allowElement\"\n  },\n  {\n    from: \"allowedTypes\",\n    id: \"replace-allownode-allowedtypes-and-disallowedtypes\",\n    to: \"allowedElements\"\n  },\n  { from: \"className\", id: \"remove-classname\" },\n  {\n    from: \"disallowedTypes\",\n    id: \"replace-allownode-allowedtypes-and-disallowedtypes\",\n    to: \"disallowedElements\"\n  },\n  { from: \"escapeHtml\", id: \"remove-buggy-html-in-markdown-parser\" },\n  { from: \"includeElementIndex\", id: \"#remove-includeelementindex\" },\n  {\n    from: \"includeNodeIndex\",\n    id: \"change-includenodeindex-to-includeelementindex\"\n  },\n  { from: \"linkTarget\", id: \"remove-linktarget\" },\n  { from: \"plugins\", id: \"change-plugins-to-remarkplugins\", to: \"remarkPlugins\" },\n  { from: \"rawSourcePos\", id: \"#remove-rawsourcepos\" },\n  { from: \"renderers\", id: \"change-renderers-to-components\", to: \"components\" },\n  { from: \"source\", id: \"change-source-to-children\", to: \"children\" },\n  { from: \"sourcePos\", id: \"#remove-sourcepos\" },\n  { from: \"transformImageUri\", id: \"#add-urltransform\", to: \"urlTransform\" },\n  { from: \"transformLinkUri\", id: \"#add-urltransform\", to: \"urlTransform\" }\n];\nfunction Markdown(options) {\n  const processor = createProcessor(options);\n  const file = createFile(options);\n  return post(processor.runSync(processor.parse(file), file), options);\n}\nfunction createProcessor(options) {\n  const rehypePlugins = options.rehypePlugins || emptyPlugins;\n  const remarkPlugins = options.remarkPlugins || emptyPlugins;\n  const remarkRehypeOptions = options.remarkRehypeOptions ? { ...options.remarkRehypeOptions, ...emptyRemarkRehypeOptions } : emptyRemarkRehypeOptions;\n  const processor = unified().use(remarkParse).use(remarkPlugins).use(remarkRehype, remarkRehypeOptions).use(rehypePlugins);\n  return processor;\n}\nfunction createFile(options) {\n  const children = options.children || \"\";\n  const file = new VFile();\n  if (typeof children === \"string\") {\n    file.value = children;\n  }\n  return file;\n}\nfunction post(tree, options) {\n  const allowedElements = options.allowedElements;\n  const allowElement = options.allowElement;\n  const components = options.components;\n  const disallowedElements = options.disallowedElements;\n  const skipHtml = options.skipHtml;\n  const unwrapDisallowed = options.unwrapDisallowed;\n  const urlTransform = options.urlTransform || defaultUrlTransform;\n  for (const deprecation of deprecations) {\n    if (Object.hasOwn(options, deprecation.from)) {\n      unreachable(\n        \"Unexpected `\" + deprecation.from + \"` prop, \" + (deprecation.to ? \"use `\" + deprecation.to + \"` instead\" : \"remove it\") + \" (see <\" + changelog + \"#\" + deprecation.id + \"> for more info)\"\n      );\n    }\n  }\n  visit(tree, transform);\n  return toJsxRuntime(tree, {\n    Fragment: jsxRuntimeExports.Fragment,\n    components,\n    ignoreInvalidStyle: true,\n    jsx: jsxRuntimeExports.jsx,\n    jsxs: jsxRuntimeExports.jsxs,\n    passKeys: true,\n    passNode: true\n  });\n  function transform(node2, index2, parent) {\n    if (node2.type === \"raw\" && parent && typeof index2 === \"number\") {\n      if (skipHtml) {\n        parent.children.splice(index2, 1);\n      } else {\n        parent.children[index2] = { type: \"text\", value: node2.value };\n      }\n      return index2;\n    }\n    if (node2.type === \"element\") {\n      let key;\n      for (key in urlAttributes) {\n        if (Object.hasOwn(urlAttributes, key) && Object.hasOwn(node2.properties, key)) {\n          const value = node2.properties[key];\n          const test = urlAttributes[key];\n          if (test === null || test.includes(node2.tagName)) {\n            node2.properties[key] = urlTransform(String(value || \"\"), key, node2);\n          }\n        }\n      }\n    }\n    if (node2.type === \"element\") {\n      let remove2 = allowedElements ? !allowedElements.includes(node2.tagName) : disallowedElements ? disallowedElements.includes(node2.tagName) : false;\n      if (!remove2 && allowElement && typeof index2 === \"number\") {\n        remove2 = !allowElement(node2, index2, parent);\n      }\n      if (remove2 && parent && typeof index2 === \"number\") {\n        if (unwrapDisallowed && node2.children) {\n          parent.children.splice(index2, 1, ...node2.children);\n        } else {\n          parent.children.splice(index2, 1);\n        }\n        return index2;\n      }\n    }\n  }\n}\nfunction defaultUrlTransform(value) {\n  const colon = value.indexOf(\":\");\n  const questionMark = value.indexOf(\"?\");\n  const numberSign = value.indexOf(\"#\");\n  const slash = value.indexOf(\"/\");\n  if (\n    // If there is no protocol, its relative.\n    colon === -1 || // If the first colon is after a `?`, `#`, or `/`, its not a protocol.\n    slash !== -1 && colon > slash || questionMark !== -1 && colon > questionMark || numberSign !== -1 && colon > numberSign || // It is a protocol, it should be allowed.\n    safeProtocol.test(value.slice(0, colon))\n  ) {\n    return value;\n  }\n  return \"\";\n}\nconst careAiCardTypes = {\n  support: \"Support card\",\n  consult: \"Consult card\",\n  listing: \"Listing card\",\n  doctor_profile: \"Doctor profile card\"\n};\nconst pelEventKeys = {\n  card_type: \"card_type\",\n  messsage_status: \"Message Status\",\n  account_id: \"Account ID\",\n  channel_id: \"Channel ID\"\n};\nconst formatTime = (timestamp) => {\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString([], {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    hour12: true\n  });\n};\nconst SuggestedReplies = ({\n  replies,\n  setIsSuggestedReplyMsgSent,\n  setWaitingForResponseMap,\n  channelUrl,\n  accountId,\n  trackEvent\n}) => {\n  const {\n    actions: { sendUserMessage }\n  } = useGroupChannel();\n  const isStillWaitingForResponse = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(false);\n  const handleSendMessage = async (reply) => {\n    setIsSuggestedReplyMsgSent(true);\n    const messageSentData = await sendUserMessage({ message: reply });\n    let timerRef1, timerRef2;\n    if (messageSentData && messageSentData.sendingStatus) {\n      clearTimeout(timerRef1);\n      clearTimeout(timerRef2);\n      timerRef1 = setTimeout(() => {\n        setWaitingForResponseMap((prev) => ({\n          ...prev,\n          [channelUrl]: true\n        }));\n        timerRef2 = setTimeout(() => {\n          setWaitingForResponseMap((prev) => ({\n            ...prev,\n            [channelUrl]: false\n          }));\n          if (isStillWaitingForResponse.current) {\n            isStillWaitingForResponse.current = false;\n            trackEvent(\"CARE_AI_CHAT_SCREEN_FAILED\", {\n              [pelEventKeys.messsage_status]: \"No message received\",\n              [pelEventKeys.account_id]: accountId,\n              [pelEventKeys.channel_id]: channelUrl\n            });\n          }\n        }, 12e4);\n      }, 500);\n      setTimeout(() => {\n        const scrollContainer = document.getElementsByClassName(\n          \"sendbird-conversation__messages-padding\"\n        )[0];\n        if (scrollContainer) {\n          scrollContainer.scrollTop = scrollContainer.scrollHeight;\n        }\n      }, 600);\n    }\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$4.suggestedRepliesWrapper, children: replies.map((reply, index2) => /* @__PURE__ */ jsxRuntimeExports.jsx(\n    \"button\",\n    {\n      onClick: () => handleSendMessage(reply),\n      className: styles$4.suggestedReplyBtn,\n      children: reply\n    },\n    index2\n  )) });\n};\nconst TextMessage = ({ isBot, messageText: messageText2, createdAt }) => {\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: `${styles$4.customMessage} ${isBot ? styles$4.customMessageBot : styles$4.customMessageUser}`, children: [\n    isBot && /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$4.customMessageAvatar, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: BotLogo, alt: \"care-ai-avatar\", width: \"28\", height: \"28\" }) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.customMessageContent, children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"div\",\n        {\n          className: `${styles$4.customMessageBubble} ${isBot ? styles$4.customMessageBubbleBot : styles$4.customMessageBubbleUser}`,\n          children: /* @__PURE__ */ jsxRuntimeExports.jsx(Markdown, { children: messageText2 })\n        }\n      ),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$4.customMessageTime, children: formatTime(createdAt) })\n    ] })\n  ] });\n};\nconst ChatCard = ({\n  isBot,\n  title,\n  imageUrl,\n  content: content2,\n  ctaText,\n  metaData,\n  createdAt,\n  type,\n  currentLocation,\n  trackEvent,\n  channelUrl,\n  accountId\n}) => {\n  const cardRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const cardType = careAiCardTypes[type];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (cardType && entry.isIntersecting && trackEvent) {\n          trackEvent(\"CARE_AI_CARD_VIEWED\", {\n            \"Card Type\": cardType,\n            [pelEventKeys.account_id]: accountId,\n            [pelEventKeys.channel_id]: channelUrl\n          });\n        }\n      },\n      { threshold: 0.25 }\n    );\n    if (cardRef.current) {\n      observer.observe(cardRef.current);\n    }\n    return () => {\n      if (cardRef.current) {\n        observer.unobserve(cardRef.current);\n      }\n    };\n  }, [cardType, trackEvent]);\n  const formatQueryForUrl = (query) => {\n    if (!query) return \"\";\n    return query.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^\\w-]/g, \"\");\n  };\n  const getDoctorUrlFromRefrenceId = async (referenceId) => {\n    var _a2, _b2;\n    try {\n      const url = `/marketplace-api/mobile/provider/profile?provider_id=${referenceId}`;\n      const data = await fetch(url);\n      const providerProfileData = await data.json();\n      return (_b2 = (_a2 = providerProfileData.data) == null ? void 0 : _a2.providerProfile) == null ? void 0 : _b2.profile_url;\n    } catch (e3) {\n      console.error(\"Error fetching doctor URL:\", e3);\n      return null;\n    }\n  };\n  const handleCardCTAClick = async (type2, currentLocation2, metaData2) => {\n    if (cardType && trackEvent) {\n      trackEvent(\"CARE_AI_CARD_INTERACTED\", {\n        \"Card Type\": cardType,\n        [pelEventKeys.account_id]: accountId,\n        [pelEventKeys.channel_id]: channelUrl\n      });\n    }\n    console.log(\"Card Type: \", cardType, type2);\n    let url = \"\";\n    switch (type2) {\n      case \"support\":\n        url = \"https://practo.onelink.me/1025359428?utm_source=Dweb_homepage&utm_medium=Web2App\";\n        break;\n      case \"consult\":\n        url = `${window.location.origin}/consult/direct/new_consultation?id=${metaData2.problemAreaId}`;\n        break;\n      case \"listing\":\n        const formattedQuery = formatQueryForUrl(metaData2.queryValue);\n        url = `${window.location.origin}/${currentLocation2}/${formattedQuery}`;\n        break;\n      case \"doctor_profile\":\n        const doctorProfileUrl = await getDoctorUrlFromRefrenceId(metaData2.referenceId);\n        if (doctorProfileUrl) {\n          url = doctorProfileUrl;\n        }\n        break;\n      default:\n        url = \"\";\n    }\n    if (url) {\n      window.open(url, \"_blank\");\n    }\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { ref: cardRef, className: `${styles$4.customMessage} ${isBot ? styles$4.customMessageBot : styles$4.customMessageUser}`, children: [\n    isBot && /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$4.customMessageAvatar, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: BotLogo, alt: \"care-ai-avatar\", width: \"28\", height: \"28\" }) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.customMessageContent, children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.customCardBubble, children: [\n        imageUrl && /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: imageUrl, alt: title, className: styles$4.chatCardImage }),\n        /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.chatCardContent, children: [\n          title && /* @__PURE__ */ jsxRuntimeExports.jsx(\"h3\", { className: styles$4.chatCardTitle, children: title }),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"p\", { className: styles$4.chatCardDescription, children: content2 }),\n          ctaText && /* @__PURE__ */ jsxRuntimeExports.jsx(\n            \"button\",\n            {\n              className: `${styles$4.chatCardButton} ${styles$4[`chatCardButton${type.charAt(0).toUpperCase() + type.slice(1)}`]}`,\n              onClick: () => handleCardCTAClick(type, currentLocation, metaData),\n              children: ctaText\n            }\n          )\n        ] })\n      ] }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$4.customMessageTime, children: formatTime(createdAt) })\n    ] })\n  ] });\n};\nconst CustomMessageCard = ({\n  message,\n  currentLocation,\n  channelUrl,\n  accountId,\n  waitingForResponseMap,\n  setWaitingForResponseMap,\n  trackEvent\n}) => {\n  var _a2, _b2;\n  const [isSuggestedReplyMsgSent, setIsSuggestedReplyMsgSent] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const { message: messageText2, data: messageData, createdAt, customType } = message;\n  let isBot = false;\n  let parsedMessageData = null;\n  if (messageData) {\n    try {\n      parsedMessageData = JSON.parse(messageData);\n      isBot = parsedMessageData == null ? void 0 : parsedMessageData.botMessage;\n    } catch (error) {\n      console.error(\"Error parsing message data:\", error);\n    }\n  }\n  const {\n    state: { currentChannel }\n  } = useGroupChannel();\n  const lastMessageTimeSendByUser = (_a2 = currentChannel == null ? void 0 : currentChannel.lastMessage) == null ? void 0 : _a2.createdAt;\n  let isLastMessage = false;\n  if (lastMessageTimeSendByUser && createdAt > lastMessageTimeSendByUser) {\n    isLastMessage = true;\n    if (waitingForResponseMap[channelUrl]) {\n      setWaitingForResponseMap((prev) => ({\n        ...prev,\n        [channelUrl]: false\n      }));\n    }\n  }\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (isBot) {\n      setTimeout(() => {\n        const scrollContainer = document.getElementsByClassName(\n          styles$4.sendbirdConversationMessagesPadding\n        )[0];\n        if (scrollContainer) {\n          scrollContainer.scrollTop = scrollContainer.scrollHeight;\n        }\n      }, 100);\n    }\n  }, [isBot]);\n  if (customType === \"card\" && parsedMessageData) {\n    const { title, imageUrl, content: content2, ctaText } = parsedMessageData.card || {};\n    const metaData = ((_b2 = parsedMessageData.card) == null ? void 0 : _b2.platformMessageCardMetadataDto) || {};\n    switch (parsedMessageData.messageSubType) {\n      case \"listing\":\n      case \"support\":\n      case \"consult\":\n      case \"doctor_profile\":\n        return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\n            TextMessage,\n            {\n              isBot,\n              messageText: messageText2,\n              createdAt\n            }\n          ),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\n            ChatCard,\n            {\n              isBot,\n              title,\n              imageUrl,\n              content: content2,\n              ctaText,\n              metaData,\n              createdAt,\n              type: parsedMessageData.messageSubType,\n              currentLocation,\n              trackEvent,\n              channelUrl,\n              accountId\n            }\n          )\n        ] });\n      default:\n        return /* @__PURE__ */ jsxRuntimeExports.jsx(\n          TextMessage,\n          {\n            isBot,\n            messageText: \"This card type is not supported yet.\",\n            createdAt\n          }\n        );\n    }\n  } else if (customType === \"markdown\" && parsedMessageData) {\n    const { suggestedReplies: suggestedReplies2 } = parsedMessageData;\n    const showSuggestedReplies = !isSuggestedReplyMsgSent && (suggestedReplies2 == null ? void 0 : suggestedReplies2.length) && isLastMessage;\n    return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        TextMessage,\n        {\n          isBot,\n          messageText: messageText2,\n          createdAt\n        }\n      ),\n      showSuggestedReplies ? /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: `${styles$4.customMessage} ${styles$4.suggestedReplies}`, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n        SuggestedReplies,\n        {\n          replies: suggestedReplies2,\n          setIsSuggestedReplyMsgSent,\n          setWaitingForResponseMap,\n          channelUrl,\n          accountId,\n          trackEvent\n        }\n      ) }) : null\n    ] });\n  }\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, { children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n    TextMessage,\n    {\n      isBot,\n      messageText: messageText2,\n      createdAt\n    }\n  ) });\n};\nconst cInlineLoaderContainer = \"PageLoader-module__cInlineLoaderContainer__dmea8\";\nconst cInlineLoaderContainerChatInterface = \"PageLoader-module__cInlineLoaderContainerChatInterface__wDMD7\";\nconst cInlineLoader = \"PageLoader-module__cInlineLoader__gBi6B\";\nconst cInlineLoaderSmall = \"PageLoader-module__cInlineLoaderSmall__aEVLN\";\nconst cInlineLoaderCircular = \"PageLoader-module__cInlineLoaderCircular__vvAb6\";\nconst cInlineLoaderCircularPath = \"PageLoader-module__cInlineLoaderCircularPath__oBhaN\";\nconst styles$3 = {\n  cInlineLoaderContainer,\n  cInlineLoaderContainerChatInterface,\n  cInlineLoader,\n  cInlineLoaderSmall,\n  cInlineLoaderCircular,\n  cInlineLoaderCircularPath\n};\nconst PageLoader = ({ className, isSmall, isChatInterface }) => {\n  const containerClasses = [\n    styles$3.cInlineLoaderContainer,\n    isChatInterface ? styles$3.cInlineLoaderContainerChatInterface : \"\",\n    className\n  ].filter(Boolean).join(\" \");\n  const loaderClasses = [\n    styles$3.cInlineLoader,\n    isSmall ? styles$3.cInlineLoaderSmall : \"\"\n  ].filter(Boolean).join(\" \");\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: containerClasses, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: loaderClasses, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"svg\", { className: styles$3.cInlineLoaderCircular, viewBox: \"25 25 50 50\", children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n    \"circle\",\n    {\n      className: styles$3.cInlineLoaderCircularPath,\n      cx: \"50\",\n      cy: \"50\",\n      r: \"20\",\n      fill: \"none\"\n    }\n  ) }) }) });\n};\nconst formatMessageTime = (timestamp) => {\n  const now = /* @__PURE__ */ new Date();\n  const date = new Date(timestamp);\n  const diffMs = now.getTime() - date.getTime();\n  const diffSec = Math.floor(diffMs / 1e3);\n  const diffMin = Math.floor(diffSec / 60);\n  const diffHr = Math.floor(diffMin / 60);\n  const daysOfWeek = [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\"\n  ];\n  if (diffMin < 1) return \"Just now\";\n  if (diffMin < 60) return `${diffMin} min ago`;\n  if (diffHr < 24 && now.toDateString() === date.toDateString())\n    return `${diffHr} hour${diffHr > 1 ? \"s\" : \"\"} ago`;\n  const yesterday = /* @__PURE__ */ new Date();\n  yesterday.setDate(now.getDate() - 1);\n  if (date.toDateString() === yesterday.toDateString()) return \"Yesterday\";\n  const nowDay = now.getDay();\n  const weekStart = new Date(now);\n  weekStart.setDate(now.getDate() - nowDay);\n  if (date >= weekStart) return daysOfWeek[date.getDay()];\n  if (now.getFullYear() === date.getFullYear()) {\n    return date.toLocaleString(\"default\", { month: \"short\", year: \"numeric\" });\n  }\n  return date.toLocaleString(\"default\", { month: \"short\", year: \"numeric\" });\n};\nconst useKeyboardStatus = (threshold = 150) => {\n  const isIOS2 = /iPad|iPhone|iPod/.test(navigator.userAgent);\n  const [keyboardHeight, setKeyboardHeight] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0);\n  const [isKeyboardOpen, setIsKeyboardOpen] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const initialHeightRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(\n    isIOS2 ? document.documentElement.clientHeight : window.innerHeight\n  );\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const handleResize = () => {\n      var _a2;\n      const newHeight = isIOS2 ? ((_a2 = window.visualViewport) == null ? void 0 : _a2.height) || window.innerHeight : window.innerHeight;\n      const heightDiff = initialHeightRef.current - newHeight;\n      if (heightDiff > threshold) {\n        setKeyboardHeight(heightDiff);\n        setIsKeyboardOpen(true);\n        if (isIOS2) {\n          const header = document.querySelector(\".care-ai-modal-header\");\n          if (header) {\n            const headerPositionFromTop = header.getBoundingClientRect().top;\n            if (headerPositionFromTop < 0) {\n              window.scrollTo(0, 0);\n            }\n          }\n        }\n      } else {\n        setKeyboardHeight(0);\n        setIsKeyboardOpen(false);\n      }\n    };\n    if (isIOS2 && window.visualViewport) {\n      window.visualViewport.addEventListener(\"resize\", handleResize);\n      window.visualViewport.addEventListener(\"scroll\", handleResize);\n    } else {\n      window.addEventListener(\"resize\", handleResize);\n    }\n    return () => {\n      if (isIOS2 && window.visualViewport) {\n        window.visualViewport.addEventListener(\"resize\", handleResize);\n        window.visualViewport.addEventListener(\"scroll\", handleResize);\n      } else {\n        window.removeEventListener(\"resize\", handleResize);\n      }\n    };\n  }, []);\n  return { isKeyboardOpen, keyboardHeight };\n};\nconst CustomInput = ({\n  channelUrl,\n  waitingForResponseMap,\n  setWaitingForResponseMap,\n  trackEvent\n}) => {\n  const inputRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  const [isTyping, setIsTyping] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const waitingForResponse = waitingForResponseMap[channelUrl] || false;\n  const isStillWaitingForResponse = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(false);\n  const {\n    actions: { sendUserMessage }\n  } = useGroupChannel();\n  const handleSendMessage = async () => {\n    const textarea = inputRef.current;\n    if (!textarea || waitingForResponse) return;\n    const message = textarea.value.trim();\n    if (!message) return;\n    try {\n      textarea.value = \"\";\n      const messageSentData = await sendUserMessage({ message });\n      let timerRef1, timerRef2;\n      if (messageSentData && messageSentData.sendingStatus) {\n        clearTimeout(timerRef1);\n        clearTimeout(timerRef2);\n        timerRef1 = setTimeout(() => {\n          setWaitingForResponseMap((prev) => ({\n            ...prev,\n            [channelUrl]: true\n          }));\n          timerRef2 = setTimeout(() => {\n            setWaitingForResponseMap((prev) => ({\n              ...prev,\n              [channelUrl]: false\n            }));\n            if (isStillWaitingForResponse.current) {\n              isStillWaitingForResponse.current = false;\n              trackEvent(\"CARE_AI_CHAT_SCREEN_FAILED\", {\n                [pelEventKeys.messsage_status]: \"Message received\"\n              });\n            }\n          }, 12e4);\n        }, 500);\n        setTimeout(() => {\n          const scrollContainer = document.getElementsByClassName(\n            \"sendbird-conversation__messages-padding\"\n          )[0];\n          if (scrollContainer) {\n            scrollContainer.scrollTop = scrollContainer.scrollHeight;\n          }\n        }, 600);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n    textarea.style.height = \"auto\";\n    setIsTyping(false);\n  };\n  const handleInputChange = () => {\n    const textarea = inputRef.current;\n    const message = textarea == null ? void 0 : textarea.value.trim();\n    setIsTyping(!!message);\n    if (!textarea) return;\n    textarea.style.height = \"auto\";\n    textarea.style.height = `${textarea.scrollHeight + 2}px`;\n    textarea.scrollHeight > 44 ? textarea.classList.add(styles$4.customTextareaExpanded) : textarea.classList.remove(styles$4.customTextareaExpanded);\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [\n    waitingForResponse ? /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.chatBotTypingIndicator, children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$4.typingIndicatorAvatar, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: BotLogo, alt: \"care-ai-avatar\", width: \"20\", height: \"20\" }) }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"p\", { className: styles$4.typingIndicatorText, children: \"Care AI is typing...\" })\n    ] }) : null,\n    /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.customInputWrapper, children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"textarea\",\n        {\n          ref: inputRef,\n          className: styles$4.customTextarea,\n          rows: 1,\n          onChange: handleInputChange,\n          onKeyDown: (e3) => {\n            if (e3.key === \"Enter\" && !e3.shiftKey) {\n              e3.preventDefault();\n              handleSendMessage();\n            }\n          }\n        }\n      ),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"button\",\n        {\n          className: `${styles$4.sendBtn} ${isTyping && !waitingForResponse ? styles$4.sendBtnActive : \"\"}`,\n          onClick: handleSendMessage,\n          disabled: waitingForResponse,\n          children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n            SendIcon$1,\n            {\n              width: 26,\n              height: 26,\n              color: isTyping && !waitingForResponse ? \"white\" : \"#B4B4BE\"\n            }\n          )\n        }\n      )\n    ] }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"p\", { className: styles$4.careAIDisclaimerText, children: \"AI generated, not a substitute to professional medical advice\" })\n  ] });\n};\nconst CustomGroupChannelListHeader = ({ setShowChatHistory }) => {\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.customGroupChannelHeader, children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: BackIcon, className: styles$4.backIcon, alt: \"back-icon\", onClick: () => setShowChatHistory(false) }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"p\", { children: \" Past Conversations\" })\n  ] });\n};\nconst CustomChatHistory = ({ channel }) => {\n  const { lastMessage } = channel;\n  const lastMessageText = (lastMessage == null ? void 0 : lastMessage.message) || \"\";\n  const lastMessageTime = (lastMessage == null ? void 0 : lastMessage.createdAt) ? formatMessageTime(lastMessage.createdAt) : \"Just now\";\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$4.customChatHistory, children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$4.messageText, children: lastMessageText }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$4.messageTime, children: lastMessageTime })\n  ] });\n};\nconst CareAiChat = ({\n  showChatHistory,\n  setShowChatHistory,\n  appId,\n  accountId,\n  accessToken,\n  currentChannelUrl,\n  currentLocation,\n  trackEvent\n}) => {\n  const [channelUrl, setChannelUrl] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(currentChannelUrl);\n  const [waitingForResponseMap, setWaitingForResponseMap] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({});\n  const { isKeyboardOpen, keyboardHeight } = useKeyboardStatus();\n  const [isUserFirstMessageReceived, setIsUserFirstMessageReceived] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const handleScrollToTop = () => {\n    if (isKeyboardOpen) {\n      window.scrollTo(0, 0);\n    }\n  };\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const scrollContainer = document.querySelector(\n      \".sendbird-conversation__messages-padding\"\n    );\n    if (scrollContainer && isKeyboardOpen) {\n      setTimeout(() => {\n        scrollContainer.scrollTop = scrollContainer.scrollHeight;\n      }, 50);\n    }\n    const isIOS2 = /iPad|iPhone|iPod/.test(navigator.userAgent);\n    if (isIOS2) {\n      const messageList = document.querySelector(\n        \".sendbird-conversation\"\n      );\n      if (isKeyboardOpen) {\n        if (messageList) {\n          messageList.style.paddingBottom = `${keyboardHeight}px`;\n        }\n        document.documentElement.style.position = \"fixed\";\n        document.body.style.position = \"fixed\";\n      } else {\n        if (messageList) {\n          messageList.style.paddingBottom = \"0\";\n        }\n        document.documentElement.style.position = \"\";\n        document.body.style.position = \"\";\n      }\n      document.addEventListener(\"touchend\", handleScrollToTop);\n      return () => {\n        document.removeEventListener(\"touchend\", handleScrollToTop);\n        document.documentElement.style.position = \"\";\n        document.body.style.position = \"\";\n        if (messageList) {\n          messageList.style.paddingBottom = \"0\";\n        }\n      };\n    }\n  }, [isKeyboardOpen, keyboardHeight]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    trackEvent(\"CARE_AI_CHAT_SCREEN_VIEWED\", {\n      [pelEventKeys.account_id]: accountId,\n      [pelEventKeys.channel_id]: channelUrl\n    });\n  }, [trackEvent]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const timer = setTimeout(() => {\n      if (!isUserFirstMessageReceived) {\n        trackEvent(\"CARE_AI_CHAT_SCREEN_VIEWED\", {\n          [pelEventKeys.messsage_status]: \"No message received\"\n        });\n      }\n    }, 1e4);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [isUserFirstMessageReceived]);\n  const handleChannelSelect = (channel) => {\n    if (channel) setChannelUrl(channel.url);\n    setShowChatHistory(false);\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\n    \"div\",\n    {\n      className: styles$4.careAIChatInterface,\n      style: { height: \"100%\", width: \"100%\" },\n      children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n        SendbirdProvider,\n        {\n          appId,\n          userId: accountId,\n          nickname: \"User\",\n          profileUrl: \"\",\n          accessToken,\n          children: showChatHistory ? /* @__PURE__ */ jsxRuntimeExports.jsx(\n            GroupChannelList,\n            {\n              className: styles$4.customGroupChannelList,\n              selectedChannelUrl: channelUrl,\n              onChannelCreated: () => null,\n              onChannelSelect: handleChannelSelect,\n              renderChannelPreview: ({ channel }) => /* @__PURE__ */ jsxRuntimeExports.jsx(CustomChatHistory, { channel }),\n              renderHeader: () => /* @__PURE__ */ jsxRuntimeExports.jsx(\n                CustomGroupChannelListHeader,\n                {\n                  setShowChatHistory\n                }\n              )\n            }\n          ) : /* @__PURE__ */ jsxRuntimeExports.jsx(\n            GroupChannel,\n            {\n              channelUrl,\n              renderMessageInput: () => {\n                return /* @__PURE__ */ jsxRuntimeExports.jsx(\n                  CustomInput,\n                  {\n                    channelUrl,\n                    waitingForResponseMap,\n                    setWaitingForResponseMap,\n                    trackEvent\n                  }\n                );\n              },\n              renderMessageContent: (message) => {\n                setIsUserFirstMessageReceived(true);\n                return /* @__PURE__ */ jsxRuntimeExports.jsx(\n                  CustomMessageCard,\n                  {\n                    message: message.message,\n                    channelUrl,\n                    accountId,\n                    waitingForResponseMap,\n                    setWaitingForResponseMap,\n                    currentLocation,\n                    trackEvent\n                  }\n                );\n              },\n              renderChannelHeader: () => /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {})\n            }\n          )\n        }\n      )\n    }\n  );\n};\nconst CareAiChatContainer = ({\n  showChatHistory,\n  setShowChatHistory,\n  appId,\n  currentLocation,\n  trackEvent\n}) => {\n  const [loading, setLoading] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);\n  const [accountId, setAccountId] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\n  const [accessToken, setAccessToken] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\n  const [currentChannelUrl, setCurrentChannelUrl] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (typeof document !== \"undefined\") {\n      const link2 = document.createElement(\"link\");\n      link2.rel = \"stylesheet\";\n      link2.href = \"https://cdn.jsdelivr.net/npm/@sendbird/uikit-react@latest/dist/index.css\";\n      document.head.appendChild(link2);\n    }\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const fetchData = async () => {\n      const userUrl = `${window.location.origin}/client-auth/user_details`;\n      const channelUrl = \"/marketplace-api/mweb/care-ai/channels\";\n      const tokenUrl = \"/marketplace-api/mweb/care-ai/access-token\";\n      try {\n        const userRes = await fetch(userUrl);\n        const user = await userRes.json();\n        const channelRes = await fetch(channelUrl);\n        const channel = await channelRes.json();\n        setCurrentChannelUrl(channel.channelId);\n        const tokenRes = await fetch(tokenUrl);\n        const token = await tokenRes.json();\n        setAccountId(token.userPlatformId);\n        setAccessToken(token.accessToken);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  if (loading || !appId || !accountId || !currentChannelUrl || !accessToken)\n    return /* @__PURE__ */ jsxRuntimeExports.jsx(PageLoader, { className: styles$4.chatInterfacePageLoader });\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\n    CareAiChat,\n    {\n      showChatHistory,\n      setShowChatHistory,\n      appId,\n      accountId,\n      accessToken,\n      currentChannelUrl,\n      currentLocation,\n      trackEvent\n    }\n  );\n};\nconst isServer = () => {\n  return !(typeof window !== \"undefined\" && window.document);\n};\nvar cookie$1 = {};\n/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\ncookie$1.parse = parse;\ncookie$1.serialize = serialize;\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\nfunction parse(str, options) {\n  if (typeof str !== \"string\") {\n    throw new TypeError(\"argument str must be a string\");\n  }\n  var obj = {};\n  var opt = options || {};\n  var pairs = str.split(/; */);\n  var dec = opt.decode || decode;\n  pairs.forEach(function(pair) {\n    var eq_idx = pair.indexOf(\"=\");\n    if (eq_idx < 0) {\n      return;\n    }\n    var key = pair.substr(0, eq_idx).trim();\n    var val = pair.substr(++eq_idx, pair.length).trim();\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n    if (void 0 == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  });\n  return obj;\n}\nfunction serialize(name2, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n  if (!fieldContentRegExp.test(name2)) {\n    throw new TypeError(\"argument name is invalid\");\n  }\n  var value = enc(val);\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError(\"argument val is invalid\");\n  }\n  var pairs = [name2 + \"=\" + value];\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n    if (isNaN(maxAge)) throw new Error(\"maxAge should be a Number\");\n    pairs.push(\"Max-Age=\" + maxAge);\n  }\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError(\"option domain is invalid\");\n    }\n    pairs.push(\"Domain=\" + opt.domain);\n  }\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError(\"option path is invalid\");\n    }\n    pairs.push(\"Path=\" + opt.path);\n  }\n  if (opt.expires) pairs.push(\"Expires=\" + opt.expires.toUTCString());\n  if (opt.httpOnly) pairs.push(\"HttpOnly\");\n  if (opt.secure) pairs.push(\"Secure\");\n  return pairs.join(\"; \");\n}\nfunction tryDecode(str, decode2) {\n  try {\n    return decode2(str);\n  } catch (e3) {\n    return str;\n  }\n}\nvar cookie = cookie$1;\nif (typeof Object.assign != \"function\") {\n  Object.assign = function(target) {\n    if (target == null) {\n      throw new TypeError(\"Cannot convert undefined or null to object\");\n    }\n    target = Object(target);\n    for (var index2 = 1; index2 < arguments.length; index2++) {\n      var source = arguments[index2];\n      if (source != null) {\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n}\nvar _rawCookie = {};\nvar _res = void 0;\nfunction _isResWritable() {\n  if (!_res)\n    return false;\n  if (_res.headersSent === true)\n    return false;\n  return true;\n}\nfunction load(name2, doNotParse) {\n  var cookies = typeof document === \"undefined\" ? _rawCookie : cookie.parse(document.cookie);\n  var cookieVal = cookies && cookies[name2];\n  if (!doNotParse) {\n    try {\n      cookieVal = JSON.parse(cookieVal);\n    } catch (e3) {\n    }\n  }\n  return cookieVal;\n}\nfunction select(regex2) {\n  var cookies = typeof document === \"undefined\" ? _rawCookie : cookie.parse(document.cookie);\n  if (!cookies)\n    return {};\n  if (!regex2)\n    return cookies;\n  return Object.keys(cookies).reduce(function(accumulator, name2) {\n    if (!regex2.test(name2))\n      return accumulator;\n    var newCookie = {};\n    newCookie[name2] = cookies[name2];\n    return Object.assign({}, accumulator, newCookie);\n  }, {});\n}\nfunction save(name2, val, opt) {\n  _rawCookie[name2] = val;\n  if (typeof val === \"object\") {\n    _rawCookie[name2] = JSON.stringify(val);\n  }\n  if (typeof document !== \"undefined\") {\n    document.cookie = cookie.serialize(name2, _rawCookie[name2], opt);\n  }\n  if (_isResWritable() && _res.cookie) {\n    _res.cookie(name2, val, opt);\n  }\n}\nfunction remove(name2, opt) {\n  delete _rawCookie[name2];\n  if (typeof opt === \"undefined\") {\n    opt = {};\n  } else if (typeof opt === \"string\") {\n    opt = { path: opt };\n  }\n  if (typeof document !== \"undefined\") {\n    opt.expires = new Date(1970, 1, 1, 0, 0, 1);\n    document.cookie = cookie.serialize(name2, \"\", opt);\n  }\n  if (_isResWritable() && _res.clearCookie) {\n    _res.clearCookie(name2, opt);\n  }\n}\nfunction setRawCookie(rawCookie) {\n  if (rawCookie) {\n    _rawCookie = cookie.parse(rawCookie);\n  } else {\n    _rawCookie = {};\n  }\n}\nfunction plugToRequest(req, res) {\n  if (req.cookie) {\n    _rawCookie = req.cookie;\n  } else if (req.cookies) {\n    _rawCookie = req.cookies;\n  } else if (req.headers && req.headers.cookie) {\n    setRawCookie(req.headers.cookie);\n  } else {\n    _rawCookie = {};\n  }\n  _res = res;\n  return function unplug() {\n    _res = null;\n    _rawCookie = {};\n  };\n}\nvar reactCookie = {\n  load,\n  select,\n  save,\n  remove,\n  setRawCookie,\n  plugToRequest\n};\nif (typeof window !== \"undefined\") {\n  window[\"reactCookie\"] = reactCookie;\n}\nvar reactCookie_1 = reactCookie;\nconst Cookies = /* @__PURE__ */ getDefaultExportFromCjs$1(reactCookie_1);\nconst iframeStyles = {\n  full: { width: \"100%\", height: \"100%\" },\n  hidden: { display: \"none\" }\n};\nconst EmbeddedOtpLogin = ({\n  phone,\n  closeModal,\n  setIsChatOpen,\n  setShowLoginModal\n}) => {\n  const [iframeType, setIframeType] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"otp\");\n  const [showLoader, setShowLoader] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);\n  const [is_redirect_iframe_onload_called, setIsRedirectIframeOnloadCalled] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const name2 = \"User\";\n  const otpIframeUrl = `${window.location.origin.replace(\n    \"www\",\n    \"accounts\"\n  )}/login_signup_otp?mobile=${encodeURIComponent(\n    phone\n  )}&view_type=modal&name=${name2}`;\n  const redirectIframeSrc = isServer() ? \"\" : `/client-auth/login?redirectToPath=${window.location.protocol}//${window.location.host}`;\n  const handleOtpIframeLoad = () => {\n    if (!!Cookies.load(\"modal_login\")) {\n      setIframeType(\"redirect\");\n      setShowLoader(true);\n    } else if (showLoader) {\n      setShowLoader(false);\n    }\n  };\n  const handleRedirectIframeLoad = () => {\n    if (!is_redirect_iframe_onload_called) {\n      setIsRedirectIframeOnloadCalled(true);\n      const timeout = 2e3;\n      setTimeout(() => {\n        setShowLoader(false);\n        closeModal();\n        setIsChatOpen(true);\n        setShowLoginModal(false);\n      }, timeout);\n    }\n  };\n  if (iframeType === \"otp\") {\n    return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { style: { height: \"100%\" }, children: [\n      showLoader && /* @__PURE__ */ jsxRuntimeExports.jsx(PageLoader, {}),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"iframe\",\n        {\n          style: iframeStyles.full,\n          src: otpIframeUrl,\n          onLoad: handleOtpIframeLoad\n        }\n      )\n    ] });\n  }\n  if (iframeType === \"redirect\") {\n    return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n      showLoader && /* @__PURE__ */ jsxRuntimeExports.jsx(PageLoader, {}),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"iframe\",\n        {\n          style: iframeStyles.hidden,\n          src: redirectIframeSrc,\n          onLoad: handleRedirectIframeLoad\n        }\n      )\n    ] });\n  }\n  return null;\n};\nfunction CrossIcon({ width = 16, height = 16, color: color2 = \"black\" }) {\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\n    \"svg\",\n    {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width,\n      height,\n      color: color2,\n      viewBox: \"0 0 16 16\",\n      fill: \"none\",\n      children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"path\",\n        {\n          fillRule: \"evenodd\",\n          clipRule: \"evenodd\",\n          d: \"M14.1657 1.83441C13.8533 1.52199 13.3467 1.52199 13.0343 1.83441L8.00001 6.86873L2.96569 1.83441C2.65327 1.52199 2.14674 1.52199 1.83432 1.83441C1.5219 2.14683 1.5219 2.65336 1.83432 2.96578L6.86864 8.0001L1.83432 13.0344C1.5219 13.3468 1.5219 13.8534 1.83432 14.1658C2.14674 14.4782 2.65327 14.4782 2.96569 14.1658L8.00001 9.13147L13.0343 14.1658C13.3467 14.4782 13.8533 14.4782 14.1657 14.1658C14.4781 13.8534 14.4781 13.3468 14.1657 13.0344L9.13138 8.0001L14.1657 2.96578C14.4781 2.65336 14.4781 2.14683 14.1657 1.83441Z\",\n          fill: \"#2D2D32\"\n        }\n      )\n    }\n  );\n}\nconst bottomLoginModalWrapper = \"LoginModal-module__bottomLoginModalWrapper__oKEIO\";\nconst screenOverlay = \"LoginModal-module__screenOverlay__vCPXo\";\nconst bottomLoginModal = \"LoginModal-module__bottomLoginModal__O72DH\";\nconst bottomModalContent = \"LoginModal-module__bottomModalContent__K9HgH\";\nconst loginModalMobileNumText = \"LoginModal-module__loginModalMobileNumText__I5Z4z\";\nconst phoneInputContainer = \"LoginModal-module__phoneInputContainer__x9sSA\";\nconst phoneInputContainerError = \"LoginModal-module__phoneInputContainerError__oqpCo\";\nconst countryCodeDropdown = \"LoginModal-module__countryCodeDropdown__5Jo23\";\nconst phoneInput = \"LoginModal-module__phoneInput__XQBLP\";\nconst phoneInputActive = \"LoginModal-module__phoneInputActive__nZlKG\";\nconst errorText = \"LoginModal-module__errorText__yVA8B\";\nconst flexGrowSpacer = \"LoginModal-module__flexGrowSpacer__XJA-T\";\nconst continueButton = \"LoginModal-module__continueButton__4HMlk\";\nconst continueButtonEnabled = \"LoginModal-module__continueButtonEnabled__Ml3G1\";\nconst continueButtonDisabled = \"LoginModal-module__continueButtonDisabled__S6tRx\";\nconst infoTextContainer = \"LoginModal-module__infoTextContainer__ERzop\";\nconst infoTextSecondary = \"LoginModal-module__infoTextSecondary__yYhvC\";\nconst styles$2 = {\n  bottomLoginModalWrapper,\n  screenOverlay,\n  bottomLoginModal,\n  bottomModalContent,\n  loginModalMobileNumText,\n  phoneInputContainer,\n  phoneInputContainerError,\n  countryCodeDropdown,\n  phoneInput,\n  phoneInputActive,\n  errorText,\n  flexGrowSpacer,\n  continueButton,\n  continueButtonEnabled,\n  continueButtonDisabled,\n  infoTextContainer,\n  infoTextSecondary\n};\nconst validateMobileNumber = (number2) => /^[0-9]{10}$/.test(number2);\nconst LoginModal = ({ setIsChatOpen, setShowLoginModal, showLoginModal }) => {\n  const [phoneNumber, setPhoneNumber] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\n  const [showOtpIframe, setShowOtpIframe] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [showError, setShowError] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const { isKeyboardOpen, keyboardHeight } = useKeyboardStatus();\n  const isIOS2 = /iPad|iPhone|iPod/.test(navigator.userAgent);\n  const handleGetOtpClick = () => {\n    if (!validateMobileNumber(phoneNumber)) {\n      setShowError(true);\n      return;\n    }\n    setShowOtpIframe(true);\n  };\n  const closeModal = () => {\n    setShowLoginModal(false);\n  };\n  const handleInputChange = (e3) => {\n    setPhoneNumber(e3.target.value);\n    if (showError) {\n      setShowError(false);\n    }\n  };\n  const handleScrollToTop = () => {\n    if (isKeyboardOpen) {\n      window.scrollTo(0, 0);\n    }\n  };\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (isIOS2) {\n      const loginModal = document.getElementById(\n        \"careai-login-modal\"\n      );\n      if (isKeyboardOpen) {\n        if (loginModal) {\n          loginModal.style.paddingBottom = `${keyboardHeight + 30}px`;\n        }\n        document.documentElement.style.position = \"fixed\";\n        document.body.style.position = \"fixed\";\n      } else {\n        if (loginModal) {\n          loginModal.style.paddingBottom = \"0\";\n        }\n        document.documentElement.style.position = \"\";\n        document.body.style.position = \"\";\n      }\n      handleScrollToTop();\n      document.addEventListener(\"touchend\", handleScrollToTop);\n      return () => {\n        document.removeEventListener(\"touchend\", handleScrollToTop);\n        document.documentElement.style.position = \"\";\n        document.body.style.position = \"\";\n        if (loginModal) {\n          loginModal.style.paddingBottom = \"0\";\n        }\n      };\n    }\n  }, [isKeyboardOpen]);\n  if (!showLoginModal) return null;\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$2.bottomLoginModalWrapper, onClick: closeModal, children: [\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$2.screenOverlay }),\n    /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { id: \"careai-login-modal\", style: { height: isKeyboardOpen && !isIOS2 ? \"80vh\" : \"50vh\" }, className: styles$2.bottomLoginModal, onClick: (e3) => e3.stopPropagation(), children: !showOtpIframe ? /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$2.bottomModalContent, children: [\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { onClick: closeModal, children: /* @__PURE__ */ jsxRuntimeExports.jsx(CrossIcon, {}) }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"h2\", { className: styles$2.loginModalMobileNumText, children: \"Enter your mobile number\" }),\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\n        \"div\",\n        {\n          className: `${styles$2.phoneInputContainer} ${showError ? styles$2.phoneInputContainerError : \"\"}`,\n          children: [\n            /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$2.countryCodeDropdown, children: \"+91\" }),\n            /* @__PURE__ */ jsxRuntimeExports.jsx(\n              \"input\",\n              {\n                type: \"tel\",\n                placeholder: \"Mobile Number\",\n                value: phoneNumber,\n                onChange: handleInputChange,\n                className: `${styles$2.phoneInput} ${phoneNumber.length > 0 ? styles$2.phoneInputActive : \"\"}`,\n                maxLength: 10\n              }\n            )\n          ]\n        }\n      ),\n      showError ? /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$2.errorText, children: \"Please enter a valid 10-digit mobile number\" }) : null,\n      /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$2.infoTextContainer, children: [\n        \"By continuing, you agree to our\",\n        /* @__PURE__ */ jsxRuntimeExports.jsx(\"a\", { href: \"https://www.practo.com/company/terms\", target: \"_blank\", className: styles$2.infoTextSecondary, children: \"Terms & Conditions\" })\n      ] }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$2.flexGrowSpacer }),\n      /* @__PURE__ */ jsxRuntimeExports.jsx(\n        \"button\",\n        {\n          onClick: handleGetOtpClick,\n          className: `${styles$2.continueButton} ${validateMobileNumber(phoneNumber) ? styles$2.continueButtonEnabled : styles$2.continueButtonDisabled}`,\n          children: \"Continue\"\n        }\n      )\n    ] }) : /* @__PURE__ */ jsxRuntimeExports.jsx(\n      EmbeddedOtpLogin,\n      {\n        phone: phoneNumber,\n        closeModal,\n        setIsChatOpen,\n        setShowLoginModal\n      }\n    ) })\n  ] });\n};\nconst careAIContainer = \"CareAI-module__careAIContainer__3aCo-\";\nconst careAIHeader = \"CareAI-module__careAIHeader__Qd2U4\";\nconst careAIToggleButton = \"CareAI-module__careAIToggleButton__P0VA8\";\nconst careAiHeaderHistory = \"CareAI-module__careAIHeaderHistory__AXaPk\";\nconst careAIHeaderText = \"CareAI-module__careAIHeaderText__dYJRN\";\nconst careAIAvatar = \"CareAI-module__careAIAvatar__U0cV0\";\nconst careAIFreeLabel = \"CareAI-module__careAIFreeLabel__qLHIS\";\nconst careAIInputRow = \"CareAI-module__careAIInputRow__v8QnQ\";\nconst careAIInput = \"CareAI-module__careAIInput__mRfqI\";\nconst careAISendButton = \"CareAI-module__careAISendButton__cQpiI\";\nconst careAIModalHeader = \"CareAI-module__careAIModalHeader__voyro\";\nconst careAIModalProfile = \"CareAI-module__careAIModalProfile__-6IUl\";\nconst careAIModalUserInfo = \"CareAI-module__careAIModalUserInfo__fWuKR\";\nconst careAIHeaderUserName = \"CareAI-module__careAIHeaderUserName__Adnco\";\nconst careAIHeaderUserStatus = \"CareAI-module__careAIHeaderUserStatus__RMWo5\";\nconst careAIHistory = \"CareAI-module__careAIHistory__ETQ8v\";\nconst styles$1 = {\n  careAIContainer,\n  careAIHeader,\n  careAIToggleButton,\n  careAiHeaderHistory,\n  careAIHeaderText,\n  careAIAvatar,\n  careAIFreeLabel,\n  careAIInputRow,\n  careAIInput,\n  careAISendButton,\n  careAIModalHeader,\n  careAIModalProfile,\n  careAIModalUserInfo,\n  careAIHeaderUserName,\n  careAIHeaderUserStatus,\n  careAIHistory\n};\nconst SendIcon = \"data:image/svg+xml,%3csvg%20width='26'%20height='26'%20viewBox='0%200%2026%2026'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_8158_183627)'%3e%3cpath%20d='M21.2959%2014.7941L10.5021%2019.3473C8.93209%2020.0137%207.47499%2018.1856%208.47599%2016.8019L10.7639%2013.6316C10.7852%2013.6316%2010.7958%2013.6315%2010.817%2013.6316L14.3625%2013.637C14.7765%2013.6377%2015.1104%2013.3038%2015.1097%2012.8899C15.1144%2012.4706%2014.7795%2012.1357%2014.3602%2012.1403L10.8201%2012.1295C10.7989%2012.1295%2010.7776%2012.1294%2010.7617%2012.1347L8.34155%208.79261C7.34693%207.41643%208.76665%205.60346%2010.344%206.23748L21.2524%2010.6381C23.1165%2011.3894%2023.1471%2014.0168%2021.2959%2014.7941Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_8158_183627'%3e%3crect%20width='18'%20height='18'%20fill='white'%20transform='translate(13)%20rotate(45)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\";\nconst AnimatedSearchInput = () => {\n  const [placeholder, setPlaceholder] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(\"\");\n  const [isDeleting, setIsDeleting] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [loopNum, setLoopNum] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0);\n  const [typingSpeed, setTypingSpeed] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(150);\n  const searchTexts = [\n    \"Search for doctors near me...\",\n    \"How do I book an appointment?\",\n    \"What are the best clinics for dental care?\",\n    \"Find nearby pharmacies...\"\n  ];\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    let timer;\n    const currentText = searchTexts[loopNum % searchTexts.length];\n    if (!isDeleting && placeholder.length < currentText.length) {\n      timer = setTimeout(() => {\n        setPlaceholder(currentText.substring(0, placeholder.length + 1));\n      }, typingSpeed);\n    } else if (!isDeleting && placeholder.length === currentText.length) {\n      timer = setTimeout(() => {\n        setIsDeleting(true);\n        setTypingSpeed(80);\n      }, 2e3);\n    } else if (isDeleting && placeholder.length > 0) {\n      timer = setTimeout(() => {\n        setPlaceholder(currentText.substring(0, placeholder.length - 1));\n      }, typingSpeed);\n    } else if (isDeleting && placeholder.length === 0) {\n      setIsDeleting(false);\n      setLoopNum(loopNum + 1);\n      setTypingSpeed(150);\n    }\n    return () => clearTimeout(timer);\n  }, [placeholder, isDeleting, loopNum, typingSpeed]);\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\n    \"input\",\n    {\n      type: \"text\",\n      placeholder,\n      className: styles$1.careAIInput\n    }\n  );\n};\nconst CareAIBottomStickyModal = ({\n  isDoctorProfilePage = false,\n  style = {},\n  headerText = \"Not finding what you need? Ask Care AI\",\n  freeLabelText = \"Free\",\n  onBottomTabClick\n}) => {\n  const handleBottomTabClick = (e3) => {\n    e3.stopPropagation();\n    onBottomTabClick == null ? void 0 : onBottomTabClick();\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\n    \"div\",\n    {\n      className: styles$1.careAIContainer,\n      style: {\n        bottom: isDoctorProfilePage ? \"70px\" : \"0\",\n        left: \"0\",\n        ...style\n      },\n      onClick: handleBottomTabClick,\n      children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$1.careAIHeader, children: [\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$1.careAIAvatar, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: BotLogo, alt: \"care-ai-avatar\", width: \"36\", height: \"36\" }) }),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$1.careAIHeaderText, children: headerText }),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$1.careAIFreeLabel, children: freeLabelText })\n        ] }),\n        /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$1.careAIInputRow, children: [\n          /* @__PURE__ */ jsxRuntimeExports.jsx(AnimatedSearchInput, {}),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"button\", { className: styles$1.careAISendButton, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n            \"img\",\n            {\n              className: \"care-ai-send-icon\",\n              src: SendIcon,\n              alt: \"send-button\",\n              width: \"30\",\n              height: \"30\"\n            }\n          ) })\n        ] })\n      ]\n    }\n  );\n};\nconst genericBottomModal = \"BottomModal-module__genericBottomModal__Vc4OE\";\nconst genericBottomModalOpen = \"BottomModal-module__genericBottomModalOpen__qfylY\";\nconst genericBottomModalClose = \"BottomModal-module__genericBottomModalClose__UfCM7\";\nconst content = \"BottomModal-module__content__aSRRa\";\nconst contentOpen = \"BottomModal-module__contentOpen__9x91Y\";\nconst contentClose = \"BottomModal-module__contentClose__-GoaT\";\nconst styles = {\n  genericBottomModal,\n  genericBottomModalOpen,\n  genericBottomModalClose,\n  content,\n  contentOpen,\n  contentClose\n};\nconst BottomModal = ({\n  contentClassName = \"\",\n  isOpen = false,\n  content_class = \"\",\n  closeModal,\n  handleModalContentClick,\n  isDefaultEventAction = false,\n  is_other_modal_open = false,\n  children\n}) => {\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (isOpen) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"\";\n    }\n    return () => {\n      document.body.style.overflow = \"\";\n    };\n  }, [isOpen]);\n  const handleClickOutside = (e3) => {\n    if (closeModal) {\n      closeModal(e3);\n    }\n  };\n  const handleContentClick = (ev) => {\n    if (handleModalContentClick) {\n      handleModalContentClick(ev);\n      return;\n    }\n    if (!isDefaultEventAction) {\n      ev.preventDefault();\n    }\n    ev.stopPropagation();\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: `${styles.genericBottomModal} ${isOpen ? styles.genericBottomModalOpen : styles.genericBottomModalClose}`, onClick: handleClickOutside, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: `${styles.content}  ${isOpen ? styles.contentOpen : styles.contentClose} ${contentClassName}`, onClick: handleContentClick, children }) });\n};\nconst ReloadIcon = \"data:image/svg+xml,%3csvg%20width='18'%20height='20'%20viewBox='0%200%2018%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.4242%206.98531L15.3769%2010.8106C15.355%2010.8585%2015.3259%2010.8984%2015.2967%2010.9384C15.1801%2011.114%2015.0417%2011.2578%2014.8814%2011.3616C14.8377%2011.3936%2014.7867%2011.4255%2014.7357%2011.4415C14.5463%2011.5453%2014.3277%2011.5932%2014.1164%2011.5932C14.0508%2011.5932%2013.9925%2011.5932%2013.927%2011.5772C13.8832%2011.5772%2013.8395%2011.5692%2013.7958%2011.5533C13.7448%2011.5453%2013.6938%2011.5293%2013.6428%2011.5054C13.5918%2011.4894%2013.5408%2011.4654%2013.4898%2011.4415L9.69379%209.44498C8.96519%209.06964%208.65918%208.11133%209.0089%207.31273C9.35863%206.52213%2010.2257%206.18672%2010.9543%206.57004L11.7776%207.00128C10.9251%205.70756%209.54078%204.86105%207.97429%204.86105C5.39505%204.86105%203.2894%207.16899%203.2894%209.99601C3.2894%2012.823%205.39505%2015.139%207.97429%2015.139C8.78304%2015.139%209.43149%2015.8497%209.43149%2016.7361C9.43149%2017.6226%208.78304%2018.3333%207.97429%2018.3333C3.78485%2018.3333%200.375%2014.5959%200.375%209.99601C0.375%205.39611%203.78485%201.66667%207.97429%201.66667C10.8158%201.66667%2013.3004%203.39164%2014.6045%205.93915L14.9106%205.36416C15.3113%204.6055%2016.2075%204.34995%2016.8996%204.79716C17.5991%205.24437%2017.8322%206.21866%2017.4242%206.98531Z'%20fill='%23787887'/%3e%3c/svg%3e\";\nconst ic_down_cheveron = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYCAYAAACMcW/9AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF9SURBVHgBxdc9UsJAFMDxt0nLMLEiUOUAwGQYD4A34AZS2lpaETqvYKWcQD0BwwEMmST0dIaOC5D4HiNOVPKxH1n+BbOzbOCXLXYSBli/fz1mLLvFocUYvIXhxwIulOO4VrttzLIMpt9TL1Hk37PBYEQTz/nFiPXC0J+D5gjZahlL/H83P4/oudnpdF9xbP25ZmzbXdjtPlegqSIkRXMGrTl3Id6FNxyOZqChMuQp3FF7jGan4PvGd7YOEjftyez17BUOJoi1QDO2DhKZizhe35lJkuwR+64bWxcZRespjUz60I3lRf5AdWJFkL+gOrCiyH/QJrEyyLPQJrCyyEKoSqwKZClUBVYVshIqg1WJrAUVwapGUgw4cl3XORzYsuTZ4PiImKYwUYk8/i5wVgdbHj+S4oZS4lgxJCUEpfix4kjKAMGCINiaZnaDgG3VWnqVkEFSwjt6qmpnCRnHvgeSSUOpIqwqJFXrHK0qd85eIRaPpWyfpuxhs/EfQVFf6r8x6vq0TDAAAAAASUVORK5CYII=\";\nconst CareAIPage = ({\n  appId,\n  isCareAIPage = false,\n  currentLocation = \"\",\n  isUserLoggedIn = false,\n  botLogo = BotLogo,\n  reloadIcon = ReloadIcon,\n  modalClassName = \"care-ai-modal\",\n  fullscreenModalClassName = \"care-ai-modal-fullscreen\",\n  botName = \"Care AI\",\n  botStatus = \"Active\",\n  historyText = \"History\",\n  trackEvent = () => {\n  }\n}) => {\n  const [isChatOpen, setIsChatOpen] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(isUserLoggedIn);\n  const [showChatHistory, setShowChatHistory] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [showLoginModal, setShowLoginModal] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(!isUserLoggedIn);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (isCareAIPage) {\n      if (!isUserLoggedIn) {\n        setShowLoginModal(true);\n        setIsChatOpen(false);\n      } else {\n        setShowLoginModal(false);\n        setIsChatOpen(true);\n      }\n    }\n  }, [isCareAIPage, isUserLoggedIn]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (isChatOpen || showLoginModal) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"\";\n    }\n    return () => {\n      document.body.style.overflow = \"\";\n    };\n  }, [isChatOpen, showLoginModal]);\n  const handleCloseArrow = () => {\n    setIsChatOpen(false);\n    setShowLoginModal(false);\n  };\n  const renderLoginModal = () => {\n    if (showLoginModal && !isChatOpen) {\n      return /* @__PURE__ */ jsxRuntimeExports.jsx(\n        LoginModal,\n        {\n          setIsChatOpen,\n          showLoginModal,\n          setShowLoginModal\n        }\n      );\n    }\n    return null;\n  };\n  const renderModalHeader = () => {\n    if (!showChatHistory) {\n      return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$1.careAIModalHeader, children: [\n        /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$1.careAIModalProfile, children: [\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"button\", { onClick: handleCloseArrow, className: styles$1.careAIToggleButton, children: isChatOpen && /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: ic_down_cheveron, alt: \"ic_down_cheveron\", width: \"14\", height: \"8\" }) }),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { className: styles$1.careAIModalAvata, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\"img\", { src: botLogo, alt: \"care-ai-avatar\", width: \"36\", height: \"36\" }) }),\n          /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$1.careAIModalUserInfo, children: [\n            /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$1.careAIHeaderUserName, children: botName }),\n            /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$1.careAIHeaderUserStatus, children: botStatus })\n          ] })\n        ] }),\n        /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { className: styles$1.careAiHeaderHistory, onClick: () => setShowChatHistory(true), children: [\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\n            \"img\",\n            {\n              src: reloadIcon,\n              alt: \"reload\",\n              width: \"20\",\n              height: \"20\"\n            }\n          ),\n          /* @__PURE__ */ jsxRuntimeExports.jsx(\"span\", { className: styles$1.careAIHistory, children: historyText })\n        ] })\n      ] });\n    }\n    return null;\n  };\n  const careAiChatContainerStyle = {\n    height: `${showChatHistory ? \"100%\" : \"calc(100% - 62px\"}`\n  };\n  const renderCareAIModal = () => {\n    if (isChatOpen && !showLoginModal) {\n      return /* @__PURE__ */ jsxRuntimeExports.jsxs(\n        BottomModal,\n        {\n          isOpen: true,\n          contentClassName: isCareAIPage ? fullscreenModalClassName : modalClassName,\n          closeModal: () => setIsChatOpen(false),\n          children: [\n            renderModalHeader(),\n            /* @__PURE__ */ jsxRuntimeExports.jsx(\"div\", { style: careAiChatContainerStyle, children: /* @__PURE__ */ jsxRuntimeExports.jsx(\n              CareAiChatContainer,\n              {\n                showChatHistory,\n                setShowChatHistory,\n                appId,\n                currentLocation,\n                trackEvent\n              }\n            ) })\n          ]\n        }\n      );\n    }\n    return null;\n  };\n  return /* @__PURE__ */ jsxRuntimeExports.jsxs(\"div\", { children: [\n    renderLoginModal(),\n    renderCareAIModal()\n  ] });\n};\n\n//# sourceMappingURL=index-CAyIAEUS.js.map\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../../node-libs-browser/node_modules/buffer/index.js */ \"./node_modules/node-libs-browser/node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://BottomSticky/./node_modules/@practo/practo-ai/dist/index-CAyIAEUS.js?");

/***/ }),

/***/ "./node_modules/@practo/practo-ai/dist/index.es.js":
/*!*********************************************************!*\
  !*** ./node_modules/@practo/practo-ai/dist/index.es.js ***!
  \*********************************************************/
/*! exports provided: CareAIBottomStickyModal, CareAIPage, CareAiChat, LoginModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _index_CAyIAEUS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-CAyIAEUS.js */ \"./node_modules/@practo/practo-ai/dist/index-CAyIAEUS.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CareAIBottomStickyModal\", function() { return _index_CAyIAEUS_js__WEBPACK_IMPORTED_MODULE_0__[\"d\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CareAIPage\", function() { return _index_CAyIAEUS_js__WEBPACK_IMPORTED_MODULE_0__[\"e\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CareAiChat\", function() { return _index_CAyIAEUS_js__WEBPACK_IMPORTED_MODULE_0__[\"C\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"LoginModal\", function() { return _index_CAyIAEUS_js__WEBPACK_IMPORTED_MODULE_0__[\"L\"]; });\n\n\n\n//# sourceMappingURL=index.es.js.map\n\n\n//# sourceURL=webpack://BottomSticky/./node_modules/@practo/practo-ai/dist/index.es.js?");

/***/ }),

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n//# sourceURL=webpack://BottomSticky/./node_modules/base64-js/index.js?");

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n//# sourceURL=webpack://BottomSticky/./node_modules/ieee754/index.js?");

/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n//# sourceURL=webpack://BottomSticky/./node_modules/isarray/index.js?");

/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/buffer/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/buffer/index.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(/*! base64-js */ \"./node_modules/base64-js/index.js\")\nvar ieee754 = __webpack_require__(/*! ieee754 */ \"./node_modules/ieee754/index.js\")\nvar isArray = __webpack_require__(/*! isarray */ \"./node_modules/isarray/index.js\")\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://BottomSticky/./node_modules/node-libs-browser/node_modules/buffer/index.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack://BottomSticky/(webpack)/buildin/global.js?");

/***/ })

}]);